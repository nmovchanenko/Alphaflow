function config($stateProvider,$urlRouterProvider,$locationProvider,$ocLazyLoadProvider){$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!0).hashPrefix("!"),String.prototype.initCap=function(){return this.charAt(0).toUpperCase()+this.slice(1)},jQuery.ajaxSetup({cache:!0}),$urlRouterProvider.when("/","/login"),$stateProvider.state("tos",{url:"/tos",templateUrl:"views/corp/tos.html",data:{pageTitle:"Terms and Conditions",pageDescription:"AlphaFlow Terms and Conditions",requireLogin:!1}}).state("privacy",{url:"/privacy",templateUrl:"views/corp/privacy.html",data:{pageTitle:"Privacy Policy",pageDescription:"AlphaFlow Terms and Conditions",requireLogin:!1}}).state("login",{url:"/login?errormsg&loginErrorMsg",controller:"LoginCtrl",templateUrl:"views/login.html"}).state("signup",{url:"/signup?errormsg",controller:"SignupCtrl",templateUrl:"views/signup.html"}).state("activate",{url:"/activate/:activationCode",controller:"AccountActivationCtrl",templateUrl:"views/accountActivation.html"}).state("resendActivation",{url:"/resend-activation",controller:"ResendActivationCtrl",templateUrl:"views/resendActivation.html"}).state("passwordReset",{url:"/reset-password?errormsg&password_reset_code",controller:"LoginCtrl",templateUrl:"views/login.html"}).state("logout",{url:"/logout",controller:function($scope){$scope.logout()}}).state("admin",{"abstract":!0,templateUrl:"views/common/content.html",url:"/admin"}).state("admin.dashboard",{controller:"AdminDashboardCtrl",url:"/dashboard",templateUrl:"views/admin/dashboard.html",data:{pageTitle:"Dashboard",requireLogin:!0,requireAdmin:!0}}).state("admin.investments",{controller:"AdminInvestmentsCtrl",url:"/investments",templateUrl:"views/admin/investments.html",data:{pageTitle:"Investments"}}).state("admin.users",{controller:"AdminUsersCtrl",url:"/users",templateUrl:"views/admin/users.html",data:{pageTitle:"Users"}}).state("admin.security",{controller:"AdminSecurityCtrl",url:"/security",templateUrl:"views/admin/security.html",data:{pageTitle:"Security"}}).state("ai",{"abstract":!0,url:"/ai",templateUrl:"views/common/content.html",resolve:{loadPlugin:function($ocLazyLoad){var plugins=$ocLazyLoad.load([{name:"ui.event",files:["/scripts/plugins/uievents/event.js"]},{name:"ui.map",files:["/scripts/plugins/uimaps/ui-map.js"]}]);return plugins}}}).state("ai.dashboard_realestate",{controller:"AIDashboardCtrl",url:"/dashboard/realestate",templateUrl:"views/dashboard.html",data:{pageTitle:"Real Estate - Investment Dashboard",requireLogin:!0,requireConnectedPlatforms:!0}}).state("ai.dashboard_consumerloans",{controller:"AIDashboardConsumerloansCtrl",url:"/dashboard/consumerloans",templateUrl:"views/dashboard_consumerloans.html",data:{pageTitle:"Consumer Loans - Investment Dashboard",requireLogin:!0,requireConnectedPlatforms:!0}}).state("ai.cashflows",{controller:"AICashflowsCtrl",url:"/cashflows",templateUrl:"views/cashflows.html",data:{pageTitle:"Cashflows",requireLogin:!0,requireConnectedPlatforms:!0}}).state("ai.platformmetrics",{controller:"AIPlatformMetricsCtrl",url:"/platformmetrics",templateUrl:"views/platformmetrics.html",data:{pageTitle:"Platform Metrics",requireLogin:!0,requireConnectedPlatforms:!0}}).state("ai.publicmarkets",{controller:"AIPublicMarketsCtrl",url:"/publicmarkets",templateUrl:"views/publicmarkets.html",data:{pageTitle:"Market Performance",requireLogin:!0,requireConnectedPlatforms:!0}}).state("ai.profile",{controller:"AIProfileCtrl",url:"/profile",templateUrl:"views/profile.html",data:{pageTitle:"Profile Settings",requireLogin:!0},resolve:{profile:function(api){return api.user.getProfile()}}}).state("ai.accounts",{controller:"AIAccountsCtrl",url:"/accounts",templateUrl:"views/accounts.html",data:{pageTitle:"Connected Platform Accounts",requireLogin:!0}})}$(document).ready(function(){function fix_height(){var heightWithoutNavbar=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",heightWithoutNavbar+"px");var navbarHeigh=$("nav.navbar-default").height(),wrapperHeigh=$("#page-wrapper").height();navbarHeigh>wrapperHeigh&&$("#page-wrapper").css("min-height",navbarHeigh+"px"),wrapperHeigh>navbarHeigh&&$("#page-wrapper").css("min-height",$(window).height()+"px")}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||fix_height()}),$("body").scrollspy({target:".navbar-fixed-top",offset:80}),setTimeout(function(){fix_height()})}),$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),$(document).ready(function($){$(window).resize(function(){$("body").removeClass("nav-expanded")}),$(document).on("click","#nav-expander",function(e){e.preventDefault(),$("body").toggleClass("nav-expanded")}),$(document).on("swiperight","#wrap",function(){$("body").removeClass("nav-expanded")}),$(document).on("swipeleft","#wrap",function(){$("body").addClass("nav-expanded")})}),function(){angular.module("app",["ngAnimate","ui.router","ui.bootstrap","ui.bootstrap.modal","app.config","oc.lazyLoad","angular-jwt","angulartics","angulartics.google.analytics","NgSwitchery","cgNotify","kendo.directives","ui.grid","ui.grid.edit","ui.grid.rowEdit","ui.grid.cellNav","ui.grid.resizeColumns","ui.grid.moveColumns","ui.grid.expandable","ngWebsocket","ngBusy"])}(),angular.module("app.config",[]).constant("ENV",{name:"qa",apiEndpoint:"http://api-qa.alphaflow.com",authEndpoint:"http://auth-qa.alphaflow.com"}),angular.module("app").config(["$httpProvider","jwtInterceptorProvider","$websocketProvider",function($httpProvider,jwtInterceptorProvider,$websocketProvider){jwtInterceptorProvider.tokenGetter=function(){return window.sessionStorage.getItem("token")||window.localStorage.getItem("token")},$httpProvider.interceptors.push("jwtInterceptor"),$httpProvider.interceptors.push(function($q,$location,$window,$rootScope,jwtHelper){return{request:function(request){return request.headers["x-af-sec-token"]=getSecToken(),request},response:function(response){if(response.headers("Authorization")){var tokenParam=response.headers("Authorization").replace(/bearer /gi,"");$window.sessionStorage.token=tokenParam,$rootScope.user=jwtHelper.decodeToken(tokenParam)||"{}"}return response},responseError:function(response){if(401===response.status)return"/login"!==$location.path()&&($window.sessionStorage.redirectTo=$location.path()),$rootScope.logout(),$q.reject(response);if(403===response.status)return response.data={error:{userMessage:"You are not authorized to perform this action"}},$q.reject(response);if(429===response.status)return response.data={error:{userMessage:"It looks like you're typing really fast. Slow down a bit"}},$q.reject(response);if(!response.status){var connectionLostUserMsg="You appear to be offline";response.data={error:{userMessage:connectionLostUserMsg}},$rootScope.notifyConnectionLost(connectionLostUserMsg)}return $q.reject(response)}}});var getSecToken=(function(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}}(),function(){});$websocketProvider.$setup({lazy:!1,reconnect:!0,reconnectInterval:1e3,enqueue:!0})}]).factory("api",function($http,$window,$interval,$timeout,$rootScope,$websocket,ENV){function sessionNotExpiredCheck(){return $rootScope.user&&$rootScope.user.name&&$rootScope.user.exp>Math.round((new Date).getTime()/1e3)?!0:!1}function event(){var callbacks=$.Callbacks();return{subscribe:function($scope,fn){fn?$scope.$on("$destroy",function(){callbacks.remove(fn)}):fn=$scope,callbacks.add(fn)},unsubscribe:callbacks.remove,publish:callbacks.fire}}function index(obj,i){return obj[i]}var api={events:{}},parseQuery=function(params){var query="";if(params)for(var key in params){var value="object"==typeof params[key]?JSON.stringify(params[key]):params[key];query+=query?"&":"/?",query+=key.toLowerCase()+"="+value}return query};api.websocket={config:{pingInterval:25e3},connect:function(url){var ws,$intervalInstance=null;api.websocket.instance=$websocket.$new(url),ws=api.websocket.instance,ws.$on("$open",function(){$intervalInstance=$interval(function(){sessionNotExpiredCheck()?ws.$emit("ping"):ws.$close()},api.websocket.config.pingInterval),api.websocket.connected.publish.apply(this,arguments),$rootScope.$apply()}),ws.$on("$close",function(){$intervalInstance&&$interval.cancel($intervalInstance),api.websocket.disconnected.publish.apply(this,arguments),$rootScope.$apply()}),ws.$on("$message",function(event){event.method&&event.method.split(".").reduce(index,api)&&(event.method.split(".").reduce(index,api).publish(event.params),$rootScope.$apply())})},disconnect:function(){api.websocket.instance&&api.websocket.instance.$close()},connected:event(),disconnected:event()},api.user={updated:event(),signUp:function(newUser){return $http({method:"POST",url:ENV.apiEndpoint+"/signup",data:newUser})},activate:function(activationCode){return $http({method:"GET",url:ENV.apiEndpoint+"/activate/"+activationCode})},resendActivation:function(email){return $http({method:"POST",url:ENV.apiEndpoint+"/resend-activation",data:{email:email}})},checkEmailAvailability:function(email){return $http({method:"POST",url:ENV.apiEndpoint+"/does-email-exist",data:{email:email}})},checkResetPasswordCode:function(code){return $http({method:"POST",url:ENV.apiEndpoint+"/check-password-code",data:{passwordResetCode:code}})},login:function(email,password){return $http({method:"POST",url:ENV.apiEndpoint+"/emailLogin",data:{email:email,password:password}})},resetPassword:function(email){return $http({method:"POST",url:ENV.apiEndpoint+"/reset-password",data:{email:email}})},setNewPassword:function(token,password){return $http({method:"POST",url:ENV.apiEndpoint+"/confirm-reset-password",data:{passwordResetCode:token,newPassword:password}})},getProfile:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/profile"})},deleteProfile:function(){return $http({method:"DELETE",url:ENV.apiEndpoint+"/profile"})},updateProfile:function(profile){return $http({method:"PUT",url:ENV.apiEndpoint+"/profile",data:profile})},updateLoginInfo:function(loginInfo){return $http({method:"PUT",url:ENV.apiEndpoint+"/login-information",data:loginInfo})},platform:{connect:function(params){return $http({method:"POST",url:ENV.apiEndpoint+"/profile/platform",data:{platform:params.platform,username:params.username,password:params.password}})},login:function(params){return $http({method:"PUT",url:ENV.apiEndpoint+"/profile/platform/"+params.platform+"/login",data:{username:params.username,password:params.password}})},disconnect:function(params){return $http({method:"DELETE",url:ENV.apiEndpoint+"/profile/platform/"+params.platform})},enable:function(params){return $http({method:"PUT",url:ENV.apiEndpoint+"/profile/platform/"+params.platform+"/enable"})},disable:function(params){return $http({method:"PUT",url:ENV.apiEndpoint+"/profile/platform/"+params.platform+"/disable"})},saveOtherPlatformRequest:function(otherPlatformTxt){return $http({method:"PUT",url:ENV.apiEndpoint+"/profile/platforms/requestother",data:{otherplatform:otherPlatformTxt}})},list:function(params){var query=parseQuery(params);return $http({method:"GET",url:ENV.apiEndpoint+"/profile/activePlatforms"+query})}},analytics:{dashboard:function(params){return $http({method:"GET",url:ENV.apiEndpoint+"/ai/analytics/dashboard"+(params&&params.dashboard?"/?dashboard="+params.dashboard:"")})},reDashboard:function(params){return $http({method:"GET",url:ENV.apiEndpoint+"/ai/analytics/re-dashboard"})}},investments:{list:function(params){var query=parseQuery(params);return $http({method:"GET",url:ENV.apiEndpoint+"/ai/investments"+query})},get:function(params){return $http({method:"GET",url:ENV.apiEndpoint+"/ai/investments/"+params.investmentId})},userData:{update:function(params){return $http({method:"PUT",url:ENV.apiEndpoint+"/ai/investments/"+params.investmentId+"/userdata",data:JSON.stringify({userdata:params.userdata})})},get:function(params){return $http({method:"GET",url:ENV.apiEndpoint+"/ai/investments/"+params.investmentId+"/userdata"})}},platform:{sync:function(params){return $http(params&&params.platformId?{method:"GET",url:ENV.apiEndpoint+"/ai/investments/platform/"+params.platformId+"/sync"}:{method:"GET",url:ENV.apiEndpoint+"/ai/investments/platforms/sync"})}}},cashflows:{updated:event(),list:function(params){var query=parseQuery(params);return $http({method:"GET",url:ENV.apiEndpoint+"/ai/cashflows"+query})}},signout:function(){return $http({method:"POST",url:ENV.apiEndpoint+"/signout"})}},api.markets={stats:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/markets"})}},api.admin={getAdminDashboard:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/admin/dashboard"})},getAllInvestments:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/admin/investments"})},getAllUsers:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/admin/users"})},impersonateUser:function(userId){return $http({method:"GET",url:ENV.apiEndpoint+"/admin/user/"+userId+"/impersonate"})},updateInvestment:function(investment){return $http({method:"PUT",url:ENV.apiEndpoint+"/admin/investment/"+investment._id,data:{investment:investment}})},updateUser:function(user){return $http(user._id?{method:"PUT",url:ENV.apiEndpoint+"/admin/user/"+user._id,data:{user:user}}:{method:"POST",url:ENV.apiEndpoint+"/admin/users",data:{user:user}})},changeAesKey:function(oldAesKey,newAesKey){return $http({method:"POST",url:ENV.apiEndpoint+"/admin/re-encrypt-all",data:{oldAesKey:oldAesKey,newAesKey:newAesKey}})}},api.platform={updateProgress:event(),updated:event(),syncError:event(),turnedOff:event(),list:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/platform"})},metrics:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/platform/stats/metrics"})},investmentMap:function(){return $http({method:"GET",url:ENV.apiEndpoint+"/platform/stats/investmentmap"})}},api.user.updated.subscribe($rootScope,function(data){data.token&&(window.sessionStorage.token=data.token),$rootScope.$apply()}),api.user.cashflows.updated.subscribe($rootScope,function(data){$rootScope.$apply()});var token=$window.sessionStorage.token||$window.localStorage.token||"",wsHost=ENV.apiEndpoint.replace(/^http/,"ws");return sessionNotExpiredCheck()&&api.websocket.connect(wsHost+"?access_token="+token),api}),angular.module("app").service("afHelpers",function(){this.fixDateForKendoDateParser=function(date){return!date||"object"!=typeof date||date instanceof Date||(date=""),date&&"number"==typeof date&&(date=new Date(date),date.valueOf()||(date="")),date}}),angular.module("app").factory("errorFn",function(){return function(err,status,$scope,notify){status&&401!==status&&($scope.error=err,notify({message:err.error&&err.error.userMessage?err.error.userMessage:"Request timeout",templateUrl:"../../views/templates/notify.html",classes:"alert-danger",placement:"top"}))}}),angular.module("app").config(config).run(function($rootScope,$state,$urlRouter,ENV,$window,jwtHelper,$location,$q,notify,$injector,$timeout){$rootScope.$state=$state,$rootScope.ENV=ENV;var token=$window.sessionStorage.token||$window.localStorage.token;$rootScope.user=token?jwtHelper.decodeToken(token):"{}",$rootScope.user&&$rootScope.user.name&&$window.Intercom("update",{name:$rootScope.user.name.first+" "+$rootScope.user.name.last,email:$rootScope.user.email,user_id:$rootScope.user.id}),$rootScope.logout=function(loginStateParams){var api=$injector.get("api");api.user.signout(),$timeout(function(){delete $rootScope.user,$window.sessionStorage.token&&(delete $window.sessionStorage.token,delete $window.sessionStorage.user),$window.localStorage.token&&(delete $window.localStorage.token,delete $window.localStorage.user),$window.Intercom("shutdown"),$state.go("login",loginStateParams),api.websocket.disconnect()})},$rootScope.notifyDemoAccount=function(){notify({message:"This feature is disabled for this account.",classes:"alert-warning cg-notify-message-center",templateUrl:"views/templates/notify.html"})};var notifyConnectionLost=function(message){notify({message:message,classes:"alert-danger",templateUrl:"views/templates/notify.html"})};$rootScope.notifyConnectionLost=_.debounce(notifyConnectionLost,3e3,{leading:!0}),$rootScope.loginRequired=function(){var deferred=$q.defer();return!$rootScope.user||!$rootScope.user.name||$rootScope.user.exp<Math.round((new Date).getTime()/1e3)?("/login"!==$location.path()&&($window.sessionStorage.redirectTo=$location.path()),deferred.reject("Not Authenticated"),this.logout()):deferred.resolve(),deferred.promise},$rootScope.isAdminUser=function(){return $rootScope.user&&$rootScope.user.securityRoles&&$rootScope.user.securityRoles.some(function(role){return"superadmin"===role})},$rootScope.$on("$stateChangeStart",function(event,toState,toParams){var requireLogin=!1,requireAdmin=!1,requireConnectedPlatforms=!1;return toState.data&&(requireLogin=toState.data.requireLogin,requireAdmin=toState.data.requireAdmin,requireConnectedPlatforms=toState.data.requireConnectedPlatforms),requireLogin&&(!$rootScope.user||!$rootScope.user.name||$rootScope.user.exp<Math.round((new Date).getTime()/1e3))||requireAdmin&&(!$rootScope.user.securityRoles||-1===$rootScope.user.securityRoles.indexOf("superadmin"))?(event.preventDefault(),void $state.go("login",toParams)):$rootScope.isAdminUser()||!requireConnectedPlatforms||$rootScope.user&&$rootScope.user.connectedPlatforms&&0!==$rootScope.user.connectedPlatforms.length?void 0:(event.preventDefault(),$state.go("ai.accounts"),void notify({message:"Please connect a platform account first",classes:"alert-warning cg-notify-message-center",templateUrl:"views/templates/notify.html"}))})}),angular.module("app").controller("AdminDashboardCtrl",function($scope,api,uiGridConstants,defaultDonutOptions,$modal,$window,notify,$q,errorFn){$scope.kendoDonutOptions=angular.copy(defaultDonutOptions),$scope.kendoDonutOptions.chartArea.height=270,$scope.updateChartData=function(){var usersByConnectedPlatforms=$scope.dashboard.usersByConnectedPlatforms;if(usersByConnectedPlatforms){var chartData=usersByConnectedPlatforms.map(function(item){return{label:item.platformCount.toString(),data:item.userCount}});$scope.chartUsersByConnectedPlatformsData={chartTitle:"Users by # of Connected platforms",dataSource:new kendo.data.DataSource({data:chartData})}}var chartMostPopularPlatformsData=$scope.dashboard.platformByUserCount;if(chartMostPopularPlatformsData){var chartData=chartMostPopularPlatformsData.map(function(item){return{label:item.platform.name,data:item.count}});$scope.chartMostPopularPlatformsData={chartTitle:"Most popular platforms by User #",dataSource:new kendo.data.DataSource({data:chartData})}}},api.admin.getAdminDashboard().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(dashboard){$scope.dashboard=dashboard,$scope.updateChartData()})}),angular.module("app").controller("AdminInvestmentsCtrl",function($scope,api,uiGridConstants,$modal,$window,$q,notify,investmentStatusCode,errorFn){$scope.selectMetric=function(metrics,target){if(console.log(metrics),metrics){var foundIdx;return metrics.find(function(item,index){return foundIdx=index,item.metric===target})?metrics[foundIdx].projected:void 0}},$scope.gridOptions={data:"investments",tabIndex:0,enableRowSelection:!1,enableFiltering:!0,enableCellEditOnFocus:!0,enableColumnReordering:!0,enableColumnResize:!0,showFilter:!0,expandableRowTemplate:'<div ui-grid="row.entity.subGridOptions"></div>',expandableRowHeight:150,expandableRowScope:{subGridVariable:"subGridScopeVariable"},primaryKey:"_id",columnDefs:[{field:"platform.name",displayName:"Platform",enableCellEdit:!1},{field:"name",displayName:"Name",width:"**"},{field:"sponsor",displayName:"Sponsor"},{field:"status",displayName:"Status",editDropdownValueLabel:"status",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownOptionsArray:Object.keys(investmentStatusCode).map(function(key,index){return{id:parseInt(key),status:investmentStatusCode[key]}}),filter:{type:uiGridConstants.filter.SELECT,selectOptions:Object.keys(investmentStatusCode).map(function(key,index){return{value:key,label:investmentStatusCode[key]}})},cellFilter:"mapInvestmentStatus"},{field:"type",displayName:"Type",editDropdownValueLabel:"type",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownOptionsArray:[{id:"Debt",type:"Debt"},{id:"Equity",type:"Equity"}],filter:{type:uiGridConstants.filter.SELECT,selectOptions:[{value:"Debt",label:"Debt"},{value:"Equity",label:"Equity"}]}},{field:"class",displayName:"Class",editDropdownValueLabel:"class",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownOptionsArray:[{id:"Residential","class":"Residential"},{id:"Mixed-use","class":"Mixed-use"},{id:"Multifamily","class":"Multifamily"},{id:"Office","class":"Office"},{id:"Retail","class":"Retail"},{id:"Storage","class":"Storage"},{id:"Hospitality","class":"Hospitality"},{id:"MobileHome","class":"Mobile Home"},{id:"Industrial","class":"Industrial"}],filter:{type:uiGridConstants.filter.SELECT,selectOptions:[{value:"Residential",label:"Residential"},{value:"Mixed-use",label:"Mixed-use"},{value:"Multifamily",label:"Multifamily"},{value:"Office",label:"Office"},{value:"Retail",label:"Retail"},{value:"Storage",label:"Storage"},{value:"Hospitality",label:"Hospitality"},{value:"MobileHome",label:"Mobile Home"},{value:"Industrial",label:"Industrial"}]}},{field:'selectMetric(row.entity.metrics, "556636a1f76733013c3dbe35")',displayName:"Term (mo)",enableCellEdit:!1},{field:"amount",displayName:"Amount",cellFilter:"currency:$:0",enableCellEdit:!0},{field:"paySchedule.frequency",displayName:"Pay Frequency",editDropdownValueLabel:"PayFrequency",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownOptionsArray:[{id:-1,PayFrequency:"At Maturity"},{id:1,PayFrequency:"Monthly"},{id:3,PayFrequency:"Quarterly"},{id:12,PayFrequency:"Yearly"}],filter:{type:uiGridConstants.filter.SELECT,selectOptions:[{value:-1,label:"At Maturity"},{value:1,label:"Monthly"},{value:3,label:"Quarterly"},{value:12,label:"Yearly"}]},cellFilter:"mapPayFrequency"},{field:"paySchedule.firstPayOn",displayName:"First Pay On",enableFiltering:!1,cellFilter:"date:'shortDate'"},{field:"events.closedOn",displayName:"Closed On",enableFiltering:!1,cellFilter:"date:'shortDate'"},{field:"events.maturesOn",displayName:"Matures On",enableFiltering:!1,cellFilter:"date:'shortDate'"},{field:"events.nextDistributionOn",displayName:"Next Pmnt",enableFiltering:!1,cellFilter:"date:'shortDate'"},{field:"lastUpdate",displayName:"Last edited",enableFiltering:!1,enableCellEdit:!1,cellFilter:"date:'short'"},{field:"lastSync",displayName:"Last auto Sync",enableFiltering:!1,enableCellEdit:!1,cellFilter:"date:'short'"}]},api.admin.getAllInvestments().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(investments){$scope.investments=investments}),$scope.saveRow=function(rowEntity){$scope.gridApi.rowEdit.setSavePromise(rowEntity,api.admin.updateInvestment(rowEntity))},$scope.gridOptions.onRegisterApi=function(gridApi){$scope.gridApi=gridApi,gridApi.rowEdit.on.saveRow($scope,$scope.saveRow),gridApi.expandable.on.rowExpandedStateChanged($scope,function(row){row.isExpanded&&(row.entity.subGridOptions={enableCellEditOnFocus:!0,columnDefs:[{field:"metric.name",displayName:"Metric"},{name:"projected",enableCellEdit:!0},{name:"actual"}]},row.entity.subGridOptions.data=row.entity.metrics)})}}),angular.module("app").controller("AdminUsersCtrl",function($scope,api,uiGridConstants,$modal,$window,notify,$q,errorFn){$scope.gridOptions={data:"users",tabIndex:0,enableFiltering:!0,enableRowSelection:!1,enableCellEditOnFocus:!0,enableColumnReordering:!0,enableColumnResize:!0,enableSorting:!0,showFilter:!0,primaryKey:"_id",columnDefs:[{field:"id",displayName:"",enableCellEdit:!1,enableFiltering:!1,width:35,cellTemplate:"views/templates/impersonateCellTemplate.tpl.html"},{field:"name.first",displayName:"First Name"},{field:"name.nickname",displayName:"Nickname"},{field:"name.last",displayName:"Last Name"},{field:"email",displayName:"Email"},{field:"status",displayName:"Status",width:"*",editDropdownValueLabel:"status",editableCellTemplate:"ui-grid/dropdownEditor",editDropdownOptionsArray:[{id:"active",status:"active"},{id:"invited",status:"invited"},{id:"new",status:"new"}],filter:{type:"uiGridConstants.filter.SELECT",selectOptions:[{value:"active",label:"active"},{value:"invited",label:"invited"},{value:"new",label:"new"}]}},{field:"connectedPlatforms.length",displayName:"Platforms",enableCellEdit:!1},{field:"dateCreated",displayName:"Signed-up On",enableCellEdit:!1,enableFiltering:!1,cellFilter:"date:'short'",sort:{direction:uiGridConstants.DESC,priority:1}},{field:"dateLastLogin",displayName:"Last login",enableCellEdit:!1,enableFiltering:!1,cellFilter:"date:'short'"}]},api.admin.getAllUsers().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(users){$scope.users=users,$scope.users.push({})}),$scope.impersonateUser=function(grid,row){api.admin.impersonateUser(row.entity._id).error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(response,status,headers){$window.open(response.location,"_blank")})},$scope.gridOptions.onRegisterApi=function(gridApi){$scope.gridApi=gridApi,gridApi.rowEdit.on.saveRow($scope,$scope.addUpdateUser)},$scope.addUpdateUser=function(rowEntity){var promise=$q.defer();$scope.gridApi.rowEdit.setSavePromise(rowEntity,promise.promise),api.admin.updateUser(rowEntity).success(function(res){res&&res._id&&(rowEntity._id=res._id,$scope.users.push({})),promise.resolve()}).error(promise.reject)}}),angular.module("app").controller("AdminSecurityCtrl",function($scope,$rootScope,api,aesKeyRegex,notify,errorFn){$scope.aesKeyRegex=aesKeyRegex,$scope.shangeAESKey=function(){api.admin.changeAesKey($scope.oldAESKey,$scope.newAESKey).success(function(){notify({message:"AES key has been successfully changed"}),$rootScope.logout()}).error(function(err,status){errorFn(err,status,$scope,notify)})}}),angular.module("app").controller("AIAccountsCtrl",function($scope,api,$modal,$timeout,notify,errorFn){function checkSyncing(){var SyncingPlatforms=$scope.availablePlatforms.some(function(platform,index){return platform.refreshInProgress});SyncingPlatforms&&($scope.SyncingProgress=!0)}function checkActivePlatforms(){var anyActivePlatform=$scope.availablePlatforms.some(function(item){return item.active});$scope.anyActivePlatform=anyActivePlatform}$scope.platformStatesMessages={on:"IMPORTING",off:"NOT IMPORTING",syncing:"Syncing...",syncError:"SYNC ERROR",invalidCredentials:"Invalid Username/Password"},$scope.SyncingProgress=!1,$scope.anyActivePlatform=!1,api.user.getProfile().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(profile){profile&&($scope.requestOtherPlatforms.text=profile.otherPlatformRequest)}),api.platform.updateProgress.subscribe($scope,function(data){$scope.updatePlatformStatus(data,"updateProgress")}),api.platform.updated.subscribe($scope,function(data){$scope.updatePlatformStatus(data,"updated")}),api.platform.syncError.subscribe($scope,function(data){$scope.updatePlatformStatus(data,"syncError")}),api.platform.turnedOff.subscribe($scope,function(data){$scope.updatePlatformStatus(data,"turnedOff")}),$scope.refreshPlatformStatus=function(){api.platform.list().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(platforms){platforms&&($scope.availablePlatforms=platforms,checkSyncing(),checkActivePlatforms())})},$scope.$watch("user.connectedPlatforms",$scope.refreshPlatformStatus),$scope.updateAllPlatforms=function(){return $scope.user.securityRoles&&$scope.user.securityRoles.indexOf("demo_account")>=0?void $scope.notifyDemoAccount():void $scope.availablePlatforms.forEach(function(platform,index){platform.connectedOn&&$scope.synchAccount(index)})},$scope.synchAccount=function(index){if($scope.user.securityRoles&&$scope.user.securityRoles.indexOf("demo_account")>=0)return void $scope.notifyDemoAccount();var platform=$scope.availablePlatforms[index];platform.active?(platform.refreshInProgress=!0,platform.updateError=null,platform.syncMessage=null,$scope.SyncingProgress=!0,api.user.investments.platform.sync({platformId:platform._id}).error(function(err,status){errorFn(err,status,$scope,notify)})):platform.connectionStatusMessage===$scope.platformStatesMessages.invalidCredentials&&$timeout(function(){angular.element(".af-platforms .js-switch[data-platform-id="+platform._id+"]").trigger("click")})},$scope.updatePlatformStatus=function(data,status){$scope.availablePlatforms.some(function(platform,index){if(platform._id===data.platformId)if("updateProgress"===status)platform.syncMessage=data.message;else{if("updated"===status)platform.lastUpdated=new Date(Date.now()),platform.connectionStatusMessage=$scope.platformStatesMessages.on;else if("syncError"===status){var defaultMessage="Can't update "+platform.name+", please try again later.";platform.updateError=data.messageToDisplay||defaultMessage,platform.connectionStatusMessage=$scope.platformStatesMessages.syncError}else platform.active&&$timeout(function(){platform.omitCheckboxChangeEvent=!0,angular.element(".af-platforms .js-switch[data-platform-id="+platform._id+"]").trigger("click")}),platform.updateError="Can't update "+platform.name+", reason: wrong username or password.",platform.connectionStatusMessage=$scope.platformStatesMessages.invalidCredentials;platform.refreshInProgress&&(platform.refreshInProgress=!1,checkSyncing())}})},$scope.togglePlaftormStatus=function(platform){platform.omitCheckboxChangeEvent?platform.omitCheckboxChangeEvent=!1:platform.active?platform.connectionStatusMessage===$scope.platformStatesMessages.invalidCredentials?$modal.open({resolve:{data:function(){return{platform:platform}}},templateUrl:"views/templates/connect-platform.tpl.html",controller:"ConnectPlatformModalInstanceCtrl"}).result.then(function(formData){platform.refreshInProgress=!0,platform.updateError=null,platform.syncMessage=null,$scope.SyncingProgress=!0,checkActivePlatforms()},function(reason){$timeout(function(){platform.omitCheckboxChangeEvent=!0,angular.element(".af-platforms .js-switch[data-platform-id="+platform._id+"]").trigger("click")})}):api.user.platform.enable({platform:platform._id}).success(function(){[$scope.platformStatesMessages.invalidCredentials,$scope.platformStatesMessages.syncError].indexOf(platform.connectionStatusMessage)<0&&(platform.connectionStatusMessage=$scope.platformStatesMessages.on),checkActivePlatforms()}).error(function(err,status){errorFn(err,status,$scope,notify)}):api.user.platform.disable({platform:platform._id}).success(function(){[$scope.platformStatesMessages.invalidCredentials,$scope.platformStatesMessages.syncError].indexOf(platform.connectionStatusMessage)<0&&(platform.connectionStatusMessage=$scope.platformStatesMessages.off),checkActivePlatforms()}).error(function(err,status){errorFn(err,status,$scope,notify)})},$scope.disconnectPlatform=function(platform){api.user.platform.disconnect({platform:platform._id}).success(function(){platform.enabled=!1,platform.active=!1,platform.connectionStatusMessage=$scope.platformStatesMessages.off,platform.updateError=null,platform.syncMessage=null,delete platform.lastUpdated,delete platform.connectedOn,checkActivePlatforms()}).error(function(err,status){errorFn(err,status,$scope,notify)})},$scope.platformConnectSwitch=function(platform){$scope.user.securityRoles&&$scope.user.securityRoles.indexOf("demo_account")>=0?$scope.notifyDemoAccount():platform.enabled?$modal.open({resolve:{data:function(){return{title:"Confirm disconnect?",content:"Are you sure you want to disconnect your "+platform.name+" account?",elem:platform}}},templateUrl:"views/templates/modal-confirm.tpl.html",controller:"ConfirmModalInstanceCtrl"}).result.then(function(){$scope.disconnectPlatform(platform)},function(reason){platform.enabled=!0;
}):$modal.open({resolve:{data:function(){return{platform:platform}}},templateUrl:"views/templates/connect-platform.tpl.html",controller:"ConnectPlatformModalInstanceCtrl"}).result.then(function(formData){checkActivePlatforms()},function(reason){})},$scope.requestOtherPlatforms={btnValue:"Send",btnEnabled:!0,trackChange:function(){$scope.requestOtherPlatforms.btnValue="Send",$scope.requestOtherPlatforms.btnEnabled=!0}},$scope.saveOtherPlatformRequest=function(e){$scope.requestOtherPlatforms.text&&$scope.requestOtherPlatforms.text.trim()&&($scope.requestOtherPlatforms.btnValue="Sent!",$scope.requestOtherPlatforms.btnEnabled=!1,api.user.platform.saveOtherPlatformRequest($scope.requestOtherPlatforms.text.trim()).error(function(err,status){errorFn(err,status,$scope,notify)}))},$scope.refreshPlatformStatus()}),angular.module("app").controller("AIDashboardCtrl",function($timeout,$scope,$state,api,$modal,$window,investmentStatus,investmentStatusCode,investmentAssetClass,statesList,notify,chartColors,defaultDonutOptions,errorFn){function initCustomFilter(attrs){return{enabled:!0,delay:filterDelay,operator:attrs.op,showOperators:!!attrs.showOp}}function initCustomFilterDropdown(data,attrs){return{enabled:!0,operator:attrs.op,showOperators:!!attrs.showOp,placeholder:attrs.placeholder||"",template:function(container){container.element.kendoDropDownList({autoBind:!1,dataTextField:attrs.text,dataValueField:attrs.value,valuePrimitive:!0,serverFiltering:!0,dataSource:data||$scope.dashboardGridDataSource})}}}function getGridColumns(){return[{field:"platformName",width:"10%",title:"Platform",template:"<div my-inv-icon></div>",filterable:{cell:initCustomFilterDropdown(new kendo.data.DataSource({serverFiltering:!0,transport:{read:function(params){api.user.platform.list({assetClass:investmentAssetClass["Real Estate"]}).success(function(data){params.success(data.sort(function(a,b){return a.name>b.name?1:-1}))})}}}),{op:"eq",text:"name",value:"platformName",placeholder:"Select Platform"})}},{field:"investment.name",width:"16%",title:"Investment",template:"<div my-inv-name></div>",filter:"contain",filterable:{cell:initCustomFilter({showOp:!1,op:"contain"})}},{field:"investment.type",width:"8%",title:"Type",template:"<div my-inv-type></div>",filterable:{cell:initCustomFilterDropdown($scope.investmentTypes,{op:"contain",text:"text",value:"value"})}},{field:"amount",width:"9%",title:"Invested",template:"<div my-inv-invested></div>",filterable:{cell:initCustomFilter({showOp:!0,op:"eq"})}},{field:"investment.class",width:"10%",title:"Class",template:"<div my-inv-class></div>",filterable:{cell:initCustomFilterDropdown($scope.investmentClasses,{op:"eq",text:"text",value:"text"})}},{field:"maturesOn",width:"10%",title:"Maturity",template:"<div my-inv-maturity></div>",filterable:{cell:initCustomFilter({showOp:!0,op:"eq"},"Select Date")}},{field:"investment.sponsor",width:"8%",title:"Sponsor",template:"<div my-inv-sponsor></div>",filterable:{cell:initCustomFilter({showOp:!1,op:"contain"})}},{field:"state",width:"6%",title:"State",template:"<div my-inv-state></div>",filterable:{cell:initCustomFilterDropdown($scope.statesList,{op:"contain",text:"abbreviation",value:"state"})}},{field:"status",width:"9%",title:"Status",template:"<div my-inv-status></div>",filterable:{cell:initCustomFilterDropdown($scope.investmentStatuses,{op:"eq",showOp:!1,text:"text",value:"status"})}},{field:"amount",width:"4%",title:"% of $",template:"<div my-inv-active-amnt align='center'></div>",filterable:!1}]}function parseQuery(obj){var defaultLimit=100,attachMissingPrincipals=!0,query={},filters=obj.filter?obj.filter.filters:[],sort=obj.sort||[];query.limit=defaultLimit,query.attachMissingPrincipals=attachMissingPrincipals;for(var i=0;i<filters.length;i++){query.filter=query.filter||{};var params=filters[i].field.split("."),value="string"==typeof filters[i].value?filters[i].value.trim():filters[i].value,operator=filters[i].operator,key=params[0];operator="startswith"==operator?"contain":operator,2==params.length?(query.filter[key]||(query.filter[key]={}),query.filter[key][params[1]]={value:value,operator:operator}):1==params.length&&(query.filter[key]={value:value,operator:operator})}for(query.filter&&(query.filter.status&&(query.filter.status.value=investmentStatus[query.filter.status.value]),query.filter.maturesOn&&(query.filter.maturesOn.value=new Date(query.filter.maturesOn.value).getTime())),i=0;i<sort.length;i++){query.sort=query.sort||{};var params=sort[i].field.split("."),value=sort[i].dir,key=params[0];2==params.length?(query.sort[key]||(query.sort[key]={}),query.sort[key][params[1]]=value):1==params.length&&(query.sort[key]=value)}return query}$scope.dataPresent=!1,$scope.dataObtainProgress=!0,$scope.investmentStatusCode=investmentStatusCode,$scope.investmentStatus=investmentStatus,$scope.investmentAssetClass=investmentAssetClass,$scope.statesList=statesList,$scope.investmentTypes=[{text:"Debt",value:"debt"},{text:"Equity",value:"equity"}],$scope.investmentClasses=[{text:"Residential"},{text:"Hospitality"},{text:"Mixed-use"},{text:"Mobile Home"},{text:"Multifamily"},{text:"Office"},{text:"Retail"},{text:"Storage"},{text:"Industrial"}].sort(function(a,b){return a.text>b.text?1:-1}),$scope.showInvestmentDetail=function(contrib){$modal.open({resolve:{data:function(){var investmentId=contrib.investmentId||contrib.investment._id;return api.user.investments.get({investmentId:investmentId}).error(function(err){errorFn(err,status,$scope,notify)})},investmentStatusCode:function(){return investmentStatusCode}},size:"lg",templateUrl:"views/templates/investment-summary.tpl.html",controller:"InvestmentDetailsModalCtrl"})},$scope.investmentStatuses=function(){var res=[];for(var key in investmentStatusCode)res.push({text:investmentStatusCode[key],value:key});return res.sort(function(a,b){return a.text>b.text?1:-1})}(),$scope.kendoDonutOptions=angular.copy(defaultDonutOptions),$scope.kendoDonutOptions.chartArea.height=250,$scope.plotMap=function(data){if($window.isGoogleReady){var mapCenter=new google.maps.LatLng(39.5,-98.35);$scope.myInvestmentsMap=new google.maps.Map(document.getElementById("myInvestmentsMap"),{zoom:4,center:mapCenter,styles:[{featureType:"water",stylers:[{saturation:43},{lightness:-11},{hue:"#0088ff"}]},{featureType:"poi",stylers:[{visibility:"off"}]}],mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1}),data.forEach(function(invData){var marker=new google.maps.Marker({position:new google.maps.LatLng(invData.lat,invData.lng),title:invData.name,animation:google.maps.Animation.DROP,map:$scope.myInvestmentsMap});marker.addListener("click",function(){$scope.showInvestmentDetail(invData)})}),$timeout(function(){google.maps.event.trigger($scope.myInvestmentsMap,"resize"),$scope.myInvestmentsMap.setCenter(mapCenter)})}},$scope.initMyInvestmentsTable=function(){$scope.myInvestmentsTable={dtOptions:DTOptionsBuilder.newOptions().withBootstrap().withPaginationType("full_numbers")}},$scope.myInvestmentTableControls={},$scope.isActiveStatus=function(status){return-1!==[investmentStatus.Funding,investmentStatus.Funded,investmentStatus.Active].indexOf(status)},$scope.updateStats=function(){$scope.stats={investments:{debt:{active:{count:0,amount:0},count:0,amount:0},equity:{active:{count:0,amount:0},count:0,amount:0}}}},$scope.parseGridData=function(data){return data?(data.forEach(function(inv){var round=function(i){return Math.round(100*i)/100},amount=$scope.stats?inv.amount/($scope.stats.investments.equity.active.amount+$scope.stats.investments.debt.active.amount)*100:0;inv.investment||(inv.investment={}),inv.investment.events||(inv.investment.events={}),inv.investment.address||(inv.investment.address={}),inv.state=inv.investment.address.state,inv.activeAmnt=round(amount),inv.investment.status>investmentStatus.Active&&(inv.activeAmnt=0),inv.closedOn=inv.investment.events.closedOn,inv.nextDistributionOn=inv.investment.events.nextDistributionOn,inv.maturesOn=inv.investment.events.maturesOn,inv.investment.typeFilterText=inv.investment.type,inv.investment.type||(inv.investment.type=" ",inv.investment.typeFilterText="Not specified"),inv.investment.classFilterText=inv.investment["class"],inv.investment["class"]||(inv.investment["class"]=" ",inv.investment.classFilterText="Not specified"),inv.platform?(inv.platformName=inv.platform.name,inv.platformNameText=inv.platform.name):(inv.platformName=" ",inv.platformNameText="Not specified"),inv.investment.status?(inv.status=inv.investment.status.toString(),inv.statusText=investmentStatusCode[inv.status]):(inv.status=" ",inv.statusText="Not specified")}),data):[]},$scope.initPlotMap=function(data){$window.isGoogleReady?$scope.plotMap(data):$scope.$watch(function(){return $window.isGoogleReady},$scope.plotMap)},$scope.toggleGridLoadingStatus=function(isActive){var target=$(".pending-wrapper"),delay=1e3;return isActive?target.addClass("active"):void setTimeout(function(){target.removeClass("active")},delay)};var filterDelay=1e3;$scope.dashboardColumns=[],$scope.dashboardOptions={filterable:{mode:"row"},sortable:!0,pageable:{refresh:!0,pageSizes:[10,25,50,100],buttonCount:5},selectable:!1,columns:getGridColumns()},$scope.initKendoGrid=function(){$scope.dashboardGridDataSource=new kendo.data.DataSource({serverPaging:!1,serverSorting:!0,serverFiltering:!0,allowUnsort:!0,pageSize:10,sort:{field:"amount",dir:"desc"},transport:{read:function(params){var query=parseQuery(params.data);query.assetclass=investmentAssetClass["Real Estate"],$scope.toggleGridLoadingStatus(!0),api.user.investments.list(query).success(function(res){var data=$scope.parseGridData(res.data);$scope.user.connectedPlatforms&&$scope.user.connectedPlatforms.length||$state.go("ai.accounts"),res.totalCount>res.data.length?$(".grid-content-status").text("More than "+res.data.length+" results were found, please refine your search criteria.").removeClass("hidden"):$(".grid-content-status").text("").addClass("hidden"),params.success(data)})["finally"]($scope.toggleGridLoadingStatus)}},schema:{data:function(data){return data},total:function(data){return data.length},model:{fields:{amount:{type:"number"},closedOn:{type:"date"},nextDistributionOn:{type:"date"},maturesOn:{type:"date"},activeAmnt:{type:"number"},platformName:{type:"string"}}}}})};var dashboardData=api.user.analytics.reDashboard().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(dashboard){$scope.stats=dashboard.stats,$scope.amountByPlatformDataSource=new kendo.data.DataSource({data:dashboard.amountByPlatforms.map(function(item){return{label:item.platformName,data:item.amount,color:chartColors[item.platformName]}})}),$scope.amountByClassDataSource=new kendo.data.DataSource({data:dashboard.amountByClass.map(function(item){return{label:item.className,data:item.amount,color:chartColors[item.className]}})}),$scope.topSponsorsDataSource=new kendo.data.DataSource({data:dashboard.amountBySponsors.map(function(item){return{label:item.sponsorName,data:item.amount,color:chartColors[item.sponsorName]}})}),$scope.topStatesDataSource=new kendo.data.DataSource({data:dashboard.amountByStates.map(function(item){return{label:item.stateName,data:item.amount,color:chartColors[item.stateName]}})})});$scope.refreshDashBoardGrid=function(){$scope.dashboardGridDataSource.read()},$scope.obtainData=function(){$scope.toggleGridLoadingStatus(!0),dashboardData.then(function(dashboard){$scope.initKendoGrid(),$scope.initPlotMap(dashboard.data.map),$scope.dataPresent=!0})},angular.element(document).ready(function(){$scope.obtainData()})}),angular.module("app").controller("AIDashboardConsumerloansCtrl",function($scope,api,$modal,$window,investmentStatus,investmentStatusCode,investmentAssetClass,notify,chartColors,defaultDonutOptions,errorFn){$scope.dataPresent=!1,$scope.dataObtainProgress=!0,$scope.investmentStatusCode=investmentStatusCode,$scope.investmentStatus=investmentStatus,$scope.investmentAssetClass=investmentAssetClass,$scope.kendoDonutOptions=angular.copy(defaultDonutOptions),$scope.kendoDonutOptions.chartArea.height=270,$scope.updateChartData=function(){var startFilteringAfterCount=20,minChartItemAmount=1,stats={investments:{count:0,amount:0}};$scope.doughnutOptions={series:{pie:{show:!0,innerRadius:.4,label:{show:!0,formatter:function(label,point){return point.percent.toFixed(1)+"%"}}}},legend:{show:!0}},$scope.chartActiveInvByGrade=[];var dealsByGrade=$scope.analytics.dealsByPlatformRating;dealsByGrade&&dealsByGrade.forEach(function(platform){var others,chartData=[];stats.platforms={count:0,amount:0},platform.stats.forEach(function(item,index){stats.platforms.count++,stats.platforms.amount+=item.data}),platform.stats.forEach(function(item){var investmentClass=item.label||"Not specified",datatPrc=item.data/stats.platforms.amount*100;return stats.platforms.count>startFilteringAfterCount&&minChartItemAmount>datatPrc?(others||(others={data:0,label:"Others",color:chartColors.Others}),void(others.data+=item.data)):void chartData.push({label:investmentClass,data:item.data,color:chartColors[investmentClass]})}),others&&chartData.push(others),$scope.chartActiveInvByGrade.push({chartTitle:platform.platform,dataSource:new kendo.data.DataSource({data:chartData})})});var dealsByPlatform=$scope.analytics.totalDealsByPlatform;if($scope.chartActiveInvByPlatformData=[],dealsByPlatform){var others,chartData=[];dealsByPlatform.forEach(function(item,index){stats.investments.count++,stats.investments.amount+=item.amount}),dealsByPlatform.forEach(function(item){var amountPrc=item.amount/stats.investments.amount*100;return stats.investments.count>startFilteringAfterCount&&minChartItemAmount>amountPrc?(others||(others={data:0,label:"Others",color:chartColors.Others}),void(others.data+=item.amount)):void chartData.push({label:item.platform,data:item.amount})}),others&&chartData.push(others),$scope.chartActiveInvByPlatformData={chartTitle:"Active Investments by Platform",dataSource:new kendo.data.DataSource({data:chartData})}}},$scope.isActiveStatus=function(status){return-1!==[investmentStatus.Funding,investmentStatus.Funded,investmentStatus.Active].indexOf(status)},$scope.obtainData=function(analytics){api.user.analytics.dashboard({dashboard:investmentAssetClass["Consumer Loans"]}).error(function(err,status){errorFn(err,status,$scope,notify),$scope.dataObtainProgress=!1}).success(function(analytics){analytics&&(analytics.accountSummaryByPlatform&&analytics.accountSummaryByPlatform.length||analytics.dealsByPlatformRating&&analytics.dealsByPlatformRating.length||analytics.dealsByStatus&&analytics.dealsByStatus.length||analytics.totalDealsByPlatform&&analytics.totalDealsByPlatform.length)&&($scope.analytics=analytics,$scope.updateChartData(),$scope.dataPresent=!0),$scope.dataObtainProgress=!1})},$scope.obtainData()}),angular.module("app").controller("AICashflowsCtrl",function($scope,$state,api,$window,chartBarOptions,chartColors,investmentAssetClass,notify,errorFn,afHelpers){$scope.dataPresent=!1,$scope.dataObtainProgress=!0,$scope.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var today=new Date,tomorrow=today.setDate(today.getDate()+1),currentYear=today.getFullYear(),currentMonth=today.getMonth(),earningTypes=[];$scope.chartColors=chartColors,$scope.cashflowsChartOptions=angular.copy(chartBarOptions),$scope.cashflowsChartOptions.theme="alphaFlowCashflows",$scope.cashflowsChartOptions.series=[{name:"Equity Payments",field:"amountEquityPmnts"},{name:"Interest",field:"amountInterest"}],$scope.cashflowsChartOptions.categoryAxis.field="categoryDate",$scope.cashflowsChartOptions.seriesDefaults.gap=.5,$scope.cashflowsChartOptions.seriesDefaults.opacity=.8,$scope.cashflowsChartOptions.seriesDefaults.overlay={gradient:"none"},$scope.cashflowsChartOptions.seriesDefaults.tooltip.template='#= series.name # - #= kendo.format("{0:C0}", value) #',$scope.cashflowsChartOptions.valueAxis.type="line",$scope.cashflowsChartOptions.valueAxis.labels.format="{0:C0}",$scope.cashflowsChartOptions.legend={position:"bottom",align:"center",reverse:!0,labels:{font:"10px Arial,Helvetica,sans-serif"}},$scope.cashflowsPieChartOptions=angular.copy($scope.cashflowsChartOptions),$scope.cashflowsPieChartOptions.seriesDefaults.type="pie",$scope.cashflowsPieChartOptions.seriesDefaults.labels={visible:!0,template:'#= category # \n #= kendo.format("{0:C0}", value) #'},$scope.cashflowsPieChartOptions.series=[{name:"Type",field:"category"},{name:"Amount",field:"value"}],$scope.cashflowsPieChartOptions.legend.visible=!1,$scope.cashflowsPieChartOptions.seriesDefaults.tooltip={visible:!0,template:'#= category # - #= kendo.format("{0:C0}", value) #'},$scope.cashflowsGridControls={},$scope.cashflowsGridOptions={filterable:{mode:"row"},pageable:{refresh:!0,pageSizes:[10,25,50,100],buttonCount:5},dataBound:function(){$scope.cashflowsGridControls.platformNameDropdown.dataSource.sort({field:"platformName",dir:"asc"}),$scope.cashflowsGridControls.investmentClassDropdown.dataSource.sort({field:"investmentClass",dir:"asc"}),$scope.cashflowsGridControls.investmentTypeDropdown.dataSource.sort({field:"investmentType",dir:"asc"}),$scope.cashflowsGridControls.typeDropdown.dataSource.sort({field:"type",dir:"asc"})},columns:[{field:"date",width:"12%",title:"Date",format:"{0: MM/dd/yyyy}",filterable:!0},{field:"amount",width:"12%",title:"Amount",format:"{0:c2}",filterable:!0,attributes:{"class":"text-right"}},{field:"investmentName",title:"Investment",attributes:{"class":"text-left"},filterable:{cell:{operator:"contains",showOperators:!1}}},{field:"platformName",width:"12%",title:"Platform",filterable:{cell:{template:function(args){var list=args.element.kendoDropDownList({dataSource:args.dataSource,dataTextField:"platformNameFilterText",dataValueField:"platformName",valuePrimitive:!0});$scope.cashflowsGridControls.platformNameDropdown=list.data("kendoDropDownList")},showOperators:!1}}},{field:"investmentClass",width:"12%",title:"Class",filterable:{cell:{template:function(args){var list=args.element.kendoDropDownList({dataSource:args.dataSource,dataTextField:"investmentClassFilterText",dataValueField:"investmentClass",valuePrimitive:!0});$scope.cashflowsGridControls.investmentClassDropdown=list.data("kendoDropDownList")},showOperators:!1}}},{field:"investmentType",width:"10%",title:"Type",filterable:{cell:{template:function(args){var list=args.element.kendoDropDownList({dataSource:args.dataSource,dataTextField:"investmentTypeFilterText",dataValueField:"investmentType",valuePrimitive:!0});$scope.cashflowsGridControls.investmentTypeDropdown=list.data("kendoDropDownList")},showOperators:!1}}},{field:"type",width:"10%",title:"Category",filterable:{cell:{template:function(args){var list=args.element.kendoDropDownList({dataSource:args.dataSource,dataTextField:"typeFilterText",dataValueField:"type",valuePrimitive:!0});$scope.cashflowsGridControls.typeDropdown=list.data("kendoDropDownList")},showOperators:!1}}}],sortable:!0,scrollable:!1},api.user.cashflows.list({}),api.user.cashflows.list({metrics:!0}).error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(cashflows){$scope.processEarningsData(cashflows);$scope.initEarningsByType(cashflows)}),api.user.cashflows.list({assetClass:investmentAssetClass["Real Estate"],attachMissingPrincipals:!0}).error(function(err,status){errorFn(err,status,$scope,notify),$scope.dataObtainProgress=!1}).success(function(cashflows){$scope.user.connectedPlatforms&&$scope.user.connectedPlatforms.length||$state.go("ai.accounts"),cashflows&&cashflows.length&&($scope.processCashflowsRequestFeedback(cashflows),$scope.dataPresent=!0,setTimeout(function(){kendo.resize(angular.element("[kendo-chart]"))},10)),$scope.dataObtainProgress=!1}),$scope.parseChartsData=function(earnings){return _.groupBy(earnings,function(earning){return"Principal"==earning.type?earning.type:"Other"})},$scope.processCashflowsRequestFeedback=function(cashflows){var earnings=$scope.processEarningsData(cashflows),separatedChartData=$scope.parseChartsData(earnings),earningsForChart=$scope.prepareChartData(separatedChartData.Other);$scope.initEarningsPlatformByChart(cashflows),$scope.initPrincipalCashflowsChart($scope.prepareChartData(separatedChartData.Principal));var pageSize=$scope.scrollableChartCustomOptions.defaultPageSize<earnings.length?$scope.scrollableChartCustomOptions.defaultPageSize:earnings.length;earningsForChart&&earningsForChart.length?$("#earnings-chart").removeClass("hidden"):$("#earnings-chart").addClass("hidden"),$scope.cashflowsChartDataSource=new kendo.data.DataSource({pageSize:pageSize,page:$scope.scrollableChartCustomOptions.page,data:earningsForChart}),$scope.scrollableChartCustomOptions.activeChart=$scope.cashflowsChartDataSource,$scope.cashflowsGridDataSource=new kendo.data.DataSource({data:earnings,schema:{model:{fields:{date:{type:"date"},amount:{type:"number"},platformName:{type:"string"},investmentName:{type:"string"},investmentClass:{type:"string"},investmentType:{type:"string"},type:{type:"string"}}}},sort:{field:"date",dir:"desc"},pageSize:10,sort:{field:"date",dir:"desc"}})},$scope.processEarningsData=function(cashflows){var processedData=[];return cashflows&&cashflows.length&&cashflows.forEach(function(item){item.earnings&&item.earnings.length&&item.earnings.forEach(function(earning){-1!==earningTypes.indexOf(earning.type)&&earningTypes.push(earning.type),earning.amount=earning.amount?earning.amount:null,earning.date=earning.date?earning.date:null,earning.date=afHelpers.fixDateForKendoDateParser(earning.date),earning.type=earning.type?earning.type:"",earning.typeFilterText=earning.type,earning.typeFilterText||(earning.typeFilterText="Not specified"),earning.investmentName=item.investment&&item.investment.name?item.investment.name:"",earning.investmentClass=item.investment&&item.investment["class"]?item.investment["class"]:"",earning.investmentClassFilterText=earning.investmentClass,earning.investmentClassFilterText||(earning.investmentClassFilterText="Not specified"),earning.investmentType=item.investment&&item.investment.type?item.investment.type:"",earning.investmentTypeFilterText=earning.investmentType,earning.investmentTypeFilterText||(earning.investmentTypeFilterText="Not specified"),earning.investmentAssetClass=item.investment?item.investment.assetClass:1,earning.investmentMetrics=item.investment?item.investment.metrics||[]:[],earning.platformName=item.platform&&item.platform.name?item.platform.name:"",earning.platformNameFilterText=earning.platformName,earning.platformNameFilterText||(earning.platformNameFilterText="Not specified"),processedData.push(earning)})}),processedData},$scope.prepareChartData=function(earnings){var chartData=[],earningTypes=[],groupedByYears=[];return earnings?(earnings=earnings.filter(function(item){var f=new Date(item.date);return item.amount>0&&item.date&&tomorrow>f}).sort(function(a,b){return a=new Date(a.date),b=new Date(b.date),a>b?1:b>a?-1:0}),earnings.forEach(function(item){var date=new Date(item.date),yyyy=date.getFullYear(),mm=$scope.monthNames[date.getMonth()],yearlyData=_.find(groupedByYears,{name:yyyy});yearlyData||(yearlyData={name:yyyy,items:[]},groupedByYears.push(yearlyData));var monthlyData=_.find(yearlyData.items,{name:mm});monthlyData||(monthlyData={name:mm},yearlyData.items.push(monthlyData)),-1!=["dividend","profit sharing","appreciation"].indexOf(item.type.toLowerCase())&&(item.type="Equity Pmnts"),yearlyData["total_"+item.type]||(yearlyData["total_"+item.type]=0),monthlyData["total_"+item.type]||(monthlyData["total_"+item.type]=0),yearlyData["total_"+item.type]+=item.amount,monthlyData["total_"+item.type]+=item.amount,-1===earningTypes.indexOf(item.type)&&earningTypes.push(item.type)}),groupedByYears.forEach(function(item,i){earningTypes.forEach(function(type){if(item["total_"+type]&&item.name!==currentYear){var el=_.find(chartData,{categoryDate:item.name});el||(el={categoryDate:item.name},chartData.push(el)),el.type=type,el["amount"+type.replace(/\s*/g,"")]=item["total_"+type]}}),item.items.forEach(function(subitem,i){(currentYear===item.name||currentYear-1===item.name&&currentMonth<$scope.monthNames.indexOf(subitem.name))&&earningTypes.forEach(function(type){if(subitem["total_"+type]){var el=_.find(chartData,{categoryDate:subitem.name+", "+item.name});el||(el={categoryDate:subitem.name+", "+item.name},chartData.push(el)),el.type=type,el["amount"+type.replace(/\s*/g,"")]=subitem["total_"+type]}})})}),chartData):[]},$scope.scrollableChartCustomOptions={activeChart:null,defaultPageSize:12,pageSize:5,viewStart:0,newStart:0,page:0,zoom:1,path:0,DRAG_THR:50,onZoom:function(ev){var maxStart,zoomDiff,opt=$scope.scrollableChartCustomOptions,ds=ev.sender.dataSource,delta=ev.delta||(ev.originalEvent.x.delta>0?1:-1),zoom=opt.zoom*delta,newSize=opt.pageSize,newStart=opt.viewStart;ev.originalEvent&&ev.originalEvent.preventDefault(),newSize+=zoom,newSize=Math.max(1,newSize),newSize=Math.min(ds.data().length,newSize),newSize!=opt.pageSize&&(maxStart=ds.data().length-newSize,newStart-=zoom,newStart=Math.min(maxStart,newStart),newStart=Math.max(0,newStart),opt.viewStart=newStart,opt.pageSize=newSize,ds.query({skip:opt.viewStart,page:opt.page,pageSize:opt.pageSize}),$scope.scrollableChartCustomOptions=opt,zoomDiff=opt.defaultPageSize<ds.data().length?opt.defaultPageSize:ds.data().length,$scope.updateZoomView(zoomDiff-opt.pageSize))},onDrag:function(ev){var opt=$scope.scrollableChartCustomOptions,ds=ev.sender.dataSource,path=ev.originalEvent.x.delta,maxStart=(ev.delta||(ev.originalEvent.x.delta>0?1:-1),ds.data().length-opt.pageSize),newStart=opt.viewStart-path/opt.DRAG_THR;newStart=Math.min(maxStart,newStart),newStart=Math.max(0,newStart),opt.viewStart=newStart,ds.query({skip:opt.viewStart,page:opt.page,pageSize:opt.pageSize}),ev.originalEvent.preventDefault(),$scope.scrollableChartCustomOptions=opt}},$scope.customZoomHandler=function(ev){var delta=$(ev.target).hasClass("zoom-in")?1:-1;$scope.scrollableChartCustomOptions.onZoom({delta:delta,sender:{dataSource:$scope.scrollableChartCustomOptions.activeChart}})},$scope.scrollableChartOptions=angular.copy($scope.cashflowsChartOptions),$scope.scrollableChartOptions.scrollable=!0,$scope.scrollableChartOptions.transitions=!1,$scope.scrollableChartOptions.drag=$scope.scrollableChartCustomOptions.onDrag,$scope.scrollableChartOptions.zoom=$scope.scrollableChartCustomOptions.onZoom,$scope.principalChartOptions=angular.copy($scope.scrollableChartOptions),$scope.principalChartOptions.series=[{name:"Principal",field:"amountPrincipal"}],$scope.updateZoomView=function(scale){var className=scale>0?"zoom-in":0>scale?"zoom-out":"zoom-none";$("#tabstrip").removeClass("zoom-out zoom-in zoom-none").addClass(className),$("#tabstrip .zoom-icon .zoom-text").text(scale?"x"+(scale>0?scale:-1*scale):"")},$scope.initPrincipalCashflowsChart=function(principalsData){$("#tabstrip").kendoTabStrip({select:function(ev){var ds="Returned Principals"==ev.item.innerText?$scope.cashflowsPrincipalsChartDataSource:$scope.cashflowsChartDataSource;$scope.scrollableChartCustomOptions.viewStart=0,$scope.scrollableChartCustomOptions.pageSize=$scope.scrollableChartCustomOptions.defaultPageSize,ds.query({skip:$scope.scrollableChartCustomOptions.viewStart,page:$scope.scrollableChartCustomOptions.page,pageSize:$scope.scrollableChartCustomOptions.pageSize}),$scope.scrollableChartCustomOptions.activeChart=ds,$scope.updateZoomView($scope.scrollableChartCustomOptions.defaultPageSize-$scope.scrollableChartCustomOptions.pageSize)},animation:{open:{effects:"fadeIn"}}});$scope.scrollableChartCustomOptions.defaultPageSize<principalsData.length?$scope.scrollableChartCustomOptions.defaultPageSize:principalsData.length;principalsData&&principalsData.length?$("#cashflows-chart").removeClass("hidden"):$("#cashflows-chart").addClass("hidden"),$scope.cashflowsPrincipalsChartDataSource=new kendo.data.DataSource({pageSize:$scope.scrollableChartCustomOptions.defaultPageSize,page:$scope.scrollableChartCustomOptions.page,data:principalsData})},$scope.countFutureCashFlows=function(data,monthCount){var outp=0,rate=0,coc=0,res=outp*("Debt"==data.type?rate:coc)/monthCount;return res},$scope.initEarningsByType=function(cashflows){var realEstateClass=investmentAssetClass["Real Estate"],consumerClass=investmentAssetClass["Consumer Loans"],sums=[],earnings={};cashflows.forEach(function(item){if(item.earnings)for(var i=0;i<item.earnings.length;i++){item.investment?item.investment.assetClass:1;_.forEach(cashflows,function(item){for(var i=0;i<item.earnings.length;i++){var assetClass=item.investment.assetClass;("Principal"!=item.earnings[i].type||item.earnings[i].amount>0)&&(earnings[assetClass]||(earnings[assetClass]=[]),earnings[assetClass].push({amount:item.earnings[i].amount,type:item.earnings[i].type,investmentType:item.investment.type}))}})}}),earnings[realEstateClass]&&_.forEach(_.groupBy(earnings[realEstateClass],function(earning){var className="Other";return _.contains(earning.investmentType,"Debt")&&(className="Debt"),_.contains(earning.investmentType,"Equity")&&(className="Equity"),className}),function(item,key){if("Other"!=key){var sum=_.reduce(item.map(function(i){return"Principal"!=i.type?i.amount:0}),function(total,n){return total+n});sums.push({value:sum,category:"Real Estate: "+key})}}),earnings[consumerClass]&&_.forEach(_.groupBy(earnings[consumerClass],function(earning){return earning.investmentType||"Other"}),function(item,key){if("Debt"==key){var sum=_.reduce(item.map(function(i){return"Principal"!=i.type?i.amount:0}),function(total,n){return total+n});sums.push({value:sum,category:"Consumer Loans:"})}}),$scope.earningsByTypeChartDataSource=new kendo.data.DataSource({pageSize:$scope.scrollableChartCustomOptions.defaultPageSize,skip:$scope.scrollableChartCustomOptions.viewStart,data:sums})},$scope.isLeapYear=function(year){return year%4===0&&year%100!==0||year%400===0},$scope.getDaysInMonth=function(year,month){return[31,$scope.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},$scope.initEarningsPlatformByChart=function(cashflows){var data=_.groupBy(cashflows,function(value){return value.platform.name}),stats={totalEarnings:0,earningsPerPlatform:[]},getSum=function(earnings,target,key,value){var sum=0;return _.forEach(earnings,function(a){sum+=a[key]!=value?a[target]:0}),sum};_.forEach(data,function(platform,key){var platformName=key,earningsSum=_.reduce(platform.map(function(item){return getSum(item.earnings,"amount","type","Principal")}),function(a,b){return a+b}),amountsSum=_.reduce(platform.map(function(item){return item.amount}),function(a,b){return a+b});stats.totalEarnings+=earningsSum,stats.earningsPerPlatform.push({platformName:platformName,earningsSum:earningsSum,amountsSum:amountsSum})}),stats.earningsPerPlatform.map(function(info){return info.percentage=Math.round(info.earningsSum/stats.totalEarnings*100),info}),_.forEach($scope.chartColors,function(item,key){stats.colors||(stats.colors=[]),stats.colors.push(item)}),$("#earningsByPlatformChart").kendoChart({title:{position:"bottom",text:""},legend:{visible:!1},chartArea:{background:""},seriesDefaults:{type:"donut",startAngle:150},seriesColors:stats.colors,series:[{name:"Effective Yield by",data:stats.earningsPerPlatform.map(function(item){return{category:item.platformName,value:Math.round(item.earningsSum/item.amountsSum*100)}}),tooltip:{visible:!0,template:"#=series.name# #= category #: \n #= value #%"},overlay:{gradient:"none"}},{name:"Earnings by",data:stats.earningsPerPlatform.map(function(item){return{category:item.platformName,value:item.earningsSum}}),labels:{visible:!0,background:"transparent",position:"outsideEnd",template:'#= category #: \n #= kendo.format("{0:C0}", value) #'},overlay:{gradient:"none"},tooltip:{visible:!0,template:'#= series.name# #= category #: \n #= kendo.format("{0:C0}", value) #'}}]})}}),angular.module("app").controller("AIPlatformMetricsCtrl",function($scope,api,$modal,$window,chartBarOptions,$filter,notify,chartColors,defaultDonutOptions,errorFn){
$scope.kendoDonutOptions=defaultDonutOptions,$scope.fundedProjectsChartOptions=angular.copy(chartBarOptions),$scope.fundedProjectsChartOptions.series[0].field="EquityDealCount",$scope.fundedProjectsChartOptions.series[0].name="Equity",$scope.fundedProjectsChartOptions.series[1].field="DebtDealCount",$scope.fundedProjectsChartOptions.series[1].name="Debt",$scope.fundedProjectsChartOptions.categoryAxis.field="platformName",$scope.fundedProjectsChartOptions.valueAxis.majorUnit=50,$scope.fundedProjectsChartOptions.valueAxis.name="Projects",$scope.fundedProjectsChartOptions.valueAxis.title={text:"Projects"},$scope.fundedVolumesChartOptions=angular.copy(chartBarOptions),$scope.fundedVolumesChartOptions.series[0].field="EquityTotalVolume",$scope.fundedVolumesChartOptions.series[0].name="Equity",$scope.fundedVolumesChartOptions.series[1].field="DebtTotalVolume",$scope.fundedVolumesChartOptions.series[1].name="Debt",$scope.fundedVolumesChartOptions.categoryAxis.field="platformName",$scope.fundedVolumesChartOptions.valueAxis.majorUnit=2e7,$scope.fundedVolumesChartOptions.valueAxis.labels.template="$#= value/1000000 # M",$scope.fundedVolumesChartOptions.seriesDefaults.tooltip.template="#= series.name # - $#= (value/1000000).toFixed(2) # M",$scope.updateChartData=function(){if($scope.metrics){var dealsFundedData=[];$scope.metrics.dealsByInstrumentType.forEach(function(item,i){dealsFundedData.push({platformName:item.platform.name,EquityDealCount:item.Equity?item.Equity.dealCount:0,EquityTotalVolume:item.Equity?item.Equity.totalVolume:0,DebtDealCount:item.Debt?item.Debt.dealCount:0,DebtTotalVolume:item.Debt?item.Debt.totalVolume:0})}),$scope.fundedProjectsDataSource=new kendo.data.DataSource({data:dealsFundedData}),$scope.fundedVolumesDataSource=new kendo.data.DataSource({data:dealsFundedData});var dealsByClass=$scope.metrics.dealsByClass;dealsByClass&&dealsByClass.forEach(function(platform){var chartData=platform.classes.map(function(item){var investmentClass=item["class"]||"Not specified";return{label:investmentClass,data:item.dealCount,color:chartColors[investmentClass]}});$scope.chartDealByClass.push({chartTitle:platform.platform.name,dataSource:new kendo.data.DataSource({data:chartData})})})}},$scope.chartDealByClass=[],$scope.plotMap=function(){$window.isGoogleReady&&($scope.allInvestmentsMap=new google.maps.Map(document.getElementById("allInvestmentsMap"),{zoom:4,center:new google.maps.LatLng(39.5,-98.35),styles:[{featureType:"water",stylers:[{saturation:43},{lightness:-11},{hue:"#0088ff"}]},{featureType:"poi",stylers:[{visibility:"off"}]}],mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1}),$scope.investmentMap.forEach(function(inv){inv.address&&inv.address.location&&new google.maps.Marker({position:new google.maps.LatLng(inv.address.location.lat,inv.address.location.lng),title:inv.name+" - "+(inv.amount?$filter("currency")(inv.amount,"$",0):"Undisclosed amount"),animation:google.maps.Animation.DROP,map:$scope.allInvestmentsMap})}))},api.platform.metrics().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(stats){$scope.metrics=stats,$scope.updateChartData()}),api.platform.investmentMap().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(investmentMap){$scope.investmentMap=investmentMap,$scope.plotMap()})}),angular.module("app").controller("AIProfileCtrl",["$state","$rootScope","$scope","$timeout","$modal","notify","errorFn","statesList","datesList","api","profile","emailRegex","nameRegex","passwordRegex",function($state,$rootScope,$scope,$timeout,$modal,notify,errorFn,statesList,datesList,api,profile,emailRegex,nameRegex,passwordRegex){$scope.emailRegex=emailRegex,$scope.nameRegex=nameRegex,$scope.passwordRegex=passwordRegex,$scope.profile=profile.data,$scope.profileLogin={},$scope.profileLogin.email=$scope.profile.email,$scope.profileLogin.repeatEmail=$scope.profile.email,$scope.initialEmail=$scope.profile.email,delete $scope.profile.email;var birthDate=$scope.profile.birthDate?new Date($scope.profile.birthDate):null;$scope.profile.birthDate=birthDate?birthDate.getDate():null,$scope.profile.birthMonth=birthDate?datesList.months[birthDate.getMonth()]:null,$scope.profile.birthYear=birthDate?birthDate.getFullYear():null,$scope.statesList=statesList,$scope.datesList=datesList,$scope.panels_state=[0,1,1,1,1],$scope.togglePanels=function(n){$scope.panels_state.forEach(function(item,index){$scope.panels_state[index]=index!==n?1:0})},$scope.emailPreferences={notifications:[{name:"notifications",label:"When I receive a notification",notificators:[{name:"email",label:"Email"}]},{name:"newsletter",label:"Monthly Newsletter",notificators:[{name:"email",label:"Email"}]},{name:"daily_earnings",label:"Daily Earnings Digest",notificators:[{name:"email",label:"Email"}]},{name:"weekly_account_activity",label:"Weekly Account Activity",notificators:[{name:"email",label:"Email"}]}],optOut:{name:"optOut",label:"I would like to opt out of all marketing notifications from Alphaflow."}},$scope.investmentPreferences=[{name:"realEstate",label:"Real Estate"},{name:"consumerLending",label:"Consumer Lending"},{name:"autoLoans",label:"Auto Loans"},{name:"studentLoans",label:"Student Loans"},{name:"smallMediumBusinessLoans",label:"Small and Medium Business Loans"},{name:"earlyStageStartupEquity",label:"Early-stage Startup Equity"}],$scope.savePreferences=function(){$scope.savingProgress=!0;var profile=angular.copy($scope.profile);profile.birthDate;profile.birthDate=new Date($scope.profile.birthMonth+" "+$scope.profile.birthDate+", "+$scope.profile.birthYear),profile.birthDate||(profile.birthDate=null),api.user.updateProfile(profile).success(function(){notify({message:"Profile info has been updated successfully!",classes:"success-warning cg-notify-message-center",templateUrl:"views/templates/notify.html"}),$scope.profileSavingProgress=!1,$scope.afProfileForm.$setPristine()}).error(function(err,status){errorFn(err,status,$scope,notify),$scope.savingProgress=!1})},$scope.saveLoginPreferences=function(){$scope.loginInfoSavingProgress=!0,api.user.updateLoginInfo($scope.profileLogin).success(function(data){data.isEmailChanged?$rootScope.logout({errormsg:"reactivation"}):($scope.loginInfoSavingProgress=!1,$scope.emailAvailable=!1,$scope.emailNotAvailableMessage=!1,$scope.profileLogin.currentPassword=null,$scope.profileLogin.newPassword=null,$scope.profileLogin.newPasswordConfirm=null,$scope.afLoginInfoForm.$setPristine(),notify({message:"Login info has been updated successfully!",classes:"success-warning cg-notify-message-center",templateUrl:"views/templates/notify.html"}))}).error(function(err,status){errorFn(err,status,$scope,notify),$scope.loginInfoSavingProgress=!1})},$scope.closeAccountConfirm=function(){$modal.open({resolve:{data:function(){return{title:"Confirm action",content:"Are you sure you want to perform this un-undoable action?",okBtnText:"Yes, delete all data"}}},templateUrl:"views/templates/modal-confirm.tpl.html",controller:"ConfirmModalInstanceCtrl"}).result.then(function(){$scope.closeAccount()})},$scope.closeAccount=function(){api.user.deleteProfile().success(function(){$rootScope.logout()}).error(function(err,status){errorFn(err,status,$scope,notify)})},$scope.checkEmailAvailability=function(){return $scope.profileLogin.email&&$scope.profileLogin.email.length?api.user.checkEmailAvailability($scope.profileLogin.email).success(function(data){$scope.emailAvailable=!1,$scope.emailNotAvailable=!0,$scope.emailNotAvailableMessage=!1}).error(function(err,status){404===status?($scope.emailAvailable=!0,$scope.emailNotAvailable=!1,$scope.emailNotAvailableMessage=!1):422===status?($scope.emailNotAvailable=!0,$scope.emailNotAvailableMessage=err.error.userMessage,$scope.emailAvailable=!1):($scope.emailNotAvailable=!1,$scope.emailNotAvailableMessage=!1,$scope.emailAvailable=!1)}):void 0},$scope.checkPasswordsMatching=function(){return $scope.profileLogin.newPassword!==$scope.profileLogin.newPasswordConfirm?($scope.passwordMismatch=!0,!1):($scope.passwordMismatch=!1,!0)};var fakeEmailSettingsClick=!1,fakeEmailOptOutClick=!1;$scope.toggleEmailSettings=function(){fakeEmailSettingsClick?fakeEmailSettingsClick=!1:$scope.emailPreferences.notifications.forEach(function(pref){pref.notificators.forEach(function(notificator){$timeout(function(){$scope.profile.preferences.email[pref.name][notificator.name]==$scope.profile.preferences.email.optOut&&(fakeEmailOptOutClick=!0,angular.element("#afEmailSettings_"+pref.name+"_"+notificator.name).trigger("click"))})})})},$scope.toggleEmailOptOutSettings=function(){if(fakeEmailOptOutClick)fakeEmailOptOutClick=!1;else{var atLeastOneTurnedOn=!1;$scope.emailPreferences.notifications.forEach(function(pref){pref.notificators.forEach(function(notificator){$scope.profile.preferences.email[pref.name][notificator.name]&&(atLeastOneTurnedOn=!0)})}),$timeout(function(){(atLeastOneTurnedOn&&$scope.profile.preferences.email.optOut||!atLeastOneTurnedOn&&!$scope.profile.preferences.email.optOut)&&(fakeEmailSettingsClick=!0,angular.element("#afEmailOptOutSettings").trigger("click"))})}}}]),angular.module("app").controller("AIPublicMarketsCtrl",function($scope,api,$modal,$window,notify,errorFn){api.markets.stats().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(markets){$scope.markets=markets})}),angular.module("app").controller("ConfirmModalInstanceCtrl",function($scope,$modalInstance,data){$scope.data=data,$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("app").controller("InvestmentDetailsModalCtrl",function($scope,$timeout,api,$modalInstance,data,investmentStatusCode,errorFn){$scope.data=data.data,$scope.investmentStatusCode=investmentStatusCode,$scope.updateStatus=0;var notesUpdateTmt=null,notesUpdateDelay=1e3;$scope.tabstripOptions={dataTextField:"title",dataContentField:"template",dataContentUrlField:"templateUrl",animation:{open:{duration:0},close:{duration:0}}},$scope.tabstripDatasource=[{title:"Overwiew",templateUrl:"views/templates/investmentModalTabs/investment-overview.html"}],$scope.cashflowsOptions={columns:[{field:"date",width:"34%",title:"Date",format:"{0: MM/dd/yyyy}"},{field:"type",width:"33%",title:"Type"},{field:"amount",width:"33%",title:"Amount",format:"{0:c0}"}]},$scope.slides=[],$scope.processSlides=function(){$scope.data.investment.pictureUrls&&$scope.data.investment.pictureUrls.forEach(function(imgUrl,index){$scope.slides.push({image:imgUrl,active:index?1:0})})},$scope.processContributions=function(){if($scope.data.contribution){$scope.tabstripDatasource.splice(1,0,{title:"Cashflows",templateUrl:"views/templates/investmentModalTabs/investment-cashflows.html"}),$scope.data.contribution.totalEarnings=0;for(var positivePrincipal,positivePrincipalIndex,i=0;i<$scope.data.contribution.earnings.length;i++){var obj=$scope.data.contribution.earnings[i];if("principal"===obj.type.toLowerCase()&&obj.amount>=0){positivePrincipal=obj,positivePrincipalIndex=i;break}}positivePrincipalIndex&&(positivePrincipal=$scope.data.contribution.earnings.splice(positivePrincipalIndex,1),$scope.data.contribution.earnings.unshift(positivePrincipal[0]));var earnings=$scope.data.contribution.earnings.filter(function(item){return"principal"!==item.type.toLowerCase()});earnings.forEach(function(item){$scope.data.contribution.totalEarnings+=item.amount}),$scope.data.contribution.lastPayment=earnings.length?earnings[0]:null,$scope.data.contribution.earnings&&$scope.data.contribution.earnings.length>10&&($scope.cashflowsOptions.scrollable=!0,$scope.cashflowsOptions.height=330),$scope.cashflowsDataSource={data:$scope.data.contribution.earnings,schema:{model:{fields:{date:{type:"date"},amount:{type:"number"},type:{type:"string"}}}}}}},$scope.prepareGoogleMapUrl=function(addressString){var googleMapUrl=addressString.replace(/,? /g,"+");return $scope.data.investment.address.streetLine1||$scope.data.investment.address.streetLine2?googleMapUrl:""},$scope.prepareAddressString=function(){var addressString="",separator="";return $scope.data&&$scope.data.investment&&$scope.data.investment.address?($scope.data.investment.address.streetLine1&&(addressString+=$scope.data.investment.address.streetLine1),$scope.data.investment.address.streetLine2&&(separator=addressString.length?" ":"",addressString+=separator+$scope.data.investment.address.streetLine2),$scope.data.investment.address.city&&(separator=addressString.length?", ":"",addressString+=separator+$scope.data.investment.address.city),$scope.data.investment.address.state&&(separator=addressString.length?", ":"",addressString+=separator+$scope.data.investment.address.state),$scope.data.investment.address.zip&&(separator=addressString.length?" ":"",addressString+=separator+$scope.data.investment.address.zip),addressString):addressString},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.submitNotes=function(){$scope.updateStatus=0,notesUpdateTmt&&$timeout.cancel(notesUpdateTmt),notesUpdateTmt=$timeout(function(){$scope.updateStatus=1,api.user.investments.userData.update({userdata:$scope.data.investmentUserData,investmentId:$scope.data.investment._id}).success(function(){$scope.updateStatus=2}).error(function(err,status){$scope.updateStatus=3,errorFn(err,status,$scope,notify)})},notesUpdateDelay)},$scope.$on("kendoWidgetCreated",function(event,widget){widget===$scope.investmentTabs&&$scope.investmentTabs.select(0)}),$scope.processContributions(),$scope.processSlides(),$scope.addressString=$scope.prepareAddressString(),$scope.googleMapUrl=$scope.prepareGoogleMapUrl($scope.addressString)}),angular.module("app").controller("ConnectPlatformModalInstanceCtrl",function($scope,$modalInstance,data,api){$scope.data=data,$scope.OKBtnLabel="Save",$scope.OKBtnDisabled=!1,$scope.failedAttemptCount=0,$scope.ok=function(){$scope.OKBtnLabel="Validating...",$scope.OKBtnDisabled=!0,api.user.platform.connect({platform:data.platform._id,username:$scope.username,password:$scope.password}).success(function(){$modalInstance.close()}).error(function(err,status){return 401===status?$modalInstance.dismiss("cancel"):($scope.failedAttemptCount+=1,$scope.error=err.error,$scope.OKBtnLabel="Save",void($scope.OKBtnDisabled=!1))})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("app").controller("AccountActivationCtrl",function($scope,$rootScope,$window,$modal,$stateParams,$state,api,ENV){return $scope.error=null,$stateParams.activationCode?void api.user.activate($stateParams.activationCode).success(function(){$scope.error=null,$scope.success=!0}).error(function(err){$scope.error=err.error.userMessage}):void($scope.error="Incorrect activation code.")}),angular.module("app").controller("ResendActivationCtrl",function($scope,$rootScope,$window,$modal,$stateParams,$state,api,emailRegex){$scope.emailRegex=emailRegex,$scope.resendActivation=function(){$scope.progress=!0,api.user.resendActivation($scope.email).then(function(data){$scope.success=!0,$scope.error=null})["catch"](function(err){return 422===err.status?$scope.error="Unable to resend activation link. Email not found.":void($scope.error="Some error occured. Unable to resend you activation code.")})["finally"](function(){$scope.progress=!1})}}),angular.module("app").controller("LoginPlatformModalInstanceCtrl",function($scope,$modalInstance,data,api){$scope.data=data,$scope.OKBtnLabel="Save",$scope.OKBtnDisabled=!1,$scope.ok=function(){$scope.OKBtnLabel="Validating...",$scope.OKBtnDisabled=!0,api.user.platform.login({platform:data.platform._id,username:$scope.username,password:$scope.password}).success(function(){$modalInstance.close()}).error(function(err,status){return 401===status?$modalInstance.dismiss("cancel"):($scope.error=err.error,$scope.OKBtnLabel="Save",void($scope.OKBtnDisabled=!1))})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("app").controller("LoginCtrl",function($scope,$rootScope,$window,$modal,$stateParams,$state,api,passwordRegex,emailRegex,nameRegex,ENV,$sce){$scope.loginRoute=$sce.trustAsResourceUrl(ENV.apiEndpoint+"/emailLogin"),$scope.passwordRegex=passwordRegex,$scope.emailRegex=emailRegex,$scope.nameRegex=nameRegex,$scope.loginProgress=!1,$scope.resetPasswordProgress=!1,$scope.setNewPasswordProgress=!1,$scope.openResetPassword=function(){$state.go("passwordReset")},$scope.openLogIn=function(){$state.go("login")},$scope.openSignup=function(){$state.go("signup")},$scope.checkPasswordsMatching=function(){return $scope.newPassword!==$scope.newPasswordConfirm?($scope.passwordMismatch=!0,!1):($scope.passwordMismatch=!1,!0)},$scope.resetPassword=function(){$scope.resetPasswordError=!1,$scope.resetPasswordProgress=!0,api.user.resetPassword($scope.email).success(function(){$scope.resetPasswordSuccess=!0}).error(function(err){$scope.resetPasswordError=err.error.userMessage,$scope.resetPasswordProgress=!1})},$scope.setPassword=function(){$scope.setNewPasswordProgress=!0,$scope.setPasswordError=!1,$scope.passwordMismatch||api.user.setNewPassword($stateParams.password_reset_code,$scope.newPassword).success(function(){$scope.setPasswordSuccess=!0}).error(function(err){$scope.setPasswordError=err.error.userMessage,$scope.setNewPasswordProgress=!1})},$scope.loginFormPreSubmitCheck=function(){return!1},$stateParams&&$stateParams.errormsg&&($scope.error={message:$stateParams.errormsg}),"login"===$state.current.name?($scope.currentView="login",$stateParams.loginErrorMsg&&($scope.loginErrorMsg=$stateParams.loginErrorMsg)):"passwordReset"===$state.current.name&&($scope.currentView="passwordReset",$stateParams.password_reset_code&&($scope.setNewPassword=!0,api.user.checkResetPasswordCode($stateParams.password_reset_code).success(function(){$scope.passwordResetCodeChecked=!0}).error(function(){$scope.error={message:"expired"}}))),angular.element("#afLoginFormSubmit").on("click",function(){return $scope.$apply(function(){$scope.afLoginForm.$submitted=!0}),$scope.email&&$scope.email.length&&$scope.password&&$scope.password.length?void 0:!1})}),angular.module("app").controller("SignupCtrl",function($scope,$rootScope,$window,$modal,$stateParams,$state,api,passwordRegex,emailRegex,nameRegex){$scope.passwordRegex=passwordRegex,$scope.emailRegex=emailRegex,$scope.nameRegex=nameRegex,$scope.signupProgress=!1,$scope.emailCheckProgress=!1,$scope.agreetos=!1,$scope.socialNetworksButtons=!0,$scope.newUser={},$scope.toggleSocialNetworksButtons=function(){return $scope.socialNetworksButtons=!$scope.socialNetworksButtons,!1},$scope.checkTermsAcceptance=function(){$scope.signupProgress=!0,$scope.showTOSModal(!0)},$scope.checkEmailAvailability=function(){return $scope.newUser.email&&$scope.newUser.email.length?api.user.checkEmailAvailability($scope.newUser.email).success(function(data){$scope.emailAvailable=!1,$scope.emailNotAvailable=!0,$scope.emailNotAvailableMessage=!1}).error(function(err,status){404===status?($scope.emailAvailable=!0,$scope.emailNotAvailable=!1,$scope.emailNotAvailableMessage=!1):422===status?($scope.emailNotAvailable=!0,$scope.emailNotAvailableMessage=err.error.userMessage,$scope.emailAvailable=!1):($scope.emailNotAvailable=!1,$scope.emailNotAvailableMessage=!1,$scope.emailAvailable=!1)}):void 0},$scope.checkEmailsMatching=function(){return $scope.newUser.email!==$scope.newUser.repeatEmail?($scope.emailMismatch=!0,!1):($scope.emailMismatch=!1,!0)},$scope.checkPasswordsMatching=function(){return $scope.newUser.password!==$scope.newUser.passwordConfirm?($scope.passwordMismatch=!0,!1):($scope.passwordMismatch=!1,!0)},$scope.signup=function(){return $scope.signUpWasClicked=!0,$scope.userRegistrationError=null,$scope.checkPasswordsMatching()?void api.user.signUp($scope.newUser).success(function(){$scope.userRegistered=!0,ga("send","event","Acquisition","signup")}).error(function(err){$scope.signupProgress=!1,$scope.userRegistrationError=err.error.userMessage}):void($scope.signupProgress=!1)},$scope.showTOSModal=function(signupProgress){$scope.agreetos!==!0&&signupProgress||!signupProgress?$modal.open({resolve:{data:function(){return{height:200}}},size:"lg",templateUrl:"views/corp/tos.html",controller:"ConfirmModalInstanceCtrl"}).result.then(function(){$scope.agreetos=!0,signupProgress&&$scope.signup()},function(){$scope.agreetos=!1,$scope.signupProgress=!1}):signupProgress&&$scope.signup()}}),angular.module("app").filter("mapInvestmentStatus",function(investmentStatusCode){return function(input){return investmentStatusCode[input]}}),angular.module("app").filter("mapPayFrequency",function(payFrequencyCode){return function(input){return payFrequencyCode[input]}}),angular.module("app").filter("handleEmpty",function(){return function(input){return input||"-"}}),angular.module("app").filter("activeAmnt",["$filter",function($filter){return function(input){if(!input)return"-";var decimals=arguments[1]||2;return $filter("number")(input,decimals)+"%"}}]),angular.module("app").directive("pageTitle",function($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState,toParams,fromState,fromParams){var title="AlphaFlow";toState.data&&toState.data.pageTitle&&(title="AlphaFlow | "+toState.data.pageTitle),$timeout(function(){element.text(title)})};$rootScope.$on("$stateChangeStart",listener)}}}),angular.module("app").directive("pageDescription",function($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState,toParams,fromState,fromParams){var description="";toState.data&&toState.data.pageDescription&&(description=toState.data.pageDescription),$timeout(function(){element.content=description})};$rootScope.$on("$stateChangeStart",listener)}}}),angular.module("app").directive("sideNavigation",function($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.metisMenu()})}}}),angular.module("app").directive("iboxTools",function($timeout){return{restrict:"A",scope:!0,templateUrl:"views/common/ibox_tools.html",controller:function($scope,$element){$scope.showhide=function(){var ibox=$element.closest("div.ibox"),icon=$element.find("i:first"),content=ibox.find("div.ibox-content");content.slideToggle(200),icon.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),ibox.toggleClass("").toggleClass("border-bottom"),$timeout(function(){ibox.resize(),ibox.find("[id^=map-]").resize()},50)},$scope.closebox=function(){var ibox=$element.closest("div.ibox");ibox.remove()}}}}),angular.module("app").directive("minimalizaSidebar",function($timeout){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:function($scope,$element){$scope.minimalize=function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},100)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(500)},300)):$("#side-menu").removeAttr("style")}}}}),angular.module("app").directive("ngReallyClick",function($modal){return{restrict:"A",scope:{ngReallyClick:"&",item:"="},link:function(scope,element,attrs){element.bind("click",function(){$modal({title:attrs.ngReallyTitle,content:attrs.ngReallyMessage,scope:scope,template:"view/templates/modal-confirm.tpl.html",show:!0,backdrop:!1})})},controller:function($scope){$scope.ok=function(){$scope.ngReallyClick({item:$scope.item}),this.$hide()}}}}),angular.module("app").directive("focusMe",function($timeout,$parse){return{link:function(scope,element,attrs){var model=$parse(attrs.focusMe);scope.$watch(model,function(value){value===!0&&$timeout(function(){element[0].focus()})}),element.bind("blur",function(){model.assign&&scope.$apply(model.assign(scope,!1))})}}}),angular.module("app").directive("chartZoom",function(){return{templateUrl:"views/common/chart_zoom.html",replace:!0,link:function(scope,element,attrs){element.on("click",scope.customZoomHandler)}}}),angular.module("app").directive("myInvActiveAmnt",function(){return{templateUrl:"views/templates/investmentsTable/activeAmnt.html"}}).directive("myInvClass",function(){return{templateUrl:"views/templates/investmentsTable/class.html"}}).directive("myInvIcon",function(){return{templateUrl:"views/templates/investmentsTable/icon.html"}}).directive("myInvInvested",function(){return{templateUrl:"views/templates/investmentsTable/invested.html"}}).directive("myInvMaturity",function(){return{templateUrl:"views/templates/investmentsTable/maturity.html"}}).directive("myInvName",function(){return{templateUrl:"views/templates/investmentsTable/name.html"}}).directive("myInvNextPmnt",function(){return{templateUrl:"views/templates/investmentsTable/nextPmnt.html"}}).directive("myInvSponsor",function(){return{templateUrl:"views/templates/investmentsTable/sponsor.html"}}).directive("myInvStart",function(){return{templateUrl:"views/templates/investmentsTable/start.html"}}).directive("myInvState",function(){return{templateUrl:"views/templates/investmentsTable/state.html"}}).directive("myInvStatus",function(){return{templateUrl:"views/templates/investmentsTable/status.html"}}).directive("myInvType",function(){return{templateUrl:"views/templates/investmentsTable/type.html"}}),angular.module("app").directive("kendoChartsResize",["$window",function($window){return{restrict:"A",link:function(){var windowResizeTmt;angular.element($window).bind("resize",function(){windowResizeTmt&&clearTimeout(windowResizeTmt),windowResizeTmt=setTimeout(function(){kendo.resize(angular.element("[kendo-chart]"))},20)})}}}]),angular.module("app").filter("trustAsHtml",["$sce",function($sce){return function(val){return $sce.trustAsHtml(val)}}]),angular.module("app").directive("popoverHtmlCustomPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"views/common/popover-html-custom-popup.html",link:function(scope,elem,attrs){}}}).directive("popoverHtmlCustom",["$tooltip",function($tooltip){return $tooltip("popoverHtmlCustom","popover","click")}]),angular.module("app").directive("syncButton",["api","notify","$rootScope","errorFn",function(api,notify,$rootScope,errorFn){return{restrict:"A",templateUrl:"views/templates/syncButton.html",replace:!0,scope:{syncButtonCall:"&"},link:function($scope,elem,attrs){$scope.user=$rootScope.user,$scope.buttonVisible=!1,$scope.anyPlatformUpdated=!1,$scope.buttonClass=attrs.syncButtonClass||"badge-success",$scope.updateProgressMessage=null,$scope.refreshInProgress=null,$scope.updateAllPlatforms=function(){return $scope.anyPlatformUpdated=!1,$scope.refreshInProgress=!0,$scope.availablePlatforms.forEach(function(item,index){item.connectedOn&&item.active&&(item.refreshInProgress=!0)}),$scope.user.securityRoles&&$scope.user.securityRoles.indexOf("demo_account")>=0?void $scope.notifyDemoAccount():void api.user.investments.platform.sync().error(function(err,status){errorFn(err,status,$scope,notify)})},api.platform.updateProgress.subscribe($scope,function(data){$scope.updatePlatformStatus(data,"updateProgress")}),api.platform.updated.subscribe($scope,function(data){data.message="Updated",$scope.updatePlatformStatus(data,"updated")}),api.platform.syncError.subscribe($scope,function(data){data.message=data.messageToDisplay||"Sync Error",$scope.updatePlatformStatus(data,"syncError")}),api.platform.turnedOff.subscribe($scope,function(data){data.message="Invalid Username/Password",$scope.updatePlatformStatus(data,"turnedOff")}),$scope.updatePlatformStatus=function(data,status){var currentPlatform=null,lastUpdatedDate=null;$scope.availablePlatforms.every(function(item,index){return item._id===data.platformId?(currentPlatform=item,!1):!0}),currentPlatform&&(["updated","syncError","turnedOff"].indexOf(status)>=0?("updated"===status&&(currentPlatform.lastUpdated=new Date,lastUpdatedDate=new Date,$scope.anyPlatformUpdated=!0),currentPlatform.refreshInProgress=!1,$scope.checkProgress()):"updateProgress"===status&&(currentPlatform.refreshInProgress=!0,$scope.refreshInProgress=!0),$scope.updateProgressMessage=currentPlatform.name?currentPlatform.name+": "+data.message:data.message,["syncError","turnedOff"].indexOf(status)>=0&&notify({message:$scope.updateProgressMessage,classes:"success-warning cg-notify-message-center",templateUrl:"views/templates/notify.html"}),$scope.refreshInProgress||(lastUpdatedDate&&($scope.lastUpdatedDate=lastUpdatedDate),$scope.updateProgressMessage=null,$scope.syncButtonCall&&$scope.anyPlatformUpdated&&$scope.syncButtonCall()))},$scope.refreshPlatformStatus=function(){api.platform.list().error(function(err,status){errorFn(err,status,$scope,notify)}).success(function(platforms){if(platforms){$scope.availablePlatforms=platforms,$scope.checkProgress(),$scope.setLastUpdatedDate();var anyActivePlatform=$scope.availablePlatforms.some(function(item){return item.active});$scope.buttonVisible=anyActivePlatform}})},$scope.checkProgress=function(){return $scope.refreshInProgress=$scope.availablePlatforms.some(function(item,index){return item.refreshInProgress===!0}),$scope.refreshInProgress},$scope.setLastUpdatedDate=function(){var minDate;$scope.availablePlatforms.forEach(function(item){(!minDate||item.lastUpdated>minDate)&&(minDate=item.lastUpdated)}),$scope.lastUpdatedDate=minDate},$scope.$watch("user.connectedPlatforms",$scope.refreshPlatformStatus),$scope.refreshPlatformStatus()}}}]),angular.module("app").directive("platformDetails",function(){return{templateUrl:"views/templates/platformDetails.html",link:function(scope,element){}}}),angular.module("app").directive("match",function($parse){return{require:"?ngModel",restrict:"A",link:function(scope,elem,attrs,ctrl){function getMatchValue(){var match=matchGetter(scope);return angular.isObject(match)&&match.hasOwnProperty("$viewValue")&&(match=match.$viewValue),match}if(!ctrl)return void(console&&console.warn&&console.warn("Match validation requires ngModel to be on the element"));var matchGetter=$parse(attrs.match),caselessGetter=$parse(attrs.matchCaseless),noMatchGetter=$parse(attrs.notMatch);scope.$watch(getMatchValue,function(){ctrl.$$parseAndValidate()}),ctrl.$validators.match=function(){var value,match=getMatchValue(),notMatch=noMatchGetter(scope);return value=caselessGetter(scope)?angular.lowercase(ctrl.$viewValue)===angular.lowercase(match):ctrl.$viewValue===match,value^=notMatch,!!value}}}}),angular.module("app").directive("lowercaseize",function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){var lowercaseize=function(inputValue){void 0==inputValue&&(inputValue="");var lowercaseized=inputValue.toLowerCase();return lowercaseized!==inputValue&&(modelCtrl.$setViewValue(lowercaseized),modelCtrl.$render()),lowercaseized};modelCtrl.$parsers.push(lowercaseize),lowercaseize(scope[attrs.ngModel])}}}),angular.module("app").constant("payFrequencyCode",{"-1":"At Maturity",1:"Monthly",3:"Quarterly",6:"Semi-annual",12:"Yearly"}),angular.module("app").constant("investmentStatusCode",{10:"Funding",15:"Delayed",20:"Failed",30:"Funded",40:"Active",43:"Grace",45:"Overdue",48:"Late",50:"Default",53:"Charge-off",56:"Payoff pending",60:"Completed",63:"Sold",70:"Cancelled",71:"Repurchased"}),angular.module("app").constant("investmentStatus",{Funding:10,Delayed:15,Failed:20,Funded:30,Active:40,Grace:43,Overdue:45,Late:48,Default:50,"Charge-off":53,"Payoff pending":56,Completed:60,Sold:63,Cancelled:70,Repurchased:71}),angular.module("app").constant("investmentAssetClass",{"Real Estate":1,"Consumer Loans":2}),function(){var kendoThemes=kendo.dataviz.ui.themes,alphaFlow=kendo.deepExtend({},kendoThemes["default"],{chart:{seriesColors:["#2f90e1","#f0e710"]}}),alphaFlowCashflows=kendo.deepExtend({},kendoThemes["default"],{chart:{seriesColors:["#2f90e1","#a5dd05","#BF55EC"]}});kendoThemes.alphaFlow=alphaFlow,kendoThemes.alphaFlowCashflows=alphaFlowCashflows;var chartBarOptions={theme:"alphaFlow",
series:[{gap:.5,overlay:{gradient:"none"},opacity:.8},{gap:.5,overlay:{gradient:"none"},opacity:.8}],seriesDefaults:{type:"column",stack:!0,tooltip:{visible:!0,template:"${series.name} - ${value}"}},valueAxis:{titles:{font:"10px Arial,Helvetica,sans-serif"},labels:{font:"11px Arial,Helvetica,sans-serif"},line:{visible:!1}},categoryAxis:{labels:{font:"10px Arial,Helvetica,sans-serif",rotation:340},majorGridLines:{visible:!1},line:{visible:!1}},legend:{position:"top",align:"end",labels:{font:"10px Arial,Helvetica,sans-serif"}}};angular.module("app").constant("chartBarOptions",chartBarOptions)}(),angular.module("app").constant("chartColors",{Multifamily:"#a5dd05",Residential:"#2f90e1",Retail:"#68C3A3","Mobile Home":"#F4B350",Hospitality:"#BF55EC",Office:"#34495E",Storage:"#67809F",Industrial:"#90C695",MixtUse:"#90C695","Mixt use":"#90C695",Unknown:"#D2D7D3","Not specified":"#D2D7D3",Others:"#D2D7D3",Other:"#D2D7D3"}),angular.module("app").constant("defaultDonutOptions",{legend:{position:"bottom",visible:!1},seriesDefaults:{labels:{visible:!0,distance:10,background:"transparent",position:"outsideEnd",template:"#= category # - #= kendo.format('{0:P0}', percentage) #",font:"11px Arial,Helvetica,sans-serif"}},chartArea:{height:280,background:"#FFF"},seriesColors:["#89C4F4","#f2f40c","#68C3A3","#F4B350","#BF55EC","#D24D57","#34495E","#90C695"],series:[{type:"donut",startAngle:150,padding:40,field:"data",categoryField:"label",overlay:{gradient:"none"}}],tooltip:{visible:!0,template:"#= category # - #= kendo.format('{0:P0}', percentage) #",overlay:{gradient:"none"}}}),angular.module("app").constant("statesList",[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"American Samoa",abbreviation:"AS"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Federated States Of Micronesia",abbreviation:"FM"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Guam",abbreviation:"GU"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Palau",abbreviation:"PW"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virgin Islands",abbreviation:"VI"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}]),angular.module("app").constant("datesList",{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dates:[].map.call(angular.element(Array(31)),function(item,index){return index+1}),years:[].map.call(angular.element(Array(100)),function(item,index){return(new Date).getFullYear()-index-13})}),angular.module("app").constant("emailRegex",/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i),angular.module("app").constant("nameRegex",/^[a-z ,.'-]+$/i),angular.module("app").constant("passwordRegex",new RegExp("^(?=.*[A-Z])(?=.*[0-9]).{8,}$")),angular.module("app").constant("aesKeyRegex",/^[0-9a-zA-Z]{32}$/),angular.module("app").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("views/accountActivation.html",'<div class="animated fadeInDown af-login-wrapper"> <a href="http://www.alphaflow.com/"><img class="logo" src="img/alphaflow_logo.png" alt="Alphaflow"></a> <div ng-show="success" class="alert alert-success"> <p class="h3 no-margins">Thank you for confirming your email. <a ui-sref="login">Click here</a> to login into your AlphaFlow account!</p> </div> <div ng-show="error" class="alert alert-danger"> <p class="h3 no-margins">{{error}}</p> <p class="h3 no-margins">You can <a ui-sref="resendActivation">resend</a> activation email.</p> </div> </div>'),$templateCache.put("views/accounts.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-xs-12"> <h2>Your Platform Accounts</h2> <ol class="breadcrumb"> <li> <a href="/ai/dashboard">Home</a> </li> <li class="active"> <strong>Connected Platforms</strong> </li> </ol> </div> </div> <div class="row"> <div class="col-lg-12"> <div class="wrapper wrapper-content animated fadeInRight"> <div class="row"> <div class="ibox float-e-margins col-xs-12 col-sm-8 col-sm-push-2"> <div class="panel-group" id="accordion"> <div class="panel panel-default"> <div class="panel-heading"> <h5 class="panel-title"> <a data-toggle="collapse" data-parent="#accordion" href="#howsafe"> <i alt="image" class="pull-left fa fa-lock fa-2x"></i> <h3> How Safe is My Information? <a data-toggle="collapse" data-parent="#accordion" href="#howsafe"> <i class="fa fa-chevron-down"></i> </a> </h3> </a> </h5> </div> <div id="howsafe" class="panel-collapse collapse"> <div class="panel-body"> <p>AlphaFlow adheres to the same security encryption standards as your bank. We support browsers that use 128-bit encryption, which is just a means of scrambling information when it’s sent, in this case, between your device and AlphaFlow. Information that is encrypted at one end is then decrypted when it’s received at the other end. It’s the strongest and most secure form of encryption that is generally available in internet browsers today.</p> <p>To host your data, we use Amazon Web Services (“AWS”). Physical access is strictly controlled both at the perimeter and at building ingress points by professional security staff utilizing video surveillance, intrusion detection systems, and other electronic means. Authorized staff must pass two-factor authentication a minimum of two times to access data center floors. Translation: even if someone walked out with our hard drives, it would take them BILLIONS of years using the world’s fastest supercomputer to crack your encrypted data.</p> </div> </div> </div> </div> </div> <div class="ibox float-e-margins col-xs-12 col-sm-8 col-sm-push-2"> <div class="ibox-title input-group"> <h5>These are all of the investment platform connections that belong to you. You can use this page to turn on and off individual accounts, change the platform that an account is linked to, or delete existing connections.</h5> <span class="input-group-btn"> <button class="btn btn-small btn-success" ng-click="updateAllPlatforms()" ng-if="anyActivePlatform" ng-disabled="user.securityRoles.indexOf(\'demo_account\')>=0 || updateRequests">Update All</button> </span> </div> <div class="af-platforms ibox-content"> <h2 class="platform-group-heading">Real Estate</h2> <div class="feed-activity-list" ng-repeat="platform in availablePlatforms | filter: {assetClass: 1} | orderBy: \'name\' "> <div platform-details></div> </div> <h2 class="platform-group-heading">Consumer Credit</h2> <div class="feed-activity-list" ng-repeat="platform in availablePlatforms | filter: {assetClass: 2} | orderBy: \'name\' "> <div platform-details></div> </div> <div class="feed-activity-list"> <div class="feed-element"> <a href class="pull-left"> <i alt="image" class="pull-left fa fa-question fa-3x"></i> </a> <div class="media-body"> <h2>Can\'t find your platform?</h2> <form class="horizontal"> <div class="well"> <div class="row"> <div class="form-group"> <div>Just let us know what platforms we should connect next</div> <div class="input-group"> <input type="text" class="form-control" ng-model="requestOtherPlatforms.text" ng-change="requestOtherPlatforms.trackChange()"> <span class="input-group-btn"> <button type="button" class="btn btn-small btn-success" ng-disabled="!requestOtherPlatforms.btnEnabled" ng-click="saveOtherPlatformRequest($event)">{{requestOtherPlatforms.btnValue}}</button> </span> </div> </div> </div> </div> </form> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),$templateCache.put("views/admin/dashboard.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-xs-12"> <h2>Internal Dashboard</h2> </div> </div> <div class="wrapper wrapper-content p-xl" ng-if="dashboard"> <div class="animated fadeInRight"> <div class="row"> <div class="col-lg-4"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>User Summary</h5> </div> <div class="ibox-content text-center"> <div class="row"> <div class="col-xs-6"> <div class="font-bold text-primary"><small>Total</small></div> </div> <div class="col-xs-6"> <div class="font-bold text-primary"><small>Active</small></div> </div> </div> <div class="row"> <div class="col-xs-6"> <h2 class="no-margins">{{(dashboard.userStats.total.active || 0) + (dashboard.userStats.total.inactive || 0)}}</h2> </div> <div class="col-xs-6"> <h2 class="no-margins">{{dashboard.userStats.total.active}}</h2> </div> </div> </div> </div> </div> <div class="col-lg-4"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>New User Trend</h5> </div> <div class="ibox-content text-center"> <div class="row"> <div class="col-xs-4"> <div class="font-bold text-primary"><small>1 Day</small></div> </div> <div class="col-xs-4"> <div class="font-bold text-primary"><small>7 Days</small></div> </div> <div class="col-xs-4"> <div class="font-bold text-primary"><small>30 Days</small></div> </div> </div> <div class="row"> <div class="col-xs-4"> <h2 class="no-margins">{{(dashboard.userStats.new.today || 0) }}</h2> </div> <div class="col-xs-4"> <h2 class="no-margins">{{(dashboard.userStats.new.past7days || 0) }}</h2> </div> <div class="col-xs-4"> <h2 class="no-margins">{{(dashboard.userStats.new.past30days || 0) }}</h2> </div> </div> </div> </div> </div> <div class="col-lg-4"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>User Engagement</h5> </div> <div class="ibox-content text-center"> <div class="row"> <div class="col-xs-4"> <div class="font-bold text-primary"><small>1 Day</small></div> </div> <div class="col-xs-4"> <div class="font-bold text-primary"><small>7 Days</small></div> </div> <div class="col-xs-4"> <div class="font-bold text-primary"><small>30 Days</small></div> </div> </div> <div class="row"> <div class="col-xs-4"> <h2 class="no-margins">{{(dashboard.userStats.engaged.today || 0) }}</h2> </div> <div class="col-xs-4"> <h2 class="no-margins">{{(dashboard.userStats.engaged.past7days || 0) }}</h2> </div> <div class="col-xs-4"> <h2 class="no-margins">{{(dashboard.userStats.engaged.past30days || 0) }}</h2> </div> </div> </div> </div> </div> </div> </div> <div class="animated fadeInUp"> <div class="row"> <div class="col-xs-12"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5></h5> </div> <div class="ibox-content col-xs-12"> <div class="col-sm-12 col-md-6"> <div class="panel panel-default"> <div class="panel-heading text-center"> <h4>Users by # of Connected platforms</h4> </div> <div class="panel-body metrics-pie-chart-wrap"> <div kendo-chart k-options="kendoDonutOptions" k-data-source="chartUsersByConnectedPlatformsData.dataSource"></div> </div> </div> </div> <div class="col-sm-12 col-md-6"> <div class="panel panel-default"> <div class="panel-heading text-center"> <h4>Most popular platforms by User #</h4> </div> <div class="panel-body metrics-pie-chart-wrap"> <div kendo-chart k-options="kendoDonutOptions" k-data-source="chartMostPopularPlatformsData.dataSource"></div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="animated fadeInUp" ng-if="dashboard.platformVolumeAndUserCoverage[\'1\']"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>Real Estate Platforms - Summary</h5> </div> <div class="ibox-content col-sm-12"> <div class="col-xs-12 col-sm-6 col-lg-4"> <div class="panel panel-default"> <div class="panel-heading text-center"> <span>MARKET TOTAL ($MM)</span> </div> <div class="panel-body"> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total Raised</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'1\'].total.totalRaised/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">AF Share</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'1\'].total.totalUserContributionsAmt/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Investments</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'1\'].total.totalInvestments | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total AI Participations</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'1\'].total.totalUserContributionsCount | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Connected Accounts</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'1\'].total.connectedAccounts | number : 0}}</h5> </div> </div> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-lg-4" ng-repeat="platform in dashboard.platformVolumeAndUserCoverage[\'1\'].platforms"> <div class="panel panel-default"> <div class="panel-heading text-center"> <img class="img-circle" height="20" ng-src="img/platforms/{{platform.platform.connectorName}}.jpg"> <span>{{platform.platform.name}}</span> </div> <div class="panel-body"> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total Raised</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalRaised/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">AF Share</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalUserContributionsAmt/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Investments</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalInvestments | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total AI Participations</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalUserContributionsCount | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Connected Accounts</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.connectedAccounts | number : 0}}</h5> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="animated fadeInUp" ng-if="dashboard.platformVolumeAndUserCoverage[\'2\']"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>Consumer Loans Platforms - Summary</h5> </div> <div class="ibox-content col-sm-12"> <div class="col-xs-12 col-sm-6 col-lg-4"> <div class="panel panel-default"> <div class="panel-heading text-center"> <span>MARKET TOTAL ($MM)</span> </div> <div class="panel-body"> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total Raised</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'2\'].total.totalRaised/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">AF Share</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'2\'].total.totalUserContributionsAmt/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Investments</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'2\'].total.totalInvestments | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total AI Participations</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'2\'].total.totalUserContributionsCount | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Connected Accounts</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{dashboard.platformVolumeAndUserCoverage[\'2\'].total.connectedAccounts | number : 0}}</h5> </div> </div> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-lg-4" ng-repeat="platform in dashboard.platformVolumeAndUserCoverage[\'2\'].platforms"> <div class="panel panel-default"> <div class="panel-heading text-center"> <img class="img-circle" height="20" ng-src="img/platforms/{{platform.platform.connectorName}}.jpg"> <span>{{platform.platform.name}}</span> </div> <div class="panel-body"> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total Raised</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalRaised/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">AF Share</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalUserContributionsAmt/1000000 | currency : \'$\' : 2}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Investments</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalInvestments | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Total AI Participations</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.totalUserContributionsCount | number : 0}}</h5> </div> </div> <div class="row"> <div class="col-xs-7"> <div class="text-primary">Connected Accounts</div> </div> <div class="col-xs-5 text-right"> <h5 class="no-margins">{{platform.connectedAccounts | number : 0}}</h5> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="wrapper wrapper-content p-xl" ng-show="!dashboard"> <h2>Please wait...</h2> </div>'),$templateCache.put("views/admin/investments.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-sm-4"> <h2>Investment Data Quality Check</h2> </div> </div> <div class="wrapper wrapper-content p-xl"> <div class="animated fadeInRight"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>My Investments</h5> </div> <div class="ibox-content"> <div class="grid" style="height: 600px" ui-grid="gridOptions" ui-grid-edit ui-grid-row-edit ui-grid-cellnav ui-grid-resize-columns ui-grid-move-columns ui-grid-expandable></div> </div> </div> </div> </div> </div> </div>'),$templateCache.put("views/admin/security.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-sm-4"> <h2>Security</h2> </div> </div> <h2>Replace a compromised AES key</h2> <p>* Redis will be flushed (FLUSHALL), all uses will be signed out.</p> <form name="aesKeyChangeForm" id="aesKeyChangeForm" class="change-aes-key-form" ng-submit="shangeAESKey()"> <div ng-class="{\'has-error\':aesKeyChangeForm.oldAESKey.$invalid && aesKeyChangeForm.oldAESKey.$dirty}"> <label for="oldAESKey">Old AES Key</label> <input type="text" name="oldAESKey" id="oldAESKey" ng-model="oldAESKey" ng-pattern="aesKeyRegex" ng-required="true" class="form-control"> </div> <div ng-class="{\'has-error\':aesKeyChangeForm.newAESKey.$invalid && aesKeyChangeForm.newAESKey.$dirty}"> <label for="newAESKey">New AES Key</label> <input type="text" name="newAESKey" id="newAESKey" ng-model="newAESKey" ng-pattern="aesKeyRegex" ng-required="true" class="form-control"> </div> <button class="btn btn-primary block" ng-disabled="aesKeyChangeForm.$invalid || aesKeyChangeForm.$pristine">Change </button> </form>'),$templateCache.put("views/admin/users.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-sm-4"> <h2>User Administration</h2> </div> </div> <div class="wrapper wrapper-content p-xl"> <div class="animated fadeInRight"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Users</h5> </div> <div class="ibox-content"> <div class="grid" style="height: 600px" ui-grid="gridOptions" ui-grid-edit ui-grid-row-edit ui-grid-cellnav ui-grid-resize-columns ui-grid-move-columns></div> </div> </div> </div> </div> </div> </div>'),$templateCache.put("views/cashflows.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-xs-12"> <h2>Real Estate - Cashflows</h2> </div> </div> <div class="wrapper wrapper-content p-xl" ng-show="dataPresent"> <div class="animated fadeInRight"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Historical Incoming Cashflows</h5> </div> <div id="tabstrip" class="ibox-content text-center zoom-none"> <ul class="text-left"> <li class="k-state-active"> Earnings </li> <li> Returned Principal </li> </ul> <div class="k-content wide"> <div chart-zoom></div> <div id="earnings-chart" kendo-chart k-options="scrollableChartOptions" k-data-source="cashflowsChartDataSource" class="af-cashflows-chart"></div> </div> <div class="k-content wide"> <div chart-zoom></div> <div id="cashflows-chart" class="af-cashflows-chart" kendo-chart k-options="principalChartOptions" k-data-source="cashflowsPrincipalsChartDataSource"></div> </div> </div> </div> </div> <div class="animated fadeInRight"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Activity Log</h5> </div> <div class="ibox-content text-left"> <div kendo-grid k-options="cashflowsGridOptions" k-data-source="cashflowsGridDataSource"></div> </div> </div> </div> <div class="animated fadeInUp"> <div class="row"> <div class="col-md-6"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Earnings by Platform</h5> </div> <div class="ibox-content text-center"> <div kendo-chart id="earningsByPlatformChart"></div> </div> </div> </div> <div class="col-md-6"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Earnings by Type</h5> </div> <div class="ibox-content text-center"> <div kendo-chart k-options="cashflowsPieChartOptions" k-data-source="earningsByTypeChartDataSource"></div> </div> </div> </div> </div> </div> </div> <div class="wrapper wrapper-content p-xl" ng-show="!dataPresent && !dataObtainProgress"> <h2>You don\'t have any data yet. Have you connected and refreshed your accounts?</h2> </div>'),$templateCache.put("views/common/chart_zoom.html",'<div class="zoom-icon"> <div class="zoom-control clearfix"> <div class="zoom-btn zoom-out fa fa-plus"></div> <div class="zoom-btn zoom-in fa fa-minus"></div> </div> <div class="zoom-text"></div> </div>'),$templateCache.put("views/common/content.html",'<!-- Wrapper--> <div id="wrapper"> <!-- Navigation --> <div ng-include="\'views/common/navigation.html\'"></div> <!-- Page wraper --> <!-- ng-class with current state name give you the ability to extended customization your view --> <div id="page-wrapper" class="gray-bg {{$state.current.name}}"> <div class="af-progress" data-busy data-busy-add-classes="af-in-progress" data-not-busy-remove-classes="af-in-progress"><i class="fa fa-refresh fa-spin"></i></div> <!-- Page wrapper --> <div ng-include="\'views/common/topnavbar.html\'"></div> <!-- Main view  --> <div ui-view></div> <!-- Footer --> <div ng-include="\'views/common/footer.html\'"></div> </div> <!-- End page wrapper--> </div> <!-- End wrapper-->'),$templateCache.put("views/common/footer.html",'<div class="footer"> <div class="pull-right"> </div> <div> <strong>Copyright</strong> &copy; 2015 AlphaFlow, Inc., all rights reserved </div> </div>'),$templateCache.put("views/common/ibox_tools.html",'<div class="ibox-tools dropdown" dropdown> <a ng-click="showhide()"> <i class="fa fa-chevron-up"></i></a> <a class="dropdown-toggle" href dropdown-toggle> <i class="fa fa-wrench"></i> </a> <ul class="dropdown-menu dropdown-user"> <li><a href>Config option 1</a> </li> <li><a href>Config option 2</a> </li> </ul> <a ng-click="closebox()"><i class="fa fa-times"></i></a> </div>'),$templateCache.put("views/common/navigation.html",'<nav class="navbar-default navbar-static-side" role="navigation"> <div class="sidebar-collapse"> <ul side-navigation class="nav" id="side-menu"> <li class="nav-header"> <div class="dropdown profile-element"> <img alt="image" ng-show="user.profilePictureUrl" class="img-circle" ng-src="{{user.profilePictureUrl}}"> <i ng-show="!user.profilePictureUrl" class="fa fa-user fa-5x"></i> <a class="dropdown-toggle" data-toggle="dropdown" href="#"> <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">{{user.name.first}} {{user.name.last}} <b class="afProfileIconArrow caret"></b></strong> </span> </span> </a> <ul class="dropdown-menu animated fadeInRight m-t-xs"> <li><a ui-sref="ai.profile">My Profile</a></li> <li><a ui-sref="ai.accounts">Platforms</a></li> <li class="divider"></li> <li><a href="/logout">Logout</a></li> </ul> </div> <div class="logo-element"> AF+ </div> </li> <li ng-class="{active: $state.includes(\'dashboard\')}"> <a href><i class="fa fa-line-chart"></i> <span class="nav-label">Dashboard</span> <span class="fa arrow"></span></a> <ul class="nav nav-second-level" ng-class="{in: $state.includes(\'dashboard\')}"> <li ui-sref-active="active"><a ui-sref="ai.dashboard_realestate">Real Estate</a></li> <li ui-sref-active="active"><a ui-sref="ai.dashboard_consumerloans">Consumer loans</a></li> </ul> </li> <li ui-sref-active="active"> <a ui-sref="ai.cashflows"><i class="fa fa-recycle"></i> <span class="nav-label">Cashflows</span> </a> </li> <!--\r\n            <li ui-sref-active="active">\r\n                <a ui-sref="ai.platformmetrics"><i class="fa fa-heartbeat"></i> <span class="nav-label">Platform Metrics</span> </a>\r\n            </li>\r\n\r\n            <li ui-sref-active="active">\r\n                <a ui-sref="ai.publicmarkets"><i class="fa fa-university"></i> <span class="nav-label">Public Markets</span> </a>\r\n            </li>\r\n--> <li ui-sref-active="active"> <a ui-sref="ai.accounts"><i class="fa fa-cogs"></i> <span class="nav-label">Platforms</span> </a> </li> <li class="active" ng-show="isAdminUser()"> <a href=""><i class="fa fa-group"></i> <span class="nav-label">Admin</span><span class="fa arrow"></span></a> <ul class="nav nav-second-level"> <li ui-sref-active="active"><a ui-sref="admin.dashboard">Dashboard</a></li> <li ui-sref-active="active"><a ui-sref="admin.investments">Investments</a></li> <li ui-sref-active="active"><a ui-sref="admin.users">Users</a></li> <li ui-sref-active="active"><a ui-sref="admin.security">Security</a></li> </ul> </li> </ul> </div> </nav>'),$templateCache.put("views/common/popover-html-custom-popup.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }"> <div class="arrow"></div> <div class="popover-inner"> <h3 class="popover-title" ng-bind="title" ng-show="title"></h3> <div class="popover-content" ng-bind-html="content | trustAsHtml"></div> </div> </div>'),$templateCache.put("views/common/topnavbar.html",'<div class="row border-bottom"> <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0"> <div class="navbar-header"> <span minimaliza-sidebar></span> <!--\r\n            <form role="search" class="navbar-form-custom" method="post" action="">\r\n                <div class="form-group">\r\n                    <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">\r\n                </div>\r\n            </form>\r\n            --> </div> <ul class="nav navbar-top-links navbar-right"> <li> <a href="/logout"> <i class="fa fa-sign-out"></i> Log out </a> </li> </ul> </nav> </div>'),$templateCache.put("views/corp/privacy.html",'<div class="inmodal"> <div class="modal-header"> <h4 class="modal-title" style="color: white">AlphaFlow Inc. Privacy Policy</h4> </div> <div class="modal-body" style="overflow: scroll;height: {{data.height}}px"> <h1>Privacy Policy</h1> <h3>Date Last Revised for AlphaFlow, Inc.: July 1, 2015</h3> <h3>Plain English Privacy Overview</h3> <p> At AlphaFlow we believe that you have a right to understand exactly how your data will be used and exactly what AlphaFlow can/will and cannot/will not do with your data. We have tried to use clear and simple language but we do have to listen to our lawyers a little bit to make sure everything is buttoned up. </p> <p>This Privacy Policy sets forth AlphaFlow, Inc.\'s ("AlphaFlow", "we", "us" or "our") privacy practices and procedures in connection with AlphaFlow service located at www.AlphaFlow.com) and all related sub-domains, tools and services ("Website", "Websites", "Site" or "Sites"). Access to the Websites is provided pursuant to the Terms of Service accessible on our Websites and incorporated by reference herein. Capitalized terms used but not defined in this Privacy Policy, shall have the meaning set forth in the Terms of Service, or in the alternative and not defined therein, the Webster dictionary. This Privacy Policy applies solely to information collected by or in connection with this the AlphaFlow Service. </p> <p>Here is what most of you are here for:</p> <ol> <li>We won\'t sell your data to any third party</li> <li>We won\'t spam your contacts or connections; and</li> <li>We will be open and transparent about our business model and data usage as it relates to you, your Company, and any other entity that owns or pays for the data that is aggregated and maintained by our Service.</li> </ol> <p>By signing up for and using AlphaFlow you agree to our Terms and Conditions ("Terms") which are on our website and incorporated by reference herein (that means it\'s the same as if we stuck the entire Terms agreement in this one. It would be too long and we didn\'t so we "incorporate them by reference.) Signing up for and using the AlphaFlow Services does not change the rights, privileges, and authority of whomever owns the data that is aggregated by the service. </p> <h3>Overview</h3> <p> With your authorization and as your agent, AlphaFlow aggregates and integrates with a variety of third party systems, platforms, and Companies in order to provide its Services. We take precautions to ensure that your personal information is protected. However, it is important to note that AlphaFlow is not responsible for, nor under the control of, the online information practices or policies of any third party websites, services or Companies and this Privacy Policy does not apply to those websites, services or Companies. </p> <h3>Personal Information</h3> <p> We use personal information to communicate with you, provide you with our Services, and to help us improve our Services. We collect your name and contact information as well as your Third Party Login Credentials for each Third Party Platform (as defined below). </p> <p> We may use cookies, tags, and other technologies to analyze and track of your use of our Services and to provide a personalized experience. We also use cookies to help us measure usage and improve the quality of our Services. We keeps personal information contained in your cookies confidential. </p> <h3>Privacy is Your Call</h3> <p> You have complete control over your privacy decisions. We will explain how our business operates and how your data is used and then you must decide if you want to use the Services in agreement and compliance with this Privacy Policy and our Terms and Condition that can be found at www.AlphaFlow.com. </p> <p> You may review and correct your personal information and preferences at any time using the settings and/or "profile" features in the Service. You may opt-out of marketing and promotional emails from us by unsubscribing from the Service and/or unsubscribing from particular email services and/or features. </p> <p> By using our Websites, you indicate your consent for us to use cookies in order to uniquely identify your browser and improve the quality of our Services and to better understand what communications may be appropriate based upon your specific usage of the Service. It is important to understand that you may turn off cookies in your browser setting if you choose. However, in doing so, some or all of our Services may not work or may not work properly. </p> <p> Our Site may contain links to other sites. Any Personal Information you provide on the linked pages is provided directly to that third party and is subject to that third party\'s privacy policy. Our Privacy Policy does not apply to such linked sites, and we are not responsible for the content or privacy and security practices and policies of these sites or any other sites that are linked to from our Site. </p> <p> AlphaFlow is hosted by Amazon Web Services (AWS), who employ their own security measures. AWS employs industry-recognized certifications and audits: PCI DSS Level 1, ISO 27001, FISMA Moderate, HIPAA, and SAS 70 Type II. Their services and data centers have multiple layers of operational and physical security to ensure the integrity and safety of your data. You can read more about AWS security here. By using the AlphaFlow service you acknowledge and consent to us hosting all of your data in the AWS infrastructure. </p> <h3>Certain Third Party Data Services</h3> <p> AlphaFlow has integrated with certain third party data services to improve the quality and accuracy of your investment data. We DO NOT sell any data to these service providers but rather purchase their services to make AlphaFlow better and to provide additional value to you. </p> <h3>Legal Stuff</h3> <p>We reserve the right to disclose your Personal Information as required by law and when we believe that disclosure is necessary to protect our rights or the rights, property or safety of others; to comply with a judicial proceeding, court order, or legal process served on us or the Websites; or in connection with an actual or proposed corporate transaction or insolvency proceeding involving all or part of the business or asset to which the information pertains. </p> <p> We may update this Privacy Policy from time to time. If we decide to change our Privacy Policy, we will post those changes on this page, and update the Privacy Policy modification date at the top of this page. </p> <p> If you have any questions or comments about this Privacy Policy or how we use your or any third party data, please let us know at contact@AlphaFlow.com. </p> <p> Copyright © 2015 AlphaFlow, Inc. All Rights Reserved. </p> </div> <div class="modal-footer" ng-show="data"> <button type="button" class="btn btn-danger" ng-click="ok()">I AGREE</button> <button type="button" class="btn btn-primary" ng-click="cancel()">I DISAGREE</button> </div> </div>'),
$templateCache.put("views/corp/tos.html",'<div class="inmodal"> <div class="modal-header"> <h4 class="modal-title" style="color: white">AlphaFlow Terms and Conditions</h4> </div> <div class="modal-body" style="overflow: scroll;height: {{data.height}}px"> <h1>Terms and Conditions</h1> <h3>Date Last Revised for AlphaFlow, Inc.: July 1, 2015</h3> <h3>1. GENERAL TERMS.</h3> <p>These Terms of Use and Additional Terms and Conditions (“Agreement)” set forth the terms and conditions that apply to your access and use of the Alphaflow.com As used in this Agreement, the term "Sites" includes all Alphaflow.com websites, pages that are associated or within each website and all devices, applications or services that AlphaFlow, Inc. operates or offers that link to this Agreement. By accepting electronically (for example, clicking “I Agree”), installing, accessing or using the Services, you agree to be bound by the terms and conditions of this Agreement and AlphaFlow, Inc. Privacy and Security Policy, as they may be amended from time to time in the future (see “Modifications” below). If you do not agree to this Agreement, then you may not use the Services. </p> <h3>1. Accepting the Terms</h3> <p>By using the information, tools, features, software and functionality including content, updates and new releases provided by AlphaFlow, Inc. of the “AlphaFlow Service,” you agree to be bound by this Agreement, whether you are a “Visitor” (which means that you simply browse the Alphaflow.com website), a “Member” or a “Customer” (which means that you have registered with Alphaflow.com). The term “you” or “User” refers to a Visitor, Member or Customer. The term “we” refers to AlphaFlow, Inc.. If you wish to become a Member, communicate with other Members, or make use of the Services, you must read this Agreement and indicate your acceptance during the registration process. You may not use the AlphaFlow Service and you may not accept this Agreement if you are not are not at least 18 years of age and, in any event, of a legal age to form a binding contract with AlphaFlow, Inc.. If you accept this Agreement, you represent that you have the capacity to be bound by it or if you are acting on behalf of a company or entity that you have the authority to bind such entity. Before you continue, you should print or save a local copy of this Agreement for your records. </p> <h3>2. Privacy and your Personal Information</h3> <p>You agree that AlphaFlow, Inc. may use and maintain your data as part of the Services. You give AlphaFlow, Inc. permission to combine information you enter or upload for the Services with that of other users of the Services and/or other AlphaFlow, Inc. services. For example, this means that AlphaFlow, Inc. may use your and other users’ non-identifiable, aggregated data to improve the Services or to design promotions. AlphaFlow, Inc. may access or store personal information in multiple countries, including countries outside of your own country to the extent permitted by applicable law. </p> <h3>3. Description of the Services</h3> <p>The AlphaFlow Service is a Peer-to-Peer (“P2P”) investment information management service that allows you to consolidate and track your P2P investments. The AlphaFlow Service is provided to you by AlphaFlow, Inc. without charge and is meant to provide you with your information to allow you to organize and manage your P2P investments. The Services may also present you information relating to third party products or services (“AlphaFlow, Inc. Offers”), as well as provide you general tips, recommendations and educational material. </p> <h3>4. Account Information from Third Party Sites</h3> <p>Users may direct AlphaFlow, Inc. to retrieve their own information maintained online by third-parties with which they have customer relationships, maintain accounts or engage in financial transactions (“Account Information”). AlphaFlow, Inc. works with one or more online service providers to access this Account Information. AlphaFlow, Inc. makes no effort to review the Account Information for any purpose, including but not limited to accuracy, legality or non-infringement. AlphaFlow, Inc. is not responsible for the products and services offered by or on third-party sites. AlphaFlow, Inc. cannot always foresee or anticipate technical or other difficulties which may result in failure to obtain data or loss of data, personalization settings or other service interruptions. AlphaFlow, Inc. cannot assume responsibility for the timeliness, accuracy, deletion, non-delivery or failure to store any user data, communications or personalization settings. For example, when displayed through the Services, Account Information is only as fresh as the time shown, which reflects when the information is obtained from such sites. Such information may be more up-to-date when obtained directly from the relevant sites. You can refresh your Account Information through the Services, in the manner prescribed in the associated instructions. </p> <h3>5. AlphaFlow, Inc. Offers and Third-Party Links</h3> <p>Some parts of the Services are supported by sponsored links from advertisers and display AlphaFlow, Inc. Offers that may be custom matched to you based on information stored in the Services, queries made through the Services or other information. We will always disclose when a particular AlphaFlow, Inc. Offer is sponsored. In connection with AlphaFlow, Inc. Offers, the Services will provide links to other websites belonging to AlphaFlow, Inc. advertisers and other third parties. AlphaFlow, Inc. does not endorse, warrant or guarantee the products or services available through the AlphaFlow, Inc. Offers (or any other third-party products or services advertised on or linked from our site), whether or not sponsored, and AlphaFlow, Inc. is not an agent or broker or otherwise responsible for the activities or policies of those websites. AlphaFlow, Inc. does not guarantee that the loan, investment, plan or other service terms, rates or rewards offered by any particular advertiser or other third party on the Sites are actually the terms that may be offered to you if you pursue the offer or that they are the best terms or lowest rates available in the market. If you elect to use or purchase services from third parties, you are subject to their terms and conditions and privacy policy. </p> <h3>6. Your Registration Information</h3> <p>In order to allow you to use the Services, you will need to sign up for an account with AlphaFlow, Inc.. We may verify your identity. You authorize us to make any inquiries we consider necessary to validate your identity. These inquiries may include asking you for further information, requiring you to provide your full address, your social security number and/or requiring you to take steps to confirm ownership of your email address or financial instruments, ordering a credit report, or verifying information you provide against third party databases or through other sources. If you do not provide this information or AlphaFlow, Inc. cannot verify your identity, we can refuse to allow you to use the Services. You agree and understand that you are responsible for maintaining the confidentiality of your password which, together with your Login Credentials, allows you to access the Sites. By providing us with your e-mail address, you agree to receive all required notices electronically, through the Services by displaying links to notices generally on the Site, to that e-mail address. It is your responsibility to update or change that address, as appropriate. Notices will be provided in HTML (or, if your system does not support HTML, in plain-text) in the text of the e-mail or through a link to the appropriate page on our site, accessible through any standard, commercially available internet browser. If you become aware of any unauthorized use of your Registration or Account Information for the Services, you agree to notify AlphaFlow, Inc. immediately at the email address - contact@Alphaflow.com. </p> <h3>7. Your Use of the Services</h3> <p>Your right to access and use the Sites and the Services is personal to you and is not transferable by you to any other person or entity. You are only entitled to access and use the Sites and Services for lawful purposes. Accurate records enable AlphaFlow, Inc. to provide the Services to you. You must provide true, accurate, current and complete information about your accounts maintained at other web sites, as requested in our “add account” setup forms, and you may not misrepresent your Registration and Account Information. In order for the Services to function effectively, you must also keep your Registration and Account Information up to date and accurate. If you do not do this, the accuracy and effectiveness of the Services will be affected. You represent that you are a legal owner of, and that you are authorized to provide us with, all Registration and Account Information and other information necessary to facilitate your use of the Services. Your access and use of. Services may be interrupted from time to time for any of several reasons, including, without limitation, the malfunction of equipment, periodic updating, maintenance or repair of the Services or other actions that AlphaFlow, Inc., in its sole discretion, may elect to take. In no event will AlphaFlow, Inc. be liable to any party for any loss, cost, or damage that results from any scheduled or unscheduled downtime. Your sole and exclusive remedy for any failure or non-performance of the Services, including any associated software or other materials supplied in connection with such services, shall be for AlphaFlow, Inc. to use commercially reasonable efforts to effectuate an adjustment or repair of the applicable service. From time to time, AlphaFlow, Inc. may include new and/or updated pre-release features and trial use (“Beta Test” features) in Services for your use and which permit you to provide feedback. You understand and agree that your use of Beta Test features is voluntary and AlphaFlow, Inc. is not obligated to provide you with any Beta Test features. Furthermore, if you decide to use the Beta Test features you agree to abide by any rules or restrictions AlphaFlow, Inc. may place on them. You understand that once you use the Beta Test features, you may be unable to revert back to the earlier version of the same or similar feature. Additionally, if such reversion is possible, you may not be able to return or restore data created within the Beta Test feature back to the earlier version. The Beta Test features are provided on an “as is” basis and may contain errors or inaccuracies that could cause failures, corruption or loss of data and/or information from any connected device. You acknowledge and agree that all use of the Beta Test features is at your sole risk. </p> <h3>8. Use With Your Mobile Device</h3> <p>Use of these Services may be available through a compatible mobile device, Internet and/or network access and may require software. You agree that you are solely responsible for these requirements, including any applicable changes, updates and fees as well as the terms of your agreement with your mobile device and telecommunications provider. ALPHAFLOW, INC. MAKES NO WARRANTIES OR REPRESENTATIONS OF ANY KIND, EXPRESS, STATUTORY OR IMPLIED AS TO: (i) THE AVAILABILITY OF TELECOMMUNICATION SERVICES FROM YOUR PROVIDER AND ACCESS TO THE SERVICES AT ANY TIME OR FROM ANY LOCATION; (ii) ANY LOSS, DAMAGE, OR OTHER SECURITY INTRUSION OF THE TELECOMMUNICATION SERVICES; AND (iii) ANY DISCLOSURE OF INFORMATION TO THIRD PARTIES OR FAILURE TO TRANSMIT ANY DATA, COMMUNICATIONS OR SETTINGS CONNECTED WITH THE SERVICES. </p> <h3>9. Online and Mobile Alerts</h3> <p>AlphaFlow, Inc. may from time to time provide automatic alerts and voluntary account-related alerts. Automatic alerts may be sent to you following certain changes to your account or information, such as a change in your Registration Information. Voluntary account alerts may be turned on by default as part of the Services. They may then be customized, deactivated or reactivated by you. These alerts allow you to choose alert messages for your accounts. AlphaFlow, Inc. may add new alerts from time to time, or cease to provide certain alerts at any time upon its sole discretion. Each alert has different options available, and you may be asked to select from among these options upon activation of your alerts service. You understand and agree that any alerts provided to you through the Services may be delayed or prevented by a variety of factors. AlphaFlow, Inc. may make commercially reasonable efforts to provide alerts in a timely manner with accurate information, but cannot guarantee the delivery, timeliness, or accuracy of the content of any alert. AlphaFlow, Inc. shall not be liable for any delays, failure to deliver, or misdirected delivery of any alert; for any errors in the content of an alert; or for any actions taken or not taken by you or any third party in reliance on an alert. Electronic alerts will be sent to the email address you have provided as your primary email address for the Services. If your email address or your mobile device’s email address changes, you are responsible for informing us of that change. You can also choose to have alerts sent to a mobile device that accepts text messages. Changes to your email address or mobile number will apply to all of your alerts. Because alerts are not encrypted, we will never include your passcode. However, alerts may include your Login ID and some information about your accounts. Depending upon which alerts you select, information such as an account balance or the due date for your credit card payment may be included. Anyone with access to your email will be able to view the content of these alerts. At any time you may disable future alerts. </p> <h3>10. Rights You Grant to Us</h3> <p>By submitting information, data, passwords, usernames, PINs, other log-in information, materials and other content to AlphaFlow, Inc. through the Services, you are licensing that content to AlphaFlow, Inc. for the purpose of providing the Services. AlphaFlow, Inc. may use and store the content in accordance with this Agreement and our Privacy Statement. You represent that you are entitled to submit it to AlphaFlow, Inc. for use for this purpose, without any obligation by AlphaFlow, Inc. to pay any fees or be subject to any restrictions or limitations. By using the Services, you expressly authorize AlphaFlow, Inc. to access your Account Information maintained by identified third parties, on your behalf as your agent. When you use the “Add Platforms” feature of the Services, you will be directly connected to the website for the third party you have identified. AlphaFlow, Inc. will submit information including usernames and passwords that you provide to log into the Site. You hereby authorize and permit AlphaFlow, Inc. to use and store information submitted by you to accomplish the foregoing and to configure the Services so that it is compatible with the third party sites for which you submit your information. For purposes of this Agreement and solely to provide the Account Information to you as part of the Service, you grant AlphaFlow, Inc. a limited power of attorney, and appoint AlphaFlow, Inc. as your attorney-in-fact and agent, to access third party sites, retrieve and use your information with the full power and authority to do and perform each thing necessary in connection with such activities, as you could do in person. YOU ACKNOWLEDGE AND AGREE THAT WHEN ALPHAFLOW, INC. IS ACCESSING AND RETRIEVING ACCOUNT INFORMATION FROM THIRD PARTY SITES, ALPHAFLOW, INC. IS ACTING AS YOUR AGENT, AND NOT AS THE AGENT OF OR ON BEHALF OF THE THIRD PARTY THAT OPERATES THE THIRD PARTY SITE. You understand and agree that the Services are not sponsored or endorsed by any third parties accessible through the Services. AlphaFlow, Inc. is not responsible for any payment processing errors or fees or other Services-related issues, including those issues that may arise from inaccurate account information. </p> <h3>11. AlphaFlow, Inc.’s Intellectual Property Rights</h3> <p>The contents of the Services, including its “look and feel” (e.g., text, graphics, images, logos and button icons), photographs, editorial content, notices, software (including html-based computer programs) and other material are protected under both United States and other applicable copyright, trademark and other laws. The contents of the Services belong or are licensed to AlphaFlow, Inc. or its software or content suppliers. AlphaFlow, Inc. grants you the right to view and use the Services subject to these terms. You may download or print a copy of information for the Services for your personal, internal and non-commercial use only. Any distribution, reprint or electronic reproduction of any content from the Services in whole or in part for any other purpose is expressly prohibited without our prior written consent. You agree not to use, nor permit any third party to use, the Site or the Services or content in a manner that violates any applicable law, regulation or this Agreement. </p> <h3>12. Access and Interference</h3> <p>You agree that you will not:</p> <ul> <li>Use any robot, spider, scraper, deep link or other similar automated data gathering or extraction tools, program, algorithm or methodology to access, acquire, copy or monitor the Services or any portion of the Services, without AlphaFlow, Inc.’s express written consent, which may be withheld in AlphaFlow, Inc.’s sole discretion;</li> <li>Use or attempt to use any engine, software, tool, agent, or other device or mechanism (including without limitation browsers, spiders, robots, avatars or intelligent agents) to navigate or search the rvices, other than the search engines and search agents available through the Services and other than generally available third-party web browsers (such as Microsoft Explorer);</li> <li>Post or transmit any file which contains viruses, worms, Trojan horses or any other contaminating or destructive features, or that otherwise interfere with the proper working of the Services; or </li> <li>Attempt to decipher, decompile, disassemble, or reverse-engineer any of the software comprising or in any way making up a part of the Services.</li> </ul> <h3>13. Disclaimer of Representations and Warranties</h3> <p>THE SITES, SERVICES, INFORMATION, DATA, FEATURES, AND ALL CONTENT AND ALL SERVICES AND PRODUCTS ASSOCIATED WITH THE SERVICES OR PROVIDED THROUGH THE SERVICES (WHETHER OR NOT SPONSORED) ARE PROVIDED TO YOU ON AN “AS-IS” AND “AS AVAILABLE” BASIS. ALPHAFLOW, INC., ITS AFFILIATES, AND ITS THIRD PARTY PROVIDERS, LICENSORS, DISTRIBUTORS OR SUPPLIERS (COLLECTIVELY, "SUPPLIERS") MAKE NO REPRESENTATIONS OR WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, AS TO THE CONTENT OR OPERATION OF THE SITE OR OF THE SERVICES. YOU EXPRESSLY AGREE THAT YOUR USE OF THE SERVICES IS AT YOUR SOLE RISK. NEITHER ALPHAFLOW, INC. OR ITS SUPPLIERS MAKE ANY REPRESENTATIONS, WARRANTIES OR GUARANTEES, EXPRESS OR IMPLIED, REGARDING THE ACCURACY, RELIABILITY OR COMPLETENESS OF THE CONTENT ON THE SITES OR OF THE SERVICES (WHETHER OR NOT SPONSORED), AND EXPRESSLY DISCLAIMS ANY WARRANTIES OF NON-INFRINGEMENT OR FITNESS FOR A PARTICULAR PURPOSE. NEITHER ALPHAFLOW, INC. OR ITS SUPPLIERS MAKE ANY REPRESENTATION, WARRANTY OR GUARANTEE THAT THE CONTENT THAT MAY BE AVAILABLE THROUGH THE SERVICES IS FREE OF INFECTION FROM ANY VIRUSES OR OTHER CODE OR COMPUTER PROGRAMMING ROUTINES THAT CONTAIN CONTAMINATING OR DESTRUCTIVE PROPERTIES OR THAT ARE INTENDED TO DAMAGE, SURREPTITIOUSLY INTERCEPT OR EXPROPRIATE ANY SYSTEM, DATA OR PERSONAL INFORMATION. SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OF CERTAIN WARRANTIES OR THE LIMITATION OR EXCLUSION OF LIABILITY FOR INCIDENTAL OR CONSEQUENTIAL DAMAGES. IN SUCH STATES LIABILITY IS LIMITED TO THE EXTENT PERMITTED BY LAW. ACCORDINGLY, SOME OF THE ABOVE LIMITATIONS OF SECTIONS 15 AND 17 OF THIS PROVISION MAY NOT APPLY TO YOU. </p> <h3>14. Not a Financial Planner, Broker or Tax Advisor</h3> <p>NEITHER ALPHAFLOW, INC. NOR THE SERVICES ARE INTENDED TO PROVIDE LEGAL, TAX OR FINANCIAL ADVICE. ALPHAFLOW, INC. IS NOT A FINANCIAL PLANNER, BROKER OR TAX ADVISOR. The Service is intended only to assist you in your financial organization and decision-making and is broad in scope. Your personal financial situation is unique, and any information and advice obtained through the Service may not be appropriate for your situation. Accordingly, before making any final decisions or implementing any financial strategy, you should consider obtaining additional information and advice from your accountant or other financial advisers who are fully aware of your individual circumstances. </p> <h3>15. Limitations on AlphaFlow, Inc.’s Liability</h3> <p>ALPHAFLOW, INC. SHALL IN NO EVENT BE RESPONSIBLE OR LIABLE TO YOU OR TO ANY THIRD PARTY, WHETHER IN CONTRACT, WARRANTY, TORT (INCLUDING NEGLIGENCE) OR OTHERWISE, FOR ANY INDIRECT, SPECIAL, INCIDENTAL, CONSEQUENTIAL, EXEMPLARY, LIQUIDATED OR PUNITIVE DAMAGES, INCLUDING BUT NOT LIMITED TO LOSS OF PROFIT, REVENUE OR BUSINESS, ARISING IN WHOLE OR IN PART FROM YOUR ACCESS TO THE SITES, YOUR USE OF THE SERVICES, THE SITES OR THIS AGREEMENT, EVEN IF ALPHAFLOW, INC. HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. NOTWITHSTANDING ANYTHING TO THE CONTRARY IN THIS AGREEMENT, ALPHAFLOW, INC.’S LIABILITY TO YOU FOR ANY CAUSE WHATEVER AND REGARDLESS OF THE FORM OF THE ACTION, WILL AT ALL TIMES BE LIMITED TO A MAXIMUM OF $500.00 (FIVE HUNDRED UNITED STATES DOLLARS). </p> <h3>16. Your Indemnification of AlphaFlow, Inc.</h3> <p>You shall defend, indemnify and hold harmless AlphaFlow, Inc. and its officers, directors, shareholders, and employees, from and against all claims, suits, proceedings, losses, liabilities, and expenses, whether in tort, contract, or otherwise, that arise out of or relate, including but not limited to attorneys’ fees, in whole or in part arising out of or attributable to any breach of this Agreement or any activity by you in relation to the Sites or your use of the Services. </p> <h3>17. Ending your relationship with AlphaFlow, Inc.</h3> <p>This Agreement will continue to apply until terminated by either you or AlphaFlow, Inc. as set out below. If you want to terminate your legal agreement with AlphaFlow, Inc., you may do so as follows: To close your account for the AlphaFlow Service, please email us at contact@Alphaflow.com.</p> <p>AlphaFlow, Inc. may at any time, terminate its legal agreement with you and access to the Services: a. if you have breached any provision of this Agreement (or have acted in a manner which clearly shows that you do not intend to, or are unable to comply with the provisions of this Agreement); b. if AlphaFlow, Inc. in its sole discretion believes it is required to do so by law (for example, where the provision of the Service to you is, or becomes, unlawful); c. for any reason and at any time with or without notice to you; or d. immediately upon notice, to the e-mail address provided by you as part of your Registration Information. You acknowledge and agree that AlphaFlow, Inc. may immediately deactivate or delete your account and all related information and files in your account and/or prohibit any further access to all files and the Services by you. Further, you agree that AlphaFlow, Inc. shall not be liable to you or any third party for any termination of your access to the Services. </p> <h3>18. Modifications</h3> <p>AlphaFlow, Inc. reserves the right at any time and from time to time to modify or discontinue, temporarily or permanently, the Sites or Services with or without notice. AlphaFlow, Inc. reserves the right to change the Services, including applicable fees, in our sole discretion and from time to time. In such event, if you are a paid user to the AlphaFlow Services , AlphaFlow, Inc. will provide notice to you. If you do not agree to the changes after receiving a notice of the change to the Services, you may stop using the Services. Your use of the Services, after you are notified of any change(s) will constitute your agreement to such change(s). You agree that AlphaFlow, Inc. shall not be liable to you or to any third party for any modification, suspensions, or discontinuance of the Services. AlphaFlow, Inc. may modify this Agreement from time to time. Any and all changes to this Agreement may be provided to you by electronic means (i.e., via email or by posting the information on the Sites). In addition, the Agreement will always indicate the date it was last revised. You are deemed to accept and agree to be bound by any changes to the Agreement when you use the Services after those changes are posted. </p> <h3>19. Governing Law and Forum for Disputes</h3> <p>California state law governs this Agreement without regard to its conflicts of law provisions. ANY DISPUTE OR CLAIM RELATING IN ANY WAY TO THE SERVICES OR THESE TERMS OF USE WILL BE RESOLVED BY BINDING ARBITRATION, RATHER THAN IN COURT, except that you may assert claims in small claims court if your claims qualify. The Federal Arbitration Act governs the interpretation and enforcement of this provision; the arbitrator shall apply California law to all other matters. Notwithstanding anything to the contrary, any party to the arbitration may at any time seek injunctions or other forms of equitable relief from any court of competent jurisdiction. WE EACH AGREE THAT ANY AND ALL DISPUTES MUST BE BROUGHT IN THE PARTIES\' INDIVIDUAL CAPACITY AND NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY PURPORTED CLASS OR REPRESENTATIVE PROCEEDING. BY ENTERING INTO THIS AGREEMENT AND AGREEING TO ARBITRATION, YOU AGREE THAT YOU AND ALPHAFLOW, INC. ARE EACH WAIVING THE RIGHT TO FILE A LAWSUIT AND THE RIGHT TO A TRIAL BY JURY. IN ADDITION, YOU AGREE TO WAIVE THE RIGHT TO PARTICIPATE IN A CLASS ACTION OR LITIGATE ON A CLASS-WIDE BASIS. YOU AGREE THAT YOU HAVE EXPRESSLY AND KNOWINGLY WAIVED THESE RIGHTS. To begin an arbitration proceeding, send a letter requesting arbitration and describing your claim to AlphaFlow, Inc. Inc., in care of our registered agent Corporation Service Company, 2711 Centerville Road, Wilmington, DE 19808. Arbitration will be conducted by the American Arbitration Association (AAA) before a single AAA arbitrator under the AAA’s rules, which are available at www.adr.org or by calling 1-800-778-7879. Payment of all filing, administration and arbitrator fees and costs will be governed by the AAA\'s rules, but if you are unable to pay any of them, we will pay them for you. In addition, we will reimburse all such fees and costs for claims totaling less than $75,000 unless the arbitrator determines the claims are frivolous. Likewise, we will not seek its attorneys’ fees or costs in arbitration unless the arbitrator determines your claims or defenses are frivolous. You may choose to have the arbitration conducted by telephone, based on written submissions, or in person in the county where you live or at another mutually agreed location. The decision of the arbitrator shall be final and not appealable, and judgment on the arbitration award may be entered in any court having jurisdiction thereof. This Section 21 shall survive expiration, termination or rescission of this Agreement. </p> <h3>20. Allegations of Copyright and Trademark Infringements; Notification</h3> <p>AlphaFlow, Inc. respects the intellectual property rights of others and AlphaFlow, Inc. asks that users of the Site and Services do the same. If you believe that your intellectual property is being used on the Site in a way that constitutes copyright infringement, please provide our Designated Agent (set forth below) the following information (as required by Section 512(c)(3) of the Digital Millennium Copyright Act):</p> <ul> <li>A physical or electronic signature of a person authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.</li> <li>Identification of the copyrighted work claimed to have been infringed, or, if multiple copyrighted works at a single online site are covered by a single notification, a representative list of such works at that site.</li> <li>Identification of the material that is claimed to be infringing or to be the subject of infringing activity and that is to be removed or access to which is to be disabled, and information reasonably sufficient to permit the service provider to locate the material.</li> <li>Information reasonably sufficient to permit the service provider to contact the complaining party, such as an address, telephone number, and, if available, an electronic mail address at which the complaining party may be contacted.</li> <li>A statement that the complaining party has a good faith belief that use of the material in the manner complained of is not authorized by the copyright owner, its agent, or the law.</li> <li>A statement that the information in the notification is accurate, and under penalty of perjury, that the complaining party is authorized to act on behalf of the owner of an exclusive right that is allegedly infringed.</li> </ul> The information specified above must be sent to AlphaFlow, Inc.’s Designated Agent, whose contact information is as follows: <address> AlphaFlow, Inc.<br> Attention: CEO<br> 1370 Willow Rd.<br> Menlo Park, CA 94025<br> Email: contact@Alphaflow.com<br> </address> <p>Please note that Section 512(f) of the Digital Millennium Copyright Act may impose liability for damages on any person who knowingly sends meritless notices of infringement. Please do not make false claims. Any information or correspondence that you provide to AlphaFlow may be shared with third parties, including the person who provided AlphaFlow with the allegedly infringing material. Upon receipt of a bona fide infringement notification by the Designated Agent, it is AlphaFlow’s policy to remove or disable access to the infringing material, notify the user that it has removed or disabled access to the material, and, for repeat offenders, to terminate such user\'s access to the service. If you believe that your content should not have been removed for alleged copyright infringement, you may send AlphaFlow’s Designated Agent a written counter-notice with the following information: </p> <ul> <li>Identification of the copyrighted work that was removed, and the location on the Site where it would have been found prior to its removal;</li> <li>A statement, under penalty of perjury, that you have a good faith belief that the content was removed as a result of a mistake or misidentification; and</li> <li>Your physical or electronic signature, together with your contact information (address, telephone number and, if available, email address).</li> </ul> <p>If a counter-notice is received by the Designated Agent, we may send a copy of the counter-notice to the original complaining party informing that person that it may replace the removed material or cease disabling it in 10 business days. Unless the copyright owner files an action seeking a court order against the user, the removed material may be replaced or access to it restored in 10 to 14 business days or more after receipt of the counter-notice, at our discretion. </p> </div> <div class="modal-footer" ng-show="data"> <button type="button" class="btn btn-danger" ng-click="ok()">I AGREE</button> <button type="button" class="btn btn-primary" ng-click="cancel()">I DISAGREE</button> </div> </div>'),$templateCache.put("views/dashboard.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-xs-12"> <h2>Real Estate - Investment Dashboard</h2> </div> </div> <div class="wrapper wrapper-content p-xl" ng-show="dataPresent"> <div class="animated fadeInRight"> <div class="row"> <div class="col-lg-4"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Active Investments</h5> </div> <div class="ibox-content text-center"> <div class="row"> <div class="col-xs-6"> <div class="font-bold text-primary"><small>Equity</small></div> <div class="widget style1 lazur-bg"> <div class="row vertical-align"> <h2 class="font-bold">{{stats.investments.equity.active.count}}</h2> </div> </div> </div> <div class="col-xs-6"> <div class="font-bold text-primary"><small>Debt</small></div> <div class="widget style1 lazur-bg"> <div class="row vertical-align"> <h2 class="font-bold">{{stats.investments.debt.active.count}}</h2> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <h2 class="no-margins">{{stats.investments.equity.active.amount | currency : \'$\': 0}}</h2> </div> <div class="col-xs-6"> <h2 class="no-margins">{{stats.investments.debt.active.amount | currency : \'$\': 0}}</h2> </div> </div> </div> </div> </div> <div class="col-lg-4"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Total Investments</h5> </div> <div class="ibox-content text-center"> <div class="row"> <div class="col-xs-6"> <div class="font-bold text-primary"><small>Equity</small></div> <div class="widget style1 lazur-bg"> <div class="row vertical-align"> <h2 class="font-bold">{{stats.investments.equity.count}}</h2> </div> </div> </div> <div class="col-xs-6"> <div class="font-bold text-primary"><small>Debt</small></div> <div class="widget style1 lazur-bg"> <div class="row vertical-align"> <h2 class="font-bold">{{stats.investments.debt.count}}</h2> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <h2 class="no-margins">{{stats.investments.equity.amount | currency : \'$\' : 0}}</h2> </div> <div class="col-xs-6"> <h2 class="no-margins">{{stats.investments.debt.amount | currency : \'$\' : 0}}</h2> </div> </div> </div> </div> </div> </div> </div> <div class="animated fadeInRight"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg pending-wrapper"> <h5>My Investments</h5> <div class="ibox-tools"> <div data-sync-button data-sync-button-call="refreshDashBoardGrid()"></div> </div> </div> <div class="animated fadeInDown alert alert-info hidden grid-content-status"></div> <div id="dashBoardGrid" kendo-grid="dashBoardGrid" k-options="dashboardOptions" k-data-source="dashboardGridDataSource" class="investments-table"></div> </div> </div> </div> </div> <div class="animated fadeInRight"> <div class="row"> <div class="col-xs-12 col-md-6"> <div class="ibox float-e-margins inv-stat-donut-wrap"> <div class="ibox-title lazur-bg"> <h5>Active Investments by Platform ($) </h5> </div> <div class="inv-stat-donut" kendo-chart k-options="kendoDonutOptions" k-data-source="amountByPlatformDataSource"></div> </div> </div> <div class="col-xs-12 col-md-6"> <div class="ibox float-e-margins inv-stat-donut-wrap"> <div class="ibox-title lazur-bg"> <h5>Active Investments by Class ($)</h5> </div> <div class="inv-stat-donut" kendo-chart k-options="kendoDonutOptions" k-data-source="amountByClassDataSource"></div> </div> </div> </div> </div> <div class="animated fadeInRight"> <div class="row"> <div class="col-xs-12 col-md-6"> <div class="ibox float-e-margins inv-stat-donut-wrap"> <div class="ibox-title lazur-bg"> <h5>Top Sponsors ($)</h5> </div> <div class="inv-stat-donut" kendo-chart k-options="kendoDonutOptions" k-data-source="topSponsorsDataSource"></div> </div> </div> <div class="col-xs-12 col-md-6"> <div class="ibox float-e-margins inv-stat-donut-wrap"> <div class="ibox-title lazur-bg"> <h5>Top States ($)</h5> </div> <div class="inv-stat-donut" kendo-chart k-options="kendoDonutOptions" k-data-source="topStatesDataSource"></div> </div> </div> </div> </div> <div class="animated fadeInRight"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Investment Footprint</h5> </div> <div class="ibox-content google-map" id="myInvestmentsMap" style="height: 600px"></div> </div> </div> </div> </div> </div> <div class="wrapper wrapper-content p-xl" ng-show="!dataPresent && !dataObtainProgress"> <h2>You don\'t have any data yet. Have you connected and refreshed your Real Estate accounts?</h2> </div>'),
$templateCache.put("views/dashboard_consumerloans.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-xs-12"> <h2>Consumer Loans - Investment Dashboard <sup class="text-danger"><strong>(&beta;eta)</strong></sup></h2> </div> </div> <div class="wrapper wrapper-content p-xl" ng-if="dataPresent"> <div class="animated fadeInRight"> <div class="row"> <div class="col-sm-12 col-md-6 col-lg-4" ng-repeat="platform in analytics.accountSummaryByPlatform"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>{{platform.platform}} Overview</h5> </div> <div class="ibox-content"> <div class="row"> <div class="col-xs-6"> <div class="font-bold text-primary">Account Total</div> </div> <div class="col-xs-6 text-right"> <h3 class="no-margins">{{platform.summary.accountTotal | currency : \'$\' : 2}}</h3> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="font-bold text-primary">Available Cash</div> </div> <div class="col-xs-6 text-right"> <h3 class="no-margins">{{platform.summary.availableCash | currency : \'$\' : 2}}</h3> </div> </div> <div class="row"> <div class="col-xs-12"> <div class="font-bold text-primary">Principal</div> </div> </div> <div class="row"> <div> <div class="col-xs-6"> <div class="font-bold text-primary"><small>- Outstanding</small></div> </div> <div class="col-xs-6 text-right"> <h3 class="no-margins">{{platform.summary.outstandingPrincipal | currency : \'$\' : 2}}</h3> </div> </div> </div> <div class="row"> <div> <div class="col-xs-6"> <div class="font-bold text-primary"><small>- Returned</small></div> </div> <div class="col-xs-6 text-right"> <h3 class="no-margins">{{platform.summary.returnedPrincipal | currency : \'$\' : 2}}</h3> </div> </div> </div> <div class="row"> <div class="col-xs-12"> <div class="font-bold text-primary">Earnings</div> </div> </div> <div class="row"> <div> <div class="col-xs-6"> <div class="font-bold text-primary"><small>- Net Interest</small></div> </div> <div class="col-xs-6 text-right"> <h3 class="no-margins">{{(platform.summary.earnedInterest | currency : \'$\' : 2) || \'?\'}}</h3> </div> </div> </div> <div class="row"> <div> <div class="col-xs-6"> <div class="font-bold text-primary"><small>- Late Fees</small></div> </div> <div class="col-xs-6 text-right"> <h3 class="no-margins">{{(platform.summary.earnedLateFees | currency : \'$\' : 2) || \'?\'}}</h3> </div> </div> </div> </div> </div> </div> </div> </div> <div class="animated fadeInUp"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>Notes Summary</h5> <div class="ibox-tools"> <div data-sync-button data-sync-button-call="obtainData()" data-sync-button-class="badge-inverse"></div> </div> </div> <div class="ibox-content col-sm-12"> <div class="col-sm-12 col-md-6 col-lg-4" ng-repeat="platform in analytics.dealsByStatus"> <div class="panel panel-default"> <div class="panel-heading text-center"> <h4>{{platform.platform}}</h4> </div> <div class="panel-body"> <div class="row" ng-repeat="status in platform.stats"> <div class="col-xs-5"> <div class="font-bold text-primary">{{investmentStatusCode[status.label]}}</div> </div> <div class="col-xs-7"> <div class="col-xs-4 font-bold text-primary text-right"> {{status.count}} </div> <div class="col-xs-8 font-bold text-primary text-right"> {{status.amount | currency : \'$\' : 2}} </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="animated fadeInUp" ng-if="analytics.totalDealsByPlatform"> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title blue-bg"> <h5>Active Investments by Platform and Grade ($ volume)</h5> </div> <div class="ibox-content col-sm-12"> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <div class="panel panel-default"> <div class="panel-heading text-center"> <h4>{{chartActiveInvByPlatformData.chartTitle}}</h4> </div> <div class="panel-body metrics-pie-chart-wrap"> <div class="inv-stat-donut" kendo-chart k-options="kendoDonutOptions" k-data-source="chartActiveInvByPlatformData.dataSource"></div> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" ng-repeat="chart in chartActiveInvByGrade"> <div class="panel panel-default"> <div class="panel-heading text-center"> <h4>{{chart.chartTitle}}</h4> </div> <div class="panel-body metrics-pie-chart-wrap"> <div kendo-chart k-options="kendoDonutOptions" k-data-source="chart.dataSource"></div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="wrapper wrapper-content p-xl" ng-show="!dataPresent && !dataObtainProgress"> <h2>You don\'t have any data yet. Have you connected and refreshed your Consumer Loan accounts?</h2> </div>'),$templateCache.put("views/footer.html",'<footer role="contentinfo" id="footer"> <div id="inner-footer" class="container"> <div id="widget-footer" class="clearfix row"></div> <nav class="clearfix"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-6 col-md-offset-3"> <div class="wrapper-social"> <ul class="social-networks"> <li> <a rel="external" target="_blank" title="Twitter" href="https://twitter.com/alphaflowinc"> <span class="social-icon twitter"></span> </a> </li> <li> <a rel="external" target="_blank" title="Facebook" href="https://www.facebook.com/alphaflowinc"> <span class="social-icon facebook"></span> </a> </li> <li> <a rel="external" target="_blank" title="LinkedIn" href="https://www.linkedin.com/company/alphaflow/"> <span class="social-icon linkedin"></span> </a> </li> </ul> </div> <p class="info-company"><span class="address">44 Tehama St., San Francisco, CA 94105</span></p> <ul id="menu-footer" class="nav footer-nav clearfix"><li id="menu-item-29" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-29"><a href="http://alphaflow.com/privacy-policy/">Privacy Policy</a></li> <li id="menu-item-28" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-28"><a href="http://alphaflow.com/terms-of-use/">Terms of Use</a></li> </ul> <p class="footer-email"> <a href="mailto:contact@alphaflow.com">contact@alphaflow.com</a> </p> </div> </nav> <p class="pull-right" id="copyright_foot"></p> <p class="attribution">© AlphaFlow, Inc. All rights reserved.</p> </div> <!-- end #inner-footer --> </footer>'),$templateCache.put("views/header.html",'<header role="banner"> <div id="inner-header" class="clearfix"> <div class="navbar navbar-default navbar-fixed-top"> <div class="container" id="navbarcont"> <div class="nav-container row"> <div class="navbar-header col-xs-9 col-sm-3"> <a class="navbar-brand logo logo_img" id="logo_lg" title="Bringing transparency and insights to your peer to peer investments" href="http://www.alphaflow.com/"> <img src="./img/alphaflow-logo.png" class="img-responsive" alt="Bringing transparency and insights to your peer to peer investments"> </a> </div><!-- end .navbar-header --> <div class="menu-mobile col-xs-3 col-sm-9 pull-right"> <button type="button" id="nav-expander" class="navbar-toggle hidden-md hidden-lg" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="col-sm-9 col-md-9 col-lg-9" id="topmenuwrap"> <nav role="navigation"> <!--<div class="navbar-collapse">--> <div class="wraper-menu-div"> <ul id="menu-main-menu" class="top-nav clearfix nav navbar-nav"><li id="menu-item-128" class="menu-item menu-item-type-post_type menu-item-object-page depth0"><a href="http://alphaflow.com/how-it-works/">HOW IT WORKS</a></li> <li id="menu-item-117" class="menu-item menu-item-type-post_type menu-item-object-page depth0"><a href="http://alphaflow.com/faq/">FAQ</a></li> <li id="menu-item-11" class="menu-item menu-item-type-post_type menu-item-object-page depth0"><a href="http://alphaflow.com/who-we-are/">WHO WE ARE</a></li> <li id="menu-item-116" class="menu-item menu-item-type-post_type menu-item-object-page depth0"><a href="http://alphaflow.com/resource-library/">KNOWLEDGEBASE</a></li> <li id="menu-item-15" class="right-item green signup menu-item menu-item-type-custom menu-item-object-custom depth0" ui-sref-active="active"> <a ui-sref="signup">SIGN UP</a> </li> <li id="menu-item-14" class="right-item menu-item menu-item-type-custom menu-item-object-custom depth0" ui-sref-active="active"> <a ui-sref="login">LOG IN</a> </li> </ul> </div> </nav> </div> </div> </div> </div> </div> </header>'),$templateCache.put("views/landing.html",'<div id="wrap"> <div ng-include="\'/views/header.html\'"></div> <!-- Custom styles for this template --> <!--<link href="styles/landing.css" rel="stylesheet">--> <div class="animated fadeInDown"> <div id="inSlider" class="carousel slide carousel-fade" data-ride="carousel"> <ol class="carousel-indicators"> <li data-target="#inSlider" data-slide-to="0" class="active"></li> <li data-target="#inSlider" data-slide-to="1"></li> </ol> <div class="carousel-inner" role="listbox"> <div class="item active"> <div class="container"> <div class="carousel-caption"> <h1>Your complete P2P Investment<br> picture in minutes </h1> <p>Sign up for an invitation to our private beta.</p> <p> <a class="btn btn-lg btn-warning" href="/signup" role="button">SIGN UP ></a> </p> </div> <div class="carousel-image wow zoomIn"> <img src="img/laptop.png" alt="laptop"> </div> </div> <!-- Set background for slide in css --> <div class="header-back one"></div> </div> <div class="item"> <div class="container"> <div class="carousel-caption blank"> <h1>Manage your P2P portfolio<br> in one place </h1> <p>Sign up for an invitation to our private beta.</p> <p> <a class="btn btn-lg btn-warning" href="/signup" role="button">SIGN UP ></a> </p> </div> </div> <!-- Set background for slide in css --> <div class="header-back two"></div> </div> </div> <a class="left carousel-control" href="#inSlider" role="button" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a> <a class="right carousel-control" href="#inSlider" role="button" data-slide="next"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> <span class="sr-only">Next</span> </a> </div> <section id="features" class="gray-section"> <div class="container services"> <div class="row"> <div class="col-sm-4"> <h2>Consolidated Dashboard</h2> <p>Say goodbye to tracking your activity in Excel. AlphaFlow pulls all of your investments into one clean and comprehensive dashboard, giving you a complete picture of your portfolio.</p> </div> <div class="col-sm-4"> <h2>Portfolio Management</h2> <p>You can’t manage what you can’t measure. How does your portfolio break down by asset class, sponsor, platform, etc.? We’ll give you the answers, with clean and actionable intelligence.</p> </div> <div class="col-sm-4"> <h2>Performance Tracking</h2> <p>Real-time performance tracking on every investment. Are you receiving payments on time? Are your actual returns matching projections? We’ve got you covered.</p> </div> </div> </div> </section> <section class="gray-section"> <div class="container features"> <div class="row"> <div class="col-lg-12 text-center"> <div class="navy-line"></div> <h1>Your Peer-to-Peer investment picture in one place</h1> <p>See all of your investments, payments, and returns together.</p> </div> </div> <div class="row"> <div class="col-md-3 text-center wow fadeInLeft"> <div> <i class="fa fa-line-chart features-icon"></i> <h2>Investment Tracking</h2> <p>You already have a job. Organizing your investments shouldn\'t be a second one.</p> </div> <div class="m-t-lg"> <i class="fa fa-lightbulb-o features-icon"></i> <h2>Tools & Tips</h2> <p>Compare your portfolio to market benchmarks and get a view on the entire landscape as you decide where to invest next.</p> </div> </div> <div class="col-md-6 text-center wow zoomIn"> <img src="img/perspective.png" alt="dashboard" class="img-responsive"> </div> <div class="col-md-3 text-center wow fadeInRight"> <div> <i class="fa fa-legal features-icon"></i> <h2>Protect Yourself</h2> <p>Investing is a huge part of your life. We\'ll help you make sure you\'ve got a clear view of everything, every day.</p> </div> <div class="m-t-lg"> <i class="fa fa-bell features-icon"></i> <h2>Alerts & Notifications</h2> <p>Keep up with the news, changes, and payments on all your investments. (in progress)</p> </div> </div> </div> </div> </section> <section id="howitworks" class="timeline gray-section"> <div class="container"> <div class="row"> <div class="col-lg-12 text-center"> <div class="navy-line"></div> <h1>How It Works</h1> <h3>AlphaFlow automatically aggregates all your investments into one place, so you can finally get the full picture.</h3> </div> </div> <div class="row features-block"> <div class="col-lg-12"> <div id="vertical-timeline" class="vertical-container light-timeline center-orientation"> <div class="vertical-timeline-block"> <div class="vertical-timeline-icon navy-bg"> <i class="fa fa-briefcase"></i> </div> <div class="vertical-timeline-content"> <h2>Step 1 - <a href ng-href="/signup">Sign up</a> (It\'s free!)</h2> <p>If you\'ve received an invite, just sign up with your LinkedIn, Google, or Facebook account.</p> <span class="vertical-date"></span> </div> </div> <div class="vertical-timeline-block"> <div class="vertical-timeline-icon navy-bg"> <i class="fa fa-file-text"></i> </div> <div class="vertical-timeline-content"> <h2>Step 2 - Connect Your Accounts</h2> <p>Add all your P2P accounts and we\'ll automatically build your dashboard!</p> <span class="vertical-date"></span> </div> </div> <div class="vertical-timeline-block"> <div class="vertical-timeline-icon navy-bg"> <i class="fa fa-cogs"></i> </div> <div class="vertical-timeline-content"> <h2>Step 3 - Stay Up-to-Date</h2> <p>AlphaFlow automatically updates your investment activity so you\'ll always have the full picture.</p> <span class="vertical-date"></span> </div> </div> </div> </div> </div> <div class="row"> <div class="col-lg-12 text-center"> <h3>We think you\'ll love it. It only takes minutes to <a href ng-href="/signup">sign up</a> and get started. Get going now!</h3> <br><br> </div> </div> </div> </section> <section id="team" class="gray-section team"> <div class="container"> <div class="row m-b-lg"> <div class="col-lg-12 text-center"> <div class="navy-line"></div> <h1>Our Team</h1> </div> </div> <div class="row"> <div class="col-sm-6 wow fadeInLeft"> <div class="team-member"> <img ng-src="img/ray.jpg" class="img-responsive img-circle img-small" alt=""> <h4><span class="navy">Ray</span> Sturm</h4> <p> Ray is the founder and CEO of AlphaFlow. Previously, Ray founded RealtyShares, where his responsibilities included leading investor relations, setting strategic direction, and underwriting investment opportunities. He began his career in finance, working in investment banking first on the Acquisition Finance team at Bear Stearns and then the Restructuring team at Lazard Frères. From there, he joined CCMP Capital as a private equity investment professional, before transitioning to the venture-backed world as the Director of Business Development at SmartDrive Systems. </p> <ul class="list-inline social-icon"> <li><a href="https://www.linkedin.com/pub/ray-sturm/3/270/439" target="_blank"><i class="fa fa-linkedin"></i></a> </li> </ul> </div> </div> <div class="col-sm-6"> <div class="team-member wow zoomIn"> <img ng-src="img/bog.jpg" class="img-responsive img-circle img-small" alt=""> <h4><span class="navy">Bogdan</span> Cirlig</h4> <p> Bogdan is the founder and CTO of AlphaFlow. Previously he founded Zilpy, where he led the product design, implementation, data mining and analytics, partnerships and marketing efforts. Bogdan has been hands on building technology teams and delivering enterprise grade products for the past 15 years for various companies public and private including Advertising.com, Chase Finance, Enron. </p> <ul class="list-inline social-icon"> <li><a href="http://www.linkedin.com/in/bogdancirlig" target="_blank"><i class="fa fa-linkedin"></i></a> </li> </ul> </div> </div> </div> </div> </section> </div> <div ng-include="\'/views/footer.html\'"></div> </div> <script src="scripts/plugins/cbpAnimatedHeader.js"></script>'),$templateCache.put("views/login.html",'<div id="wrap"> <div ng-include="\'/views/header.html\'"></div> <div class="content-wrapper"> <div class="animated fadeInDown container body-content"> <div class="form-wrapper col-xs-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="alerts-wrapper" ng-show="error && error.message"> <div ng-show="error.message === \'reactivation\'" class="alert alert-success"> <p class="h3 no-margins">Your email has been changed and should be verified, please check your email for an activation link.</p> </div> <div ng-show="error.message === \'expired\'" class="alert alert-danger"> <p class="h3 no-margins">Password reset link expired. Please <a ui-sref="passwordReset({password_reset_code:null})">click here</a> to reset password again.</p> </div> <div ng-show="error && error.message !== \'reactivation\' && error.message !== \'expired\'" class="alert alert-danger"> <p class="h3 no-margins">{{error.message}}</p> </div> </div> <div ng-show="currentView === \'login\' && !error"> <div class="login-form"> <h1>Log In</h1> <form class="form" method="POST" action="{{loginRoute}}" name="afLoginForm" novalidate> <div class="form-group" ng-show="loginErrorMsg"> <div> <p class="alert alert-danger">{{loginErrorMsg}}</p> </div> </div> <p class="email input-wrapper" ng-class="{\'has-error\':afLoginForm.email.$invalid && afLoginForm.email.$dirty}"> <input type="email" ng-model="email" name="email" id="afEmail" required ng-pattern="emailRegex" maxlength="50" lowercaseize class="email" placeholder="EMAIL"> </p><p class="alert alert-danger" ng-show="afLoginForm.email.$invalid && afLoginForm.$submitted">Invalid email.</p>  <p class="password input-wrapper" ng-class="{\'has-error\':afLoginForm.password.$invalid && afLoginForm.password.$dirty}"> <input type="password" ng-model="password" name="password" id="afPassword" required maxlength="50" class="password" placeholder="PASSWORD"> </p><p class="alert alert-danger" ng-show="afLoginForm.password.$invalid && afLoginForm.$submitted">Invalid password.</p>  <p class="text-right"> <input id="afLoginFormSubmit" type="submit" ng-disabled="loginProgress" class="button submit" value="LOG IN"> </p> </form> <div class="social-login text-center"> <div class="block-inline clearfix"> <span class="text">Log in with</span> <ul class="social-icon"> <li><a title="Login with Linkedin" class="linkedin icon" href="{{ENV.authEndpoint}}/auth/linkedin" target="_self"></a></li> <li><a title="Login with Facebook" class="facebook icon" href="{{ENV.authEndpoint}}/auth/facebook" target="_self"></a></li> <li><a title="Login with G+" class="g-plus icon" href="{{ENV.authEndpoint}}/auth/google" target="_self"></a></li> </ul> </div> </div> </div> <div class="rec-pass"> <a ng-click="openResetPassword()" title="Forgot Password">I FORGOT MY PASSWORD</a> </div> </div> <div ng-show="currentView === \'passwordReset\' && !error"> <div class="reset-form" ng-show="!setNewPassword"> <h1>Reset Password</h1> <div class="alert alert-success" ng-show="resetPasswordSuccess"> <p class="h3 no-margins">Please check your email for a password reset link.</p> </div> <div class="alert alert-danger" ng-show="resetPasswordError"> <p class="h3 no-margins">{{resetPasswordError}}</p> </div> <form class="form" ng-submit="!resetPasswordProgress && afPasswordResetForm.$valid && resetPassword()" name="afPasswordResetForm" novalidate ng-show="!resetPasswordSuccess"> <p class="email input-wrapper" ng-class="{\'has-error\':afPasswordResetForm.afPasswordResetEmail.$invalid && afPasswordResetForm.afPasswordResetEmail.$dirty}"> <input type="email" class="email" placeholder="EMAIL" ng-model="email" name="afPasswordResetEmail" id="afPasswordResetEmail" required ng-pattern="emailRegex" maxlength="50" lowercaseize> </p> <div class="alert alert-danger" ng-show="afPasswordResetForm.afPasswordResetEmail.$invalid && afPasswordResetForm.$submitted">Invalid email.</div> <p class="text-right"><input type="submit" class="button submit" value="Reset Password" ng-disabled="resetPasswordProgress"></p> </form> </div> <div class="new-password-form" ng-show="setNewPassword && passwordResetCodeChecked"> <h1>Set New Password</h1> <div class="alert alert-success" ng-show="setPasswordSuccess"> <p class="h3 no-margins">Your password has been successfully changed. You can login using your new password <a ui-sref="login">here</a>.</p> </div> <div class="alert alert-danger" ng-show="setPasswordError"> <p class="h3 no-margins">{{setPasswordError}}</p> </div> <form class="form" name="afNewPasswordForm" novalidate ng-submit="afNewPasswordForm.$valid && !passwordMismatch && !setNewPasswordProgress && setPassword()" ng-show="!setPasswordSuccess"> <p class="password input-wrapper" ng-class="{\'has-error\':afNewPasswordForm.afNewPassword.$invalid && afNewPasswordForm.afNewPassword.$dirty}"> <input type="password" ng-model="newPassword" name="afNewPassword" id="afNewPassword" class="password" required ng-pattern="passwordRegex" maxlength="50" ng-change="checkPasswordsMatching()" placeholder="NEW PASSWORD"> </p> <p class="alert alert-danger" ng-show="afNewPasswordForm.afNewPassword.$invalid && afNewPasswordForm.$submitted">Password field length should be at least 8 characters, contain at least one number and one uppercase letter.</p> <p class="password input-wrapper" ng-class="{\'has-error\':afNewPasswordForm.afNewPasswordConfirm.$invalid && afNewPasswordForm.afNewPasswordConfirm.$dirty}"> <input type="password" ng-model="newPasswordConfirm" name="afNewPasswordConfirm" id="afNewPasswordConfirm" class="password" required ng-pattern="passwordRegex" maxlength="50" ng-change="checkPasswordsMatching()" placeholder="CONFIRM PASSWORD"> </p> <p class="alert alert-danger" ng-show="afNewPasswordForm.afNewPasswordConfirm.$invalid && afNewPasswordForm.$submitted">Verify field length should be at least 8 characters, contain at least one number and one uppercase letter.</p> <p class="alert alert-danger" ng-show="passwordMismatch && afNewPasswordForm.$submitted">Password and Verify fields doesn\'t match.</p> <div class="text-right"> <input type="submit" class="button submit" ng-disabled="setNewPasswordProgress" value="Save New Password"> </div> </form> </div> <div class="log-in"> <a ng-click="openLogIn()" title="Return to Log In">RETURN TO LOG IN</a> </div> </div> </div> </div> </div> <div ng-include="\'/views/footer.html\'"></div> </div>'),$templateCache.put("views/minor.html",'<div class="wrapper wrapper-content animated fadeInRight"> <div class="row"> <div class="col-lg-12"> <div class="text-center m-t-lg"> <h1> Simple example of second view </h1> <small>Configure in config.js as minor state.</small> </div> </div> </div> </div>'),$templateCache.put("views/platformmetrics.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-sm-12"> <h2>Platform Metrics <sup class="text-danger"><strong>(&beta;eta)</strong></sup></h2> </div> </div> <div class="wrapper wrapper-content p-xl"> <div class="animated fadeInDown"> <div> <div class="ibox float-e-margins clearfix"> <div class="ibox-title lazur-bg"> <h5>Deals Funded - Top Platforms </h5> </div> <div class="ibox-content col-sm-12 clearfix"> <div class="col-xs-12 col-lg-6"> <div kendo-chart k-options="fundedProjectsChartOptions" k-data-source="fundedProjectsDataSource" class="af-metrics-bar-chart"></div> </div> <div class="col-xs-12 col-lg-6"> <div kendo-chart k-options="fundedVolumesChartOptions" k-data-source="fundedVolumesDataSource" class="af-metrics-bar-chart"></div> </div> </div> <span class="badge badge-danger pull-right"><small>Dollars raised by Platform vs. 3rd parties unclear for Fundrise, iFunding and RealCrowd, therefore incomplete.</small></span> </div> </div> </div> <div class="animated fadeInUp"> <div> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Class Breakdown - Top Platforms (by $ volume)</h5> </div> <div class="ibox-content col-sm-12"> <div class="col-md-6" ng-repeat="chart in chartDealByClass"> <div class="panel panel-default"> <div class="panel-heading text-center"> <h4>{{chart.chartTitle}}</h4> </div> <div class="panel-body metrics-pie-chart-wrap"> <div kendo-chart k-options="kendoDonutOptions" k-data-source="chart.dataSource"></div> </div> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Top 5 Investment States by # of Deals</h5> </div> <div class="ibox-content"> <table class="table table-striped table-bordered table-hover"> <thead> <tr> <th>&nbsp; <th class="text-center">#1 <th class="text-center">#2 <th class="text-center">#3 <th class="text-center">#4 <th class="text-center">#5   <tbody> <tr ng-repeat="platform in metrics.dealsByState track by $index"> <td class="col-xs-3"> <div class="col-md-2"> <img class="img-circle" height="20" ng-src="img/platforms/{{platform.platform.connectorName}}.jpg"> </div> <div class="col-md-8"> <span>{{platform.platform.name}}</span> </div>  <td class="text-center" ng-repeat="state in platform.states"> <div class="col-xs-2"> {{state.state}} </div> <div class="col-xs-4 text-right"> {{(state.dealCount / metrics.dealsFunded[$parent.$index].dealCount) * 100 | number : 1}}% </div> <div class="col-xs-4 text-right"> {{1000000 > state.totalVolume ? state.totalVolume/1000 : state.totalVolume/1000000 | currency : \'$\' : 0 }}{{1000000 > state.totalVolume ? \'K\':\'M\'}} </div>    </table> </div> </div> </div> </div> <div class="row"> <div class="col-lg-12"> <div class="ibox float-e-margins"> <div class="ibox-title lazur-bg"> <h5>Investment Footprint</h5> </div> <div class="ibox-content google-map" id="allInvestmentsMap" style="height: 600px"></div> </div> </div> </div> </div> '),$templateCache.put("views/profile.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-sm-4"> <h2>Profile</h2> <ol class="breadcrumb"> <li> <a href="/ai/dashboard">Home</a> </li> <li class="active"> <strong>Profile</strong> </li> </ol> </div> </div> <div class="row"> <div class="col-lg-12"> <div class="wrapper wrapper-content animated fadeInRight"> <div class="af-accordion"> <form class="clearfix" name="afLoginInfoForm" novalidate> <div class="ibox float-e-margins col-sm-12 col-md-8 col-md-push-2 no-margins"> <h3 ng-click="togglePanels(0)" class="ibox-title" ng-class="{\'lazur-bg\': panels_state[0]}">Login Information</h3> <div collapse="panels_state[0]" class="ibox-content"> <div class="form-horizontal"> <div class="alert alert-success" ng-show="setPasswordSuccess"> <p class="h2 no-margins">Password has been changed successfully. You can login using your new password <a ui-sref="login">here</a>.</p> </div> <div class="alert alert-danger" ng-show="setPasswordError"> {{setPasswordError}} </div> <div class="form-group" ng-class="{\'has-error\':afLoginInfoForm.afUserEmail.$invalid && afLoginInfoForm.afUserEmail.$dirty}"> <label class="col-sm-3 control-label" for="afUserEmail">Email Address</label> <div class="col-sm-5" ng-class="{\'has-error\':afLoginInfoForm.afUserEmail.$invalid && afLoginInfoForm.afUserEmail.$dirty}"> <input type="email" ng-model="profileLogin.email" name="afUserEmail" id="afUserEmail" class="form-control" required ng-pattern="emailRegex" maxlength="50" ng-change="checkEmailAvailability()" lowercaseize> <p class="text-success" ng-show="emailAvailable && afLoginInfoForm.afUserEmail.$valid">Email is free!</p> <p class="text-danger" ng-show="emailNotAvailable && profileLogin.email !== initialEmail && afLoginInfoForm.afUserEmail.$valid">{{emailNotAvailableMessage || \'Email is already in use!\'}}</p> </div> </div> <div class="form-group" ng-class="{\'has-error\':afLoginInfoForm.afRepeatUserEmail.$invalid && afLoginInfoForm.afRepeatUserEmail.$dirty}"> <label class="col-sm-3 control-label" for="afRepeatUserEmail">Repeat Email Address</label> <div class="col-sm-5" ng-class="{\'has-error\':afLoginInfoForm.afRepeatUserEmail.$invalid && afLoginInfoForm.afRepeatUserEmail.$dirty}"> <input type="email" ng-model="profileLogin.repeatEmail" match="profileLogin.email" name="afRepeatUserEmail" id="afRepeatUserEmail" class="form-control" required ng-pattern="emailRegex" maxlength="50" lowercaseize> <p class="text-danger" ng-show="profileLogin.repeatEmail != profileLogin.email && afLoginInfoForm.afRepeatUserEmail.$dirty">Your email do not match. Please try again.</p> </div> </div> <div class="form-group" ng-class="{\'has-error\':afLoginInfoForm.afCurrentPassword.$invalid && afLoginInfoForm.afCurrentPassword.$dirty}"> <label class="col-md-3 control-label" for="afCurrentPassword">Current Password</label> <div class="col-md-5"> <input type="password" ng-model="profileLogin.currentPassword" name="afCurrentPassword" id="afCurrentPassword" class="form-control" maxlength="50"> </div> </div> <br> <div class="form-group" ng-class="{\'has-error\':afLoginInfoForm.afNewPassword.$invalid && afLoginInfoForm.afNewPassword.$dirty}"> <label class="col-md-3 control-label" for="afNewPassword">New Password</label> <div class="col-md-5"> <input type="password" ng-model="profileLogin.newPassword" name="afNewPassword" id="afNewPassword" class="form-control" ng-pattern="passwordRegex" maxlength="50" ng-change="checkPasswordsMatching()"> <p class="text-danger" ng-show="afLoginInfoForm.afNewPassword.$invalid && afLoginInfoForm.afNewPassword.$dirty">New Password field length should be at least 8 characters, contain at least one number and one uppercase letter.</p> </div> </div> <div class="form-group" ng-class="{\'has-error\':afLoginInfoForm.afNewPasswordConfirm.$invalid && afLoginInfoForm.afNewPasswordConfirm.$dirty}"> <label class="col-md-3 control-label" for="afNewPasswordConfirm">Re-enter New Password</label> <div class="col-md-5"> <input type="password" ng-model="profileLogin.newPasswordConfirm" name="afNewPasswordConfirm" id="afNewPasswordConfirm" class="form-control" ng-pattern="passwordRegex" maxlength="50" ng-change="checkPasswordsMatching()"> <p class="text-danger" ng-show="afLoginInfoForm.afNewPasswordConfirm.$invalid && afLoginInfoForm.afNewPasswordConfirm.$dirty">Re-enter New Password field length should be at least 8 characters, contain at least one number and one uppercase letter.</p> <p class="text-danger" ng-show="afLoginInfoForm.afNewPassword.$dirty && afLoginInfoForm.afNewPasswordConfirm.$dirty && passwordMismatch">Password and Re-enter New Password fields don\'t match.</p> </div> </div> </div> <div class="text-center"> <input type="button" ng-click="saveLoginPreferences()" ng-disabled="!afLoginInfoForm.$dirty || !afLoginInfoForm.$valid || loginInfoSavingProgress || (!emailAvailable && $scope.initialEmail !== $scope.profileLogin.email) || passwordMismatch && profileLogin.newPassword.length" class="btn btn-lg btn-primary" value="Save"> </div> </div> </div> </form> <form class="clearfix" name="afProfileForm" novalidate> <div class="ibox float-e-margins col-sm-12 col-md-8 col-md-push-2 no-margins"> <h3 ng-click="togglePanels(1)" class="ibox-title" ng-class="{\'lazur-bg\': panels_state[1]}">Personal Information</h3> <div collapse="panels_state[1]" class="ibox-content"> <div class="form-horizontal"> <div class="form-group" ng-class="{\'has-error\':afProfileForm.afFirstName.$invalid && afProfileForm.afFirstName.$dirty}"> <label class="col-sm-3 control-label" for="afFirstName">First Name<span class="text-danger">*</span>:</label> <div class="col-sm-5"> <input type="text" ng-model="profile.name.first" name="afFirstName" id="afFirstName" class="form-control" required ng-pattern="nameRegex" maxlength="50"> </div> </div> <div class="form-group" ng-class="{\'has-error\':afProfileForm.afLastName.$invalid && afProfileForm.afLastName.$dirty}"> <label class="col-sm-3 control-label" for="afLastName">Last Name<span class="text-danger">*</span>:</label> <div class="col-sm-5"> <input type="text" ng-model="profile.name.last" name="afLastName" id="afLastName" class="form-control" required ng-pattern="nameRegex" maxlength="50"> </div> </div> <div class="form-group" ng-class="{\'has-error\':afProfileForm.afNickname.$invalid && fProfileForm.afNickname.$dirty}"> <label class="col-sm-3 control-label" for="afNickName">Nickname:</label> <div class="col-sm-5"> <input type="text" ng-model="profile.name.nickname" name="afNickname" id="afNickname" class="form-control" maxlength="50"> </div> </div> <div class="form-group" ng-class="{\'has-error\':afProfileForm.afUserPhone.$invalid && afProfileForm.afUserPhone.$dirty}"> <label class="col-sm-3 control-label" for="afUserPhone">Phone:</label> <div class="col-sm-5"> <input type="text" ng-model="profile.phone" name="afUserPhone" id="afUserPhone" class="form-control" maxlength="50"> </div> </div> <div class="form-group" ng-class="{\'has-error\':afProfileForm.afUserAddress1.$invalid && afProfileForm.afUserAddress1.$dirty}"> <label class="col-sm-3 control-label" for="afUserAddress1">Address 1:</label> <div class="col-sm-5"> <input type="text" ng-model="profile.address1" name="afUserAddress1" id="afUserAddress1" class="form-control" maxlength="50"> </div> </div> <div class="form-group" ng-class="{\'has-error\':afProfileForm.afUserAddress2.$invalid && afProfileForm.afUserAddress2.$dirty}"> <label class="col-sm-3 control-label" for="afUserAddress2">(suite, floor, apt)</label> <div class="col-sm-5"> <input type="text" ng-model="profile.address2" name="afUserAddress2" id="afUserAddress2" class="form-control" maxlength="50"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="afUserCity" ng-class="{\'has-error\':afProfileForm.afUserCity.$invalid && afProfileForm.afUserCity.$dirty}">City:</label> <div class="col-sm-5" ng-class="{\'has-error\':afProfileForm.afUserCity.$invalid && afProfileForm.$dirty}"> <input type="text" ng-model="profile.city" name="afUserCity" id="afUserCity" class="form-control" size="10" maxlength="50"> </div> </div> <div class="form-group"> <div class="row"> <label class="col-sm-3 control-label" for="afUserState">State:</label> <div class="col-sm-2"> <select ng-model="profile.state" ng-options="state.abbreviation as state.abbreviation for state in statesList" name="afUserState" id="afUserState" class="form-control form-control-short"></select> </div> <label class="col-sm-1 control-label" for="afUserZip" ng-class="{\'has-error\':afProfileForm.afUserZip.$invalid && afProfileForm.afUserZip.$dirty}">Zip:</label> <div class="col-sm-2" ng-class="{\'has-error\':afProfileForm.afUserZip.$invalid && afProfileForm.$dirty}"> <input type="text" ng-model="profile.zip" name="afUserZip" id="afUserZip" class="form-control" size="10" maxlength="5"> </div> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="afBirthMonth">Date of Birth:</label> <div class="col-sm-9"> <select ng-model="profile.birthMonth" ng-options="month as month.substr(0,3) for month in datesList.months" name="afBirthMonth" id="afBirthMonth" class="form-control form-control-short"></select> <select ng-model="profile.birthDate" ng-options="date as date for date in datesList.dates" name="afBirthDate" id="afBirthDate" class="form-control form-control-short"></select> <select ng-model="profile.birthYear" ng-options="year as year for year in datesList.years" name="afBirthYear" id="afBirthYear" class="form-control form-control-short"></select> </div> </div> </div> <div class="text-center"> <input type="button" ng-click="savePreferences()" ng-disabled="!afProfileForm.$dirty || !afProfileForm.$valid || profileSavingProgress" class="btn btn-lg btn-primary" value="Save Preferences"> </div> </div> </div> <div class="ibox float-e-margins col-sm-12 col-md-8 col-md-push-2 no-margins"> <h3 ng-click="togglePanels(2)" class="ibox-title" ng-class="{\'lazur-bg\': panels_state[2]}">Communication Preferences</h3> <div collapse="panels_state[2]" class="ibox-content"> <div class="table-responsive"> <table class="table table-striped af-profile-email-notifications"> <thead> <tr> <th> <th ng-repeat="notificator in emailPreferences.notifications[0].notificators">{{notificator.label}}   <tbody> <tr ng-repeat="pref in emailPreferences.notifications"> <td>{{pref.label}} <td ng-repeat="notificator in pref.notificators"> <label> <input id="afEmailSettings_{{pref.name}}_{{notificator.name}}" ng-change="toggleEmailOptOutSettings()" type="checkbox" ng-model="profile.preferences.email[pref.name][notificator.name]" name="{{notificator.name}}" class="js-switch" ui-switch="{color: \'#64bd63\'}"> </label>    </table> </div> <div class="form-group"> <label> <input type="checkbox" ng-model="profile.preferences.email.optOut" id="afEmailOptOutSettings" ng-change="toggleEmailSettings()" name="{{emailPreferences.optOut.name}}" class="js-switch" ui-switch="{color: \'#64bd63\'}"> {{emailPreferences.optOut.label}} </label> </div> <div class="text-center"> <input type="button" ng-click="savePreferences()" ng-disabled="!afProfileForm.$dirty || !afProfileForm.$valid || profileSavingProgress" class="btn btn-lg btn-primary" value="Save Preferences"> </div> </div> </div> <div class="ibox float-e-margins col-sm-12 col-md-8 col-md-push-2 no-margins"> <h3 ng-click="togglePanels(3)" class="ibox-title" ng-class="{\'lazur-bg\': panels_state[3]}">Investment Preferences</h3> <div collapse="panels_state[3]" class="ibox-content"> <div class="form-group" ng-repeat="pref in investmentPreferences"> <label> <input type="checkbox" ng-model="profile.preferences.investment[pref.name]" name="{{pref.name}}" class="js-switch" ui-switch="{color: \'#64bd63\'}"> {{pref.label}} </label> </div> <div class="text-center"> <input type="button" ng-click="savePreferences()" ng-disabled="!afProfileForm.$dirty || !afProfileForm.$valid || profileSavingProgress" class="btn btn-lg btn-primary" value="Save Preferences"> </div> </div> </div> <div class="ibox float-e-margins col-sm-12 col-md-8 col-md-push-2 no-margins"> <h3 ng-click="togglePanels(4)" class="ibox-title" ng-class="{\'lazur-bg\': panels_state[4]}">Close Your AlphaFlow Account</h3> <div collapse="panels_state[4]" class="ibox-content"> <h3>Click the button below to delete your AlphaFlow account.</h3> <p> What does this mean? It means you will no longer be able to access your downloaded account information through AlphaFlow. All of the data AlphaFlow downloaded in connection with your account, including your personal information, will be permanently deleted from our servers. </p> <p class="text-danger"> This action cannot be undone! </p> <div class="text-center"> <input type="button" ng-click="closeAccountConfirm()" class="btn btn-lg btn-danger" value="Close this AlphaFlow Account"> </div> </div> </div> </form> </div> </div> </div> </div>'),
$templateCache.put("views/publicmarkets.html",'<div class="row wrapper border-bottom white-bg page-heading"> <div class="col-sm-12"> <h2>Market Performance</h2> </div> </div> <div class="wrapper wrapper-content p-xl"> <div class="row"> <div class="col-xs-12 col-lg-4" ng-repeat="g in markets.global"> <div class="widget style1 lazur-bg"> <div class="row"> <div class="col-xs-5"> <h2 class="font-bold">{{g.name}}</h2> </div> <div class="col-xs-7 text-right"> <h2 class="font-bold">{{g.price}}</h2> <span> {{g.change}} ({{g.change_percent}}%)</span> </div> </div> </div> </div> </div> <div class="row"><hr></div> <div class="row"> <div class="col-xs-12 col-md-4"> <div class="panel panel-success"> <div class="panel-heading text-center"> <h4>Currencies</h4> </div> <div class="panel-body text-center"> <table class="table table-striped table-bordered table-hover"> <thead> <tr> <th class="text-center">&nbsp; <th class="text-center">Rate <th class="text-center">Ask <th class="text-center">Bid   <tbody> <tr ng-repeat="cur in markets.forex"> <td>{{cur.name}} <td>{{cur.rate}} <td>{{cur.ask}} <td>{{cur.bid}}   </table> </div> </div> </div> <div class="col-xs-12 col-md-4"> <div class="panel panel-success"> <div class="panel-heading text-center"> <h4>Bonds</h4> </div> <div class="panel-body text-center"> <table class="table table-striped table-bordered table-hover"> <thead> <tr> <th class="text-center">&nbsp; <th class="text-center">Yield <th class="text-center">Change <th class="text-center">Year high <th class="text-center">Year low   <tbody> <tr ng-repeat="b in markets.bonds"> <td>{{b.name}} <td>{{b.price}} <td>{{b.change}} <td>{{b.year_high}} <td>{{b.year_low}}   </table> </div> </div> </div> <div class="col-xs-12 col-md-4"> <div class="panel panel-success"> <div class="panel-heading text-center"> <h4>Commodities</h4> </div> <div class="panel-body text-center"> <table class="table table-striped table-bordered table-hover"> <thead> <tr> <th class="text-center">&nbsp; <th class="text-center">Price <th class="text-center">Change <th class="text-center">Day high <th class="text-center">Day low   <tbody> <tr ng-repeat="c in markets.commodities"> <td>{{c.name}} <td>{{c.price}} <td>{{c.change}} <td>{{c.day_high}} <td>{{c.day_low}}   </table> </div> </div> </div> </div> </div>'),$templateCache.put("views/resendActivation.html",'<div class="animated fadeInDown af-login-wrapper"> <a href="http://www.alphaflow.com/"><img class="logo" src="img/alphaflow_logo.png" alt="Alphaflow"></a> <div class="row"> <div class="col-md-12"> <div class="alert alert-success" ng-show="success"> <p class="h3 no-margins">New activation email has been send, please check your email for an activation link.</p> </div> <div class="alert alert-danger" ng-show="error"> <p class="h3 no-margins">{{error}}</p> </div> <form ng-submit="resendActivation()" class="form-horizontal af-login-form clearfix" name="resendActivationForm" novalidate ng-show="!success"> <div class="form-group" ng-class="{\'has-error\':resendActivationForm.email.$invalid && resendActivationForm.email.$dirty}"> <label class="col-md-3 control-label" for="email">email</label> <div class="col-md-6"> <input type="email" ng-model="email" name="email" id="email" class="form-control" required ng-pattern="emailRegex" maxlength="50" lowercaseize> <span class="af-validation-message af-validation-error" ng-show="resendActivationForm.email.$invalid && resendActivationForm.email.$dirty">Invalid email</span> </div> </div> <div class="form-group"> <div class="col-md-push-3 col-md-6"> <input type="submit" class="btn btn-lg btn-primary" ng-disabled="progress || resendActivationForm.$invalid" value="Resend Activation Email"> </div> </div> </form> </div> </div> </div>'),$templateCache.put("views/signup.html",'<div id="wrap"> <div ng-include="\'/views/header.html\'"></div> <div class="content-wrapper"> <div class="animated fadeInDown container body-content"> <div class="form-wrapper col-xs-12"> <div class="signup-form"> <h1>Sign Up</h1> <div ng-show="userRegistrationError"> <p class="alert alert-danger"> {{userRegistrationError}} </p> </div> <div ng-show="userRegistered"> <p class="alert alert-success"> Your account has been created and needs to be activated, please check your email for an activation link.<br> </p> </div> <form id="form-sign" class="form row" ng-show="!userRegistered" name="afSignupForm" novalidate> <div class="col-xs-12 col-md-8"> <div class="row"> <div class="col-sm-6"> <p ng-class="{\'has-error\':afSignupForm.afSignupFirstName.$invalid && afSignupForm.afSignupFirstName.$dirty }"> <input type="text" ng-model="newUser.firstName" name="afSignupFirstName" id="afSignupFirstName" required ng-pattern="nameRegex" maxlength="50" placeholder="FIRST NAME"> </p> </div> <div class="col-sm-6"> <p ng-class="{\'has-error\':afSignupForm.afSignupLastName.$invalid && afSignupForm.afSignupLastName.$dirty }"> <input type="text" ng-model="newUser.lastName" name="afSignupLastName" id="afSignupLastName" required ng-pattern="nameRegex" maxlength="50" placeholder="LAST NAME"> </p> </div> </div> <div class="row"> <div class="col-sm-6"> <p ng-class="{\'has-error\':afSignupForm.afSignupEmail.$invalid && afSignupForm.afSignupEmail.$dirty}"> <input type="text" ng-model="newUser.email" name="afSignupEmail" id="afSignupEmail" required ng-pattern="emailRegex" maxlength="50" ng-change="checkEmailsMatching()" ng-blur="checkEmailAvailability()" lowercaseize placeholder="EMAIL"> </p> </div> <div class="col-sm-6"> <p ng-class="{\'has-error\':afSignupForm.afRepeatSignupEmail.$invalid && afSignupForm.afRepeatSignupEmail.$dirty}"> <input type="text" ng-model="newUser.repeatEmail" name="afRepeatSignupEmail" id="afRepeatSignupEmail" required ng-pattern="emailRegex" maxlength="50" ng-change="checkEmailsMatching()" lowercaseize placeholder="REPEAT EMAIL"> </p> </div> <div class="col-xs-12"> <p class="alert alert-success" ng-show="emailAvailable && afSignupForm.afSignupEmail.$valid">Email is available!</p> <p class="alert alert-danger" ng-show="emailNotAvailable && afSignupForm.afSignupEmail.$valid">{{emailNotAvailableMessage || \'Email is already in use!\'}}</p> <p class="alert alert-danger" ng-show="emailMismatch">Email addresses do not match.</p> </div> </div> <div class="row"> <div class="col-sm-6"> <p ng-class="{\'has-error\':afSignupForm.afSignupPassword.$invalid && afSignupForm.afSignupPassword.$dirty}"> <input type="password" placeholder="PASSWORD" ng-model="newUser.password" name="afSignupPassword" id="afSignupPassword" required ng-pattern="passwordRegex" maxlength="50" ng-change="checkPasswordsMatching()"> </p> </div> <div class="col-sm-6"> <p ng-class="{\'has-error\':afSignupForm.afSignupPasswordConfirm.$invalid && afSignupForm.afSignupPasswordConfirm.$dirty}"> <input type="password" placeholder="CONFIRM PASSWORD" ng-model="newUser.passwordConfirm" name="afSignupPasswordConfirm" id="afSignupPasswordConfirm" required ng-pattern="passwordRegex" maxlength="50" ng-change="checkPasswordsMatching()"> </p> <!--<p class="alert alert-warning" ng-show="afSignupForm.afSignupPasswordConfirm.$invalid && afSignupForm.afSignupPasswordConfirm.$dirty">Verify field length should be at least 8 characters, contain at least one number and one uppercase letter.</p>--> </div> <div class="col-xs-12"> <p class="alert alert-warning" ng-show="afSignupForm.afSignupPassword.$invalid && afSignupForm.afSignupPassword.$dirty">Password field length should be at least 8 characters, contain at least one number and one uppercase letter.</p> <p class="alert alert-danger" ng-show="passwordMismatch && afSignupForm.afSignupPasswordConfirm.$dirty">Your passwords don\'t match.</p> </div> </div> <div class="signup-confirm clearfix"> <div class="terms-wrapper"> <p> <input type="checkbox" name="terms" ng-model="agreetos">I agree to the <a class="terms_link" title="Terms of Use" ng-click="showTOSModal()"><b>Terms of Use</b></a> </p> </div> <p class="signup-btn-wrapper text-right"> <input type="submit" class="button submit" ng-click="checkTermsAcceptance()" ng-disabled="!afSignupForm.$dirty || !afSignupForm.$valid || signupProgress || emailCheckProgress || passwordMismatch" value="SIGN UP"> </p> </div> </div> <div class="hidden-sm hidden-xs col-md-1"> <span class="border"></span> </div> <div class="social-signup col-xs-12 col-md-3"> <span class="text">Sign up with</span> <ul class="social-icon"> <li><a href="{{ENV.authEndpoint}}/auth/linkedin" target="_self" title="Sign up with Linkedin" class="icon-wrapper cleafix"> <span class="linkedin icon pull-left"></span> <span class="hidden-xs"> LINKED IN</span> </a></li> <li><a href="{{ENV.authEndpoint}}/auth/facebook" target="_self" title="Sign up with Facebook" class="icon-wrapper cleafix"> <span class="facebook icon pull-left"></span> <span class="hidden-xs"> FACEBOOK</span> </a></li> <li><a href="{{ENV.authEndpoint}}/auth/google" target="_self" title="Sign up with G+" class="icon-wrapper cleafix"> <span class="g-plus icon pull-left"></span> <span class="hidden-xs"> GOOGLE PLUS</span> </a></li> </ul> </div> </form> </div> </div> </div> </div> <div ng-include="\'/views/footer.html\'"></div> </div>'),$templateCache.put("views/templates/connect-platform.tpl.html",'<div class="inmodal"> <div class="modal-header"> <h4 class="modal-title">Connect your {{data.platform.name}} account</h4> </div> <form role="form" class="form-horizontal" name="platformConnectForm"> <div class="modal-body"> <div class="row"> <div class="col-xs-12"> <div class="form-group"> <label for="username" class="col-sm-4 control-label">{{data.platform.api.authUsernameLabel}}</label> <div class="col-sm-8"> <input type="text" focus-me="true" placeholder="Enter {{data.platform.api.authUsernameLabel}}" name="username" id="username" ng-model="username" class="form-control" required ng-change="error=undefined"> </div> </div> <div class="form-group"> <label for="password" class="col-sm-4 control-label">{{data.platform.api.authPasswordLabel}}</label> <div class="col-sm-8"> <input type="password" placeholder="{{data.platform.api.authPasswordLabel}}" name="password" id="password" ng-model="password" class="form-control" required ng-change="error=undefined"> <p class="text-mute" ng-if="data.platform.api.apiHelpUrl"><a ng-href="{{data.platform.api.apiHelpUrl}}" target="_blank">Click here</a> to learn how to obtain your credentials.</p> </div> </div> </div> <div class="col-xs-12"> <p class="text-danger" ng-show="error">{{error.userMessage || error.message}}</p> <p class="text-danger" ng-show="error && failedAttemptCount >= 3">{{data.platform.name}} may lock your account after another failed attempt.</p> </div> </div> </div> <div class="modal-footer"> <button type="submit" class="btn btn-success btn-primary" ng-click="ok()" ng-disabled="platformConnectForm.$invalid || OKBtnDisabled">{{OKBtnLabel}}</button> <button type="button" class="btn btn-danger" ng-click="cancel()">Cancel</button> </div> </form> </div>'),$templateCache.put("views/templates/impersonateCellTemplate.tpl.html",'<div class="ui-grid-cell-contents"> <button type="button" class="btn btn-xs btn-primary" ng-click="grid.appScope.impersonateUser(grid, row)" style="padding: 0" title="Impersonate user"> <i class="fa fa-user"></i> </button> </div>'),$templateCache.put("views/templates/investment-summary.tpl.html",'<div class="inmodal af-modal"> <div class="modal-body"> <div kendo-tab-strip="investmentTabs" k-options="tabstripOptions" k-data-source="tabstripDatasource" class="af-modal-tabs"></div> </div> <div class="modal-footer text-center"> <button type="button" class="btn btn-success col-xs-4 col-xs-push-4" ng-disabled="updateStatus == 1" ng-click="cancel()">Close</button> </div> </div>'),$templateCache.put("views/templates/investmentModalTabs/investment-analysis.html","Analysis"),$templateCache.put("views/templates/investmentModalTabs/investment-cashflows.html",'<div class="af-widget-content"> <div class="row" ng-if="data.contribution.earnings && data.contribution.earnings.length"> <div class="col-sm-12"> <table class="h2 af-alignment-table"> <tbody> <tr> <td>Total earnings: <td ng-if="data.contribution.totalEarnings !== 0">{{data.contribution.totalEarnings | currency:$:0}} <td ng-if="data.contribution.totalEarnings === 0">-  <tr> <td>Last Payment: <td ng-if="data.contribution.lastPayment">{{data.contribution.lastPayment.amount | currency:$:0}} on {{data.contribution.lastPayment.date | date:\'MM/dd/yyyy\'}} <td ng-if="!data.contribution.lastPayment">-   </table> </div> <div class="col-sm-12"> <h2>Activity Log</h2> <div kendo-grid k-options="cashflowsOptions" k-data-source="cashflowsDataSource" class="investments-table"></div> </div> </div> <div class="row" ng-if="!(data.contribution.earnings && data.contribution.earnings.length)"> <div class="col-sm-12"> <p class="h2">This investment has no cashflows yet.</p> </div> </div> </div>'),$templateCache.put("views/templates/investmentModalTabs/investment-notifications.html","Notifications"),$templateCache.put("views/templates/investmentModalTabs/investment-overview.html",'<div class="af-widget-content"> <div class="row"> <div class="col-sm-6"> <h1>{{data.investment.name}}</h1> <span ng-if="googleMapUrl.length"><a href="https://maps.google.com?q={{googleMapUrl}}" target="_blank">{{addressString}}</a></span> <span ng-if="!googleMapUrl.length">{{addressString}}</span> <table class="af-alignment-table af-close-spacing"> <tbody> <tr> <td>Asset Class:  <td>{{data.investment.class | handleEmpty}}  <tr> <td>Total Raise:  <td>{{data.investment.amount | currency:$:0 | handleEmpty}}  <tr> <td>You Invested:  <td>{{data.contribution.amount | currency:$:0 | handleEmpty}}  <tr> <td>Status:  <td>{{data.investment.status | mapInvestmentStatus | handleEmpty}}  <tr> <td>Type:  <td>{{data.investment.type | handleEmpty}}   </table> <p ng-if="data.investment.platformInvestmentUrl"><a href="{{data.investment.platformInvestmentUrl}}" target="_blank">See it on {{data.investment.platform.name}}</a></p> </div> <div class="col-sm-6"> <div class="af-investment-img" ng-if="slides.length"> <carousel class="carousel-fade" no-wrap="noWrapSlides"> <slide ng-repeat="slide in slides track by $index" active="slide.active"> <img ng-src="{{slide.image}}" alt="{{data.investment.name}}"> </slide> </carousel> <p ng-if="data.investment.platformInvestmentUrl"><a href="{{data.investment.platformInvestmentUrl}}" target="_blank">Image courtesy of {{data.investment.platform.name}}</a></p> </div> </div> </div> <div class="row"> <div class="col-sm-6" ng-if="data.investment.metrics"> <h2>Return Summary</h2> <div class="table-responsive"> <table class="table table-striped"> <thead> <th> <th>Projected <th>Actual  <tbody> <tr ng-repeat="metric in data.investment.metrics"> <td> {{metric.metric.name}} <i class="af-popover fa fa-info-circle text-muted" ng-if="metric.metric.description" popover-html-custom="{{metric.metric.description}}" popover-trigger="click" popover-placement="right"></i>  <td class="text-success"> {{metric.projected ? $eval(metric.metric.uiFormatFilter.replace(\'val\',metric.projected)) + metric.metric.measureUnit : \'-\'}}  <td class="text-danger"> {{metric.actual ? $eval(metric.metric.uiFormatFilter.replace(\'val\',metric.actual)) + metric.metric.measureUnit : \'-\'}}    </table> </div> </div> <div class="col-sm-6"> <h2>Relevant Dates</h2> <div class="table-responsive"> <table class="table table-striped"> <thead> <th>&nbsp; <th>&nbsp;  <tbody> <tr> <td>Listed <td>{{data.investment.events.addedOn | date:MM/dd/yyyy | handleEmpty}}  <tr> <td>Funded <td>{{data.investment.events.fundedOn | date:MM/dd/yyyy | handleEmpty}}  <tr> <td>Closed <td>{{data.investment.events.closedOn | date:MM/dd/yyyy | handleEmpty}}  <tr> <td>Maturity <td>{{data.investment.events.maturesOn | date:MM/dd/yyyy | handleEmpty}}  <tr> <td>Next Distribution <td>{{data.investment.events.nextDistributionOn | date:MM/dd/yyyy | handleEmpty}}   </table> <p>* projected</p> </div> </div> </div> <div class="row"> <div class="col-sm-12"> <h2>Notes <span class="af-update-status" ng-show="updateStatus"> <span class="text-muted" ng-show="updateStatus == 1"><i class="fa fa-cog fa-spin"></i> saving...</span> <span class="text-success" ng-show="updateStatus == 2"> saved!</span> <span class="text-danger" ng-show="updateStatus == 3"> can\'t save right now, please try again later.</span> </span> </h2> <form name="afInvestmentNotesForm" novalidate> <div ng-class="{\'has-error\': afInvestmentNotesForm.afInvestmentNotes.$dirty && afInvestmentNotesForm.afInvestmentNotes.$invalid }"> <textarea class="form-control af-textarea" name="afInvestmentNotes" ng-model="data.investmentUserData.notes" ng-keyup="submitNotes()" cols="30" rows="4" placeholder="Type Notes Here" maxlength="5000"></textarea> <p ng-show="afInvestmentNotesForm.afInvestmentNotes.$dirty && afInvestmentNotesForm.afInvestmentNotes.$invalid"> Note length should be less than 5000 characters. </p> </div> </form> </div> </div> </div>'),$templateCache.put("views/templates/investmentsTable/activeAmnt.html","{{ dataItem.activeAmnt | activeAmnt : 2 }}"),$templateCache.put("views/templates/investmentsTable/class.html",'<div class="text-center">{{dataItem.investment.class}}</div>'),$templateCache.put("views/templates/investmentsTable/icon.html",'<div class="text-center" title="{{dataItem.platform.name}}"><img class="img-circle" height="20" ng-src="img/platforms/{{dataItem.platform.connectorName}}.jpg"><span hidden>{{dataItem.platform.name}}</span></div>'),$templateCache.put("views/templates/investmentsTable/invested.html","<div class=\"text-center\">{{dataItem.amount | currency : '$' : 0}}</div>"),$templateCache.put("views/templates/investmentsTable/maturity.html","<div class=\"text-center\">{{dataItem.investment.events.maturesOn | date : 'MM/dd/yyyy'}}</div>"),$templateCache.put("views/templates/investmentsTable/name.html",'<div title="Show summary"><a href ng-click="showInvestmentDetail(dataItem)">{{dataItem.investment.name}}</a></div>'),$templateCache.put("views/templates/investmentsTable/nextPmnt.html","<div class=\"text-center\">{{dataItem.investment.events.nextDistributionOn | date : 'MM/dd/yy'}}</div>"),$templateCache.put("views/templates/investmentsTable/sponsor.html","{{dataItem.investment.sponsor}}"),$templateCache.put("views/templates/investmentsTable/start.html","<div class=\"text-center\">{{dataItem.investment.events.closedOn | date : 'MM/dd/yy'}}</div>"),$templateCache.put("views/templates/investmentsTable/state.html",'<div class="text-center">{{dataItem.state || USA}}</div>'),$templateCache.put("views/templates/investmentsTable/status.html","<div class=\"text-center\" title=\"{{investmentStatusCode[dataItem.investment.status.toString()]}}\"> <button class=\"btn btn-circle af-btn-status\" ng-class=\"{'btn-success': dataItem.investment.status===investmentStatus.Completed, 'btn-info': (dataItem.investment.status===investmentStatus.Funding || dataItem.investment.status===investmentStatus.Funded), 'btn-warning': dataItem.investment.status===investmentStatus.Active }\" type=\"button\"> <i class=\"fa\" ng-class=\"{'fa-question': !dataItem.investment.status, 'fa-dollar': dataItem.investment.status===investmentStatus.Funding, 'fa-thumbs-up': dataItem.investment.status===investmentStatus.Funded,'fa-check': dataItem.investment.status===investmentStatus.Completed, 'fa-flag animated':dataItem.investment.status===investmentStatus.Active}\"></i> </button> <span hidden>{{dataItem.investment.status}}</span> </div>"),$templateCache.put("views/templates/investmentsTable/type.html",'<div class="text-center">{{dataItem.investment.type}}</div>'),$templateCache.put("views/templates/login-platform.tpl.html",'<div class="inmodal"> <div class="modal-header"> <h4 class="modal-title">Connect your {{data.platform.name}} account</h4> </div> <form role="form" class="form-horizontal" name="platformConnectForm"> <div class="modal-body"> <div class="row"> <div class="col-xs-12"> <div class="form-group"> <label for="username" class="col-sm-4 control-label">{{data.platform.api.authUsernameLabel}}</label> <div class="col-sm-8"> <input type="text" focus-me="true" placeholder="Enter {{data.platform.api.authUsernameLabel}}" name="username" id="username" ng-model="username" class="form-control" required ng-change="error=undefined"> </div> </div> <div class="form-group"> <label for="password" class="col-sm-4 control-label">{{data.platform.api.authPasswordLabel}}</label> <div class="col-sm-8"> <input type="password" placeholder="{{data.platform.api.authPasswordLabel}}" name="password" id="password" ng-model="password" class="form-control" required ng-change="error=undefined"> <p class="text-mute" ng-if="data.platform.api.apiHelpUrl"><a ng-href="{{data.platform.api.apiHelpUrl}}" target="_blank">Click here</a> to learn how to obtain your credentials.</p> </div> </div> </div> <div class="col-xs-12"> <p class="text-danger" ng-hide="!error">{{error.userMessage || error.message}}</p> </div> </div> </div> <div class="modal-footer"> <button type="submit" class="btn btn-success btn-primary" ng-click="ok()" ng-disabled="platformConnectForm.$invalid || OKBtnDisabled">{{OKBtnLabel}}</button> <button type="button" class="btn btn-danger" ng-click="cancel()">Cancel</button> </div> </form> </div>'),$templateCache.put("views/templates/modal-confirm.tpl.html",'<div class="inmodal"> <div class="modal-header"> <h4 class="modal-title">{{data.title}}</h4> </div> <div class="modal-body"> <p>{{data.content}}</p> </div> <div class="modal-footer"> <button type="button" class="btn btn-danger" ng-click="ok()">{{data.okBtnText || \'Yes, disconnect\'}}</button> <button type="button" class="btn btn-primary" ng-click="cancel()">Cancel</button> </div> </div>'),$templateCache.put("views/templates/notify.html",'<div class="cg-notify-message cg-notify-message-center inspinia-notify" ng-class="$classes"> <div class="p-lg"> <div ng-show="!$messageTemplate"> <h3>{{$message}}</h3> </div> <div ng-show="$messageTemplate" class="cg-notify-message-template"> </div> <button type="button" class="cg-notify-close" ng-click="$close()"> <span aria-hidden="true">&times;</span> <span class="cg-notify-sr-only">Close</span> </button> </div> </div>'),$templateCache.put("views/templates/platformDetails.html",'<div class="feed-element"> <a href class="pull-left"> <img alt="image" class="img-circle" ng-src="img/platforms/{{platform.connectorName}}.jpg"> </a> <div class="media-body"> <h2>{{platform.name}}</h2> <small class="text-muted"><a target="_blank" href="http://{{platform.websiteUrl}}">{{platform.websiteUrl}}</a></small> <div class="well"> <div class="row"> <div class="pull-left"> <input type="checkbox" class="js-switch" ui-switch="{color: \'#64bd63\'}" ng-change="togglePlaftormStatus(platform)" ng-model="platform.active" on="On" off="Off" data-platform-id="{{platform._id}}" ng-disabled="!platform.enabled"> <p>{{platform.connectionStatusMessage || \'NOT IMPORTING\'}}</p> </div> <div class="col-xs-10" ng-show="platform.connectedOn"> <h4><i class="fa fa-link"></i> Account connected on: {{platform.connectedOn | date : \'medium\'}} • <a href ng-click="platformConnectSwitch(platform)">Disconnect</a></h4> <h4> <i class="fa" ng-class="{\'fa-spinner fa-pulse\': platform.refreshInProgress === true, \'fa-clock-o\':!platform.refreshInProgress}"></i> Last Updated: {{(platform.lastUpdated | date : \'medium\') || "never"}} <span ng-show="!platform.refreshInProgress && (platform.active || platform.connectionStatusMessage === platformStatesMessages[\'invalidCredentials\'])">• <a href ng-click="synchAccount(platform.index)">Update now</a></span> <span class="text-mute af-blink" ng-show="platform.refreshInProgress">Updating... {{platform.syncMessage}}</span> </h4> <div class="alert alert-danger alert-dismissable" ng-show="platform.updateError"> <h4>{{platform.updateError}}</h4> </div> </div> <div class="col-xs-10" ng-show="!platform.connectedOn"> <h4><i class="fa fa-link"></i> Account NOT connected. • <a href ng-click="platformConnectSwitch(platform)">Connect now</a></h4> </div> </div> </div> </div> </div>'),$templateCache.put("views/templates/syncButton.html",'<div> <div class="af-update-button" ng-if="buttonVisible"> <span class="af-blink" ng-show="refreshInProgress">{{updateProgressMessage}}</span> <i class="fa" ng-if="lastUpdatedDate" ng-class="{\'fa-spinner fa-pulse\': refreshInProgress===true, \'fa-clock-o\':!refreshInProgress}"></i> <span ng-if="!refreshInProgress && lastUpdatedDate">Last Updated: {{(lastUpdatedDate | date : \'medium\') || "never"}}</span> <a href ng-show="!refreshInProgress && user.securityRoles.indexOf(\'demo_account\')<0" ng-click="updateAllPlatforms()"><label class="badge {{buttonClass}}" style="cursor: pointer">Update now</label></a><span ng-show="refreshInProgress">Updating...</span> </div> </div>')}]);
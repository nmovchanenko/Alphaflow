if(!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}function D(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function Fb(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;e--;)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}var e={},f=a===oc;return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g)for(;f>e&&(d=b.apply(a[e],c),d!==!1);e++);else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g)for(;f>e&&(d=b.call(a[e],e,a[e]),d!==!1);e++);else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var t=function(a){function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){for(o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;l--;)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){for(var c=a.split("|"),e=a.length;e--;)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}function pb(){}function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=ub(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e&&!d.relative[a[e].type];e++);return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(m=0;o=a[m++];)if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(m=0;o=b[m++];)o(r,s,g,h);if(f){if(p>0)for(;q--;)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[u]||(l[u]={}))[a]=[w,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);return pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)},h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){for(b||(b=g(a)),c=b.length;c--;)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}for(i=X.needsContext.test(a)?0:j.length;i--&&(k=j[i],!d.relative[l=k.type]);)if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){
for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){for(var c;(c=n.inArray(b,h,c))>-1;)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;j--;)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){for(b=(b||"").match(E)||[""],j=b.length;j--;)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){for(l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=p[f++])&&!b.isPropagationStopped();)b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=n.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,c=0;(g=f.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c))for(j=0;e=f[j++];)fb.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};!function(){function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}}))}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){
var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;return a&&3!==f&&8!==f&&2!==f?typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)for(;c=f[e++];)d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?(f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=n(this),f=a.match(E)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)):void 0}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=n.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f)for(f={};b=ic.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jc;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?void(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}()):void(h[t]=s)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];
u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.css("box-sizing"),l=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=l&&u.down||u,c=function(){o._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(n=d),n=n||d.easing||u.easing,a=a||d.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:a,easing:n,complete:c,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}})):t.animate(this.hideProps,a,n,c):e.animate(this.showProps,a,n,c)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,s,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,void(i=!0);t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault());if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,void(s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion))))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort();
},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,void t.document.one("mouseup",function(){c=null}))}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("checkbox"===this.type||"radio"===this.type?"ui-state-focus":"ui-state-focus ui-state-active"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),v===n&&(v=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),void(l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;a=this._getDaysInMonth(m,g-1),!(a>=v);)g++,v-=a;if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":
case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,H,z,F,E,O,j,W,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),H=Q&&this.maxRows>I?this.maxRows:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;H>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],j=z.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(z.getTime()===G.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);M+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],void(s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,
marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();
e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i]}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return"undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return"boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i()}})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,
s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,s=Math.floor(+(e-t).toFixed(this._precision())/i)*i;e=s+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s&&(!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n))?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this;
},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void h(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return t.hash.length>1&&i===s}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s===this.options.active?!1:s);default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o},h=function(e,t){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,n){setTimeout(function(){o.html(e),s._trigger("load",i,r),h(n,t)},1)}).fail(function(e,t){setTimeout(function(){h(e,t)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,
i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(t,s),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){n._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,i))})}),void(i&&this._open(t,e,i)))},_open:function(t,i,s){function n(e){l.of=e,o.is(":hidden")||o.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i))return void a.tooltip.find(".ui-tooltip-content").html(s);i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,i){var s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);return a?(i=a.tooltip,void(a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)))):void n.removeData("ui-tooltip-open")},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.5",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.5",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.5",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.5",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");
c.VERSION="3.3.5",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.5",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.5",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),!function(a,b,c){function d(b,c){this.element=a(b),this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="metisMenu",f={toggle:!0,doubleTapToGo:!1};d.prototype={init:function(){var b=this.element,d=this.settings.toggle,f=this;this.isIE()<=9?(b.find("li.active").has("ul").children("ul").collapse("show"),b.find("li").not(".active").has("ul").children("ul").collapse("hide")):(b.find("li.active").has("ul").children("ul").addClass("collapse in"),b.find("li").not(".active").has("ul").children("ul").addClass("collapse")),f.settings.doubleTapToGo&&b.find("li.active").has("ul").children("a").addClass("doubleTapToGo"),b.find("li").has("ul").children("a").on("click."+e,function(b){return b.preventDefault(),f.settings.doubleTapToGo&&f.doubleTapToGo(a(this))&&"#"!==a(this).attr("href")&&""!==a(this).attr("href")?(b.stopPropagation(),void(c.location=a(this).attr("href"))):(a(this).parent("li").toggleClass("active").children("ul").collapse("toggle"),void(d&&a(this).parent("li").siblings().removeClass("active").children("ul.in").collapse("hide")))})},isIE:function(){for(var a,b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];)return b>4?b:a},doubleTapToGo:function(a){var b=this.element;return a.hasClass("doubleTapToGo")?(a.removeClass("doubleTapToGo"),!0):a.parent().children("ul").length?(b.find(".doubleTapToGo").removeClass("doubleTapToGo"),a.addClass("doubleTapToGo"),!1):void 0},remove:function(){this.element.off("."+e),this.element.removeData(e)}},a.fn[e]=function(b){return this.each(function(){var c=a(this);c.data(e)&&c.data(e).remove(),c.data(e,new d(this,b))}),this}}(jQuery,window,document),function(e){e.fn.extend({slimScroll:function(g){var a=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},g);return this.each(function(){function v(d){if(r){d=d||window.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/120),d.detail&&(c=d.detail/3),e(d.target||d.srcTarget||d.srcElement).closest("."+a.wrapperClass).is(b.parent())&&m(c,!0),d.preventDefault&&!k&&d.preventDefault(),k||(d.returnValue=!1)}}function m(d,e,g){k=!1;var f=d,h=b.outerHeight()-c.outerHeight();e&&(f=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),f=Math.min(Math.max(f,0),h),f=d>0?Math.ceil(f):Math.floor(f),c.css({top:f+"px"})),l=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight()),f=l*(b[0].scrollHeight-b.outerHeight()),g&&(f=d,d=f/b[0].scrollHeight*b.outerHeight(),d=Math.min(Math.max(d,0),h),c.css({top:d+"px"})),b.scrollTop(f),b.trigger("slimscrolling",~~f),w(),p()}function x(){u=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),30),c.css({height:u+"px"});var a=u==b.outerHeight()?"none":"block";c.css({display:a})}function w(){x(),clearTimeout(B),l==~~l?(k=a.allowPageScroll,C!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom")):k=!1,C=l,u>=b.outerHeight()?k=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function p(){a.alwaysVisible||(B=setTimeout(function(){a.disableFadeOut&&r||y||z||(c.fadeOut("slow"),h.fadeOut("slow"))},1e3))}var r,y,z,B,A,u,l,C,k=!1,b=e(this);if(b.parent().hasClass(a.wrapperClass)){var n=b.scrollTop(),c=b.closest("."+a.barClass),h=b.closest("."+a.railClass);if(x(),e.isPlainObject(g)){if("height"in g&&"auto"==g.height){b.parent().css("height","auto"),b.css("height","auto");var q=b.parent().parent().height();b.parent().css("height",q),b.css("height",q)}if("scrollTo"in g)n=parseInt(a.scrollTo);else if("scrollBy"in g)n+=parseInt(a.scrollBy);else if("destroy"in g)return c.remove(),h.remove(),void b.unwrap();m(n,!1,!0)}}else if(!(e.isPlainObject(g)&&"destroy"in g)){a.height="auto"==a.height?b.parent().height():a.height,n=e("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height}),b.css({overflow:"hidden",width:a.width,height:a.height});var h=e("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.railBorderRadius,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=e("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.borderRadius,BorderRadius:a.borderRadius,MozBorderRadius:a.borderRadius,WebkitBorderRadius:a.borderRadius,zIndex:99}),q="right"==a.position?{right:a.distance}:{left:a.distance};h.css(q),c.css(q),b.wrap(n),b.parent().append(c),b.parent().append(h),a.railDraggable&&c.bind("mousedown",function(a){var b=e(document);return z=!0,t=parseFloat(c.css("top")),pageY=a.pageY,b.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY,c.css("top",currTop),m(0,c.position().top,!1)}),b.bind("mouseup.slimscroll",function(a){z=!1,p(),b.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),h.hover(function(){w()},function(){p()}),c.hover(function(){y=!0},function(){y=!1}),b.hover(function(){r=!0,w(),p()},function(){r=!1,p()}),b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(A=a.originalEvent.touches[0].pageY)}),b.bind("touchmove",function(b){k||b.originalEvent.preventDefault(),b.originalEvent.touches.length&&(m((A-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0),A=b.originalEvent.touches[0].pageY)}),x(),"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),m(0,!0)):"top"!==a.start&&(m(e(a.start).position().top,null,!0),a.alwaysVisible||c.hide()),window.addEventListener?(this.addEventListener("DOMMouseScroll",v,!1),this.addEventListener("mousewheel",v,!1)):document.attachEvent("onmousewheel",v)}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery),function(){function require(name){var module=require.modules[name];if(!module)throw new Error('failed to require "'+name+'"');return"exports"in module||"function"!=typeof module.definition||(module.client=module.component=!0,module.definition.call(this,module.exports={},module),delete module.definition),module.exports}require.loader="component",require.helper={},require.helper.semVerSort=function(a,b){for(var aArray=a.version.split("."),bArray=b.version.split("."),i=0;i<aArray.length;++i){var aInt=parseInt(aArray[i],10),bInt=parseInt(bArray[i],10);if(aInt!==bInt)return aInt>bInt?1:-1;var aLex=aArray[i].substr((""+aInt).length),bLex=bArray[i].substr((""+bInt).length);if(""===aLex&&""!==bLex)return 1;if(""!==aLex&&""===bLex)return-1;if(""!==aLex&&""!==bLex)return aLex>bLex?1:-1}return 0},require.latest=function(name,returnPath){function showError(name){throw new Error('failed to find latest module of "'+name+'"')}var versionRegexp=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/,remoteRegexp=/(.*)~(.*)/;remoteRegexp.test(name)||showError(name);for(var moduleNames=Object.keys(require.modules),semVerCandidates=[],otherCandidates=[],i=0;i<moduleNames.length;i++){var moduleName=moduleNames[i];if(new RegExp(name+"@").test(moduleName)){var version=moduleName.substr(name.length+1),semVerMatch=versionRegexp.exec(moduleName);null!=semVerMatch?semVerCandidates.push({version:version,name:moduleName}):otherCandidates.push({version:version,name:moduleName})}}if(0===semVerCandidates.concat(otherCandidates).length&&showError(name),semVerCandidates.length>0){var module=semVerCandidates.sort(require.helper.semVerSort).pop().name;return returnPath===!0?module:require(module)}var module=otherCandidates.sort(function(a,b){return a.name>b.name})[0].name;return returnPath===!0?module:require(module)},require.modules={},require.register=function(name,definition){require.modules[name]={definition:definition}},require.define=function(name,exports){require.modules[name]={exports:exports}},require.register("abpetkov~transitionize@0.0.3",function(exports,module){function Transitionize(element,props){return this instanceof Transitionize?(this.element=element,this.props=props||{},void this.init()):new Transitionize(element,props)}module.exports=Transitionize,Transitionize.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},Transitionize.prototype.init=function(){var transitions=[];for(var key in this.props)transitions.push(key+" "+this.props[key]);this.element.style.transition=transitions.join(", "),this.isSafari()&&(this.element.style.webkitTransition=transitions.join(", "))}}),require.register("ftlabs~fastclick@v0.6.11",function(exports,module){function FastClick(layer){"use strict";var oldOnClick,self=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=layer,!layer||!layer.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(self,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(self,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(self,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(self,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(self,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(self,arguments)},FastClick.notNeeded(layer)||(this.deviceIsAndroid&&(layer.addEventListener("mouseover",this.onMouse,!0),layer.addEventListener("mousedown",this.onMouse,!0),layer.addEventListener("mouseup",this.onMouse,!0)),layer.addEventListener("click",this.onClick,!0),layer.addEventListener("touchstart",this.onTouchStart,!1),layer.addEventListener("touchmove",this.onTouchMove,!1),layer.addEventListener("touchend",this.onTouchEnd,!1),layer.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;"click"===type?rmv.call(layer,type,callback.hijacked||callback,capture):rmv.call(layer,type,callback,capture)},layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;"click"===type?adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){event.propagationStopped||callback(event)}),capture):adv.call(layer,type,callback,capture)}),"function"==typeof layer.onclick&&(oldOnClick=layer.onclick,layer.addEventListener("click",function(event){oldOnClick(event)},!1),layer.onclick=null))}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===target.type||target.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(target.className)},FastClick.prototype.needsFocus=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}},FastClick.prototype.sendClick=function(targetElement,event){"use strict";var clickEvent,touch;document.activeElement&&document.activeElement!==targetElement&&document.activeElement.blur(),touch=event.changedTouches[0],clickEvent=document.createEvent("MouseEvents"),clickEvent.initMouseEvent(this.determineEventType(targetElement),!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),clickEvent.forwardedTouchEvent=!0,targetElement.dispatchEvent(clickEvent)},FastClick.prototype.determineEventType=function(targetElement){"use strict";return this.deviceIsAndroid&&"select"===targetElement.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(targetElement){"use strict";var length;this.deviceIsIOS&&targetElement.setSelectionRange&&0!==targetElement.type.indexOf("date")&&"time"!==targetElement.type?(length=targetElement.value.length,targetElement.setSelectionRange(length,length)):targetElement.focus()},FastClick.prototype.updateScrollParent=function(targetElement){"use strict";var scrollParent,parentElement;if(scrollParent=targetElement.fastClickScrollParent,!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement,targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}scrollParent&&(scrollParent.fastClickLastScrollTop=scrollParent.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){"use strict";return eventTarget.nodeType===Node.TEXT_NODE?eventTarget.parentNode:eventTarget},FastClick.prototype.onTouchStart=function(event){"use strict";var targetElement,touch,selection;if(event.targetTouches.length>1)return!0;if(targetElement=this.getTargetElementFromEventTarget(event.target),touch=event.targetTouches[0],this.deviceIsIOS){if(selection=window.getSelection(),selection.rangeCount&&!selection.isCollapsed)return!0;if(!this.deviceIsIOS4){if(touch.identifier===this.lastTouchIdentifier)return event.preventDefault(),!1;this.lastTouchIdentifier=touch.identifier,this.updateScrollParent(targetElement)}}return this.trackingClick=!0,this.trackingClickStart=event.timeStamp,this.targetElement=targetElement,this.touchStartX=touch.pageX,this.touchStartY=touch.pageY,event.timeStamp-this.lastClickTime<200&&event.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(event){"use strict";var touch=event.changedTouches[0],boundary=this.touchBoundary;return Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary?!0:!1},FastClick.prototype.onTouchMove=function(event){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(labelElement){"use strict";return void 0!==labelElement.control?labelElement.control:labelElement.htmlFor?document.getElementById(labelElement.htmlFor):labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(event){"use strict";var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick)return!0;if(event.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=event.timeStamp,trackingClickStart=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(touch=event.changedTouches[0],targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement,targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent),targetTagName=targetElement.tagName.toLowerCase(),"label"===targetTagName){if(forElement=this.findControl(targetElement)){if(this.focus(targetElement),this.deviceIsAndroid)return!1;targetElement=forElement}}else if(this.needsFocus(targetElement))return event.timeStamp-trackingClickStart>100||this.deviceIsIOS&&window.top!==window&&"input"===targetTagName?(this.targetElement=null,!1):(this.focus(targetElement),this.deviceIsIOS4&&"select"===targetTagName||(this.targetElement=null,event.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(scrollParent=targetElement.fastClickScrollParent,scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop)?!0:(this.needsClick(targetElement)||(event.preventDefault(),this.sendClick(targetElement,event)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(event){"use strict";return this.targetElement?event.forwardedTouchEvent?!0:event.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(event.stopImmediatePropagation?event.stopImmediatePropagation():event.propagationStopped=!0,event.stopPropagation(),event.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(event){"use strict";var permitted;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===event.target.type&&0===event.detail?!0:(permitted=this.onMouse(event),permitted||(this.targetElement=null),permitted)},FastClick.prototype.destroy=function(){"use strict";var layer=this.layer;this.deviceIsAndroid&&(layer.removeEventListener("mouseover",this.onMouse,!0),layer.removeEventListener("mousedown",this.onMouse,!0),layer.removeEventListener("mouseup",this.onMouse,!0)),layer.removeEventListener("click",this.onClick,!0),layer.removeEventListener("touchstart",this.onTouchStart,!1),layer.removeEventListener("touchmove",this.onTouchMove,!1),layer.removeEventListener("touchend",this.onTouchEnd,!1),layer.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(layer){"use strict";var metaViewport,chromeVersion;if("undefined"==typeof window.ontouchstart)return!0;if(chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(metaViewport=document.querySelector("meta[name=viewport]")){if(-1!==metaViewport.content.indexOf("user-scalable=no"))return!0;if(chromeVersion>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===layer.style.msTouchAction?!0:!1},FastClick.attach=function(layer){"use strict";return new FastClick(layer)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick}),require.register("component~indexof@0.0.3",function(exports,module){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}}),require.register("component~classes@1.2.1",function(exports,module){function ClassList(el){if(!el)throw new Error("A DOM element reference is required");this.el=el,this.list=el.classList}var index=require("component~indexof@0.0.3"),re=/\s+/,toString=Object.prototype.toString;module.exports=function(el){return new ClassList(el)},ClassList.prototype.add=function(name){if(this.list)return this.list.add(name),this;var arr=this.array(),i=index(arr,name);return~i||arr.push(name),this.el.className=arr.join(" "),this},ClassList.prototype.remove=function(name){if("[object RegExp]"==toString.call(name))return this.removeMatching(name);if(this.list)return this.list.remove(name),this;var arr=this.array(),i=index(arr,name);return~i&&arr.splice(i,1),this.el.className=arr.join(" "),this},ClassList.prototype.removeMatching=function(re){for(var arr=this.array(),i=0;i<arr.length;i++)re.test(arr[i])&&this.remove(arr[i]);return this},ClassList.prototype.toggle=function(name,force){return this.list?("undefined"!=typeof force?force!==this.list.toggle(name,force)&&this.list.toggle(name):this.list.toggle(name),this):("undefined"!=typeof force?force?this.add(name):this.remove(name):this.has(name)?this.remove(name):this.add(name),this)},ClassList.prototype.array=function(){var str=this.el.className.replace(/^\s+|\s+$/g,""),arr=str.split(re);return""===arr[0]&&arr.shift(),arr},ClassList.prototype.has=ClassList.prototype.contains=function(name){return this.list?this.list.contains(name):!!~index(this.array(),name)}}),require.register("component~event@0.1.4",function(exports,module){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix="addEventListener"!==bind?"on":"";exports.bind=function(el,type,fn,capture){return el[bind](prefix+type,fn,capture||!1),fn},exports.unbind=function(el,type,fn,capture){return el[unbind](prefix+type,fn,capture||!1),fn}}),require.register("component~query@0.0.3",function(exports,module){function one(selector,el){return el.querySelector(selector)}exports=module.exports=function(selector,el){return el=el||document,one(selector,el)},exports.all=function(selector,el){return el=el||document,el.querySelectorAll(selector)},exports.engine=function(obj){if(!obj.one)throw new Error(".one callback required");if(!obj.all)throw new Error(".all callback required");return one=obj.one,exports.all=obj.all,exports}}),require.register("component~matches-selector@0.1.5",function(exports,module){function match(el,selector){if(!el||1!==el.nodeType)return!1;if(vendor)return vendor.call(el,selector);for(var nodes=query.all(selector,el.parentNode),i=0;i<nodes.length;++i)if(nodes[i]==el)return!0;return!1}var query=require("component~query@0.0.3"),proto=Element.prototype,vendor=proto.matches||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match}),require.register("component~closest@0.1.4",function(exports,module){var matches=require("component~matches-selector@0.1.5");module.exports=function(element,selector,checkYoSelf,root){for(element=checkYoSelf?{parentNode:element}:element,root=root||document;(element=element.parentNode)&&element!==document;){if(matches(element,selector))return element;if(element===root)return}}}),require.register("component~delegate@0.2.3",function(exports,module){var closest=require("component~closest@0.1.4"),event=require("component~event@0.1.4");exports.bind=function(el,selector,type,fn,capture){return event.bind(el,type,function(e){var target=e.target||e.srcElement;e.delegateTarget=closest(target,selector,!0,el),e.delegateTarget&&fn.call(el,e)},capture)},exports.unbind=function(el,type,fn,capture){event.unbind(el,type,fn,capture)}}),require.register("component~events@1.0.9",function(exports,module){function Events(el,obj){if(!(this instanceof Events))return new Events(el,obj);if(!el)throw new Error("element required");if(!obj)throw new Error("object required");this.el=el,this.obj=obj,this._events={}}function parse(event){var parts=event.split(/ +/);return{name:parts.shift(),selector:parts.join(" ")}}var events=require("component~event@0.1.4"),delegate=require("component~delegate@0.2.3");module.exports=Events,Events.prototype.sub=function(event,method,cb){this._events[event]=this._events[event]||{},this._events[event][method]=cb},Events.prototype.bind=function(event,method){function cb(){var a=[].slice.call(arguments).concat(args);obj[method].apply(obj,a)}var e=parse(event),el=this.el,obj=this.obj,name=e.name,method=method||"on"+name,args=[].slice.call(arguments,2);return e.selector?cb=delegate.bind(el,e.selector,name,cb):events.bind(el,name,cb),this.sub(name,method,cb),cb},Events.prototype.unbind=function(event,method){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(event);var bindings=this._events[event];if(bindings){var cb=bindings[method];cb&&events.unbind(this.el,event,cb)}},Events.prototype.unbindAll=function(){for(var event in this._events)this.unbindAllOf(event)},Events.prototype.unbindAllOf=function(event){var bindings=this._events[event];if(bindings)for(var method in bindings)this.unbind(event,method);
}}),require.register("switchery",function(exports,module){function Switchery(element,options){if(!(this instanceof Switchery))return new Switchery(element,options);this.element=element,this.options=options||{};for(var i in defaults)null==this.options[i]&&(this.options[i]=defaults[i]);null!=this.element&&"checkbox"==this.element.type&&this.init(),this.isDisabled()===!0&&this.disable()}var transitionize=require("abpetkov~transitionize@0.0.3"),fastclick=require("ftlabs~fastclick@v0.6.11"),classes=require("component~classes@1.2.1"),events=require("component~events@1.0.9");module.exports=Switchery;var defaults={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};Switchery.prototype.hide=function(){this.element.style.display="none"},Switchery.prototype.show=function(){var switcher=this.create();this.insertAfter(this.element,switcher)},Switchery.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=events(this.switcher,this),this.switcher},Switchery.prototype.insertAfter=function(reference,target){reference.parentNode.insertBefore(target,reference.nextSibling)},Switchery.prototype.setPosition=function(clicked){var checked=this.isChecked(),switcher=this.switcher,jack=this.jack;clicked&&checked?checked=!1:clicked&&!checked&&(checked=!0),checked===!0?(this.element.checked=!0,window.getComputedStyle?jack.style.left=parseInt(window.getComputedStyle(switcher).width)-parseInt(window.getComputedStyle(jack).width)+"px":jack.style.left=parseInt(switcher.currentStyle.width)-parseInt(jack.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(jack.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==defaults.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor,this.setSpeed())},Switchery.prototype.setSpeed=function(){var switcherProp={},jackProp={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};switcherProp=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},transitionize(this.switcher,switcherProp),transitionize(this.jack,jackProp)},Switchery.prototype.setSize=function(){var small="switchery-small",normal="switchery-default",large="switchery-large";switch(this.options.size){case"small":classes(this.switcher).add(small);break;case"large":classes(this.switcher).add(large);break;default:classes(this.switcher).add(normal)}},Switchery.prototype.colorize=function(){var switcherHeight=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+switcherHeight+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},Switchery.prototype.handleOnchange=function(state){if(document.dispatchEvent){var event=document.createEvent("HTMLEvents");event.initEvent("change",!0,!0),this.element.dispatchEvent(event)}else this.element.fireEvent("onchange")},Switchery.prototype.handleChange=function(){var self=this,el=this.element;el.addEventListener?el.addEventListener("change",function(){self.setPosition()}):el.attachEvent("onchange",function(){self.setPosition()})},Switchery.prototype.handleClick=function(){var switcher=this.switcher;fastclick(switcher),this.events.bind("click","bindClick")},Switchery.prototype.bindClick=function(){var parent=this.element.parentNode.tagName.toLowerCase(),labelParent="label"===parent?!1:!0;this.setPosition(labelParent),this.handleOnchange(this.element.checked)},Switchery.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},Switchery.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},Switchery.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()},Switchery.prototype.isChecked=function(){return this.element.checked},Switchery.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},Switchery.prototype.destroy=function(){this.events.unbind()},Switchery.prototype.enable=function(){this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick")},Switchery.prototype.disable=function(){this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy()}}),"object"==typeof exports?module.exports=require("switchery"):"function"==typeof define&&define.amd?define("Switchery",[],function(){return require("switchery")}):(this||window).Switchery=require("switchery")}(),function(){function n(n,t){if(n!==t){var r=null===n,e=n===w,u=n===n,o=null===t,i=t===w,f=t===t;if(n>t&&!o||!u||r&&!i&&f||e&&f)return 1;if(t>n&&!r||!f||o&&!e&&u||i&&u)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function r(n,t,r){if(t!==t)return p(n,r);r-=1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function e(n){return"function"==typeof n||!1}function u(n){return null==n?"":n+""}function o(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r}function i(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function f(t,r){return n(t.a,r.a)||t.b-r.b}function a(n){return Nn[n]}function c(n){return Tn[n]}function l(n,t,r){return t?n=Bn[n]:r&&(n=Dn[n]),"\\"+n}function s(n){return"\\"+Dn[n]}function p(n,t,r){var e=n.length;for(t+=r?0:-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function h(n){return!!n&&"object"==typeof n}function _(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function v(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=z,o[++u]=r);return o}function g(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function y(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function d(n){return Ln[n]}function m(_){function Nn(n){if(h(n)&&!(Oo(n)||n instanceof zn)){if(n instanceof Ln)return n;if(nu.call(n,"__chain__")&&nu.call(n,"__wrapped__"))return Mr(n)}return new Ln(n)}function Tn(){}function Ln(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function zn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ru,this.__views__=[]}function Bn(){this.__data__={}}function Dn(n){var t=n?n.length:0;for(this.data={hash:gu(null),set:new lu};t--;)this.push(n[t])}function Mn(n,t){var r=n.data;return("string"==typeof t||ge(t)?r.set.has(t):r.hash[t])?0:-1}function qn(n,t){var r=-1,e=n.length;for(t||(t=Be(e));++r<e;)t[r]=n[r];return t}function Pn(n,t){for(var r=-1,e=n.length;++r<e&&!1!==t(n[r],r,n););return n}function Kn(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Vn(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Gn(n,t){for(var r=-1,e=n.length,u=Be(e);++r<e;)u[r]=t(n[r],r,n);return u}function Jn(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function Xn(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Hn(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function Qn(n,t,r,e){return n!==w&&nu.call(e,r)?n:t}function nt(n,t,r){for(var e=-1,u=zo(t),o=u.length;++e<o;){var i=u[e],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&(f!==w||i in n)||(n[i]=a)}return n}function tt(n,t){return null==t?n:et(t,zo(t),n)}function rt(n,t){for(var r=-1,e=null==n,u=!e&&Er(n),o=u?n.length:0,i=t.length,f=Be(i);++r<i;){var a=t[r];f[r]=u?Cr(a,o)?n[a]:w:e?w:n[a]}return f}function et(n,t,r){r||(r={});for(var e=-1,u=t.length;++e<u;){var o=t[e];r[o]=n[o]}return r}function ut(n,t,r){var e=typeof n;return"function"==e?t===w?n:Bt(n,t,r):null==n?Fe:"object"==e?bt(n):t===w?ze(n):xt(n,t)}function ot(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),f!==w)return f;if(!ge(n))return n;if(e=Oo(n)){if(f=kr(n),!t)return qn(n,f)}else{var a=ru.call(n),c=a==K;if(a!=Z&&a!=B&&(!c||u))return Fn[a]?Rr(n,a,t):u?n:{};if(f=Ir(c?{}:n),!t)return tt(f,n)}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Pn:_t)(n,function(e,u){f[u]=ot(e,t,r,u,n,o,i)}),f}function it(n,t,r){if("function"!=typeof n)throw new Ge(L);return su(function(){n.apply(w,r)},t)}function ft(n,t){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=xr(),f=i===r,a=f&&t.length>=F&&gu&&lu?new Dn(t):null,c=t.length;a&&(i=Mn,f=!1,t=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(t[l]===a)continue n;u.push(a)}else 0>i(t,a,0)&&u.push(a);return u}function at(n,t){var r=!0;return Su(n,function(n,e,u){return r=!!t(n,e,u)}),r}function ct(n,t,r,e){var u=e,o=u;return Su(n,function(n,i,f){i=+t(n,i,f),(r(i,u)||i===e&&i===o)&&(u=i,o=n)}),o}function lt(n,t){var r=[];return Su(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function st(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,!1):void 0}),u}function pt(n,t,r,e){e||(e=[]);for(var u=-1,o=n.length;++u<o;){var i=n[u];h(i)&&Er(i)&&(r||Oo(i)||pe(i))?t?pt(i,t,r,e):Jn(e,i):r||(e[e.length]=i)}return e}function ht(n,t){Nu(n,t,Re)}function _t(n,t){return Nu(n,t,zo)}function vt(n,t){return Tu(n,t,zo)}function gt(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];ve(n[i])&&(o[++u]=i)}return o}function yt(n,t,r){if(null!=n){r!==w&&r in Br(n)&&(t=[r]),r=0;for(var e=t.length;null!=n&&e>r;)n=n[t[r++]];return r&&r==e?n:w}}function dt(n,t,r,e,u,o){if(n===t)n=!0;else if(null==n||null==t||!ge(n)&&!h(t))n=n!==n&&t!==t;else n:{var i=dt,f=Oo(n),a=Oo(t),c=D,l=D;f||(c=ru.call(n),c==B?c=Z:c!=Z&&(f=xe(n))),a||(l=ru.call(t),l==B?l=Z:l!=Z&&xe(t));var s=c==Z,a=l==Z,l=c==l;if(!l||f||s){if(!e&&(c=s&&nu.call(n,"__wrapped__"),a=a&&nu.call(t,"__wrapped__"),c||a)){n=i(c?n.value():n,a?t.value():t,r,e,u,o);break n}if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?yr:mr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=!1}else n=dr(n,t,c)}return n}function mt(n,t,r){var e=t.length,u=e,o=!r;if(null==n)return!u;for(n=Br(n);e--;){var i=t[e];if(o&&i[2]?i[1]!==n[i[0]]:!(i[0]in n))return!1}for(;++e<u;){var i=t[e],f=i[0],a=n[f],c=i[1];if(o&&i[2]){if(a===w&&!(f in n))return!1}else if(i=r?r(a,c,f):w,i===w?!dt(c,a,r,!0):!i)return!1}return!0}function wt(n,t){var r=-1,e=Er(n)?Be(n.length):[];return Su(n,function(n,u,o){e[++r]=t(n,u,o)}),e}function bt(n){var t=Ar(n);if(1==t.length&&t[0][2]){var r=t[0][0],e=t[0][1];return function(n){return null==n?!1:n[r]===e&&(e!==w||r in Br(n))}}return function(n){return mt(n,t)}}function xt(n,t){var r=Oo(n),e=Wr(n)&&t===t&&!ge(t),u=n+"";return n=Dr(n),function(o){if(null==o)return!1;var i=u;if(o=Br(o),!(!r&&e||i in o)){if(o=1==n.length?o:yt(o,Et(n,0,-1)),null==o)return!1;i=Zr(n),o=Br(o)}return o[i]===t?t!==w||i in o:dt(t,o[i],w,!0)}}function At(n,t,r,e,u){if(!ge(n))return n;var o=Er(t)&&(Oo(t)||xe(t)),i=o?w:zo(t);return Pn(i||t,function(f,a){if(i&&(a=f,f=t[a]),h(f)){e||(e=[]),u||(u=[]);n:{for(var c=a,l=e,s=u,p=l.length,_=t[c];p--;)if(l[p]==_){n[c]=s[p];break n}var p=n[c],v=r?r(p,_,c,n,t):w,g=v===w;g&&(v=_,Er(_)&&(Oo(_)||xe(_))?v=Oo(p)?p:Er(p)?qn(p):[]:me(_)||pe(_)?v=pe(p)?ke(p):me(p)?p:{}:g=!1),l.push(_),s.push(v),g?n[c]=At(v,_,r,l,s):(v===v?v!==p:p===p)&&(n[c]=v)}}else c=n[a],l=r?r(c,f,a,n,t):w,(s=l===w)&&(l=f),l===w&&(!o||a in n)||!s&&(l===l?l===c:c!==c)||(n[a]=l)}),n}function jt(n){return function(t){return null==t?w:t[n]}}function kt(n){var t=n+"";return n=Dr(n),function(r){return yt(r,n,t)}}function It(n,t){for(var r=n?t.length:0;r--;){var e=t[r];if(e!=u&&Cr(e)){var u=e;pu.call(n,e,1)}}}function Rt(n,t){return n+yu(ku()*(t-n+1))}function Ot(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}function Et(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=r===w||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Be(u);++e<u;)r[e]=n[e+t];return r}function Ct(n,t){var r;return Su(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Ut(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function Wt(t,r,e){var u=wr(),o=-1;return r=Gn(r,function(n){return u(n)}),t=wt(t,function(n){return{a:Gn(r,function(t){return t(n)}),b:++o,c:n}}),Ut(t,function(t,r){var u;n:{for(var o=-1,i=t.a,f=r.a,a=i.length,c=e.length;++o<a;)if(u=n(i[o],f[o])){if(o>=c)break n;o=e[o],u*="asc"===o||!0===o?1:-1;break n}u=t.b-r.b}return u})}function $t(n,t){var r=0;return Su(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function St(n,t){var e=-1,u=xr(),o=n.length,i=u===r,f=i&&o>=F,a=f&&gu&&lu?new Dn(void 0):null,c=[];a?(u=Mn,i=!1):(f=!1,a=t?[]:c);n:for(;++e<o;){var l=n[e],s=t?t(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;t&&a.push(s),c.push(l)}else 0>u(a,s,0)&&((t||f)&&a.push(s),c.push(l))}return c}function Ft(n,t){for(var r=-1,e=t.length,u=Be(e);++r<e;)u[r]=n[t[r]];return u}function Nt(n,t,r,e){for(var u=n.length,o=e?u:-1;(e?o--:++o<u)&&t(n[o],o,n););return r?Et(n,e?0:o,e?o+1:u):Et(n,e?o+1:0,e?u:o)}function Tt(n,t){var r=n;r instanceof zn&&(r=r.value());for(var e=-1,u=t.length;++e<u;)var o=t[e],r=o.func.apply(o.thisArg,Jn([r],o.args));return r}function Lt(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Eu>=u){for(;u>e;){var o=e+u>>>1,i=n[o];(r?t>=i:t>i)&&null!==i?e=o+1:u=o}return u}return zt(n,t,Fe,r)}function zt(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f=null===t,a=t===w;o>u;){var c=yu((u+o)/2),l=r(n[c]),s=l!==w,p=l===l;(i?p||e:f?p&&s&&(e||null!=l):a?p&&(e||s):null==l?0:e?t>=l:t>l)?u=c+1:o=c}return xu(o,Ou)}function Bt(n,t,r){if("function"!=typeof n)return Fe;if(t===w)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Dt(n){var t=new ou(n.byteLength);return new hu(t).set(new hu(n)),t}function Mt(n,t,r){for(var e=r.length,u=-1,o=bu(n.length-e,0),i=-1,f=t.length,a=Be(f+o);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function qt(n,t,r){for(var e=-1,u=r.length,o=-1,i=bu(n.length-u,0),f=-1,a=t.length,c=Be(i+a);++o<i;)c[o]=n[o];for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function Pt(n,t){return function(r,e,u){var o=t?t():{};if(e=wr(e,u,3),Oo(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else Su(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Kt(n){return le(function(t,r){var e=-1,u=null==t?0:r.length,o=u>2?r[u-2]:w,i=u>2?r[2]:w,f=u>1?r[u-1]:w;for("function"==typeof o?(o=Bt(o,f,5),u-=2):(o="function"==typeof f?f:w,u-=o?1:0),i&&Ur(r[0],r[1],i)&&(o=3>u?w:o,u=1);++e<u;)(i=r[e])&&n(t,i,o);return t})}function Vt(n,t){return function(r,e){var u=r?Bu(r):0;if(!Sr(u))return n(r,e);for(var o=t?u:-1,i=Br(r);(t?o--:++o<u)&&!1!==e(i[o],o,i););return r}}function Zt(n){return function(t,r,e){var u=Br(t);e=e(t);for(var o=e.length,i=n?o:-1;n?i--:++i<o;){var f=e[i];if(!1===r(u[f],f,u))break}return t}}function Yt(n,t){function r(){return(this&&this!==Zn&&this instanceof r?e:n).apply(t,arguments)}var e=Jt(n);return r}function Gt(n){return function(t){var r=-1;t=$e(Ce(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Jt(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=$u(n.prototype),t=n.apply(r,t);return ge(t)?t:r}}function Xt(n){function t(r,e,u){return u&&Ur(r,e,u)&&(e=w),r=gr(r,n,w,w,w,w,w,e),r.placeholder=t.placeholder,r}return t}function Ht(n,t){return le(function(r){var e=r[0];return null==e?e:(r.push(t),n.apply(w,r))})}function Qt(n,t){return function(r,e,u){if(u&&Ur(r,e,u)&&(e=w),e=wr(e,u,3),1==e.length){u=r=Oo(r)?r:zr(r);for(var o=e,i=-1,f=u.length,a=t,c=a;++i<f;){var l=u[i],s=+o(l);n(s,a)&&(a=s,c=l)}if(u=c,!r.length||u!==t)return u}return ct(r,e,n,t)}}function nr(n,r){return function(e,u,o){return u=wr(u,o,3),Oo(e)?(u=t(e,u,r),u>-1?e[u]:w):st(e,u,n)}}function tr(n){return function(r,e,u){return r&&r.length?(e=wr(e,u,3),t(r,e,n)):-1}}function rr(n){return function(t,r,e){return r=wr(r,e,3),st(t,r,n,!0)}}function er(n){return function(){for(var t,r=arguments.length,e=n?r:-1,u=0,o=Be(r);n?e--:++e<r;){var i=o[u++]=arguments[e];if("function"!=typeof i)throw new Ge(L);!t&&Ln.prototype.thru&&"wrapper"==br(i)&&(t=new Ln([],!0))}for(e=t?-1:r;++e<r;){var i=o[e],u=br(i),f="wrapper"==u?zu(i):w;t=f&&$r(f[0])&&f[1]==(E|k|R|C)&&!f[4].length&&1==f[9]?t[br(f[0])].apply(t,f[3]):1==i.length&&$r(i)?t[u]():t.thru(i)}return function(){var n=arguments,e=n[0];if(t&&1==n.length&&Oo(e)&&e.length>=F)return t.plant(e).value();for(var u=0,n=r?o[u].apply(this,n):e;++u<r;)n=o[u].call(this,n);return n}}}function ur(n,t){return function(r,e,u){return"function"==typeof e&&u===w&&Oo(r)?n(r,e):t(r,Bt(e,u,3))}}function or(n){return function(t,r,e){return("function"!=typeof r||e!==w)&&(r=Bt(r,e,3)),n(t,r,Re)}}function ir(n){return function(t,r,e){return("function"!=typeof r||e!==w)&&(r=Bt(r,e,3)),n(t,r)}}function fr(n){return function(t,r,e){var u={};return r=wr(r,e,3),_t(t,function(t,e,o){o=r(t,e,o),e=n?o:e,t=n?t:o,u[e]=t}),u}}function ar(n){return function(t,r,e){return t=u(t),(n?t:"")+pr(t,r,e)+(n?"":t)}}function cr(n){var t=le(function(r,e){var u=v(e,t.placeholder);return gr(r,n,w,e,u)});return t}function lr(n,t){return function(r,e,u,o){var i=3>arguments.length;return"function"==typeof e&&o===w&&Oo(r)?n(r,e,u,i):Ot(r,wr(e,o,4),u,i,t)}}function sr(n,t,r,e,u,o,i,f,a,c){function l(){for(var m=arguments.length,b=m,j=Be(m);b--;)j[b]=arguments[b];if(e&&(j=Mt(j,e,u)),o&&(j=qt(j,o,i)),_||y){var b=l.placeholder,k=v(j,b),m=m-k.length;if(c>m){var I=f?qn(f):w,m=bu(c-m,0),E=_?k:w,k=_?w:k,C=_?j:w,j=_?w:j;return t|=_?R:O,t&=~(_?O:R),g||(t&=~(x|A)),j=[n,t,r,C,E,j,k,I,a,m],I=sr.apply(w,j),$r(n)&&Du(I,j),I.placeholder=b,I}}if(b=p?r:this,I=h?b[n]:n,f)for(m=j.length,E=xu(f.length,m),k=qn(j);E--;)C=f[E],j[E]=Cr(C,m)?k[C]:w;return s&&a<j.length&&(j.length=a),this&&this!==Zn&&this instanceof l&&(I=d||Jt(n)),I.apply(b,j)}var s=t&E,p=t&x,h=t&A,_=t&k,g=t&j,y=t&I,d=h?w:Jt(n);return l}function pr(n,t,r){return n=n.length,t=+t,t>n&&mu(t)?(t-=n,r=null==r?" ":r+"",Ue(r,vu(t/r.length)).slice(0,t)):""}function hr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=Be(c+f);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this&&this!==Zn&&this instanceof u?i:n).apply(o?r:this,l)}var o=t&x,i=Jt(n);return u}function _r(n){var t=Pe[n];return function(n,r){return(r=r===w?0:+r||0)?(r=au(10,r),t(n*r)/r):t(n)}}function vr(n){return function(t,r,e,u){var o=wr(e);return null==e&&o===ut?Lt(t,r,n):zt(t,r,o(e,u,1),n)}}function gr(n,t,r,e,u,o,i,f){var a=t&A;if(!a&&"function"!=typeof n)throw new Ge(L);var c=e?e.length:0;if(c||(t&=~(R|O),e=u=w),c-=u?u.length:0,t&O){var l=e,s=u;e=u=w}var p=a?w:zu(n);return r=[n,t,r,e,u,l,s,o,i,f],p&&(e=r[1],t=p[1],f=e|t,u=t==E&&e==k||t==E&&e==C&&r[7].length<=p[8]||t==(E|C)&&e==k,(E>f||u)&&(t&x&&(r[2]=p[2],f|=e&x?0:j),(e=p[3])&&(u=r[3],r[3]=u?Mt(u,e,p[4]):qn(e),r[4]=u?v(r[3],z):qn(p[4])),(e=p[5])&&(u=r[5],r[5]=u?qt(u,e,p[6]):qn(e),r[6]=u?v(r[5],z):qn(p[6])),(e=p[7])&&(r[7]=qn(e)),t&E&&(r[8]=null==r[8]?p[8]:xu(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]),r[9]=null==f?a?0:n.length:bu(f-c,0)||0,(p?Lu:Du)(t==x?Yt(r[0],r[2]):t!=R&&t!=(x|R)||r[4].length?sr.apply(w,r):hr.apply(w,r),r)}function yr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length;if(a!=c&&(!u||a>=c))return!1;for(;++f<a;){var l=n[f],c=t[f],s=e?e(u?c:l,u?l:c,f):w;if(s!==w){if(s)continue;return!1}if(u){if(!Hn(t,function(n){return l===n||r(l,n,e,u,o,i)}))return!1}else if(l!==c&&!r(l,c,e,u,o,i))return!1}return!0}function dr(n,t,r){switch(r){case M:case q:return+n==+t;case P:return n.name==t.name&&n.message==t.message;case V:return n!=+n?t!=+t:n==+t;case Y:case G:return n==t+""}return!1}function mr(n,t,r,e,u,o,i){var f=zo(n),a=f.length,c=zo(t).length;if(a!=c&&!u)return!1;for(c=a;c--;){var l=f[c];if(!(u?l in t:nu.call(t,l)))return!1}for(var s=u;++c<a;){var l=f[c],p=n[l],h=t[l],_=e?e(u?h:p,u?p:h,l):w;if(_===w?!r(p,h,e,u,o,i):!_)return!1;s||(s="constructor"==l)}return s||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||"function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)?!0:!1}function wr(n,t,r){var e=Nn.callback||Se,e=e===Se?ut:e;return r?e(n,t,r):e}function br(n){for(var t=n.name+"",r=Wu[t],e=r?r.length:0;e--;){var u=r[e],o=u.func;if(null==o||o==n)return u.name}return t}function xr(n,t,e){var u=Nn.indexOf||Vr,u=u===Vr?r:u;return n?u(n,t,e):u}function Ar(n){n=Oe(n);for(var t=n.length;t--;){var r=n[t][1];n[t][2]=r===r&&!ge(r)}return n}function jr(n,t){var r=null==n?w:n[t];return ye(r)?r:w}function kr(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&nu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ir(n){return n=n.constructor,"function"==typeof n&&n instanceof n||(n=Ve),new n}function Rr(n,t,r){var e=n.constructor;switch(t){case J:return Dt(n);case M:case q:return new e(+n);case X:case H:case Q:case nn:case tn:case rn:case en:case un:case on:return t=n.buffer,new e(r?Dt(t):t,n.byteOffset,n.length);case V:case G:return new e(n);case Y:var u=new e(n.source,kn.exec(n));u.lastIndex=n.lastIndex}return u}function Or(n,t,r){return null==n||Wr(t,n)||(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),t=Zr(t)),t=null==n?n:n[t],null==t?w:t.apply(n,r)}function Er(n){return null!=n&&Sr(Bu(n))}function Cr(n,t){return n="number"==typeof n||On.test(n)?+n:-1,t=null==t?Cu:t,n>-1&&0==n%1&&t>n}function Ur(n,t,r){if(!ge(r))return!1;var e=typeof t;return("number"==e?Er(r)&&Cr(t,r.length):"string"==e&&t in r)?(t=r[t],n===n?n===t:t!==t):!1}function Wr(n,t){var r=typeof n;return"string"==r&&dn.test(n)||"number"==r?!0:Oo(n)?!1:!yn.test(n)||null!=t&&n in Br(t)}function $r(n){var t=br(n),r=Nn[t];return"function"==typeof r&&t in zn.prototype?n===r?!0:(t=zu(r),!!t&&n===t[0]):!1}function Sr(n){return"number"==typeof n&&n>-1&&0==n%1&&Cu>=n}function Fr(n,t){return n===w?t:Eo(n,t,Fr)}function Nr(n,t){n=Br(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function Tr(n,t){var r={};return ht(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function Lr(n){for(var t=Re(n),r=t.length,e=r&&n.length,u=!!e&&Sr(e)&&(Oo(n)||pe(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&Cr(f,e)||nu.call(n,f))&&i.push(f)}return i}function zr(n){return null==n?[]:Er(n)?ge(n)?n:Ve(n):Ee(n)}function Br(n){return ge(n)?n:Ve(n)}function Dr(n){if(Oo(n))return n;var t=[];return u(n).replace(mn,function(n,r,e,u){t.push(e?u.replace(An,"$1"):r||n)}),t}function Mr(n){return n instanceof zn?n.clone():new Ln(n.__wrapped__,n.__chain__,qn(n.__actions__))}function qr(n,t,r){return n&&n.length?((r?Ur(n,t,r):null==t)&&(t=1),Et(n,0>t?0:t)):[]}function Pr(n,t,r){var e=n?n.length:0;return e?((r?Ur(n,t,r):null==t)&&(t=1),t=e-(+t||0),Et(n,0,0>t?0:t)):[]}function Kr(n){return n?n[0]:w}function Vr(n,t,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?bu(u+e,0):e;else if(e)return e=Lt(n,t),u>e&&(t===t?t===n[e]:n[e]!==n[e])?e:-1;return r(n,t,e||0)}function Zr(n){var t=n?n.length:0;return t?n[t-1]:w}function Yr(n){return qr(n,1)}function Gr(n,t,e,u){if(!n||!n.length)return[];null!=t&&"boolean"!=typeof t&&(u=e,e=Ur(n,t,u)?w:t,t=!1);var o=wr();if((null!=e||o!==ut)&&(e=o(e,u,3)),t&&xr()===r){t=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=t?t(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=St(n,e);return n}function Jr(n){if(!n||!n.length)return[];var t=-1,r=0;n=Vn(n,function(n){return Er(n)?(r=bu(n.length,r),!0):void 0});for(var e=Be(r);++t<r;)e[t]=Gn(n,jt(t));return e}function Xr(n,t,r){return n&&n.length?(n=Jr(n),null==t?n:(t=Bt(t,r,4),Gn(n,function(n){return Xn(n,t,w,!0)}))):[]}function Hr(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Oo(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Qr(n){return n=Nn(n),n.__chain__=!0,n}function ne(n,t,r){return t.call(r,n)}function te(n,t,r){var e=Oo(n)?Kn:at;return r&&Ur(n,t,r)&&(t=w),("function"!=typeof t||r!==w)&&(t=wr(t,r,3)),e(n,t)}function re(n,t,r){var e=Oo(n)?Vn:lt;return t=wr(t,r,3),e(n,t)}function ee(n,t,r,e){var u=n?Bu(n):0;return Sr(u)||(n=Ee(n),u=n.length),r="number"!=typeof r||e&&Ur(t,r,e)?0:0>r?bu(u+r,0):r||0,"string"==typeof n||!Oo(n)&&be(n)?u>=r&&-1<n.indexOf(t,r):!!u&&-1<xr(n,t,r)}function ue(n,t,r){var e=Oo(n)?Gn:wt;return t=wr(t,r,3),e(n,t)}function oe(n,t,r){if(r?Ur(n,t,r):null==t){n=zr(n);var e=n.length;return e>0?n[Rt(0,e-1)]:w}r=-1,n=je(n);var e=n.length,u=e-1;for(t=xu(0>t?0:+t||0,e);++r<t;){var e=Rt(r,u),o=n[e];n[e]=n[r],n[r]=o}return n.length=t,n}function ie(n,t,r){var e=Oo(n)?Hn:Ct;return r&&Ur(n,t,r)&&(t=w),("function"!=typeof t||r!==w)&&(t=wr(t,r,3)),e(n,t)}function fe(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Ge(L);var e=n;n=t,t=e}return function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=w),r}}function ae(n,t,r){function e(t,r){r&&iu(r),a=p=h=w,t&&(_=ho(),c=n.apply(s,f),p||a||(f=s=w))}function u(){var n=t-(ho()-l);0>=n||n>t?e(h,a):p=su(u,n)}function o(){e(g,p)}function i(){if(f=arguments,l=ho(),s=this,h=g&&(p||!y),!1===v)var r=y&&!p;else{a||y||(_=l);var e=v-(l-_),i=0>=e||e>v;i?(a&&(a=iu(a)),_=l,c=n.apply(s,f)):a||(a=su(o,e))}return i&&p?p=iu(p):p||t===v||(p=su(u,t)),r&&(i=!0,c=n.apply(s,f)),!i||p||a||(f=s=w),c}var f,a,c,l,s,p,h,_=0,v=!1,g=!0;if("function"!=typeof n)throw new Ge(L);if(t=0>t?0:+t||0,!0===r)var y=!0,g=!1;else ge(r)&&(y=!!r.leading,v="maxWait"in r&&bu(+r.maxWait||0,t),g="trailing"in r?!!r.trailing:g);return i.cancel=function(){p&&iu(p),a&&iu(a),_=0,a=p=h=w},i}function ce(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],o=r.cache;return o.has(u)?o.get(u):(e=n.apply(this,e),r.cache=o.set(u,e),e)}if("function"!=typeof n||t&&"function"!=typeof t)throw new Ge(L);return r.cache=new ce.Cache,r}function le(n,t){if("function"!=typeof n)throw new Ge(L);return t=bu(t===w?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=bu(r.length-t,0),o=Be(u);++e<u;)o[e]=r[t+e];switch(t){case 0:return n.call(this,o);case 1:return n.call(this,r[0],o);case 2:return n.call(this,r[0],r[1],o)}for(u=Be(t+1),e=-1;++e<t;)u[e]=r[e];return u[t]=o,n.apply(this,u)}}function se(n,t){return n>t}function pe(n){return h(n)&&Er(n)&&nu.call(n,"callee")&&!cu.call(n,"callee")}function he(n,t,r,e){return e=(r="function"==typeof r?Bt(r,e,3):w)?r(n,t):w,e===w?dt(n,t,r):!!e}function _e(n){return h(n)&&"string"==typeof n.message&&ru.call(n)==P}function ve(n){return ge(n)&&ru.call(n)==K}function ge(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function ye(n){return null==n?!1:ve(n)?uu.test(Qe.call(n)):h(n)&&Rn.test(n)}function de(n){return"number"==typeof n||h(n)&&ru.call(n)==V}function me(n){var t;if(!h(n)||ru.call(n)!=Z||pe(n)||!(nu.call(n,"constructor")||(t=n.constructor,"function"!=typeof t||t instanceof t)))return!1;var r;return ht(n,function(n,t){r=t}),r===w||nu.call(n,r)}function we(n){return ge(n)&&ru.call(n)==Y}function be(n){return"string"==typeof n||h(n)&&ru.call(n)==G}function xe(n){return h(n)&&Sr(n.length)&&!!Sn[ru.call(n)]}function Ae(n,t){return t>n}function je(n){var t=n?Bu(n):0;return Sr(t)?t?qn(n):[]:Ee(n)}function ke(n){return et(n,Re(n))}function Ie(n){return gt(n,Re(n))}function Re(n){if(null==n)return[];ge(n)||(n=Ve(n));for(var t=n.length,t=t&&Sr(t)&&(Oo(n)||pe(n))&&t||0,r=n.constructor,e=-1,r="function"==typeof r&&r.prototype===n,u=Be(t),o=t>0;++e<t;)u[e]=e+"";for(var i in n)o&&Cr(i,t)||"constructor"==i&&(r||!nu.call(n,i))||u.push(i);return u}function Oe(n){n=Br(n);for(var t=-1,r=zo(n),e=r.length,u=Be(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function Ee(n){return Ft(n,zo(n))}function Ce(n){return(n=u(n))&&n.replace(En,a).replace(xn,"")}function Ue(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!mu(t))return r;do t%2&&(r+=n),t=yu(t/2),n+=n;while(t);return r}function We(n,t,r){var e=n;return(n=u(n))?(r?Ur(e,t,r):null==t)?n.slice(g(n),y(n)+1):(t+="",n.slice(o(n,t),i(n,t)+1)):n}function $e(n,t,r){return r&&Ur(n,t,r)&&(t=w),n=u(n),n.match(t||Wn)||[]}function Se(n,t,r){return r&&Ur(n,t,r)&&(t=w),h(n)?Ne(n):ut(n,t)}function Fe(n){return n}function Ne(n){return bt(ot(n,!0))}function Te(n,t,r){if(null==r){var e=ge(t),u=e?zo(t):w;((u=u&&u.length?gt(t,u):w)?u.length:e)||(u=!1,r=t,t=n,n=this)}u||(u=gt(t,zo(t)));var o=!0,e=-1,i=ve(n),f=u.length;!1===r?o=!1:ge(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=qn(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return t.apply(n,Jn([this.value()],arguments))}}(a))}return n}function Le(){}function ze(n){return Wr(n)?jt(n):kt(n)}_=_?Yn.defaults(Zn.Object(),_,Yn.pick(Zn,$n)):Zn;var Be=_.Array,De=_.Date,Me=_.Error,qe=_.Function,Pe=_.Math,Ke=_.Number,Ve=_.Object,Ze=_.RegExp,Ye=_.String,Ge=_.TypeError,Je=Be.prototype,Xe=Ve.prototype,He=Ye.prototype,Qe=qe.prototype.toString,nu=Xe.hasOwnProperty,tu=0,ru=Xe.toString,eu=Zn._,uu=Ze("^"+Qe.call(nu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ou=_.ArrayBuffer,iu=_.clearTimeout,fu=_.parseFloat,au=Pe.pow,cu=Xe.propertyIsEnumerable,lu=jr(_,"Set"),su=_.setTimeout,pu=Je.splice,hu=_.Uint8Array,_u=jr(_,"WeakMap"),vu=Pe.ceil,gu=jr(Ve,"create"),yu=Pe.floor,du=jr(Be,"isArray"),mu=_.isFinite,wu=jr(Ve,"keys"),bu=Pe.max,xu=Pe.min,Au=jr(De,"now"),ju=_.parseInt,ku=Pe.random,Iu=Ke.NEGATIVE_INFINITY,Ru=Ke.POSITIVE_INFINITY,Ou=4294967294,Eu=2147483647,Cu=9007199254740991,Uu=_u&&new _u,Wu={};Nn.support={},Nn.templateSettings={escape:_n,evaluate:vn,interpolate:gn,variable:"",imports:{_:Nn}};var $u=function(){function n(){}return function(t){if(ge(t)){n.prototype=t;var r=new n;n.prototype=w}return r||{}}}(),Su=Vt(_t),Fu=Vt(vt,!0),Nu=Zt(),Tu=Zt(!0),Lu=Uu?function(n,t){return Uu.set(n,t),n}:Fe,zu=Uu?function(n){return Uu.get(n)}:Le,Bu=jt("length"),Du=function(){var n=0,t=0;return function(r,e){var u=ho(),o=S-(u-t);if(t=u,o>0){if(++n>=$)return r}else n=0;return Lu(r,e)}}(),Mu=le(function(n,t){return h(n)&&Er(n)?ft(n,pt(t,!1,!0)):[]}),qu=tr(),Pu=tr(!0),Ku=le(function(n){for(var t=n.length,e=t,u=Be(l),o=xr(),i=o===r,f=[];e--;){var a=n[e]=Er(a=n[e])?a:[];u[e]=i&&120<=a.length&&gu&&lu?new Dn(e&&a):null}var i=n[0],c=-1,l=i?i.length:0,s=u[0];n:for(;++c<l;)if(a=i[c],0>(s?Mn(s,a):o(f,a,0))){for(e=t;--e;){var p=u[e];if(0>(p?Mn(p,a):o(n[e],a,0)))continue n}s&&s.push(a),f.push(a)}return f}),Vu=le(function(t,r){r=pt(r);var e=rt(t,r);return It(t,r.sort(n)),e}),Zu=vr(),Yu=vr(!0),Gu=le(function(n){return St(pt(n,!1,!0))}),Ju=le(function(n,t){return Er(n)?ft(n,t):[]}),Xu=le(Jr),Hu=le(function(n){var t=n.length,r=t>2?n[t-2]:w,e=t>1?n[t-1]:w;return t>2&&"function"==typeof r?t-=2:(r=t>1&&"function"==typeof e?(--t,
e):w,e=w),n.length=t,Xr(n,r,e)}),Qu=le(function(n){return n=pt(n),this.thru(function(t){t=Oo(t)?t:[Br(t)];for(var r=n,e=-1,u=t.length,o=-1,i=r.length,f=Be(u+i);++e<u;)f[e]=t[e];for(;++o<i;)f[e++]=r[o];return f})}),no=le(function(n,t){return rt(n,pt(t))}),to=Pt(function(n,t,r){nu.call(n,r)?++n[r]:n[r]=1}),ro=nr(Su),eo=nr(Fu,!0),uo=ur(Pn,Su),oo=ur(function(n,t){for(var r=n.length;r--&&!1!==t(n[r],r,n););return n},Fu),io=Pt(function(n,t,r){nu.call(n,r)?n[r].push(t):n[r]=[t]}),fo=Pt(function(n,t,r){n[r]=t}),ao=le(function(n,t,r){var e=-1,u="function"==typeof t,o=Wr(t),i=Er(n)?Be(n.length):[];return Su(n,function(n){var f=u?t:o&&null!=n?n[t]:w;i[++e]=f?f.apply(n,r):Or(n,t,r)}),i}),co=Pt(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),lo=lr(Xn,Su),so=lr(function(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r},Fu),po=le(function(n,t){if(null==n)return[];var r=t[2];return r&&Ur(t[0],t[1],r)&&(t.length=1),Wt(n,pt(t),[])}),ho=Au||function(){return(new De).getTime()},_o=le(function(n,t,r){var e=x;if(r.length)var u=v(r,_o.placeholder),e=e|R;return gr(n,e,t,r,u)}),vo=le(function(n,t){t=t.length?pt(t):Ie(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=gr(n[u],x,n)}return n}),go=le(function(n,t,r){var e=x|A;if(r.length)var u=v(r,go.placeholder),e=e|R;return gr(t,e,n,r,u)}),yo=Xt(k),mo=Xt(I),wo=le(function(n,t){return it(n,1,t)}),bo=le(function(n,t,r){return it(n,t,r)}),xo=er(),Ao=er(!0),jo=le(function(n,t){if(t=pt(t),"function"!=typeof n||!Kn(t,e))throw new Ge(L);var r=t.length;return le(function(e){for(var u=xu(e.length,r);u--;)e[u]=t[u](e[u]);return n.apply(this,e)})}),ko=cr(R),Io=cr(O),Ro=le(function(n,t){return gr(n,C,w,w,w,pt(t))}),Oo=du||function(n){return h(n)&&Sr(n.length)&&ru.call(n)==D},Eo=Kt(At),Co=Kt(function(n,t,r){return r?nt(n,t,r):tt(n,t)}),Uo=Ht(Co,function(n,t){return n===w?t:n}),Wo=Ht(Eo,Fr),$o=rr(_t),So=rr(vt),Fo=or(Nu),No=or(Tu),To=ir(_t),Lo=ir(vt),zo=wu?function(n){var t=null==n?w:n.constructor;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&Er(n)?Lr(n):ge(n)?wu(n):[]}:Lr,Bo=fr(!0),Do=fr(),Mo=le(function(n,t){if(null==n)return{};if("function"!=typeof t[0])return t=Gn(pt(t),Ye),Nr(n,ft(Re(n),t));var r=Bt(t[0],t[1],3);return Tr(n,function(n,t,e){return!r(n,t,e)})}),qo=le(function(n,t){return null==n?{}:"function"==typeof t[0]?Tr(n,Bt(t[0],t[1],3)):Nr(n,pt(t))}),Po=Gt(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ko=Gt(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Vo=ar(),Zo=ar(!0),Yo=Gt(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Go=Gt(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Jo=le(function(n,t){try{return n.apply(w,t)}catch(r){return _e(r)?r:new Me(r)}}),Xo=le(function(n,t){return function(r){return Or(r,n,t)}}),Ho=le(function(n,t){return function(r){return Or(n,r,t)}}),Qo=_r("ceil"),ni=_r("floor"),ti=Qt(se,Iu),ri=Qt(Ae,Ru),ei=_r("round");return Nn.prototype=Tn.prototype,Ln.prototype=$u(Tn.prototype),Ln.prototype.constructor=Ln,zn.prototype=$u(Tn.prototype),zn.prototype.constructor=zn,Bn.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]},Bn.prototype.get=function(n){return"__proto__"==n?w:this.__data__[n]},Bn.prototype.has=function(n){return"__proto__"!=n&&nu.call(this.__data__,n)},Bn.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},Dn.prototype.push=function(n){var t=this.data;"string"==typeof n||ge(n)?t.set.add(n):t.hash[n]=!0},ce.Cache=Bn,Nn.after=function(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Ge(L);var r=n;n=t,t=r}return n=mu(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Nn.ary=function(n,t,r){return r&&Ur(n,t,r)&&(t=w),t=n&&null==t?n.length:bu(+t||0,0),gr(n,E,w,w,w,w,t)},Nn.assign=Co,Nn.at=no,Nn.before=fe,Nn.bind=_o,Nn.bindAll=vo,Nn.bindKey=go,Nn.callback=Se,Nn.chain=Qr,Nn.chunk=function(n,t,r){t=(r?Ur(n,t,r):null==t)?1:bu(yu(t)||1,1),r=0;for(var e=n?n.length:0,u=-1,o=Be(vu(e/t));e>r;)o[++u]=Et(n,r,r+=t);return o},Nn.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Nn.constant=function(n){return function(){return n}},Nn.countBy=to,Nn.create=function(n,t,r){var e=$u(n);return r&&Ur(n,t,r)&&(t=w),t?tt(e,t):e},Nn.curry=yo,Nn.curryRight=mo,Nn.debounce=ae,Nn.defaults=Uo,Nn.defaultsDeep=Wo,Nn.defer=wo,Nn.delay=bo,Nn.difference=Mu,Nn.drop=qr,Nn.dropRight=Pr,Nn.dropRightWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),!0,!0):[]},Nn.dropWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),!0):[]},Nn.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&"number"!=typeof r&&Ur(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=e===w||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n},Nn.filter=re,Nn.flatten=function(n,t,r){var e=n?n.length:0;return r&&Ur(n,t,r)&&(t=!1),e?pt(n,t):[]},Nn.flattenDeep=function(n){return n&&n.length?pt(n,!0):[]},Nn.flow=xo,Nn.flowRight=Ao,Nn.forEach=uo,Nn.forEachRight=oo,Nn.forIn=Fo,Nn.forInRight=No,Nn.forOwn=To,Nn.forOwnRight=Lo,Nn.functions=Ie,Nn.groupBy=io,Nn.indexBy=fo,Nn.initial=function(n){return Pr(n,1)},Nn.intersection=Ku,Nn.invert=function(n,t,r){r&&Ur(n,t,r)&&(t=w),r=-1;for(var e=zo(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?nu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Nn.invoke=ao,Nn.keys=zo,Nn.keysIn=Re,Nn.map=ue,Nn.mapKeys=Bo,Nn.mapValues=Do,Nn.matches=Ne,Nn.matchesProperty=function(n,t){return xt(n,ot(t,!0))},Nn.memoize=ce,Nn.merge=Eo,Nn.method=Xo,Nn.methodOf=Ho,Nn.mixin=Te,Nn.modArgs=jo,Nn.negate=function(n){if("function"!=typeof n)throw new Ge(L);return function(){return!n.apply(this,arguments)}},Nn.omit=Mo,Nn.once=function(n){return fe(2,n)},Nn.pairs=Oe,Nn.partial=ko,Nn.partialRight=Io,Nn.partition=co,Nn.pick=qo,Nn.pluck=function(n,t){return ue(n,ze(t))},Nn.property=ze,Nn.propertyOf=function(n){return function(t){return yt(n,Dr(t),t+"")}},Nn.pull=function(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=xr(),u=n.length;++r<u;)for(var o=0,i=n[r];-1<(o=e(t,i,o));)pu.call(t,o,1);return t},Nn.pullAt=Vu,Nn.range=function(n,t,r){r&&Ur(n,t,r)&&(t=r=w),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;var e=-1;t=bu(vu((t-n)/(r||1)),0);for(var u=Be(t);++e<t;)u[e]=n,n+=r;return u},Nn.rearg=Ro,Nn.reject=function(n,t,r){var e=Oo(n)?Vn:lt;return t=wr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Nn.remove=function(n,t,r){var e=[];if(!n||!n.length)return e;var u=-1,o=[],i=n.length;for(t=wr(t,r,3);++u<i;)r=n[u],t(r,u,n)&&(e.push(r),o.push(u));return It(n,o),e},Nn.rest=Yr,Nn.restParam=le,Nn.set=function(n,t,r){if(null==n)return n;var e=t+"";t=null!=n[e]||Wr(t,n)?[e]:Dr(t);for(var e=-1,u=t.length,o=u-1,i=n;null!=i&&++e<u;){var f=t[e];ge(i)&&(e==o?i[f]=r:null==i[f]&&(i[f]=Cr(t[e+1])?[]:{})),i=i[f]}return n},Nn.shuffle=function(n){return oe(n,Ru)},Nn.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Ur(n,t,r)&&(t=0,r=e),Et(n,t,r)):[]},Nn.sortBy=function(n,t,r){if(null==n)return[];r&&Ur(n,t,r)&&(t=w);var e=-1;return t=wr(t,r,3),n=wt(n,function(n,r,u){return{a:t(n,r,u),b:++e,c:n}}),Ut(n,f)},Nn.sortByAll=po,Nn.sortByOrder=function(n,t,r,e){return null==n?[]:(e&&Ur(t,r,e)&&(r=w),Oo(t)||(t=null==t?[]:[t]),Oo(r)||(r=null==r?[]:[r]),Wt(n,t,r))},Nn.spread=function(n){if("function"!=typeof n)throw new Ge(L);return function(t){return n.apply(this,t)}},Nn.take=function(n,t,r){return n&&n.length?((r?Ur(n,t,r):null==t)&&(t=1),Et(n,0,0>t?0:t)):[]},Nn.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?Ur(n,t,r):null==t)&&(t=1),t=e-(+t||0),Et(n,0>t?0:t)):[]},Nn.takeRightWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),!1,!0):[]},Nn.takeWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3)):[]},Nn.tap=function(n,t,r){return t.call(r,n),n},Nn.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Ge(L);return!1===r?e=!1:ge(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),ae(n,t,{leading:e,maxWait:+t,trailing:u})},Nn.thru=ne,Nn.times=function(n,t,r){if(n=yu(n),1>n||!mu(n))return[];var e=-1,u=Be(xu(n,4294967295));for(t=Bt(t,r,1);++e<n;)4294967295>e?u[e]=t(e):t(e);return u},Nn.toArray=je,Nn.toPlainObject=ke,Nn.transform=function(n,t,r,e){var u=Oo(n)||xe(n);return t=wr(t,e,4),null==r&&(u||ge(n)?(e=n.constructor,r=u?Oo(n)?new e:[]:$u(ve(e)?e.prototype:w)):r={}),(u?Pn:_t)(n,function(n,e,u){return t(r,n,e,u)}),r},Nn.union=Gu,Nn.uniq=Gr,Nn.unzip=Jr,Nn.unzipWith=Xr,Nn.values=Ee,Nn.valuesIn=function(n){return Ft(n,Re(n))},Nn.where=function(n,t){return re(n,bt(t))},Nn.without=Ju,Nn.wrap=function(n,t){return t=null==t?Fe:t,gr(t,R,w,[n],[])},Nn.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Er(r))var e=e?Jn(ft(e,r),ft(r,e)):r}return e?St(e):[]},Nn.zip=Xu,Nn.zipObject=Hr,Nn.zipWith=Hu,Nn.backflow=Ao,Nn.collect=ue,Nn.compose=Ao,Nn.each=uo,Nn.eachRight=oo,Nn.extend=Co,Nn.iteratee=Se,Nn.methods=Ie,Nn.object=Hr,Nn.select=re,Nn.tail=Yr,Nn.unique=Gr,Te(Nn,Nn),Nn.add=function(n,t){return(+n||0)+(+t||0)},Nn.attempt=Jo,Nn.camelCase=Po,Nn.capitalize=function(n){return(n=u(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Nn.ceil=Qo,Nn.clone=function(n,t,r,e){return t&&"boolean"!=typeof t&&Ur(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),"function"==typeof r?ot(n,t,Bt(r,e,3)):ot(n,t)},Nn.cloneDeep=function(n,t,r){return"function"==typeof t?ot(n,!0,Bt(t,r,3)):ot(n,!0)},Nn.deburr=Ce,Nn.endsWith=function(n,t,r){n=u(n),t+="";var e=n.length;return r=r===w?e:xu(0>r?0:+r||0,e),r-=t.length,r>=0&&n.indexOf(t,r)==r},Nn.escape=function(n){return(n=u(n))&&hn.test(n)?n.replace(sn,c):n},Nn.escapeRegExp=function(n){return(n=u(n))&&bn.test(n)?n.replace(wn,l):n||"(?:)"},Nn.every=te,Nn.find=ro,Nn.findIndex=qu,Nn.findKey=$o,Nn.findLast=eo,Nn.findLastIndex=Pu,Nn.findLastKey=So,Nn.findWhere=function(n,t){return ro(n,bt(t))},Nn.first=Kr,Nn.floor=ni,Nn.get=function(n,t,r){return n=null==n?w:yt(n,Dr(t),t+""),n===w?r:n},Nn.gt=se,Nn.gte=function(n,t){return n>=t},Nn.has=function(n,t){if(null==n)return!1;var r=nu.call(n,t);if(!r&&!Wr(t)){if(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),null==n)return!1;t=Zr(t),r=nu.call(n,t)}return r||Sr(n.length)&&Cr(t,n.length)&&(Oo(n)||pe(n))},Nn.identity=Fe,Nn.includes=ee,Nn.indexOf=Vr,Nn.inRange=function(n,t,r){return t=+t||0,r===w?(r=t,t=0):r=+r||0,n>=xu(t,r)&&n<bu(t,r)},Nn.isArguments=pe,Nn.isArray=Oo,Nn.isBoolean=function(n){return!0===n||!1===n||h(n)&&ru.call(n)==M},Nn.isDate=function(n){return h(n)&&ru.call(n)==q},Nn.isElement=function(n){return!!n&&1===n.nodeType&&h(n)&&!me(n)},Nn.isEmpty=function(n){return null==n?!0:Er(n)&&(Oo(n)||be(n)||pe(n)||h(n)&&ve(n.splice))?!n.length:!zo(n).length},Nn.isEqual=he,Nn.isError=_e,Nn.isFinite=function(n){return"number"==typeof n&&mu(n)},Nn.isFunction=ve,Nn.isMatch=function(n,t,r,e){return r="function"==typeof r?Bt(r,e,3):w,mt(n,Ar(t),r)},Nn.isNaN=function(n){return de(n)&&n!=+n},Nn.isNative=ye,Nn.isNull=function(n){return null===n},Nn.isNumber=de,Nn.isObject=ge,Nn.isPlainObject=me,Nn.isRegExp=we,Nn.isString=be,Nn.isTypedArray=xe,Nn.isUndefined=function(n){return n===w},Nn.kebabCase=Ko,Nn.last=Zr,Nn.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?bu(e+r,0):xu(r||0,e-1))+1;else if(r)return u=Lt(n,t,!0)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;if(t!==t)return p(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1},Nn.lt=Ae,Nn.lte=function(n,t){return t>=n},Nn.max=ti,Nn.min=ri,Nn.noConflict=function(){return Zn._=eu,this},Nn.noop=Le,Nn.now=ho,Nn.pad=function(n,t,r){n=u(n),t=+t;var e=n.length;return t>e&&mu(t)?(e=(t-e)/2,t=yu(e),e=vu(e),r=pr("",e,r),r.slice(0,t)+n+r):n},Nn.padLeft=Vo,Nn.padRight=Zo,Nn.parseInt=function(n,t,r){return(r?Ur(n,t,r):null==t)?t=0:t&&(t=+t),n=We(n),ju(n,t||(In.test(n)?16:10))},Nn.random=function(n,t,r){r&&Ur(n,t,r)&&(t=r=w);var e=null==n,u=null==t;return null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=ku(),xu(n+r*(t-n+fu("1e-"+((r+"").length-1))),t)):Rt(n,t)},Nn.reduce=lo,Nn.reduceRight=so,Nn.repeat=Ue,Nn.result=function(n,t,r){var e=null==n?w:n[t];return e===w&&(null==n||Wr(t,n)||(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),e=null==n?w:n[Zr(t)]),e=e===w?r:e),ve(e)?e.call(n):e},Nn.round=ei,Nn.runInContext=m,Nn.size=function(n){var t=n?Bu(n):0;return Sr(t)?t:zo(n).length},Nn.snakeCase=Yo,Nn.some=ie,Nn.sortedIndex=Zu,Nn.sortedLastIndex=Yu,Nn.startCase=Go,Nn.startsWith=function(n,t,r){return n=u(n),r=null==r?0:xu(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r},Nn.sum=function(n,t,r){if(r&&Ur(n,t,r)&&(t=w),t=wr(t,r,3),1==t.length){n=Oo(n)?n:zr(n),r=n.length;for(var e=0;r--;)e+=+t(n[r])||0;n=e}else n=$t(n,t);return n},Nn.template=function(n,t,r){var e=Nn.templateSettings;r&&Ur(n,t,r)&&(t=r=w),n=u(n),t=nt(tt({},r||t),e,Qn),r=nt(tt({},t.imports),e.imports,Qn);var o,i,f=zo(r),a=Ft(r,f),c=0;r=t.interpolate||Cn;var l="__p+='";r=Ze((t.escape||Cn).source+"|"+r.source+"|"+(r===gn?jn:Cn).source+"|"+(t.evaluate||Cn).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Un,s),r&&(o=!0,l+="'+__e("+r+")+'"),f&&(i=!0,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(fn,""):l).replace(an,"$1").replace(cn,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=Jo(function(){return qe(f,p+"return "+l).apply(w,a)}),t.source=l,_e(t))throw t;return t},Nn.trim=We,Nn.trimLeft=function(n,t,r){var e=n;return(n=u(n))?n.slice((r?Ur(e,t,r):null==t)?g(n):o(n,t+"")):n},Nn.trimRight=function(n,t,r){var e=n;return(n=u(n))?(r?Ur(e,t,r):null==t)?n.slice(0,y(n)+1):n.slice(0,i(n,t+"")+1):n},Nn.trunc=function(n,t,r){r&&Ur(n,t,r)&&(t=w);var e=U;if(r=W,null!=t)if(ge(t)){var o="separator"in t?t.separator:o,e="length"in t?+t.length||0:e;r="omission"in t?u(t.omission):r}else e=+t||0;if(n=u(n),e>=n.length)return n;if(e-=r.length,1>e)return r;if(t=n.slice(0,e),null==o)return t+r;if(we(o)){if(n.slice(e).search(o)){var i,f=n.slice(0,e);for(o.global||(o=Ze(o.source,(kn.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;t=t.slice(0,null==i?e:i)}}else n.indexOf(o,e)!=e&&(o=t.lastIndexOf(o),o>-1&&(t=t.slice(0,o)));return t+r},Nn.unescape=function(n){return(n=u(n))&&pn.test(n)?n.replace(ln,d):n},Nn.uniqueId=function(n){var t=++tu;return u(n)+t},Nn.words=$e,Nn.all=te,Nn.any=ie,Nn.contains=ee,Nn.eq=he,Nn.detect=ro,Nn.foldl=lo,Nn.foldr=so,Nn.head=Kr,Nn.include=ee,Nn.inject=lo,Te(Nn,function(){var n={};return _t(Nn,function(t,r){Nn.prototype[r]||(n[r]=t)}),n}(),!1),Nn.sample=oe,Nn.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return oe(t,n)}):oe(this.value())},Nn.VERSION=b,Pn("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Nn[n].placeholder=Nn}),Pn(["drop","take"],function(n,t){zn.prototype[n]=function(r){var e=this.__filtered__;if(e&&!t)return new zn(this);r=null==r?1:bu(yu(r)||0,0);var u=this.clone();return e?u.__takeCount__=xu(u.__takeCount__,r):u.__views__.push({size:r,type:n+(0>u.__dir__?"Right":"")}),u},zn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Pn(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r!=T;zn.prototype[n]=function(n,t){var u=this.clone();return u.__iteratees__.push({iteratee:wr(n,t,1),type:r}),u.__filtered__=u.__filtered__||e,u}}),Pn(["first","last"],function(n,t){var r="take"+(t?"Right":"");zn.prototype[n]=function(){return this[r](1).value()[0]}}),Pn(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");zn.prototype[n]=function(){return this.__filtered__?new zn(this):this[r](1)}}),Pn(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?bt:ze;zn.prototype[n]=function(n){return this[r](e(n))}}),zn.prototype.compact=function(){return this.filter(Fe)},zn.prototype.reject=function(n,t){return n=wr(n,t,1),this.filter(function(t){return!n(t)})},zn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=this;return r.__filtered__&&(n>0||0>t)?new zn(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==w&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r)},zn.prototype.takeRightWhile=function(n,t){return this.reverse().takeWhile(n,t).reverse()},zn.prototype.toArray=function(){return this.take(Ru)},_t(zn.prototype,function(n,t){var r=/^(?:filter|map|reject)|While$/.test(t),e=/^(?:first|last)$/.test(t),u=Nn[e?"take"+("last"==t?"Right":""):t];u&&(Nn.prototype[t]=function(){function t(n){return e&&i?u(n,1)[0]:u.apply(w,Jn([n],o))}var o=e?[1]:arguments,i=this.__chain__,f=this.__wrapped__,a=!!this.__actions__.length,c=f instanceof zn,l=o[0],s=c||Oo(f);return s&&r&&"function"==typeof l&&1!=l.length&&(c=s=!1),l={func:ne,args:[t],thisArg:w},a=c&&!a,e&&!i?a?(f=f.clone(),f.__actions__.push(l),n.call(f)):u.call(w,this.value())[0]:!e&&s?(f=a?f:new zn(this),f=n.apply(f,o),f.__actions__.push(l),new Ln(f,i)):this.thru(t)})}),Pn("join pop push replace shift sort splice split unshift".split(" "),function(n){var t=(/^(?:replace|split)$/.test(n)?He:Je)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(n);Nn.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),_t(zn.prototype,function(n,t){var r=Nn[t];if(r){var e=r.name+"";(Wu[e]||(Wu[e]=[])).push({name:t,func:r})}}),Wu[sr(w,A).name]=[{name:"wrapper",func:w}],zn.prototype.clone=function(){var n=new zn(this.__wrapped__);return n.__actions__=qn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=qn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=qn(this.__views__),n},zn.prototype.reverse=function(){if(this.__filtered__){var n=new zn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n},zn.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=Oo(t),u=0>r,o=e?t.length:0;n=o;for(var i=this.__views__,f=0,a=-1,c=i.length;++a<c;){var l=i[a],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=xu(n,f+s);break;case"takeRight":f=bu(f,n-s)}}if(n={start:f,end:n},i=n.start,f=n.end,n=f-i,u=u?f:i-1,i=this.__iteratees__,f=i.length,a=0,c=xu(n,this.__takeCount__),!e||F>o||o==n&&c==n)return Tt(t,this.__actions__);e=[];n:for(;n--&&c>a;){for(u+=r,o=-1,l=t[u];++o<f;){var p=i[o],s=p.type,p=p.iteratee(l);if(s==T)l=p;else if(!p){if(s==N)continue n;break n}}e[a++]=l}return e},Nn.prototype.chain=function(){return Qr(this)},Nn.prototype.commit=function(){return new Ln(this.value(),this.__chain__)},Nn.prototype.concat=Qu,Nn.prototype.plant=function(n){for(var t,r=this;r instanceof Tn;){var e=Mr(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Nn.prototype.reverse=function(){function n(n){return n.reverse()}var t=this.__wrapped__;return t instanceof zn?(this.__actions__.length&&(t=new zn(this)),t=t.reverse(),t.__actions__.push({func:ne,args:[n],thisArg:w}),new Ln(t,this.__chain__)):this.thru(n)},Nn.prototype.toString=function(){return this.value()+""},Nn.prototype.run=Nn.prototype.toJSON=Nn.prototype.valueOf=Nn.prototype.value=function(){return Tt(this.__wrapped__,this.__actions__)},Nn.prototype.collect=Nn.prototype.map,Nn.prototype.head=Nn.prototype.first,Nn.prototype.select=Nn.prototype.filter,Nn.prototype.tail=Nn.prototype.rest,Nn}var w,b="3.10.1",x=1,A=2,j=4,k=8,I=16,R=32,O=64,E=128,C=256,U=30,W="...",$=150,S=16,F=200,N=1,T=2,L="Expected a function",z="__lodash_placeholder__",B="[object Arguments]",D="[object Array]",M="[object Boolean]",q="[object Date]",P="[object Error]",K="[object Function]",V="[object Number]",Z="[object Object]",Y="[object RegExp]",G="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",H="[object Float64Array]",Q="[object Int8Array]",nn="[object Int16Array]",tn="[object Int32Array]",rn="[object Uint8Array]",en="[object Uint8ClampedArray]",un="[object Uint16Array]",on="[object Uint32Array]",fn=/\b__p\+='';/g,an=/\b(__p\+=)''\+/g,cn=/(__e\(.*?\)|\b__t\))\+'';/g,ln=/&(?:amp|lt|gt|quot|#39|#96);/g,sn=/[&<>"'`]/g,pn=RegExp(ln.source),hn=RegExp(sn.source),_n=/<%-([\s\S]+?)%>/g,vn=/<%([\s\S]+?)%>/g,gn=/<%=([\s\S]+?)%>/g,yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,dn=/^\w*$/,mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,wn=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,bn=RegExp(wn.source),xn=/[\u0300-\u036f\ufe20-\ufe23]/g,An=/\\(\\)?/g,jn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kn=/\w*$/,In=/^0[xX]/,Rn=/^\[object .+?Constructor\]$/,On=/^\d+$/,En=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cn=/($^)/,Un=/['\n\r\u2028\u2029\\]/g,Wn=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),$n="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),Sn={};Sn[X]=Sn[H]=Sn[Q]=Sn[nn]=Sn[tn]=Sn[rn]=Sn[en]=Sn[un]=Sn[on]=!0,Sn[B]=Sn[D]=Sn[J]=Sn[M]=Sn[q]=Sn[P]=Sn[K]=Sn["[object Map]"]=Sn[V]=Sn[Z]=Sn[Y]=Sn["[object Set]"]=Sn[G]=Sn["[object WeakMap]"]=!1;var Fn={};Fn[B]=Fn[D]=Fn[J]=Fn[M]=Fn[q]=Fn[X]=Fn[H]=Fn[Q]=Fn[nn]=Fn[tn]=Fn[V]=Fn[Z]=Fn[Y]=Fn[G]=Fn[rn]=Fn[en]=Fn[un]=Fn[on]=!0,Fn[P]=Fn[K]=Fn["[object Map]"]=Fn["[object Set]"]=Fn["[object WeakMap]"]=!1;var Nn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ln={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zn={"function":!0,object:!0},Bn={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Dn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mn=zn[typeof exports]&&exports&&!exports.nodeType&&exports,qn=zn[typeof module]&&module&&!module.nodeType&&module,Pn=zn[typeof self]&&self&&self.Object&&self,Kn=zn[typeof window]&&window&&window.Object&&window,Vn=qn&&qn.exports===Mn&&Mn,Zn=Mn&&qn&&"object"==typeof global&&global&&global.Object&&global||Kn!==(this&&this.window)&&Kn||Pn||this,Yn=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Zn._=Yn,define(function(){return Yn})):Mn&&qn?Vn?(qn.exports=Yn)._=Yn:Mn._=Yn:Zn._=Yn}.call(this),function(Q,X,w){"use strict";function I(b){return function(){var c,a=arguments[0];for(c="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.4.7/"+(b?b+"/":"")+a,a=1;a<arguments.length;a++){c=c+(1==a?"?":"&")+"p"+(a-1)+"=";var e,d=encodeURIComponent;e=arguments[a],e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e,c+=d(e)}return Error(c)}}function Da(b){if(null==b||Za(b))return!1;var a="length"in Object(b)&&b.length;return b.nodeType===pa&&a?!0:G(b)||J(b)||0===a||"number"==typeof a&&a>0&&a-1 in b}function m(b,a,c){var d,e;if(b)if(x(b))for(d in b)"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d,b);else if(J(b)||Da(b)){var f="object"!=typeof b;for(d=0,e=b.length;e>d;d++)(f||d in b)&&a.call(c,b[d],d,b)}else if(b.forEach&&b.forEach!==m)b.forEach(a,c,b);else if(mc(b))for(d in b)a.call(c,b[d],d,b);else if("function"==typeof b.hasOwnProperty)for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d,b);else for(d in b)ta.call(b,d)&&a.call(c,b[d],d,b);return b}function nc(b,a,c){for(var d=Object.keys(b).sort(),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function oc(b){return function(a,c){b(c,a)}}function Ud(){return++nb}function pc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function Mb(b,a,c){for(var d=b.$$hashKey,e=0,f=a.length;f>e;++e){var h=a[e];if(C(h)||x(h))for(var g=Object.keys(h),l=0,k=g.length;k>l;l++){var n=g[l],p=h[n];c&&C(p)?ea(p)?b[n]=new Date(p.valueOf()):Oa(p)?b[n]=new RegExp(p):(C(b[n])||(b[n]=J(p)?[]:{}),Mb(b[n],[p],!0)):b[n]=p}}return pc(b,d),b}function P(b){return Mb(b,ua.call(arguments,1),!1)}function Vd(b){return Mb(b,ua.call(arguments,1),!0)}function Y(b){return parseInt(b,10)}function Nb(b,a){return P(Object.create(b),a)}function y(){}function $a(b){return b}function qa(b){return function(){return b}}function qc(b){return x(b.toString)&&b.toString!==Object.prototype.toString}function v(b){return"undefined"==typeof b}function A(b){return"undefined"!=typeof b}function C(b){return null!==b&&"object"==typeof b}function mc(b){return null!==b&&"object"==typeof b&&!rc(b)}function G(b){return"string"==typeof b}function V(b){return"number"==typeof b}function ea(b){return"[object Date]"===va.call(b)}function x(b){return"function"==typeof b}function Oa(b){return"[object RegExp]"===va.call(b)}function Za(b){return b&&b.window===b}function ab(b){return b&&b.$evalAsync&&b.$watch}function bb(b){return"boolean"==typeof b}function sc(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function Wd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=!0;return a}function wa(b){return F(b.nodeName||b[0]&&b[0].nodeName)}function cb(b,a){var c=b.indexOf(a);return c>=0&&b.splice(c,1),c}function ha(b,a,c,d){if(Za(b)||ab(b))throw Ea("cpws");if(tc.test(va.call(a)))throw Ea("cpta");if(a){if(b===a)throw Ea("cpi");c=c||[],d=d||[],C(b)&&(c.push(b),d.push(a));var e;if(J(b))for(e=a.length=0;e<b.length;e++)a.push(ha(b[e],null,c,d));else{var f=a.$$hashKey;if(J(a)?a.length=0:m(a,function(b,c){delete a[c]}),mc(b))for(e in b)a[e]=ha(b[e],null,c,d);else if(b&&"function"==typeof b.hasOwnProperty)for(e in b)b.hasOwnProperty(e)&&(a[e]=ha(b[e],null,c,d));else for(e in b)ta.call(b,e)&&(a[e]=ha(b[e],null,c,d));pc(a,f)}}else if(a=b,C(b)){if(c&&-1!==(f=c.indexOf(b)))return d[f];if(J(b))return ha(b,[],c,d);if(tc.test(va.call(b)))a=new b.constructor(b);else if(ea(b))a=new Date(b.getTime());else if(Oa(b))a=new RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex;else{if(!x(b.cloneNode))return e=Object.create(rc(b)),ha(b,e,c,d);a=b.cloneNode(!0)}d&&(c.push(b),d.push(a))}return a}function ja(b,a){if(J(b)){a=a||[];for(var c=0,d=b.length;d>c;c++)a[c]=b[c]}else if(C(b))for(c in a=a||{},b)("$"!==c.charAt(0)||"$"!==c.charAt(1))&&(a[c]=b[c]);return a||b}function ka(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var d,c=typeof b;if(c==typeof a&&"object"==c){if(!J(b)){if(ea(b))return ea(a)?ka(b.getTime(),a.getTime()):!1;if(Oa(b))return Oa(a)?b.toString()==a.toString():!1;if(ab(b)||ab(a)||Za(b)||Za(a)||J(a)||ea(a)||Oa(a))return!1;c=fa();for(d in b)if("$"!==d.charAt(0)&&!x(b[d])){if(!ka(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!(d in c)&&"$"!==d.charAt(0)&&A(a[d])&&!x(a[d]))return!1;return!0}if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;c>d;d++)if(!ka(b[d],a[d]))return!1;return!0}}return!1}function db(b,a,c){return b.concat(ua.call(a,c))}function uc(b,a){var c=2<arguments.length?ua.call(arguments,2):[];return!x(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,db(c,arguments,0)):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Xd(b,a){var c=a;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?c=w:Za(a)?c="$WINDOW":a&&X===a?c="$DOCUMENT":ab(a)&&(c="$SCOPE"),c}function eb(b,a){return"undefined"==typeof b?w:(V(a)||(a=a?2:null),JSON.stringify(b,Xd,a))}function vc(b){return G(b)?JSON.parse(b):b}function wc(b,a){var c=Date.parse("Jan 01, 1970 00:00:00 "+b)/6e4;return isNaN(c)?a:c}function Ob(b,a,c){c=c?-1:1;var d=wc(a,b.getTimezoneOffset());return a=b,b=c*(d-b.getTimezoneOffset()),a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function xa(b){b=B(b).clone();try{b.empty()}catch(a){}var c=B("<div>").append(b).html();try{return b[0].nodeType===Pa?F(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+F(b)})}catch(d){return F(c)}}function xc(b){try{return decodeURIComponent(b)}catch(a){}}function yc(b){var a={};return m((b||"").split("&"),function(b){var d,e,f;b&&(e=b=b.replace(/\+/g,"%20"),d=b.indexOf("="),-1!==d&&(e=b.substring(0,d),f=b.substring(d+1)),e=xc(e),A(e)&&(f=A(f)?xc(f):!0,ta.call(a,e)?J(a[e])?a[e].push(f):a[e]=[a[e],f]:a[e]=f))}),a}function Pb(b){var a=[];return m(b,function(b,d){J(b)?m(b,function(b){a.push(la(d,!0)+(!0===b?"":"="+la(b,!0)))}):a.push(la(d,!0)+(!0===b?"":"="+la(b,!0)))}),a.length?a.join("&"):""}function ob(b){return la(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function la(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,a?"%20":"+")}function Yd(b,a){var c,d,e=Qa.length;for(d=0;e>d;++d)if(c=Qa[d]+a,G(c=b.getAttribute(c)))return c;return null}function Zd(b,a){var c,d,e={};m(Qa,function(a){a+="app",!c&&b.hasAttribute&&b.hasAttribute(a)&&(c=b,d=b.getAttribute(a))}),m(Qa,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))}),c&&(e.strictDi=null!==Yd(c,"strict-di"),a(c,d?[d]:[],e))}function zc(b,a,c){C(c)||(c={}),c=P({strictDi:!1},c);var d=function(){if(b=B(b),b.injector()){var d=b[0]===X?"document":xa(b);throw Ea("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"))}return a=a||[],a.unshift(["$provide",function(a){a.value("$rootElement",b)}]),c.debugInfoEnabled&&a.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),a.unshift("ng"),d=fb(a,c.strictDi),d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),d},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;return Q&&e.test(Q.name)&&(c.debugInfoEnabled=!0,Q.name=Q.name.replace(e,"")),Q&&!f.test(Q.name)?d():(Q.name=Q.name.replace(f,""),da.resumeBootstrap=function(b){return m(b,function(b){a.push(b)}),d()},void(x(da.resumeDeferredBootstrap)&&da.resumeDeferredBootstrap()))}function $d(){Q.name="NG_ENABLE_DEBUG_INFO!"+Q.name,Q.location.reload()}function ae(b){if(b=da.element(b).injector(),!b)throw Ea("test");return b.get("$$testability")}function Ac(b,a){return a=a||"_",b.replace(be,function(b,d){return(d?a:"")+b.toLowerCase()})}function ce(){var b;if(!Bc){var a=pb();(ra=v(a)?Q.jQuery:a?Q[a]:w)&&ra.fn.on?(B=ra,P(ra.fn,{scope:Ra.scope,isolateScope:Ra.isolateScope,controller:Ra.controller,injector:Ra.injector,inheritedData:Ra.inheritedData}),b=ra.cleanData,ra.cleanData=function(a){var d;if(Qb)Qb=!1;else for(var f,e=0;null!=(f=a[e]);e++)(d=ra._data(f,"events"))&&d.$destroy&&ra(f).triggerHandler("$destroy");b(a)}):B=R,da.element=B,Bc=!0}}function qb(b,a,c){if(!b)throw Ea("areq",a||"?",c||"required");return b}function Sa(b,a,c){return c&&J(b)&&(b=b[b.length-1]),qb(x(b),a,"not a function, got "+(b&&"object"==typeof b?b.constructor.name||"Object":typeof b)),b}function Ta(b,a){if("hasOwnProperty"===b)throw Ea("badname",a)}function Cc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,h=0;f>h;h++)d=a[h],b&&(b=(e=b)[d]);return!c&&x(b)?uc(e,b):b}function rb(b){for(var d,a=b[0],c=b[b.length-1],e=1;a!==c&&(a=a.nextSibling);e++)(d||b[e]!==a)&&(d||(d=B(ua.call(b,0,e))),d.push(a));return d||b}function fa(){
return Object.create(null)}function de(b){function a(a,b,c){return a[b]||(a[b]=c())}var c=I("$injector"),d=I("ng");return b=a(b,"angular",Object),b.$$minErr=b.$$minErr||I,a(b,"module",function(){var b={};return function(f,h,g){if("hasOwnProperty"===f)throw d("badname","module");return h&&b.hasOwnProperty(f)&&(b[f]=null),a(b,f,function(){function a(b,c,e,f){return f||(f=d),function(){return f[e||"push"]([b,c,arguments]),E}}function b(a,c){return function(b,e){return e&&x(e)&&(e.$$moduleName=f),d.push([a,c,arguments]),E}}if(!h)throw c("nomod",f);var d=[],e=[],r=[],t=a("$injector","invoke","push",e),E={_invokeQueue:d,_configBlocks:e,_runBlocks:r,requires:h,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:t,run:function(a){return r.push(a),this}};return g&&t(g),E})}})}function ee(b){P(b,{bootstrap:zc,copy:ha,extend:P,merge:Vd,equals:ka,element:B,forEach:m,injector:fb,noop:y,bind:uc,toJson:eb,fromJson:vc,identity:$a,isUndefined:v,isDefined:A,isString:G,isFunction:x,isObject:C,isNumber:V,isElement:sc,isArray:J,version:fe,isDate:ea,lowercase:F,uppercase:sb,callbacks:{counter:0},getTestability:ae,$$minErr:I,$$csp:Fa,reloadWithDebugInfo:$d}),(Rb=de(Q))("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:ge}),a.provider("$compile",Dc).directive({a:he,input:Ec,textarea:Ec,form:ie,script:je,select:ke,style:le,option:me,ngBind:ne,ngBindHtml:oe,ngBindTemplate:pe,ngClass:qe,ngClassEven:re,ngClassOdd:se,ngCloak:te,ngController:ue,ngForm:ve,ngHide:we,ngIf:xe,ngInclude:ye,ngInit:ze,ngNonBindable:Ae,ngPluralize:Be,ngRepeat:Ce,ngShow:De,ngStyle:Ee,ngSwitch:Fe,ngSwitchWhen:Ge,ngSwitchDefault:He,ngOptions:Ie,ngTransclude:Je,ngModel:Ke,ngList:Le,ngChange:Me,pattern:Fc,ngPattern:Fc,required:Gc,ngRequired:Gc,minlength:Hc,ngMinlength:Hc,maxlength:Ic,ngMaxlength:Ic,ngValue:Ne,ngModelOptions:Oe}).directive({ngInclude:Pe}).directive(tb).directive(Jc),a.provider({$anchorScroll:Qe,$animate:Re,$animateCss:Se,$$animateQueue:Te,$$AnimateRunner:Ue,$browser:Ve,$cacheFactory:We,$controller:Xe,$document:Ye,$exceptionHandler:Ze,$filter:Kc,$$forceReflow:$e,$interpolate:af,$interval:bf,$http:cf,$httpParamSerializer:df,$httpParamSerializerJQLike:ef,$httpBackend:ff,$xhrFactory:gf,$location:hf,$log:jf,$parse:kf,$rootScope:lf,$q:mf,$$q:nf,$sce:of,$sceDelegate:pf,$sniffer:qf,$templateCache:rf,$templateRequest:sf,$$testability:tf,$timeout:uf,$window:vf,$$rAF:wf,$$jqLite:xf,$$HashMap:yf,$$cookieReader:zf})}])}function gb(b){return b.replace(Af,function(a,b,d,e){return e?d.toUpperCase():d}).replace(Bf,"Moz$1")}function Lc(b){return b=b.nodeType,b===pa||!b||9===b}function Mc(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Sb.test(b)){for(c=c||e.appendChild(a.createElement("div")),d=(Cf.exec(b)||["",""])[1].toLowerCase(),d=ma[d]||ma._default,c.innerHTML=d[1]+b.replace(Df,"<$1></$2>")+d[2],d=d[0];d--;)c=c.lastChild;f=db(f,c.childNodes),c=e.firstChild,c.textContent=""}else f.push(a.createTextNode(b));return e.textContent="",e.innerHTML="",m(f,function(a){e.appendChild(a)}),e}function R(b){if(b instanceof R)return b;var a;if(G(b)&&(b=T(b),a=!0),!(this instanceof R)){if(a&&"<"!=b.charAt(0))throw Tb("nosel");return new R(b)}if(a){a=X;var c;b=(c=Ef.exec(b))?[a.createElement(c[1])]:(c=Mc(b,a))?c.childNodes:[]}Nc(this,b)}function Ub(b){return b.cloneNode(!0)}function ub(b,a){if(a||vb(b),b.querySelectorAll)for(var c=b.querySelectorAll("*"),d=0,e=c.length;e>d;d++)vb(c[d])}function Oc(b,a,c,d){if(A(d))throw Tb("offargs");var e=(d=wb(b))&&d.events,f=d&&d.handle;if(f)if(a)m(a.split(" "),function(a){if(A(c)){var d=e[a];if(cb(d||[],c),d&&0<d.length)return}b.removeEventListener(a,f,!1),delete e[a]});else for(a in e)"$destroy"!==a&&b.removeEventListener(a,f,!1),delete e[a]}function vb(b,a){var c=b.ng339,d=c&&hb[c];d&&(a?delete d.data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Oc(b)),delete hb[c],b.ng339=w))}function wb(b,a){var c=b.ng339,c=c&&hb[c];return a&&!c&&(b.ng339=c=++Ff,c=hb[c]={events:{},data:{},handle:w}),c}function Vb(b,a,c){if(Lc(b)){var d=A(c),e=!d&&a&&!C(a),f=!a;if(b=(b=wb(b,!e))&&b.data,d)b[a]=c;else{if(f)return b;if(e)return b&&b[a];P(b,a)}}}function xb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function yb(b,a){a&&b.setAttribute&&m(a.split(" "),function(a){b.setAttribute("class",T((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+T(a)+" "," ")))})}function zb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");m(a.split(" "),function(a){a=T(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),b.setAttribute("class",T(c))}}function Nc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;if("number"==typeof c&&a.window!==a){if(c)for(var d=0;c>d;d++)b[b.length++]=a[d]}else b[b.length++]=a}}function Pc(b,a){return Ab(b,"$"+(a||"ngController")+"Controller")}function Ab(b,a,c){for(9==b.nodeType&&(b=b.documentElement),a=J(a)?a:[a];b;){for(var d=0,e=a.length;e>d;d++)if(A(c=B.data(b,a[d])))return c;b=b.parentNode||11===b.nodeType&&b.host}}function Qc(b){for(ub(b,!0);b.firstChild;)b.removeChild(b.firstChild)}function Wb(b,a){a||ub(b);var c=b.parentNode;c&&c.removeChild(b)}function Gf(b,a){a=a||Q,"complete"===a.document.readyState?a.setTimeout(b):B(a).on("load",b)}function Rc(b,a){var c=Bb[a.toLowerCase()];return c&&Sc[wa(b)]&&c}function Hf(b,a){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=a[e||c.type],h=f?f.length:0;if(h){if(v(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped},h>1&&(f=ja(f));for(var l=0;h>l;l++)c.isImmediatePropagationStopped()||f[l].call(b,c)}};return c.elem=b,c}function xf(){this.$get=function(){return P(R,{hasClass:function(b,a){return b.attr&&(b=b[0]),xb(b,a)},addClass:function(b,a){return b.attr&&(b=b[0]),zb(b,a)},removeClass:function(b,a){return b.attr&&(b=b[0]),yb(b,a)}})}}function Ga(b,a){var c=b&&b.$$hashKey;return c?("function"==typeof c&&(c=b.$$hashKey()),c):(c=typeof b,c="function"==c||"object"==c&&null!==b?b.$$hashKey=c+":"+(a||Ud)():c+":"+b)}function Ua(b,a){if(a){var c=0;this.nextUid=function(){return++c}}m(b,this.put,this)}function If(b){return(b=b.toString().replace(Tc,"").match(Uc))?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function fb(b,a){function c(a){return function(b,c){return C(b)?void m(b,oc(a)):a(b,c)}}function d(a,b){if(Ta(a,"service"),(x(b)||J(b))&&(b=r.instantiate(b)),!b.$get)throw Ha("pget",a);return p[a+"Provider"]=b}function e(a,b){return function(){var c=E.invoke(b,this);if(v(c))throw Ha("undef",a);return c}}function f(a,b,c){return d(a,{$get:!1!==c?e(a,b):b})}function h(a){qb(v(a)||J(a),"modulesToLoad","not an array");var c,b=[];return m(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var e=a[b],f=r.get(e[0]);f[e[1]].apply(f,e[2])}}if(!n.get(a)){n.put(a,!0);try{G(a)?(c=Rb(a),b=b.concat(h(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):x(a)?b.push(r.invoke(a)):J(a)?b.push(r.invoke(a)):Sa(a,"module")}catch(e){throw J(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ha("modulerr",a,e.stack||e.message||e)}}}),b}function g(b,c){function d(a,e){if(b.hasOwnProperty(a)){if(b[a]===l)throw Ha("cdep",a+" <- "+k.join(" <- "));return b[a]}try{return k.unshift(a),b[a]=l,b[a]=c(a,e)}catch(f){throw b[a]===l&&delete b[a],f}finally{k.shift()}}function e(b,c,f,g){"string"==typeof f&&(g=f,f=null);var l,r,p,h=[],k=fb.$$annotate(b,a,g);for(r=0,l=k.length;l>r;r++){if(p=k[r],"string"!=typeof p)throw Ha("itkn",p);h.push(f&&f.hasOwnProperty(p)?f[p]:d(p,g))}return J(b)&&(b=b[l]),b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=Object.create((J(a)?a[a.length-1]:a).prototype||null);return a=e(a,d,b,c),C(a)||x(a)?a:d},get:d,annotate:fb.$$annotate,has:function(a){return p.hasOwnProperty(a+"Provider")||b.hasOwnProperty(a)}}}a=!0===a;var l={},k=[],n=new Ua([],!0),p={$provide:{provider:c(d),factory:c(f),service:c(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return f(a,qa(b),!1)}),constant:c(function(a,b){Ta(a,"constant"),p[a]=b,t[a]=b}),decorator:function(a,b){var c=r.get(a+"Provider"),d=c.$get;c.$get=function(){var a=E.invoke(d,c);return E.invoke(b,null,{$delegate:a})}}}},r=p.$injector=g(p,function(a,b){throw da.isString(b)&&k.push(b),Ha("unpr",k.join(" <- "))}),t={},E=t.$injector=g(t,function(a,b){var c=r.get(a+"Provider",b);return E.invoke(c.$get,c,w,a)});return m(h(b),function(a){a&&E.invoke(a)}),E}function Qe(){var b=!0;this.disableAutoScrolling=function(){b=!1},this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===wa(a)?(b=a,!0):void 0}),b}function f(b){if(b){b.scrollIntoView();var c;c=h.yOffset,x(c)?c=c():sc(c)?(c=c[0],c="fixed"!==a.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):V(c)||(c=0),c&&(b=b.getBoundingClientRect().top,a.scrollBy(0,b-c))}else a.scrollTo(0,0)}function h(a){a=G(a)?a:c.hash();var b;a?(b=g.getElementById(a))?f(b):(b=e(g.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var g=a.document;return b&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||Gf(function(){d.$evalAsync(h)})}),h}]}function ib(b,a){return b||a?b?a?(J(b)&&(b=b.join(" ")),J(a)&&(a=a.join(" ")),b+" "+a):b:a:""}function Jf(b){G(b)&&(b=b.split(" "));var a=fa();return m(b,function(b){b.length&&(a[b]=!0)}),a}function Ia(b){return C(b)?b:{}}function Kf(b,a,c,d){function e(a){try{a.apply(null,ua.call(arguments,1))}finally{if(E--,0===E)for(;K.length;)try{K.pop()()}catch(b){c.error(b)}}}function f(){ia=null,h(),g()}function h(){a:{try{u=n.state;break a}catch(a){}u=void 0}u=v(u)?null:u,ka(u,L)&&(u=L),L=u}function g(){(z!==l.url()||q!==u)&&(z=l.url(),q=u,m(O,function(a){a(l.url(),u)}))}var l=this,k=b.location,n=b.history,p=b.setTimeout,r=b.clearTimeout,t={};l.isMock=!1;var E=0,K=[];l.$$completeOutstandingRequest=e,l.$$incOutstandingRequestCount=function(){E++},l.notifyWhenNoOutstandingRequests=function(a){0===E?a():K.push(a)};var u,q,z=k.href,N=a.find("base"),ia=null;h(),q=u,l.url=function(a,c,e){if(v(e)&&(e=null),k!==b.location&&(k=b.location),n!==b.history&&(n=b.history),a){var f=q===e;if(z===a&&(!d.history||f))return l;var g=z&&Ja(z)===Ja(a);return z=a,q=e,!d.history||g&&f?((!g||ia)&&(ia=a),c?k.replace(a):g?(c=k,e=a.indexOf("#"),e=-1===e?"":a.substr(e),c.hash=e):k.href=a,k.href!==a&&(ia=a)):(n[c?"replaceState":"pushState"](e,"",a),h(),q=u),l}return ia||k.href.replace(/%27/g,"'")},l.state=function(){return u};var O=[],H=!1,L=null;l.onUrlChange=function(a){return H||(d.history&&B(b).on("popstate",f),B(b).on("hashchange",f),H=!0),O.push(a),a},l.$$applicationDestroyed=function(){B(b).off("hashchange popstate",f)},l.$$checkUrlChange=g,l.baseHref=function(){var a=N.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""},l.defer=function(a,b){var c;return E++,c=p(function(){delete t[c],e(a)},b||0),t[c]=!0,c},l.defer.cancel=function(a){return t[a]?(delete t[a],r(a),e(y),!0):!1}}function Ve(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new Kf(b,d,a,c)}]}function We(){this.$get=function(){function b(b,d){function e(a){a!=p&&(r?r==a&&(r=a.n):r=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw I("$cacheFactory")("iid",b);var h=0,g=P({},d,{id:b}),l={},k=d&&d.capacity||Number.MAX_VALUE,n={},p=null,r=null;return a[b]={put:function(a,b){if(!v(b)){if(k<Number.MAX_VALUE){var c=n[a]||(n[a]={key:a});e(c)}return a in l||h++,l[a]=b,h>k&&this.remove(r.key),b}},get:function(a){if(k<Number.MAX_VALUE){var b=n[a];if(!b)return;e(b)}return l[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=n[a];if(!b)return;b==p&&(p=b.p),b==r&&(r=b.n),f(b.n,b.p),delete n[a]}delete l[a],h--},removeAll:function(){l={},h=0,n={},p=r=null},destroy:function(){n=g=l=null,delete a[b]},info:function(){return P({},g,{size:h})}}}var a={};return b.info=function(){var b={};return m(a,function(a,e){b[e]=a.info()}),b},b.get=function(b){return a[b]},b}}function rf(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function Dc(b,a){function c(a,b,c){var d=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,e={};return m(a,function(a,f){var g=a.match(d);if(!g)throw ga("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f}}),e}function d(a){var b=a.charAt(0);if(!b||b!==F(b))throw ga("baddir",a);if(a!==a.trim())throw ga("baddir",a)}var e={},f=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,h=/(([\w\-]+)(?:\:([^;]+))?;?)/,g=Wd("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,k=/^(on[a-z]+|formaction)$/;this.directive=function r(a,f){return Ta(a,"directive"),G(a)?(d(a),qb(f,"directiveFactory"),e.hasOwnProperty(a)||(e[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,d){var f=[];return m(e[a],function(e,g){try{var h=b.invoke(e);x(h)?h={compile:qa(h)}:!h.compile&&h.link&&(h.compile=qa(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||a,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA";var k=h,l=h,r=h.name,n={isolateScope:null,bindToController:null};if(C(l.scope)&&(!0===l.bindToController?(n.bindToController=c(l.scope,r,!0),n.isolateScope={}):n.isolateScope=c(l.scope,r,!1)),C(l.bindToController)&&(n.bindToController=c(l.bindToController,r,!0)),C(n.bindToController)){var S=l.controller,E=l.controllerAs;if(!S)throw ga("noctrl",r);var ca;a:if(E&&G(E))ca=E;else{if(G(S)){var m=Vc.exec(S);if(m){ca=m[3];break a}}ca=void 0}if(!ca)throw ga("noident",r)}var s=k.$$bindings=n;C(s.isolateScope)&&(h.$$isolateBindings=s.isolateScope),h.$$moduleName=e.$$moduleName,f.push(h)}catch(w){d(w)}}),f}])),e[a].push(f)):m(a,oc(r)),this},this.aHrefSanitizationWhitelist=function(b){return A(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(b){return A(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};var n=!0;this.debugInfoEnabled=function(a){return A(a)?(n=a,this):n},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,d,u,q,z,N,ia,O,H){function L(a,b){try{a.addClass(b)}catch(c){}}function W(a,b,c,d,e){a instanceof B||(a=B(a)),m(a,function(b,c){b.nodeType==Pa&&b.nodeValue.match(/\S+/)&&(a[c]=B(b).wrap("<span></span>").parent()[0])});var f=S(a,b,a,c,d,e);W.$$addScopeClass(a);var g=null;return function(b,c,d){qb(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,h=d.transcludeControllers;if(d=d.futureParentElement,e&&e.$$boundTransclude&&(e=e.$$boundTransclude),g||(g=(d=d&&d[0])&&"foreignobject"!==wa(d)&&d.toString().match(/SVG/)?"svg":"html"),d="html"!==g?B(Xb(g,B("<div>").append(a).html())):c?Ra.clone.call(a):a,h)for(var k in h)d.data("$"+k+"Controller",h[k].instance);return W.$$addScopeInfo(d,b),c&&c(d,b),f&&f(b,d,d,e),d}}function S(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,r,n,t,O;if(q)for(O=Array(c.length),r=0;r<h.length;r+=3)f=h[r],O[f]=c[f];else O=c;for(r=0,n=h.length;n>r;)k=O[h[r++]],c=h[r++],f=h[r++],c?(c.scope?(l=a.$new(),W.$$addScopeInfo(B(k),l),(t=c.$$destroyBindings)&&(c.$$destroyBindings=null,l.$on("$destroyed",t))):l=a,t=c.transcludeOnThisElement?ba(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ba(a,b):null,c(f,l,k,d,t,c)):f&&f(a,k.childNodes,w,e)}for(var k,l,r,n,q,h=[],t=0;t<a.length;t++)k=new Z,l=ca(a[t],[],k,0===t?d:w,e),(f=l.length?D(l,a[t],k,b,c,null,[],[],f):null)&&f.scope&&W.$$addScopeClass(k.$$element),k=f&&f.terminal||!(r=a[t].childNodes)||!r.length?null:S(r,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),(f||k)&&(h.push(t,f,k),n=!0,q=q||f),f=null;return n?g:null}function ba(a,b,c){return function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}}function ca(a,b,c,d,e){var k,g=c.$attr;switch(a.nodeType){case pa:na(b,ya(wa(a)),"E",d,e);for(var l,r,n,q=a.attributes,t=0,O=q&&q.length;O>t;t++){var K=!1,H=!1;l=q[t],k=l.name,r=T(l.value),l=ya(k),(n=ja.test(l))&&(k=k.replace(Wc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var S=l.replace(/(Start|End)$/,"");I(S)&&l===S+"Start"&&(K=k,H=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6)),l=ya(k.toLowerCase()),g[l]=k,(n||!c.hasOwnProperty(l))&&(c[l]=r,Rc(a,l)&&(c[l]=!0)),V(a,b,r,l,n),na(b,l,"A",d,e,K,H)}if(a=a.className,C(a)&&(a=a.animVal),G(a)&&""!==a)for(;k=h.exec(a);)l=ya(k[2]),na(b,l,"C",d,e)&&(c[l]=T(k[3])),a=a.substr(k.index+k[0].length);break;case Pa:if(11===Wa)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Pa;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);Ka(b,a.nodeValue);break;case 8:try{(k=f.exec(a.nodeValue))&&(l=ya(k[1]),na(b,l,"M",d,e)&&(c[l]=T(k[2])))}catch(E){}}return b.sort(M),b}function za(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ga("uterdir",b,c);a.nodeType==pa&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return B(d)}function s(a,b,c){return function(d,e,f,g,h){return e=za(e[0],b,c),a(d,e,f,g,h)}}function D(a,b,d,e,f,g,h,k,r){function n(a,b,c,d){a&&(c&&(a=s(a,c,d)),a.require=D.require,a.directiveName=y,(u===D||D.$$isolateScope)&&(a=$(a,{isolateScope:!0})),h.push(a)),b&&(c&&(b=s(b,c,d)),b.require=D.require,b.directiveName=y,(u===D||D.$$isolateScope)&&(b=$(b,{isolateScope:!0})),k.push(b))}function t(a,b,c,d){var e;if(G(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];if("^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance,e||(d="$"+b+"Controller",e=g?c.inheritedData(d):c.data(d)),!e&&!f)throw ga("ctreq",b,a)}else if(J(b))for(e=[],g=0,f=b.length;f>g;g++)e[g]=t(a,b[g],c,d);return e||null}function O(a,b,c,d,e,f){var h,g=fa();for(h in d){var k=d[h],l={$scope:k===u||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},r=k.controller;"@"==r&&(r=b[k.name]),l=q(r,l,!0,k.controllerAs),g[k.name]=l,ia||a.data("$"+k.name+"Controller",l.instance)}return g}function K(a,c,e,f,g,l){function r(a,b,c){var d;return ab(a)||(c=b,b=a,a=w),ia&&(d=ca),c||(c=ia?N.parent():N),g(a,b,d,c,za)}var n,q,H,E,ca,z,N;if(b===e?(f=d,N=d.$$element):(N=B(e),f=new Z(N,d)),u&&(E=c.$new(!0)),g&&(z=r,z.$$boundTransclude=g),ba&&(ca=O(N,f,z,ba,E,c)),u&&(W.$$addScopeInfo(N,E,!0,!(L&&(L===u||L===u.$$originalDirective))),W.$$addScopeClass(N,!0),E.$$isolateBindings=u.$$isolateBindings,Y(c,f,E,E.$$isolateBindings,u,E)),ca){var m,Va=u||S;Va&&ca[Va.name]&&(q=Va.$$bindings.bindToController,(H=ca[Va.name])&&H.identifier&&q&&(m=H,l.$$destroyBindings=Y(c,f,H.instance,q,Va)));for(n in ca){H=ca[n];var D=H();D!==H.instance&&(H.instance=D,N.data("$"+n+"Controller",D),H===m&&(l.$$destroyBindings(),l.$$destroyBindings=Y(c,f,D,q,Va)))}}for(n=0,l=h.length;l>n;n++)q=h[n],aa(q,q.isolateScope?E:c,N,f,q.require&&t(q.directiveName,q.require,N,ca),z);var za=c;for(u&&(u.template||null===u.templateUrl)&&(za=E),a&&a(za,e.childNodes,w,g),n=k.length-1;n>=0;n--)q=k[n],aa(q,q.isolateScope?E:c,N,f,q.require&&t(q.directiveName,q.require,N,ca),z)}r=r||{};for(var D,y,M,na,H=-Number.MAX_VALUE,S=r.newScopeDirective,ba=r.controllerDirectives,u=r.newIsolateScopeDirective,L=r.templateDirective,z=r.nonTlbTranscludeDirective,N=!1,m=!1,ia=r.hasElementTranscludeDirective,v=d.$$element=B(b),Ka=e,I=0,F=a.length;F>I;I++){D=a[I];var P=D.$$start,R=D.$$end;if(P&&(v=za(b,P,R)),M=w,H>D.priority)break;if((M=D.scope)&&(D.templateUrl||(C(M)?(Q("new/isolated scope",u||S,D,v),u=D):Q("new/isolated scope",u,D,v)),S=S||D),y=D.name,!D.templateUrl&&D.controller&&(M=D.controller,ba=ba||fa(),Q("'"+y+"' controller",ba[y],D,v),ba[y]=D),(M=D.transclude)&&(N=!0,D.$$tlb||(Q("transclusion",z,D,v),z=D),"element"==M?(ia=!0,H=D.priority,M=v,v=d.$$element=B(X.createComment(" "+y+": "+d[y]+" ")),b=v[0],U(f,ua.call(M,0),b),Ka=W(M,e,H,g&&g.name,{nonTlbTranscludeDirective:z})):(M=B(Ub(b)).contents(),v.empty(),Ka=W(M,e))),D.template)if(m=!0,Q("template",L,D,v),L=D,M=x(D.template)?D.template(v,d):D.template,M=ha(M),D.replace){if(g=D,M=Sb.test(M)?Xc(Xb(D.templateNamespace,T(M))):[],b=M[0],1!=M.length||b.nodeType!==pa)throw ga("tplrt",y,"");U(f,v,b),F={$attr:{}},M=ca(b,[],F);var Lf=a.splice(I+1,a.length-(I+1));u&&A(M),a=a.concat(M).concat(Lf),Yc(d,F),F=a.length}else v.html(M);if(D.templateUrl)m=!0,Q("template",L,D,v),L=D,D.replace&&(g=D),K=Mf(a.splice(I,a.length-I),v,d,f,N&&Ka,h,k,{controllerDirectives:ba,newScopeDirective:S!==D&&S,newIsolateScopeDirective:u,templateDirective:L,nonTlbTranscludeDirective:z}),F=a.length;else if(D.compile)try{na=D.compile(v,d,Ka),x(na)?n(null,na,P,R):na&&n(na.pre,na.post,P,R)}catch(V){c(V,xa(v))}D.terminal&&(K.terminal=!0,H=Math.max(H,D.priority))}return K.scope=S&&!0===S.scope,K.transcludeOnThisElement=N,K.templateOnThisElement=m,K.transclude=Ka,r.hasElementTranscludeDirective=ia,K}function A(a){for(var b=0,c=a.length;c>b;b++)a[b]=Nb(a[b],{$$isolateScope:!0})}function na(b,d,f,g,h,k,l){if(d===h)return null;if(h=null,e.hasOwnProperty(d)){var n;d=a.get(d+"Directive");for(var q=0,t=d.length;t>q;q++)try{n=d[q],(v(g)||g>n.priority)&&-1!=n.restrict.indexOf(f)&&(k&&(n=Nb(n,{$$start:k,$$end:l})),b.push(n),h=n)}catch(H){c(H)}}return h}function I(b){if(e.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,f=c.length;f>d;d++)if(b=c[d],b.multiElement)return!0;return!1}function Yc(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;m(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),m(b,function(b,f){"class"==f?(L(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function Mf(a,b,c,e,f,g,h,k){var r,n,l=[],q=b[0],t=a.shift(),H=Nb(t,{templateUrl:null,transclude:null,replace:null,$$originalDirective:t}),O=x(t.templateUrl)?t.templateUrl(b,c):t.templateUrl,E=t.templateNamespace;return b.empty(),d(O).then(function(d){var K,u;if(d=ha(d),t.replace){if(d=Sb.test(d)?Xc(Xb(E,T(d))):[],K=d[0],1!=d.length||K.nodeType!==pa)throw ga("tplrt",t.name,O);d={$attr:{}},U(e,b,K);var z=ca(K,[],d);C(t.scope)&&A(z),a=z.concat(a),Yc(c,d)}else K=q,b.html(d);for(a.unshift(H),r=D(a,K,c,f,b,t,g,h,k),m(e,function(a,c){a==K&&(e[c]=b[0])}),n=S(b[0].childNodes,f);l.length;){d=l.shift(),u=l.shift();var N=l.shift(),W=l.shift(),z=b[0];if(!d.$$destroyed){if(u!==q){var za=u.className;k.hasElementTranscludeDirective&&t.replace||(z=Ub(K)),U(N,B(u),z),L(B(z),za)}u=r.transcludeOnThisElement?ba(d,r.transclude,W):W,r(n,d,z,e,u,r)}}l=null}),function(a,b,c,d,e){a=e,b.$$destroyed||(l?l.push(b,c,d,a):(r.transcludeOnThisElement&&(a=ba(b,r.transclude,e)),r(n,b,c,d,a,r)))}}function M(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Q(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ga("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,xa(d))}function Ka(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;return b&&W.$$addBindingClass(a),function(a,c){var e=c.parent();b||W.$$addBindingClass(e),W.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){c[0].nodeValue=a})}}})}function Xb(a,b){switch(a=F(a||"html")){case"svg":case"math":var c=X.createElement("div");return c.innerHTML="<"+a+">"+b+"</"+a+">",c.childNodes[0].childNodes;default:return b}}function R(a,b){if("srcdoc"==b)return ia.HTML;var c=wa(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?ia.RESOURCE_URL:void 0}function V(a,c,d,e,f){var h=R(a,e);f=g[e]||f;var l=b(d,!0,h,f);if(l){if("multiple"===e&&"select"===wa(a))throw ga("selmulti",xa(a));c.push({priority:100,compile:function(){return{pre:function(a,c,g){if(c=g.$$observers||(g.$$observers=fa()),k.test(e))throw ga("nodomevents");var r=g[e];r!==d&&(l=r&&b(r,!0,h,f),d=r),l&&(g[e]=l(a),(c[e]||(c[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||a).$watch(l,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function U(a,b,c){var g,h,d=b[0],e=b.length,f=d.parentNode;if(a)for(g=0,h=a.length;h>g;g++)if(a[g]==d){a[g++]=c,h=g+e-1;for(var k=a.length;k>g;g++,h++)k>h?a[g]=a[h]:delete a[g];a.length-=e-1,a.context===d&&(a.context=c);break}for(f&&f.replaceChild(c,d),a=X.createDocumentFragment(),a.appendChild(d),B.hasData(d)&&(B(c).data(B(d).data()),ra?(Qb=!0,ra.cleanData([d])):delete B.cache[d[B.expando]]),d=1,e=b.length;e>d;d++)f=b[d],B(f).remove(),a.appendChild(f),delete b[d];b[0]=c,b.length=1}function $(a,b){return P(function(){return a.apply(null,arguments)},a,b)}function aa(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,xa(d))}}function Y(a,c,d,e,f,g){var h;return m(e,function(e,g){var r,n,q,K,k=e.attrName,l=e.optional;switch(e.mode){case"@":l||ta.call(c,k)||(d[g]=c[k]=void 0),c.$observe(k,function(a){G(a)&&(d[g]=a)}),c.$$observers[k].$$scope=a,G(c[k])&&(d[g]=b(c[k])(a));break;case"=":if(!ta.call(c,k)){if(l)break;c[k]=void 0}if(l&&!c[k])break;n=u(c[k]),K=n.literal?ka:function(a,b){return a===b||a!==a&&b!==b},q=n.assign||function(){throw r=d[g]=n(a),ga("nonassign",c[k],f.name)},r=d[g]=n(a),l=function(b){return K(b,d[g])||(K(b,r)?q(a,b=d[g]):d[g]=b),r=b},l.$stateful=!0,l=e.collection?a.$watchCollection(c[k],l):a.$watch(u(c[k],l),null,n.literal),h=h||[],h.push(l);break;case"&":if(n=c.hasOwnProperty(k)?u(c[k]):y,n===y&&l)break;d[g]=function(b){return n(a,b)}}}),e=h?function(){for(var a=0,b=h.length;b>a;++a)h[a]()}:y,g&&e!==y?(g.$on("$destroy",e),y):e}var Z=function(a,b){if(b){var d,e,f,c=Object.keys(b);for(d=0,e=c.length;e>d;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a};Z.prototype={$normalize:ya,$addClass:function(a){a&&0<a.length&&O.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&O.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Zc(a,b);c&&c.length&&O.addClass(this.$$element,c),(c=Zc(b,a))&&c.length&&O.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=Rc(this.$$element[0],a),g=$c[a],h=a;if(f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Ac(a,"-")),f=wa(this.$$element),"a"===f&&"href"===a||"img"===f&&"src"===a)this[a]=b=H(b,"src"===a);else if("img"===f&&"srcset"===a){for(var f="",g=T(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;k>l;l++)var r=2*l,f=f+H(T(g[r]),!0),f=f+(" "+T(g[r+1]));g=T(g[2*l]).split(/\s/),f+=H(T(g[0]),!0),2===g.length&&(f+=" "+T(g[1])),this[a]=b=f}!1!==d&&(null===b||v(b)?this.$$element.removeAttr(e):this.$$element.attr(e,b)),(a=this.$$observers)&&m(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=fa()),e=d[a]||(d[a]=[]);return e.push(b),z.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||v(c[a])||b(c[a])}),function(){cb(e,b)}}};var da=b.startSymbol(),ea=b.endSymbol(),ha="{{"==da||"}}"==ea?$a:function(a){return a.replace(/\{\{/g,da).replace(/}}/g,ea)},ja=/^ngAttr[A-Z]/;return W.$$addBindingInfo=n?function(a,b){var c=a.data("$binding")||[];J(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:y,W.$$addBindingClass=n?function(a){L(a,"ng-binding")}:y,W.$$addScopeInfo=n?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:y,W.$$addScopeClass=n?function(a,b){L(a,b?"ng-isolate-scope":"ng-scope")}:y,W}]}function ya(b){return gb(b.replace(Wc,""))}function Zc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var h=d[f],g=0;g<e.length;g++)if(h==e[g])continue a;c+=(0<c.length?" ":"")+h}return c}function Xc(b){b=B(b);var a=b.length;if(1>=a)return b;for(;a--;)8===b[a].nodeType&&Nf.call(b,a,1);return b}function Xe(){var b={},a=!1;this.register=function(a,d){Ta(a,"controller"),C(a)?P(b,a):b[a]=d},this.allowGlobals=function(){a=!0},this.$get=["$injector","$window",function(c,d){function e(a,b,c,d){if(!a||!C(a.$scope))throw I("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,h,g,l){var k,n,p;if(g=!0===g,l&&G(l)&&(p=l),G(f)){if(l=f.match(Vc),!l)throw Of("ctrlfmt",f);n=l[1],p=p||l[3],f=b.hasOwnProperty(n)?b[n]:Cc(h.$scope,n,!0)||(a?Cc(d,n,!0):w),Sa(f,n,!0)}return g?(g=(J(f)?f[f.length-1]:f).prototype,k=Object.create(g||null),p&&e(h,p,k,n||f.name),P(function(){var a=c.invoke(f,k,h,n);return a!==k&&(C(a)||x(a))&&(k=a,p&&e(h,p,k,n||f.name)),k},{instance:k,identifier:p})):(k=c.instantiate(f,h,n),p&&e(h,p,k,n||f.name),k)}}]}function Ye(){this.$get=["$window",function(b){return B(b.document)}]}function Ze(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Yb(b){return C(b)?ea(b)?b.toISOString():eb(b):b}function df(){this.$get=function(){return function(b){if(!b)return"";var a=[];return nc(b,function(b,d){null===b||v(b)||(J(b)?m(b,function(b,c){a.push(la(d)+"="+la(Yb(b)))}):a.push(la(d)+"="+la(Yb(b))))}),a.join("&")}}}function ef(){this.$get=function(){return function(b){function a(b,e,f){null===b||v(b)||(J(b)?m(b,function(b,c){a(b,e+"["+(C(b)?c:"")+"]")}):C(b)&&!ea(b)?nc(b,function(b,c){a(b,e+(f?"":"[")+c+(f?"":"]"))}):c.push(la(e)+"="+la(Yb(b))))}if(!b)return"";var c=[];return a(b,"",!0),c.join("&")}}}function Zb(b,a){if(G(b)){var c=b.replace(Pf,"").trim();if(c){var d=a("Content-Type");(d=d&&0===d.indexOf(ad))||(d=(d=c.match(Qf))&&Rf[d[0]].test(c)),d&&(b=vc(c))}}return b}function bd(b){var c,a=fa();return G(b)?m(b.split("\n"),function(b){c=b.indexOf(":");var e=F(T(b.substr(0,c)));b=T(b.substr(c+1)),e&&(a[e]=a[e]?a[e]+", "+b:b)}):C(b)&&m(b,function(b,c){var f=F(c),h=T(b);f&&(a[f]=a[f]?a[f]+", "+h:h)}),a}function cd(b){var a;return function(c){return a||(a=bd(b)),c?(c=a[F(c)],void 0===c&&(c=null),c):a}}function dd(b,a,c,d){return x(d)?d(b,a,c):(m(d,function(d){b=d(b,a,c)}),b)}function cf(){var b=this.defaults={transformResponse:[Zb],transformRequest:[function(a){return C(a)&&"[object File]"!==va.call(a)&&"[object Blob]"!==va.call(a)&&"[object FormData]"!==va.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ja($b),put:ja($b),patch:ja($b)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},a=!1;this.useApplyAsync=function(b){return A(b)?(a=!!b,this):a};var c=!0;this.useLegacyPromiseExtensions=function(a){return A(a)?(c=!!a,this):c};var d=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(e,f,h,g,l,k){function n(a){function d(a){var b=P({},a);return b.data=a.data?dd(a.data,a.headers,a.status,f.transformResponse):a.data,a=a.status,a>=200&&300>a?b:l.reject(b)}function e(a,b){var c,d={};return m(a,function(a,e){x(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a}),d}if(!da.isObject(a))throw I("$http")("badreq",a);var f=P({method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse,paramSerializer:b.paramSerializer},a);f.headers=function(a){var f,g,h,c=b.headers,d=P({},a.headers),c=P({},c.common,c[F(a.method)]);a:for(f in c){g=F(f);for(h in d)if(F(h)===g)continue a;d[f]=c[f]}return e(d,ja(a))}(a),f.method=sb(f.method),f.paramSerializer=G(f.paramSerializer)?k.get(f.paramSerializer):f.paramSerializer;var g=[function(a){var c=a.headers,e=dd(a.data,cd(c),w,a.transformRequest);return v(e)&&m(c,function(a,b){"content-type"===F(b)&&delete c[b];
}),v(a.withCredentials)&&!v(b.withCredentials)&&(a.withCredentials=b.withCredentials),p(a,e).then(d,d)},w],h=l.when(f);for(m(E,function(a){(a.request||a.requestError)&&g.unshift(a.request,a.requestError),(a.response||a.responseError)&&g.push(a.response,a.responseError)});g.length;){a=g.shift();var r=g.shift(),h=h.then(a,r)}return c?(h.success=function(a){return Sa(a,"fn"),h.then(function(b){a(b.data,b.status,b.headers,f)}),h},h.error=function(a){return Sa(a,"fn"),h.then(null,function(b){a(b.data,b.status,b.headers,f)}),h}):(h.success=ed("success"),h.error=ed("error")),h}function p(c,d){function h(b,c,d,e){function f(){k(c,b,d,e)}L&&(b>=200&&300>b?L.put(ba,[b,c,bd(d),e]):L.remove(ba)),a?g.$applyAsync(f):(f(),g.$$phase||g.$apply())}function k(a,b,d,e){b=b>=-1?b:0,(b>=200&&300>b?O.resolve:O.reject)({data:a,status:b,headers:cd(d),config:c,statusText:e})}function p(a){k(a.data,a.status,ja(a.headers()),a.statusText)}function E(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var L,m,O=l.defer(),H=O.promise,S=c.headers,ba=r(c.url,c.paramSerializer(c.params));return n.pendingRequests.push(c),H.then(E,E),!c.cache&&!b.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(L=C(c.cache)?c.cache:C(b.cache)?b.cache:t),L&&(m=L.get(ba),A(m)?m&&x(m.then)?m.then(p,p):J(m)?k(m[1],m[0],ja(m[2]),m[3]):k(m,200,{},"OK"):L.put(ba,H)),v(m)&&((m=fd(c.url)?f()[c.xsrfCookieName||b.xsrfCookieName]:w)&&(S[c.xsrfHeaderName||b.xsrfHeaderName]=m),e(c.method,ba,d,h,S,c.timeout,c.withCredentials,c.responseType)),H}function r(a,b){return 0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b),a}var t=h("$http");b.paramSerializer=G(b.paramSerializer)?k.get(b.paramSerializer):b.paramSerializer;var E=[];return m(d,function(a){E.unshift(G(a)?k.get(a):k.invoke(a))}),n.pendingRequests=[],function(a){m(arguments,function(a){n[a]=function(b,c){return n(P({},c||{},{method:a,url:b}))}})}("get","delete","head","jsonp"),function(a){m(arguments,function(a){n[a]=function(b,c,d){return n(P({},d||{},{method:a,url:b,data:c}))}})}("post","put","patch"),n.defaults=b,n}]}function gf(){this.$get=function(){return function(){return new Q.XMLHttpRequest}}}function ff(){this.$get=["$browser","$window","$document","$xhrFactory",function(b,a,c,d){return Sf(b,d,b.defer,a.angular.callbacks,c[0])}]}function Sf(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),n=null;return f.type="text/javascript",f.src=a,f.async=!0,n=function(a){f.removeEventListener("load",n,!1),f.removeEventListener("error",n,!1),e.body.removeChild(f),f=null;var h=-1,t="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),t=a.type,h="error"===a.type?404:200),c&&c(h,t)},f.addEventListener("load",n,!1),f.addEventListener("error",n,!1),e.body.appendChild(f),n}return function(e,g,l,k,n,p,r,t){function E(){q&&q(),z&&z.abort()}function K(a,d,e,f,g){A(s)&&c.cancel(s),q=z=null,a(d,e,f,g),b.$$completeOutstandingRequest(y)}if(b.$$incOutstandingRequestCount(),g=g||b.url(),"jsonp"==F(e)){var u="_"+(d.counter++).toString(36);d[u]=function(a){d[u].data=a,d[u].called=!0};var q=f(g.replace("JSON_CALLBACK","angular.callbacks."+u),u,function(a,b){K(k,a,d[u].data,"",b),d[u]=y})}else{var z=a(e,g);if(z.open(e,g,!0),m(n,function(a,b){A(a)&&z.setRequestHeader(b,a)}),z.onload=function(){var a=z.statusText||"",b="response"in z?z.response:z.responseText,c=1223===z.status?204:z.status;0===c&&(c=b?200:"file"==Aa(g).protocol?404:0),K(k,c,b,z.getAllResponseHeaders(),a)},e=function(){K(k,-1,null,null,"")},z.onerror=e,z.onabort=e,r&&(z.withCredentials=!0),t)try{z.responseType=t}catch(N){if("json"!==t)throw N}z.send(v(l)?null:l)}if(p>0)var s=c(E,p);else p&&x(p.then)&&p.then(E)}}function af(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b},this.endSymbol=function(b){return b?(a=b,this):a},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function h(c){return c.replace(n,b).replace(p,a)}function g(f,g,n,p){function u(a){try{var b=a;a=n?e.getTrusted(n,b):e.valueOf(b);var c;if(p&&!A(a))c=a;else if(null==a)c="";else{switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=eb(a)}c=a}return c}catch(g){d(La.interr(f,g))}}p=!!p;for(var q,m,N=0,s=[],O=[],H=f.length,L=[],W=[];H>N;){if(-1==(q=f.indexOf(b,N))||-1==(m=f.indexOf(a,q+l))){N!==H&&L.push(h(f.substring(N)));break}N!==q&&L.push(h(f.substring(N,q))),N=f.substring(q+l,m),s.push(N),O.push(c(N,u)),N=m+k,W.push(L.length),L.push("")}if(n&&1<L.length&&La.throwNoconcat(f),!g||s.length){var S=function(a){for(var b=0,c=s.length;c>b;b++){if(p&&v(a[b]))return;L[W[b]]=a[b]}return L.join("")};return P(function(a){var b=0,c=s.length,e=Array(c);try{for(;c>b;b++)e[b]=O[b](a);return S(e)}catch(g){d(La.interr(f,g))}},{exp:f,expressions:s,$$watchDelegate:function(a,b){var c;return a.$watchGroup(O,function(d,e){var f=S(d);x(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var l=b.length,k=a.length,n=new RegExp(b.replace(/./g,f),"g"),p=new RegExp(a.replace(/./g,f),"g");return g.startSymbol=function(){return b},g.endSymbol=function(){return a},g}]}function bf(){this.$get=["$rootScope","$window","$q","$$q",function(b,a,c,d){function e(e,g,l,k){var n=4<arguments.length,p=n?ua.call(arguments,4):[],r=a.setInterval,t=a.clearInterval,E=0,K=A(k)&&!k,u=(K?d:c).defer(),q=u.promise;return l=A(l)?l:0,q.then(null,null,n?function(){e.apply(null,p)}:e),q.$$intervalId=r(function(){u.notify(E++),l>0&&E>=l&&(u.resolve(E),t(q.$$intervalId),delete f[q.$$intervalId]),K||b.$apply()},g),f[q.$$intervalId]=u,q}var f={};return e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1},e}]}function ac(b){b=b.split("/");for(var a=b.length;a--;)b[a]=ob(b[a]);return b.join("/")}function gd(b,a){var c=Aa(b);a.$$protocol=c.protocol,a.$$host=c.hostname,a.$$port=Y(c.port)||Tf[c.protocol]||null}function hd(b,a){var c="/"!==b.charAt(0);c&&(b="/"+b);var d=Aa(b);a.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),a.$$search=yc(d.search),a.$$hash=decodeURIComponent(d.hash),a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function sa(b,a){return 0===a.indexOf(b)?a.substr(b.length):void 0}function Ja(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Cb(b){return b.replace(/(#.+)|#$/,"$1")}function bc(b,a,c){this.$$html5=!0,c=c||"",gd(b,this),this.$$parse=function(b){var c=sa(a,b);if(!G(c))throw Db("ipthprfx",b,a);hd(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var b=Pb(this.$$search),c=this.$$hash?"#"+ob(this.$$hash):"";this.$$url=ac(this.$$path)+(b?"?"+b:"")+c,this.$$absUrl=a+this.$$url.substr(1)},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,h;return A(f=sa(b,d))?(h=f,h=A(f=sa(c,f))?a+(sa("/",f)||f):b+h):A(f=sa(a,d))?h=a+f:a==d+"/"&&(h=a),h&&this.$$parse(h),!!h}}function cc(b,a,c){gd(b,this),this.$$parse=function(d){var f,e=sa(b,d)||sa(a,d);v(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",v(e)&&(b=d,this.replace())):(f=sa(c,e),v(f)&&(f=e)),hd(f,this),d=this.$$path;var e=b,h=/^\/[A-Z]:(\/.*)/;0===f.indexOf(e)&&(f=f.replace(e,"")),h.exec(f)||(d=(f=h.exec(d))?f[1]:d),this.$$path=d,this.$$compose()},this.$$compose=function(){var a=Pb(this.$$search),e=this.$$hash?"#"+ob(this.$$hash):"";this.$$url=ac(this.$$path)+(a?"?"+a:"")+e,this.$$absUrl=b+(this.$$url?c+this.$$url:"")},this.$$parseLinkUrl=function(a,c){return Ja(b)==Ja(a)?(this.$$parse(a),!0):!1}}function id(b,a,c){this.$$html5=!0,cc.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,h;return b==Ja(d)?f=d:(h=sa(a,d))?f=b+c+h:a===d+"/"&&(f=a),f&&this.$$parse(f),!!f},this.$$compose=function(){var a=Pb(this.$$search),e=this.$$hash?"#"+ob(this.$$hash):"";this.$$url=ac(this.$$path)+(a?"?"+a:"")+e,this.$$absUrl=b+c+this.$$url}}function Eb(b){return function(){return this[b]}}function jd(b,a){return function(c){return v(c)?this[b]:(this[b]=a(c),this.$$compose(),this)}}function hf(){var b="",a={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(a){return A(a)?(b=a,this):b},this.html5Mode=function(b){return bb(b)?(a.enabled=b,this):C(b)?(bb(b.enabled)&&(a.enabled=b.enabled),bb(b.requireBase)&&(a.requireBase=b.requireBase),bb(b.rewriteLinks)&&(a.rewriteLinks=b.rewriteLinks),this):a},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,h){function g(a,b,c){var e=k.url(),f=k.$$state;try{d.url(a,b,c),k.$$state=d.state()}catch(g){throw k.url(e),k.$$state=f,g}}function l(a,b){c.$broadcast("$locationChangeSuccess",k.absUrl(),a,k.$$state,b)}var k,n;n=d.baseHref();var r,p=d.url();if(a.enabled){if(!n&&a.requireBase)throw Db("nobase");r=p.substring(0,p.indexOf("/",p.indexOf("//")+2))+(n||"/"),n=e.history?bc:id}else r=Ja(p),n=cc;var t=r.substr(0,Ja(r).lastIndexOf("/")+1);k=new n(r,t,"#"+b),k.$$parseLinkUrl(p,p),k.$$state=d.state();var E=/^\s*(javascript|mailto):/i;f.on("click",function(b){if(a.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&2!=b.which&&2!=b.button){for(var e=B(b.target);"a"!==wa(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href"),l=e.attr("href")||e.attr("xlink:href");C(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=Aa(g.animVal).href),E.test(g)||!g||e.attr("target")||b.isDefaultPrevented()||!k.$$parseLinkUrl(g,l)||(b.preventDefault(),k.absUrl()!=d.url()&&(c.$apply(),h.angular["ff-684208-preventDefault"]=!0))}}),Cb(k.absUrl())!=Cb(p)&&d.url(k.absUrl(),!0);var K=!0;return d.onUrlChange(function(a,b){v(sa(t,a))?h.location.href=a:(c.$evalAsync(function(){var f,d=k.absUrl(),e=k.$$state;k.$$parse(a),k.$$state=b,f=c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented,k.absUrl()===a&&(f?(k.$$parse(d),k.$$state=e,g(d,!1,e)):(K=!1,l(d,e)))}),c.$$phase||c.$digest())}),c.$watch(function(){var a=Cb(d.url()),b=Cb(k.absUrl()),f=d.state(),h=k.$$replace,r=a!==b||k.$$html5&&e.history&&f!==k.$$state;(K||r)&&(K=!1,c.$evalAsync(function(){var b=k.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,k.$$state,f).defaultPrevented;k.absUrl()===b&&(d?(k.$$parse(a),k.$$state=f):(r&&g(b,h,f===k.$$state?null:k.$$state),l(a,f)))})),k.$$replace=!1}),k}]}function jf(){var b=!0,a=this;this.debugEnabled=function(a){return A(a)?(b=a,this):b},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||y;a=!1;try{a=!!e.apply}catch(l){}return a?function(){var a=[];return m(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function Xa(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw Z("isecfld",a);return b}function kd(b,a){if(b+="",!G(b))throw Z("iseccst",a);return b}function Ba(b,a){if(b){if(b.constructor===b)throw Z("isecfn",a);if(b.window===b)throw Z("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw Z("isecdom",a);if(b===Object)throw Z("isecobj",a)}return b}function ld(b,a){if(b){if(b.constructor===b)throw Z("isecfn",a);if(b===Uf||b===Vf||b===Wf)throw Z("isecff",a)}}function md(b,a){if(b&&(b===0..constructor||b===(!1).constructor||b==="".constructor||b==={}.constructor||b===[].constructor||b===Function.constructor))throw Z("isecaf",a)}function Xf(b,a){return"undefined"!=typeof b?b:a}function nd(b,a){return"undefined"==typeof b?a:"undefined"==typeof a?b:b+a}function U(b,a){var c,d;switch(b.type){case s.Program:c=!0,m(b.body,function(b){U(b.expression,a),c=c&&b.expression.constant}),b.constant=c;break;case s.Literal:b.constant=!0,b.toWatch=[];break;case s.UnaryExpression:U(b.argument,a),b.constant=b.argument.constant,b.toWatch=b.argument.toWatch;break;case s.BinaryExpression:U(b.left,a),U(b.right,a),b.constant=b.left.constant&&b.right.constant,b.toWatch=b.left.toWatch.concat(b.right.toWatch);break;case s.LogicalExpression:U(b.left,a),U(b.right,a),b.constant=b.left.constant&&b.right.constant,b.toWatch=b.constant?[]:[b];break;case s.ConditionalExpression:U(b.test,a),U(b.alternate,a),U(b.consequent,a),b.constant=b.test.constant&&b.alternate.constant&&b.consequent.constant,b.toWatch=b.constant?[]:[b];break;case s.Identifier:b.constant=!1,b.toWatch=[b];break;case s.MemberExpression:U(b.object,a),b.computed&&U(b.property,a),b.constant=b.object.constant&&(!b.computed||b.property.constant),b.toWatch=[b];break;case s.CallExpression:c=b.filter?!a(b.callee.name).$stateful:!1,d=[],m(b.arguments,function(b){U(b,a),c=c&&b.constant,b.constant||d.push.apply(d,b.toWatch)}),b.constant=c,b.toWatch=b.filter&&!a(b.callee.name).$stateful?d:[b];break;case s.AssignmentExpression:U(b.left,a),U(b.right,a),b.constant=b.left.constant&&b.right.constant,b.toWatch=[b];break;case s.ArrayExpression:c=!0,d=[],m(b.elements,function(b){U(b,a),c=c&&b.constant,b.constant||d.push.apply(d,b.toWatch)}),b.constant=c,b.toWatch=d;break;case s.ObjectExpression:c=!0,d=[],m(b.properties,function(b){U(b.value,a),c=c&&b.value.constant,b.value.constant||d.push.apply(d,b.value.toWatch)}),b.constant=c,b.toWatch=d;break;case s.ThisExpression:b.constant=!1,b.toWatch=[]}}function od(b){if(1==b.length){b=b[0].expression;var a=b.toWatch;return 1!==a.length?a:a[0]!==b?a:w}}function pd(b){return b.type===s.Identifier||b.type===s.MemberExpression}function qd(b){return 1===b.body.length&&pd(b.body[0].expression)?{type:s.AssignmentExpression,left:b.body[0].expression,right:{type:s.NGValueParameter},operator:"="}:void 0}function rd(b){return 0===b.body.length||1===b.body.length&&(b.body[0].expression.type===s.Literal||b.body[0].expression.type===s.ArrayExpression||b.body[0].expression.type===s.ObjectExpression)}function sd(b,a){this.astBuilder=b,this.$filter=a}function td(b,a){this.astBuilder=b,this.$filter=a}function Fb(b){return"constructor"==b}function dc(b){return x(b.valueOf)?b.valueOf():Yf.call(b)}function kf(){var b=fa(),a=fa();this.$get=["$filter",function(c){function d(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=dc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function e(a,b,c,e,f){var h,g=e.inputs;if(1===g.length){var k=d,g=g[0];return a.$watch(function(a){var b=g(a);return d(b,k)||(h=e(a,w,w,[b]),k=b&&dc(b)),h},b,c,f)}for(var l=[],n=[],p=0,m=g.length;m>p;p++)l[p]=d,n[p]=null;return a.$watch(function(a){for(var b=!1,c=0,f=g.length;f>c;c++){var k=g[c](a);(b||(b=!d(k,l[c])))&&(n[c]=k,l[c]=k&&dc(k))}return b&&(h=e(a,w,w,n)),h},b,c,f)}function f(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,x(b)&&b.apply(this,arguments),A(a)&&d.$$postDigest(function(){A(f)&&e()})},c)}function h(a,b,c,d){function e(a){var b=!0;return m(a,function(a){A(a)||(b=!1)}),b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a,x(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function g(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){x(b)&&b.apply(this,arguments),e()},c)}function l(a,b){if(!b)return a;var c=a.$$watchDelegate,c=c!==h&&c!==f?function(c,d,e,f){return e=a(c,d,e,f),b(e,c,d)}:function(c,d,e,f){return e=a(c,d,e,f),c=b(e,c,d),A(e)?c:e};return a.$$watchDelegate&&a.$$watchDelegate!==e?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=e,c.inputs=a.inputs?a.inputs:[a]),c}var k=Fa().noUnsafeEval,n={csp:k,expensiveChecks:!1},p={csp:k,expensiveChecks:!0};return function(d,k,E){var m,u,q;switch(typeof d){case"string":q=d=d.trim();var s=E?a:b;return m=s[q],m||(":"===d.charAt(0)&&":"===d.charAt(1)&&(u=!0,d=d.substring(2)),E=E?p:n,m=new ec(E),m=new fc(m,c,E).parse(d),m.constant?m.$$watchDelegate=g:u?m.$$watchDelegate=m.literal?h:f:m.inputs&&(m.$$watchDelegate=e),s[q]=m),l(m,k);case"function":return l(d,k);default:return y}}}]}function mf(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return ud(function(a){b.$evalAsync(a)},a)}]}function nf(){this.$get=["$browser","$exceptionHandler",function(b,a){return ud(function(a){b.defer(a)},a)}]}function ud(b,a){function c(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function d(){this.$$state={status:0}}function e(a,b){return function(c){b.call(a,c)}}function f(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,b(function(){var b,d,e;e=c.pending,c.processScheduled=!1,c.pending=w;for(var f=0,g=e.length;g>f;++f){d=e[f][0],b=e[f][c.status];try{x(b)?d.resolve(b(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),a(h)}}}))}function h(){this.promise=new d,this.resolve=e(this,this.resolve),this.reject=e(this,this.reject),this.notify=e(this,this.notify)}var g=I("$q",TypeError);P(d.prototype,{then:function(a,b,c){if(v(a)&&v(b)&&v(c))return this;var d=new h;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),0<this.$$state.status&&f(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}}),P(h.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(g("qcycle",a)):this.$$resolve(a))},$$resolve:function(b){var d,e;e=c(this,this.$$resolve,this.$$reject);try{(C(b)||x(b))&&(d=b&&b.then),x(d)?(this.promise.$$state.status=-1,d.call(b,e[0],e[1],this.notify)):(this.promise.$$state.value=b,this.promise.$$state.status=1,f(this.promise.$$state))}catch(g){e[1](g),a(g)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,f(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&b(function(){for(var b,e,f=0,g=d.length;g>f;f++){e=d[f][0],b=d[f][3];try{e.notify(x(b)?b(c):c)}catch(h){a(h)}}})}});var l=function(a,b){var c=new h;return b?c.resolve(a):c.reject(a),c.promise},k=function(a,b,c){var d=null;try{x(c)&&(d=c())}catch(e){return l(e,!1)}return d&&x(d.then)?d.then(function(){return l(a,b)},function(a){return l(a,!1)}):l(a,b)},n=function(a,b,c,d){var e=new h;return e.resolve(a),e.promise.then(b,c,d)},p=function t(a){if(!x(a))throw g("norslvr",a);if(!(this instanceof t))return new t(a);var b=new h;return a(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise};return p.defer=function(){return new h},p.reject=function(a){var b=new h;return b.reject(a),b.promise},p.when=n,p.resolve=n,p.all=function(a){var b=new h,c=0,d=J(a)?[]:{};return m(a,function(a,e){c++,n(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise},p}function wf(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};return f.supported=e,f}]}function lf(){function b(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++nb,this.$$ChildScope=null}return b.prototype=a,b}var a=10,c=I("$rootScope"),d=null,e=null;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(f,h,g,l){function k(a){a.currentScope.$$destroyed=!0}function n(){this.$id=++nb,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(a){if(q.$$phase)throw c("inprog",q.$$phase);q.$$phase=a}function r(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function t(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function E(){}function s(){for(;w.length;)try{w.shift()()}catch(a){h(a)}e=null}function u(){null===e&&(e=l.defer(function(){q.$apply(s)}))}n.prototype={constructor:n,$new:function(a,c){var d;return c=c||this,a?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=b(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(a||c!=this)&&d.$on("$destroy",k),d},$watch:function(a,b,c,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,c,f,a);var h=this,k=h.$$watchers,l={fn:b,last:E,get:f,exp:e||a,eq:!!c};return d=null,x(b)||(l.fn=y),k||(k=h.$$watchers=[]),k.unshift(l),r(this,1),function(){0<=cb(k,l)&&r(h,-1),d=null}},$watchGroup:function(a,b){function c(){h=!1,k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;return g.$evalAsync(function(){l&&b(e,e,g)}),function(){l=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(m(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a,d[b]=f,h||(h=!0,g.$evalAsync(c))});f.push(k)}),function(){for(;f.length;)f.shift()()})},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!v(e)){if(C(e))if(Da(e))for(f!==p&&(f=p,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;a>b;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==r&&(f=r={},t=0,l++),a=0;for(b in e)ta.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ta.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var e,f,h,d=this,k=1<b.length,l=0,n=g(a,c),p=[],r={},q=!0,t=0;return this.$watch(n,function(){if(q?(q=!1,b(e,e,d)):b(e,h,d),k)if(C(e))if(Da(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ta.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var b,f,g,k,n,r,m,D,v,t=a,u=[];p("$digest"),l.$$checkUrlChange(),this===q&&null!==e&&(l.defer.cancel(e),s()),d=null;do{for(r=!1,m=this;z.length;){try{v=z.shift(),v.scope.$eval(v.expression,v.locals)}catch(w){h(w)}d=null}a:do{if(k=m.$$watchers)for(n=k.length;n--;)try{if(b=k[n])if((f=b.get(m))===(g=b.last)||(b.eq?ka(f,g):"number"==typeof f&&"number"==typeof g&&isNaN(f)&&isNaN(g))){if(b===d){r=!1;break a}}else r=!0,d=b,b.last=b.eq?ha(f,null):f,b.fn(f,g===E?f:g,m),5>t&&(D=4-t,u[D]||(u[D]=[]),u[D].push({msg:x(b.exp)?"fn: "+(b.exp.name||b.exp.toString()):b.exp,newVal:f,oldVal:g}))}catch(y){h(y)}if(!(k=m.$$watchersCount&&m.$$childHead||m!==this&&m.$$nextSibling))for(;m!==this&&!(k=m.$$nextSibling);)m=m.$parent}while(m=k);if((r||z.length)&&!t--)throw q.$$phase=null,c("infdig",a,u)}while(r||z.length);for(q.$$phase=null;N.length;)try{N.shift()()}catch(A){h(A)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===q&&l.$$applicationDestroyed(),r(this,-this.$$watchersCount);for(var b in this.$$listenerCount)t(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=y,this.$on=this.$watch=this.$watchGroup=function(){return y},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){q.$$phase||z.length||l.defer(function(){z.length&&q.$digest()}),z.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){N.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{q.$$phase=null}}catch(b){h(b)}finally{try{q.$digest()}catch(c){throw h(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&w.push(b),u()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,t(e,1,a))}},$emit:function(a,b){var d,l,n,c=[],e=this,f=!1,g={name:a,targetScope:e,stopPropagation:function(){f=!0},preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1},k=db([g],arguments,1);do{for(d=e.$$listeners[a]||c,g.currentScope=e,l=0,n=d.length;n>l;l++)if(d[l])try{d[l].apply(null,k)}catch(p){h(p)}else d.splice(l,1),l--,n--;if(f)return g.currentScope=null,g;e=e.$parent}while(e);return g.currentScope=null,g},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g,k,f=db([e],arguments,1);c=d;){for(e.currentScope=c,d=c.$$listeners[a]||[],g=0,k=d.length;k>g;g++)if(d[g])try{d[g].apply(null,f)}catch(l){h(l)}else d.splice(g,1),g--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return e.currentScope=null,e}};var q=new n,z=q.$$asyncQueue=[],N=q.$$postDigestQueue=[],w=q.$$applyAsyncQueue=[];return q}]}function ge(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return A(a)?(b=a,this):b},this.imgSrcSanitizationWhitelist=function(b){return A(b)?(a=b,this):a},this.$get=function(){return function(c,d){var f,e=d?a:b;return f=Aa(c).href,""===f||f.match(e)?c:"unsafe:"+f}}}function Zf(b){if("self"===b)return b;if(G(b)){if(-1<b.indexOf("***"))throw Ca("iwcard",b);return b=vd(b).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+b+"$")}if(Oa(b))return new RegExp("^"+b.source+"$");throw Ca("imatcher")}function wd(b){var a=[];return A(b)&&m(b,function(b){a.push(Zf(b))}),a}function pf(){this.SCE_CONTEXTS=oa;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){return arguments.length&&(b=wd(a)),b},this.resourceUrlBlacklist=function(b){return arguments.length&&(a=wd(b)),a},this.$get=["$injector",function(c){function d(a,b){return"self"===a?fd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}var f=function(a){throw Ca("unsafe")};c.has("$sanitize")&&(f=c.get("$sanitize"));var h=e(),g={};return g[oa.HTML]=e(h),g[oa.CSS]=e(h),g[oa.URL]=e(h),g[oa.JS]=e(h),g[oa.RESOURCE_URL]=e(g[oa.URL]),{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw Ca("icontext",a,b);if(null===b||v(b)||""===b)return b;if("string"!=typeof b)throw Ca("itype",a);return new c(b)},getTrusted:function(c,e){if(null===e||v(e)||""===e)return e;var h=g.hasOwnProperty(c)?g[c]:null;if(h&&e instanceof h)return e.$$unwrapTrustedValue();if(c===oa.RESOURCE_URL){var p,r,h=Aa(e.toString()),t=!1;for(p=0,r=b.length;r>p;p++)if(d(b[p],h)){t=!0;break}if(t)for(p=0,r=a.length;r>p;p++)if(d(a[p],h)){t=!1;break}if(t)return e;throw Ca("insecurl",e.toString())}if(c===oa.HTML)return f(e);throw Ca("unsafe")},valueOf:function(a){return a instanceof h?a.$$unwrapTrustedValue():a}}}]}function of(){var b=!0;this.enabled=function(a){return arguments.length&&(b=!!a),b},this.$get=["$parse","$sceDelegate",function(a,c){if(b&&8>Wa)throw Ca("iequirks");var d=ja(oa);d.isEnabled=function(){return b},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,b||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=$a),d.parseAs=function(b,c){var e=a(c);return e.literal&&e.constant?e:a(c,function(a){return d.getTrusted(b,a)})};var e=d.parseAs,f=d.getTrusted,h=d.trustAs;return m(oa,function(a,b){var c=F(b);d[gb("parse_as_"+c)]=function(b){return e(a,b)},d[gb("get_trusted_"+c)]=function(b){return f(a,b)},d[gb("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function qf(){this.$get=["$window","$document",function(b,a){var h,c={},d=Y((/android (\d+)/.exec(F((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},g=/^(Moz|webkit|ms)(?=[A-Z])/,l=f.body&&f.body.style,k=!1,n=!1;if(l){for(var p in l)if(k=g.exec(p)){h=k[0],h=h.substr(0,1).toUpperCase()+h.substr(1);break}h||(h="WebkitOpacity"in l&&"webkit"),k=!!("transition"in l||h+"Transition"in l),n=!!("animation"in l||h+"Animation"in l),!d||k&&n||(k=G(l.webkitTransition),n=G(l.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hasEvent:function(a){if("input"===a&&11>=Wa)return!1;if(v(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Fa(),vendorPrefix:h,transitions:k,animations:n,android:d}}]}function sf(){this.$get=["$templateCache","$http","$q","$sce",function(b,a,c,d){function e(f,h){e.totalPendingRequests++,G(f)&&b.get(f)||(f=d.getTrustedResourceUrl(f));var g=a.defaults&&a.defaults.transformResponse;return J(g)?g=g.filter(function(a){return a!==Zb}):g===Zb&&(g=null),a.get(f,{cache:b,transformResponse:g})["finally"](function(){e.totalPendingRequests--}).then(function(a){return b.put(f,a.data),a.data},function(a){if(!h)throw ga("tpload",f,a.status,a.statusText);return c.reject(a)})}return e.totalPendingRequests=0,e}]}function tf(){this.$get=["$rootScope","$browser","$location",function(b,a,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var h=[];return m(a,function(a){var d=da.element(a).data("$binding");d&&m(d,function(d){c?new RegExp("(^|\\s)"+vd(b)+"(\\s|\\||$)").test(d)&&h.push(a):-1!=d.indexOf(b)&&h.push(a)})}),h},findModels:function(a,b,c){for(var h=["ng-","data-ng-","ng\\:"],g=0;g<h.length;++g){var l=a.querySelectorAll("["+h[g]+"model"+(c?"=":"*=")+'"'+b+'"]');if(l.length)return l}},getLocation:function(){return c.url()},setLocation:function(a){a!==c.url()&&(c.url(a),b.$digest())},whenStable:function(b){a.notifyWhenNoOutstandingRequests(b)}}}]}function uf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,l,k){x(f)||(k=l,l=f,f=y);var m,n=ua.call(arguments,3),p=A(k)&&!k,r=(p?d:c).defer(),t=r.promise;return m=a.defer(function(){try{r.resolve(f.apply(null,n))}catch(a){r.reject(a),e(a)}finally{delete h[t.$$timeoutId]}p||b.$apply()},l),t.$$timeoutId=m,h[m]=r,t}var h={};return f.cancel=function(b){return b&&b.$$timeoutId in h?(h[b.$$timeoutId].reject("canceled"),delete h[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1},f}]}function Aa(b){return Wa&&($.setAttribute("href",b),b=$.href),$.setAttribute("href",b),{href:$.href,protocol:$.protocol?$.protocol.replace(/:$/,""):"",host:$.host,search:$.search?$.search.replace(/^\?/,""):"",hash:$.hash?$.hash.replace(/^#/,""):"",hostname:$.hostname,port:$.port,pathname:"/"===$.pathname.charAt(0)?$.pathname:"/"+$.pathname}}function fd(b){return b=G(b)?Aa(b):b,b.protocol===xd.protocol&&b.host===xd.host}function vf(){this.$get=qa(Q)}function yd(b){function a(a){try{return decodeURIComponent(a)}catch(b){return a}}var c=b[0]||{},d={},e="";return function(){var b,h,g,l,k;if(b=c.cookie||"",b!==e)for(e=b,b=e.split("; "),d={},g=0;g<b.length;g++)h=b[g],l=h.indexOf("="),l>0&&(k=a(h.substring(0,l)),v(d[k])&&(d[k]=a(h.substring(l+1))));return d}}function zf(){this.$get=yd}function Kc(b){function a(c,d){if(C(c)){var e={};return m(c,function(b,c){e[c]=a(c,b)}),e}return b.factory(c+"Filter",d)}this.register=a,this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}],a("currency",zd),a("date",Ad),a("filter",$f),a("json",ag),a("limitTo",bg),a("lowercase",cg),a("number",Bd),
a("orderBy",Cd),a("uppercase",dg)}function $f(){return function(b,a,c){if(!Da(b)){if(null==b)return b;throw I("filter")("notarray",b)}var d;switch(gc(a)){case"function":break;case"boolean":case"null":case"number":case"string":d=!0;case"object":a=eg(a,c,d);break;default:return b}return Array.prototype.filter.call(b,a)}}function eg(b,a,c){var d=C(b)&&"$"in b;return!0===a?a=ka:x(a)||(a=function(a,b){return v(a)?!1:null===a||null===b?a===b:C(b)||C(a)&&!qc(a)?!1:(a=F(""+a),b=F(""+b),-1!==a.indexOf(b))}),function(e){return d&&!C(e)?Ma(e,b.$,a,!1):Ma(e,b,a,c)}}function Ma(b,a,c,d,e){var f=gc(b),h=gc(a);if("string"===h&&"!"===a.charAt(0))return!Ma(b,a.substring(1),c,d);if(J(b))return b.some(function(b){return Ma(b,a,c,d)});switch(f){case"object":var g;if(d){for(g in b)if("$"!==g.charAt(0)&&Ma(b[g],a,c,!0))return!0;return e?!1:Ma(b,a,c,!1)}if("object"===h){for(g in a)if(e=a[g],!x(e)&&!v(e)&&(f="$"===g,!Ma(f?b:b[g],e,c,f,f)))return!1;return!0}return c(b,a);case"function":return!1;default:return c(b,a)}}function gc(b){return null===b?"null":typeof b}function zd(b){var a=b.NUMBER_FORMATS;return function(b,d,e){return v(d)&&(d=a.CURRENCY_SYM),v(e)&&(e=a.PATTERNS[1].maxFrac),null==b?b:Dd(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,e).replace(/\u00A4/g,d)}}function Bd(b){var a=b.NUMBER_FORMATS;return function(b,d){return null==b?b:Dd(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Dd(b,a,c,d,e){if(C(b))return"";var f=0>b;b=Math.abs(b);var h=1/0===b;if(!h&&!isFinite(b))return"";var g=b+"",l="",k=!1,n=[];if(h&&(l="∞"),!h&&-1!==g.indexOf("e")){var p=g.match(/([\d\.]+)e(-?)(\d+)/);p&&"-"==p[2]&&p[3]>e+1?b=0:(l=g,k=!0)}if(h||k)e>0&&1>b&&(l=b.toFixed(e),b=parseFloat(l),l=l.replace(hc,d));else{h=(g.split(hc)[1]||"").length,v(e)&&(e=Math.min(Math.max(a.minFrac,h),a.maxFrac)),b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);var h=(""+b).split(hc),g=h[0],h=h[1]||"",p=0,r=a.lgSize,t=a.gSize;if(g.length>=r+t)for(p=g.length-r,k=0;p>k;k++)0===(p-k)%t&&0!==k&&(l+=c),l+=g.charAt(k);for(k=p;k<g.length;k++)0===(g.length-k)%r&&0!==k&&(l+=c),l+=g.charAt(k);for(;h.length<e;)h+="0";e&&"0"!==e&&(l+=d+h.substr(0,e))}return 0===b&&(f=!1),n.push(f?a.negPre:a.posPre,l,f?a.negSuf:a.posSuf),n.join("")}function Gb(b,a,c){var d="";for(0>b&&(d="-",b=-b),b=""+b;b.length<a;)b="0"+b;return c&&(b=b.substr(b.length-a)),d+b}function aa(b,a,c,d){return c=c||0,function(e){return e=e["get"+b](),(c>0||e>-c)&&(e+=c),0===e&&-12==c&&(e=12),Gb(e,a,d)}}function Hb(b,a){return function(c,d){var e=c["get"+b](),f=sb(a?"SHORT"+b:b);return d[f][e]}}function Ed(b){var a=new Date(b,0,1).getDay();return new Date(b,0,(4>=a?5:12)-a)}function Fd(b){return function(a){var c=Ed(a.getFullYear());return a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-+c,a=1+Math.round(a/6048e5),Gb(a,b)}}function ic(b,a){return 0>=b.getFullYear()?a.ERAS[0]:a.ERAS[1]}function Ad(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,h=0,g=b[8]?a.setUTCFullYear:a.setFullYear,l=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Y(b[9]+b[10]),h=Y(b[9]+b[11])),g.call(a,Y(b[1]),Y(b[2])-1,Y(b[3])),f=Y(b[4]||0)-f,h=Y(b[5]||0)-h,g=Y(b[6]||0),b=Math.round(1e3*parseFloat("0."+(b[7]||0))),l.call(a,f,h,g,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var l,k,h="",g=[];if(e=e||"mediumDate",e=b.DATETIME_FORMATS[e]||e,G(c)&&(c=fg.test(c)?Y(c):a(c)),V(c)&&(c=new Date(c)),!ea(c)||!isFinite(c.getTime()))return c;for(;e;)(k=gg.exec(e))?(g=db(g,k,1),e=g.pop()):(g.push(e),e=null);var n=c.getTimezoneOffset();return f&&(n=wc(f,c.getTimezoneOffset()),c=Ob(c,f,!0)),m(g,function(a){l=hg[a],h+=l?l(c,b.DATETIME_FORMATS,n):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function ag(){return function(b,a){return v(a)&&(a=2),eb(b,a)}}function bg(){return function(b,a,c){return a=1/0===Math.abs(Number(a))?Number(a):Y(a),isNaN(a)?b:(V(b)&&(b=b.toString()),J(b)||G(b)?(c=!c||isNaN(c)?0:Y(c),c=0>c&&c>=-b.length?b.length+c:c,a>=0?b.slice(c,c+a):0===c?b.slice(a,b.length):b.slice(Math.max(0,c+a),c)):b)}}function Cd(b){function a(a,c){return c=c?-1:1,a.map(function(a){var d=1,g=$a;if(x(a))g=a;else if(G(a)&&(("+"==a.charAt(0)||"-"==a.charAt(0))&&(d="-"==a.charAt(0)?-1:1,a=a.substring(1)),""!==a&&(g=b(a),g.constant)))var l=g(),g=function(a){return a[l]};return{get:g,descending:d*c}})}function c(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}return function(b,e,f){if(!Da(b))return b;J(e)||(e=[e]),0===e.length&&(e=["+"]);var h=a(e,f);return h.push({get:function(){return{}},descending:f?-1:1}),b=Array.prototype.map.call(b,function(a,b){return{value:a,predicateValues:h.map(function(d){var e=d.get(a);return d=typeof e,null===e?(d="string",e="null"):"string"===d?e=e.toLowerCase():"object"===d&&("function"==typeof e.valueOf&&(e=e.valueOf(),c(e))||qc(e)&&(e=e.toString(),c(e))||(e=b)),{value:e,type:d}})}}),b.sort(function(a,b){for(var c=0,d=0,e=h.length;e>d;++d){var c=a.predicateValues[d],f=b.predicateValues[d],t=0;if(c.type===f.type?c.value!==f.value&&(t=c.value<f.value?-1:1):t=c.type<f.type?-1:1,c=t*h[d].descending)break}return c}),b=b.map(function(a){return a.value})}}function Na(b){return x(b)&&(b={link:b}),b.restrict=b.restrict||"AC",qa(b)}function Gd(b,a,c,d,e){var f=this,h=[];f.$error={},f.$$success={},f.$pending=w,f.$name=e(a.name||a.ngForm||"")(c),f.$dirty=!1,f.$pristine=!0,f.$valid=!0,f.$invalid=!1,f.$submitted=!1,f.$$parentForm=Ib,f.$rollbackViewValue=function(){m(h,function(a){a.$rollbackViewValue()})},f.$commitViewValue=function(){m(h,function(a){a.$commitViewValue()})},f.$addControl=function(a){Ta(a.$name,"input"),h.push(a),a.$name&&(f[a.$name]=a),a.$$parentForm=f},f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c],f[b]=a,a.$name=b},f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name],m(f.$pending,function(b,c){f.$setValidity(c,null,a)}),m(f.$error,function(b,c){f.$setValidity(c,null,a)}),m(f.$$success,function(b,c){f.$setValidity(c,null,a)}),cb(h,a),a.$$parentForm=Ib},Hd({ctrl:this,$element:b,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(cb(d,c),0===d.length&&delete a[b])},$animate:d}),f.$setDirty=function(){d.removeClass(b,Ya),d.addClass(b,Jb),f.$dirty=!0,f.$pristine=!1,f.$$parentForm.$setDirty()},f.$setPristine=function(){d.setClass(b,Ya,Jb+" ng-submitted"),f.$dirty=!1,f.$pristine=!0,f.$submitted=!1,m(h,function(a){a.$setPristine()})},f.$setUntouched=function(){m(h,function(a){a.$setUntouched()})},f.$setSubmitted=function(){d.addClass(b,"ng-submitted"),f.$submitted=!0,f.$$parentForm.$setSubmitted()}}function jc(b){b.$formatters.push(function(a){return b.$isEmpty(a)?a:a.toString()})}function jb(b,a,c,d,e,f){var h=F(a[0].type);if(!e.android){var g=!1;a.on("compositionstart",function(a){g=!0}),a.on("compositionend",function(){g=!1,l()})}var l=function(b){if(k&&(f.defer.cancel(k),k=null),!g){var e=a.val();b=b&&b.type,"password"===h||c.ngTrim&&"false"===c.ngTrim||(e=T(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,b)}};if(e.hasEvent("input"))a.on("input",l);else{var k,n=function(a,b,c){k||(k=f.defer(function(){k=null,b&&b.value===c||l(a)}))};a.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||n(a,this,this.value)}),e.hasEvent("paste")&&a.on("paste cut",n)}a.on("change",l),d.$render=function(){var b=d.$isEmpty(d.$viewValue)?"":d.$viewValue;a.val()!==b&&a.val(b)}}function Kb(b,a){return function(c,d){var e,f;if(ea(c))return c;if(G(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),ig.test(c))return new Date(c);if(b.lastIndex=0,e=b.exec(c))return e.shift(),f=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},m(e,function(b,c){c<a.length&&(f[a[c]]=+b)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1e3*f.sss||0)}return NaN}}function kb(b,a,c,d){return function(e,f,h,g,l,k,n){function p(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function r(a){return A(a)&&!ea(a)?c(a)||w:a}Id(e,f,h,g),jb(e,f,h,g,l,k);var m,t=g&&g.$options&&g.$options.timezone;if(g.$$parserName=b,g.$parsers.push(function(b){return g.$isEmpty(b)?null:a.test(b)?(b=c(b,m),t&&(b=Ob(b,t)),b):w}),g.$formatters.push(function(a){if(a&&!ea(a))throw lb("datefmt",a);return p(a)?((m=a)&&t&&(m=Ob(m,t,!0)),n("date")(a,d,t)):(m=null,"")}),A(h.min)||h.ngMin){var s;g.$validators.min=function(a){return!p(a)||v(s)||c(a)>=s},h.$observe("min",function(a){s=r(a),g.$validate()})}if(A(h.max)||h.ngMax){var u;g.$validators.max=function(a){return!p(a)||v(u)||c(a)<=u},h.$observe("max",function(a){u=r(a),g.$validate()})}}}function Id(b,a,c,d){(d.$$hasNativeValidators=C(a[0].validity))&&d.$parsers.push(function(b){var c=a.prop("validity")||{};return c.badInput&&!c.typeMismatch?w:b})}function Jd(b,a,c,d,e){if(A(d)){if(b=b(d),!b.constant)throw lb("constexpr",c,d);return b(a)}return e}function kc(b,a){return b="ngClass"+b,["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],n=0;n<b.length;n++)if(e==b[n])continue a;c.push(e)}return c}function e(a){var b=[];return J(a)?(m(a,function(a){b=b.concat(e(a))}),b):G(a)?a.split(" "):C(a)?(m(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(f,h,g){function l(a,b){var c=h.data("$classCounts")||fa(),d=[];return m(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function k(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(n){if(!ka(b,n)){var s=e(n),m=d(k,s),k=d(s,k),m=l(m,1),k=l(k,-1);m&&m.length&&c.addClass(h,m),k&&k.length&&c.removeClass(h,k)}}else{var m=l(k,1);g.$addClass(m)}}n=ja(b)}var n;f.$watch(g[b],k,!0),g.$observe("class",function(a){k(f.$eval(g[b]))}),"ngClass"!==b&&f.$watch("$index",function(c,d){var h=1&c;if(h!==(1&d)){var k=e(f.$eval(g[b]));h===a?(h=l(k,1),g.$addClass(h)):(h=l(k,-1),g.$removeClass(h))}})}}}]}function Hd(b){function a(a,b){b&&!f[a]?(l.addClass(e,a),f[a]=!0):!b&&f[a]&&(l.removeClass(e,a),f[a]=!1)}function c(b,c){b=b?"-"+Ac(b,"-"):"",a(mb+b,!0===c),a(Kd+b,!1===c)}var d=b.ctrl,e=b.$element,f={},h=b.set,g=b.unset,l=b.$animate;f[Kd]=!(f[mb]=e.hasClass(mb)),d.$setValidity=function(b,e,f){v(e)?(d.$pending||(d.$pending={}),h(d.$pending,b,f)):(d.$pending&&g(d.$pending,b,f),Ld(d.$pending)&&(d.$pending=w)),bb(e)?e?(g(d.$error,b,f),h(d.$$success,b,f)):(h(d.$error,b,f),g(d.$$success,b,f)):(g(d.$error,b,f),g(d.$$success,b,f)),d.$pending?(a(Md,!0),d.$valid=d.$invalid=w,c("",null)):(a(Md,!1),d.$valid=Ld(d.$error),d.$invalid=!d.$valid,c("",d.$valid)),e=d.$pending&&d.$pending[b]?w:d.$error[b]?!1:d.$$success[b]?!0:null,c(b,e),d.$$parentForm.$setValidity(b,e,d)}}function Ld(b){if(b)for(var a in b)if(b.hasOwnProperty(a))return!1;return!0}var Wa,B,ra,Rb,jg=/^\/(.+)\/([a-z]*)$/,F=function(b){return G(b)?b.toLowerCase():b},ta=Object.prototype.hasOwnProperty,sb=function(b){return G(b)?b.toUpperCase():b},ua=[].slice,Nf=[].splice,kg=[].push,va=Object.prototype.toString,rc=Object.getPrototypeOf,Ea=I("ng"),da=Q.angular||(Q.angular={}),nb=0;Wa=X.documentMode,y.$inject=[],$a.$inject=[];var Qb,J=Array.isArray,tc=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,T=function(b){return G(b)?b.trim():b},vd=function(b){return b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Fa=function(){if(!A(Fa.rules)){var b=X.querySelector("[ng-csp]")||X.querySelector("[data-ng-csp]");if(b){var a=b.getAttribute("ng-csp")||b.getAttribute("data-ng-csp");Fa.rules={noUnsafeEval:!a||-1!==a.indexOf("no-unsafe-eval"),noInlineStyle:!a||-1!==a.indexOf("no-inline-style")}}else{b=Fa;try{new Function(""),a=!1}catch(c){a=!0}b.rules={noUnsafeEval:a,noInlineStyle:!1}}}return Fa.rules},pb=function(){if(A(pb.name_))return pb.name_;var b,a,d,e,c=Qa.length;for(a=0;c>a;++a)if(d=Qa[a],b=X.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return pb.name_=e},Qa=["ng-","data-ng-","ng:","x-ng-"],be=/[A-Z]/g,Bc=!1,pa=1,Pa=3,fe={full:"1.4.7",major:1,minor:4,dot:7,codeName:"dark-luminescence"};R.expando="ng339";var hb=R.cache={},Ff=1;R._data=function(b){return this.cache[b[this.expando]]||{}};var Af=/([\:\-\_]+(.))/g,Bf=/^moz([A-Z])/,lg={mouseleave:"mouseout",mouseenter:"mouseover"},Tb=I("jqLite"),Ef=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Sb=/<|&#?\w+;/,Cf=/<([\w:-]+)/,Df=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ma={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;var Ra=R.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===X.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),R(Q).on("load",a))},toString:function(){var b=[];return m(this,function(a){b.push(""+a)}),"["+b.join(", ")+"]"},eq:function(b){return B(b>=0?this[b]:this[this.length+b])},length:0,push:kg,sort:[].sort,splice:[].splice},Bb={};m("multiple selected checked disabled readOnly required open".split(" "),function(b){Bb[F(b)]=b});var Sc={};m("input select option textarea button form details".split(" "),function(b){Sc[b]=!0});var $c={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};m({data:Vb,removeData:vb,hasData:function(b){for(var a in hb[b.ng339])return!0;return!1}},function(b,a){R[a]=b}),m({data:Vb,inheritedData:Ab,scope:function(b){return B.data(b,"$scope")||Ab(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return B.data(b,"$isolateScope")||B.data(b,"$isolateScopeNoTemplate")},controller:Pc,injector:function(b){return Ab(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:xb,css:function(b,a,c){return a=gb(a),A(c)?void(b.style[a]=c):b.style[a]},attr:function(b,a,c){var d=b.nodeType;if(d!==Pa&&2!==d&&8!==d)if(d=F(a),Bb[d]){if(!A(c))return b[a]||(b.attributes.getNamedItem(a)||y).specified?d:w;c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d))}else if(A(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?w:b},prop:function(b,a,c){return A(c)?void(b[a]=c):b[a]},text:function(){function b(a,b){if(v(b)){var d=a.nodeType;return d===pa||d===Pa?a.textContent:""}a.textContent=b}return b.$dv="",b}(),val:function(b,a){if(v(a)){if(b.multiple&&"select"===wa(b)){var c=[];return m(b.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return b.value}b.value=a},html:function(b,a){return v(a)?b.innerHTML:(ub(b,!0),void(b.innerHTML=a))},empty:Qc},function(b,a){R.prototype[a]=function(a,d){var e,f,h=this.length;if(b!==Qc&&v(2==b.length&&b!==xb&&b!==Pc?a:d)){if(C(a)){for(e=0;h>e;e++)if(b===Vb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}for(e=b.$dv,h=v(e)?Math.min(h,1):h,f=0;h>f;f++){var g=b(this[f],a,d);e=e?e+g:g}return e}for(e=0;h>e;e++)b(this[e],a,d);return this}}),m({removeData:vb,on:function a(c,d,e,f){if(A(f))throw Tb("onargs");if(Lc(c)){var h=wb(c,!0);f=h.events;var g=h.handle;g||(g=h.handle=Hf(c,f));for(var h=0<=d.indexOf(" ")?d.split(" "):[d],l=h.length;l--;){d=h[l];var k=f[d];k||(f[d]=[],"mouseenter"===d||"mouseleave"===d?a(c,lg[d],function(a){var c=a.relatedTarget;c&&(c===this||this.contains(c))||g(a,d)}):"$destroy"!==d&&c.addEventListener(d,g,!1),k=f[d]),k.push(e)}}},off:Oc,one:function(a,c,d){a=B(a),a.on(c,function f(){a.off(c,d),a.off(c,f)}),a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;ub(a),m(new R(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a),d=c})},children:function(a){var c=[];return m(a.childNodes,function(a){a.nodeType===pa&&c.push(a)}),c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){var d=a.nodeType;if(d===pa||11===d){c=new R(c);for(var d=0,e=c.length;e>d;d++)a.appendChild(c[d])}},prepend:function(a,c){if(a.nodeType===pa){var d=a.firstChild;m(new R(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=B(c).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(c,a),c.appendChild(a)},remove:Wb,detach:function(a){Wb(a,!0)},after:function(a,c){var d=a,e=a.parentNode;c=new R(c);for(var f=0,h=c.length;h>f;f++){var g=c[f];e.insertBefore(g,d.nextSibling),d=g}},addClass:zb,removeClass:yb,toggleClass:function(a,c,d){c&&m(c.split(" "),function(c){var f=d;v(f)&&(f=!xb(a,c)),(f?zb:yb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Ub,triggerHandler:function(a,c,d){var e,f,h=c.type||c,g=wb(a);(g=(g=g&&g.events)&&g[h])&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:y,type:h,target:a},c.type&&(e=P(e,c)),c=ja(g),f=d?[e].concat(d):[e],m(c,function(c){e.isImmediatePropagationStopped()||c.apply(a,f)}))}},function(a,c){R.prototype[c]=function(c,e,f){for(var h,g=0,l=this.length;l>g;g++)v(h)?(h=a(this[g],c,e,f),A(h)&&(h=B(h))):Nc(h,a(this[g],c,e,f));return A(h)?h:this},R.prototype.bind=R.prototype.on,R.prototype.unbind=R.prototype.off}),Ua.prototype={put:function(a,c){this[Ga(a,this.nextUid)]=c},get:function(a){return this[Ga(a,this.nextUid)]},remove:function(a){var c=this[a=Ga(a,this.nextUid)];return delete this[a],c}};var yf=[function(){this.$get=[function(){return Ua}]}],Uc=/^[^\(]*\(\s*([^\)]*)\)/m,mg=/,/,ng=/^\s*(_?)(\S+?)\1\s*$/,Tc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ha=I("$injector");fb.$$annotate=function(a,c,d){var e;if("function"==typeof a){if(!(e=a.$inject)){if(e=[],a.length){if(c)throw G(d)&&d||(d=a.name||If(a)),Ha("strictdi",d);c=a.toString().replace(Tc,""),c=c.match(Uc),m(c[1].split(mg),function(a){a.replace(ng,function(a,c,d){e.push(d)})})}a.$inject=e}}else J(a)?(c=a.length-1,Sa(a[c],"fn"),e=a.slice(0,c)):Sa(a,"fn",!0);return e};var Nd=I("$animate"),Ue=function(){this.$get=["$q","$$rAF",function(a,c){function d(){}return d.all=y,d.chain=y,d.prototype={end:y,cancel:y,resume:y,pause:y,complete:y,then:function(d,f){return a(function(a){c(function(){a()})}).then(d,f)}},d}]},Te=function(){var a=new Ua,c=[];this.$get=["$$AnimateRunner","$rootScope",function(d,e){function f(a,c,d){var e=!1;return c&&(c=G(c)?c.split(" "):J(c)?c:[],m(c,function(c){c&&(e=!0,a[c]=d)})),e}function h(){m(c,function(c){var d=a.get(c);if(d){var e=Jf(c.attr("class")),f="",h="";m(d,function(a,c){a!==!!e[c]&&(a?f+=(f.length?" ":"")+c:h+=(h.length?" ":"")+c)}),m(c,function(a){f&&zb(a,f),h&&yb(a,h)}),a.remove(c)}}),c.length=0}return{enabled:y,on:y,off:y,pin:y,push:function(g,l,k,n){return n&&n(),k=k||{},k.from&&g.css(k.from),k.to&&g.css(k.to),(k.addClass||k.removeClass)&&(l=k.addClass,n=k.removeClass,k=a.get(g)||{},l=f(k,l,!0),n=f(k,n,!1),(l||n)&&(a.put(g,k),c.push(g),1===c.length&&e.$$postDigest(h))),new d}}}]},Re=["$provide",function(a){var c=this;this.$$registeredAnimations=Object.create(null),this.register=function(d,e){if(d&&"."!==d.charAt(0))throw Nd("notcsel",d);var f=d+"-animation";c.$$registeredAnimations[d.substr(1)]=f,a.factory(f,e)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Nd("nongcls","ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function c(a,d,e){if(e){var l;a:{for(l=0;l<e.length;l++){var k=e[l];if(1===k.nodeType){l=k;break a}}l=void 0}!l||l.parentNode||l.previousElementSibling||(e=null)}e?e.after(a):d.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(f,h,g,l){return h=h&&B(h),g=g&&B(g),h=h||g.parent(),c(f,h,g),a.push(f,"enter",Ia(l))},move:function(f,h,g,l){return h=h&&B(h),g=g&&B(g),h=h||g.parent(),c(f,h,g),a.push(f,"move",Ia(l))},leave:function(c,e){return a.push(c,"leave",Ia(e),function(){c.remove()})},addClass:function(c,e,g){return g=Ia(g),g.addClass=ib(g.addclass,e),a.push(c,"addClass",g)},removeClass:function(c,e,g){return g=Ia(g),g.removeClass=ib(g.removeClass,e),a.push(c,"removeClass",g)},setClass:function(c,e,g,l){return l=Ia(l),l.addClass=ib(l.addClass,e),l.removeClass=ib(l.removeClass,g),a.push(c,"setClass",l)},animate:function(c,e,g,l,k){return k=Ia(k),k.from=k.from?P(k.from,e):e,k.to=k.to?P(k.to,g):g,k.tempClasses=ib(k.tempClasses,l||"ng-inline-animate"),a.push(c,"animate",k)}}}]}],Se=function(){this.$get=["$$rAF","$q",function(a,c){var d=function(){};return d.prototype={done:function(a){this.defer&&this.defer[!0===a?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=c.defer()),this.defer.promise},then:function(a,c){return this.getPromise().then(a,c)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)}},function(c,f){function h(){return a(function(){f.addClass&&(c.addClass(f.addClass),f.addClass=null),f.removeClass&&(c.removeClass(f.removeClass),f.removeClass=null),f.to&&(c.css(f.to),f.to=null),g||l.done(),g=!0}),l}f.cleanupStyles&&(f.from=f.to=null),f.from&&(c.css(f.from),f.from=null);var g,l=new d;return{start:h,end:h}}}]},ga=I("$compile");Dc.$inject=["$provide","$$sanitizeUriProvider"];var Wc=/^((?:x|data)[\:\-_])/i,Of=I("$controller"),Vc=/^(\S+)(\s+as\s+(\w+))?$/,$e=function(){this.$get=["$document",function(a){return function(c){return c?!c.nodeType&&c instanceof B&&(c=c[0]):c=a[0].body,c.offsetWidth+1}}]},ad="application/json",$b={"Content-Type":ad+";charset=utf-8"},Qf=/^\[|^\{(?!\{)/,Rf={"[":/]$/,"{":/}$/},Pf=/^\)\]\}',?\n/,og=I("$http"),ed=function(a){return function(){throw og("legacy",a)}},La=da.$interpolateMinErr=I("$interpolate");La.throwNoconcat=function(a){throw La("noconcat",a)},La.interr=function(a,c){return La("interr",a,c.toString())};var pg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Tf={http:80,https:443,ftp:21},Db=I("$location"),qg={$$html5:!1,$$replace:!1,absUrl:Eb("$$absUrl"),url:function(a){if(v(a))return this.$$url;var c=pg.exec(a);return(c[1]||""===a)&&this.path(decodeURIComponent(c[1])),(c[2]||c[1]||""===a)&&this.search(c[3]||""),this.hash(c[5]||""),this},protocol:Eb("$$protocol"),host:Eb("$$host"),port:Eb("$$port"),path:jd("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(G(a)||V(a))a=a.toString(),this.$$search=yc(a);else{if(!C(a))throw Db("isrcharg");a=ha(a,{}),m(a,function(c,e){null==c&&delete a[e]}),this.$$search=a}break;default:v(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}return this.$$compose(),this},hash:jd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};m([id,cc,bc],function(a){a.prototype=Object.create(qg),a.prototype.state=function(c){if(!arguments.length)return this.$$state;if(a!==bc||!this.$$html5)throw Db("nostate");return this.$$state=v(c)?null:c,this}});var Z=I("$parse"),Uf=Function.prototype.call,Vf=Function.prototype.apply,Wf=Function.prototype.bind,Lb=fa();m("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Lb[a]=!0});var rg={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},ec=function(a){this.options=a};ec.prototype={constructor:ec,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(a))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var c=a+this.peek(),d=c+this.peek(2),e=Lb[c],f=Lb[d];Lb[a]||e||f?(a=f?d:e?c:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,c){return-1!==c.indexOf(a)},peek:function(a){return a=a||1,this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){throw d=d||this.index,c=A(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d,Z("lexerr",a,c,this.text)},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=F(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else{if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:c,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var c=this.text.charAt(this.index);if(!this.isIdent(c)&&!this.isNumber(c))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var h=this.text.charAt(this.index),e=e+h;if(f)"u"===h?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=rg[h]||h,f=!1;else if("\\"===h)f=!0;else{if(h===a)return this.index++,void this.tokens.push({index:c,text:e,constant:!0,value:d});d+=h}this.index++}this.throwError("Unterminated quote",c)}};var s=function(a,c){this.lexer=a,this.options=c};s.Program="Program",s.ExpressionStatement="ExpressionStatement",s.AssignmentExpression="AssignmentExpression",s.ConditionalExpression="ConditionalExpression",s.LogicalExpression="LogicalExpression",s.BinaryExpression="BinaryExpression",s.UnaryExpression="UnaryExpression",s.CallExpression="CallExpression",s.MemberExpression="MemberExpression",s.Identifier="Identifier",s.Literal="Literal",s.ArrayExpression="ArrayExpression",s.Property="Property",s.ObjectExpression="ObjectExpression",s.ThisExpression="ThisExpression",s.NGValueParameter="NGValueParameter",s.prototype={ast:function(a){return this.text=a,this.tokens=this.lexer.lex(a),a=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:s.Program,body:a}},expressionStatement:function(){return{type:s.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();return this.expect("=")&&(a={type:s.AssignmentExpression,left:a,right:this.assignment(),operator:"="}),a},ternary:function(){var c,d,a=this.logicalOR();return this.expect("?")&&(c=this.expression(),this.consume(":"))?(d=this.expression(),{type:s.ConditionalExpression,test:a,alternate:c,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:s.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:s.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var c,a=this.relational();c=this.expect("==","!=","===","!==");)a={type:s.BinaryExpression,operator:c.text,left:a,right:this.relational()};return a},relational:function(){for(var c,a=this.additive();c=this.expect("<",">","<=",">=");)a={type:s.BinaryExpression,operator:c.text,left:a,right:this.additive()};return a},additive:function(){for(var c,a=this.multiplicative();c=this.expect("+","-");)a={type:s.BinaryExpression,operator:c.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var c,a=this.unary();c=this.expect("*","/","%");)a={type:s.BinaryExpression,operator:c.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:s.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.constants.hasOwnProperty(this.peek().text)?a=ha(this.constants[this.consume().text]):this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var c;c=this.expect("(","[",".");)"("===c.text?(a={type:s.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===c.text?(a={type:s.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===c.text?a={type:s.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var c={type:s.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.expression());while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:s.Identifier,name:a.text}},constant:function(){return{type:s.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:s.ArrayExpression,elements:a}},object:function(){var c,a=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;c={type:s.Property,kind:"init"},this.peek().constant?c.key=this.constant():this.peek().identifier?c.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),c.value=this.expression(),a.push(c)}while(this.expect(","));return this.consume("}"),{type:s.ObjectExpression,properties:a}},throwError:function(a,c){throw Z("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index))},consume:function(a){if(0===this.tokens.length)throw Z("ueoe",this.text);var c=this.expect(a);return c||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),c},peekToken:function(){if(0===this.tokens.length)throw Z("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){return this.peekAhead(0,a,c,d,e)},peekAhead:function(a,c,d,e,f){if(this.tokens.length>a){a=this.tokens[a];var h=a.text;if(h===c||h===d||h===e||h===f||!(c||d||e||f))return a}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},constants:{"true":{type:s.Literal,value:!0},"false":{type:s.Literal,value:!1},"null":{type:s.Literal,value:null},undefined:{type:s.Literal,value:w},"this":{type:s.ThisExpression}}},sd.prototype={compile:function(a,c){var d=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:c,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},U(e,d.$filter);var h,f="";return this.stage="assign",(h=qd(e))&&(this.state.computing="assign",f=this.nextId(),this.recurse(h,f),this.return_(f),f="fn.assign="+this.generateFunction("assign","s,v,l")),
h=od(e.body),d.stage="inputs",m(h,function(a,c){var e="fn"+c;d.state[e]={vars:[],body:[],own:{}},d.state.computing=e;var f=d.nextId();d.recurse(a,f),d.return_(f),d.state.inputs.push(e),a.watchId=c}),this.state.computing="fn",this.stage="main",this.recurse(e),f='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+f+this.watchFns()+"return fn;",f=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",f)(this.$filter,Xa,Ba,ld,kd,md,Xf,nd,a),this.state=this.stage=w,f.literal=rd(e),f.constant=e.constant,f},USE:"use",STRICT:"strict",watchFns:function(){var a=[],c=this.state.inputs,d=this;return m(c,function(c){a.push("var "+c+"="+d.generateFunction(c,"s"))}),c.length&&a.push("fn.inputs=["+c.join(",")+"];"),a.join("")},generateFunction:function(a,c){return"function("+c+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],c=this;return m(this.state.filters,function(d,e){a.push(d+"=$filter("+c.escape(e)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,c,d,e,f,h){var g,l,n,p,k=this;if(e=e||y,!h&&A(a.watchId))c=c||this.nextId(),this.if_("i",this.lazyAssign(c,this.computedMember("i",a.watchId)),this.lazyRecurse(a,c,d,e,f,!0));else switch(a.type){case s.Program:m(a.body,function(c,d){k.recurse(c.expression,w,w,function(a){l=a}),d!==a.body.length-1?k.current().body.push(l,";"):k.return_(l)});break;case s.Literal:p=this.escape(a.value),this.assign(c,p),e(p);break;case s.UnaryExpression:this.recurse(a.argument,w,w,function(a){l=a}),p=a.operator+"("+this.ifDefined(l,0)+")",this.assign(c,p),e(p);break;case s.BinaryExpression:this.recurse(a.left,w,w,function(a){g=a}),this.recurse(a.right,w,w,function(a){l=a}),p="+"===a.operator?this.plus(g,l):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(l,0):"("+g+")"+a.operator+"("+l+")",this.assign(c,p),e(p);break;case s.LogicalExpression:c=c||this.nextId(),k.recurse(a.left,c),k.if_("&&"===a.operator?c:k.not(c),k.lazyRecurse(a.right,c)),e(c);break;case s.ConditionalExpression:c=c||this.nextId(),k.recurse(a.test,c),k.if_(c,k.lazyRecurse(a.alternate,c),k.lazyRecurse(a.consequent,c)),e(c);break;case s.Identifier:c=c||this.nextId(),d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name),Xa(a.name),k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){f&&1!==f&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}")),k.assign(c,k.nonComputedMember("s",a.name))})},c&&k.lazyAssign(c,k.nonComputedMember("l",a.name))),(k.state.expensiveChecks||Fb(a.name))&&k.addEnsureSafeObject(c),e(c);break;case s.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId(),c=c||this.nextId(),k.recurse(a.object,g,w,function(){k.if_(k.notNull(g),function(){a.computed?(l=k.nextId(),k.recurse(a.property,l),k.getStringValue(l),k.addEnsureSafeMemberName(l),f&&1!==f&&k.if_(k.not(k.computedMember(g,l)),k.lazyAssign(k.computedMember(g,l),"{}")),p=k.ensureSafeObject(k.computedMember(g,l)),k.assign(c,p),d&&(d.computed=!0,d.name=l)):(Xa(a.property.name),f&&1!==f&&k.if_(k.not(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}")),p=k.nonComputedMember(g,a.property.name),(k.state.expensiveChecks||Fb(a.property.name))&&(p=k.ensureSafeObject(p)),k.assign(c,p),d&&(d.computed=!1,d.name=a.property.name))},function(){k.assign(c,"undefined")}),e(c)},!!f);break;case s.CallExpression:c=c||this.nextId(),a.filter?(l=k.filter(a.callee.name),n=[],m(a.arguments,function(a){var c=k.nextId();k.recurse(a,c),n.push(c)}),p=l+"("+n.join(",")+")",k.assign(c,p),e(c)):(l=k.nextId(),g={},n=[],k.recurse(a.callee,l,g,function(){k.if_(k.notNull(l),function(){k.addEnsureSafeFunction(l),m(a.arguments,function(a){k.recurse(a,k.nextId(),w,function(a){n.push(k.ensureSafeObject(a))})}),g.name?(k.state.expensiveChecks||k.addEnsureSafeObject(g.context),p=k.member(g.context,g.name,g.computed)+"("+n.join(",")+")"):p=l+"("+n.join(",")+")",p=k.ensureSafeObject(p),k.assign(c,p)},function(){k.assign(c,"undefined")}),e(c)}));break;case s.AssignmentExpression:if(l=this.nextId(),g={},!pd(a.left))throw Z("lval");this.recurse(a.left,w,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,l),k.addEnsureSafeObject(k.member(g.context,g.name,g.computed)),k.addEnsureSafeAssignContext(g.context),p=k.member(g.context,g.name,g.computed)+a.operator+l,k.assign(c,p),e(c||p)})},1);break;case s.ArrayExpression:n=[],m(a.elements,function(a){k.recurse(a,k.nextId(),w,function(a){n.push(a)})}),p="["+n.join(",")+"]",this.assign(c,p),e(p);break;case s.ObjectExpression:n=[],m(a.properties,function(a){k.recurse(a.value,k.nextId(),w,function(c){n.push(k.escape(a.key.type===s.Identifier?a.key.name:""+a.key.value)+":"+c)})}),p="{"+n.join(",")+"}",this.assign(c,p),e(p);break;case s.ThisExpression:this.assign(c,"s"),e("s");break;case s.NGValueParameter:this.assign(c,"v"),e("v")}},getHasOwnProperty:function(a,c){var d=a+"."+c,e=this.current().own;return e.hasOwnProperty(d)||(e[d]=this.nextId(!1,a+"&&("+this.escape(c)+" in "+a+")")),e[d]},assign:function(a,c){return a?(this.current().body.push(a,"=",c,";"),a):void 0},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,c){return"ifDefined("+a+","+this.escape(c)+")"},plus:function(a,c){return"plus("+a+","+c+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,c,d){if(!0===a)c();else{var e=this.current().body;e.push("if(",a,"){"),c(),e.push("}"),d&&(e.push("else{"),d(),e.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,c){return a+"."+c},computedMember:function(a,c){return a+"["+c+"]"},member:function(a,c,d){return d?this.computedMember(a,c):this.nonComputedMember(a,c)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+",text)")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,c,d,e,f,h){var g=this;return function(){g.recurse(a,c,d,e,f,h)}},lazyAssign:function(a,c){var d=this;return function(){d.assign(a,c)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(G(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(V(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw Z("esc")},nextId:function(a,c){var d="v"+this.state.nextId++;return a||this.current().vars.push(d+(c?"="+c:"")),d},current:function(){return this.state[this.state.computing]}},td.prototype={compile:function(a,c){var d=this,e=this.astBuilder.ast(a);this.expression=a,this.expensiveChecks=c,U(e,d.$filter);var f,h;(f=qd(e))&&(h=this.recurse(f)),f=od(e.body);var g;f&&(g=[],m(f,function(a,c){var e=d.recurse(a);a.input=e,g.push(e),a.watchId=c}));var l=[];return m(e.body,function(a){l.push(d.recurse(a.expression))}),f=0===e.body.length?function(){}:1===e.body.length?l[0]:function(a,c){var d;return m(l,function(e){d=e(a,c)}),d},h&&(f.assign=function(a,c,d){return h(a,d,c)}),g&&(f.inputs=g),f.literal=rd(e),f.constant=e.constant,f},recurse:function(a,c,d){var e,f,g,h=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case s.Literal:return this.value(a.value,c);case s.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,c);case s.BinaryExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,c);case s.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,c);case s.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),c);case s.Identifier:return Xa(a.name,h.expression),h.identifier(a.name,h.expensiveChecks||Fb(a.name),c,d,h.expression);case s.MemberExpression:return e=this.recurse(a.object,!1,!!d),a.computed||(Xa(a.property.name,h.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,c,d,h.expression):this.nonComputedMember(e,f,h.expensiveChecks,c,d,h.expression);case s.CallExpression:return g=[],m(a.arguments,function(a){g.push(h.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,d,e,h){for(var r=[],m=0;m<g.length;++m)r.push(g[m](a,d,e,h));return a=f.apply(w,r,h),c?{context:w,name:w,value:a}:a}:function(a,d,e,p){var m,r=f(a,d,e,p);if(null!=r.value){Ba(r.context,h.expression),ld(r.value,h.expression),m=[];for(var s=0;s<g.length;++s)m.push(Ba(g[s](a,d,e,p),h.expression));m=Ba(r.value.apply(r.context,m),h.expression)}return c?{value:m}:m};case s.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,d,g,p){var r=e(a,d,g,p);return a=f(a,d,g,p),Ba(r.value,h.expression),md(r.context),r.context[r.name]=a,c?{value:a}:a};case s.ArrayExpression:return g=[],m(a.elements,function(a){g.push(h.recurse(a))}),function(a,d,e,f){for(var h=[],m=0;m<g.length;++m)h.push(g[m](a,d,e,f));return c?{value:h}:h};case s.ObjectExpression:return g=[],m(a.properties,function(a){g.push({key:a.key.type===s.Identifier?a.key.name:""+a.key.value,value:h.recurse(a.value)})}),function(a,d,e,f){for(var h={},m=0;m<g.length;++m)h[g[m].key]=g[m].value(a,d,e,f);return c?{value:h}:h};case s.ThisExpression:return function(a){return c?{value:a}:a};case s.NGValueParameter:return function(a,d,e,f){return c?{value:e}:e}}},"unary+":function(a,c){return function(d,e,f,h){return d=a(d,e,f,h),d=A(d)?+d:0,c?{value:d}:d}},"unary-":function(a,c){return function(d,e,f,h){return d=a(d,e,f,h),d=A(d)?-d:0,c?{value:d}:d}},"unary!":function(a,c){return function(d,e,f,h){return d=!a(d,e,f,h),c?{value:d}:d}},"binary+":function(a,c,d){return function(e,f,h,g){var l=a(e,f,h,g);return e=c(e,f,h,g),l=nd(l,e),d?{value:l}:l}},"binary-":function(a,c,d){return function(e,f,h,g){var l=a(e,f,h,g);return e=c(e,f,h,g),l=(A(l)?l:0)-(A(e)?e:0),d?{value:l}:l}},"binary*":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)*c(e,f,h,g),d?{value:e}:e}},"binary/":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)/c(e,f,h,g),d?{value:e}:e}},"binary%":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)%c(e,f,h,g),d?{value:e}:e}},"binary===":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)===c(e,f,h,g),d?{value:e}:e}},"binary!==":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)!==c(e,f,h,g),d?{value:e}:e}},"binary==":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)==c(e,f,h,g),d?{value:e}:e}},"binary!=":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)!=c(e,f,h,g),d?{value:e}:e}},"binary<":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)<c(e,f,h,g),d?{value:e}:e}},"binary>":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)>c(e,f,h,g),d?{value:e}:e}},"binary<=":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)<=c(e,f,h,g),d?{value:e}:e}},"binary>=":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)>=c(e,f,h,g),d?{value:e}:e}},"binary&&":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)&&c(e,f,h,g),d?{value:e}:e}},"binary||":function(a,c,d){return function(e,f,h,g){return e=a(e,f,h,g)||c(e,f,h,g),d?{value:e}:e}},"ternary?:":function(a,c,d,e){return function(f,h,g,l){return f=a(f,h,g,l)?c(f,h,g,l):d(f,h,g,l),e?{value:f}:f}},value:function(a,c){return function(){return c?{context:w,name:w,value:a}:a}},identifier:function(a,c,d,e,f){return function(h,g,l,k){return h=g&&a in g?g:h,e&&1!==e&&h&&!h[a]&&(h[a]={}),g=h?h[a]:w,c&&Ba(g,f),d?{context:h,name:a,value:g}:g}},computedMember:function(a,c,d,e,f){return function(h,g,l,k){var p,m,n=a(h,g,l,k);return null!=n&&(p=c(h,g,l,k),p=kd(p),Xa(p,f),e&&1!==e&&n&&!n[p]&&(n[p]={}),m=n[p],Ba(m,f)),d?{context:n,name:p,value:m}:m}},nonComputedMember:function(a,c,d,e,f,h){return function(g,l,k,n){return g=a(g,l,k,n),f&&1!==f&&g&&!g[c]&&(g[c]={}),l=null!=g?g[c]:w,(d||Fb(c))&&Ba(l,h),e?{context:g,name:c,value:l}:l}},inputs:function(a,c){return function(d,e,f,h){return h?h[c]:a(d,e,f)}}};var fc=function(a,c,d){this.lexer=a,this.$filter=c,this.options=d,this.ast=new s(this.lexer),this.astCompiler=d.csp?new td(this.ast,c):new sd(this.ast,c)};fc.prototype={constructor:fc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}},fa(),fa();var Yf=Object.prototype.valueOf,Ca=I("$sce"),oa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ga=I("$compile"),$=X.createElement("a"),xd=Aa(Q.location.href);yd.$inject=["$document"],Kc.$inject=["$provide"],zd.$inject=["$locale"],Bd.$inject=["$locale"];var hc=".",hg={yyyy:aa("FullYear",4),yy:aa("FullYear",2,0,!0),y:aa("FullYear",1),MMMM:Hb("Month"),MMM:Hb("Month",!0),MM:aa("Month",2,1),M:aa("Month",1,1),dd:aa("Date",2),d:aa("Date",1),HH:aa("Hours",2),H:aa("Hours",1),hh:aa("Hours",2,-12),h:aa("Hours",1,-12),mm:aa("Minutes",2),m:aa("Minutes",1),ss:aa("Seconds",2),s:aa("Seconds",1),sss:aa("Milliseconds",3),EEEE:Hb("Day"),EEE:Hb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a,c,d){return a=-1*d,a=(a>=0?"+":"")+(Gb(Math[a>0?"floor":"ceil"](a/60),2)+Gb(Math.abs(a%60),2))},ww:Fd(2),w:Fd(1),G:ic,GG:ic,GGG:ic,GGGG:function(a,c){return 0>=a.getFullYear()?c.ERANAMES[0]:c.ERANAMES[1]}},gg=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,fg=/^\-?\d+$/;Ad.$inject=["$locale"];var cg=qa(F),dg=qa(sb);Cd.$inject=["$parse"];var he=qa({restrict:"E",compile:function(a,c){return c.href||c.xlinkHref?void 0:function(a,c){if("a"===c[0].nodeName.toLowerCase()){var f="[object SVGAnimatedString]"===va.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}}),tb={};m(Bb,function(a,c){function d(a,d,f){a.$watch(f[e],function(a){f.$set(c,!!a)})}if("multiple"!=a){var e=ya("ng-"+c),f=d;"checked"===a&&(f=function(a,c,f){f.ngModel!==f[e]&&d(a,c,f)}),tb[e]=function(){return{restrict:"A",priority:100,link:f}}}}),m($c,function(a,c){tb[c]=function(){return{priority:100,link:function(a,e,f){return"ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(jg))?void f.$set("ngPattern",new RegExp(e[1],e[2])):void a.$watch(f[c],function(a){f.$set(c,a)})}}}}),m(["src","srcset","href"],function(a){var c=ya("ng-"+a);tb[c]=function(){return{priority:99,link:function(d,e,f){var h=a,g=a;"href"===a&&"[object SVGAnimatedString]"===va.call(e.prop("href"))&&(g="xlinkHref",f.$attr[g]="xlink:href",h=null),f.$observe(c,function(c){c?(f.$set(g,c),Wa&&h&&e.prop(h,f[g])):"href"===a&&f.$set(g,null)})}}}});var Ib={$addControl:y,$$renameControl:function(a,c){a.$name=c},$removeControl:y,$setValidity:y,$setDirty:y,$setPristine:y,$setSubmitted:y};Gd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Od=function(a){return["$timeout","$parse",function(c,d){function e(a){return""===a?d('this[""]').assign:d(a).assign||y}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Gd,compile:function(d,h){d.addClass(Ya).addClass(mb);var g=h.name?"name":a&&h.ngForm?"ngForm":!1;return{pre:function(a,d,f,h){var m=h[0];if(!("action"in f)){var t=function(c){a.$apply(function(){m.$commitViewValue(),m.$setSubmitted()}),c.preventDefault()};d[0].addEventListener("submit",t,!1),d.on("$destroy",function(){c(function(){d[0].removeEventListener("submit",t,!1)},0,!1)})}(h[1]||m.$$parentForm).$addControl(m);var s=g?e(m.$name):y;g&&(s(a,m),f.$observe(g,function(c){m.$name!==c&&(s(a,w),m.$$parentForm.$$renameControl(m,c),(s=e(m.$name))(a,m))})),d.on("$destroy",function(){m.$$parentForm.$removeControl(m),s(a,w),P(m,Ib)})}}}}}]},ie=Od(),ve=Od(!0),ig=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,sg=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,tg=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ug=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Pd=/^(\d{4})-(\d{2})-(\d{2})$/,Qd=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,lc=/^(\d{4})-W(\d\d)$/,Rd=/^(\d{4})-(\d\d)$/,Sd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Td={text:function(a,c,d,e,f,h){jb(a,c,d,e,f,h),jc(e)},date:kb("date",Pd,Kb(Pd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":kb("datetimelocal",Qd,Kb(Qd,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:kb("time",Sd,Kb(Sd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:kb("week",lc,function(a,c){if(ea(a))return a;if(G(a)){lc.lastIndex=0;var d=lc.exec(a);if(d){var e=+d[1],f=+d[2],h=d=0,g=0,l=0,k=Ed(e),f=7*(f-1);return c&&(d=c.getHours(),h=c.getMinutes(),g=c.getSeconds(),l=c.getMilliseconds()),new Date(e,0,k.getDate()+f,d,h,g,l)}}return NaN},"yyyy-Www"),month:kb("month",Rd,Kb(Rd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,h){if(Id(a,c,d,e),jb(a,c,d,e,f,h),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:ug.test(a)?parseFloat(a):w}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!V(a))throw lb("numfmt",a);a=a.toString()}return a}),A(d.min)||d.ngMin){var g;e.$validators.min=function(a){return e.$isEmpty(a)||v(g)||a>=g},d.$observe("min",function(a){A(a)&&!V(a)&&(a=parseFloat(a,10)),g=V(a)&&!isNaN(a)?a:w,e.$validate()})}if(A(d.max)||d.ngMax){var l;e.$validators.max=function(a){return e.$isEmpty(a)||v(l)||l>=a},d.$observe("max",function(a){A(a)&&!V(a)&&(a=parseFloat(a,10)),l=V(a)&&!isNaN(a)?a:w,e.$validate()})}},url:function(a,c,d,e,f,h){jb(a,c,d,e,f,h),jc(e),e.$$parserName="url",e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||sg.test(d)}},email:function(a,c,d,e,f,h){jb(a,c,d,e,f,h),jc(e),e.$$parserName="email",e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||tg.test(d)}},radio:function(a,c,d,e){v(d.name)&&c.attr("name",++nb),c.on("click",function(a){c[0].checked&&e.$setViewValue(d.value,a&&a.type)}),e.$render=function(){c[0].checked=d.value==e.$viewValue},d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,h,g,l){var k=Jd(l,a,"ngTrueValue",d.ngTrueValue,!0),n=Jd(l,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(a){e.$setViewValue(c[0].checked,a&&a.type)}),e.$render=function(){c[0].checked=e.$viewValue},e.$isEmpty=function(a){return!1===a},e.$formatters.push(function(a){return ka(a,k)}),e.$parsers.push(function(a){return a?k:n})},hidden:y,button:y,submit:y,reset:y,file:y},Ec=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,h,g,l){l[0]&&(Td[F(g.type)]||Td.text)(f,h,g,l[0],c,a,d,e)}}}}],vg=/^(true|false|\d+)$/,Ne=function(){return{restrict:"A",priority:100,compile:function(a,c){return vg.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},ne=["$compile",function(a){return{restrict:"AC",compile:function(c){return a.$$addBindingClass(c),function(c,e,f){a.$$addBindingInfo(e,f.ngBind),e=e[0],c.$watch(f.ngBind,function(a){e.textContent=v(a)?"":a})}}}}],pe=["$interpolate","$compile",function(a,c){return{compile:function(d){return c.$$addBindingClass(d),function(d,f,h){d=a(f.attr(h.$attr.ngBindTemplate)),c.$$addBindingInfo(f,d.expressions),f=f[0],h.$observe("ngBindTemplate",function(a){f.textContent=v(a)?"":a})}}}}],oe=["$sce","$parse","$compile",function(a,c,d){return{restrict:"A",compile:function(e,f){var h=c(f.ngBindHtml),g=c(f.ngBindHtml,function(a){return(a||"").toString()});return d.$$addBindingClass(e),function(c,e,f){d.$$addBindingInfo(e,f.ngBindHtml),c.$watch(g,function(){e.html(a.getTrustedHtml(h(c))||"")})}}}}],Me=qa({restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),qe=kc("",!0),se=kc("Odd",0),re=kc("Even",1),te=Na({compile:function(a,c){c.$set("ngCloak",w),a.removeClass("ng-cloak")}}),ue=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Jc={},wg={blur:!0,focus:!0};m("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=ya("ng-"+a);Jc[c]=["$parse","$rootScope",function(d,e){return{restrict:"A",compile:function(f,h){var g=d(h[c],null,!0);return function(c,d){d.on(a,function(d){var f=function(){g(c,{$event:d})};wg[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var xe=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,h){var g,l,k;c.$watch(e.ngIf,function(c){c?l||h(function(c,f){l=f,c[c.length++]=X.createComment(" end ngIf: "+e.ngIf+" "),g={clone:c},a.enter(c,d.parent(),d)}):(k&&(k.remove(),k=null),l&&(l.$destroy(),l=null),g&&(k=rb(g.clone),a.leave(k).then(function(){k=null}),g=null))})}}}],ye=["$templateRequest","$anchorScroll","$animate",function(a,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:da.noop,compile:function(e,f){var h=f.ngInclude||f.src,g=f.onload||"",l=f.autoscroll;return function(e,f,m,r,t){var v,u,q,s=0,z=function(){u&&(u.remove(),u=null),v&&(v.$destroy(),v=null),q&&(d.leave(q).then(function(){u=null}),u=q,q=null)};e.$watch(h,function(h){var m=function(){!A(l)||l&&!e.$eval(l)||c()},p=++s;h?(a(h,!0).then(function(a){if(p===s){var c=e.$new();r.template=a,a=t(c,function(a){z(),d.enter(a,null,f).then(m)}),v=c,q=a,v.$emit("$includeContentLoaded",h),e.$eval(g)}},function(){p===s&&(z(),e.$emit("$includeContentError",h))}),e.$emit("$includeContentRequested",h)):(z(),r.template=null)})}}}}],Pe=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Mc(f.template,X).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),a(d.contents())(c))}}}],ze=Na({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Le=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,g=h?T(f):f;e.$parsers.push(function(a){if(!v(a)){var c=[];return a&&m(a.split(g),function(a){a&&c.push(h?T(a):a)}),c}}),e.$formatters.push(function(a){return J(a)?a.join(f):w}),e.$isEmpty=function(a){return!a||!a.length}}}},mb="ng-valid",Kd="ng-invalid",Ya="ng-pristine",Jb="ng-dirty",Md="ng-pending",lb=I("ngModel"),xg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,d,e,f,h,g,l,k,n){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=w,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=w,this.$name=n(d.name||"",!1)(a),this.$$parentForm=Ib;var u,p=f(d.ngModel),r=p.assign,t=p,s=r,K=null,q=this;this.$$setOptions=function(a){if((q.$options=a)&&a.getterSetter){var c=f(d.ngModel+"()"),g=f(d.ngModel+"($$$p)");t=function(a){var d=p(a);return x(d)&&(d=c(a)),d},s=function(a,c){x(p(a))?g(a,{$$$p:q.$modelValue}):r(a,q.$modelValue)}}else if(!p.assign)throw lb("nonassign",d.ngModel,xa(e))},this.$render=y,this.$isEmpty=function(a){return v(a)||""===a||null===a||a!==a};var z=0;Hd({ctrl:this,$element:e,set:function(a,c){a[c]=!0},unset:function(a,c){delete a[c]},$animate:h}),this.$setPristine=function(){q.$dirty=!1,q.$pristine=!0,h.removeClass(e,Jb),h.addClass(e,Ya)},this.$setDirty=function(){q.$dirty=!0,q.$pristine=!1,h.removeClass(e,Ya),h.addClass(e,Jb),q.$$parentForm.$setDirty()},this.$setUntouched=function(){q.$touched=!1,q.$untouched=!0,h.setClass(e,"ng-untouched","ng-touched")},this.$setTouched=function(){q.$touched=!0,q.$untouched=!1,h.setClass(e,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){g.cancel(K),q.$viewValue=q.$$lastCommittedViewValue,q.$render()},this.$validate=function(){if(!V(q.$modelValue)||!isNaN(q.$modelValue)){var a=q.$$rawModelValue,c=q.$valid,d=q.$modelValue,e=q.$options&&q.$options.allowInvalid;q.$$runValidators(a,q.$$lastCommittedViewValue,function(f){e||c===f||(q.$modelValue=f?a:w,q.$modelValue!==d&&q.$$writeModelToScope())})}},this.$$runValidators=function(a,c,d){function e(){var d=!0;return m(q.$validators,function(e,f){var h=e(a,c);d=d&&h,g(f,h)}),d?!0:(m(q.$asyncValidators,function(a,c){g(c,null)}),!1)}function f(){var d=[],e=!0;m(q.$asyncValidators,function(f,h){var k=f(a,c);if(!k||!x(k.then))throw lb("$asyncValidators",k);g(h,w),d.push(k.then(function(){g(h,!0)},function(a){e=!1,g(h,!1)}))}),d.length?k.all(d).then(function(){h(e)},y):h(!0)}function g(a,c){l===z&&q.$setValidity(a,c)}function h(a){l===z&&d(a)}z++;var l=z;(function(){var a=q.$$parserName||"parse";return v(u)?(g(a,null),!0):(u||(m(q.$validators,function(a,c){g(c,null)}),m(q.$asyncValidators,function(a,c){g(c,null)})),g(a,u),u)})()&&e()?f():h(!1)},this.$commitViewValue=function(){var a=q.$viewValue;g.cancel(K),(q.$$lastCommittedViewValue!==a||""===a&&q.$$hasNativeValidators)&&(q.$$lastCommittedViewValue=a,q.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var c=q.$$lastCommittedViewValue;if(u=v(c)?w:!0)for(var d=0;d<q.$parsers.length;d++)if(c=q.$parsers[d](c),v(c)){u=!1;break}V(q.$modelValue)&&isNaN(q.$modelValue)&&(q.$modelValue=t(a));var e=q.$modelValue,f=q.$options&&q.$options.allowInvalid;q.$$rawModelValue=c,f&&(q.$modelValue=c,q.$modelValue!==e&&q.$$writeModelToScope()),q.$$runValidators(c,q.$$lastCommittedViewValue,function(a){f||(q.$modelValue=a?c:w,q.$modelValue!==e&&q.$$writeModelToScope())})},this.$$writeModelToScope=function(){s(a,q.$modelValue),m(q.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})},this.$setViewValue=function(a,c){q.$viewValue=a,q.$options&&!q.$options.updateOnDefault||q.$$debounceViewValueCommit(c)},this.$$debounceViewValueCommit=function(c){var d=0,e=q.$options;e&&A(e.debounce)&&(e=e.debounce,V(e)?d=e:V(e[c])?d=e[c]:V(e["default"])&&(d=e["default"])),g.cancel(K),d?K=g(function(){q.$commitViewValue()},d):l.$$phase?q.$commitViewValue():a.$apply(function(){q.$commitViewValue()})},a.$watch(function(){var c=t(a);if(c!==q.$modelValue&&(q.$modelValue===q.$modelValue||c===c)){q.$modelValue=q.$$rawModelValue=c,u=w;for(var d=q.$formatters,e=d.length,f=c;e--;)f=d[e](f);q.$viewValue!==f&&(q.$viewValue=q.$$lastCommittedViewValue=f,q.$render(),q.$$runValidators(c,f,y))}return c})}],Ke=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:xg,priority:1,compile:function(c){return c.addClass(Ya).addClass("ng-untouched").addClass(mb),{pre:function(a,c,f,h){var g=h[0];c=h[1]||g.$$parentForm,g.$$setOptions(h[2]&&h[2].$options),c.$addControl(g),f.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)}),a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(c,e,f,h){var g=h[0];g.$options&&g.$options.updateOn&&e.on(g.$options.updateOn,function(a){g.$$debounceViewValueCommit(a&&a.type)}),e.on("blur",function(e){g.$touched||(a.$$phase?c.$evalAsync(g.$setTouched):c.$apply(g.$setTouched))})}}}}}],yg=/(\s+|^)default(\s+|$)/,Oe=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,c){var d=this;this.$options=ha(a.$eval(c.ngModelOptions)),A(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=T(this.$options.updateOn.replace(yg,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Ae=Na({terminal:!0,priority:1e3}),zg=I("ngOptions"),Ag=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Ie=["$compile","$parse",function(a,c){function d(a,d,e){function f(a,c,d,e,g){this.selectValue=a,this.viewValue=c,this.label=d,this.group=e,this.disabled=g}function n(a){var c;if(!s&&Da(a))c=a;else{c=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&c.push(d)}return c}var m=a.match(Ag);if(!m)throw zg("iexp",a,xa(d));var r=m[5]||m[7],s=m[6];a=/ as /.test(m[0])&&m[1];var v=m[9];d=c(m[2]?m[1]:r);var w=a&&c(a)||d,u=v&&c(v),q=v?function(a,c){return u(e,c)}:function(a){return Ga(a)},z=function(a,c){return q(a,x(a,c))},y=c(m[2]||m[1]),A=c(m[3]||""),O=c(m[4]||""),H=c(m[8]),B={},x=s?function(a,c){return B[s]=c,B[r]=a,B}:function(a){return B[r]=a,B};return{trackBy:v,getTrackByValue:z,getWatchables:c(H,function(a){var c=[];a=a||[];for(var d=n(a),f=d.length,g=0;f>g;g++){var h=a===d?g:d[g],k=x(a[h],h),h=q(a[h],k);c.push(h),(m[2]||m[1])&&(h=y(e,k),c.push(h)),m[4]&&(k=O(e,k),c.push(k))}return c}),getOptions:function(){for(var a=[],c={},d=H(e)||[],g=n(d),h=g.length,m=0;h>m;m++){var p=d===g?m:g[m],r=x(d[p],p),s=w(e,r),p=q(s,r),t=y(e,r),u=A(e,r),r=O(e,r),s=new f(p,s,t,u,r);a.push(s),c[p]=s}return{items:a,selectValueMap:c,getOptionFromViewValue:function(a){return c[z(a)]},getViewValueFromOption:function(a){return v?da.copy(a.viewValue):a.viewValue}}}}}var e=X.createElement("option"),f=X.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(c,g,l,k){function n(a,c){a.element=c,c.disabled=a.disabled,a.label!==c.label&&(c.label=a.label,c.textContent=a.label),a.value!==c.value&&(c.value=a.selectValue)}function p(a,c,d,e){return c&&F(c.nodeName)===d?d=c:(d=e.cloneNode(!1),c?a.insertBefore(d,c):a.appendChild(d)),d}function r(a){for(var c;a;)c=a.nextSibling,Wb(a),a=c}function s(a){var c=q&&q[0],d=H&&H[0];if(c||d)for(;a&&(a===c||a===d||c&&8===c.nodeType);)a=a.nextSibling;return a}function v(){var a=x&&u.readValue();x=C.getOptions();var c={},d=g[0].firstChild;if(O&&g.prepend(q),d=s(d),x.items.forEach(function(a){var h,k;a.group?(h=c[a.group],h||(h=p(g[0],d,"optgroup",f),d=h.nextSibling,h.label=a.group,h=c[a.group]={groupElement:h,currentOptionElement:h.firstChild}),k=p(h.groupElement,h.currentOptionElement,"option",e),n(a,k),h.currentOptionElement=k.nextSibling):(k=p(g[0],d,"option",e),n(a,k),d=k.nextSibling)}),Object.keys(c).forEach(function(a){r(c[a].currentOptionElement)}),r(d),w.$render(),!w.$isEmpty(a)){var h=u.readValue();(C.trackBy?ka(a,h):a===h)||(w.$setViewValue(h),w.$render())}}var w=k[1];if(w){var u=k[0];k=l.multiple;for(var q,z=0,y=g.children(),A=y.length;A>z;z++)if(""===y[z].value){q=y.eq(z);break}var O=!!q,H=B(e.cloneNode(!1));H.val("?");var x,C=d(l.ngOptions,g,c);k?(w.$isEmpty=function(a){return!a||0===a.length},u.writeValue=function(a){x.items.forEach(function(a){a.element.selected=!1}),a&&a.forEach(function(a){(a=x.getOptionFromViewValue(a))&&!a.disabled&&(a.element.selected=!0)})},u.readValue=function(){var a=g.val()||[],c=[];return m(a,function(a){(a=x.selectValueMap[a])&&!a.disabled&&c.push(x.getViewValueFromOption(a))}),c},C.trackBy&&c.$watchCollection(function(){
return J(w.$viewValue)?w.$viewValue.map(function(a){return C.getTrackByValue(a)}):void 0},function(){w.$render()})):(u.writeValue=function(a){var c=x.getOptionFromViewValue(a);c&&!c.disabled?g[0].value!==c.selectValue&&(H.remove(),O||q.remove(),g[0].value=c.selectValue,c.element.selected=!0,c.element.setAttribute("selected","selected")):null===a||O?(H.remove(),O||g.prepend(q),g.val(""),q.prop("selected",!0),q.attr("selected",!0)):(O||q.remove(),g.prepend(H),g.val("?"),H.prop("selected",!0),H.attr("selected",!0))},u.readValue=function(){var a=x.selectValueMap[g.val()];return a&&!a.disabled?(O||q.remove(),H.remove(),x.getViewValueFromOption(a)):null},C.trackBy&&c.$watch(function(){return C.getTrackByValue(w.$viewValue)},function(){w.$render()})),O?(q.remove(),a(q)(c),q.removeClass("ng-scope")):q=B(e.cloneNode(!1)),v(),c.$watchCollection(C.getWatchables,v)}}}}],Be=["$locale","$interpolate","$log",function(a,c,d){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(h,g,l){function k(a){g.text(a||"")}var x,n=l.count,p=l.$attr.when&&g.attr(l.$attr.when),r=l.offset||0,s=h.$eval(p)||{},w={},A=c.startSymbol(),u=c.endSymbol(),q=A+n+"-"+r+u,z=da.noop;m(l,function(a,c){var d=f.exec(c);d&&(d=(d[1]?"-":"")+F(d[2]),s[d]=g.attr(l.$attr[c]))}),m(s,function(a,d){w[d]=c(a.replace(e,q))}),h.$watch(n,function(c){var e=parseFloat(c),f=isNaN(e);f||e in s||(e=a.pluralCat(e-r)),e===x||f&&V(x)&&isNaN(x)||(z(),f=w[e],v(f)?(null!=c&&d.debug("ngPluralize: no rule defined for '"+e+"' in "+p),z=y,k()):z=h.$watch(f,k),x=e)})}}}],Ce=["$parse","$animate",function(a,c){var d=I("ngRepeat"),e=function(a,c,d,e,k,m,p){a[d]=e,k&&(a[k]=m),a.$index=c,a.$first=0===c,a.$last=c===p-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&c))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(f,h){var g=h.ngRepeat,l=X.createComment(" end ngRepeat: "+g+" "),k=g.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!k)throw d("iexp",g);var n=k[1],p=k[2],r=k[3],s=k[4],k=n.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!k)throw d("iidexp",n);var v=k[3]||k[1],y=k[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw d("badident",r);var u,q,z,A,x={$id:Ga};return s?u=a(s):(z=function(a,c){return Ga(c)},A=function(a){return a}),function(a,f,h,k,n){u&&(q=function(c,d,e){return y&&(x[y]=c),x[v]=d,x.$index=e,u(a,x)});var s=fa();a.$watchCollection(p,function(h){var k,p,u,C,G,J,M,I,F,L,t=f[0],x=fa();if(r&&(a[r]=h),Da(h))I=h,p=q||z;else for(L in p=q||A,I=[],h)ta.call(h,L)&&"$"!==L.charAt(0)&&I.push(L);for(C=I.length,L=Array(C),k=0;C>k;k++)if(G=h===I?k:I[k],J=h[G],M=p(G,J,k),s[M])F=s[M],delete s[M],x[M]=F,L[k]=F;else{if(x[M])throw m(L,function(a){a&&a.scope&&(s[a.id]=a)}),d("dupes",g,M,J);L[k]={id:M,scope:w,clone:w},x[M]=!0}for(u in s){if(F=s[u],M=rb(F.clone),c.leave(M),M[0].parentNode)for(k=0,p=M.length;p>k;k++)M[k].$$NG_REMOVED=!0;F.scope.$destroy()}for(k=0;C>k;k++)if(G=h===I?k:I[k],J=h[G],F=L[k],F.scope){u=t;do u=u.nextSibling;while(u&&u.$$NG_REMOVED);F.clone[0]!=u&&c.move(rb(F.clone),null,B(t)),t=F.clone[F.clone.length-1],e(F.scope,k,v,J,y,G,C)}else n(function(a,d){F.scope=d;var f=l.cloneNode(!1);a[a.length++]=f,c.enter(a,null,B(t)),t=f,F.clone=a,x[F.id]=F,e(F.scope,k,v,J,y,G,C)});s=x})}}}}],De=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],we=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ee=Na(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&m(d,function(a,d){c.css(d,"")}),a&&c.css(a)},!0)}),Fe=["$animate",function(a){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var h=[],g=[],l=[],k=[],n=function(a,c){return function(){a.splice(c,1)}};c.$watch(e.ngSwitch||e.on,function(c){var d,e;for(d=0,e=l.length;e>d;++d)a.cancel(l[d]);for(d=l.length=0,e=k.length;e>d;++d){var s=rb(g[d].clone);k[d].$destroy(),(l[d]=a.leave(s)).then(n(l,d))}g.length=0,k.length=0,(h=f.cases["!"+c]||f.cases["?"])&&m(h,function(c){c.transclude(function(d,e){k.push(e);var f=c.element;d[d.length++]=X.createComment(" end ngSwitchWhen: "),g.push({clone:d}),a.enter(d,f.parent(),f)})})})}}}],Ge=Na({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[],e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),He=Na({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:f,element:c})}}),Je=Na({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw I("ngTransclude")("orphan",xa(c));f(function(a){c.empty(),c.append(a)})}}),je=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Bg={$setViewValue:y,$render:y},Cg=["$element","$scope","$attrs",function(a,c,d){var e=this,f=new Ua;e.ngModelCtrl=Bg,e.unknownOption=B(X.createElement("option")),e.renderUnknownOption=function(c){c="? "+Ga(c)+" ?",e.unknownOption.val(c),a.prepend(e.unknownOption),a.val(c)},c.$on("$destroy",function(){e.renderUnknownOption=y}),e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()},e.readValue=function(){return e.removeUnknownOption(),a.val()},e.writeValue=function(c){e.hasOption(c)?(e.removeUnknownOption(),a.val(c),""===c&&e.emptyOption.prop("selected",!0)):null==c&&e.emptyOption?(e.removeUnknownOption(),a.val("")):e.renderUnknownOption(c)},e.addOption=function(a,c){Ta(a,'"option value"'),""===a&&(e.emptyOption=c);var d=f.get(a)||0;f.put(a,d+1)},e.removeOption=function(a){var c=f.get(a);c&&(1===c?(f.remove(a),""===a&&(e.emptyOption=w)):f.put(a,c-1))},e.hasOption=function(a){return!!f.get(a)}}],ke=function(){return{restrict:"E",require:["select","?ngModel"],controller:Cg,link:function(a,c,d,e){var f=e[1];if(f){var h=e[0];if(h.ngModelCtrl=f,f.$render=function(){h.writeValue(f.$viewValue)},c.on("change",function(){a.$apply(function(){f.$setViewValue(h.readValue())})}),d.multiple){h.readValue=function(){var a=[];return m(c.find("option"),function(c){c.selected&&a.push(c.value)}),a},h.writeValue=function(a){var d=new Ua(a);m(c.find("option"),function(a){a.selected=A(d.get(a.value))})};var g,l=NaN;a.$watch(function(){l!==f.$viewValue||ka(g,f.$viewValue)||(g=ja(f.$viewValue),f.$render()),l=f.$viewValue}),f.$isEmpty=function(a){return!a||0===a.length}}}}}},me=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(c,d){if(A(d.value))var e=a(d.value,!0);else{var f=a(c.text(),!0);f||d.$set("value",c.text())}return function(a,c,d){function k(a){p.addOption(a,c),p.ngModelCtrl.$render(),c[0].hasAttribute("selected")&&(c[0].selected=!0)}var m=c.parent(),p=m.data("$selectController")||m.parent().data("$selectController");if(p&&p.ngModelCtrl){if(e){var r;d.$observe("value",function(a){A(r)&&p.removeOption(r),r=a,k(a)})}else f?a.$watch(f,function(a,c){d.$set("value",a),c!==a&&p.removeOption(c),k(a)}):k(d.value);c.on("$destroy",function(){p.removeOption(d.value),p.ngModelCtrl.$render()})}}}}}],le=qa({restrict:"E",terminal:!1}),Gc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},Fc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,h=d.ngPattern||d.pattern;d.$observe("pattern",function(a){if(G(a)&&0<a.length&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw I("ngPattern")("noregexp",h,a,xa(c));f=a||w,e.$validate()}),e.$validators.pattern=function(a,c){return e.$isEmpty(c)||v(f)||f.test(c)}}}}},Ic=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=-1;d.$observe("maxlength",function(a){a=Y(a),f=isNaN(a)?-1:a,e.$validate()}),e.$validators.maxlength=function(a,c){return 0>f||e.$isEmpty(c)||c.length<=f}}}}},Hc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=Y(a)||0,e.$validate()}),e.$validators.minlength=function(a,c){return e.$isEmpty(c)||c.length>=f}}}}};Q.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(ce(),ee(da),da.module("ngLocale",[],["$provide",function(a){function c(a){a+="";var c=a.indexOf(".");return-1==c?0:a.length-c-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",pluralCat:function(a,e){var f=0|a,h=e;return w===h&&(h=Math.min(c(a),3)),Math.pow(10,h),1==f&&0==h?"one":"other"}})}]),B(X).ready(function(){Zd(X,zc)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(G,t,Ra){"use strict";function va(a,b,c){if(!a)throw ngMinErr("areq",b||"?",c||"required");return a}function wa(a,b){return a||b?a?b?(W(a)&&(a=a.join(" ")),W(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function Ha(a){var b={};return a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from),b}function S(a,b,c){var d="";return a=W(a)?a:a&&M(a)&&a.length?a.split(/\s+/):[],q(a,function(a,u){a&&0<a.length&&(d+=u>0?" ":"",d+=c?b+a:a+b)}),d}function Ia(a){if(a instanceof J)switch(a.length){case 0:return[];case 1:if(1===a[0].nodeType)return a;break;default:return J(la(a))}return 1===a.nodeType?J(a):void 0}function la(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(1==c.nodeType)return c}}function Ja(a,b,c){q(b,function(b){a.addClass(b,c)})}function Ka(a,b,c){q(b,function(b){a.removeClass(b,c)})}function P(a){return function(b,c){c.addClass&&(Ja(a,b,c.addClass),c.addClass=null),c.removeClass&&(Ka(a,b,c.removeClass),c.removeClass=null)}}function ha(a){if(a=a||{},!a.$$prepared){var b=a.domOperation||L;a.domOperation=function(){a.$$domOperationFired=!0,b(),b=L},a.$$prepared=!0}return a}function da(a,b){xa(a,b),ya(a,b)}function xa(a,b){b.from&&(a.css(b.from),b.from=null)}function ya(a,b){b.to&&(a.css(b.to),b.to=null)}function Q(a,b,c){var d=(b.addClass||"")+" "+(c.addClass||""),g=(b.removeClass||"")+" "+(c.removeClass||"");return a=La(a.attr("class"),d,g),c.preparationClasses&&(b.preparationClasses=X(c.preparationClasses,b.preparationClasses),delete c.preparationClasses),d=b.domOperation!==L?b.domOperation:null,za(b,c),d&&(b.domOperation=d),b.addClass=a.addClass?a.addClass:null,b.removeClass=a.removeClass?a.removeClass:null,b}function La(a,b,c){function d(a){M(a)&&(a=a.split(" "));var b={};return q(a,function(a){a.length&&(b[a]=!0)}),b}var g={};a=d(a),b=d(b),q(b,function(a,b){g[b]=1}),c=d(c),q(c,function(a,b){g[b]=1===g[b]?null:-1});var u={addClass:"",removeClass:""};return q(g,function(b,c){var g,d;1===b?(g="addClass",d=!a[c]):-1===b&&(g="removeClass",d=a[c]),d&&(u[g].length&&(u[g]+=" "),u[g]+=c)}),u}function H(a){return a instanceof t.element?a[0]:a}function Ma(a,b,c){var d="";b&&(d=S(b,"ng-",!0)),c.addClass&&(d=X(d,S(c.addClass,"-add"))),c.removeClass&&(d=X(d,S(c.removeClass,"-remove"))),d.length&&(c.preparationClasses=d,a.addClass(d))}function ia(a,b){var c=b?"-"+b+"s":"";return ea(a,[fa,c]),[fa,c]}function ma(a,b){var c=b?"paused":"",d=T+"PlayState";return ea(a,[d,c]),[d,c]}function ea(a,b){a.style[b[0]]=b[1]}function X(a,b){return a?b?a+" "+b:a:b}function Aa(a,b,c){var d=Object.create(null),g=a.getComputedStyle(b)||{};return q(c,function(a,b){var c=g[a];if(c){var f=c.charAt(0);("-"===f||"+"===f||f>=0)&&(c=Na(c)),0===c&&(c=null),d[b]=c}}),d}function Na(a){var b=0;return a=a.split(/\s*,\s*/),q(a,function(a){"s"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a=parseFloat(a)||0,b=b?Math.max(a,b):a}),b}function na(a){return 0===a||null!=a}function Ba(a,b){var c=N,d=a+"s";return b?c+="Duration":d+=" linear all",[c,d]}function Ca(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){return(b=a[b])?b.total:0},get:function(b){return(b=a[b])&&b.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function Da(a,b,c){q(c,function(c){a[c]=U(a[c])?a[c]:b.style.getPropertyValue(c)})}var N,ra,T,sa,L=t.noop,za=t.extend,J=t.element,q=t.forEach,W=t.isArray,M=t.isString,oa=t.isObject,pa=t.isUndefined,U=t.isDefined,Ea=t.isFunction,qa=t.isElement;pa(G.ontransitionend)&&U(G.onwebkittransitionend)?(N="WebkitTransition",ra="webkitTransitionEnd transitionend"):(N="transition",ra="transitionend"),pa(G.onanimationend)&&U(G.onwebkitanimationend)?(T="WebkitAnimation",sa="webkitAnimationEnd animationend"):(T="animation",sa="animationend");var ja=T+"Delay",ta=T+"Duration",fa=N+"Delay";G=N+"Duration";var Oa={transitionDuration:G,transitionDelay:fa,transitionProperty:N+"Property",animationDuration:ta,animationDelay:ja,animationIterationCount:T+"IterationCount"},Pa={transitionDuration:G,transitionDelay:fa,animationDuration:ta,animationDelay:ja};t.module("ngAnimate",[]).directive("ngAnimateChildren",[function(){return function(a,b,c){a=c.ngAnimateChildren,t.isString(a)&&0===a.length?b.data("$$ngAnimateChildren",!0):c.$observe("ngAnimateChildren",function(a){b.data("$$ngAnimateChildren","on"===a||"true"===a)})}}]).factory("$$rAFScheduler",["$$rAF",function(a){function b(a){d=d.concat(a),c()}function c(){if(d.length){for(var b=d.shift(),z=0;z<b.length;z++)b[z]();g||a(function(){g||c()})}}var d,g;return d=b.queue=[],b.waitUntilQuiet=function(b){g&&g(),g=a(function(){g=null,b(),c()})},b}]).factory("$$AnimateRunner",["$q","$sniffer","$$animateAsyncRun",function(a,b,c){function d(a){this.setHost(a),this._doneCallbacks=[],this._runInAnimationFrame=c(),this._state=0}return d.chain=function(a,b){function c(){d===a.length?b(!0):a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()},d.all=function(a,b){function c(z){f=f&&z,++d===a.length&&b(f)}var d=0,f=!0;q(a,function(a){a.done(c)})},d.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:L,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._runInAnimationFrame(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}},d}]).factory("$$animateAsyncRun",["$$rAF",function(a){function b(b){c.push(b),1<c.length||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;return b(function(){a=!0}),function(c){a?c():b(c)}}}]).provider("$$animateQueue",["$animateProvider",function(a){function b(a,b,c,q){return d[a].some(function(a){return a(b,c,q)})}function c(a,b){a=a||{};var c=0<(a.addClass||"").length,d=0<(a.removeClass||"").length;return b?c&&d:c||d}var d=this.rules={skip:[],cancel:[],join:[]};d.join.push(function(a,b,d){return!b.structural&&c(b.options)}),d.skip.push(function(a,b,d){return!b.structural&&!c(b.options)}),d.skip.push(function(a,b,c){return"leave"==c.event&&b.structural}),d.skip.push(function(a,b,c){return c.structural&&2===c.state&&!b.structural}),d.cancel.push(function(a,b,c){return c.structural&&b.structural}),d.cancel.push(function(a,b,c){return 2===c.state&&b.structural}),d.cancel.push(function(a,b,c){return a=b.options,c=c.options,a.addClass&&a.addClass===c.removeClass||a.removeClass&&a.removeClass===c.addClass}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(d,u,z,x,f,k,$,t,h,I){function A(){var a=!1;return function(b){a?b():u.$$postDigest(function(){a=!0,b()})}}function Y(a,b){var c=H(a),e=[],d=v[b];return d&&q(d,function(a){a.node.contains(c)&&e.push(a.callback)}),e}function E(a,e,l){function n(b,c,e,v){z(function(){var b=Y(a,c);b.length&&d(function(){q(b,function(b){b(a,e,v)})})}),b.progress(c,e,v)}function v(b){var c=a,e=l;e.preparationClasses&&(c.removeClass(e.preparationClasses),e.preparationClasses=null),e.activeClasses&&(c.removeClass(e.activeClasses),e.activeClasses=null),Ga(a,l),da(a,l),l.domOperation(),f.complete(!b)}var s,C;(a=Ia(a))&&(s=H(a),C=a.parent()),l=ha(l);var f=new $,z=A();if(W(l.addClass)&&(l.addClass=l.addClass.join(" ")),l.addClass&&!M(l.addClass)&&(l.addClass=null),W(l.removeClass)&&(l.removeClass=l.removeClass.join(" ")),l.removeClass&&!M(l.removeClass)&&(l.removeClass=null),l.from&&!oa(l.from)&&(l.from=null),l.to&&!oa(l.to)&&(l.to=null),!s)return v(),f;var h=[s.className,l.addClass,l.removeClass].join(" ");if(!Qa(h))return v(),f;var E=0<=["enter","move","leave"].indexOf(e),x=!F||D.get(s),h=!x&&m.get(s)||{},I=!!h.state;if(x||I&&1==h.state||(x=!ka(a,C,e)),x)return v(),f;if(E&&w(a),C={structural:E,element:a,event:e,close:v,options:l,runner:f},I){if(b("skip",a,C,h))return 2===h.state?(v(),f):(Q(a,h.options,l),h.runner);if(b("cancel",a,C,h))if(2===h.state)h.runner.end();else{if(!h.structural)return Q(a,h.options,C.options),h.runner;h.close()}else if(b("join",a,C,h)){if(2!==h.state)return Ma(a,E?e:null,l),e=C.event=h.event,l=Q(a,h.options,C.options),h.runner;Q(a,l,{})}}else Q(a,l,{});if((I=C.structural)||(I="animate"===C.event&&0<Object.keys(C.options.to||{}).length||c(C.options)),!I)return v(),y(a),f;var t=(h.counter||0)+1;return C.counter=t,r(a,1,C),u.$$postDigest(function(){var b=m.get(s),d=!b,b=b||{},h=0<(a.parent()||[]).length&&("animate"===b.event||b.structural||c(b.options));d||b.counter!==t||!h?(d&&(Ga(a,l),da(a,l)),(d||E&&b.event!==e)&&(l.domOperation(),f.end()),h||y(a)):(e=!b.structural&&c(b.options,!0)?"setClass":b.event,r(a,2),b=k(a,e,b.options),b.done(function(b){v(!b),(b=m.get(s))&&b.counter===t&&y(H(a)),n(f,e,"close",{})}),f.setHost(b),n(f,e,"start",{}))}),f}function w(a){a=H(a).querySelectorAll("[data-ng-animate]"),q(a,function(a){var b=parseInt(a.getAttribute("data-ng-animate")),c=m.get(a);switch(b){case 2:c.runner.end();case 1:c&&m.remove(a)}})}function y(a){a=H(a),a.removeAttribute("data-ng-animate"),m.remove(a)}function e(a,b){return H(a)===H(b)}function ka(a,b,c){c=J(x[0].body);var y,d=e(a,c)||"HTML"===a[0].nodeName,v=e(a,z),n=!1;for((a=a.data("$ngAnimatePin"))&&(b=a);b&&b.length&&(v||(v=e(b,z)),a=b[0],1===a.nodeType);){var r=m.get(a)||{};if(n||(n=r.structural||D.get(a)),(pa(y)||!0===y)&&(a=b.data("$$ngAnimateChildren"),U(a)&&(y=a)),n&&!1===y)break;v||(v=e(b,z),v||(a=b.data("$ngAnimatePin"))&&(b=a)),d||(d=e(b,c)),b=b.parent()}return(!n||y)&&v&&d}function r(a,b,c){c=c||{},c.state=b,a=H(a),a.setAttribute("data-ng-animate",b),c=(b=m.get(a))?za(b,c):c,m.put(a,c)}var m=new f,D=new f,F=null,s=u.$watch(function(){return 0===t.totalPendingRequests},function(a){a&&(s(),u.$$postDigest(function(){u.$$postDigest(function(){null===F&&(F=!0)})}))}),v={},n=a.classNameFilter(),Qa=n?function(a){return n.test(a)}:function(){return!0},Ga=P(h);return{on:function(a,b,c){b=la(b),v[a]=v[a]||[],v[a].push({node:b,callback:c})},off:function(a,b,c){function e(a,b,c){var d=la(b);return a.filter(function(a){return!(a.node===d&&(!c||a.callback===c))})}var d=v[a];d&&(v[a]=1===arguments.length?null:e(d,b,c))},pin:function(a,b){va(qa(a),"element","not an element"),va(qa(b),"parentElement","not an element"),a.data("$ngAnimatePin",b)},push:function(a,b,c,e){return c=c||{},c.domOperation=e,E(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!F;else if(qa(a)){var e=H(a),d=D.get(e);1===c?b=!d:(b=!!b)?d&&D.remove(e):D.put(e,!0)}else b=F=!!a;return b}}}]}]).provider("$$animation",["$animateProvider",function(a){function b(a){return a.data("$$animationRunner")}var c=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(a,g,u,z,x,f){function k(a){function b(a){if(a.processed)return a;a.processed=!0;var e=a.domNode,d=e.parentNode;f.put(e,a);for(var r;d;){if(r=f.get(d)){r.processed||(r=b(r));break}d=d.parentNode}return(r||c).children.push(a),a}var d,c={children:[]},f=new x;for(d=0;d<a.length;d++){var g=a[d];f.put(g.domNode,a[d]={domNode:g.domNode,fn:g.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return function(a){var d,b=[],c=[];for(d=0;d<a.children.length;d++)c.push(a.children[d]);a=c.length;var m=0,f=[];for(d=0;d<c.length;d++){var g=c[d];0>=a&&(a=m,m=0,b.push(f),f=[]),f.push(g.fn),g.children.forEach(function(a){m++,c.push(a)}),a--}return f.length&&b.push(f),b}(c)}var $=[],t=P(a);return function(h,x,A){function Y(a){a=a.hasAttribute("ng-animate-ref")?[a]:a.querySelectorAll("[ng-animate-ref]");var b=[];return q(a,function(a){var c=a.getAttribute("ng-animate-ref");c&&c.length&&b.push(a)}),b}function E(a){var b=[],c={};q(a,function(a,e){var d=H(a.element),v=0<=["enter","move"].indexOf(a.event),d=a.structural?Y(d):[];if(d.length){var m=v?"to":"from";q(d,function(a){var b=a.getAttribute("ng-animate-ref");c[b]=c[b]||{},c[b][m]={animationID:e,element:J(a)}})}else b.push(a)});var e={},d={};return q(c,function(c,m){var f=c.from,y=c.to;if(f&&y){var g=a[f.animationID],r=a[y.animationID],s=f.animationID.toString();if(!d[s]){var h=d[s]={structural:!0,beforeStart:function(){g.beforeStart(),r.beforeStart()},close:function(){g.close(),r.close()},classes:w(g.classes,r.classes),from:g,to:r,anchors:[]};h.classes.length?b.push(h):(b.push(g),b.push(r))}d[s].anchors.push({out:f.element,"in":y.element})}else f=f?f.animationID:y.animationID,y=f.toString(),e[y]||(e[y]=!0,b.push(a[f]))}),b}function w(a,b){a=a.split(" "),b=b.split(" ");for(var c=[],e=0;e<a.length;e++){var d=a[e];if("ng-"!==d.substring(0,3))for(var m=0;m<b.length;m++)if(d===b[m]){c.push(d);break}}return c.join(" ")}function y(a){for(var b=c.length-1;b>=0;b--){var e=c[b];if(u.has(e)&&(e=u.get(e)(a)))return e}}function e(a,c){a.from&&a.to?(b(a.from.element).setHost(c),b(a.to.element).setHost(c)):b(a.element).setHost(c)}function ka(){var a=b(h);!a||"leave"===x&&A.$$domOperationFired||a.end()}function r(b){h.off("$destroy",ka),h.removeData("$$animationRunner"),t(h,A),da(h,A),A.domOperation(),s&&a.removeClass(h,s),h.removeClass("ng-animate"),D.complete(!b)}A=ha(A);var m=0<=["enter","move","leave"].indexOf(x),D=new z({end:function(){r()},cancel:function(){r(!0)}});if(!c.length)return r(),D;h.data("$$animationRunner",D);var F=wa(h.attr("class"),wa(A.addClass,A.removeClass)),s=A.tempClasses;return s&&(F+=" "+s,A.tempClasses=null),$.push({element:h,classes:F,event:x,structural:m,options:A,beforeStart:function(){h.addClass("ng-animate"),s&&a.addClass(h,s)},close:r}),h.on("$destroy",ka),1<$.length?D:(g.$$postDigest(function(){var a=[];q($,function(c){b(c.element)?a.push(c):c.close()}),$.length=0;var c=E(a),d=[];q(c,function(a){d.push({domNode:H(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var c,d=a.close;if(b(a.anchors?a.from.element||a.to.element:a.element)){var m=y(a);m&&(c=m.start)}c?(c=c(),c.done(function(a){d(!a)}),e(a,c)):d()}})}),f(k(d))}),D)}}]}]).provider("$animateCss",["$animateProvider",function(a){var b=Ca(),c=Ca();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$animate",function(a,g,u,z,x,f,k,t){function Fa(a,b){var c=a.parentNode;return(c.$$ngAnimateParentKey||(c.$$ngAnimateParentKey=++E))+"-"+a.getAttribute("class")+"-"+b}function h(f,e,h,r){var m;return 0<b.count(h)&&(m=c.get(h),m||(e=S(e,"-stagger"),g.addClass(f,e),m=Aa(a,f,r),m.animationDuration=Math.max(m.animationDuration,0),m.transitionDuration=Math.max(m.transitionDuration,0),g.removeClass(f,e),c.put(h,m))),m||{}}function I(a){w.push(a),k.waitUntilQuiet(function(){b.flush(),c.flush();for(var a=x(),d=0;d<w.length;d++)w[d](a);w.length=0})}function A(c,e,f){return e=b.get(f),e||(e=Aa(a,c,Oa),"infinite"===e.animationIterationCount&&(e.animationIterationCount=1)),b.put(f,e),c=e,f=c.animationDelay,e=c.transitionDelay,c.maxDelay=f&&e?Math.max(f,e):f||e,c.maxDuration=Math.max(c.animationDuration*c.animationIterationCount,c.transitionDuration),c}var Y=P(g),E=0,w=[];return function(a,c){function d(){m()}function r(){m(!0)}function m(b){E||ua&&l||(E=!0,l=!1,c.$$skipPreparationClasses||g.removeClass(a,Z),g.removeClass(a,X),ma(n,!1),ia(n,!1),q(w,function(a){n.style[a[0]]=""}),Y(a,c),da(a,c),Object.keys(v).length&&q(v,function(a,b){a?n.style.setProperty(b,a):n.style.removeProperty(b)}),c.onDone&&c.onDone(),G&&G.complete(!b))}function D(a){p.blockTransition&&ia(n,a),p.blockKeyframeAnimation&&ma(n,!!a)}function F(){return G=new u({end:d,cancel:r}),I(L),m(),{$$willAnimate:!1,start:function(){return G},end:d}}function s(){function b(){if(!E){if(D(!1),q(w,function(a){n.style[a[0]]=a[1]}),Y(a,c),g.addClass(a,X),p.recalculateTimingStyles){if(ga=n.className+" "+Z,aa=Fa(n,ga),B=A(n,ga,aa),V=B.maxDelay,C=Math.max(V,0),K=B.maxDuration,0===K)return void m();p.hasTransitions=0<B.transitionDuration,p.hasAnimations=0<B.animationDuration}if(p.applyAnimationDelay&&(V="boolean"!=typeof c.delay&&na(c.delay)?parseFloat(c.delay):V,C=Math.max(V,0),B.animationDelay=V,ca=[ja,V+"s"],w.push(ca),n.style[ca[0]]=ca[1]),M=1e3*C,P=1e3*K,c.easing){var s,k=c.easing;p.hasTransitions&&(s=N+"TimingFunction",w.push([s,k]),n.style[s]=k),p.hasAnimations&&(s=T+"TimingFunction",w.push([s,k]),n.style[s]=k)}B.transitionDuration&&h.push(ra),B.animationDuration&&h.push(sa),r=Date.now();var l=M+1.5*P;s=r+l;var k=a.data("$$animateCss")||[],x=!0;if(k.length){var F=k[0];(x=s>F.expectedEndTime)?z.cancel(F.timer):k.push(m)}x&&(l=z(d,l,!1),k[0]={timer:l,expectedEndTime:s},k.push(m),a.data("$$animateCss",k)),a.on(h.join(" "),f),c.to&&(c.cleanupStyles&&Da(v,n,Object.keys(c.to)),ya(a,c))}}function d(){var b=a.data("$$animateCss");if(b){for(var c=1;c<b.length;c++)b[c]();a.removeData("$$animateCss")}}function f(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now(),b=parseFloat(b.elapsedTime.toFixed(3)),Math.max(a-r,0)>=M&&b>=K&&(ua=!0,m())}if(!E)if(n.parentNode){var r,h=[],s=function(a){if(ua)l&&a&&(l=!1,m());else if(l=!a,B.animationDuration)if(a=ma(n,l),l)w.push(a);else{var b=w,c=b.indexOf(a);a>=0&&b.splice(c,1)}},k=U>0&&(B.transitionDuration&&0===R.transitionDuration||B.animationDuration&&0===R.animationDuration)&&Math.max(R.animationDelay,R.transitionDelay);k?z(b,Math.floor(k*U*1e3),!1):b(),J.resume=function(){s(!0)},J.pause=function(){s(!1)}}else m()}var v={},n=H(a);if(!n||!n.parentNode||!t.enabled())return F();c=ha(c);var E,l,ua,G,J,C,M,K,P,w=[],x=a.attr("class"),k=Ha(c);if(0===c.duration||!f.animations&&!f.transitions)return F();var ba=c.event&&W(c.event)?c.event.join(" "):c.event,Q="",O="";ba&&c.structural?Q=S(ba,"ng-",!0):ba&&(Q=ba),c.addClass&&(O+=S(c.addClass,"-add")),c.removeClass&&(O.length&&(O+=" "),O+=S(c.removeClass,"-remove")),c.applyClassesEarly&&O.length&&Y(a,c);var Z=[Q,O].join(" ").trim(),ga=x+" "+Z,X=S(Z,"-active"),x=k.to&&0<Object.keys(k.to).length;if(!(0<(c.keyframeStyle||"").length||x||Z))return F();var aa,R;0<c.stagger?(k=parseFloat(c.stagger),R={transitionDelay:k,animationDelay:k,transitionDuration:0,animationDuration:0}):(aa=Fa(n,ga),R=h(n,Z,aa,Pa)),c.$$skipPreparationClasses||g.addClass(a,Z),c.transitionStyle&&(k=[N,c.transitionStyle],ea(n,k),w.push(k)),0<=c.duration&&(k=0<n.style[N].length,k=Ba(c.duration,k),ea(n,k),w.push(k)),c.keyframeStyle&&(k=[T,c.keyframeStyle],ea(n,k),w.push(k));var U=R?0<=c.staggerIndex?c.staggerIndex:b.count(aa):0;(ba=0===U)&&!c.skipBlocking&&ia(n,9999);var B=A(n,ga,aa),V=B.maxDelay;C=Math.max(V,0),K=B.maxDuration;var p={};if(p.hasTransitions=0<B.transitionDuration,p.hasAnimations=0<B.animationDuration,p.hasTransitionAll=p.hasTransitions&&"all"==B.transitionProperty,p.applyTransitionDuration=x&&(p.hasTransitions&&!p.hasTransitionAll||p.hasAnimations&&!p.hasTransitions),p.applyAnimationDuration=c.duration&&p.hasAnimations,p.applyTransitionDelay=na(c.delay)&&(p.applyTransitionDuration||p.hasTransitions),p.applyAnimationDelay=na(c.delay)&&p.hasAnimations,p.recalculateTimingStyles=0<O.length,(p.applyTransitionDuration||p.applyAnimationDuration)&&(K=c.duration?parseFloat(c.duration):K,p.applyTransitionDuration&&(p.hasTransitions=!0,B.transitionDuration=K,k=0<n.style[N+"Property"].length,w.push(Ba(K,k))),p.applyAnimationDuration&&(p.hasAnimations=!0,B.animationDuration=K,w.push([ta,K+"s"]))),0===K&&!p.recalculateTimingStyles)return F();if(null!=c.delay){var ca=parseFloat(c.delay);p.applyTransitionDelay&&w.push([fa,ca+"s"]),p.applyAnimationDelay&&w.push([ja,ca+"s"])}return null==c.duration&&0<B.transitionDuration&&(p.recalculateTimingStyles=p.recalculateTimingStyles||ba),M=1e3*C,P=1e3*K,c.skipBlocking||(p.blockTransition=0<B.transitionDuration,p.blockKeyframeAnimation=0<B.animationDuration&&0<R.animationDelay&&0===R.animationDuration),c.from&&(c.cleanupStyles&&Da(v,n,Object.keys(c.from)),xa(a,c)),p.blockTransition||p.blockKeyframeAnimation?D(K):c.skipBlocking||ia(n,!1),{$$willAnimate:!0,end:d,start:function(){return E?void 0:(J={end:d,cancel:r,resume:null,pause:null},G=new u(J),I(s),G)}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(a){a.drivers.push("$$animateCssDriver"),this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,c,d,g,u,z,x){function f(a){return a.replace(/\bng-\S+\b/g,"")}function k(a,b){return M(a)&&(a=a.split(" ")),M(b)&&(b=b.split(" ")),a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function t(c,h,g){function x(a){var b={},c=H(a).getBoundingClientRect();return q(["width","height","top","left"],function(a){var d=c[a];switch(a){case"top":d+=I.scrollTop;break;case"left":d+=I.scrollLeft}b[a]=Math.floor(d)+"px"}),b}function e(){var c=f(g.attr("class")||""),d=k(c,m),c=k(m,c),d=a(r,{to:x(g),addClass:"ng-anchor-in "+d,removeClass:"ng-anchor-out "+c,delay:!0});return d.$$willAnimate?d:null}function z(){r.remove(),h.removeClass("ng-animate-shim"),g.removeClass("ng-animate-shim")}var r=J(H(h).cloneNode(!0)),m=f(r.attr("class")||"");h.addClass("ng-animate-shim"),g.addClass("ng-animate-shim"),r.addClass("ng-anchor"),A.append(r);var D;if(c=function(){var c=a(r,{addClass:"ng-anchor-out",delay:!0,from:x(h)});return c.$$willAnimate?c:null}(),!c&&(D=e(),!D))return z();var F=c||D;return{start:function(){function a(){c&&c.end()}var b,c=F.start();return c.done(function(){return c=null,!D&&(D=e())?(c=D.start(),c.done(function(){c=null,z(),b.complete()}),c):(z(),void b.complete());
}),b=new d({end:a,cancel:a})}}}function G(a,b,c,f){var e=h(a,L),g=h(b,L),k=[];return q(f,function(a){(a=t(c,a.out,a["in"]))&&k.push(a)}),e||g||0!==k.length?{start:function(){function a(){q(b,function(a){a.end()})}var b=[];e&&b.push(e.start()),g&&b.push(g.start()),q(k,function(a){b.push(a.start())});var c=new d({end:a,cancel:a});return d.all(b,function(a){c.complete(a)}),c}}:void 0}function h(c){var d=c.element,f=c.options||{};return c.structural&&(f.event=c.event,f.structural=!0,f.applyClassesEarly=!0,"leave"===c.event&&(f.onDone=f.domOperation)),f.preparationClasses&&(f.event=X(f.event,f.preparationClasses)),c=a(d,f),c.$$willAnimate?c:null}if(!u.animations&&!u.transitions)return L;var I=x[0].body;c=H(g);var A=J(c.parentNode&&11===c.parentNode.nodeType||I.contains(c)?c:I);return P(z),function(a){return a.from&&a.to?G(a.from,a.to,a.classes,a.anchors):h(a)}}]}]).provider("$$animateJs",["$animateProvider",function(a){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function g(c){c=W(c)?c:c.split(" ");for(var d=[],f={},g=0;g<c.length;g++){var q=c[g],u=a.$$registeredAnimations[q];u&&!f[q]&&(d.push(b.get(u)),f[q]=!0)}return d}var u=P(d);return function(a,b,d,k){function t(){k.domOperation(),u(a,k)}function G(a,b,d,f,e){switch(d){case"animate":b=[b,f.from,f.to,e];break;case"setClass":b=[b,A,H,e];break;case"addClass":b=[b,A,e];break;case"removeClass":b=[b,H,e];break;default:b=[b,e]}if(b.push(f),a=a.apply(a,b))if(Ea(a.start)&&(a=a.start()),a instanceof c)a.done(e);else if(Ea(a))return a;return L}function h(a,b,d,e,f){var g=[];return q(e,function(e){var h=e[f];h&&g.push(function(){var e,f,g=!1,k=function(a){g||(g=!0,(f||L)(a),e.complete(!a))};return e=new c({end:function(){k()},cancel:function(){k(!0)}}),f=G(h,a,b,d,function(a){k(!1===a)}),e})}),g}function I(a,b,d,e,f){var g=h(a,b,d,e,f);if(0===g.length){var k,u;"beforeSetClass"===f?(k=h(a,"removeClass",d,e,"beforeRemoveClass"),u=h(a,"addClass",d,e,"beforeAddClass")):"setClass"===f&&(k=h(a,"removeClass",d,e,"removeClass"),u=h(a,"addClass",d,e,"addClass")),k&&(g=g.concat(k)),u&&(g=g.concat(u))}return 0!==g.length?function(a){var b=[];return g.length&&q(g,function(a){b.push(a())}),b.length?c.all(b,a):a(),function(a){q(b,function(b){a?b.cancel():b.end()})}}:void 0}3===arguments.length&&oa(d)&&(k=d,d=null),k=ha(k),d||(d=a.attr("class")||"",k.addClass&&(d+=" "+k.addClass),k.removeClass&&(d+=" "+k.removeClass));var w,y,A=k.addClass,H=k.removeClass,E=g(d);if(E.length){var e,J;"leave"==b?(J="leave",e="afterLeave"):(J="before"+b.charAt(0).toUpperCase()+b.substr(1),e=b),"enter"!==b&&"move"!==b&&(w=I(a,b,k,E,J)),y=I(a,b,k,E,e)}return w||y?{start:function(){function b(c){f=!0,t(),da(a,k),g.complete(c)}var d,e=[];w&&e.push(function(a){d=w(a)}),e.length?e.push(function(a){t(),a(!0)}):t(),y&&e.push(function(a){d=y(a)});var f=!1,g=new c({end:function(){f||((d||L)(void 0),b(void 0))},cancel:function(){f||((d||L)(!0),b(!0))}});return c.chain(e,b),g}}:void 0}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(a,c){function d(c){return a(c.element,c.event,c.classes,c.options)}return function(a){if(!a.from||!a.to)return d(a);var b=d(a.from),t=d(a.to);return b||t?{start:function(){function a(){return function(){q(d,function(a){a.end()})}}var d=[];b&&d.push(b.start()),t&&d.push(t.start()),c.all(d,function(a){g.complete(a)});var g=new c({end:a(),cancel:a()});return g}}:void 0}}]}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return H(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(J(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){o&&d.url()===o,o=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return J(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?H(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){
return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-html.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(a){return{link:function(b,c,d){function e(){c.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),a.addClass(c,"in",{to:{height:c[0].scrollHeight+"px"}}).then(f)}function f(){c.removeClass("collapsing"),c.css({height:"auto"})}function g(){return c.hasClass("collapse")||c.hasClass("in")?(c.css({height:c[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void a.removeClass(c,"in",{to:{height:"0"}}).then(h)):h()}function h(){c.css({height:"0"}),c.removeClass("collapsing"),c.addClass("collapse")}b.$watch(d.collapse,function(a){a?g():e()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion.html"}}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass,a.$watch("isOpen",function(c){b.toggleClass(a.openClass,c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.find("span").html(""),b.find("span").append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable=!!b.close,this.close=a.close}]).directive("alert",function(){return{controller:"AlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).value("$bindHtmlUnsafeSuppressDeprecated",!1).directive("bindHtmlUnsafe",["$log","$bindHtmlUnsafeSuppressDeprecated",function(a,b){return function(c,d,e){b||a.warn("bindHtmlUnsafe is now deprecated. Use ngBindHtml instead"),d.addClass("ng-binding").data("$binding",e.bindHtmlUnsafe),c.$watch(e.bindHtmlUnsafe,function(a){d.html(a||"")})}}]),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(a,b,c,d){var e=d[0],f=d[1];b.find("input").css({display:"none"}),f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){if(!c.disabled){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})}})}}}).directive("btnCheckbox",["$document",function(a){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(b,c,d,e){function f(){return h(d.btnCheckboxTrue,!0)}function g(){return h(d.btnCheckboxFalse,!1)}function h(a,c){var d=b.$eval(a);return angular.isDefined(d)?d:c}var i=e[0],j=e[1];c.find("input").css({display:"none"}),j.$render=function(){c.toggleClass(i.activeClass,angular.equals(j.$modelValue,f()))},c.bind(i.toggleEvent,function(){d.disabled||b.$apply(function(){j.$setViewValue(c.hasClass(i.activeClass)?g():f()),j.$render()})}),c.on("keypress",function(e){d.disabled||32!==e.which||a[0].activeElement!==c[0]||b.$apply(function(){j.$setViewValue(c.hasClass(i.activeClass)?g():f()),j.$render()})})}}}]),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$element","$interval","$animate",function(a,b,c,d){function e(b,c,e){r||(angular.extend(b,{direction:e,active:!0}),angular.extend(l.currentSlide||{},{direction:e,active:!1}),d.enabled()&&!a.noTransition&&!a.$currentTransition&&b.$element&&l.slides.length>1&&(b.$element.data(p,b.direction),l.currentSlide&&l.currentSlide.$element&&l.currentSlide.$element.data(p,b.direction),a.$currentTransition=!0,n?d.on("addClass",b.$element,function(b,c){"close"===c&&(a.$currentTransition=null,d.off("addClass",b))}):b.$element.one("$animate:close",function(){a.$currentTransition=null})),l.currentSlide=b,q=c,g())}function f(a){if(angular.isUndefined(m[a].index))return m[a];var b;for(m.length,b=0;b<m.length;++b)if(m[b].index==a)return m[b]}function g(){h();var b=+a.interval;!isNaN(b)&&b>0&&(j=c(i,b))}function h(){j&&(c.cancel(j),j=null)}function i(){var b=+a.interval;k&&!isNaN(b)&&b>0&&m.length?a.next():a.pause()}var j,k,l=this,m=l.slides=a.slides=[],n=angular.version.minor>=4,o="uib-noTransition",p="uib-slideDirection",q=-1;l.currentSlide=null;var r=!1;l.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>l.getCurrentIndex()?"next":"prev"),b&&b!==l.currentSlide&&!a.$currentTransition&&e(b,d,c)},a.$on("$destroy",function(){r=!0}),l.getCurrentIndex=function(){return l.currentSlide&&angular.isDefined(l.currentSlide.index)?+l.currentSlide.index:q},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:m.indexOf(a)},a.next=function(){var b=(l.getCurrentIndex()+1)%m.length;return 0===b&&a.noWrap()?void a.pause():l.select(f(b),"next")},a.prev=function(){var b=l.getCurrentIndex()-1<0?m.length-1:l.getCurrentIndex()-1;return a.noWrap()&&b===m.length-1?void a.pause():l.select(f(b),"prev")},a.isActive=function(a){return l.currentSlide===a},a.$watch("interval",g),a.$on("$destroy",h),a.play=function(){k||(k=!0,g())},a.pause=function(){a.noPause||(k=!1,h())},l.addSlide=function(b,c){b.$element=c,m.push(b),1===m.length||b.active?(l.select(m[m.length-1]),1==m.length&&a.play()):b.active=!1},l.removeSlide=function(a){angular.isDefined(a.index)&&m.sort(function(a,b){return+a.index>+b.index});var b=m.indexOf(a);m.splice(b,1),m.length>0&&a.active?l.select(b>=m.length?m[b-1]:m[b]):q>b&&q--,0===m.length&&(l.currentSlide=null)},a.$watch("noTransition",function(a){b.data(o,a)})}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(a,b){return b.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$injector","$animate",function(a,b){function c(a,b,c){a.removeClass(b),c&&c()}var d="uib-noTransition",e="uib-slideDirection",f=null;return a.has("$animateCss")&&(f=a.get("$animateCss")),{beforeAddClass:function(a,g,h){if("active"==g&&a.parent()&&!a.parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k+" "+j,h);return a.addClass(j),f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()},beforeRemoveClass:function(a,g,h){if("active"===g&&a.parent()&&!a.parent().data(d)){var i=!1,j=a.data(e),k="next"==j?"left":"right",l=c.bind(this,a,k,h);return f?f(a,{addClass:k}).start().done(l):b.addClass(a,k).then(function(){i||l(),h()}),function(){i=!0}}h()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$log","$locale","orderByFilter",function(a,b,c){function d(a){var b=[],d=a.split("");return angular.forEach(g,function(c,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+c.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),b.push({index:f,apply:c.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:c(b,"index")}}function e(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}var f=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var g={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)}},MMM:{regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:b.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:b.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},hh:{regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a}},H:{regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},h:{regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a}},mm:{regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a}},sss:{regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},ss:{regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}},a:{regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)}}};this.parse=function(c,g,h){if(!angular.isString(c)||!g)return c;g=b.DATETIME_FORMATS[g]||g,g=g.replace(f,"\\$&"),this.parsers[g]||(this.parsers[g]=d(g));var i=this.parsers[g],j=i.regex,k=i.map,l=c.match(j);if(l&&l.length){var m,n;angular.isDate(h)&&!isNaN(h.getTime())?m={year:h.getFullYear(),month:h.getMonth(),date:h.getDate(),hours:h.getHours(),minutes:h.getMinutes(),seconds:h.getSeconds(),milliseconds:h.getMilliseconds()}:(h&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var o=1,p=l.length;p>o;o++){var q=k[o-1];q.apply&&q.apply.call(m,l[o])}return e(m.year,m.month,m.date)&&(n=new Date(m.year,m.month,m.date,m.hours,m.minutes,m.seconds,m.milliseconds||0)),n}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","datepickerConfig","$datepickerSuppressError",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(c,e){i[c]=angular.isDefined(b[c])?6>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):g[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=g[d]?new Date(g[d]):null}),angular.forEach(["minMode","maxMode"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(c){i[d]=angular.isDefined(c)?c:b[d],a[d]=i[d],("minMode"==d&&i.modes.indexOf(a.datepickerMode)<i.modes.indexOf(i[d])||"maxMode"==d&&i.modes.indexOf(a.datepickerMode)>i.modes.indexOf(i[d]))&&(a.datepickerMode=i[d])}):(i[d]=g[d]||null,a[d]=i[d])}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(j.$isEmpty(j.$modelValue)||j.$invalid)&&(i.activeDate=a,i.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$viewValue){var a=new Date(j.$viewValue),b=!isNaN(a);b?this.activeDate=a:h||e.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$viewValue?new Date(j.$viewValue):null;j.$setValidity("dateDisabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$viewValue?new Date(j.$viewValue):null;return{date:a,label:f(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},this.fixTimeZone=function(a){var b=a.getHours();a.setHours(23===b?b+2:0)},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$viewValue?new Date(j.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){i.element[0].focus()};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),i.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){for(var c,d=new Array(b),f=new Date(a),g=0;b>g;)c=new Date(f),e.fixTimeZone(c),d[g++]=c,f.setDate(f.getDate()+1);return d}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=(11-e.startingDay)%7,p=b.rows.length,q=0;p>q;q++)b.weekNumbers.push(h(b.rows[q][o].date))}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a,b){var c=e.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(d,1),c=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(c)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c,d=new Array(12),f=e.activeDate.getFullYear(),g=0;12>g;g++)c=new Date(f,g,1),e.fixTimeZone(c),d[g]=angular.extend(e.createDateObject(c,e.formatMonth),{uid:b.uniqueId+"-"+g});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(d,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a,b){var c=e.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);e.activeDate.setMonth(c)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b,c=new Array(f),g=0,h=e(d.activeDate.getFullYear());f>g;g++)b=new Date(h+g,0,1),d.fixTimeZone(b),c[g]=angular.extend(d.createDateObject(b,d.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=d.split(c,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a,b){var c=d.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*d.step.years:"home"===a?c=e(d.activeDate.getFullYear()):"end"===a&&(c=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(c)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).directive("datepickerPopup",["$compile","$parse","$document","$rootScope","$position","dateFilter","dateParser","datepickerPopupConfig","$timeout",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(j,k,l,m){function n(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function o(a){if(angular.isNumber(a)&&(a=new Date(a)),a){if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=g.parse(a,q,j.date);return isNaN(b)?void 0:b}return void 0}return null}function p(a,b){var c=a||b;if(!l.ngRequired&&!c)return!0;if(angular.isNumber(c)&&(c=new Date(c)),c){if(angular.isDate(c)&&!isNaN(c))return!0;if(angular.isString(c)){var d=g.parse(c,q);return!isNaN(d)}return!1}return!0}var q,r=angular.isDefined(l.closeOnDateSelection)?j.$parent.$eval(l.closeOnDateSelection):h.closeOnDateSelection,s=angular.isDefined(l.datepickerAppendToBody)?j.$parent.$eval(l.datepickerAppendToBody):h.appendToBody,t=angular.isDefined(l.onOpenFocus)?j.$parent.$eval(l.onOpenFocus):h.onOpenFocus,u=angular.isDefined(l.datepickerPopupTemplateUrl)?l.datepickerPopupTemplateUrl:h.datepickerPopupTemplateUrl,v=angular.isDefined(l.datepickerTemplateUrl)?l.datepickerTemplateUrl:h.datepickerTemplateUrl,w={};j.showButtonBar=angular.isDefined(l.showButtonBar)?j.$parent.$eval(l.showButtonBar):h.showButtonBar,j.getText=function(a){return j[a+"Text"]||h[a+"Text"]},j.isDisabled=function(a){return"today"===a&&(a=new Date),j.watchData.minDate&&j.compare(a,w.minDate)<0||j.watchData.maxDate&&j.compare(a,w.maxDate)>0},j.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())};var x=!1;if(h.html5Types[l.type]?(q=h.html5Types[l.type],x=!0):(q=l.datepickerPopup||h.datepickerPopup,l.$observe("datepickerPopup",function(a,b){var c=a||h.datepickerPopup;if(c!==q&&(q=c,m.$modelValue=null,!q))throw new Error("datepickerPopup must have a date format specified.")})),!q)throw new Error("datepickerPopup must have a date format specified.");if(x&&l.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var y=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");y.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":u});var z=angular.element(y.children()[0]);if(z.attr("template-url",v),x&&"month"===l.type&&(z.attr("datepicker-mode",'"month"'),z.attr("min-mode","month")),l.datepickerOptions){var A=j.$parent.$eval(l.datepickerOptions);A&&A.initDate&&(j.initDate=A.initDate,z.attr("init-date","initDate"),delete A.initDate),angular.forEach(A,function(a,b){z.attr(n(b),a)})}j.watchData={},angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(a){if(l[a]){var c=b(l[a]);if(j.$parent.$watch(c,function(b){j.watchData[a]=b,("minDate"===a||"maxDate"===a)&&(w[a]=new Date(b))}),z.attr(n(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;j.$watch("watchData."+a,function(a,b){angular.isFunction(d)&&a!==b&&d(j.$parent,a)})}}}),l.dateDisabled&&z.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),l.showWeeks&&z.attr("show-weeks",l.showWeeks),l.customClass&&z.attr("custom-class","customClass({ date: date, mode: mode })"),x?m.$formatters.push(function(a){return j.date=a,a}):(m.$$parserName="date",m.$validators.date=p,m.$parsers.unshift(o),m.$formatters.push(function(a){return j.date=a,m.$isEmpty(a)?a:f(a,q)})),j.dateSelection=function(a){angular.isDefined(a)&&(j.date=a);var b=j.date?f(j.date,q):null;k.val(b),m.$setViewValue(b),r&&(j.isOpen=!1,k[0].focus())},m.$viewChangeListeners.push(function(){j.date=g.parse(m.$viewValue,q,j.date)});var B=function(a){!j.isOpen||k[0].contains(a.target)||y[0].contains(a.target)||j.$apply(function(){j.isOpen=!1})},C=function(a){27===a.which&&j.isOpen?(a.preventDefault(),a.stopPropagation(),j.$apply(function(){j.isOpen=!1}),k[0].focus()):40!==a.which||j.isOpen||(a.preventDefault(),a.stopPropagation(),j.$apply(function(){j.isOpen=!0}))};k.bind("keydown",C),j.keydown=function(a){27===a.which&&(j.isOpen=!1,k[0].focus())},j.$watch("isOpen",function(a){a?(j.position=s?e.offset(k):e.position(k),j.position.top=j.position.top+k.prop("offsetHeight"),i(function(){t&&j.$broadcast("datepicker.focus"),c.bind("click",B)},0,!1)):c.unbind("click",B)}),j.select=function(a){if("today"===a){var b=new Date;angular.isDate(j.date)?(a=new Date(j.date),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}j.dateSelection(a)},j.close=function(){j.isOpen=!1,k[0].focus()};var D=a(y)(j);y.remove(),s?c.find("body").append(D):k.after(D),j.$on("$destroy",function(){j.isOpen===!0&&(d.$$phase||j.$apply(function(){j.isOpen=!1})),D.remove(),k.unbind("keydown",C),c.unbind("click",B)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.bind("click",d),a.bind("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.unbind("click",d),a.unbind("keydown",e))};var d=function(a){if(c&&(!a||"disabled"!==c.getAutoClose())){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&/(38|40)/.test(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j){var k,l,m=this,n=a.$new(),o=d.openClass,p=angular.noop,q=b.onToggle?c(b.onToggle):angular.noop,r=!1,s=!1,t=h.find("body");this.init=function(d){m.$element=d,b.isOpen&&(l=c(b.isOpen),p=l.assign,a.$watch(l,function(a){n.isOpen=!!a})),r=angular.isDefined(b.dropdownAppendToBody),s=angular.isDefined(b.keyboardNav),r&&m.dropdownMenu&&(t.append(m.dropdownMenu),t.addClass("dropdown"),d.on("$destroy",function(){m.dropdownMenu.remove()}))},this.toggle=function(a){return n.isOpen=arguments.length?!!a:!n.isOpen},this.isOpen=function(){return n.isOpen},n.getToggleElement=function(){return m.toggleElement;
},n.getAutoClose=function(){return b.autoClose||"always"},n.getElement=function(){return m.$element},n.isKeynavEnabled=function(){return s},n.focusDropdownEntry=function(a){var b=m.dropdownMenu?angular.element(m.dropdownMenu).find("a"):angular.element(m.$element).find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(m.selectedOption)?m.selectedOption=m.selectedOption===b.length-1?m.selectedOption:m.selectedOption+1:m.selectedOption=0;break;case 38:angular.isNumber(m.selectedOption)?m.selectedOption=0===m.selectedOption?0:m.selectedOption-1:m.selectedOption=b.length-1}b[m.selectedOption].focus()},n.getDropdownElement=function(){return m.dropdownMenu},n.focusToggleElement=function(){m.toggleElement&&m.toggleElement[0].focus()},n.$watch("isOpen",function(b,c){if(r&&m.dropdownMenu){var d=g.positionElements(m.$element,m.dropdownMenu,"bottom-left",!0),h={top:d.top+"px",display:b?"block":"none"},l=m.dropdownMenu.hasClass("dropdown-menu-right");l?(h.left="auto",h.right=window.innerWidth-(d.left+m.$element.prop("offsetWidth"))+"px"):(h.left=d.left+"px",h.right="auto"),m.dropdownMenu.css(h)}var s=r?t:m.$element;if(f[b?"addClass":"removeClass"](s,o).then(function(){angular.isDefined(b)&&b!==c&&q(a,{open:!!b})}),b)m.dropdownMenuTemplateUrl&&j(m.dropdownMenuTemplateUrl).then(function(a){k=n.$new(),i(a.trim())(k,function(a){var b=a;m.dropdownMenu.replaceWith(b),m.dropdownMenu=b})}),n.focusToggleElement(),e.open(n);else{if(m.dropdownMenuTemplateUrl){k&&k.$destroy();var u=angular.element('<ul class="dropdown-menu"></ul>');m.dropdownMenu.replaceWith(u),m.dropdownMenu=u}e.close(n),m.selectedOption=null}angular.isFunction(p)&&p(a,b)}),a.$on("$locationChangeSuccess",function(){"disabled"!==n.getAutoClose()&&(n.isOpen=!1)});var u=a.$on("$destroy",function(){n.$destroy()});n.$on("$destroy",u)}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b),b.addClass("dropdown")}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(a,b,c,d){if(d){var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("keyboardNav",function(){return{restrict:"A",require:"?^dropdown",link:function(a,b,c,d){b.bind("keydown",function(a){if(-1!==[38,40].indexOf(a.which)){a.preventDefault(),a.stopPropagation();var b=d.dropdownMenu.find("a");switch(a.which){case 40:angular.isNumber(d.selectedOption)?d.selectedOption=d.selectedOption===b.length-1?d.selectedOption:d.selectedOption+1:d.selectedOption=0;break;case 38:angular.isNumber(d.selectedOption)?d.selectedOption=0===d.selectedOption?0:d.selectedOption-1:d.selectedOption=b.length-1}b[d.selectedOption].focus()}})}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).directive("modalBackdrop",["$animate","$injector","$modalStack",function(a,b,c){function d(b,d,f){f.modalInClass&&(e?e(d,{addClass:f.modalInClass}).start():a.addClass(d,f.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(b,c){var g=c();e?e(d,{removeClass:f.modalInClass}).start().then(g):a.removeClass(d,f.modalInClass).then(g)}))}var e=null;return b.has("$animateCss")&&(e=b.get("$animateCss")),{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector",function(a,b,c,d){var e=null;return d.has("$animateCss")&&(e=d.get("$animateCss")),{restrict:"EA",scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(d,f,g){f.addClass(g.windowClass||""),d.size=g.size,d.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},d.$isRendered=!0;var h=b.defer();g.$observe("modalRender",function(a){"true"==a&&h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=e?e(f,{addClass:g.modalInClass}).start():c.addClass(f,g.modalInClass),d.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();e?e(f,{removeClass:g.modalInClass}).start().then(d):c.removeClass(f,g.modalInClass).then(d)})),b.when(h).then(function(){var a=f[0].querySelectorAll("[autofocus]");a.length?a[0].focus():f[0].focus()});var i=a.getTop();i&&a.modalRendered(i.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap",function(a,b,c,d,e,f,g,h,i){function j(){for(var a=-1,b=t.keys(),c=0;c<b.length;c++)t.get(b[c]).value.backdrop&&(a=c);return a}function k(a,b){var d=c.find("body").eq(0),e=t.get(a).value;t.remove(a),m(e.modalDomEl,e.modalScope,function(){var b=e.openedClass||s;u.remove(b,a),d.toggleClass(b,u.hasKey(b))}),l(),b&&b.focus?b.focus():d.focus()}function l(){if(p&&-1==j()){var a=q;m(p,q,function(){a=null}),p=void 0,q=void 0}}function m(b,c,d){function e(){e.done||(e.done=!0,o?o(b,{event:"leave"}).start().then(function(){b.remove()}):a.leave(b),c.$destroy(),d&&d())}var g,h=null,i=function(){return g||(g=f.defer(),h=g.promise),function(){g.resolve()}};return c.$broadcast(v.NOW_CLOSING_EVENT,i),f.when(h).then(e)}function n(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var o=null;g.has("$animateCss")&&(o=g.get("$animateCss"));var p,q,r,s="modal-open",t=i.createNew(),u=h.createNew(),v={NOW_CLOSING_EVENT:"modal.stack.now-closing"},w=0,x="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return e.$watch(j,function(a){q&&(q.index=a)}),c.bind("keydown",function(a){if(a.isDefaultPrevented())return a;var b=t.top();if(b&&b.value.keyboard)switch(a.which){case 27:a.preventDefault(),e.$apply(function(){v.dismiss(b.key,"escape key press")});break;case 9:v.loadFocusElementList(b);var c=!1;a.shiftKey?v.isFocusInFirstItem(a)&&(c=v.focusLastFocusableElement()):v.isFocusInLastItem(a)&&(c=v.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}),v.open=function(a,b){var f=c[0].activeElement,g=b.openedClass||s;t.add(a,{deferred:b.deferred,renderDeferred:b.renderDeferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard,openedClass:b.openedClass}),u.put(g,a);var h=c.find("body").eq(0),i=j();if(i>=0&&!p){q=e.$new(!0),q.index=i;var k=angular.element('<div modal-backdrop="modal-backdrop"></div>');k.attr("backdrop-class",b.backdropClass),b.animation&&k.attr("modal-animation","true"),p=d(k)(q),h.append(p)}var l=angular.element('<div modal-window="modal-window"></div>');l.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:t.length()-1,animate:"animate"}).html(b.content),b.animation&&l.attr("modal-animation","true");var m=d(l)(b.scope);t.top().value.modalDomEl=m,t.top().value.modalOpener=f,h.append(m),h.addClass(g),v.clearFocusListCache()},v.close=function(a,b){var c=t.get(a);return c&&n(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),k(a,c.value.modalOpener),!0):!c},v.dismiss=function(a,b){var c=t.get(a);return c&&n(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),k(a,c.value.modalOpener),!0):!c},v.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},v.getTop=function(){return t.top()},v.modalRendered=function(a){var b=t.get(a);b&&b.value.renderDeferred.resolve()},v.focusFirstFocusableElement=function(){return r.length>0?(r[0].focus(),!0):!1},v.focusLastFocusableElement=function(){return r.length>0?(r[r.length-1].focus(),!0):!1},v.isFocusInFirstItem=function(a){return r.length>0?(a.target||a.srcElement)==r[0]:!1},v.isFocusInLastItem=function(a){return r.length>0?(a.target||a.srcElement)==r[r.length-1]:!1},v.clearFocusListCache=function(){r=[],w=0},v.loadFocusElementList=function(a){if((void 0===r||!r.length0)&&a){var b=a.value.modalDomEl;b&&b.length&&(r=b[0].querySelectorAll(x))}},v}]).provider("$modal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(b,c,d,e,f,g){function h(a){return a.template?d.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}function i(a){var c=[];return angular.forEach(a,function(a){c.push(angular.isFunction(a)||angular.isArray(a)?d.when(b.invoke(a)):angular.isString(a)?d.when(b.get(a)):d.when(a))}),c}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(b){var e=d.defer(),j=d.defer(),l=d.defer(),m={result:e.promise,opened:j.promise,rendered:l.promise,close:function(a){return g.close(m,a)},dismiss:function(a){return g.dismiss(m,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var n,o=d.all([h(b)].concat(i(b.resolve)));return n=k=d.all([k]).then(function(){return o},function(){return o}).then(function(a){var d=(b.scope||c).$new();d.$close=m.close,d.$dismiss=m.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var h,i={},k=1;b.controller&&(i.$scope=d,i.$modalInstance=m,angular.forEach(b.resolve,function(b,c){i[c]=a[k++]}),h=f(b.controller,i),b.controllerAs&&(b.bindToController&&angular.extend(h,d),d[b.controllerAs]=h)),g.open(m,{scope:d,deferred:e,renderDeferred:l,content:a[0],animation:b.animation,backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size,openedClass:b.openedClass}),j.resolve(!0)},function(a){j.reject(a),e.reject(a)})["finally"](function(){k===n&&(k=null)}),m},j}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(g,h){e=g,this.config=h,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=h.itemsPerPage,a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b,c){c&&c.preventDefault();var d=!a.ngDisabled||!c;d&&a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["pager","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate","$rootScope","$parse",function(e,f,g,h,i,j,k,l){return function(e,m,n,o){function p(a){var b=(a||o.trigger||n).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}o=angular.extend({},b,d,o);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup title="'+r+"title"+s+'" '+(o.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'placement="'+r+"placement"+s+'" popup-class="'+r+"popupClass"+s+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){I.isOpen?q():n()}function n(){(!H||a.$eval(d[m+"Enable"]))&&(v(),I.popupDelay?D||(D=g(r,I.popupDelay,!1)):r())}function q(){s(),k.$$phase||k.$digest()}function r(){return D=null,C&&(g.cancel(C),C=null),(o.useContentExp?I.contentExp():I.content)?(t(),I.isOpen=!0,K&&K.assign(I.origScope,I.isOpen),k.$$phase||I.$apply(),A.css({display:"block"}),void L()):angular.noop}function s(){I.isOpen=!1,K&&K.assign(I.origScope,I.isOpen),g.cancel(D),D=null,g.cancel(E),E=null,I.animation?C||(C=g(u,500)):u()}function t(){A&&u(),B=I.$new(),A=c(B,function(a){F?h.find("body").append(a):b.after(a)}),o.useContentExp&&(B.$watch("contentExp()",function(a){!a&&I.isOpen&&s()}),B.$watch(function(){J||(J=!0,B.$$postDigest(function(){J=!1,I.isOpen&&L()}))}))}function u(){C=null,A&&(A.remove(),A=null),B&&(B.$destroy(),B=null)}function v(){w(),x(),y()}function w(){I.popupClass=d[m+"Class"]}function x(){var a=d[m+"Placement"];I.placement=angular.isDefined(a)?a:o.placement}function y(){var a=d[m+"PopupDelay"],b=parseInt(a,10);I.popupDelay=isNaN(b)?o.popupDelay:b}function z(){var a=d[m+"Trigger"];M(),G=p(a),"none"!==G.show&&G.show.forEach(function(a,c){a===G.hide[c]?b[0].addEventListener(a,j):a&&(b[0].addEventListener(a,n),b[0].addEventListener(G.hide[c],q))})}var A,B,C,D,E,F=angular.isDefined(o.appendToBody)?o.appendToBody:!1,G=p(void 0),H=angular.isDefined(d[m+"Enable"]),I=a.$new(!0),J=!1,K=angular.isDefined(d[m+"IsOpen"])?l(d[m+"IsOpen"]):!1,L=function(){A&&(E||(E=g(function(){A.css({top:0,left:0,width:"auto",height:"auto"});var a=i.position(A),c=i.positionElements(b,A,I.placement,F);c.top+="px",c.left+="px",c.width=a.width+"px",c.height=a.height+"px",A.css(c),E=null},0,!1)))};I.origScope=a,I.isOpen=!1,I.contentExp=function(){return a.$eval(d[e])},o.useContentExp||d.$observe(e,function(a){I.content=a,!a&&I.isOpen?s():L()}),d.$observe("disabled",function(a){D&&a&&(g.cancel(D),D=null),a&&I.isOpen&&s()}),d.$observe(m+"Title",function(a){I.title=a,L()}),d.$observe(m+"Placement",function(){I.isOpen&&(x(),L())}),K&&a.$watch(K,function(a){a!==I.isOpen&&j()});var M=function(){G.show.forEach(function(a){b.unbind(a,n)}),G.hide.forEach(function(a){b.unbind(a,q)})};z();var N=a.$eval(d[m+"Animation"]);I.animation=angular.isDefined(N)?!!N:o.animation;var O=a.$eval(d[m+"AppendToBody"]);F=angular.isDefined(O)?O:F,F&&a.$on("$locationChangeSuccess",function(){I.isOpen&&s()}),a.$on("$destroy",function(){g.cancel(C),g.cancel(D),g.cancel(E),M(),u(),I=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.tooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(a,b,c){a.placement&&b.addClass(a.placement),a.popupClass&&b.addClass(a.popupClass),a.animation()&&b.addClass(c.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function(a){return a("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function(a){return a("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(a,b,c){return b||c.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html"}}).directive("popoverHtml",["$tooltip",function(a){return a("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).value("$progressSuppressWarning",!1).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.$watch("value",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){b.percent=+(100*b.value/b.max).toFixed(2);var a=d.bars.reduce(function(a,b){return a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)},a.$watch("max",function(b){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("uibProgress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("progress",["$log","$progressSuppressWarning",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html",link:function(){b&&a.warn("progress is now deprecated. Use uib-progress instead")}}}]).directive("uibBar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("bar",["$log","$progressSuppressWarning",function(a,b){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(c,d,e,f){b&&a.warn("bar is now deprecated. Use uib-bar instead"),f.addBar(c,d)}}}]).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse","$log",function(a,b){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(c,d,e,f,g){c.$watch("active",function(a){a&&f.select(c)}),c.disabled=!1,e.disable&&c.$parent.$watch(a(e.disable),function(a){c.disabled=!!a}),e.disabled&&(b.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),c.$parent.$watch(a(e.disabled),function(a){c.disabled=!!a})),c.select=function(){c.disabled||(c.active=!0)},f.addTab(c),c.$on("$destroy",function(){f.removeTab(c)}),c.$transcludeFn=g}}}]).directive("tabHeadingTransclude",function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||a.hasAttribute("x-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase()||"x-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===q[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function j(a){k(),p.$setViewValue(new Date(o)),l(a)}function k(){p.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=o.getHours(),d=o.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),"m"!==b&&(a.minutes=i(d)),a.meridian=o.getHours()<12?q[0]:q[1]}function m(a,b){var c=new Date(a.getTime()+6e4*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes()),d}function n(a){o=m(o,a),j()}var o=new Date,p={$setViewValue:angular.noop},q=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){p=c,p.$render=this.render,p.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g);var i=angular.isDefined(b.arrowkeys)?a.$parent.$eval(b.arrowkeys):f.arrowkeys;i&&this.setupArrowkeyEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var r=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){r=parseInt(a,10)});var s=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){s=parseInt(a,10)});var t;a.$parent.$watch(c(b.min),function(a){var b=new Date(a);t=isNaN(b)?void 0:b});var u;a.$parent.$watch(c(b.max),function(a){var b=new Date(a);u=isNaN(b)?void 0:b}),a.noIncrementHours=function(){var a=m(o,60*r);return a>u||o>a&&t>a},a.noDecrementHours=function(){var a=m(o,60*-r);return t>a||a>o&&a>u},a.noIncrementMinutes=function(){var a=m(o,s);return a>u||o>a&&t>a},a.noDecrementMinutes=function(){var a=m(o,-s);return t>a||a>o&&a>u},a.noToggleMeridian=function(){return o.getHours()<13?m(o,720)>u:m(o,-720)<t},a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,p.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(o.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c){b.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply())}),c.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply())})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){p.$setViewValue(null),p.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g(),b=h();angular.isDefined(a)&&angular.isDefined(b)?(o.setHours(a),t>o||o>u?d(!0):j("h")):d(!0)},b.bind("blur",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h(),b=g();angular.isDefined(a)&&angular.isDefined(b)?(o.setMinutes(a),t>o||o>u?d(void 0,!0):j("m")):d(void 0,!0)},c.bind("blur",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){
var b=p.$viewValue;isNaN(b)?(p.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(o=b),t>o||o>u?(p.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):k(),l())},a.showSpinners=angular.isDefined(b.showSpinners)?a.$parent.$eval(b.showSpinners):f.showSpinners,a.incrementHours=function(){a.noIncrementHours()||n(60*r)},a.decrementHours=function(){a.noDecrementHours()||n(60*-r)},a.incrementMinutes=function(){a.noIncrementMinutes()||n(s)},a.decrementMinutes=function(){a.noDecrementMinutes()||n(-s)},a.toggleMeridian=function(){a.noToggleMeridian()||n(720*(o.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(a,b){return b.templateUrl||"template/timepicker/timepicker.html"},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(a,b,c,d,e){function f(a){for(var b in a)if(void 0!==h.style[b])return a[b]}e||d.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var g=function(d,e,f){f=f||{};var h=a.defer(),i=g[f.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(e)?d.addClass(e):angular.isFunction(e)?e(d):angular.isObject(e)&&d.css(e),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},h=document.createElement("trans"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},j={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return g.transitionEndEventName=f(i),g.animationEndEventName=f(j),g}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$position","typeaheadParser",function(a,b,c,d,e,f,g,h,i){var j=[9,13,27,38,40],k=200;return{require:["ngModel","^?ngModelOptions"],link:function(l,m,n,o){function p(){K.moveInProgress||(K.moveInProgress=!0,K.$digest()),S&&d.cancel(S),S=d(function(){K.matches.length&&q(),K.moveInProgress=!1,K.$digest()},k)}function q(){K.position=D?h.offset(m):h.position(m),K.position.top+=m.prop("offsetHeight")}var r=o[0],s=o[1],t=l.$eval(n.typeaheadMinLength);t||0===t||(t=1);var u,v,w=l.$eval(n.typeaheadWaitMs)||0,x=l.$eval(n.typeaheadEditable)!==!1,y=b(n.typeaheadLoading).assign||angular.noop,z=b(n.typeaheadOnSelect),A=angular.isDefined(n.typeaheadSelectOnBlur)?l.$eval(n.typeaheadSelectOnBlur):!1,B=b(n.typeaheadNoResults).assign||angular.noop,C=n.typeaheadInputFormatter?b(n.typeaheadInputFormatter):void 0,D=n.typeaheadAppendToBody?l.$eval(n.typeaheadAppendToBody):!1,E=l.$eval(n.typeaheadFocusFirst)!==!1,F=n.typeaheadSelectOnExact?l.$eval(n.typeaheadSelectOnExact):!1,G=b(n.ngModel),H=b(n.ngModel+"($$$p)"),I=function(a,b){return angular.isFunction(G(l))&&s&&s.$options&&s.$options.getterSetter?H(a,{$$$p:b}):G.assign(a,b)},J=i.parse(n.typeahead),K=l.$new(),L=l.$on("$destroy",function(){K.$destroy()});K.$on("$destroy",L);var M="typeahead-"+K.$id+"-"+Math.floor(1e4*Math.random());m.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":M});var N=angular.element("<div typeahead-popup></div>");N.attr({id:M,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(n.typeaheadTemplateUrl)&&N.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&N.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var O=function(){K.matches=[],K.activeIdx=-1,m.attr("aria-expanded",!1)},P=function(a){return M+"-option-"+a};K.$watch("activeIdx",function(a){0>a?m.removeAttr("aria-activedescendant"):m.attr("aria-activedescendant",P(a))});var Q=function(a,b){return K.matches.length>b&&a?a.toUpperCase()===K.matches[b].label.toUpperCase():!1},R=function(a){var b={$viewValue:a};y(l,!0),B(l,!1),c.when(J.source(l,b)).then(function(c){var d=a===r.$viewValue;if(d&&u)if(c&&c.length>0){K.activeIdx=E?0:-1,B(l,!1),K.matches.length=0;for(var e=0;e<c.length;e++)b[J.itemName]=c[e],K.matches.push({id:P(e),label:J.viewMapper(K,b),model:c[e]});K.query=a,q(),m.attr("aria-expanded",!0),F&&1===K.matches.length&&Q(a,0)&&K.select(0)}else O(),B(l,!0);d&&y(l,!1)},function(){O(),y(l,!1),B(l,!0)})};D&&(angular.element(f).bind("resize",p),e.find("body").bind("scroll",p));var S;K.moveInProgress=!1,O(),K.query=void 0;var T,U=function(a){T=d(function(){R(a)},w)},V=function(){T&&d.cancel(T)};r.$parsers.unshift(function(a){return u=!0,0===t||a&&a.length>=t?w>0?(V(),U(a)):R(a):(y(l,!1),V(),O()),x?a:a?void r.$setValidity("editable",!1):(r.$setValidity("editable",!0),null)}),r.$formatters.push(function(a){var b,c,d={};return x||r.$setValidity("editable",!0),C?(d.$model=a,C(l,d)):(d[J.itemName]=a,b=J.viewMapper(l,d),d[J.itemName]=void 0,c=J.viewMapper(l,d),b!==c?b:a)}),K.select=function(a){var b,c,e={};v=!0,e[J.itemName]=c=K.matches[a].model,b=J.modelMapper(l,e),I(l,b),r.$setValidity("editable",!0),r.$setValidity("parse",!0),z(l,{$item:c,$model:b,$label:J.viewMapper(l,e)}),O(),K.$eval(n.typeaheadFocusOnSelect)!==!1&&d(function(){m[0].focus()},0,!1)},m.bind("keydown",function(a){if(0!==K.matches.length&&-1!==j.indexOf(a.which)){if(-1===K.activeIdx&&(9===a.which||13===a.which))return O(),void K.$digest();a.preventDefault(),40===a.which?(K.activeIdx=(K.activeIdx+1)%K.matches.length,K.$digest()):38===a.which?(K.activeIdx=(K.activeIdx>0?K.activeIdx:K.matches.length)-1,K.$digest()):13===a.which||9===a.which?K.$apply(function(){K.select(K.activeIdx)}):27===a.which&&(a.stopPropagation(),O(),K.$digest())}}),m.bind("blur",function(){A&&K.matches.length&&-1!==K.activeIdx&&!v&&(v=!0,K.$apply(function(){K.select(K.activeIdx)})),u=!1,v=!1});var W=function(a){m[0]!==a.target&&3!==a.which&&0!==K.matches.length&&(O(),g.$$phase||K.$digest())};e.bind("click",W),l.$on("$destroy",function(){e.unbind("click",W),D&&X.remove(),N.remove()});var X=a(N)(K);D?e.find("body").append(X):m.after(X)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"template/typeahead/typeahead-match.html";a(g).then(function(a){b(a.trim())(d,function(a){e.replaceWith(a)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel {{panelClass || \'panel-default\'}}">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close($event)">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n    modal-in-class="in"\n	ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" style="min-width: 0;" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" ></i>\n</span>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | typeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),!function(a,b){"use strict";b.module("ngBusy.interceptor",[]).provider("busyInterceptor",function(){this.$get=["$rootScope","$q",function(a,b){function c(){e=f=0}function d(b){b.config.notBusy||(a.$broadcast("busy.end",{url:b.config.url,name:b.config.name,remaining:e-++f}),f>=e&&c())}var e=0,f=0;return{outstanding:function(){return e-f},request:function(c){return c.notBusy||(a.$broadcast("busy.begin",{url:c.url,name:c.name}),e++),c||b.when(c)},response:function(a){return d(a),a},responseError:function(a){return d(a),b.reject(a)}}}]}).config(["$httpProvider",function(a){a.interceptors.push("busyInterceptor")}]),b.module("ngBusy.busy",[]).directive("busy",["$parse","$timeout",function(a,c){return{restrict:"A",tranclude:!0,scope:{},controller:["$scope",function(a){this.setBusyMessageElement=function(b){a.busyMessageElement=b}}],link:function(d,e,f){f.$observe("busy",function(a){d.busyMessage=a}),f.$observe("busyWhenUrl",function(a){d.busyWhenUrl=a}),f.$observe("busyWhenName",function(a){d.busyWhenName=a}),f.$observe("busyAddClasses",function(a){d.busyAddClasses=a}),f.$observe("busyRemoveClasses",function(a){d.busyRemoveClasses=a}),f.$observe("busyDisabled",function(c){var e=a(c)(d);d.busyDisabled=b.isDefined(e)?e:!0}),f.$observe("notBusyWhenUrl",function(a){d.notBusyWhenUrl=a}),f.$observe("notBusyWhenName",function(a){d.notBusyWhenName=a}),f.$observe("notBusyAddClasses",function(a){d.notBusyAddClasses=a}),f.$observe("notBusyRemoveClasses",function(a){d.notBusyRemoveClasses=a}),f.$observe("notBusyDisabled",function(c){var e=a(c)(d);d.notBusyDisabled=b.isDefined(e)?e:!1}),d.isBusyFor=function(a,b){var c;return d[c=b?"busyWhenName":"notBusyWhenName"]?!!a.name&&!!a.name.match(d[c]):d[c=b?"busyWhenUrl":"notBusyWhenUrl"]?!!a.url&&!!a.url.match(d[c]):b===!0||a.remaining<=0},d.$on("busy.begin",function(a,b){if(!d.busy&&d.isBusyFor(b,!0)){d.originalContent=e.html(),d.busyDisabled&&c(function(){e.attr("disabled",!0)});var f=d.busyMessageElement?d.busyMessageElement.clone():null;(f||d.busyMessage)&&e.html("").append(f||d.busyMessage),e.removeClass(d.busyRemoveClasses).addClass(d.busyAddClasses),d.busy=!0}}),d.$on("busy.end",function(a,b){d.busy&&d.isBusyFor(b)&&(d.originalContent&&e.html(d.originalContent),e.attr("disabled",d.notBusyDisabled===!0),e.removeClass(d.notBusyRemoveClasses).addClass(d.notBusyAddClasses),d.busy=!1)})}}}]).directive("busyMessage",function(){return{restrict:"AE",transclude:!0,require:"^busy",template:"",replace:!0,compile:function(a,b,c){return function(a,b,d,e){e.setBusyMessageElement(c(a,function(){}))}}}}),b.module("ngBusy",["ngBusy.interceptor","ngBusy.busy"])}(window,window.angular),!function(){angular.module("angular-jwt",["angular-jwt.interceptor","angular-jwt.jwt"]),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.urlParam=null,this.authHeader="Authorization",this.authPrefix="Bearer ",this.tokenGetter=function(){return null};var e=this;this.$get=["$q","$injector","$rootScope",function(r,t,a){return{request:function(a){if(a.skipAuthorization)return a;if(e.urlParam){if(a.params=a.params||{},a.params[e.urlParam])return a}else if(a.headers=a.headers||{},a.headers[e.authHeader])return a;var n=r.when(t.invoke(e.tokenGetter,this,{config:a}));return n.then(function(r){return r&&(e.urlParam?a.params[e.urlParam]=r:a.headers[e.authHeader]=e.authPrefix+r),a})},responseError:function(e){return 401===e.status&&a.$broadcast("unauthenticated",e),r.reject(e)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",function(){this.urlBase64Decode=function(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}return decodeURIComponent(escape(window.atob(r)))},this.decodeToken=function(e){var r=e.split(".");if(3!==r.length)throw new Error("JWT must have 3 parts");var t=this.urlBase64Decode(r[1]);if(!t)throw new Error("Cannot decode the token");return JSON.parse(t)},this.getTokenExpirationDate=function(e){var r;if(r=this.decodeToken(e),"undefined"==typeof r.exp)return null;var t=new Date(0);return t.setUTCSeconds(r.exp),t},this.isTokenExpired=function(e,r){var t=this.getTokenExpirationDate(e);return r=r||0,null===t?!1:!(t.valueOf()>(new Date).valueOf()+1e3*r)}})}(),angular.module("NgSwitchery",[]).directive("uiSwitch",["$window","$timeout","$log","$parse",function($window,$timeout,$log,$parse){function linkSwitchery(scope,elem,attrs,ngModel){function initializeSwitch(){$timeout(function(){switcher&&angular.element(switcher.switcher).remove(),switcher=new $window.Switchery(elem[0],options);var element=switcher.element;element.checked=scope.initValue,switcher.setPosition(!1),element.addEventListener("change",function(evt){
scope.$apply(function(){ngModel.$setViewValue(element.checked)})})},0)}if(!ngModel)return!1;var options={};try{options=$parse(attrs.uiSwitch)(scope)}catch(e){}var switcher,previousDisabledValue;attrs.$observe("disabled",function(value){void 0!=value&&value!=previousDisabledValue&&(previousDisabledValue=value,initializeSwitch())}),initializeSwitch()}return{require:"ngModel",restrict:"AE",scope:{initValue:"=ngModel"},link:linkSwitchery}}]),!function(e,n){"use strict";var r=["ng","oc.lazyLoad"],o={},t=[],i=[],a=[],s=[],u=e.noop,c={},l=[],d=e.module("oc.lazyLoad",["ng"]);d.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(d,f,p,m,v,y){function L(n,o,t){if(o){var i,s,d,f=[];for(i=o.length-1;i>=0;i--)if(s=o[i],e.isString(s)||(s=E(s)),s&&-1===l.indexOf(s)&&(!w[s]||-1!==a.indexOf(s))){var h=-1===r.indexOf(s);if(d=g(s),h&&(r.push(s),L(n,d.requires,t)),d._runBlocks.length>0)for(c[s]=[];d._runBlocks.length>0;)c[s].push(d._runBlocks.shift());e.isDefined(c[s])&&(h||t.rerun)&&(f=f.concat(c[s])),j(n,d._invokeQueue,s,t.reconfig),j(n,d._configBlocks,s,t.reconfig),u(h?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",s),o.pop(),l.push(s)}var p=n.getInstanceInjector();e.forEach(f,function(e){p.invoke(e)})}}function $(n,r){function t(n,r){var o,t=!0;return r.length&&(o=i(n),e.forEach(r,function(e){t=t&&i(e)!==o})),t}function i(n){return e.isArray(n)?M(n.toString()):e.isObject(n)?M(D(n)):e.isDefined(n)&&null!==n?M(n.toString()):n}var a=n[2][0],s=n[1],c=!1;e.isUndefined(o[r])&&(o[r]={}),e.isUndefined(o[r][s])&&(o[r][s]={});var l=function(e,n){o[r][s].hasOwnProperty(e)||(o[r][s][e]=[]),t(n,o[r][s][e])&&(c=!0,o[r][s][e].push(n),u("ocLazyLoad.componentLoaded",[r,s,e]))};if(e.isString(a))l(a,n[2][1]);else{if(!e.isObject(a))return!1;e.forEach(a,function(n,r){e.isString(n)?l(n,a[1]):l(r,n)})}return c}function j(n,r,o,i){if(r){var a,s,u,c;for(a=0,s=r.length;s>a;a++)if(u=r[a],e.isArray(u)){if(null!==n){if(!n.hasOwnProperty(u[0]))throw new Error("unsupported provider "+u[0]);c=n[u[0]]}var l=$(u,o);if("invoke"!==u[1])l&&e.isDefined(c)&&c[u[1]].apply(c,u[2]);else{var d=function(n){var r=t.indexOf(o+"-"+n);(-1===r||i)&&(-1===r&&t.push(o+"-"+n),e.isDefined(c)&&c[u[1]].apply(c,u[2]))};if(e.isFunction(u[2][0]))d(u[2][0]);else if(e.isArray(u[2][0]))for(var f=0,h=u[2][0].length;h>f;f++)e.isFunction(u[2][0][f])&&d(u[2][0][f])}}}}function E(n){var r=null;return e.isString(n)?r=n:e.isObject(n)&&n.hasOwnProperty("name")&&e.isString(n.name)&&(r=n.name),r}function _(n){if(!e.isString(n))return!1;try{return g(n)}catch(r){if(/No module/.test(r)||r.message.indexOf("$injector:nomod")>-1)return!1}}var w={},O={$controllerProvider:d,$compileProvider:p,$filterProvider:m,$provide:f,$injector:v,$animateProvider:y},x=!1,b=!1,z=[],S={};z.push=function(e){-1===this.indexOf(e)&&Array.prototype.push.apply(this,arguments)},this.config=function(n){e.isDefined(n.modules)&&(e.isArray(n.modules)?e.forEach(n.modules,function(e){w[e.name]=e}):w[n.modules.name]=n.modules),e.isDefined(n.debug)&&(x=n.debug),e.isDefined(n.events)&&(b=n.events)},this._init=function(o){if(0===i.length){var t=[o],a=["ng:app","ng-app","x-ng-app","data-ng-app"],u=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,c=function(e){return e&&t.push(e)};e.forEach(a,function(n){a[n]=!0,c(document.getElementById(n)),n=n.replace(":","\\:"),"undefined"!=typeof o[0]&&o[0].querySelectorAll&&(e.forEach(o[0].querySelectorAll("."+n),c),e.forEach(o[0].querySelectorAll("."+n+"\\:"),c),e.forEach(o[0].querySelectorAll("["+n+"]"),c))}),e.forEach(t,function(n){if(0===i.length){var r=" "+o.className+" ",t=u.exec(r);t?i.push((t[2]||"").replace(/\s+/g,",")):e.forEach(n.attributes,function(e){0===i.length&&a[e.name]&&i.push(e.value)})}})}0!==i.length||(n.jasmine||n.mocha)&&e.isDefined(e.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");var l=function d(n){if(-1===r.indexOf(n)){r.push(n);var o=e.module(n);j(null,o._invokeQueue,n),j(null,o._configBlocks,n),e.forEach(o.requires,d)}};e.forEach(i,function(e){l(e)}),i=[],s.pop()};var D=function(n){try{return JSON.stringify(n)}catch(r){var o=[];return JSON.stringify(n,function(n,r){if(e.isObject(r)&&null!==r){if(-1!==o.indexOf(r))return;o.push(r)}return r})}},M=function(e){var n,r,o,t=0;if(0==e.length)return t;for(n=0,o=e.length;o>n;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t};this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(n,o,t,a,c){function d(e){var r=c.defer();return n.error(e.message),r.reject(e),r.promise}var f,p=a("ocLazyLoad");return x||(n={},n.error=e.noop,n.warn=e.noop,n.info=e.noop),O.getInstanceInjector=function(){return f?f:f=o.data("$injector")||e.injector()},u=function(e,r){b&&t.$broadcast(e,r),x&&n.info(e,r)},{_broadcast:u,_$log:n,_getFilesCache:function(){return p},toggleWatch:function(e){e?s.push(!0):s.pop()},getModuleConfig:function(n){if(!e.isString(n))throw new Error("You need to give the name of the module to get");return w[n]?e.copy(w[n]):null},setModuleConfig:function(n){if(!e.isObject(n))throw new Error("You need to give the module config object to set");return w[n.name]=n,n},getModules:function(){return r},isLoaded:function(n){var o=function(e){var n=r.indexOf(e)>-1;return n||(n=!!_(e)),n};if(e.isString(n)&&(n=[n]),e.isArray(n)){var t,i;for(t=0,i=n.length;i>t;t++)if(!o(n[t]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:E,_getModule:function(e){try{return g(e)}catch(n){throw(/No module/.test(n)||n.message.indexOf("$injector:nomod")>-1)&&(n.message='The module "'+D(e)+'" that you are trying to load does not exist. '+n.message),n}},moduleExists:_,_loadDependencies:function(n,r){var o,t,i,a=[],s=this;if(n=s._getModuleName(n),null===n)return c.when();try{o=s._getModule(n)}catch(u){return d(u)}return t=s.getRequires(o),e.forEach(t,function(o){if(e.isString(o)){var t=s.getModuleConfig(o);if(null===t)return void z.push(o);o=t,t.name=void 0}if(s.moduleExists(o.name))return i=o.files.filter(function(e){return s.getModuleConfig(o.name).files.indexOf(e)<0}),0!==i.length&&s._$log.warn('Module "',n,'" attempted to redefine configuration for dependency. "',o.name,'"\n Additional Files Loaded:',i),e.isDefined(s.filesLoader)?void a.push(s.filesLoader(o,r).then(function(){return s._loadDependencies(o)})):d(new Error("Error: New dependencies need to be loaded from external files ("+o.files+"), but no loader has been defined."));if(e.isArray(o)){var u=[];e.forEach(o,function(e){var n=s.getModuleConfig(e);null===n?u.push(e):n.files&&(u=u.concat(n.files))}),u.length>0&&(o={files:u})}else e.isObject(o)&&o.hasOwnProperty("name")&&o.name&&(s.setModuleConfig(o),z.push(o.name));if(e.isDefined(o.files)&&0!==o.files.length){if(!e.isDefined(s.filesLoader))return d(new Error('Error: the module "'+o.name+'" is defined in external files ('+o.files+"), but no loader has been defined."));a.push(s.filesLoader(o,r).then(function(){return s._loadDependencies(o)}))}}),c.all(a)},inject:function(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],t=this,a=c.defer();if(e.isDefined(n)&&null!==n){if(e.isArray(n)){var s=[];return e.forEach(n,function(e){s.push(t.inject(n,r,o))}),c.all(s)}t._addToLoadList(t._getModuleName(n),!0,o)}if(i.length>0){var u=i.slice(),d=function f(e){z.push(e),S[e]=a.promise,t._loadDependencies(e,r).then(function(){try{l=[],L(O,z,r)}catch(e){return t._$log.error(e.message),void a.reject(e)}i.length>0?f(i.shift()):a.resolve(u)},function(e){a.reject(e)})};d(i.shift())}else{if(r&&r.name&&S[r.name])return S[r.name];a.resolve()}return a.promise},getRequires:function(n){var o=[];return e.forEach(n.requires,function(e){-1===r.indexOf(e)&&o.push(e)}),o},_invokeQueue:j,_registerInvokeList:$,_register:L,_addToLoadList:h}}],this._init(e.element(n.document))}]);var f=e.bootstrap;e.bootstrap=function(n,r,o){return e.forEach(r.slice(),function(e){h(e,!0,!0)}),f(n,r,o)};var h=function(n,r,o){(s.length>0||r)&&e.isString(n)&&-1===i.indexOf(n)&&(i.push(n),o&&a.push(n))},g=e.module;e.module=function(e,n,r){return h(e,!1,!0),g(e,n,r)},"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="oc.lazyLoad")}(angular,window),function(e){"use strict";e.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse",function(n,r,o,t){return{restrict:"A",terminal:!0,priority:1e3,compile:function(i,a){var s=i.contents();return i.html(""),function(i,a,u){var c=t(u.ocLazyLoad);i.$watch(function(){return c(i)||u.ocLazyLoad},function(t){e.isDefined(t)&&n.load(t).then(function(){o.enter(r(s)(i),a)})},!0)}}}}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(n,r,o,t){var i=!1,a=!1,s=o.document.getElementsByTagName("head")[0]||o.document.getElementsByTagName("body")[0];return n.buildElement=function(u,c,l){var d,f,h=r.defer(),g=n._getFilesCache(),p=function(e){var n=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+n:e+"&_dc="+n:e+"?_dc="+n};switch(e.isUndefined(g.get(c))&&g.put(c,h.promise),u){case"css":d=o.document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=l.cache===!1?p(c):c;break;case"js":d=o.document.createElement("script"),d.src=l.cache===!1?p(c):c;break;default:g.remove(c),h.reject(new Error('Requested type "'+u+'" is not known. Could not inject "'+c+'"'))}d.onload=d.onreadystatechange=function(e){d.readyState&&!/^c|loade/.test(d.readyState)||f||(d.onload=d.onreadystatechange=null,f=1,n._broadcast("ocLazyLoad.fileLoaded",c),h.resolve())},d.onerror=function(){g.remove(c),h.reject(new Error("Unable to load "+c))},d.async=l.serie?0:1;var m=s.lastChild;if(l.insertBefore){var v=e.element(e.isDefined(window.jQuery)?l.insertBefore:document.querySelector(l.insertBefore));v&&v.length>0&&(m=v[0])}if(m.parentNode.insertBefore(d,m),"css"==u){if(!i){var y=o.navigator.userAgent.toLowerCase();if(/iP(hone|od|ad)/.test(o.navigator.platform)){var L=o.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),$=parseFloat([parseInt(L[1],10),parseInt(L[2],10),parseInt(L[3]||0,10)].join("."));a=6>$}else if(y.indexOf("android")>-1){var j=parseFloat(y.slice(y.indexOf("android")+8));a=4.4>j}else if(y.indexOf("safari")>-1){var E=y.match(/version\/([\.\d]+)/i);a=E&&E[1]&&parseFloat(E[1])<6}}if(a)var _=1e3,w=t(function(){try{d.sheet.cssRules,t.cancel(w),d.onload()}catch(e){--_<=0&&d.onerror()}},20)}return h.promise},n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.filesLoader=function(o){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=[],a=[],s=[],u=[],c=null,l=n._getFilesCache();n.toggleWatch(!0),e.extend(t,o);var d=function(r){var o,d=null;if(e.isObject(r)&&(d=r.type,r=r.path),c=l.get(r),e.isUndefined(c)||t.cache===!1){if(null!==(o=/^(css|less|html|htm|js)?(?=!)/.exec(r))&&(d=o[1],r=r.substr(o[1].length+1,r.length)),!d)if(null!==(o=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(r)))d=o[1];else{if(n.jsLoader.hasOwnProperty("ocLazyLoadLoader")||!n.jsLoader.hasOwnProperty("load"))return void n._$log.error("File type could not be determined. "+r);d="js"}"css"!==d&&"less"!==d||-1!==i.indexOf(r)?"html"!==d&&"htm"!==d||-1!==a.indexOf(r)?"js"===d||-1===s.indexOf(r)?s.push(r):n._$log.error("File type is not valid. "+r):a.push(r):i.push(r)}else c&&u.push(c)};if(t.serie?d(t.files.shift()):e.forEach(t.files,function(e){d(e)}),i.length>0){var f=r.defer();n.cssLoader(i,function(r){e.isDefined(r)&&n.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(n._$log.error(r),f.reject(r)):f.resolve()},t),u.push(f.promise)}if(a.length>0){var h=r.defer();n.templatesLoader(a,function(r){e.isDefined(r)&&n.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(n._$log.error(r),h.reject(r)):h.resolve()},t),u.push(h.promise)}if(s.length>0){var g=r.defer();n.jsLoader(s,function(r){e.isDefined(r)&&n.jsLoader.hasOwnProperty("ocLazyLoadLoader")?(n._$log.error(r),g.reject(r)):g.resolve()},t),u.push(g.promise)}if(0===u.length){var p=r.defer(),m="Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.";return n._$log.error(m),p.reject(m),p.promise}return t.serie&&t.files.length>0?r.all(u).then(function(){return n.filesLoader(o,t)}):r.all(u)["finally"](function(e){return n.toggleWatch(!1),e})},n.load=function(o){var t,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=this,s=null,u=[],c=r.defer(),l=e.copy(o),d=e.copy(i);if(e.isArray(l))return e.forEach(l,function(e){u.push(a.load(e,d))}),r.all(u).then(function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise;if(e.isString(l)?(s=a.getModuleConfig(l),s||(s={files:[l]})):e.isObject(l)&&(s=e.isDefined(l.path)&&e.isDefined(l.type)?{files:[l]}:a.setModuleConfig(l)),null===s){var f=a._getModuleName(l);return t='Module "'+(f||"unknown")+'" is not configured, cannot load.',n._$log.error(t),c.reject(new Error(t)),c.promise}e.isDefined(s.template)&&(e.isUndefined(s.files)&&(s.files=[]),e.isString(s.template)?s.files.push(s.template):e.isArray(s.template)&&s.files.concat(s.template));var h=e.extend({},d,s);return e.isUndefined(s.files)&&e.isDefined(s.name)&&n.moduleExists(s.name)?n.inject(s.name,h,!0):(n.filesLoader(s,h).then(function(){n.inject(null,h).then(function(e){c.resolve(e)},function(e){c.reject(e)})},function(e){c.reject(e)}),c.promise)},n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.cssLoader=function(o,t,i){var a=[];e.forEach(o,function(e){a.push(n.buildElement("css",e,i))}),r.all(a).then(function(){t()},function(e){t(e)})},n.cssLoader.ocLazyLoadLoader=!0,n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.jsLoader=function(o,t,i){var a=[];e.forEach(o,function(e){a.push(n.buildElement("js",e,i))}),r.all(a).then(function(){t()},function(e){t(e)})},n.jsLoader.ocLazyLoadLoader=!0,n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(n,r,o,t){return n.templatesLoader=function(i,a,s){var u=[],c=n._getFilesCache();return e.forEach(i,function(n){var i=o.defer();u.push(i.promise),t.get(n,s).success(function(o){e.isString(o)&&o.length>0&&e.forEach(e.element(o),function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&r.put(e.id,e.innerHTML)}),e.isUndefined(c.get(n))&&c.put(n,!0),i.resolve()}).error(function(e){i.reject(new Error('Unable to load template file "'+n+'": '+e))})}),o.all(u).then(function(){a()},function(e){a(e)})},n.templatesLoader.ocLazyLoadLoader=!0,n}])}])}(angular),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,n){var r;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),t=o.length>>>0;if(0===t)return-1;var i=+n||0;if(Math.abs(i)===1/0&&(i=0),i>=t)return-1;for(r=Math.max(i>=0?i:t-Math.abs(i),0);t>r;){if(r in o&&o[r]===e)return r;r++}return-1}),angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(a,b,c,d,e){var f=10,g=15,h=1e4,i="angular-notify.html",j="center",k=document.body,l=0,m=[],n=[],o=function(o){"object"!=typeof o&&(o={message:o}),o.duration=o.duration?o.duration:h,o.templateUrl=o.templateUrl?o.templateUrl:i,o.container=o.container?o.container:k,o.classes=o.classes?o.classes:"";var p=o.scope?o.scope.$new():e.$new();if(p.$position=o.position?o.position:j,p.$message=o.message,p.$classes=o.classes,p.$messageTemplate=o.messageTemplate,l>0)for(var q=n.length+1-l,r=0;q>r;r++)n[r].$close();b.get(o.templateUrl,{cache:d}).success(function(b){var d=c(b)(p);if(d.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(a){("opacity"===a.propertyName||0===a.currentTarget.style.opacity||a.originalEvent&&"opacity"===a.originalEvent.propertyName)&&(d.remove(),m.splice(m.indexOf(d),1),n.splice(n.indexOf(p),1),i())}),o.messageTemplate){for(var e,h=0;h<d.children().length;h++)if(angular.element(d.children()[h]).hasClass("cg-notify-message-template")){e=angular.element(d.children()[h]);break}if(!e)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+o.templateUrl+".");e.append(c(o.messageTemplate)(p))}angular.element(o.container).append(d),m.push(d),"center"===p.$position&&a(function(){p.$centerMargin="-"+d[0].offsetWidth/2+"px"}),p.$close=function(){d.css("opacity",0).attr("data-closing","true"),i()};var i=function(){for(var a=0,b=f,c=m.length-1;c>=0;c--){var d=10,e=m[c],h=e[0].offsetHeight,i=b+h+d;e.attr("data-closing")?i+=20:b+=h+g,e.css("top",i+"px").css("margin-top","-"+(h+d)+"px").css("visibility","visible"),a++}};a(function(){i()}),o.duration>0&&a(function(){p.$close()},o.duration)}).error(function(a){throw new Error("Template specified for cgNotify ("+o.templateUrl+") could not be loaded. "+a)});var s={};return s.close=function(){p.$close&&p.$close()},Object.defineProperty(s,"message",{get:function(){return p.$message},set:function(a){p.$message=a}}),n.push(p),s};return o.config=function(a){f=angular.isUndefined(a.startTop)?f:a.startTop,g=angular.isUndefined(a.verticalSpacing)?g:a.verticalSpacing,h=angular.isUndefined(a.duration)?h:a.duration,i=a.templateUrl?a.templateUrl:i,j=angular.isUndefined(a.position)?j:a.position,k=a.container?a.container:k,l=a.maximumOpen?a.maximumOpen:l},o.closeAll=function(){for(var a=m.length-1;a>=0;a--){var b=m[a];b.css("opacity",0)}},o}]),angular.module("cgNotify").run(["$templateCache",function(a){"use strict";a.put("angular-notify.html","<div class=\"cg-notify-message\" ng-class=\"[$classes, \n    $position === 'center' ? 'cg-notify-message-center' : '',\n    $position === 'left' ? 'cg-notify-message-left' : '',\n    $position === 'right' ? 'cg-notify-message-right' : '']\"\n    ng-style=\"{'margin-left': $centerMargin}\">\n\n    <div ng-show=\"!$messageTemplate\">\n        {{$message}}\n    </div>\n\n"+'    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}]),!function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(a,b,c,d){var e={priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(b,e,f,g){function h(){var a=b.col.compiledElementFn;a(b,function(a,b){e.append(a)})}if(g&&b.col.compiledElementFn)h();else if(g&&!b.col.compiledElementFn)b.col.getCompiledElementFn().then(function(a){a(b,function(a,b){e.append(a)})});else{var i=b.col.cellTemplate.replace(d.MODEL_COL_FIELD,"row.entity."+c.preEval(b.col.field)).replace(d.COL_FIELD,"grid.getCellValue(row, col)"),j=a(i)(b);e.append(j)}},post:function(a,b,c,e){var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.cellClass)?a.col.cellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.cellClass,d.addClass(g)};a.col.cellClass&&h();var i=a.grid.registerDataChangeCallback(h,[d.dataChange.COLUMN,d.dataChange.EDIT]),j=function(c,d){if(c!==d){(g||a.col.cellClass)&&h();var e=a.col.getColClass(!1);e!==f&&(b.removeClass(f),b.addClass(e),f=e)}},k=a.$watch("row",j),l=function(){i(),k()};a.$on("$destroy",l),b.on("$destroy",l)}}}};return e}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(a,b,c){var d={initialize:function(a,b){a.grid=b.grid,b.columnMenuScope=a,a.menuShown=!1},setColMenuItemWatch:function(a){var b=a.$watch("col.menuItems",function(b,c){"undefined"!=typeof b&&b&&angular.isArray(b)?(b.forEach(function(b){"undefined"!=typeof b.context&&b.context||(b.context={}),b.context.col=a.col}),a.menuItems=a.defaultMenuItems.concat(b)):a.menuItems=a.defaultMenuItems});a.$on("$destroy",b)},sortable:function(a){return a.grid.options.enableSorting&&"undefined"!=typeof a.col&&a.col&&a.col.enableSorting?!0:!1},isActiveSort:function(a,b){return"undefined"!=typeof a.col&&"undefined"!=typeof a.col.sort&&"undefined"!=typeof a.col.sort.direction&&a.col.sort.direction===b},suppressRemoveSort:function(a){return a.col&&a.col.suppressRemoveSort?!0:!1},hideable:function(a){return"undefined"!=typeof a.col&&a.col&&a.col.colDef&&a.col.colDef.enableHiding===!1?!1:!0},getDefaultMenuItems:function(c){return[{title:a.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function(a){a.stopPropagation(),c.sortColumn(a,b.ASC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.ASC)}},{title:a.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function(a){a.stopPropagation(),c.sortColumn(a,b.DESC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.DESC)}},{title:a.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),c.unsortColumn()},shown:function(){return d.sortable(c)&&"undefined"!=typeof c.col&&"undefined"!=typeof c.col.sort&&"undefined"!=typeof c.col.sort.direction&&null!==c.col.sort.direction&&!d.suppressRemoveSort(c)}},{title:a.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return d.hideable(c)},action:function(a){a.stopPropagation(),c.hideColumn()}},{title:a.getSafeText("columnMenu.close"),screenReaderOnly:!0,shown:function(){return!0},action:function(a){a.stopPropagation()}}]},getColumnElementPosition:function(a,b,d){var e={};return e.left=d[0].offsetLeft,e.top=d[0].offsetTop,e.parentLeft=d[0].offsetParent.offsetLeft,e.offset=0,b.grid.options.offsetLeft&&(e.offset=b.grid.options.offsetLeft),e.height=c.elementHeight(d,!0),e.width=c.elementWidth(d,!0),e},repositionMenu:function(a,b,d,e,f){var g=e[0].querySelectorAll(".ui-grid-menu"),h=b.renderContainer?b.renderContainer:"body",i=(b.grid.renderContainers[h],c.closestElm(f,".ui-grid-render-container")),j=i.getBoundingClientRect().left-a.grid.element[0].getBoundingClientRect().left,k=i.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,l=b.lastMenuWidth?b.lastMenuWidth:a.lastMenuWidth?a.lastMenuWidth:170,m=b.lastMenuPaddingRight?b.lastMenuPaddingRight:a.lastMenuPaddingRight?a.lastMenuPaddingRight:10;if(0!==g.length){var n=g[0].querySelectorAll(".ui-grid-menu-mid");0===n.length||angular.element(n).hasClass("ng-hide")||(l=c.elementWidth(g,!0),a.lastMenuWidth=l,b.lastMenuWidth=l,m=parseInt(c.getStyles(angular.element(g)[0]).paddingRight,10),a.lastMenuPaddingRight=m,b.lastMenuPaddingRight=m)}var o=d.left+j-k+d.parentLeft+d.width-l+m;o<d.offset&&(o=d.offset),e.css("left",o+"px"),e.css("top",d.top+d.height+"px")}};return d}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function(a,b,c,d,e){var f={priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(f,g,h,i){var j=this;d.initialize(f,i),f.defaultMenuItems=d.getDefaultMenuItems(f),f.menuItems=f.defaultMenuItems,d.setColMenuItemWatch(f),f.showMenu=function(a,b,c){f.col=a;var e=d.getColumnElementPosition(f,a,b);f.menuShown?(f.colElement=b,f.colElementPosition=e,f.hideThenShow=!0,f.$broadcast("hide-menu",{originalEvent:c})):(j.shown=f.menuShown=!0,d.repositionMenu(f,a,e,g,b),f.colElement=b,f.colElementPosition=e,f.$broadcast("show-menu",{originalEvent:c}))},f.hideMenu=function(a){f.menuShown=!1,a||f.$broadcast("hide-menu")},f.$on("menu-hidden",function(){f.hideThenShow?(delete f.hideThenShow,d.repositionMenu(f,f.col,f.colElementPosition,g,f.colElement),f.$broadcast("show-menu"),f.menuShown=!0):(f.hideMenu(!0),f.col&&b.focus.bySelector(e,".ui-grid-header-cell."+f.col.getColClass()+" .ui-grid-column-menu-button",f.col.grid,!1))}),f.$on("menu-shown",function(){a(function(){d.repositionMenu(f,f.col,f.colElementPosition,g,f.colElement),delete f.colElementPosition,delete f.columnElement},200)}),f.sortColumn=function(a,b){a.stopPropagation(),f.grid.sortColumn(f.col,b,!0).then(function(){f.grid.refresh(),f.hideMenu()})},f.unsortColumn=function(){f.col.unsort(),f.grid.refresh(),f.hideMenu()};var k=function(){a(function(){var a,c=function(){return b.focus.byId("grid-menu",f.grid)};f.grid.columns.some(function(b,c){return angular.equals(b,f.col)?(a=c,!0):void 0});var d;if(f.grid.columns.some(function(b,c){if(!b.visible)return!1;if(a>c)d=b;else{if(c>a&&!d)return d=b,!0;if(c>a&&d)return!0}}),d){var g=d.getColClass();b.focus.bySelector(e,".ui-grid-header-cell."+g+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(a){return"canceled"!==a?c():void 0})}else c()})};f.hideColumn=function(){f.col.colDef.visible=!1,f.col.visible=!1,f.grid.queueGridRefresh(),f.hideMenu(),f.grid.api.core.notifyDataChange(c.dataChange.COLUMN),f.grid.api.core.raise.columnVisibilityChanged(f.col),k()}},controller:["$scope",function(a){var b=this;a.$watch("menuItems",function(a,c){b.menuItems=a})}]};return f}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function(a,b,c,d){return{compile:function(){return{pre:function(b,c,d,e){b.col.updateFilters=function(d){if(c.children().remove(),d){var e=b.col.filterHeaderTemplate;c.append(a(e)(b))}},b.$on("$destroy",function(){delete b.col.updateFilters})},post:function(a,b,e,f){a.aria=c.getSafeText("headerCell.aria"),a.removeFilter=function(a,c){a.term=null,d.focus.bySelector(b,".ui-grid-filter-input-"+c)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(a,b,c,d){var e={priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(a,b,e){return{pre:function(a,b,c,e){var f=d(a.col.footerCellTemplate)(a);b.append(f)},post:function(a,b,d,e){a.grid=e.grid;var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.footerCellClass)?a.col.footerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.footerCellClass,d.addClass(g)};a.col.footerCellClass&&h(),a.col.updateAggregationValue();var i=a.grid.registerDataChangeCallback(h,[c.dataChange.COLUMN]);a.grid.api.core.on.rowsRendered(a,a.col.updateAggregationValue),a.grid.api.core.on.rowsRendered(a,h),a.$on("$destroy",i)}}}};return e}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,f){var g=f[0],h=f[1];a.grid=g.grid,a.colContainer=h.colContainer,h.footer=c;var i=a.grid.options.footerTemplate;d.getTemplate(i).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.append(f),h){var g=c[0].getElementsByClassName("ui-grid-footer-viewport")[0];g&&(h.footerViewport=g)}})},post:function(a,b,c,e){var f=e[0],g=e[1];f.grid,d.disableAnimations(b),g.footer=b;var h=b[0].getElementsByClassName("ui-grid-footer-viewport")[0];h&&(g.footerViewport=h)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(a,c){return{pre:function(a,c,e,f){a.grid=f.grid;var g=a.grid.options.gridFooterTemplate;d.getTemplate(g).then(function(d){var e=angular.element(d),f=b(e)(a);c.append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(a,b,c){var d="ui-grid/ui-grid-group-panel";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(b,e){return{pre:function(b,e,f,g){var h=b.grid.options.groupPanelTemplate||d;c.getTemplate(h).then(function(c){var d=angular.element(c),f=a(d)(b);e.append(f)})},post:function(a,b,c,d){b.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function(a,b,c,d,e,f,g,h){var i=500,j=500,k={priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(b,c,d){var e=a(b.col.headerCellTemplate)(b);c.append(e)},post:function(a,c,e,g){var k=g[0],l=g[1];a.i18n={headerCell:h.getSafeText("headerCell"),sort:h.getSafeText("sort")},a.getSortDirectionAriaLabel=function(){var b=a.col,c=b.sort.direction===f.ASC?a.i18n.sort.ascending:b.sort.direction===f.DESC?a.i18n.sort.descending:a.i18n.sort.none,d=c;return b.sort.priority&&(d=d+". "+a.i18n.headerCell.priority+" "+b.sort.priority),d},a.grid=k.grid,a.renderContainer=k.grid.renderContainers[l.containerId];var m=a.col.getColClass(!1);c.addClass(m),a.menuShown=!1,a.asc=f.ASC,a.desc=f.DESC;var n,o,p=(angular.element(c[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(c[0].querySelectorAll(".ui-grid-cell-contents"))),q=[];a.downFn=function(e){e.stopPropagation(),"undefined"!=typeof e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),e.button&&0!==e.button||(o=e.pageX,a.mousedownStartTime=(new Date).getTime(),a.mousedownTimeout=b(function(){},i),a.mousedownTimeout.then(function(){a.colMenu&&k.columnMenuScope.showMenu(a.col,c,e)}),k.fireEvent(f.events.COLUMN_HEADER_CLICK,{event:e,columnName:a.col.colDef.name}),a.offAllEvents(),"touchstart"===e.type?(d.on("touchend",a.upFn),d.on("touchmove",a.moveFn)):"mousedown"===e.type&&(d.on("mouseup",a.upFn),d.on("mousemove",a.moveFn)))},a.upFn=function(c){c.stopPropagation(),b.cancel(a.mousedownTimeout),
a.offAllEvents(),a.onDownEvents(c.type);var d=(new Date).getTime(),e=d-a.mousedownStartTime;e>i||a.sortable&&a.handleClick(c)},a.moveFn=function(c){var d=c.pageX-o;0!==d&&(b.cancel(a.mousedownTimeout),a.offAllEvents(),a.onDownEvents(c.type))},a.clickFn=function(b){b.stopPropagation(),p.off("click",a.clickFn)},a.offAllEvents=function(){p.off("touchstart",a.downFn),p.off("mousedown",a.downFn),d.off("touchend",a.upFn),d.off("mouseup",a.upFn),d.off("touchmove",a.moveFn),d.off("mousemove",a.moveFn),p.off("click",a.clickFn)},a.onDownEvents=function(c){switch(c){case"touchmove":case"touchend":p.on("click",a.clickFn),p.on("touchstart",a.downFn),b(function(){p.on("mousedown",a.downFn)},j);break;case"mousemove":case"mouseup":p.on("click",a.clickFn),p.on("mousedown",a.downFn),b(function(){p.on("touchstart",a.downFn)},j);break;default:p.on("click",a.clickFn),p.on("touchstart",a.downFn),p.on("mousedown",a.downFn)}};var r=function(b){var d=c;n&&(d.removeClass(n),n=null),n=angular.isFunction(a.col.headerCellClass)?a.col.headerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.headerCellClass,d.addClass(n);var e=a.grid.renderContainers.right?a.grid.renderContainers.right:a.grid.renderContainers.body;a.isLastCol=a.col===e.visibleColumnCache[e.visibleColumnCache.length-1],k.grid.options.enableSorting&&a.col.enableSorting?a.sortable=!0:a.sortable=!1;var g=a.filterable;k.grid.options.enableFiltering&&a.col.enableFiltering?a.filterable=!0:a.filterable=!1,g!==a.filterable&&("undefined"!=typeof a.col.updateFilters&&a.col.updateFilters(a.filterable),a.filterable?(a.col.filters.forEach(function(b,c){q.push(a.$watch("col.filters["+c+"].term",function(a,b){a!==b&&(k.grid.api.core.raise.filterChanged(),k.grid.api.core.notifyDataChange(f.dataChange.COLUMN),k.grid.queueGridRefresh())}))}),a.$on("$destroy",function(){q.forEach(function(a){a()})})):q.forEach(function(a){a()})),a.col.grid.options&&a.col.grid.options.enableColumnMenus!==!1&&a.col.colDef&&a.col.colDef.enableColumnMenu!==!1?a.colMenu=!0:a.colMenu=!1,a.offAllEvents(),(a.sortable||a.colMenu)&&(a.onDownEvents(),a.$on("$destroy",function(){a.offAllEvents()}))};r();var s=a.grid.registerDataChangeCallback(r,[f.dataChange.COLUMN]);a.$on("$destroy",s),a.handleClick=function(b){var c=!1;b.shiftKey&&(c=!0),k.grid.sortColumn(a.col,c).then(function(){k.columnMenuScope&&k.columnMenuScope.hideMenu(),k.grid.refresh()})},a.toggleMenu=function(b){b.stopPropagation(),k.columnMenuScope.menuShown&&k.columnMenuScope.col===a.col?k.columnMenuScope.hideMenu():k.columnMenuScope.showMenu(a.col,c)}}}}};return k}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(a,b,c,d,e,f){var g="ui-grid/ui-grid-header",h="ui-grid/ui-grid-no-header";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,i){function j(){m.header=m.colContainer.header=c;var a=c[0].getElementsByClassName("ui-grid-header-canvas");a.length>0?m.headerCanvas=m.colContainer.headerCanvas=a[0]:m.headerCanvas=null}function k(a){if(!l.grid.isScrollingHorizontally){var b=d.normalizeScrollLeft(m.headerViewport,l.grid),c=m.colContainer.scrollHorizontal(b),e=new f(l.grid,null,m.colContainer,f.Sources.ViewPortScroll);e.newScrollLeft=b,c>-1&&(e.x={percentage:c}),l.grid.scrollContainers(null,e)}}var l=i[0],m=i[1];a.grid=l.grid,a.colContainer=m.colContainer,j();var n;n=a.grid.options.showHeader?a.grid.options.headerTemplate?a.grid.options.headerTemplate:g:h,d.getTemplate(n).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.replaceWith(f),c=f,j(),m){var g=c[0].getElementsByClassName("ui-grid-header-viewport")[0];g&&(m.headerViewport=g,angular.element(g).on("scroll",k),a.$on("$destroy",function(){angular.element(g).off("scroll",k)}))}a.grid.queueRefresh()})},post:function(a,b,c,e){function f(){var a=h.colContainer.visibleColumnCache,b="",c=0;return a.forEach(function(a){b+=a.getColClassDefinition(),c+=a.drawnWidth}),h.colContainer.canvasWidth=c,b}var g=e[0],h=e[1];g.grid,d.disableAnimations(b),h.header=b;var i=b[0].getElementsByClassName("ui-grid-header-viewport")[0];i&&(h.headerViewport=i),g&&g.grid.registerStyleComputation({priority:15,func:f})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(a,b,c){var d={initialize:function(a,b){b.gridMenuScope=a,a.grid=b,a.registeredMenuItems=[],a.$on("$destroy",function(){a.grid&&a.grid.gridMenuScope&&(a.grid.gridMenuScope=null),a.grid&&(a.grid=null),a.registeredMenuItems&&(a.registeredMenuItems=null)}),a.registeredMenuItems=[],b.api.registerMethod("core","addToGridMenu",d.addToGridMenu),b.api.registerMethod("core","removeFromGridMenu",d.removeFromGridMenu)},addToGridMenu:function(b,c){angular.isArray(c)?b.gridMenuScope?(b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems?b.gridMenuScope.registeredMenuItems:[],b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems.concat(c)):a.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):a.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(b,c){var d=-1;b&&b.gridMenuScope&&b.gridMenuScope.registeredMenuItems.forEach(function(b,e){b.id===c&&(d>-1?a.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):d=e)}),d>-1&&b.gridMenuScope.registeredMenuItems.splice(d,1)},getMenuItems:function(c){var e=[];c.grid.options.gridMenuCustomItems&&(angular.isArray(c.grid.options.gridMenuCustomItems)?e=e.concat(c.grid.options.gridMenuCustomItems):a.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var f=[{title:b.getSafeText("gridMenu.clearAllFilters"),action:function(a){c.grid.clearAllFilters(void 0,!0,void 0)},shown:function(){return c.grid.options.enableFiltering},order:100}];return e=e.concat(f),e=e.concat(c.registeredMenuItems),c.grid.options.gridMenuShowHideColumns!==!1&&(e=e.concat(d.showHideColumns(c))),e.sort(function(a,b){return a.order-b.order}),e},showHideColumns:function(a){var c=[];return a.grid.options.columnDefs&&0!==a.grid.options.columnDefs.length&&0!==a.grid.columns.length?(c.push({title:b.getSafeText("gridMenu.columns"),order:300}),a.grid.options.gridMenuTitleFilter=a.grid.options.gridMenuTitleFilter?a.grid.options.gridMenuTitleFilter:function(a){return a},a.grid.options.columnDefs.forEach(function(b,e){if(b.enableHiding!==!1){var f={icon:"ui-grid-icon-ok",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible},context:{gridCol:a.grid.getColumn(b.name||b.field)},leaveOpen:!0,order:301+2*e};d.setMenuItemTitle(f,b,a.grid),c.push(f),f={icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:a.grid.getColumn(b.name||b.field)},leaveOpen:!0,order:301+2*e+1},d.setMenuItemTitle(f,b,a.grid),c.push(f)}}),c):c},setMenuItemTitle:function(b,c,d){var e=d.options.gridMenuTitleFilter(c.displayName||a.readableColumnName(c.name)||c.field);"string"==typeof e?b.title=e:e.then?(b.title="",e.then(function(a){b.title=a},function(a){b.title=a})):(a.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),b.title="badconfig")},toggleColumnVisibility:function(a){a.colDef.visible=!(a.colDef.visible===!0||void 0===a.colDef.visible),a.grid.refresh(),a.grid.api.core.notifyDataChange(c.dataChange.COLUMN),a.grid.api.core.raise.columnVisibilityChanged(a)}};return d}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(a,b,c,d){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(b,e,f,g){var h=g[0];b.i18n={aria:d.getSafeText("gridMenu.aria")},c.initialize(b,h.grid),b.shown=!1,b.toggleMenu=function(){b.shown?(b.$broadcast("hide-menu"),b.shown=!1):(b.menuItems=c.getMenuItems(b),b.$broadcast("show-menu"),b.shown=!0)},b.$on("menu-hidden",function(){b.shown=!1,a.focus.bySelector(e,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function(a,b,c,d,e,f,g){var h={priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(a,d,h,i){var j=this;a.i18n={close:g.getSafeText("columnMenu.close")},j.showMenu=a.showMenu=function(c,f){a.shown?a.shownMid||(a.shownMid=!0,a.$emit("menu-shown")):(a.shown=!0,b(function(){a.shownMid=!0,a.$emit("menu-shown")}));var g="click";f&&f.originalEvent&&f.originalEvent.type&&"touchstart"===f.originalEvent.type&&(g=f.originalEvent.type),angular.element(document).off("click touchstart",k),b(function(){angular.element(document).on(g,k)}),e.focus.bySelector(d,"button[type=button]",!0)},j.hideMenu=a.hideMenu=function(c,d){a.shown&&(a.shownMid=!1,b(function(){a.shownMid||(a.shown=!1,a.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",k)},a.$on("hide-menu",function(b,c){a.hideMenu(b,c)}),a.$on("show-menu",function(b,c){a.showMenu(b,c)});var k=function(){a.shown&&a.$apply(function(){a.hideMenu()})};("undefined"==typeof a.autoHide||void 0===a.autoHide)&&(a.autoHide=!0),a.autoHide&&angular.element(c).on("resize",k),a.$on("$destroy",function(){angular.element(document).off("click touchstart",k)}),a.$on("$destroy",function(){angular.element(c).off("resize",k)}),i&&a.$on("$destroy",i.grid.api.core.on.scrollBegin(a,k)),a.$on("$destroy",a.$on(f.events.ITEM_DRAGGING,k))},controller:["$scope","$element","$attrs",function(a,b,c){}]};return h}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(a,b,c){var d={priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid","^uiGridMenu"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(d,e){return{pre:function(c,d,e,f){f[0],f[1],c.templateUrl&&a.getTemplate(c.templateUrl).then(function(a){var e=angular.element(a),f=b(e)(c);d.replaceWith(f)})},post:function(b,d,e,f){var g=f[0];f[1],("undefined"==typeof b.shown||null===b.shown)&&(b.shown=function(){return!0}),b.itemShown=function(){var a={};return b.context&&(a.context=b.context),"undefined"!=typeof g&&g&&(a.grid=g.grid),b.shown.call(a)},b.itemAction=function(c,e){if(a.logDebug("itemAction"),c.stopPropagation(),"function"==typeof b.action){var f={};b.context&&(f.context=b.context),"undefined"!=typeof g&&g&&(f.grid=g.grid),b.action.call(f,c,e),b.leaveOpen?a.focus.bySelector(angular.element(a.closestElm(d,".ui-grid-menu-items")),"button[type=button]",!0):b.$emit("hide-menu")}},b.i18n=c.get()}}}};return d}])}(),function(){"use strict";var a=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(b){var c="uiGridOneBind",d=(b.aria?c+"Aria":c)+(b.directiveName?b.directiveName:b.tag);a.directive(d,["gridUtil",function(a){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(c,e,f,g){var h=function(b){var e;if(c.grid)e=c.grid;else if(c.col&&c.col.grid)e=c.col.grid;else if(!g.some(function(a){return a&&a.grid?(e=a.grid,!0):void 0}))throw a.logError("["+d+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+b),new Error("No valid grid could be found");if(e){var f=new RegExp(e.id.toString());f.test(b)||(b=e.id.toString()+"-"+b)}return b},i=c.$watch(f[d],function(a){if(a){if(b.appendGridId){var c=null;angular.forEach(a.split(" "),function(a){c=(c?c+" ":"")+h(a)}),a=c}switch(b.method){case"attr":b.aria?e[b.method]("aria-"+b.tag.toLowerCase(),a):e[b.method](b.tag.toLowerCase(),a);break;case"addClass":if(angular.isObject(a)&&!angular.isArray(a)){var d=[],f=!1;if(angular.forEach(a,function(a,b){null!==a&&"undefined"!=typeof a&&(f=!0,a&&d.push(b))}),!f)return;a=d}if(!a)return;e.addClass(angular.isArray(a)?a.join(" "):a);break;default:e[b.method](a)}i()}},!0)}}}])})}(),function(){"use strict";var a=angular.module("ui.grid");a.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(a,b,c,d,e){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(a,b,c,d){var e=d[0],f=d[1],g=a.grid=e.grid;if(!a.rowContainerName)throw"No row render container name specified";if(!a.colContainerName)throw"No column render container name specified";if(!g.renderContainers[a.rowContainerName])throw"Row render container '"+a.rowContainerName+"' is not registered.";if(!g.renderContainers[a.colContainerName])throw"Column render container '"+a.colContainerName+"' is not registered.";var h=a.rowContainer=g.renderContainers[a.rowContainerName],i=a.colContainer=g.renderContainers[a.colContainerName];f.containerId=a.containerId,f.rowContainer=h,f.colContainer=i},post:function(a,b,c,f){function g(){var b="",c=l.canvasWidth,d=l.getViewportWidth(),e=k.getCanvasHeight(),f=k.getViewportHeight();l.needsHScrollbarPlaceholder()&&(f-=j.scrollbarHeight);var g,i;return g=i=l.getHeaderViewportWidth(),b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-canvas { width: "+c+"px; height: "+e+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { width: "+(c+j.scrollbarWidth)+"px; }",b+=o.explicitHeaderCanvasHeight?"\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: "+o.explicitHeaderCanvasHeight+"px; }":"\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: inherit; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-viewport { width: "+d+"px; height: "+f+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-viewport { width: "+g+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-canvas { width: "+(c+j.scrollbarWidth)+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-viewport { width: "+i+"px; }"}var h=f[0],i=f[1],j=h.grid,k=i.rowContainer,l=i.colContainer,m=null,n=null,o=j.renderContainers[a.containerId];b.addClass("ui-grid-render-container-"+a.containerId),d.on.mousewheel(b,function(a){var b=new e(j,k,l,e.Sources.RenderContainerMouseWheel);if(0!==a.deltaY){var c=-1*a.deltaY*a.deltaFactor;m=i.viewport[0].scrollTop,b.verticalScrollLength=k.getVerticalScrollLength();var f=(m+c)/b.verticalScrollLength;f>=1&&m<b.verticalScrollLength&&(i.viewport[0].scrollTop=b.verticalScrollLength),0>f?f=0:f>1&&(f=1),b.y={percentage:f,pixels:c}}if(0!==a.deltaX){var g=a.deltaX*a.deltaFactor;n=d.normalizeScrollLeft(i.viewport,j),b.horizontalScrollLength=l.getCanvasWidth()-l.getViewportWidth();var h=(n+g)/b.horizontalScrollLength;0>h?h=0:h>1&&(h=1),b.x={percentage:h,pixels:g}}0!==a.deltaY&&(b.atTop(m)||b.atBottom(m))||0!==a.deltaX&&(b.atLeft(n)||b.atRight(n))||(a.preventDefault(),a.stopPropagation(),b.fireThrottledScrollingEvent("",b))}),b.bind("$destroy",function(){b.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(a){b.unbind(a)})}),h.grid.registerStyleComputation({priority:6,func:g})}}}}}]),a.controller("uiGridRenderContainer",["$scope","gridUtil",function(a,b){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(a){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(a,b,c,d){function e(){a.row.getRowTemplateFn.then(function(c){var d=a.$new();c(d,function(a,c){h&&(h.remove(),i.$destroy()),b.empty().append(a),h=a,i=d})})}var f=d[0],g=d[1];f.grid,a.grid=f.grid,a.colContainer=g.colContainer;var h,i;e(),a.$watch("row.getRowTemplateFn",function(a,b){a!==b&&e()})},post:function(a,b,c,d){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(a,b){return{link:function(a,c,d,e){var f=b(c.text(),!0);f&&a.$watch(f,function(a){c.text(a)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(a,b,c,d){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(c,d,e,f){function g(e){var f=d[0].scrollTop,g=a.normalizeScrollLeft(d,p),h=n.scrollVertical(f),i=o.scrollHorizontal(g),j=new b(p,n,o,b.Sources.ViewPortScroll);j.newScrollLeft=g,j.newScrollTop=f,i>-1&&(j.x={percentage:i}),h>-1&&(j.y={percentage:h}),p.scrollContainers(c.$parent.containerId,j)}function h(a){m.prevScrollArgs=a;var b=a.getNewScrollTop(n,m.viewport);d[0].scrollTop=b}function i(b){m.prevScrollArgs=b;var c=b.getNewScrollLeft(o,m.viewport);d[0].scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p)}function j(b){var c=b.getNewScrollLeft(o,m.viewport);m.headerViewport&&(m.headerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}function k(b){var c=b.getNewScrollLeft(o,m.viewport);m.footerViewport&&(m.footerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}var l=f[0],m=f[1];c.containerCtrl=m;var n=m.rowContainer,o=m.colContainer,p=l.grid;c.grid=l.grid,c.rowContainer=m.rowContainer,c.colContainer=m.colContainer,m.viewport=d,d.on("scroll",g),c.$parent.bindScrollVertical&&p.addVerticalScrollSync(c.$parent.containerId,h),c.$parent.bindScrollHorizontal&&(p.addHorizontalScrollSync(c.$parent.containerId,i),p.addHorizontalScrollSync(c.$parent.containerId+"header",j),p.addHorizontalScrollSync(c.$parent.containerId+"footer",k))},controller:["$scope",function(a){this.rowStyle=function(b){var c=a.rowContainer,d=a.colContainer,e={};if(0===b&&0!==c.currentTopRow){var f=c.currentTopRow*c.grid.options.rowHeight;e["margin-top"]=f+"px"}return 0!==d.currentFirstColumn&&(d.grid.isRTL()?e["margin-right"]=d.columnOffset+"px":e["margin-left"]=d.columnOffset+"px"),e}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(a,b,c){a.$watch(c.uiGridVisible,function(a){b[a?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";function a(a,b,c,d,e,f){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(a,b,g,h){function i(){b[0].offsetWidth<=0&&p>q?(setTimeout(i,o),q++):c(k)}function j(){angular.element(d).on("resize",m),b.on("$destroy",function(){angular.element(d).off("resize",m)}),a.$watch(function(){return n.hasLeftContainer()},function(a,b){a!==b&&n.refreshCanvas(!0)}),a.$watch(function(){return n.hasRightContainer()},function(a,b){a!==b&&n.refreshCanvas(!0)})}function k(){n.gridWidth=a.gridWidth=e.elementWidth(b),n.canvasWidth=h.grid.gridWidth,n.gridHeight=a.gridHeight=e.elementHeight(b),n.gridHeight<n.options.rowHeight&&n.options.enableMinHeightCheck&&l(),n.refreshCanvas(!0)}function l(){var c=n.options.minRowsToShow*n.options.rowHeight,d=n.options.showHeader?n.options.headerRowHeight:0,g=n.calcFooterHeight(),h=0;n.options.enableHorizontalScrollbar===f.scrollbars.ALWAYS&&(h=e.getScrollbarWidth());var i=0;if(angular.forEach(n.options.columnDefs,function(a){a.hasOwnProperty("filter")?1>i&&(i=1):a.hasOwnProperty("filters")&&i<a.filters.length&&(i=a.filters.length)}),n.options.enableFiltering){var j=n.options.columnDefs.every(function(a){return a.enableFiltering===!1});j||i++}var k=i*d,l=d+c+g+h+k;b.css("height",l+"px"),n.gridHeight=a.gridHeight=e.elementHeight(b)}function m(c){n.gridWidth=a.gridWidth=e.elementWidth(b),n.gridHeight=a.gridHeight=e.elementHeight(b),n.refreshCanvas(!0)}var n=h.grid;h.scrollbars=[],n.element=b;var o=100,p=20,q=0;j(),k(),n.renderingComplete(),i()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){a&&a!==b&&(n.grid.options.columnDefs=a,n.grid.buildColumns({orderByColumnDefs:!0}).then(function(){n.grid.preCompileCellTemplates(),n.grid.callDataChangeCallbacks(f.dataChange.COLUMN)}))}function m(b){var d=[];if(n.grid.options.fastWatch&&(b=angular.isString(a.uiGrid.data)?n.grid.appScope[a.uiGrid.data]:a.uiGrid.data),b){var g=n.grid.columns.length>(n.grid.rowHeaderColumns?n.grid.rowHeaderColumns.length:0);!g&&!c.uiGridColumns&&0===n.grid.options.columnDefs.length&&b.length>0&&n.grid.buildColumnDefsFromData(b),!g&&(n.grid.options.columnDefs.length>0||b.length>0)&&d.push(n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates()})),e.all(d).then(function(){n.grid.modifyRows(b).then(function(){n.grid.redrawInPlace(!0),a.$evalAsync(function(){n.grid.refreshCanvas(!0),n.grid.callDataChangeCallbacks(f.dataChange.ROW)})})})}}var n=this;n.grid=h.createGrid(a.uiGrid),n.grid.appScope=n.grid.appScope||a.$parent,b.addClass("grid"+n.grid.id),n.grid.rtl="rtl"===d.getStyles(b[0]).direction,a.grid=n.grid,c.uiGridColumns&&c.$observe("uiGridColumns",function(a){n.grid.options.columnDefs=a,n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates(),n.grid.refreshCanvas(!0)})});var o=[];n.grid.options.fastWatch?(n.uiGrid=a.uiGrid,angular.isString(a.uiGrid.data)?(o.push(a.$parent.$watch(a.uiGrid.data,m)),o.push(a.$parent.$watch(function(){return n.grid.appScope[a.uiGrid.data]?n.grid.appScope[a.uiGrid.data].length:void 0},m))):(o.push(a.$parent.$watch(function(){return a.uiGrid.data},m)),o.push(a.$parent.$watch(function(){return a.uiGrid.data.length},m))),o.push(a.$parent.$watch(function(){return a.uiGrid.columnDefs},l)),o.push(a.$parent.$watch(function(){return a.uiGrid.columnDefs.length},l))):(o.push(angular.isString(a.uiGrid.data)?a.$parent.$watchCollection(a.uiGrid.data,m):a.$parent.$watchCollection(function(){return a.uiGrid.data},m)),o.push(a.$parent.$watchCollection(function(){return a.uiGrid.columnDefs},l)));var p=a.$watch(function(){return n.grid.styleComputations},function(){n.grid.refreshCanvas(!0)});a.$on("$destroy",function(){o.forEach(function(a){a()}),p()}),n.fireEvent=function(b,c){("undefined"==typeof c||void 0===c)&&(c={}),("undefined"==typeof c.grid||void 0===c.grid)&&(c.grid=n.grid),a.$broadcast(b,c)},n.innerCompile=function(b){k(b)(a)}}]),angular.module("ui.grid").directive("uiGrid",a),a.$inject=["$compile","$templateCache","$timeout","$window","gridUtil","uiGridConstants"]}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(a){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(a,b,c,d){function e(){var a=this,b=0;a.visibleColumnCache.forEach(function(a){b+=a.drawnWidth});var c=a.getViewportAdjustment();return b+=c.width}function f(){if("left"===a.side||"right"===a.side){for(var b=h.renderContainers[a.side].visibleColumnCache,c=0,d=0;d<b.length;d++){var e=b[d];c+=e.drawnWidth||e.width||0}return c}}function g(){var c="";return("left"===a.side||"right"===a.side)&&(i=f(),b.attr("style",null),c+=".grid"+h.id+" .ui-grid-pinned-container-"+a.side+", .grid"+h.id+" .ui-grid-pinned-container-"+a.side+" .ui-grid-render-container-"+a.side+" .ui-grid-viewport { width: "+i+"px; } "),c}var h=d.grid,i=0;b.addClass("ui-grid-pinned-container-"+a.side),("left"===a.side||"right"===a.side)&&(h.renderContainers[a.side].getViewportWidth=e),h.renderContainers.body.registerViewportAdjuster(function(b){return i=f(),b.width-=i,b.side=a.side,b}),h.registerStyleComputation({priority:15,func:g})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){}var p=function(a){function b(a){g.isScrollingVertically=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}function c(a){g.isScrollingHorizontally=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}var g=this;if(void 0===a||"undefined"==typeof a.id||!a.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(a.id))throw new Error("Grid id '"+a.id+'" is invalid. It must follow CSS selector syntax rules.');g.id=a.id,delete a.id,g.options=f.initialize(a),g.appScope=g.options.appScopeProvider,g.headerHeight=g.options.headerRowHeight,g.footerHeight=g.calcFooterHeight(),g.columnFooterHeight=g.calcColumnFooterHeight(),g.rtl=!1,g.gridHeight=0,g.gridWidth=0,g.columnBuilders=[],g.rowBuilders=[],g.rowsProcessors=[],g.columnsProcessors=[],g.styleComputations=[],g.viewportAdjusters=[],g.rowHeaderColumns=[],g.dataChangeCallbacks={},g.verticalScrollSyncCallBackFns={},g.horizontalScrollSyncCallBackFns={},g.renderContainers={},g.renderContainers.body=new l("body",g),g.cellValueGetterCache={},g.getRowTemplateFn=null,g.rows=[],g.columns=[],g.isScrollingVertically=!1,g.isScrollingHorizontally=!1,g.scrollDirection=e.scrollDirection.NONE,g.disableScrolling=!1;var h=d.debounce(b,g.options.scrollDebounce),k=d.debounce(b,0),m=d.debounce(c,g.options.scrollDebounce),n=d.debounce(c,0);g.flagScrollingVertically=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingVertically=!0,0!==g.options.scrollDebounce&&a.withDelay?h(a):k(a)},g.flagScrollingHorizontally=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingHorizontally=!0,0!==g.options.scrollDebounce&&a.withDelay?m(a):n(a)},g.scrollbarHeight=0,g.scrollbarWidth=0,g.options.enableHorizontalScrollbar===e.scrollbars.ALWAYS&&(g.scrollbarHeight=d.getScrollbarWidth()),g.options.enableVerticalScrollbar===e.scrollbars.ALWAYS&&(g.scrollbarWidth=d.getScrollbarWidth()),g.api=new i(g),g.api.registerMethod("core","refresh",this.refresh),g.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),g.api.registerMethod("core","refreshRows",this.refreshRows),g.api.registerMethod("core","queueRefresh",this.queueRefresh),g.api.registerMethod("core","handleWindowResize",this.handleWindowResize),g.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),g.api.registerMethod("core","scrollToIfNecessary",function(a,b){return g.scrollToIfNecessary(a,b)}),g.api.registerMethod("core","scrollTo",function(a,b){return g.scrollTo(a,b)}),g.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),g.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),g.api.registerMethod("core","sortHandleNulls",j.handleNulls),g.api.registerEvent("core","sortChanged"),g.api.registerEvent("core","columnVisibilityChanged"),g.api.registerMethod("core","notifyDataChange",this.notifyDataChange),g.api.registerMethod("core","clearAllFilters",this.clearAllFilters),g.registerDataChangeCallback(g.columnRefreshCallback,[e.dataChange.COLUMN]),g.registerDataChangeCallback(g.processRowsCallback,[e.dataChange.EDIT]),g.registerDataChangeCallback(g.updateFooterHeightCallback,[e.dataChange.OPTIONS]),g.registerStyleComputation({priority:10,func:g.getFooterStyles})};return p.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var a=0;return this.options.showGridFooter&&(a+=this.options.gridFooterHeight),a+=this.calcColumnFooterHeight()},p.prototype.calcColumnFooterHeight=function(){var a=0;return this.options.showColumnFooter&&(a+=this.options.columnFooterHeight),a},p.prototype.getFooterStyles=function(){var a=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return a+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},p.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},p.prototype.isRTL=function(){return this.rtl},p.prototype.registerColumnBuilder=function(a){this.columnBuilders.push(a)},p.prototype.buildColumnDefsFromData=function(a){this.options.columnDefs=d.getColumnsFromData(a,this.options.excludeProperties)},p.prototype.registerRowBuilder=function(a){this.rowBuilders.push(a)},p.prototype.registerDataChangeCallback=function(a,b,c){var f=d.nextUid();b||(b=[e.dataChange.ALL]),Array.isArray(b)||d.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+b),this.dataChangeCallbacks[f]={callback:a,types:b,_this:c};var g=this,h=function(){delete g.dataChangeCallbacks[f]};return h},p.prototype.callDataChangeCallbacks=function(a,b){angular.forEach(this.dataChangeCallbacks,function(b,c){(-1!==b.types.indexOf(e.dataChange.ALL)||-1!==b.types.indexOf(a)||a===e.dataChange.ALL)&&(b._this?b.callback.apply(b._this,this):b.callback(this))},this)},p.prototype.notifyDataChange=function(a){var b=e.dataChange;a===b.ALL||a===b.COLUMN||a===b.EDIT||a===b.ROW||a===b.OPTIONS?this.callDataChangeCallbacks(a):d.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+a)},p.prototype.columnRefreshCallback=function(a){a.buildColumns(),a.queueGridRefresh()},p.prototype.processRowsCallback=function(a){a.queueGridRefresh()},p.prototype.updateFooterHeightCallback=function(a){a.footerHeight=a.calcFooterHeight(),a.columnFooterHeight=a.calcColumnFooterHeight()},p.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},p.prototype.getColDef=function(a){var b=this.options.columnDefs.filter(function(b){return b.name===a});return b.length>0?b[0]:null},p.prototype.assignTypes=function(){var a=this;a.options.columnDefs.forEach(function(b,c){if(!b.type){var e=new g(b,c,a),f=a.rows.length>0?a.rows[0]:null;f?b.type=d.guessType(a.getCellValue(f,e)):b.type="string"}})},p.prototype.isRowHeaderColumn=function(a){return-1!==this.rowHeaderColumns.indexOf(a)},p.prototype.addRowHeaderColumn=function(a){var b=this,c=new g(a,d.nextUid(),b);c.isRowHeader=!0,b.isRTL()?(b.createRightContainer(),c.renderContainer="right"):(b.createLeftContainer(),c.renderContainer="left"),b.columnBuilders[0](a,c,b.options).then(function(){c.enableFiltering=!1,c.enableSorting=!1,c.enableHiding=!1,b.rowHeaderColumns.push(c),
b.buildColumns().then(function(){b.preCompileCellTemplates(),b.queueGridRefresh()})})},p.prototype.getOnlyDataColumns=function(){var a=this,b=[];return a.columns.forEach(function(c){-1===a.rowHeaderColumns.indexOf(c)&&b.push(c)}),b},p.prototype.buildColumns=function(b){var c={orderByColumnDefs:!1};angular.extend(c,b);var e,f=this,h=[],i=f.rowHeaderColumns.length;for(e=0;e<f.columns.length;e++)f.getColDef(f.columns[e].name)||(f.columns.splice(e,1),e--);if(f.rowHeaderColumns.forEach(function(a){f.columns.unshift(a)}),f.options.columnDefs.forEach(function(a,b){f.preprocessColDef(a);var c=f.getColumn(a.name);c?c.updateColumnDef(a,!1):(c=new g(a,d.nextUid(),f),f.columns.splice(b+i,0,c)),f.columnBuilders.forEach(function(b){h.push(b.call(f,a,c,f.options))})}),c.orderByColumnDefs){var j=f.columns.slice(0),k=Math.min(f.options.columnDefs.length,f.columns.length);for(e=0;k>e;e++)f.columns[e+i].name!==f.options.columnDefs[e].name?j[e+i]=f.getColumn(f.options.columnDefs[e].name):j[e+i]=f.columns[e+i];f.columns.length=0,Array.prototype.splice.apply(f.columns,[0,0].concat(j))}return a.all(h).then(function(){f.rows.length>0&&f.assignTypes()})},p.prototype.preCompileCellTemplates=function(){var a=this,c=function(c){var d=c.cellTemplate.replace(e.MODEL_COL_FIELD,a.getQualifiedColField(c));d=d.replace(e.COL_FIELD,"grid.getCellValue(row, col)");var f=b(d);c.compiledElementFn=f,c.compiledElementFnDefer&&c.compiledElementFnDefer.resolve(c.compiledElementFn)};this.columns.forEach(function(a){a.cellTemplate?c(a):a.cellTemplatePromise&&a.cellTemplatePromise.then(function(){c(a)})})},p.prototype.getQualifiedColField=function(a){return"row.entity."+d.preEval(a.field)},p.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new l("left",this,{disableColumnOffset:!0}))},p.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new l("right",this,{disableColumnOffset:!0}))},p.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},p.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},p.prototype.preprocessColDef=function(a){var b=this;if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===a.name&&void 0!==a.field){for(var c=a.field,d=2;b.getColumn(c);)c=a.field+d.toString(),d++;a.name=c}},p.prototype.newInN=function(a,b,c,d){for(var e=this,f=[],g=0;g<b.length;g++){for(var h=d?b[g][d]:b[g],i=!1,j=0;j<a.length;j++){var k=c?a[j][c]:a[j];if(e.options.rowEquality(h,k)){i=!0;break}}i||f.push(h)}return f},p.prototype.getRow=function(a,b){var c=this;b="undefined"==typeof b?c.rows:b;var d=b.filter(function(b){return c.options.rowEquality(b.entity,a)});return d.length>0?d[0]:null},p.prototype.modifyRows=function(b){var c=this,d=c.rows.slice(0),e=c.rowHashMap||c.createRowHashMap();c.rowHashMap=c.createRowHashMap(),c.rows.length=0,b.forEach(function(a,b){var f;f=c.options.enableRowHashing?e.get(a):c.getRow(a,d),f||(f=c.processRowBuilders(new h(a,b,c))),c.rows.push(f),c.rowHashMap.put(a,f)}),c.assignTypes();var f=a.when(c.processRowsProcessors(c.rows)).then(function(a){return c.setVisibleRows(a)}),g=a.when(c.processColumnsProcessors(c.columns)).then(function(a){return c.setVisibleColumns(a)});return a.all([f,g])},p.prototype.addRows=function(a){for(var b=this,c=b.rows.length,d=0;d<a.length;d++){var e=b.processRowBuilders(new h(a[d],d+c,b));if(b.options.enableRowHashing){var f=b.rowHashMap.get(e.entity);f&&(f.row=e)}b.rows.push(e)}},p.prototype.processRowBuilders=function(a){var b=this;return b.rowBuilders.forEach(function(c){c.call(b,a,b.options)}),a},p.prototype.registerStyleComputation=function(a){this.styleComputations.push(a)},p.prototype.registerRowsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.rowsProcessors.push({processor:a,priority:b}),this.rowsProcessors.sort(function(a,b){return a.priority-b.priority})},p.prototype.removeRowsProcessor=function(a){var b=-1;this.rowsProcessors.forEach(function(c,d){c.processor===a&&(b=d)}),-1!==b&&this.rowsProcessors.splice(b,1)},p.prototype.processRowsProcessors=function(b){function c(b,e){var g=d.rowsProcessors[b].processor;return a.when(g.call(d,e,d.columns)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.rowsProcessors.length-1?c(b,a):void f.resolve(a)})}var d=this,e=b.slice(0);if(0===d.rowsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},p.prototype.setVisibleRows=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.canvasHeightShouldUpdate=!0,"undefined"==typeof d.visibleRowCache?d.visibleRowCache=[]:d.visibleRowCache.length=0}for(var e=0;e<a.length;e++){var f=a[e],g="undefined"!=typeof f.renderContainer&&f.renderContainer?f.renderContainer:"body";f.visible&&b.renderContainers[g].visibleRowCache.push(f)}b.api.core.raise.rowsRendered(this.api)},p.prototype.registerColumnsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.columnsProcessors.push({processor:a,priority:b}),this.columnsProcessors.sort(function(a,b){return a.priority-b.priority})},p.prototype.removeColumnsProcessor=function(a){var b=this.columnsProcessors.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.columnsProcessors.splice(b,1)},p.prototype.processColumnsProcessors=function(b){function c(b,g){var h=d.columnsProcessors[b].processor;return a.when(h.call(d,g,d.rows)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.columnsProcessors.length-1?c(b,e):void f.resolve(e)})}var d=this,e=b.slice(0);if(0===d.columnsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},p.prototype.setVisibleColumns=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.visibleColumnCache.length=0}for(var e=0;e<a.length;e++){var f=a[e];f.visible&&("undefined"!=typeof f.renderContainer&&f.renderContainer?b.renderContainers[f.renderContainer].visibleColumnCache.push(f):b.renderContainers.body.visibleColumnCache.push(f))}},p.prototype.handleWindowResize=function(a){var b=this;b.gridWidth=d.elementWidth(b.element),b.gridHeight=d.elementHeight(b.element),b.queueRefresh()},p.prototype.queueRefresh=function(){var a=this;return a.refreshCanceller&&m.cancel(a.refreshCanceller),a.refreshCanceller=m(function(){a.refreshCanvas(!0)}),a.refreshCanceller.then(function(){a.refreshCanceller=null}),a.refreshCanceller},p.prototype.queueGridRefresh=function(){var a=this;return a.gridRefreshCanceller&&m.cancel(a.gridRefreshCanceller),a.gridRefreshCanceller=m(function(){a.refresh(!0)}),a.gridRefreshCanceller.then(function(){a.gridRefreshCanceller=null}),a.gridRefreshCanceller},p.prototype.updateCanvasHeight=function(){var a=this;for(var b in a.renderContainers)if(a.renderContainers.hasOwnProperty(b)){var c=a.renderContainers[b];c.canvasHeightShouldUpdate=!0}},p.prototype.buildStyles=function(){var a=this;a.customStyles="",a.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(b){var c=b.func.call(a);angular.isString(c)&&(a.customStyles+="\n"+c)})},p.prototype.minColumnsToRender=function(){var a=this,b=this.getViewportWidth(),c=0,d=0;return a.columns.forEach(function(e,f){if(b>d)d+=e.drawnWidth,c++;else{for(var g=0,h=f;h>=f-c;h--)g+=a.columns[h].drawnWidth;b>g&&c++}}),c},p.prototype.getBodyHeight=function(){var a=this.getViewportHeight();return a},p.prototype.getViewportHeight=function(){var a=this,b=this.gridHeight-this.headerHeight-this.footerHeight,c=a.getViewportAdjustment();return b+=c.height},p.prototype.getViewportWidth=function(){var a=this,b=this.gridWidth,c=a.getViewportAdjustment();return b+=c.width},p.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return a},p.prototype.addVerticalScrollSync=function(a,b){this.verticalScrollSyncCallBackFns[a]=b},p.prototype.addHorizontalScrollSync=function(a,b){this.horizontalScrollSyncCallBackFns[a]=b},p.prototype.scrollContainers=function(a,b){if(b.y){var c=["body","left","right"];this.flagScrollingVertically(b),"body"===a?c=["left","right"]:"left"===a?c=["body","right"]:"right"===a&&(c=["body","left"]);for(var d=0;d<c.length;d++){var e=c[d];this.verticalScrollSyncCallBackFns[e]&&this.verticalScrollSyncCallBackFns[e](b)}}if(b.x){var f=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(b),"body"===a&&(f=["bodyheader","bodyfooter"]);for(var g=0;g<f.length;g++){var h=f[g];this.horizontalScrollSyncCallBackFns[h]&&this.horizontalScrollSyncCallBackFns[h](b)}}},p.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},p.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},p.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},p.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},p.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},p.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},p.prototype.searchRows=function(a){return k.search(this,a,this.columns)},p.prototype.sortByColumn=function(a){return j.sort(this,a,this.columns)},p.prototype.getCellValue=function(a,b){return"undefined"!=typeof a.entity["$$"+b.uid]?a.entity["$$"+b.uid].rendered:this.options.flatEntityAccess&&"undefined"!=typeof b.field?a.entity[b.field]:(b.cellValueGetterCache||(b.cellValueGetterCache=c(a.getEntityQualifiedColField(b))),b.cellValueGetterCache(a))},p.prototype.getCellDisplayValue=function(a,b){if(!b.cellDisplayGetterCache){var d=b.cellFilter?" | "+b.cellFilter:"";"undefined"!=typeof a.entity["$$"+b.uid]?b.cellDisplayGetterCache=c(a.entity["$$"+b.uid].rendered+d):this.options.flatEntityAccess&&"undefined"!=typeof b.field?b.cellDisplayGetterCache=c(a.entity[b.field]+d):b.cellDisplayGetterCache=c(a.getEntityQualifiedColField(b)+d)}return b.cellDisplayGetterCache(a)},p.prototype.getNextColumnSortPriority=function(){var a=this,b=0;return a.columns.forEach(function(a){a.sort&&a.sort.priority&&a.sort.priority>b&&(b=a.sort.priority)}),b+1},p.prototype.resetColumnSorting=function(a){var b=this;b.columns.forEach(function(b){b===a||b.suppressRemoveSort||(b.sort={})})},p.prototype.getColumnSorting=function(){var a,b=this,c=[];return a=b.columns.slice(0),a.sort(j.prioritySort).forEach(function(a){a.sort&&"undefined"!=typeof a.sort.direction&&a.sort.direction&&(a.sort.direction===e.ASC||a.sort.direction===e.DESC)&&c.push(a)}),c},p.prototype.sortColumn=function(b,c,d){var e=this,f=null;if("undefined"==typeof b||!b)throw new Error("No column parameter provided");if("boolean"==typeof c?d=c:f=c,d?b.sort.priority||(b.sort.priority=e.getNextColumnSortPriority()):(e.resetColumnSorting(b),b.sort.priority=0,b.sort.priority=e.getNextColumnSortPriority()),f)b.sort.direction=f;else{var g=b.sortDirectionCycle.indexOf(b.sort.direction?b.sort.direction:null);g=(g+1)%b.sortDirectionCycle.length,b.colDef&&b.suppressRemoveSort&&!b.sortDirectionCycle[g]&&(g=(g+1)%b.sortDirectionCycle.length),b.sortDirectionCycle[g]?b.sort.direction=b.sortDirectionCycle[g]:b.sort={}}return e.api.core.raise.sortChanged(e,e.getColumnSorting()),a.when(b)},p.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},p.prototype.createRowHashMap=function(){var a=this,b=new o;return b.grid=a,b},p.prototype.refresh=function(b){var c=this,d=c.processRowsProcessors(c.rows).then(function(a){c.setVisibleRows(a)}),e=c.processColumnsProcessors(c.columns).then(function(a){c.setVisibleColumns(a)});return a.all([d,e]).then(function(){c.redrawInPlace(b),c.refreshCanvas(!0)})},p.prototype.refreshRows=function(){var a=this;return a.processRowsProcessors(a.rows).then(function(b){a.setVisibleRows(b),a.redrawInPlace(),a.refreshCanvas(!0)})},p.prototype.refreshCanvas=function(b){var c=this;b&&c.buildStyles();var e=a.defer(),f=[];for(var g in c.renderContainers)if(c.renderContainers.hasOwnProperty(g)){var h=c.renderContainers[g];if(null===h.canvasWidth||isNaN(h.canvasWidth))continue;(h.header||h.headerCanvas)&&(h.explicitHeaderHeight=h.explicitHeaderHeight||null,h.explicitHeaderCanvasHeight=h.explicitHeaderCanvasHeight||null,f.push(h))}return f.length>0?(b&&c.buildStyles(),m(function(){var a,g,h=!1,i=0,j=0,k=function(a,b){return a!==b&&(h=!0),b};for(a=0;a<f.length;a++)if(g=f[a],null!==g.canvasWidth&&!isNaN(g.canvasWidth)){if(g.header){var l=g.headerHeight=k(g.headerHeight,parseInt(d.outerElementHeight(g.header),10)),m=d.getBorderSize(g.header,"top"),n=d.getBorderSize(g.header,"bottom"),o=parseInt(l-m-n,10);o=0>o?0:o,g.innerHeaderHeight=o,!g.explicitHeaderHeight&&o>i&&(i=o)}if(g.headerCanvas){var p=g.headerCanvasHeight=k(g.headerCanvasHeight,parseInt(d.outerElementHeight(g.headerCanvas),10));!g.explicitHeaderCanvasHeight&&p>j&&(j=p)}}for(a=0;a<f.length;a++)g=f[a],i>0&&"undefined"!=typeof g.headerHeight&&null!==g.headerHeight&&(g.explicitHeaderHeight||g.headerHeight<i)&&(g.explicitHeaderHeight=k(g.explicitHeaderHeight,i)),j>0&&"undefined"!=typeof g.headerCanvasHeight&&null!==g.headerCanvasHeight&&(g.explicitHeaderCanvasHeight||g.headerCanvasHeight<j)&&(g.explicitHeaderCanvasHeight=k(g.explicitHeaderCanvasHeight,j));b&&h&&c.buildStyles(),e.resolve()})):m(function(){e.resolve()}),e.promise},p.prototype.redrawInPlace=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];a?(d.adjustRows(d.prevScrollTop,null),d.adjustColumns(d.prevScrollLeft,null)):(d.adjustRows(null,d.prevScrolltopPercentage),d.adjustColumns(null,d.prevScrollleftPercentage))}},p.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},p.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},p.prototype.scrollToIfNecessary=function(b,c){var d=this,e=new n(d,"uiGrid.scrollToIfNecessary"),f=d.renderContainers.body.visibleRowCache,g=d.renderContainers.body.visibleColumnCache,h=d.renderContainers.body.prevScrollTop+d.headerHeight;h=0>h?0:h;var i=d.renderContainers.body.prevScrollLeft,j=d.renderContainers.body.prevScrollTop+d.gridHeight-d.renderContainers.body.headerHeight-d.footerHeight-d.scrollbarWidth,k=d.renderContainers.body.prevScrollLeft+Math.ceil(d.renderContainers.body.getViewportWidth());if(null!==b){var l=f.indexOf(b),m=d.renderContainers.body.getCanvasHeight()-d.renderContainers.body.getViewportHeight(),o=(l+1)*d.options.rowHeight;o=0>o?0:o;var p,q;h>o?(p=d.renderContainers.body.prevScrollTop-(h-o),q=p/m,e.y={percentage:q}):o>j&&(p=o-j+d.renderContainers.body.prevScrollTop,q=p/m,e.y={percentage:q})}if(null!==c){for(var r=g.indexOf(c),s=d.renderContainers.body.getCanvasWidth()-d.renderContainers.body.getViewportWidth(),t=0,u=0;r>u;u++){var v=g[u];t+=v.drawnWidth}t=0>t?0:t;var w=t+c.drawnWidth;w=0>w?0:w;var x,y;i>t?(x=d.renderContainers.body.prevScrollLeft-(i-t),y=x/s,y=y>1?1:y,e.x={percentage:y}):w>k&&(x=w-k+d.renderContainers.body.prevScrollLeft,y=x/s,y=y>1?1:y,e.x={percentage:y})}var z=a.defer();if(e.y||e.x){e.withDelay=!1,d.scrollContainers("",e);var A=d.api.core.on.scrollEnd(null,function(){z.resolve(e),A()})}else z.resolve();return z.promise},p.prototype.scrollTo=function(a,b){var c=null,d=null;return null!==a&&"undefined"!=typeof a&&(c=this.getRow(a)),null!==b&&"undefined"!=typeof b&&(d=this.getColumn(b.name?b.name:b.field)),this.scrollToIfNecessary(c,d)},p.prototype.clearAllFilters=function(a,b,c){return void 0===a&&(a=!0),void 0===b&&(b=!1),void 0===c&&(c=!1),this.columns.forEach(function(a){a.filters.forEach(function(a){a.term=void 0,b&&(a.condition=void 0),c&&(a.flags=void 0)})}),a?this.refreshRows():void 0},o.prototype={put:function(a,b){this[this.grid.options.rowIdentity(a)]=b},get:function(a){return this[this.grid.options.rowIdentity(a)]},remove:function(a){var b=this[a=this.grid.options.rowIdentity(a)];return delete this[a],b}},p}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(a,b,c,d,e,f){function g(a,c,d,e){return b.$on(a,function(a){var b=Array.prototype.slice.call(arguments);b.splice(0,1),c.apply(e?e:d.api,b)})}var h=function(a){this.grid=a,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",e.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",e.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged")};return h.prototype.suppressEvents=function(a,b){var c=this,d=angular.isArray(a)?a:[a],e=c.listeners.filter(function(a){return d.some(function(b){return a.handler===b})});e.forEach(function(a){a.dereg()}),b(),e.forEach(function(a){a.dereg=g(a.eventId,a.handler,c.grid,a._this)})},h.prototype.registerEvent=function(a,d){var e=this;e[a]||(e[a]={});var f=e[a];f.on||(f.on={},f.raise={});var h=e.grid.id+a+d;f.raise[d]=function(){b.$emit.apply(b,[h].concat(Array.prototype.slice.call(arguments)))},f.on[d]=function(b,f,i){if(null!==b&&"undefined"==typeof b.$on)return void c.logError("asked to listen on "+a+".on."+d+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var j=g(h,f,e.grid,i),k={handler:f,dereg:j,eventId:h,scope:b,_this:i};e.listeners.push(k);var l=function(){k.dereg();var a=e.listeners.indexOf(k);e.listeners.splice(a,1)};return b&&b.$on("$destroy",function(){l()}),l}},h.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},h.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={});var f=this[a];f[b]=c.createBoundedWrapper(e||this.grid,d)},h.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},h}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(a,b,c){function d(a,c,e){var f=this;f.grid=e,f.uid=c,f.updateColumnDef(a,!0),d.prototype.hideColumn=function(){this.colDef.visible=!1},f.aggregationValue=void 0,f.updateAggregationValue=function(){if(!f.aggregationType)return void(f.aggregationValue=void 0);var a=0,c=f.grid.getVisibleRows(),d=function(){var a=[];return c.forEach(function(b){var c=f.grid.getCellValue(b,f),d=Number(c);isNaN(d)||a.push(d)}),a};angular.isFunction(f.aggregationType)?f.aggregationValue=f.aggregationType(c,f):f.aggregationType===b.aggregationTypes.count?f.aggregationValue=f.grid.getVisibleRowCount():f.aggregationType===b.aggregationTypes.sum?(d().forEach(function(b){a+=b}),f.aggregationValue=a):f.aggregationType===b.aggregationTypes.avg?(d().forEach(function(b){a+=b}),a/=d().length,f.aggregationValue=a):f.aggregationType===b.aggregationTypes.min?f.aggregationValue=Math.min.apply(null,d()):f.aggregationType===b.aggregationTypes.max?f.aggregationValue=Math.max.apply(null,d()):f.aggregationValue=" "},this.getAggregationValue=function(){return f.aggregationValue}}return d.prototype.setPropertyOrDefault=function(a,b,c){var d=this;"undefined"!=typeof a[b]&&a[b]?d[b]=a[b]:"undefined"!=typeof d[b]?d[b]=d[b]:d[b]=c?c:{}},d.prototype.updateColumnDef=function(c,e){var f=this;if(f.colDef=c,void 0===c.name)throw new Error("colDef.name is required for column at index "+f.grid.options.columnDefs.indexOf(c));if(f.displayName=void 0===c.displayName?a.readableColumnName(c.name):c.displayName,!angular.isNumber(f.width)||!f.hasCustomWidth||c.allowCustomWidthOverride){var g=c.width,h="Cannot parse column width '"+g+"' for column named '"+c.name+"'";if(f.hasCustomWidth=!1,angular.isString(g)||angular.isNumber(g))if(angular.isString(g))if(a.endsWith(g,"%")){var i=g.replace(/%/g,""),j=parseInt(i,10);if(isNaN(j))throw new Error(h);f.width=g}else if(g.match(/^(\d+)$/))f.width=parseInt(g.match(/^(\d+)$/)[1],10);else{if(!g.match(/^\*+$/))throw new Error(h);f.width=g}else f.width=g;else f.width="*"}["minWidth","maxWidth"].forEach(function(a){var b=c[a],d="Cannot parse column "+a+" '"+b+"' for column named '"+c.name+"'";if(angular.isString(b)||angular.isNumber(b))if(angular.isString(b)){if(!b.match(/^(\d+)$/))throw new Error(d);f[a]=parseInt(b.match(/^(\d+)$/)[1],10)}else f[a]=b;else f[a]="minWidth"===a?30:9e3}),f.field=void 0===c.field?c.name:c.field,"string"!=typeof f.field&&a.logError("Field is not a string, this is likely to break the code, Field is: "+f.field),f.name=c.name,f.displayName=void 0===c.displayName?a.readableColumnName(c.name):c.displayName,f.aggregationType=angular.isDefined(c.aggregationType)?c.aggregationType:null,f.footerCellTemplate=angular.isDefined(c.footerCellTemplate)?c.footerCellTemplate:null,"undefined"==typeof c.cellTooltip||c.cellTooltip===!1?f.cellTooltip=!1:c.cellTooltip===!0?f.cellTooltip=function(a,b){return f.grid.getCellValue(a,b)}:"function"==typeof c.cellTooltip?f.cellTooltip=c.cellTooltip:f.cellTooltip=function(a,b){return b.colDef.cellTooltip},"undefined"==typeof c.headerTooltip||c.headerTooltip===!1?f.headerTooltip=!1:c.headerTooltip===!0?f.headerTooltip=function(a){return a.displayName}:"function"==typeof c.headerTooltip?f.headerTooltip=c.headerTooltip:f.headerTooltip=function(a){return a.colDef.headerTooltip},f.footerCellClass=c.footerCellClass,f.cellClass=c.cellClass,f.headerCellClass=c.headerCellClass,f.cellFilter=c.cellFilter?c.cellFilter:"",f.sortCellFiltered=c.sortCellFiltered?!0:!1,f.filterCellFiltered=c.filterCellFiltered?!0:!1,f.headerCellFilter=c.headerCellFilter?c.headerCellFilter:"",f.footerCellFilter=c.footerCellFilter?c.footerCellFilter:"",f.visible=a.isNullOrUndefined(c.visible)||c.visible,f.headerClass=c.headerClass,f.enableSorting="undefined"!=typeof c.enableSorting?c.enableSorting:!0,f.sortingAlgorithm=c.sortingAlgorithm,f.sortDirectionCycle="undefined"!=typeof c.sortDirectionCycle?c.sortDirectionCycle:[null,b.ASC,b.DESC],"undefined"==typeof f.suppressRemoveSort&&(f.suppressRemoveSort="undefined"!=typeof c.suppressRemoveSort?c.suppressRemoveSort:!1),f.enableFiltering="undefined"!=typeof c.enableFiltering?c.enableFiltering:!0,f.setPropertyOrDefault(c,"menuItems",[]),e&&f.setPropertyOrDefault(c,"sort");var k=[];c.filter?k.push(c.filter):c.filters?k=c.filters:k.push({}),e?(f.setPropertyOrDefault(c,"filter"),f.setPropertyOrDefault(c,"filters",k)):f.filters.length===k.length&&f.filters.forEach(function(a,b){"undefined"!=typeof k[b].placeholder&&(a.placeholder=k[b].placeholder),"undefined"!=typeof k[b].ariaLabel&&(a.ariaLabel=k[b].ariaLabel),"undefined"!=typeof k[b].flags&&(a.flags=k[b].flags),"undefined"!=typeof k[b].type&&(a.type=k[b].type),"undefined"!=typeof k[b].selectOptions&&(a.selectOptions=k[b].selectOptions)}),d.prototype.unsort=function(){this.sort={},f.grid.api.core.raise.sortChanged(f.grid,f.grid.getColumnSorting())}},d.prototype.getColClass=function(a){var c=b.COL_CLASS_PREFIX+this.uid;return a?"."+c:c},d.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},d.prototype.isPinnedRight=function(){return"right"===this.renderContainer},d.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},d.prototype.getRenderContainer=function(){var a=this,b=a.renderContainer;return(null===b||""===b||void 0===b)&&(b="body"),a.grid.renderContainers[b]},d.prototype.showColumn=function(){this.colDef.visible=!0},d.prototype.getAggregationText=function(){var a=this;if(a.colDef.aggregationHideLabel)return"";if(a.colDef.aggregationLabel)return a.colDef.aggregationLabel;switch(a.colDef.aggregationType){case b.aggregationTypes.count:return c.getSafeText("aggregation.count");case b.aggregationTypes.sum:return c.getSafeText("aggregation.sum");case b.aggregationTypes.avg:return c.getSafeText("aggregation.avg");case b.aggregationTypes.min:return c.getSafeText("aggregation.min");case b.aggregationTypes.max:return c.getSafeText("aggregation.max");default:return""}},d.prototype.getCellTemplate=function(){var a=this;return a.cellTemplatePromise},d.prototype.getCompiledElementFn=function(){var a=this;return a.compiledElementFnDefer.promise},d}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(a,b){return{initialize:function(c){return c.onRegisterApi=c.onRegisterApi||angular.noop(),c.data=c.data||[],c.columnDefs=c.columnDefs||[],c.excludeProperties=c.excludeProperties||["$$hashKey"],c.enableRowHashing=c.enableRowHashing!==!1,c.rowIdentity=c.rowIdentity||function(b){return a.hashKey(b)},c.getRowIdentity=c.getRowIdentity||function(a){return a.$$hashKey},c.flatEntityAccess=c.flatEntityAccess===!0,c.showHeader="undefined"!=typeof c.showHeader?c.showHeader:!0,c.showHeader?c.headerRowHeight="undefined"!=typeof c.headerRowHeight?c.headerRowHeight:30:c.headerRowHeight=0,c.rowHeight=c.rowHeight||30,c.minRowsToShow="undefined"!=typeof c.minRowsToShow?c.minRowsToShow:10,c.showGridFooter=c.showGridFooter===!0,c.showColumnFooter=c.showColumnFooter===!0,c.columnFooterHeight="undefined"!=typeof c.columnFooterHeight?c.columnFooterHeight:30,c.gridFooterHeight="undefined"!=typeof c.gridFooterHeight?c.gridFooterHeight:30,c.columnWidth="undefined"!=typeof c.columnWidth?c.columnWidth:50,c.maxVisibleColumnCount="undefined"!=typeof c.maxVisibleColumnCount?c.maxVisibleColumnCount:200,c.virtualizationThreshold="undefined"!=typeof c.virtualizationThreshold?c.virtualizationThreshold:20,c.columnVirtualizationThreshold="undefined"!=typeof c.columnVirtualizationThreshold?c.columnVirtualizationThreshold:10,c.excessRows="undefined"!=typeof c.excessRows?c.excessRows:4,c.scrollThreshold="undefined"!=typeof c.scrollThreshold?c.scrollThreshold:4,c.excessColumns="undefined"!=typeof c.excessColumns?c.excessColumns:4,c.horizontalScrollThreshold="undefined"!=typeof c.horizontalScrollThreshold?c.horizontalScrollThreshold:2,c.aggregationCalcThrottle="undefined"!=typeof c.aggregationCalcThrottle?c.aggregationCalcThrottle:500,c.wheelScrollThrottle="undefined"!=typeof c.wheelScrollThrottle?c.wheelScrollThrottle:70,c.scrollDebounce="undefined"!=typeof c.scrollDebounce?c.scrollDebounce:300,c.enableSorting=c.enableSorting!==!1,c.enableFiltering=c.enableFiltering===!0,c.enableColumnMenus=c.enableColumnMenus!==!1,c.enableVerticalScrollbar="undefined"!=typeof c.enableVerticalScrollbar?c.enableVerticalScrollbar:b.scrollbars.ALWAYS,c.enableHorizontalScrollbar="undefined"!=typeof c.enableHorizontalScrollbar?c.enableHorizontalScrollbar:b.scrollbars.ALWAYS,c.enableMinHeightCheck=c.enableMinHeightCheck!==!1,c.minimumColumnSize="undefined"!=typeof c.minimumColumnSize?c.minimumColumnSize:10,c.rowEquality=c.rowEquality||function(a,b){return a===b},c.headerTemplate=c.headerTemplate||null,c.footerTemplate=c.footerTemplate||"ui-grid/ui-grid-footer",c.gridFooterTemplate=c.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",c.rowTemplate=c.rowTemplate||"ui-grid/ui-grid-row",c.appScopeProvider=c.appScopeProvider||null,c}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(a,b){function c(a,b,c){var d=this;d.name=a,d.grid=b,d.visibleRowCache=[],d.visibleColumnCache=[],d.renderedRows=[],d.renderedColumns=[],d.prevScrollTop=0,d.prevScrolltopPercentage=0,d.prevRowScrollIndex=0,d.prevScrollLeft=0,d.prevScrollleftPercentage=0,d.prevColumnScrollIndex=0,d.columnStyles="",d.viewportAdjusters=[],d.hasHScrollbar=!1,d.hasVScrollbar=!1,d.canvasHeightShouldUpdate=!0,d.$$canvasHeight=0,c&&angular.isObject(c)&&angular.extend(d,c),b.registerStyleComputation({priority:5,func:function(){return d.updateColumnWidths(),d.columnStyles}})}return c.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},c.prototype.containsColumn=function(a){return-1!==this.visibleColumnCache.indexOf(a)},c.prototype.minRowsToRender=function(){for(var a=this,b=0,c=0,d=a.getViewportHeight(),e=a.visibleRowCache.length-1;d>c&&e>=0;e--)c+=a.visibleRowCache[e].height,b++;return b},c.prototype.minColumnsToRender=function(){for(var a=this,b=this.getViewportWidth(),c=0,d=0,e=0;e<a.visibleColumnCache.length;e++){var f=a.visibleColumnCache[e];if(b>d)d+=f.drawnWidth?f.drawnWidth:0,c++;else{for(var g=0,h=e;h>=e-c;h--)g+=a.visibleColumnCache[h].drawnWidth?a.visibleColumnCache[h].drawnWidth:0;b>g&&c++}}return c},c.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},c.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},c.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);b>-1&&this.viewportAdjusters.splice(b,1)},c.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},c.prototype.getMargin=function(a){var b=this,c=0;return b.viewportAdjusters.forEach(function(b){var d=b.call(this,{height:0,width:0});d.side&&d.side===a&&(c+=-1*d.width)}),c},c.prototype.getViewportHeight=function(){var a=this,b=a.headerHeight?a.headerHeight:a.grid.headerHeight,c=a.grid.gridHeight-b-a.grid.footerHeight,d=a.getViewportAdjustment();return c+=d.height},c.prototype.getViewportWidth=function(){var a=this,b=a.grid.gridWidth,c=a.getViewportAdjustment();return b+=c.width},c.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return a},c.prototype.getCanvasHeight=function(){var a=this;if(!a.canvasHeightShouldUpdate)return a.$$canvasHeight;var b=a.$$canvasHeight;return a.$$canvasHeight=0,a.visibleRowCache.forEach(function(b){a.$$canvasHeight+=b.height}),a.canvasHeightShouldUpdate=!1,a.grid.api.core.raise.canvasHeightChanged(b,a.$$canvasHeight),a.$$canvasHeight},c.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight},c.prototype.getCanvasWidth=function(){var a=this,b=a.canvasWidth;return b},c.prototype.setRenderedRows=function(a){this.renderedRows.length=a.length;for(var b=0;b<a.length;b++)this.renderedRows[b]=a[b]},c.prototype.setRenderedColumns=function(a){this.renderedColumns.length=a.length;for(var b=0;b<a.length;b++)this.renderedColumns[b]=a[b];this.updateColumnOffset()},c.prototype.updateColumnOffset=function(){for(var a=0,b=0;b<this.currentFirstColumn;b++)a+=this.visibleColumnCache[b].drawnWidth;this.columnOffset=a},c.prototype.scrollVertical=function(a){var c=-1;if(a!==this.prevScrollTop){var d=a-this.prevScrollTop;d>0&&(this.grid.scrollDirection=b.scrollDirection.DOWN),0>d&&(this.grid.scrollDirection=b.scrollDirection.UP);var e=this.getVerticalScrollLength();return c=a/e,c>1&&(c=1),0>c&&(c=0),this.adjustScrollVertical(a,c),
c}},c.prototype.scrollHorizontal=function(a){var c=-1;if(a!==this.prevScrollLeft){var d=a-this.prevScrollLeft;d>0&&(this.grid.scrollDirection=b.scrollDirection.RIGHT),0>d&&(this.grid.scrollDirection=b.scrollDirection.LEFT);var e=this.canvasWidth-this.getViewportWidth();return c=0!==e?a/e:0,this.adjustScrollHorizontal(a,c),c}},c.prototype.adjustScrollVertical=function(a,b,c){(this.prevScrollTop!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasHeight()-this.getViewportHeight())*b),this.adjustRows(a,b,!1),this.prevScrollTop=a,this.prevScrolltopPercentage=b,this.grid.queueRefresh())},c.prototype.adjustScrollHorizontal=function(a,b,c){(this.prevScrollLeft!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasWidth()-this.getViewportWidth())*b),this.adjustColumns(a,b),this.prevScrollLeft=a,this.prevScrollleftPercentage=b,this.grid.queueRefresh())},c.prototype.adjustRows=function(a,b,c){var d=this,e=d.minRowsToRender(),f=d.visibleRowCache,g=f.length-e;"undefined"!=typeof b&&null!==b||!a||(b=a/d.getVerticalScrollLength());var h=Math.ceil(Math.min(g,g*b));h>g&&(h=g);var i=[];if(f.length>d.grid.options.virtualizationThreshold){if("undefined"!=typeof a&&null!==a){if(!d.grid.suppressParentScrollDown&&d.prevScrollTop<a&&h<d.prevRowScrollIndex+d.grid.options.scrollThreshold&&g>h)return;if(!d.grid.suppressParentScrollUp&&d.prevScrollTop>a&&h>d.prevRowScrollIndex-d.grid.options.scrollThreshold&&g>h)return}var j={},k={};j=Math.max(0,h-d.grid.options.excessRows),k=Math.min(f.length,h+e+d.grid.options.excessRows),i=[j,k]}else{var l=d.visibleRowCache.length;i=[0,Math.max(l,e+d.grid.options.excessRows)]}d.updateViewableRowRange(i),d.prevRowScrollIndex=h},c.prototype.adjustColumns=function(a,b){var c=this,d=c.minColumnsToRender(),e=c.visibleColumnCache,f=e.length-d;if(("undefined"==typeof b||null===b)&&a){var g=c.getCanvasWidth()-c.getViewportWidth();b=a/g}var h=Math.ceil(Math.min(f,f*b));h>f&&(h=f);var i=[];if(e.length>c.grid.options.columnVirtualizationThreshold&&c.getCanvasWidth()>c.getViewportWidth()){var j=Math.max(0,h-c.grid.options.excessColumns),k=Math.min(e.length,h+d+c.grid.options.excessColumns);i=[j,k]}else{var l=c.visibleColumnCache.length;i=[0,Math.max(l,d+c.grid.options.excessColumns)]}c.updateViewableColumnRange(i),c.prevColumnScrollIndex=h},c.prototype.updateViewableRowRange=function(a){var b=this.visibleRowCache.slice(a[0],a[1]);this.currentTopRow=a[0],this.setRenderedRows(b)},c.prototype.updateViewableColumnRange=function(a){var b=this.visibleColumnCache.slice(a[0],a[1]);this.currentFirstColumn=a[0],this.setRenderedColumns(b)},c.prototype.headerCellWrapperStyle=function(){var a=this;if(0!==a.currentFirstColumn){var b=a.columnOffset;return a.grid.isRTL()?{"margin-right":b+"px"}:{"margin-left":b+"px"}}return null},c.prototype.updateColumnWidths=function(){var b=this,c=[],d=0,e=0,f="",g=b.grid.getViewportWidth()-b.grid.scrollbarWidth,h=[];angular.forEach(b.grid.renderContainers,function(a,b){h=h.concat(a.visibleColumnCache)}),h.forEach(function(b,f){var h=0;b.visible&&(angular.isNumber(b.width)?(h=parseInt(b.width,10),e+=h,b.drawnWidth=h):a.endsWith(b.width,"%")?(h=parseInt(parseInt(b.width.replace(/%/g,""),10)/100*g),h>b.maxWidth&&(h=b.maxWidth),h<b.minWidth&&(h=b.minWidth),e+=h,b.drawnWidth=h):angular.isString(b.width)&&-1!==b.width.indexOf("*")&&(d+=b.width.length,c.push(b)))});var i=g-e;if(c.length>0){var j=i/d;c.forEach(function(a){var b=parseInt(a.width.length*j,10);b>a.maxWidth&&(b=a.maxWidth),b<a.minWidth&&(b=a.minWidth),e+=b,a.drawnWidth=b})}for(var k=function(a){a.drawnWidth<a.maxWidth&&l>0&&(a.drawnWidth++,e++,l--,m=!0)},l=g-e,m=!0;l>0&&m;)m=!1,c.forEach(k);var n=function(a){a.drawnWidth>a.minWidth&&o>0&&(a.drawnWidth--,e--,o--,m=!0)},o=e-g;for(m=!0;o>0&&m;)m=!1,c.forEach(n);var p=0;b.visibleColumnCache.forEach(function(a){a.visible&&(p+=a.drawnWidth)}),h.forEach(function(a){f+=a.getColClassDefinition()}),b.canvasWidth=p,this.columnStyles=f},c.prototype.needsHScrollbarPlaceholder=function(){return this.grid.options.enableHorizontalScrollbar&&!this.hasHScrollbar&&!this.grid.disableScrolling},c.prototype.getViewportStyle=function(){var a=this,c={};return a.hasHScrollbar=!1,a.hasVScrollbar=!1,a.grid.disableScrolling?(c["overflow-x"]="hidden",c["overflow-y"]="hidden",c):("body"===a.name?(a.hasHScrollbar=a.grid.options.enableHorizontalScrollbar!==b.scrollbars.NEVER,a.grid.isRTL()?a.grid.hasLeftContainerColumns()||(a.hasVScrollbar=a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER):a.grid.hasRightContainerColumns()||(a.hasVScrollbar=a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER)):"left"===a.name?a.hasVScrollbar=a.grid.isRTL()?a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER:!1:a.hasVScrollbar=a.grid.isRTL()?!1:a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER,c["overflow-x"]=a.hasHScrollbar?"scroll":"hidden",c["overflow-y"]=a.hasVScrollbar?"scroll":"hidden",c)},c}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil",function(a){function b(b,c,d){this.grid=d,this.entity=b,this.uid=a.nextUid(),this.visible=!0,this.$$height=d.options.rowHeight}return Object.defineProperty(b.prototype,"height",{get:function(){return this.$$height},set:function(a){a!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=a)}}),b.prototype.getQualifiedColField=function(a){return"row."+this.getEntityQualifiedColField(a)},b.prototype.getEntityQualifiedColField=function(b){return a.preEval("entity."+b.field)},b.prototype.setRowInvisible=function(a){a&&a.setThisRowInvisible&&a.setThisRowInvisible("user")},b.prototype.clearRowInvisible=function(a){a&&a.clearThisRowInvisible&&a.clearThisRowInvisible("user")},b.prototype.setThisRowInvisible=function(a,b){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[a]=!0,this.evaluateRowVisibility(b)},b.prototype.clearThisRowInvisible=function(a,b){"undefined"!=typeof this.invisibleReason&&delete this.invisibleReason[a],this.evaluateRowVisibility(b)},b.prototype.evaluateRowVisibility=function(a){var b=!0;"undefined"!=typeof this.invisibleReason&&angular.forEach(this.invisibleReason,function(a,c){a&&(b=!1)}),("undefined"==typeof this.visible||this.visible!==b)&&(this.visible=b,a||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},b}])}(),function(){"use strict";angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function(a,b){var c=function d(a,b){if(!(this instanceof d))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=a,this.col=b};return c.prototype.getIntersectionValueRaw=function(){var b=a(this.row.getEntityQualifiedColField(this.col)),c=this.row;return b(c)},c.prototype.getIntersectionValueFiltered=function(){var a=this.getIntersectionValueRaw();if(this.col.cellFilter&&""!==this.col.cellFilter){var c=function(a){try{return b(a)}catch(c){return null}},d=c(this.col.cellFilter);if(d)a=d(a);else{var e,f=/([^:]*):([^:]*):?([\s\S]+)?/;null!==(e=f.exec(this.col.cellFilter))&&(a=b(e[1])(a,e[2],e[3]))}}return a},c}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(a){function b(b,c,d,e){var f=this;if(!b)throw new Error("grid argument is required");f.grid=b,f.source=e,f.withDelay=!0,f.sourceRowContainer=c,f.sourceColContainer=d,f.newScrollLeft=null,f.newScrollTop=null,f.x=null,f.y=null,f.verticalScrollLength=-9999999,f.horizontalScrollLength=-999999,f.fireThrottledScrollingEvent=a.throttle(function(a){f.grid.scrollContainers(a,f)},f.grid.options.wheelScrollThrottle,{trailing:!0})}return b.prototype.getNewScrollLeft=function(b,c){var d=this;if(!d.newScrollLeft){var e,f=b.getCanvasWidth()-b.getViewportWidth(),g=a.normalizeScrollLeft(c,d.grid);if("undefined"!=typeof d.x.percentage&&void 0!==d.x.percentage)e=d.x.percentage;else{if("undefined"==typeof d.x.pixels||void 0===d.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");e=d.x.percentage=(g+d.x.pixels)/f}return Math.max(0,e*f)}return d.newScrollLeft},b.prototype.getNewScrollTop=function(a,b){var c=this;if(!c.newScrollTop){var d,e=a.getVerticalScrollLength(),f=b[0].scrollTop;if("undefined"!=typeof c.y.percentage&&void 0!==c.y.percentage)d=c.y.percentage;else{if("undefined"==typeof c.y.pixels||void 0===c.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");d=c.y.percentage=(f+c.y.pixels)/e}return Math.max(0,d*e)}return c.newScrollTop},b.prototype.atTop=function(a){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===a},b.prototype.atBottom=function(a){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&a>0},b.prototype.atLeft=function(a){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===a},b.prototype.atRight=function(a){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&a>0},b.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},b}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(a,b,c,d,e,f,g,h){var i={createGrid:function(d){d="undefined"!=typeof d?d:{},d.id=a.newId();var e=new f(d);if(e.options.rowTemplate){var g=b.defer();e.getRowTemplateFn=g.promise,a.getTemplate(e.options.rowTemplate).then(function(a){var b=c(a);g.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+e.options.rowTemplate+"'")})}return e.registerColumnBuilder(i.defaultColumnBuilder),e.registerRowBuilder(i.rowTemplateAssigner),e.registerRowsProcessor(function(a){return a.forEach(function(a){a.evaluateRowVisibility(!0)},50),a}),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.visible=!0}),a},50),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.colDef.visible===!1&&(a.visible=!1)}),a},50),e.registerRowsProcessor(e.searchRows,100),e.options.externalSort&&angular.isFunction(e.options.externalSort)?e.registerRowsProcessor(e.options.externalSort,200):e.registerRowsProcessor(e.sortByColumn,200),e},defaultColumnBuilder:function(c,d,f){var g=[],h=function(b,f,h,i,j){c[b]?d[f]=c[b]:d[f]=h,g.push(a.getTemplate(d[f]).then(function(a){angular.isFunction(a)&&(a=a());var c="cellTooltip"===j?"col.cellTooltip(row,col)":"col.headerTooltip(col)";j&&d[j]===!1?a=a.replace(e.TOOLTIP,""):j&&d[j]&&(a=a.replace(e.TOOLTIP,'title="{{'+c+' CUSTOM_FILTERS }}"')),i?d[b]=a.replace(e.CUSTOM_FILTERS,function(){return d[i]?"|"+d[i]:""}):d[b]=a},function(a){throw new Error("Couldn't fetch/use colDef."+b+" '"+c[b]+"'")}))};return h("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),d.cellTemplatePromise=g[0],h("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),h("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),h("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),d.compiledElementFnDefer=b.defer(),b.all(g)},rowTemplateAssigner:function(d){var e=this;if(d.rowTemplate){var f=b.defer();d.getRowTemplateFn=f.promise,a.getTemplate(d.rowTemplate).then(function(a){var b=c(a);f.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+d.rowTemplate+"'")})}else d.rowTemplate=e.options.rowTemplate,d.getRowTemplateFn=e.getRowTemplateFn;return d.getRowTemplateFn}};return i}])}(),function(){function a(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var b=angular.module("ui.grid");b.service("rowSearcher",["gridUtil","uiGridConstants",function(b,c){var d=c.filter.CONTAINS,e={};return e.getTerm=function(a){if("undefined"==typeof a.term)return a.term;var b=a.term;return"string"==typeof b&&(b=b.trim()),b},e.stripTerm=function(b){var c=e.getTerm(b);return"string"==typeof c?a(c.replace(/(^\*|\*$)/g,"")):c},e.guessCondition=function(a){if("undefined"==typeof a.term||!a.term)return d;var b=e.getTerm(a);if(/\*/.test(b)){var c="";a.flags&&a.flags.caseSensitive||(c+="i");var f=b.replace(/(\\)?\*/g,function(a,b){return b?a:"[\\s\\S]*?"});return new RegExp("^"+f+"$",c)}return d},e.setupFilters=function(a){for(var d=[],f=a.length,g=0;f>g;g++){var h=a[g];if(h.noTerm||!b.isNullOrUndefined(h.term)){var i={},j="";h.flags&&h.flags.caseSensitive||(j+="i"),b.isNullOrUndefined(h.term)||(i.term=e.stripTerm(h)),h.condition?i.condition=h.condition:i.condition=e.guessCondition(h),i.flags=angular.extend({caseSensitive:!1,date:!1},h.flags),i.condition===c.filter.STARTS_WITH&&(i.startswithRE=new RegExp("^"+i.term,j)),i.condition===c.filter.ENDS_WITH&&(i.endswithRE=new RegExp(i.term+"$",j)),i.condition===c.filter.CONTAINS&&(i.containsRE=new RegExp(i.term,j)),i.condition===c.filter.EXACT&&(i.exactRE=new RegExp("^"+i.term+"$",j)),d.push(i)}}return d},e.runColumnFilter=function(a,b,d,e){var f,g=typeof e.condition,h=e.term;if(f=d.filterCellFiltered?a.getCellDisplayValue(b,d):a.getCellValue(b,d),e.condition instanceof RegExp)return e.condition.test(f);if("function"===g)return e.condition(h,f,b,d);if(e.startswithRE)return e.startswithRE.test(f);if(e.endswithRE)return e.endswithRE.test(f);if(e.containsRE)return e.containsRE.test(f);if(e.exactRE)return e.exactRE.test(f);if(e.condition===c.filter.NOT_EQUAL){var i=new RegExp("^"+h+"$");return!i.exec(f)}if("number"==typeof f&&"string"==typeof h){var j=parseFloat(h.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(j)||(h=j)}return e.flags.date===!0&&(f=new Date(f),h=new Date(h.replace(/\\/g,""))),e.condition===c.filter.GREATER_THAN?f>h:e.condition===c.filter.GREATER_THAN_OR_EQUAL?f>=h:e.condition===c.filter.LESS_THAN?h>f:e.condition===c.filter.LESS_THAN_OR_EQUAL?h>=f:!0},e.searchColumn=function(a,b,c,d){if(a.options.useExternalFiltering)return!0;for(var f=d.length,g=0;f>g;g++){var h=d[g],i=e.runColumnFilter(a,b,c,h);if(!i)return!1}return!0},e.search=function(a,c,d){if(c){if(!a.options.enableFiltering)return c;for(var f=[],g=d.length,h=function(a){var c=!1;return a.forEach(function(a){(!b.isNullOrUndefined(a.term)&&""!==a.term||a.noTerm)&&(c=!0)}),c},i=0;g>i;i++){var j=d[i];"undefined"!=typeof j.filters&&h(j.filters)&&f.push({col:j,filters:e.setupFilters(j.filters)})}if(f.length>0){for(var k=function(a,b,c,d){b.visible&&!e.searchColumn(a,b,c,d)&&(b.visible=!1)},l=function(a,b){for(var d=c.length,e=0;d>e;e++)k(a,c[e],b.col,b.filters)},m=f.length,n=0;m>n;n++)l(a,f[n]);a.api.core.raise.rowsVisibleChanged&&a.api.core.raise.rowsVisibleChanged()}return c}},e}])}(),function(){var a=angular.module("ui.grid");a.service("rowSorter",["$parse","uiGridConstants",function(a,b){var c="("+b.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",d=(new RegExp("^[-+]?"+c+"[\\d,.]+"+c+"%?$"),{colSortFnCache:{}});return d.guessSortFn=function(a){switch(a){case"number":return d.sortNumber;case"numberStr":return d.sortNumberStr;case"boolean":return d.sortBool;case"string":return d.sortAlpha;case"date":return d.sortDate;case"object":return d.basicSort;default:throw new Error("No sorting function found for type:"+a)}},d.handleNulls=function(a,b){if(!a&&0!==a&&a!==!1||!b&&0!==b&&b!==!1){if(!a&&0!==a&&a!==!1&&!b&&0!==b&&b!==!1)return 0;if(!a&&0!==a&&a!==!1)return 1;if(!b&&0!==b&&b!==!1)return-1}return null},d.basicSort=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a===b?0:b>a?-1:1},d.sortNumber=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a-b},d.sortNumberStr=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e,f,g=!1,h=!1;return e=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(e)&&(g=!0),f=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(f)&&(h=!0),g&&h?0:g?1:h?-1:e-f},d.sortAlpha=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.toString().toLowerCase(),f=b.toString().toLowerCase();return e===f?0:f>e?-1:1},d.sortDate=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;a instanceof Date||(a=new Date(a)),b instanceof Date||(b=new Date(b));var e=a.getTime(),f=b.getTime();return e===f?0:f>e?-1:1},d.sortBool=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a&&b?0:a||b?a?1:-1:0},d.getSortFn=function(a,b,c){var e;return d.colSortFnCache[b.colDef.name]?e=d.colSortFnCache[b.colDef.name]:void 0!==b.sortingAlgorithm?(e=b.sortingAlgorithm,d.colSortFnCache[b.colDef.name]=b.sortingAlgorithm):b.sortCellFiltered&&b.cellFilter?(e=d.sortAlpha,d.colSortFnCache[b.colDef.name]=e):(e=d.guessSortFn(b.colDef.type),e?d.colSortFnCache[b.colDef.name]=e:e=d.sortAlpha),e},d.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||0===a.sort.priority?-1:b.sort.priority||0===b.sort.priority?1:0},d.sort=function(a,c,e){if(c){if(a.options.useExternalSorting)return c;var f=[];if(e.forEach(function(a){!a.sort||a.sort.ignoreSort||!a.sort.direction||a.sort.direction!==b.ASC&&a.sort.direction!==b.DESC||f.push(a)}),f=f.sort(d.prioritySort),0===f.length)return c;var g,h,i=function(a,b){a.entity.$$uiGridIndex=b};c.forEach(i);var j=c.slice(0),k=function(c,e){for(var i,k=0,l=0;0===k&&l<f.length;){g=f[l],h=f[l].sort.direction,i=d.getSortFn(a,g,j);var m,n;g.sortCellFiltered?(m=a.getCellDisplayValue(c,g),n=a.getCellDisplayValue(e,g)):(m=a.getCellValue(c,g),n=a.getCellValue(e,g)),k=i(m,n,c,e,h),l++}return 0===k?c.entity.$$uiGridIndex-e.entity.$$uiGridIndex:h===b.ASC?k:0-k},l=c.sort(k),m=function(a,b){delete a.entity.$$uiGridIndex};return c.forEach(m),l}},d}])}(),function(){function a(a){var b=a;return"undefined"!=typeof b.length&&b.length&&(b=a[0]),b.ownerDocument.defaultView.getComputedStyle(b,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];4>f;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,e){var f,h=!0,i=a(c),j="border-box"===i.boxSizing;if(0>=f||null==f){if(f=i[d],(0>f||null==f)&&(f=c.style[d]),g.test(f))return f;h=j&&!0,f=parseFloat(f)||0}var k=f+b(c,d,e||(j?"border":"content"),h,i);return k}function d(b){b=angular.element(b)[0];var c=b.parentElement;return c||(c=document.getElementsByTagName("body")[0]),parseInt(a(c).fontSize)||parseInt(a(b).fontSize)||16}var e,f=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(e=function(){var a=Array.prototype.slice;return function(b){var c=this,d=a.call(arguments,1);return d.length?function(){return arguments.length?c.apply(b,d.concat(a.call(arguments))):c.apply(b,d)}:function(){return arguments.length?c.apply(b,arguments):c.call(b)}}});var g=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),h=/^(block|none|table(?!-c[ea]).+)/,i={position:"absolute",visibility:"hidden",display:"block"},j=["0","0","0","0"],k="uiGrid-";f.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(f,g,l,m,n,o,p,q,r,s,t){function u(a,b){var c=angular.element(this),d=0,e=0,f=0,g=0;if(b.originalEvent&&(b=b.originalEvent),"detail"in b&&(f=-1*b.detail),"wheelDelta"in b&&(f=b.wheelDelta),"wheelDeltaY"in b&&(f=b.wheelDeltaY),"wheelDeltaX"in b&&(e=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(e=-1*f,f=0),d=0===f?e:f,"deltaY"in b&&(f=-1*b.deltaY,d=f),"deltaX"in b&&(e=b.deltaX,0===f&&(d=-1*e)),0!==f||0!==e){if(1===b.deltaMode){var h=c.data("mousewheel-line-height");d*=h,f*=h,e*=h}else if(2===b.deltaMode){var i=c.data("mousewheel-page-height");d*=i,f*=i,e*=i}g=Math.max(Math.abs(f),Math.abs(e)),(!z||z>g)&&(z=g,w(b,g)&&(z/=40)),d=Math[d>=1?"floor":"ceil"](d/z),e=Math[e>=1?"floor":"ceil"](e/z),f=Math[f>=1?"floor":"ceil"](f/z),b.deltaMode=0;var j={originalEvent:b,deltaX:e,deltaY:f,deltaFactor:z,preventDefault:function(){b.preventDefault()},stopPropagation:function(){b.stopPropagation()}};y&&clearTimeout(y),y=setTimeout(v,200),a.call(c[0],j)}}function v(){z=null}function w(a,b){return"mousewheel"===a.type&&b%120===0}var x={augmentWidthOrHeight:b,getStyles:a,createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},readableColumnName:function(a){return"undefined"==typeof a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(a,b){var c=[];if(!a||"undefined"==typeof a[0]||void 0===a[0])return[];angular.isUndefined(b)&&(b=[]);var d=a[0];return angular.forEach(d,function(a,d){-1===b.indexOf(d)&&c.push({name:d})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),getTemplate:function(a){if(n.get(a))return x.postProcessTemplate(n.get(a));if(a.hasOwnProperty("then"))return a.then(x.postProcessTemplate);try{if(angular.element(a).length>0)return r.when(a).then(x.postProcessTemplate)}catch(b){}return x.logDebug("fetching url",a),m({method:"GET",url:a}).then(function(b){var c=b.data.trim();return n.put(a,c),c},function(b){throw new Error("Could not get template "+a+": "+b)}).then(x.postProcessTemplate)},postProcessTemplate:function(a){var b=s.startSymbol(),c=s.endSymbol();return("{{"!==b||"}}"!==c)&&(a=a.replace(/\{\{/g,b),a=a.replace(/\}\}/g,c)),r.when(a)},guessType:function(a){var b=typeof a;switch(b){case"number":case"boolean":case"string":return b;default:return angular.isDate(a)?"date":"object"}},elementWidth:function(a){},elementHeight:function(a){},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},fakeElement:function(a,b,c,d){var e,f,g=angular.element(a).clone()[0];for(f in b)g.style[f]=b[f];return angular.element(document.body).append(g),e=c.call(g,g),angular.element(g).remove(),e},normalizeWheelEvent:function(a){var b,c,d,e=a||window.event,f=([].slice.call(arguments,1),0),g=0,h=0,i=0,j=0;return e.originalEvent&&(e=e.originalEvent),e.wheelDelta&&(f=e.wheelDelta),e.detail&&(f=-1*e.detail),h=f,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(h=0,g=-1*f),e.deltaY&&(h=-1*e.deltaY,f=h),e.deltaX&&(g=e.deltaX,f=-1*g),void 0!==e.wheelDeltaY&&(h=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(g=e.wheelDeltaX),i=Math.abs(f),(!b||b>i)&&(b=i),j=Math.max(Math.abs(h),Math.abs(g)),(!c||c>j)&&(c=j),d=f>0?"floor":"ceil",f=Math[d](f/b),g=Math[d](g/c),h=Math[d](h/c),{delta:f,deltaX:g,deltaY:h}},isTouchEnabled:function(){var a;return("ontouchstart"in g||g.DocumentTouch&&l instanceof DocumentTouch)&&(a=!0),a},isNullOrUndefined:function(a){return void 0===a||null===a?!0:!1},endsWith:function(a,b){return a&&b&&"string"==typeof a?-1!==a.indexOf(b,a.length-b.length):!1},arrayContainsObjectWithProperty:function(a,b,c){var d=!1;return angular.forEach(a,function(a){a[b]===c&&(d=!0)}),d},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(a){var b;try{b=q.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?b.enabled(a,!1):b.enabled(!1,a)}catch(c){}},enableAnimations:function(a){var b;try{return b=q.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?b.enabled(a,!0):b.enabled(!0,a),b}catch(c){}},nextUid:function(){for(var a,b=j.length;b;){if(b--,a=j[b].charCodeAt(0),57===a)return j[b]="A",k+j.join("");if(90!==a)return j[b]=String.fromCharCode(a+1),k+j.join("");j[b]="0"}return j.unshift("0"),k+j.join("")},hashKey:function(a){var b,c=typeof a;return"object"===c&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():"undefined"!=typeof a.$$hashKey&&a.$$hashKey?b=a.$$hashKey:void 0===b&&(b=a.$$hashKey=x.nextUid()):b=a,c+":"+b},resetUids:function(){j=["0","0","0"]},logError:function(a){t.LOG_ERROR_MESSAGES&&f.error(a)},logWarn:function(a){t.LOG_WARN_MESSAGES&&f.warn(a)},logDebug:function(){t.LOG_DEBUG_MESSAGES&&f.debug.apply(f,arguments)}};x.focus={queue:[],byId:function(a,b){this._purgeQueue();var c=o(function(){var c=(b&&b.id?b.id+"-":"")+a,d=g.document.getElementById(c);d?d.focus():x.logWarn("[focus.byId] Element id "+c+" was not found.")});return this.queue.push(c),c},byElement:function(a){if(!angular.isElement(a))return x.logWarn("Trying to focus on an element that isn't an element."),r.reject("not-element");a=angular.element(a),this._purgeQueue();var b=o(function(){a&&a[0].focus()});return this.queue.push(b),b},bySelector:function(a,b,c){var d=this;if(!angular.isElement(a))throw new Error("The parent element is not an element.");a=angular.element(a);var e=function(){var c=a[0].querySelector(b);return d.byElement(c)};if(this._purgeQueue(),c){var f=o(e);return this.queue.push(o(e)),f}return e()},_purgeQueue:function(){this.queue.forEach(function(a){o.cancel(a)}),this.queue=[]}},["width","height"].forEach(function(b){var d=angular.uppercase(b.charAt(0))+b.substr(1);x["element"+d]=function(d,e){var f=d;if(f&&"undefined"!=typeof f.length&&f.length&&(f=d[0]),f){var g=a(f);return 0===f.offsetWidth&&h.test(g.display)?x.swap(f,i,function(){return c(f,b,e)}):c(f,b,e)}return null},x["outerElement"+d]=function(a,b){return a?x["element"+d].call(this,a,b?"margin":"border"):null}}),x.closestElm=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){return"function"==typeof document.body[a]?(c=a,!0):!1});for(var d;null!==a;){if(d=a.parentElement,null!==d&&d[c](b))return d;a=d}return null},x.type=function(a){var b=Function.prototype.toString.call(a.constructor);return b.match(/function (.*?)\(/)[1]},x.getBorderSize=function(b,c){"undefined"!=typeof b.length&&b.length&&(b=b[0]);var d=a(b);c=c?"border"+c.charAt(0).toUpperCase()+c.slice(1):"border",c+="Width";var e=parseInt(d[c],10);return isNaN(e)?0:e},x.detectBrowser=function(){var a=g.navigator.userAgent,b={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var c in b)if(b[c].test(a))return c;return"unknown"},x.rtlScrollType=function B(){if(B.type)return B.type;var a=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],b="reverse";return document.body.appendChild(a),a.scrollLeft>0?b="default":(a.scrollLeft=1,0===a.scrollLeft&&(b="negative")),angular.element(a).remove(),B.type=b,b},x.normalizeScrollLeft=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c=a.scrollLeft;if(b.isRTL())switch(x.rtlScrollType()){case"default":return a.scrollWidth-c-a.clientWidth;case"negative":return Math.abs(c);case"reverse":return c}return c},x.denormalizeScrollLeft=function(a,b,c){if("undefined"!=typeof a.length&&a.length&&(a=a[0]),c.isRTL())switch(x.rtlScrollType()){case"default":var d=a.scrollWidth-a.clientWidth;return d-b;case"negative":return-1*b;case"reverse":return b}return b},x.preEval=function(a){var b=t.BRACKET_REGEXP.exec(a);if(b)return(b[1]?x.preEval(b[1]):b[1])+b[2]+(b[3]?x.preEval(b[3]):b[3]);a=a.replace(t.APOS_REGEXP,"\\'");var c=a.split(t.DOT_REGEXP),d=[c.shift()];return angular.forEach(c,function(a){d.push(a.replace(t.FUNC_REGEXP,"']$1"))}),d.join("['")},x.debounce=function(a,b,c){function d(){g=this,f=arguments;var d=function(){e=null,c||(h=a.apply(g,f))},i=c&&!e;return e&&o.cancel(e),e=o(d,b),i&&(h=a.apply(g,f)),h}var e,f,g,h;return d.cancel=function(){o.cancel(e),e=null},d},x.throttle=function(a,b,c){function d(b){g=+new Date,a.apply(e,f),p(function(){h=null},0,1)}c=c||{};var e,f,g=0,h=null;return function(){if(e=this,f=arguments,null===h){var a=+new Date-g;a>b?d():c.trailing&&(h=p(d,b-a,1))}}},x.on={},x.off={},x._events={},x.addOff=function(a){x.off[a]=function(b,c){var d=x._events[a].indexOf(c);d>0&&x._events[a].removeAt(d)}};var y,z,A="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return x.on.mousewheel=function(a,b){if(a&&b){var c=angular.element(a);c.data("mousewheel-line-height",d(c)),c.data("mousewheel-page-height",x.elementHeight(c)),c.data("mousewheel-callbacks")||c.data("mousewheel-callbacks",{});var f=c.data("mousewheel-callbacks");f[b]=(Function.prototype.bind||e).call(u,c[0],b);for(var g=A.length;g;)c.on(A[--g],f[b])}},x.off.mousewheel=function(a,b){var c=angular.element(a),d=c.data("mousewheel-callbacks"),e=d[b];if(e)for(var f=A.length;f;)c.off(A[--f],e);delete d[b],0===Object.keys(d).length&&(c.removeData("mousewheel-line-height"),c.removeData("mousewheel-page-height"),c.removeData("mousewheel-callbacks"))},x}]),f.filter("px",function(){return function(a){return a.match(/^[\d\.]+$/)?a+"px":a}})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){var b={aggregate:{label:"položky"},groupPanel:{description:"Přesuňte záhlaví zde pro vytvoření skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji položky:",selectedItems:"Vybrané položky:",totalItems:"Celkem položek:",size:"Velikost strany:",first:"První strana",next:"Další strana",previous:"Předchozí strana",last:"Poslední strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seřadit od A-Z",descending:"Seřadit od Z-A",remove:"Odebrat seřazení"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem řádků: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat všechna data do csv",exporterVisibleAsCsv:"Exportovat viditelná data do csv",exporterSelectedAsCsv:"Exportovat vybraná data do csv",exporterAllAsPdf:"Exportovat všechna data do pdf",exporterVisibleAsPdf:"Exportovat viditelná data do pdf",exporterSelectedAsPdf:"Exportovat vybraná data do pdf",clearAllFilters:"Odstranit všechny filtry"},importer:{noHeaders:"Názvy sloupců se nepodařilo získat, obsahuje soubor záhlaví?",noObjects:"Data se nepodařilo zpracovat, obsahuje soubor řádky mimo záhlaví?",invalidCsv:"Soubor nelze zpracovat, jedná se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musí obsahovat json. Ukončuji.."},pagination:{sizes:"položek na stránku",totalItems:"položek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupení",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return a.add("cs",b),a.add("cz",b),a.add("cs-cz",b),a.add("cs-CZ",b),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},column:{hide:"Skjul kolonne"
},aggregation:{count:"samlede rækker: ",sum:"smalede: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("de",{aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lösen"},gridMenu:{columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als CSV exportieren",clearAllFilters:"Alle filter reinigen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."},pagination:{sizes:"Einträge pro Seite",totalItems:"Einträge"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por página",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Máx",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fa",{aggregate:{label:"قلم"},groupPanel:{description:"عنوان یک ستون را بگیر و به گروهی از آن ستون رها کن."},search:{placeholder:"جستجو...",showingItems:"نمایش اقلام:",selectedItems:"قلم‌های انتخاب شده:",totalItems:"مجموع اقلام:",size:"اندازه‌ی صفحه:",first:"اولین صفحه",next:"صفحه‌ی‌بعدی",previous:"صفحه‌ی‌ قبلی",last:"آخرین صفحه"},menu:{text:"ستون‌های انتخابی:"},sort:{ascending:"ترتیب صعودی",descending:"ترتیب نزولی",remove:"حذف مرتب کردن"},column:{hide:"پنهان‌کردن ستون"},aggregation:{count:"تعداد: ",sum:"مجموع: ",avg:"میانگین: ",min:"کمترین: ",max:"بیشترین: "},pinning:{pinLeft:"پین کردن سمت چپ",pinRight:"پین کردن سمت راست",unpin:"حذف پین"},gridMenu:{columns:"ستون‌ها:",importerTitle:"وارد کردن فایل",exporterAllAsCsv:"خروجی تمام داده‌ها در فایل csv",exporterVisibleAsCsv:"خروجی داده‌های قابل مشاهده در فایل csv",exporterSelectedAsCsv:"خروجی داده‌های انتخاب‌شده در فایل csv",exporterAllAsPdf:"خروجی تمام داده‌ها در فایل pdf",exporterVisibleAsPdf:"خروجی داده‌های قابل مشاهده در فایل pdf",exporterSelectedAsPdf:"خروجی داده‌های انتخاب‌شده در فایل pdf",clearAllFilters:"پاک کردن تمام فیلتر"},importer:{noHeaders:"نام ستون قابل استخراج نیست. آیا فایل عنوان دارد؟",noObjects:"اشیا قابل استخراج نیستند. آیا به جز عنوان‌ها در فایل داده وجود دارد؟",invalidCsv:"فایل قابل پردازش نیست. آیا فرمت  csv  معتبر است؟",invalidJson:"فایل قابل پردازش نیست. آیا فرمت json   معتبر است؟",jsonNotArray:"فایل json وارد شده باید حاوی آرایه باشد. عملیات ساقط شد."},pagination:{sizes:"اقلام در هر صفحه",totalItems:"اقلام",of:"از"},grouping:{group:"گروه‌بندی",ungroup:"حذف گروه‌بندی",aggregate_count:"Agg: تعداد",aggregate_sum:"Agg: جمع",aggregate_max:"Agg: بیشینه",aggregate_min:"Agg: کمینه",aggregate_avg:"Agg: میانگین",aggregate_remove:"Agg: حذف"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fr",{aggregate:{label:"éléments"},groupPanel:{description:"Faites glisser une en-tête de colonne ici pour créer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des éléments :",selectedItems:"Éléments sélectionnés :",totalItems:"Nombre total d'éléments:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},gridMenu:{columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il une en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau, abandon."},pagination:{sizes:"éléments par page",totalItems:"éléments",of:"sur"},grouping:{group:"Grouper",ungroup:"Dégrouper",aggregate_count:"Agg: Compte",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("hy",{aggregate:{label:"տվյալներ"},groupPanel:{description:"Ըստ սյան խմբավորելու համար քաշեք և գցեք վերնագիրն այստեղ։"},search:{placeholder:"Փնտրում...",showingItems:"Ցուցադրված տվյալներ՝",selectedItems:"Ընտրված:",totalItems:"Ընդամենը՝",size:"Տողերի քանակը էջում՝",first:"Առաջին էջ",next:"Հաջորդ էջ",previous:"Նախորդ էջ",last:"Վերջին էջ"},menu:{text:"Ընտրել սյուները:"},sort:{ascending:"Աճման կարգով",descending:"Նվազման կարգով",remove:"Հանել "},column:{hide:"Թաքցնել սյունը"},aggregation:{count:"ընդամենը տող՝ ",sum:"ընդամենը՝ ",avg:"միջին՝ ",min:"մին՝ ",max:"մաքս՝ "},pinning:{pinLeft:"Կպցնել ձախ կողմում",pinRight:"Կպցնել աջ կողմում",unpin:"Արձակել"},gridMenu:{columns:"Սյուներ:",importerTitle:"Ներմուծել ֆայլ",exporterAllAsCsv:"Արտահանել ամբողջը CSV",exporterVisibleAsCsv:"Արտահանել երևացող տվյալները CSV",exporterSelectedAsCsv:"Արտահանել ընտրված տվյալները CSV",exporterAllAsPdf:"Արտահանել PDF",exporterVisibleAsPdf:"Արտահանել երևացող տվյալները PDF",exporterSelectedAsPdf:"Արտահանել ընտրված տվյալները PDF",clearAllFilters:"Մաքրել բոլոր ֆիլտրերը"},importer:{noHeaders:"Հնարավոր չեղավ որոշել սյան վերնագրերը։ Արդյո՞ք ֆայլը ունի վերնագրեր։",noObjects:"Հնարավոր չեղավ կարդալ տվյալները։ Արդյո՞ք ֆայլում կան տվյալներ։",invalidCsv:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր CSV է։",invalidJson:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր Json է։",jsonNotArray:"Ներմուծված json ֆայլը պետք է պարունակի զանգված, կասեցվում է։"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ja",{aggregate:{label:"項目"},groupPanel:{description:"ここに列ヘッダをドラッグアンドドロップして、その列でグループ化します。"},search:{placeholder:"検索...",showingItems:"表示中の項目:",selectedItems:"選択した項目:",totalItems:"項目の総数:",size:"ページサイズ:",first:"最初のページ",next:"次のページ",previous:"前のページ",last:"前のページ"},menu:{text:"列の選択:"},sort:{ascending:"昇順に並べ替え",descending:"降順に並べ替え",remove:"並べ替えの解除"},column:{hide:"列の非表示"},aggregation:{count:"合計行数: ",sum:"合計: ",avg:"平均: ",min:"最小: ",max:"最大: "},pinning:{pinLeft:"左に固定",pinRight:"右に固定",unpin:"固定解除"},gridMenu:{columns:"列:",importerTitle:"ファイルのインポート",exporterAllAsCsv:"すべてのデータをCSV形式でエクスポート",exporterVisibleAsCsv:"表示中のデータをCSV形式でエクスポート",exporterSelectedAsCsv:"選択したデータをCSV形式でエクスポート",exporterAllAsPdf:"すべてのデータをPDF形式でエクスポート",exporterVisibleAsPdf:"表示中のデータをPDF形式でエクスポート",exporterSelectedAsPdf:"選択したデータをPDF形式でエクスポート",clearAllFilters:"すべてのフィルタを清掃してください"},importer:{noHeaders:"列名を取得できません。ファイルにヘッダが含まれていることを確認してください。",noObjects:"オブジェクトを取得できません。ファイルにヘッダ以外のデータが含まれていることを確認してください。",invalidCsv:"ファイルを処理できません。ファイルが有効なCSV形式であることを確認してください。",invalidJson:"ファイルを処理できません。ファイルが有効なJSON形式であることを確認してください。",jsonNotArray:"インポートしたJSONファイルには配列が含まれている必要があります。処理を中止します。"},pagination:{sizes:"項目/ページ",totalItems:"項目"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ko",{aggregate:{label:"아이템"},groupPanel:{description:"컬럼으로 그룹핑하기 위해서는 컬럼 헤더를 끌어 떨어뜨려 주세요."},search:{placeholder:"검색...",showingItems:"항목 보여주기:",selectedItems:"선택 항목:",totalItems:"전체 항목:",size:"페이지 크기:",first:"첫번째 페이지",next:"다음 페이지",previous:"이전 페이지",last:"마지막 페이지"},menu:{text:"컬럼을 선택하세요:"},sort:{ascending:"오름차순 정렬",descending:"내림차순 정렬",remove:"소팅 제거"},column:{hide:"컬럼 제거"},aggregation:{count:"전체 갯수: ",sum:"전체: ",avg:"평균: ",min:"최소: ",max:"최대: "},pinning:{pinLeft:"왼쪽 핀",pinRight:"오른쪽 핀",unpin:"핀 제거"},gridMenu:{columns:"컬럼:",importerTitle:"파일 가져오기",exporterAllAsCsv:"csv로 모든 데이터 내보내기",exporterVisibleAsCsv:"csv로 보이는 데이터 내보내기",exporterSelectedAsCsv:"csv로 선택된 데이터 내보내기",exporterAllAsPdf:"pdf로 모든 데이터 내보내기",exporterVisibleAsPdf:"pdf로 보이는 데이터 내보내기",exporterSelectedAsPdf:"pdf로 선택 데이터 내보내기",clearAllFilters:"모든 필터를 청소"},importer:{noHeaders:"컬럼명이 지정되어 있지 않습니다. 파일에 헤더가 명시되어 있는지 확인해 주세요.",noObjects:"데이터가 지정되어 있지 않습니다. 데이터가 파일에 있는지 확인해 주세요.",invalidCsv:"파일을 처리할 수 없습니다. 올바른 csv인지 확인해 주세요.",invalidJson:"파일을 처리할 수 없습니다. 올바른 json인지 확인해 주세요.",jsonNotArray:"json 파일은 배열을 포함해야 합니다."},pagination:{sizes:"페이지당 항목",totalItems:"전체 항목"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt-br",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},gridMenu:{columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{sizes:"itens por página",totalItems:"itens"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},gridMenu:{columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O ficheiro tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no ficheiro, além dos cabeçalhos?",invalidCsv:"Ficheiro não pode ser processado. É um CSV válido?",invalidJson:"Ficheiro não pode ser processado. É um Json válido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{sizes:"itens por página",totalItems:"itens",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ru",{aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",remove:"Убрать сортировку"},column:{hide:"Спрятать столбец"},aggregation:{count:"всего строк: ",sum:"итого: ",avg:"среднее: ",min:"мин: ",max:"макс: "},pinning:{pinLeft:"Закрепить слева",pinRight:"Закрепить справа",unpin:"Открепить"},gridMenu:{columns:"Столбцы:",importerTitle:"Import file",exporterAllAsCsv:"Экспортировать всё в CSV",exporterVisibleAsCsv:"Экспортировать видимые данные в CSV",exporterSelectedAsCsv:"Экспортировать выбранные данные в CSV",exporterAllAsPdf:"Экспортировать всё в PDF",exporterVisibleAsPdf:"Экспортировать видимые данные в PDF",exporterSelectedAsPdf:"Экспортировать выбранные данные в PDF",clearAllFilters:"Очистите все фильтры"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"Rengör alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ta",{aggregate:{label:"உருப்படிகள்"},groupPanel:{description:"ஒரு பத்தியை குழுவாக அமைக்க அப்பத்தியின் தலைப்பை இங்கே  இழுத்து வரவும் "},search:{placeholder:"தேடல் ...",showingItems:"உருப்படிகளை காண்பித்தல்:",selectedItems:"தேர்ந்தெடுக்கப்பட்ட  உருப்படிகள்:",totalItems:"மொத்த உருப்படிகள்:",size:"பக்க அளவு: ",first:"முதல் பக்கம்",next:"அடுத்த பக்கம்",previous:"முந்தைய பக்கம் ",last:"இறுதி பக்கம்"},menu:{text:"பத்திகளை தேர்ந்தெடு:"},sort:{ascending:"மேலிருந்து கீழாக",descending:"கீழிருந்து மேலாக",remove:"வரிசையை நீக்கு"},column:{hide:"பத்தியை மறைத்து வை "},aggregation:{count:"மொத்த வரிகள்:",sum:"மொத்தம்: ",avg:"சராசரி: ",min:"குறைந்தபட்ச: ",max:"அதிகபட்ச: "},pinning:{pinLeft:"இடதுபுறமாக தைக்க ",pinRight:"வலதுபுறமாக தைக்க",unpin:"பிரி"},gridMenu:{columns:"பத்திகள்:",importerTitle:"கோப்பு : படித்தல்",exporterAllAsCsv:"எல்லா தரவுகளையும் கோப்பாக்கு: csv",exporterVisibleAsCsv:"இருக்கும் தரவுகளை கோப்பாக்கு: csv",exporterSelectedAsCsv:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: csv",exporterAllAsPdf:"எல்லா தரவுகளையும் கோப்பாக்கு: pdf",
exporterVisibleAsPdf:"இருக்கும் தரவுகளை கோப்பாக்கு: pdf",exporterSelectedAsPdf:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"பத்தியின் தலைப்புகளை பெற இயலவில்லை, கோப்பிற்கு தலைப்பு உள்ளதா?",noObjects:"இலக்குகளை உருவாக்க முடியவில்லை, கோப்பில் தலைப்புகளை தவிர தரவு ஏதேனும் உள்ளதா? ",invalidCsv:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - csv",invalidJson:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - json",jsonNotArray:"படித்த கோப்பில் வரிசைகள் உள்ளது, நடைமுறை ரத்து செய் : json"},pagination:{sizes:"உருப்படிகள் / பக்கம்",totalItems:"உருப்படிகள் "},grouping:{group:"குழு",ungroup:"பிரி",aggregate_count:"மதிப்பீட்டு : எண்ணு",aggregate_sum:"மதிப்பீட்டு : கூட்டல்",aggregate_max:"மதிப்பீட்டு : அதிகபட்சம்",aggregate_min:"மதிப்பீட்டு : குறைந்தபட்சம்",aggregate_avg:"மதிப்பீட்டு : சராசரி",aggregate_remove:"மதிப்பீட்டு : நீக்கு"}}),a}])}])}(),function(){var a=["uiT","uiTranslate"],b=["t","uiTranslate"],c=angular.module("ui.grid.i18n");c.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),c.service("i18nService",["$log","i18nConstants","$rootScope",function(a,b,c){var d={_langs:{},current:null,get:function(a){return this._langs[a.toLowerCase()]},add:function(a,b){var c=a.toLowerCase();this._langs[c]||(this._langs[c]={}),angular.extend(this._langs[c],b)},getAllLangs:function(){var a=[];if(!this._langs)return a;for(var b in this._langs)a.push(b);return a},setCurrent:function(a){this.current=a.toLowerCase()},getCurrentLang:function(){return this.current}},e={add:function(a,b){"object"==typeof a?angular.forEach(a,function(a){a&&d.add(a,b)}):d.add(a,b)},getAllLangs:function(){return d.getAllLangs()},get:function(a){var b=a?a:e.getCurrentLang();return d.get(b)},getSafeText:function(a,c){var f=c?c:e.getCurrentLang(),g=d.get(f);if(!g)return b.MISSING;for(var h=a.split("."),i=g,j=0;j<h.length;++j){if(void 0===i[h[j]]||null===i[h[j]])return b.MISSING;i=i[h[j]]}return i},setCurrentLang:function(a){a&&(d.setCurrent(a),c.$broadcast(b.UPDATE_EVENT))},getCurrentLang:function(){var a=d.getCurrentLang();return a||(a=b.DEFAULT_LANG,d.setCurrent(a)),a}};return e}]);var d=function(a,b){return{compile:function(){return{pre:function(c,d,e){var f=b.LOCALE_DIRECTIVE_ALIAS,g=c.$eval(e[f]);g?c.$watch(e[f],function(){a.setCurrentLang(g)}):e.$$observers&&e.$observe(f,function(){a.setCurrentLang(e[f]||b.DEFAULT_LANG)})}}}}};c.directive("uiI18n",["i18nService","i18nConstants",d]);var e=function(b,c,d){return{restrict:"EA",compile:function(){return{pre:function(e,f,g){var h,i=a[0],j=a[1],k=g[i]||g[j]||f.html(),l=d.MISSING+k;if(g.$$observers){var m=g[i]?i:j;h=g.$observe(m,function(a){a&&f.html(b(a)(c.getCurrentLang())||l)})}var n=b(k),o=e.$on(d.UPDATE_EVENT,function(a){h?h(g[i]||g[j]):f.html(n(c.get())||l)});e.$on("$destroy",o),f.html(n(c.get())||l)}}}}};angular.forEach(a,function(a){c.directive(a,["$parse","i18nService","i18nConstants",e])});var f=function(a,b,c){return function(d){var e=a(d);return e(b.get())||c.MISSING+d}};angular.forEach(b,function(a){c.filter(a,["$parse","i18nService","i18nConstants",f])})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"列过滤器",removeFilter:"移除过滤器",columnMenuButtonLabel:"列菜单"},priority:"优先级:",filterLabel:"列过滤器: "},aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",none:"无序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},columnMenu:{close:"关闭"},gridMenu:{aria:{buttonLabel:"表格菜单"},columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"},pagination:{aria:{pageToFirst:"第一页",pageBack:"上一页",pageSelected:"当前页",pageForward:"下一页",pageToLast:"最后一页"},sizes:"行每页",totalItems:"行",through:"至",of:"共"},grouping:{group:"分组",ungroup:"取消分组",aggregate_count:"合计: 计数",aggregate_sum:"合计: 求和",aggregate_max:"合计: 最大",aggregate_min:"合计: 最小",aggregate_avg:"合计: 平均",aggregate_remove:"合计: 移除"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"},pagination:{sizes:"行每頁",totalItems:"行"}}),a}])}])}(),function(){"use strict";var a=angular.module("ui.grid.autoResize",["ui.grid"]);a.directive("uiGridAutoResize",["$timeout","gridUtil",function(a,b){return{require:"uiGrid",scope:!1,link:function(a,c,d,e){function f(){i=b.elementHeight(c),h=b.elementWidth(c)}function g(){clearTimeout(j),j=setTimeout(function(){var d=b.elementHeight(c),j=b.elementWidth(c);d!==i||j!==h?(e.grid.gridHeight=d,e.grid.gridWidth=j,a.$apply(function(){e.grid.refresh().then(function(){f(),g()})})):g()},250)}var h,i;f();var j;g(),a.$on("$destroy",function(){clearTimeout(j)})}}}])}(),function(){"use strict";var a=angular.module("ui.grid.cellNav",["ui.grid"]);a.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),a.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(a,b,c,d,e){var f=function(a,b,c,d){this.rows=a.visibleRowCache,this.columns=b.visibleColumnCache,this.leftColumns=c?c.visibleColumnCache:[],this.rightColumns=d?d.visibleColumnCache:[],this.bodyContainer=a};return f.prototype.getFocusableCols=function(){var a=this.leftColumns.concat(this.columns,this.rightColumns);return a.filter(function(a){return a.colDef.allowCellFocus})},f.prototype.getFocusableRows=function(){return this.rows.filter(function(a){return a.allowCellFocus!==!1})},f.prototype.getNextRowCol=function(a,b,d){switch(a){case c.direction.LEFT:return this.getRowColLeft(b,d);case c.direction.RIGHT:return this.getRowColRight(b,d);case c.direction.UP:return this.getRowColUp(b,d);case c.direction.DOWN:return this.getRowColDown(b,d);case c.direction.PG_UP:return this.getRowColPageUp(b,d);case c.direction.PG_DOWN:return this.getRowColPageDown(b,d)}},f.prototype.initializeSelection=function(){var a=this.getFocusableCols(),b=this.getFocusableRows();return 0===a.length||0===b.length?null:new d(b[0],a[0])},f.prototype.getRowColLeft=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=1);var h=0===f?c.length-1:f-1;return h>f?0===g?new d(a,c[h]):new d(e[g-1],c[h]):new d(a,c[h])},f.prototype.getRowColRight=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=f===c.length-1?0:f+1;return f>h?g===e.length-1?new d(a,c[h]):new d(e[g+1],c[h]):new d(a,c[h])},f.prototype.getRowColDown=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);return-1===f&&(f=0),g===e.length-1?new d(a,c[f]):new d(e[g+1],c[f])},f.prototype.getRowColPageDown=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return g>=e.length-h?new d(e[e.length-1],c[f]):new d(e[g+h],c[f])},f.prototype.getRowColUp=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);return-1===f&&(f=0),0===g?new d(a,c[f]):new d(e[g-1],c[f])},f.prototype.getRowColPageUp=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return 0>g-h?new d(e[0],c[f]):new d(e[g-h],c[f])},f}]),a.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a){a.registerColumnBuilder(h.cellNavColumnBuilder),a.cellNav={},a.cellNav.lastRowCol=null,a.cellNav.focusedCells=[],h.defaultGridOptions(a.options);var b={events:{cellNav:{navigate:function(a,b){},viewPortKeyDown:function(a,b){},viewPortKeyPress:function(a,b){}}},methods:{cellNav:{scrollToFocus:function(b,c){return h.scrollToFocus(a,b,c)},getFocusedCell:function(){return a.cellNav.lastRowCol},getCurrentSelection:function(){return a.cellNav.focusedCells},rowColSelectIndex:function(b){for(var c=-1,d=0;d<a.cellNav.focusedCells.length;d++)if(a.cellNav.focusedCells[d].col.uid===b.col.uid&&a.cellNav.focusedCells[d].row.uid===b.row.uid){c=d;break}return c}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.modifierKeysToMultiSelectCells=a.modifierKeysToMultiSelectCells===!0},decorateRenderContainers:function(a){var b=a.hasRightContainer()?a.renderContainers.right:null,c=a.hasLeftContainer()?a.renderContainers.left:null;null!==c&&(a.renderContainers.left.cellNav=new e(a.renderContainers.body,c,b,a.renderContainers.body)),null!==b&&(a.renderContainers.right.cellNav=new e(a.renderContainers.body,b,a.renderContainers.body,c)),a.renderContainers.body.cellNav=new e(a.renderContainers.body,a.renderContainers.body,c,b)},getDirection:function(a){return a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey?c.direction.LEFT:a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB?c.direction.RIGHT:a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey?c.direction.UP:a.keyCode===b.keymap.PG_UP?c.direction.PG_UP:a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER&&!a.ctrlKey&&!a.altKey?c.direction.DOWN:a.keyCode===b.keymap.PG_DOWN?c.direction.PG_DOWN:null},cellNavColumnBuilder:function(a,b,c){var e=[];return a.allowCellFocus=void 0===a.allowCellFocus?!0:a.allowCellFocus,d.all(e)},scrollToFocus:function(a,b,c){var d=null,e=null;return"undefined"!=typeof b&&null!==b&&(d=a.getRow(b)),"undefined"!=typeof c&&null!==c&&(e=a.getColumn(c.name?c.name:c.field)),a.api.core.scrollToIfNecessary(d,e).then(function(){var b={row:d,col:e};null!==d&&null!==e&&a.cellNav.broadcastCellNav(b)})},getLeftWidth:function(a,b){var c=0;if(!b)return c;var d=a.renderContainers.body.visibleColumnCache.indexOf(b);a.renderContainers.body.visibleColumnCache.forEach(function(a,b){d>b&&(c+=a.drawnWidth)});var e=0===d?0:(d+1)/a.renderContainers.body.visibleColumnCache.length;return c+=b.drawnWidth*e}};return h}]),a.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile",function(a,b,c,d,e,f,g){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(a,f,g,h){var i=a,j=h.grid;b.initializeGrid(j),h.cellNav={},h.cellNav.makeRowCol=function(a){return a instanceof e||(a=new e(a.row,a.col)),a},h.cellNav.getActiveCell=function(){var a=f[0].getElementsByClassName("ui-grid-cell-focus");return a.length>0?a[0]:void 0},h.cellNav.broadcastCellNav=j.cellNav.broadcastCellNav=function(a,b,d){b=!(void 0===b||!b),a=h.cellNav.makeRowCol(a),h.cellNav.broadcastFocus(a,b,d),i.$broadcast(c.CELL_NAV_EVENT,a,b,d)},h.cellNav.clearFocus=j.cellNav.clearFocus=function(){j.cellNav.focusedCells=[],i.$broadcast(c.CELL_NAV_EVENT)},h.cellNav.broadcastFocus=function(a,b,c){b=!(void 0===b||!b),a=h.cellNav.makeRowCol(a);var d=a.row,f=a.col,g=h.grid.api.cellNav.rowColSelectIndex(a);if(null===j.cellNav.lastRowCol||-1===g){var i=new e(d,f);j.api.cellNav.raise.navigate(i,j.cellNav.lastRowCol),j.cellNav.lastRowCol=i,h.grid.options.modifierKeysToMultiSelectCells&&b?j.cellNav.focusedCells.push(a):j.cellNav.focusedCells=[a]}else j.options.modifierKeysToMultiSelectCells&&b&&g>=0&&j.cellNav.focusedCells.splice(g,1)},h.cellNav.handleKeyDown=function(a){var e=b.getDirection(a);if(null===e)return null;var f="body";a.uiGridTargetRenderContainerId&&(f=a.uiGridTargetRenderContainerId);var g=h.grid.api.cellNav.getFocusedCell();if(g){var i=h.grid.renderContainers[f].cellNav.getNextRowCol(e,g.row,g.col),k=h.grid.renderContainers[f].cellNav.getFocusableCols(),l=h.grid.api.cellNav.rowColSelectIndex(i);return e===c.direction.LEFT&&i.col===k[k.length-1]&&i.row===g.row&&a.keyCode===d.keymap.TAB&&a.shiftKey?(j.cellNav.focusedCells.splice(l,1),h.cellNav.clearFocus(),!0):e!==c.direction.RIGHT||i.col!==k[0]||i.row!==g.row||a.keyCode!==d.keymap.TAB||a.shiftKey?(j.scrollToIfNecessary(i.row,i.col).then(function(){h.cellNav.broadcastCellNav(i)}),a.stopPropagation(),a.preventDefault(),!1):(j.cellNav.focusedCells.splice(l,1),h.cellNav.clearFocus(),!0)}}},post:function(a,b,d,e){function f(){var d='<div id="'+h.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="region" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',e=g(d)(a);b.prepend(e),a.$on(c.CELL_NAV_EVENT,function(a,b,c,d){function f(a){a!==e.text()&&(e[0].style.clip="rect(0px,0px,0px,0px)",e[0].innerHTML="",e[0].style.visibility="hidden",e[0].style.visibility="visible",""!==a&&(e[0].style.clip="auto",e[0].appendChild(document.createTextNode(a+" ")),e[0].style.visibility="hidden",e[0].style.visibility="visible"))}if(!d||"focus"!==d.type){for(var g=[],i=h.api.cellNav.getCurrentSelection(),j=0;j<i.length;j++)g.push(i[j].getIntersectionValueFiltered());var k=g.toString();f(k)}})}var h=e.grid;f()}}}}}]),a.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function(a,b,c,d,e,f,g){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(b,d,h,i){var j=i[0],k=i[1],l=i[2];if(j.grid.api.cellNav){var m=k.containerId,n=j.grid;if(e.decorateRenderContainers(n),"body"===m){j.grid.options.modifierKeysToMultiSelectCells?d.attr("aria-multiselectable",!0):d.attr("aria-multiselectable",!1);var o=f('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+n.id+"-aria-speakable "+n.id+'-grid-container" aria-owns="'+n.id+'-grid-container"></div>')(b);d.append(o),o.on("focus",function(a){a.uiGridTargetRenderContainerId=m;var b=j.grid.api.cellNav.getFocusedCell();null===b&&(b=j.grid.renderContainers[m].cellNav.getNextRowCol(g.direction.DOWN,null,null),b.row&&b.col&&j.cellNav.broadcastCellNav(b))}),l.setAriaActivedescendant=function(a){d.attr("aria-activedescendant",a)},l.removeAriaActivedescendant=function(a){d.attr("aria-activedescendant")===a&&d.attr("aria-activedescendant","")},j.focus=function(){c.focus.byElement(o[0])};var p=null;o.on("keydown",function(a){a.uiGridTargetRenderContainerId=m;var b=j.grid.api.cellNav.getFocusedCell(),c=j.cellNav.handleKeyDown(a);null===c&&(j.grid.api.cellNav.raise.viewPortKeyDown(a,b),p=b)}),o.on("keypress",function(b){p&&(a(function(){j.grid.api.cellNav.raise.viewPortKeyPress(b,p)},4),p=null)}),b.$on("$destroy",function(){o.off()})}}}}}}}]),a.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function(a,b,c,d,e,f,g,h){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(a,b,c,d){},post:function(a,b,c,d){var e=d[0],f=d[1];if(e.grid.api.cellNav){var g=f.containerId;if("body"===g){var h=e.grid;h.api.core.on.scrollBegin(a,function(a){var b=e.grid.api.cellNav.getFocusedCell();null!==b&&f.colContainer.containsColumn(b.col)&&e.cellNav.clearFocus()}),h.api.core.on.scrollEnd(a,function(a){var b=e.grid.api.cellNav.getFocusedCell();null!==b&&f.colContainer.containsColumn(b.col)&&e.cellNav.broadcastCellNav(b)}),h.api.cellNav.on.navigate(a,function(){e.focus()})}}}}}}}]),a.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function(a,b,c,d,e,f,g){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function(a,b,c,d){function f(a){a.preventDefault()}function h(){if(!a.focused){var c=b.find("div");c.addClass("ui-grid-cell-focus"),b.attr("aria-selected",!0),k.setAriaActivedescendant(b.attr("id")),a.focused=!0}}function i(){if(a.focused){var c=b.find("div");c.removeClass("ui-grid-cell-focus"),b.attr("aria-selected",!1),k.removeAriaActivedescendant(b.attr("id")),a.focused=!1}}var j=d[0],k=d[1];if(j.grid.api.cellNav&&a.col.colDef.allowCellFocus){var l=j.grid;a.focused=!1,b.attr("tabindex",-1),b.find("div").on("click",function(b){j.cellNav.broadcastCellNav(new g(a.row,a.col),b.ctrlKey||b.metaKey,b),b.stopPropagation(),a.$apply()}),b.on("mousedown",f),j.grid.api.edit&&(j.grid.api.edit.on.beginCellEdit(a,function(){b.off("mousedown",f)}),j.grid.api.edit.on.afterCellEdit(a,function(){b.on("mousedown",f)}),j.grid.api.edit.on.cancelCellEdit(a,function(){b.on("mousedown",f)})),b.on("focus",function(b){j.cellNav.broadcastCellNav(new g(a.row,a.col),!1,b),b.stopPropagation(),a.$apply()}),a.$on(e.CELL_NAV_EVENT,function(b,c,d){var e=l.cellNav.focusedCells.some(function(b,c){return b.row===a.row&&b.col===a.col});e?h():i()}),a.$on("$destroy",function(){b.find("div").off(),b.off()})}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.edit",["ui.grid"]);a.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),a.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(a,b,c){var d={initializeGrid:function(a){d.defaultGridOptions(a.options),a.registerColumnBuilder(d.editColumnBuilder),a.edit={};var b={events:{edit:{afterCellEdit:function(a,b,c,d){},beginCellEdit:function(a,b,c){},cancelCellEdit:function(a,b){}}},methods:{edit:{}}};a.api.registerEventsFromObject(b.events)},defaultGridOptions:function(a){a.cellEditableCondition=void 0===a.cellEditableCondition?!0:a.cellEditableCondition,a.enableCellEditOnFocus=void 0===a.enableCellEditOnFocus?!1:a.enableCellEditOnFocus},editColumnBuilder:function(b,d,e){var f=[];return b.enableCellEdit=void 0===b.enableCellEdit?void 0===e.enableCellEdit?"object"!==b.type:e.enableCellEdit:b.enableCellEdit,b.cellEditableCondition=void 0===b.cellEditableCondition?e.cellEditableCondition:b.cellEditableCondition,b.enableCellEdit&&(b.editableCellTemplate=b.editableCellTemplate||e.editableCellTemplate||"ui-grid/cellEditor",f.push(c.getTemplate(b.editableCellTemplate).then(function(a){d.editableCellTemplate=a},function(a){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+b.editableCellTemplate+"'")}))),b.enableCellEditOnFocus=void 0===b.enableCellEditOnFocus?e.enableCellEditOnFocus:b.enableCellEditOnFocus,a.all(f)},isStartEditKey:function(a){return a.metaKey||a.keyCode===b.keymap.ESC||a.keyCode===b.keymap.SHIFT||a.keyCode===b.keymap.CTRL||a.keyCode===b.keymap.ALT||a.keyCode===b.keymap.WIN||a.keyCode===b.keymap.CAPSLOCK||a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey||a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB||a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey||a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER?!1:!0}};return d}]),a.directive("uiGridEdit",["gridUtil","uiGridEditService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["uiGridEditConstants",function(a){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(b,c,d,e){var f=e[0];if(f.grid.api.edit&&f.grid.api.cellNav){var g=e[1].containerId;"body"===g&&(b.$on(a.events.CANCEL_CELL_EDIT,function(){f.focus()}),b.$on(a.events.END_CELL_EDIT,function(){f.focus()}))}}}}}}]),a.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope",function(a,b,c,d,e,f,g,h,i){var j=500;return b.has("uiGridCellNavService")&&b.get("uiGridCellNavService"),{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(b,k,l,m){function n(){k.on("dblclick",t),k.on("touchstart",o),m&&m.grid.api.cellNav&&(F=m.grid.api.cellNav.on.viewPortKeyDown(b,function(a,c){null!==c&&(c.row!==b.row||c.col!==b.col||b.col.colDef.enableCellEditOnFocus||r(a))}),E=m.grid.api.cellNav.on.navigate(b,function(a,d){b.col.colDef.enableCellEditOnFocus&&(d&&a.row===d.row&&a.col===d.col||a.row!==b.row||a.col!==b.col||c(function(){t()}))})),b.beginEditEventsWired=!0}function o(a){"undefined"!=typeof a.originalEvent&&void 0!==a.originalEvent&&(a=a.originalEvent),k.on("touchend",p),B=c(function(){},j),B.then(function(){setTimeout(t,0),k.off("touchend",p)})}function p(a){c.cancel(B),k.off("touchend",p)}function q(){k.off("dblclick",t),k.off("keydown",r),k.off("touchstart",o),E(),F(),b.beginEditEventsWired=!1}function r(a){h.isStartEditKey(a)&&t(a)}function s(a,c){return!c.isSaving&&(angular.isFunction(a.colDef.cellEditableCondition)?a.colDef.cellEditableCondition(b):a.colDef.cellEditableCondition)}function t(a){b.grid.api.core.scrollToIfNecessary(b.row,b.col).then(function(){u(a)})}function u(h){if(!D&&s(b.col,b.row)){A=g(b.row.getQualifiedColField(b.col)),z=A(b),y=b.col.editableCellTemplate,y=b.col.colDef.editModelField?y.replace(d.MODEL_COL_FIELD,f.preEval("row.entity."+b.col.colDef.editModelField)):y.replace(d.MODEL_COL_FIELD,b.row.getQualifiedColField(b.col)),y=y.replace(d.COL_FIELD,"grid.getCellValue(row, col)");var j=b.col.colDef.editDropdownFilter?"|"+b.col.colDef.editDropdownFilter:"";y=y.replace(d.CUSTOM_FILTERS,j);var l="text";switch(b.col.colDef.type){case"boolean":l="checkbox";break;case"number":l="number";break;case"date":l="date"}y=y.replace("INPUT_TYPE",l);var m=b.col.colDef.editDropdownRowEntityOptionsArrayPath;m?b.editDropdownOptionsArray=x(b.row.entity,m):b.editDropdownOptionsArray=b.col.colDef.editDropdownOptionsArray,b.editDropdownIdLabel=b.col.colDef.editDropdownIdLabel?b.col.colDef.editDropdownIdLabel:"id",b.editDropdownValueLabel=b.col.colDef.editDropdownValueLabel?b.col.colDef.editDropdownValueLabel:"value";var n=function(){D=!0,q();var c=angular.element(y);k.append(c),C=b.$new(),a(c)(C);var d=angular.element(k.children()[0]);d.addClass("ui-grid-cell-contents-hidden")};i.$$phase?n():b.$apply(n);var o=b.col.grid.api.core.on.scrollBegin(b,function(){b.grid.disableScrolling||(v(),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,A(b),z),o(),p(),r())}),p=b.$on(e.events.END_CELL_EDIT,function(){v(),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,A(b),z),p(),o(),r()}),r=b.$on(e.events.CANCEL_CELL_EDIT,function(){w(),r(),o(),p()});b.$broadcast(e.events.BEGIN_CELL_EDIT,h),c(function(){b.grid.api.edit.raise.beginCellEdit(b.row.entity,b.col.colDef,h)})}}function v(){if(b.grid.disableScrolling=!1,D){m&&m.grid.api.cellNav&&m.focus();var a=angular.element(k.children()[0]);C.$destroy(),angular.element(k.children()[1]).remove(),a.removeClass("ui-grid-cell-contents-hidden"),D=!1,n(),b.grid.api.core.notifyDataChange(d.dataChange.EDIT)}}function w(){b.grid.disableScrolling=!1,D&&(A.assign(b,z),b.$apply(),b.grid.api.edit.raise.cancelCellEdit(b.row.entity,b.col.colDef),v())}function x(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split(".");c.length;){var d=c.shift();if(!(d in a))return;a=a[d]}return a}var y,z,A,B,C,D=!1;if(b.col.colDef.enableCellEdit){var E=function(){},F=function(){},G=function(){b.col.colDef.enableCellEdit&&b.row.enableCellEdit!==!1?b.beginEditEventsWired||n():b.beginEditEventsWired&&q()};G();var H=b.$watch("row",function(a,b){a!==b&&G()});b.$on("$destroy",H)}}}}]),a.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(a,b,c,d,e){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function(a,b,c){},post:function(a,f,g,h){var i,j,k;h[0]&&(i=h[0]),h[1]&&(j=h[1]),h[2]&&(k=h[2]),a.$on(c.events.BEGIN_CELL_EDIT,function(b,c){if(d(function(){if(f[0].focus(),!a.col.colDef.enableCellEditOnFocus&&i&&i.grid.api.cellNav)try{f[0].setSelectionRange(f[0].value.length,f[0].value.length)}catch(b){}else f[0].select()}),i&&i.grid.api.cellNav)var g=i.grid.api.cellNav.on.viewPortKeyPress(a,function(a,b){e.isStartEditKey(a)&&(k.$setViewValue(String.fromCharCode(a.keyCode),a),k.$render()),g()});f.on("blur",function(b){a.stopEdit(b)})}),a.deepEdit=!1,a.stopEdit=function(b){a.inputForm&&!a.inputForm.$valid?(b.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)):a.$emit(c.events.END_CELL_EDIT),a.deepEdit=!1},f.on("click",function(b){"checkbox"!==f[0].type&&(a.deepEdit=!0,d(function(){a.grid.disableScrolling=!0}))}),f.on("keydown",function(d){switch(d.keyCode){case b.keymap.ESC:d.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)}if(!a.deepEdit||d.keyCode!==b.keymap.LEFT&&d.keyCode!==b.keymap.RIGHT&&d.keyCode!==b.keymap.UP&&d.keyCode!==b.keymap.DOWN)if(i&&i.grid.api.cellNav)d.uiGridTargetRenderContainerId=j.containerId,null!==i.cellNav.handleKeyDown(d)&&a.stopEdit(d);else switch(d.keyCode){case b.keymap.ENTER:case b.keymap.TAB:d.stopPropagation(),d.preventDefault(),a.stopEdit(d)}else d.stopPropagation();return!0})}}}}}]),a.directive("uiGridEditor",["$filter",function(a){function b(a){if("undefined"==typeof a||""===a)return null;var b=a.split("-");if(3!==b.length)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);return 1>d||1>c||1>e?null:new Date(c,d-1,e)}return{priority:-100,require:"?ngModel",link:function(c,d,e,f){2===angular.version.minor&&e.type&&"date"===e.type&&f&&(f.$formatters.push(function(b){return f.$setValidity(null,!b||!isNaN(b.getTime())),a("date")(b,"yyyy-MM-dd")}),f.$parsers.push(function(a){if(a&&a.length>0){var c=b(a);return f.$setValidity(null,c&&!isNaN(c.getTime())),c}return f.$setValidity(null,!0),null}))}}}]),a.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(a,b){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(a,b,c){},post:function(c,d,e,f){var g=f[0],h=f[1];c.$on(b.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].style.width=d[0].parentElement.offsetWidth-1+"px",d.on("blur",function(a){c.stopEdit(a)})}),c.stopEdit=function(a){c.$emit(b.events.END_CELL_EDIT)},d.on("keydown",function(d){switch(d.keyCode){case a.keymap.ESC:d.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT)}if(g&&g.grid.api.cellNav)d.uiGridTargetRenderContainerId=h.containerId,null!==g.cellNav.handleKeyDown(d)&&c.stopEdit(d);else switch(d.keyCode){case a.keymap.ENTER:case a.keymap.TAB:d.stopPropagation(),d.preventDefault(),c.stopEdit(d)}return!0})}}}}}]),a.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(a,b,c,d){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(a,b,c){},post:function(b,d,e,f){var g,h;f[0]&&(g=f[0]),f[1]&&(h=f[1]);var i=(g.grid,function(d){var e=d.srcElement||d.target;e&&e.files&&e.files.length>0?("function"==typeof b.col.colDef.editFileChooserCallback?b.col.colDef.editFileChooserCallback(b.row,b.col,e.files):a.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),e.form.reset(),b.$emit(c.events.END_CELL_EDIT)):b.$emit(c.events.CANCEL_CELL_EDIT)});d[0].addEventListener("change",i,!1),b.$on(c.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].select(),d.on("blur",function(a){b.$emit(c.events.END_CELL_EDIT)})})}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.expandable",["ui.grid"]);a.service("uiGridExpandableService",["gridUtil","$compile",function(a,b){var c={initializeGrid:function(b){b.expandable={},b.expandable.expandedAll=!1,b.options.enableExpandable=b.options.enableExpandable!==!1,b.options.expandableRowHeight=b.options.expandableRowHeight||150,b.options.expandableRowHeaderWidth=b.options.expandableRowHeaderWidth||40,b.options.enableExpandable&&!b.options.expandableRowTemplate&&(a.logError("You have not set the expandableRowTemplate, disabling expandable module"),b.options.enableExpandable=!1);var d={events:{expandable:{rowExpandedBeforeStateChanged:function(a,b){},rowExpandedStateChanged:function(a,b){}}},methods:{expandable:{toggleRowExpansion:function(a){var d=b.getRow(a);null!==d&&c.toggleRowExpansion(b,d)},expandAllRows:function(){c.expandAllRows(b)},collapseAllRows:function(){c.collapseAllRows(b)},toggleAllRows:function(){c.toggleAllRows(b)}}}};b.api.registerEventsFromObject(d.events),b.api.registerMethodsFromObject(d.methods)},toggleRowExpansion:function(a,b){a.api.expandable.raise.rowExpandedBeforeStateChanged(b),b.isExpanded=!b.isExpanded,angular.isUndefined(b.expandedRowHeight)&&(b.expandedRowHeight=a.options.expandableRowHeight),b.isExpanded?b.height=b.grid.options.rowHeight+b.expandedRowHeight:(b.height=b.grid.options.rowHeight,a.expandable.expandedAll=!1),a.api.expandable.raise.rowExpandedStateChanged(b)},expandAllRows:function(a,b){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded||c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded&&c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!1,a.queueGridRefresh()},toggleAllRows:function(a){a.expandable.expandedAll?c.collapseAllRows(a):c.expandAllRows(a)}};return c}]),a.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(f.grid.options.enableExpandableRowHeader!==!1){var g={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:f.grid.options.expandableRowHeaderWidth||40};g.cellTemplate=b.get("ui-grid/expandableRowHeader"),g.headerCellTemplate=b.get("ui-grid/expandableTopRowHeader"),f.grid.addRowHeaderColumn(g)}a.initializeGrid(f.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGrid",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,b,c,d){d.grid.api.core.on.renderingComplete(a,function(){a.row&&a.row.grid&&a.row.grid.options&&a.row.grid.options.enableExpandable&&(d.grid.parentRow=a.row)})},post:function(a,b,c,d){}}}}}]),a.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(a,b,c,d,e,f,g){
return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,b,d,f){e.getTemplate(a.grid.options.expandableRowTemplate).then(function(d){if(a.grid.options.expandableRowScope){var e=a.grid.options.expandableRowScope;for(var f in e)e.hasOwnProperty(f)&&(a[f]=e[f])}var g=c(d)(a);b.append(g),a.row.expandedRendered=!0})},post:function(a,b,c,d){a.$on("$destroy",function(){a.row.expandedRendered=!1})}}}}}]),a.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){return{pre:function(a,b,c,d){a.expandableRow={},a.expandableRow.shouldRenderExpand=function(){var b="body"===a.colContainer.name&&a.grid.options.enableExpandable!==!1&&a.row.isExpanded&&(!a.grid.isScrollingVertically||a.row.expandedRendered);return b},a.expandableRow.shouldRenderFiller=function(){var b=a.row.isExpanded&&("body"!==a.colContainer.name||a.grid.isScrollingVertically&&!a.row.expandedRendered);return b}},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){var d=angular.element(a.children().children()[0]),e=c.get("ui-grid/expandableScrollFiller"),f=c.get("ui-grid/expandableRow");return d.append(f),d.append(e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.exporter",["ui.grid"]);a.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),a.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(a,b,c,d,e,f){var g={delay:100,initializeGrid:function(a){a.exporter={},this.defaultGridOptions(a.options);var b={events:{exporter:{}},methods:{exporter:{csvExport:function(b,c){g.csvExport(a,b,c)},pdfExport:function(b,c){g.pdfExport(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods),a.api.core.addToGridMenu?g.addToMenu(a):e(function(){a.api.core.addToGridMenu&&g.addToMenu(a)},this.delay,1)},defaultGridOptions:function(a){a.exporterSuppressMenu=a.exporterSuppressMenu===!0,a.exporterMenuLabel=a.exporterMenuLabel?a.exporterMenuLabel:"Export",a.exporterSuppressColumns=a.exporterSuppressColumns?a.exporterSuppressColumns:[],a.exporterCsvColumnSeparator=a.exporterCsvColumnSeparator?a.exporterCsvColumnSeparator:",",a.exporterCsvFilename=a.exporterCsvFilename?a.exporterCsvFilename:"download.csv",a.exporterPdfFilename=a.exporterPdfFilename?a.exporterPdfFilename:"download.pdf",a.exporterOlderExcelCompatibility=a.exporterOlderExcelCompatibility===!0,a.exporterPdfDefaultStyle=a.exporterPdfDefaultStyle?a.exporterPdfDefaultStyle:{fontSize:11},a.exporterPdfTableStyle=a.exporterPdfTableStyle?a.exporterPdfTableStyle:{margin:[0,5,0,15]},a.exporterPdfTableHeaderStyle=a.exporterPdfTableHeaderStyle?a.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},a.exporterPdfHeader=a.exporterPdfHeader?a.exporterPdfHeader:null,a.exporterPdfFooter=a.exporterPdfFooter?a.exporterPdfFooter:null,a.exporterPdfOrientation=a.exporterPdfOrientation?a.exporterPdfOrientation:"landscape",a.exporterPdfPageSize=a.exporterPdfPageSize?a.exporterPdfPageSize:"A4",a.exporterPdfMaxGridWidth=a.exporterPdfMaxGridWidth?a.exporterPdfMaxGridWidth:720,a.exporterMenuAllData=void 0!==a.exporterMenuAllData?a.exporterMenuAllData:!0,a.exporterMenuCsv=void 0!==a.exporterMenuCsv?a.exporterMenuCsv:!0,a.exporterMenuPdf=void 0!==a.exporterMenuPdf?a.exporterMenuPdf:!0,a.exporterPdfCustomFormatter=a.exporterPdfCustomFormatter&&"function"==typeof a.exporterPdfCustomFormatter?a.exporterPdfCustomFormatter:function(a){return a},a.exporterHeaderFilterUseName=a.exporterHeaderFilterUseName===!0,a.exporterFieldCallback=a.exporterFieldCallback?a.exporterFieldCallback:function(a,b,c,d){return d},a.exporterAllDataFn=a.exporterAllDataFn?a.exporterAllDataFn:null,null==a.exporterAllDataFn&&a.exporterAllDataPromise&&(a.exporterAllDataFn=a.exporterAllDataPromise)},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:f.getSafeText("gridMenu.exporterAllAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuAllData},order:200},{title:f.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv},order:201},{title:f.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:202},{title:f.getSafeText("gridMenu.exporterAllAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuAllData},order:203},{title:f.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf},order:204},{title:f.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:205}])},csvExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=a.options.showHeader?d.getColumnHeaders(a,c):[],f=d.getData(a,b,c),g=d.formatAsCsv(e,f,a.options.exporterCsvColumnSeparator);d.downloadFile(a.options.exporterCsvFilename,g,a.options.exporterOlderExcelCompatibility)})},loadAllDataIfNeeded:function(c,d,e){if(d===b.ALL&&c.rows.length!==c.options.totalItems&&c.options.exporterAllDataFn)return c.options.exporterAllDataFn().then(function(){c.modifyRows(c.options.data)});var f=a.defer();return f.resolve(),f.promise},getColumnHeaders:function(a,c){var d,e=[];if(c===b.ALL)d=a.columns;else{var f=a.renderContainers.left?a.renderContainers.left.visibleColumnCache.filter(function(a){return a.visible}):[],g=a.renderContainers.body?a.renderContainers.body.visibleColumnCache.filter(function(a){return a.visible}):[],h=a.renderContainers.right?a.renderContainers.right.visibleColumnCache.filter(function(a){return a.visible}):[];d=f.concat(g,h)}return d.forEach(function(b,c){b.colDef.exporterSuppressExport!==!0&&-1===a.options.exporterSuppressColumns.indexOf(b.name)&&e.push({name:b.field,displayName:a.options.exporterHeaderFilter?a.options.exporterHeaderFilter(a.options.exporterHeaderFilterUseName?b.name:b.displayName):b.displayName,width:b.drawnWidth?b.drawnWidth:b.width,align:"number"===b.colDef.type?"right":"left"})}),e},getData:function(a,d,e){var f,g,h=[];switch(d){case b.ALL:f=a.rows;break;case b.VISIBLE:f=a.getVisibleRows();break;case b.SELECTED:a.api.selection?f=a.api.selection.getSelectedGridRows():c.logError("selection feature must be enabled to allow selected rows to be exported")}if(e===b.ALL)g=a.columns;else{var i=a.renderContainers.left?a.renderContainers.left.visibleColumnCache.filter(function(a){return a.visible}):[],j=a.renderContainers.body?a.renderContainers.body.visibleColumnCache.filter(function(a){return a.visible}):[],k=a.renderContainers.right?a.renderContainers.right.visibleColumnCache.filter(function(a){return a.visible}):[];g=i.concat(j,k)}return f.forEach(function(c,d){if(c.exporterEnableExporting!==!1){var f=[];g.forEach(function(d,g){if((d.visible||e===b.ALL)&&d.colDef.exporterSuppressExport!==!0&&-1===a.options.exporterSuppressColumns.indexOf(d.name)){var h={value:a.options.exporterFieldCallback(a,c,d,a.getCellValue(c,d))};d.colDef.exporterPdfAlign&&(h.alignment=d.colDef.exporterPdfAlign),f.push(h)}}),h.push(f)}}),h},formatAsCsv:function(a,b,c){var d=this,e=a.map(function(a){return{value:a.displayName}}),f=e.length>0?d.formatRowAsCsv(this,c)(e)+"\n":"";return f+=b.map(this.formatRowAsCsv(this,c)).join("\n")},formatRowAsCsv:function(a,b){return function(c){return c.map(a.formatFieldAsCsv).join(b)}},formatFieldAsCsv:function(a){return null==a.value?"":"number"==typeof a.value?a.value:"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?'"'+a.value.replace(/"/g,'""')+'"':JSON.stringify(a.value)},isIE:function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):!1},downloadFile:function(a,b,c){var d,e,f=document,g=f.createElement("a"),h="application/octet-stream;charset=utf-8";if(e=this.isIE(),e&&10>e){var i=f.createElement("iframe");return document.body.appendChild(i),i.contentWindow.document.open("text/html","replace"),i.contentWindow.document.write("sep=,\r\n"+b),i.contentWindow.document.close(),i.contentWindow.focus(),i.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(i),!0}if(navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([c?"\ufeff":"",b],{type:h}),a);if("download"in g){var j=new Blob([c?"\ufeff":"",b],{type:h});d=URL.createObjectURL(j),g.setAttribute("download",a)}else d="data:"+h+","+encodeURIComponent(b),g.setAttribute("target","_blank");g.href=d,g.setAttribute("style","display:none;"),f.body.appendChild(g),setTimeout(function(){if(g.click)g.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),g.dispatchEvent(a)}f.body.removeChild(g)},this.delay)},pdfExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=d.getColumnHeaders(a,c),f=d.getData(a,b,c),g=d.prepareAsPdf(a,e,f);d.isIE()?d.downloadPDF(a.options.exporterPdfFilename,g):pdfMake.createPdf(g).open()})},downloadPDF:function(a,b){var c,d=document;d.createElement("a"),c=this.isIE();var e,f=pdfMake.createPdf(b);f.getBuffer(function(b){if(e=new Blob([b]),c&&10>c){var f=d.createElement("iframe");return document.body.appendChild(f),f.contentWindow.document.open("text/html","replace"),f.contentWindow.document.write(e),f.contentWindow.document.close(),f.contentWindow.focus(),f.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(f),!0}return navigator.msSaveBlob?navigator.msSaveBlob(e,a):void 0})},prepareAsPdf:function(a,b,c){var d=this.calculatePdfHeaderWidths(a,b),e=b.map(function(a){return{text:a.displayName,style:"tableHeader"}}),f=c.map(this.formatRowAsPdf(this)),g=[e].concat(f),h={pageOrientation:a.options.exporterPdfOrientation,pageSize:a.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:d,body:g}}],styles:{tableStyle:a.options.exporterPdfTableStyle,tableHeader:a.options.exporterPdfTableHeaderStyle},defaultStyle:a.options.exporterPdfDefaultStyle};return a.options.exporterPdfLayout&&(h.layout=a.options.exporterPdfLayout),a.options.exporterPdfHeader&&(h.header=a.options.exporterPdfHeader),a.options.exporterPdfFooter&&(h.footer=a.options.exporterPdfFooter),a.options.exporterPdfCustomFormatter&&(h=a.options.exporterPdfCustomFormatter(h)),h},calculatePdfHeaderWidths:function(a,b){var c=0;b.forEach(function(a){"number"==typeof a.width&&(c+=a.width)});var d=0;b.forEach(function(a){if("*"===a.width&&(d+=100),"string"==typeof a.width&&a.width.match(/(\d)*%/)){var b=parseInt(a.width.match(/(\d)*%/)[0]);a.width=c*b/100,d+=a.width}});var e=c+d;return b.map(function(b){return"*"===b.width?b.width:b.width*a.options.exporterPdfMaxGridWidth/e})},formatRowAsPdf:function(a){return function(b){return b.map(a.formatFieldAsPdfString)}},formatFieldAsPdfString:function(a){var b;return b=null==a.value?"":"number"==typeof a.value?a.value.toString():"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?a.value.replace(/"/g,'""'):JSON.stringify(a.value).replace(/^"/,"").replace(/"$/,""),a.alignment&&"string"==typeof a.alignment&&(b={text:b,alignment:a.alignment}),b}};return g}]),a.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid),e.grid.exporter.$scope=a}}}])}(),function(){"use strict";var a=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);a.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function(a,b,c,d,e,f,g,h,i){var j={initializeGrid:function(a,b){i.initializeGrid(a,b),a.grouping={},a.grouping.groupHeaderCache={},j.defaultGridOptions(a.options),a.registerRowsProcessor(j.groupRows,400),a.registerColumnBuilder(j.groupingColumnBuilder),a.registerColumnsProcessor(j.groupingColumnProcessor,400);var c={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(b){var c=j.getGrouping(a);return c.grouping.forEach(function(a){a.colName=a.col.name,delete a.col}),c.aggregations.forEach(function(a){a.colName=a.col.name,delete a.col}),c.aggregations=c.aggregations.filter(function(a){return!a.aggregation.source||"grouping"!==a.aggregation.source}),b&&(c.rowExpandedStates=j.getRowExpandedStates(a.grouping.groupingHeaderCache)),c},setGrouping:function(b){j.setGrouping(a,b)},groupColumn:function(b){var c=a.getColumn(b);j.groupColumn(a,c)},ungroupColumn:function(b){var c=a.getColumn(b);j.ungroupColumn(a,c)},clearGrouping:function(){j.clearGrouping(a)},aggregateColumn:function(b,c,d){var e=a.getColumn(b);j.aggregateColumn(a,e,c,d)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods),a.api.core.on.sortChanged(b,j.tidyPriorities)},defaultGridOptions:function(a){a.enableGrouping=a.enableGrouping!==!1,a.groupingShowCounts=a.groupingShowCounts!==!1,a.groupingNullLabel="undefined"==typeof a.groupingNullLabel?"Null":a.groupingNullLabel,a.enableGroupHeaderSelection=a.enableGroupHeaderSelection===!0},groupingColumnBuilder:function(a,d,e){if(a.enableGrouping!==!1){"undefined"==typeof d.grouping&&"undefined"!=typeof a.grouping?(d.grouping=angular.copy(a.grouping),"undefined"!=typeof d.grouping.groupPriority&&d.grouping.groupPriority>-1&&(d.treeAggregationFn=i.nativeAggregations()[b.aggregation.COUNT].aggregationFn,d.treeAggregationFinalizerFn=j.groupedFinalizerFn)):"undefined"==typeof d.grouping&&(d.grouping={}),"undefined"!=typeof d.grouping&&"undefined"!=typeof d.grouping.groupPriority&&d.grouping.groupPriority>=0&&(d.suppressRemoveSort=!0);var f={name:"ui.grid.grouping.group",title:g.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return"undefined"==typeof this.context.col.grouping||"undefined"==typeof this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){j.groupColumn(this.context.col.grid,this.context.col)}},h={name:"ui.grid.grouping.ungroup",title:g.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return"undefined"!=typeof this.context.col.grouping&&"undefined"!=typeof this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){j.ungroupColumn(this.context.col.grid,this.context.col)}},k={name:"ui.grid.grouping.aggregateRemove",title:g.get().grouping.aggregate_remove,shown:function(){return"undefined"!=typeof this.context.col.treeAggregationFn},action:function(){j.aggregateColumn(this.context.col.grid,this.context.col,null)}},l=function(a,b){b=b||g.get().grouping["aggregate_"+a]||a;var e={name:"ui.grid.grouping.aggregate"+a,title:b,shown:function(){return"undefined"==typeof this.context.col.treeAggregation||"undefined"==typeof this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==a},action:function(){j.aggregateColumn(this.context.col.grid,this.context.col,a)}};c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregate"+a)||d.menuItems.push(e)};d.colDef.groupingShowGroupingMenu!==!1&&(c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.group")||d.menuItems.push(f),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.ungroup")||d.menuItems.push(h)),d.colDef.groupingShowAggregationMenu!==!1&&(angular.forEach(i.nativeAggregations(),function(a,b){l(b)}),angular.forEach(e.treeCustomAggregations,function(a,b){l(b,a.menuTitle)}),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregateRemove")||d.menuItems.push(k))}},groupingColumnProcessor:function(a,b){return a=j.moveGroupColumns(this,a,b)},groupedFinalizerFn:function(a){var b=this;"undefined"!=typeof a.groupVal?(a.rendered=a.groupVal,b.grid.options.groupingShowCounts&&"date"!==b.colDef.type&&(a.rendered+=" ("+a.value+")")):a.rendered=null},moveGroupColumns:function(a,b,c){return a.options.moveGroupColumns===!1?b:(b.forEach(function(a,b){a.groupingPosition=b}),b.sort(function(a,b){var c,d;return c=a.isRowHeader?-1e3:"undefined"==typeof a.grouping||"undefined"==typeof a.grouping.groupPriority||a.grouping.groupPriority<0?null:a.grouping.groupPriority,d=b.isRowHeader?-1e3:"undefined"==typeof b.grouping||"undefined"==typeof b.grouping.groupPriority||b.grouping.groupPriority<0?null:b.grouping.groupPriority,null!==c&&null===d?-1:null!==d&&null===c?1:null!==c&&null!==d?c-d:a.groupingPosition-b.groupingPosition}),b.forEach(function(a,b){delete a.groupingPosition}),b)},groupColumn:function(a,c){"undefined"==typeof c.grouping&&(c.grouping={});var d=j.getGrouping(a);c.grouping.groupPriority=d.grouping.length,c.sort?("undefined"==typeof c.sort.direction||null===c.sort.direction)&&(c.sort.direction=h.ASC):c.sort={direction:h.ASC},c.treeAggregation={type:b.aggregation.COUNT,source:"grouping"},c.treeAggregationFn=i.nativeAggregations()[b.aggregation.COUNT].aggregationFn,c.treeAggregationFinalizerFn=j.groupedFinalizerFn,a.api.grouping.raise.groupingChanged(c),a.api.core.raise.sortChanged(a,a.getColumnSorting()),a.queueGridRefresh()},ungroupColumn:function(a,b){"undefined"!=typeof b.grouping&&(delete b.grouping.groupPriority,delete b.treeAggregation,delete b.customTreeAggregationFinalizer,j.tidyPriorities(a),a.api.grouping.raise.groupingChanged(b),a.queueGridRefresh())},aggregateColumn:function(a,b,c){"undefined"!=typeof b.grouping&&"undefined"!=typeof b.grouping.groupPriority&&b.grouping.groupPriority>=0&&j.ungroupColumn(a,b);var d={};"undefined"!=typeof a.options.treeCustomAggregations[c]?d=a.options.treeCustomAggregations[c]:"undefined"!=typeof i.nativeAggregations()[c]&&(d=i.nativeAggregations()[c]),b.treeAggregation={type:c,label:g.get().aggregation[d.label]||d.label},b.treeAggregationFn=d.aggregationFn,b.treeAggregationFinalizerFn=d.finalizerFn,a.api.grouping.raise.aggregationChanged(b),a.queueGridRefresh()},setGrouping:function(a,b){"undefined"!=typeof b&&(j.clearGrouping(a),b.grouping&&b.grouping.length&&b.grouping.length>0&&b.grouping.forEach(function(b){var c=a.getColumn(b.colName);c&&j.groupColumn(a,c)}),b.aggregations&&b.aggregations.length&&b.aggregations.forEach(function(b){var c=a.getColumn(b.colName);c&&j.aggregateColumn(a,c,b.aggregation.type)}),b.rowExpandedStates&&j.applyRowExpandedStates(a.grouping.groupingHeaderCache,b.rowExpandedStates))},clearGrouping:function(a){var b=j.getGrouping(a);b.grouping.length>0&&b.grouping.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),j.ungroupColumn(a,b.col)}),b.aggregations.length>0&&b.aggregations.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),j.aggregateColumn(a,b.col,null)})},tidyPriorities:function(a){"undefined"!=typeof a&&"undefined"==typeof a.grid||"undefined"==typeof this.grid||(a=this.grid);var b=[],c=[];a.columns.forEach(function(a,d){"undefined"!=typeof a.grouping&&"undefined"!=typeof a.grouping.groupPriority&&a.grouping.groupPriority>=0?b.push(a):"undefined"!=typeof a.sort&&"undefined"!=typeof a.sort.priority&&a.sort.priority>=0&&c.push(a)}),b.sort(function(a,b){return a.grouping.groupPriority-b.grouping.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.suppressRemoveSort=!0,"undefined"==typeof a.sort&&(a.sort={}),a.sort.priority=b});var d=b.length;c.sort(function(a,b){return a.sort.priority-b.sort.priority}),c.forEach(function(a,b){a.sort.priority=d,a.suppressRemoveSort=a.colDef.suppressRemoveSort,d++})},groupRows:function(a){if(0===a.length)return a;var b=this;b.grouping.oldGroupingHeaderCache=b.grouping.groupingHeaderCache||{},b.grouping.groupingHeaderCache={};for(var c=j.initialiseProcessingState(b),e=function(e,h){var i=b.getCellValue(g,e.col);e.initialised&&0===d.getSortFn(b,e.col,a)(i,e.currentValue)||(j.insertGroupHeader(b,a,f,c,h),f++)},f=0;f<a.length;f++){var g=a[f];g.visible&&c.forEach(e)}return delete b.grouping.oldGroupingHeaderCache,a},initialiseProcessingState:function(a){var b=[],c=j.getGrouping(a);return c.grouping.forEach(function(a,c){b.push({fieldName:a.field,col:a.col,initialised:!1,currentValue:null,currentRow:null})}),b},getGrouping:function(a){var b=[],c=[];return a.columns.forEach(function(a,d){a.grouping&&"undefined"!=typeof a.grouping.groupPriority&&a.grouping.groupPriority>=0&&b.push({field:a.field,col:a,groupPriority:a.grouping.groupPriority,grouping:a.grouping}),a.treeAggregation&&a.treeAggregation.type&&c.push({field:a.field,col:a,aggregation:a.treeAggregation})}),b.sort(function(a,b){return a.groupPriority-b.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.groupPriority=b,delete a.grouping}),{grouping:b,aggregations:c}},insertGroupHeader:function(a,b,c,d,g){var h=(d[g].fieldName,d[g].col),i=a.getCellValue(b[c],h),k=i;("undefined"==typeof i||null===i)&&(k=a.options.groupingNullLabel);for(var l=a.grouping.oldGroupingHeaderCache,m=0;g>m;m++)l&&l[d[m].currentValue]&&(l=l[d[m].currentValue].children);var n;for(l&&l[i]?(n=l[i].row,n.entity={}):(n=new e({},null,a),f.rowTemplateAssigner.call(a,n)),n.entity["$$"+d[g].col.uid]={groupVal:k},n.treeLevel=g,n.groupHeader=!0,n.internalRow=!0,n.enableCellEdit=!1,n.enableSelection=a.options.enableGroupHeaderSelection,d[g].initialised=!0,d[g].currentValue=i,d[g].currentRow=n,j.finaliseProcessingState(d,g+1),b.splice(c,0,n),l=a.grouping.groupingHeaderCache,m=0;g>m;m++)l=l[d[m].currentValue].children;l[i]={row:n,children:{}}},finaliseProcessingState:function(a,b){for(var c=b;c<a.length;c++)a[c].initialised=!1,a[c].currentRow=null,a[c].currentValue=null},getRowExpandedStates:function(a){if("undefined"==typeof a)return{};var b={};return angular.forEach(a,function(a,c){b[c]={state:a.row.treeNode.state},a.children?b[c].children=j.getRowExpandedStates(a.children):b[c].children={}}),b},applyRowExpandedStates:function(a,b){"undefined"!=typeof b&&angular.forEach(b,function(b,c){a[c]&&(a[c].row.treeNode.state=b.state,b.children&&a[c].children&&j.applyRowExpandedStates(a[c].children,b.children))})}};return j}]),a.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){e.grid.options.enableGrouping!==!1&&b.initializeGrid(e.grid,a)},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.importer",["ui.grid"]);a.constant("uiGridImporterConstants",{featureName:"importer"}),a.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){b.importer={$scope:a},this.defaultGridOptions(b.options);var c={events:{importer:{}},methods:{importer:{importFile:function(a){i.importThisFile(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.options.enableImporter&&b.options.importerShowMenu&&(b.api.core.addToGridMenu?i.addToMenu(b):f(function(){b.api.core.addToGridMenu&&i.addToMenu(b)},100,1))},defaultGridOptions:function(a){a.enableImporter||void 0===a.enableImporter?h.hasOwnProperty("File")&&h.hasOwnProperty("FileReader")&&h.hasOwnProperty("FileList")&&h.hasOwnProperty("Blob")?a.enableImporter=!0:(d.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),a.enableImporter=!1):a.enableImporter=!1,a.importerProcessHeaders=a.importerProcessHeaders||i.processHeaders,a.importerHeaderFilter=a.importerHeaderFilter||function(a){return a},a.importerErrorCallback&&"function"==typeof a.importerErrorCallback||delete a.importerErrorCallback,a.enableImporter!==!0||a.importerDataAddCallback||(d.logError("You have not set an importerDataAddCallback, importer is disabled"),a.enableImporter=!1),a.importerShowMenu=a.importerShowMenu!==!1,a.importerObjectCallback=a.importerObjectCallback||function(a,b){return b}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(b){this.grid.api.importer.importAFile(a)},order:151}])},importThisFile:function(a,b){if(!b)return void d.logError("No file object provided to importThisFile, should be impossible, aborting");var c=new FileReader;switch(b.type){case"application/json":c.onload=i.importJsonClosure(a);break;default:c.onload=i.importCsvClosure(a)}c.readAsText(b)},importJsonClosure:function(a){return function(b){var c,d=[],e=i.parseJson(a,b);null!==e&&(e.forEach(function(b,e){c=i.newObject(a),angular.extend(c,b),c=a.options.importerObjectCallback(a,c),d.push(c)}),i.addObjects(a,d))}},parseJson:function(a,b){var c;try{c=JSON.parse(b.target.result)}catch(d){return void i.alertError(a,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",b.target.result)}return Array.isArray(c)?c:(i.alertError(a,"importer.jsonNotarray","Import failed, file is not an array, file was: ",b.target.result),[])},importCsvClosure:function(a){return function(b){var c=i.parseCsv(b);if(!c||c.length<1)return void i.alertError(a,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",b.target.result);var d=i.createCsvObjects(a,c);return d&&0!==d.length?void i.addObjects(a,d):void i.alertError(a,"importer.noObjects","Objects were not able to be derived, content was: ",b.target.result)}},parseCsv:function(a){var b=a.target.result;return CSV.parse(b)},createCsvObjects:function(a,b){var c=a.options.importerProcessHeaders(a,b.shift());if(!c||0===c.length)return i.alertError(a,"importer.noHeaders","Column names could not be derived, content was: ",b),[];var d,e=[];return b.forEach(function(b,f){d=i.newObject(a),null!==b&&b.forEach(function(a,b){null!==c[b]&&(d[c[b]]=a)}),d=a.options.importerObjectCallback(a,d),e.push(d)}),e},processHeaders:function(a,b){var c=[];if(a.options.columnDefs&&0!==a.options.columnDefs.length){var d=i.flattenColumnDefs(a,a.options.columnDefs);return b.forEach(function(a,b){c.push(d[a]?d[a]:d[a.toLowerCase()]?d[a.toLowerCase()]:null)}),c}return b.forEach(function(a,b){c.push(a.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),c},flattenColumnDefs:function(a,b){var c={};return b.forEach(function(b,d){b.name&&(c[b.name]=b.field||b.name,c[b.name.toLowerCase()]=b.field||b.name),b.field&&(c[b.field]=b.field||b.name,c[b.field.toLowerCase()]=b.field||b.name),b.displayName&&(c[b.displayName]=b.field||b.name,c[b.displayName.toLowerCase()]=b.field||b.name),b.displayName&&a.options.importerHeaderFilter&&(c[a.options.importerHeaderFilter(b.displayName)]=b.field||b.name,c[a.options.importerHeaderFilter(b.displayName).toLowerCase()]=b.field||b.name)}),c},addObjects:function(a,c,d){if(a.api.rowEdit){var e=a.registerDataChangeCallback(function(){a.api.rowEdit.setRowsDirty(c),e()},[b.dataChange.ROW]);a.importer.$scope.$on("$destroy",e)}a.importer.$scope.$apply(a.options.importerDataAddCallback(a,c))},newObject:function(a){return"undefined"!=typeof a.options&&"undefined"!=typeof a.options.importerNewObject?new a.options.importerNewObject:{}},alertError:function(a,b,c,e){a.options.importerErrorCallback?a.options.importerErrorCallback(a,b,c,e):(h.alert(g.getSafeText(b)),d.logError(c+e))}};return i}]),a.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(a,e.grid)}}}]),a.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(a,d,e,f){var g=function(a){var c=a.srcElement||a.target;if(c&&c.files&&1===c.files.length){var d=c.files[0];b.importThisFile(i,d),c.form.reset()}},h=d[0].querySelectorAll(".ui-grid-importer-file-chooser"),i=f.grid;1!==h.length?c.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):h[0].addEventListener("change",g,!1)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.infiniteScroll",["ui.grid"]);a.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(a,b,c,d,e,f){var g={initializeGrid:function(a,b){if(g.defaultGridOptions(a.options),a.options.enableInfiniteScroll){a.infiniteScroll={dataLoading:!1},g.setScrollDirections(a,a.options.infiniteScrollUp,a.options.infiniteScrollDown),a.api.core.on.scrollEnd(b,g.handleScroll);var c={events:{infiniteScroll:{needLoadMoreData:function(a,b){},needLoadMoreDataTop:function(a,b){}}},methods:{infiniteScroll:{dataLoaded:function(b,c){g.setScrollDirections(a,b,c);var d=g.adjustScroll(a).then(function(){a.infiniteScroll.dataLoading=!1});return d},resetScroll:function(b,c){return g.setScrollDirections(a,b,c),g.adjustInfiniteScrollPosition(a,0)},saveScrollPercentage:function(){a.infiniteScroll.prevScrollTop=a.renderContainers.body.prevScrollTop,a.infiniteScroll.previousVisibleRows=a.getVisibleRowCount()},dataRemovedTop:function(b,c){g.dataRemovedTop(a,b,c)},dataRemovedBottom:function(b,c){g.dataRemovedBottom(a,b,c)},setScrollDirections:function(b,c){g.setScrollDirections(a,b,c)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)}},defaultGridOptions:function(a){a.enableInfiniteScroll=a.enableInfiniteScroll!==!1,a.infiniteScrollRowsFromEnd=a.infiniteScrollRowsFromEnd||20,a.infiniteScrollUp=a.infiniteScrollUp===!0,a.infiniteScrollDown=a.infiniteScrollDown!==!1},setScrollDirections:function(a,b,c){a.infiniteScroll.scrollUp=b===!0,a.suppressParentScrollUp=b===!0,a.infiniteScroll.scrollDown=c!==!1,a.suppressParentScrollDown=c!==!1},handleScroll:function(a){if(!(a.grid.infiniteScroll&&a.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===a.source)&&a.y){var b,c=a.grid.options.infiniteScrollRowsFromEnd/a.grid.renderContainers.body.visibleRowCache.length;a.grid.scrollDirection===d.scrollDirection.UP?(b=a.y.percentage,c>=b&&g.loadData(a.grid)):a.grid.scrollDirection===d.scrollDirection.DOWN&&(b=1-a.y.percentage,c>=b&&g.loadData(a.grid))}},loadData:function(a){a.infiniteScroll.previousVisibleRows=a.renderContainers.body.visibleRowCache.length,a.infiniteScroll.direction=a.scrollDirection,delete a.infiniteScroll.prevScrollTop,a.scrollDirection===d.scrollDirection.UP&&a.infiniteScroll.scrollUp?(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreDataTop()):a.scrollDirection===d.scrollDirection.DOWN&&a.infiniteScroll.scrollDown&&(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(a){var b=f.defer();return c(function(){var e,f,h,i,j;e=a.getViewportHeight()+a.headerHeight-a.renderContainers.body.headerHeight-a.scrollbarHeight,f=a.options.rowHeight,void 0===a.infiniteScroll.direction&&g.adjustInfiniteScrollPosition(a,0),
h=a.getVisibleRowCount();var k=f*h;a.infiniteScroll.scrollDown&&e>k&&a.api.infiniteScroll.raise.needLoadMoreData(),a.infiniteScroll.direction===d.scrollDirection.UP&&(i=a.infiniteScroll.prevScrollTop||0,j=i+(h-a.infiniteScroll.previousVisibleRows)*f,g.adjustInfiniteScrollPosition(a,j),c(function(){b.resolve()})),a.infiniteScroll.direction===d.scrollDirection.DOWN&&(j=a.infiniteScroll.prevScrollTop||a.infiniteScroll.previousVisibleRows*f-e,g.adjustInfiniteScrollPosition(a,j),c(function(){b.resolve()}))},0),b.promise},adjustInfiniteScrollPosition:function(a,b){var c=new e(a,null,null,"ui.grid.adjustInfiniteScrollPosition"),d=a.getVisibleRowCount(),f=a.getViewportHeight()+a.headerHeight-a.renderContainers.body.headerHeight-a.scrollbarHeight,g=a.options.rowHeight,h=d*g-f;0===b&&a.infiniteScroll.scrollUp?c.y={percentage:1/h}:c.y={percentage:b/h},a.scrollContainers("",c)},dataRemovedTop:function(a,b,c){var d,e,f,h;return g.setScrollDirections(a,b,c),d=a.renderContainers.body.visibleRowCache.length,e=a.infiniteScroll.prevScrollTop,h=a.options.rowHeight,f=e-(a.infiniteScroll.previousVisibleRows-d)*h,g.adjustInfiniteScrollPosition(a,f)},dataRemovedBottom:function(a,b,c){var d;return g.setScrollDirections(a,b,c),d=a.infiniteScroll.prevScrollTop,g.adjustInfiniteScrollPosition(a,d)}};return g}]),a.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(a){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(b,c,d){return{pre:function(b,c,d,e){a.initializeGrid(e.grid,b)},post:function(a,b,c){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.moveColumns",["ui.grid"]);a.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function(a,b,c,d,e,f){var g={initializeGrid:function(a){var b=this;this.registerPublicApi(a),this.defaultGridOptions(a.options),a.moveColumns={orderCache:[]},a.registerColumnBuilder(b.movableColumnBuilder),a.registerDataChangeCallback(b.verifyColumnOrder,[e.dataChange.COLUMN])},registerPublicApi:function(a){var b=this,c={events:{colMovable:{columnPositionChanged:function(a,b,c){}}},methods:{colMovable:{moveColumn:function(c,d){var e=a.columns;if(!angular.isNumber(c)||!angular.isNumber(d))return void f.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var g=0,h=0;h<e.length;h++)(angular.isDefined(e[h].colDef.visible)&&e[h].colDef.visible===!1||e[h].isRowHeader===!0)&&g++;if(c>=e.length-g||d>=e.length-g)return void f.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var i=function(a){for(var b=a,c=0;b>=c;c++)angular.isDefined(e[c])&&(angular.isDefined(e[c].colDef.visible)&&e[c].colDef.visible===!1||e[c].isRowHeader===!0)&&b++;return b};b.redrawColumnAtPosition(a,i(c),i(d))}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableColumnMoving=a.enableColumnMoving!==!1},movableColumnBuilder:function(b,c,d){var e=[];return b.enableColumnMoving=void 0===b.enableColumnMoving?d.enableColumnMoving:b.enableColumnMoving,a.all(e)},updateColumnCache:function(a){a.moveColumns.orderCache=a.getOnlyDataColumns()},verifyColumnOrder:function(a){var b,c=a.rowHeaderColumns.length;angular.forEach(a.moveColumns.orderCache,function(d,e){if(b=a.columns.indexOf(d),-1!==b&&b-c!==e){var f=a.columns.splice(b,1)[0];a.columns.splice(e+c,0,f)}})},redrawColumnAtPosition:function(a,c,d){var f=a.columns,h=f[c];if(h.colDef.enableColumnMoving){if(c>d)for(var i=c;i>d;i--)f[i]=f[i-1];else if(d>c)for(var j=c;d>j;j++)f[j]=f[j+1];f[d]=h,g.updateColumnCache(a),a.queueGridRefresh(),b(function(){a.api.core.notifyDataChange(e.dataChange.COLUMN),a.api.colMovable.raise.columnPositionChanged(h.colDef,c,d)})}}};return g}]),a.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(a){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,e,f,h){if(a.col.colDef.enableColumnMoving){var i,j,k,l,m,n,o=angular.element(e[0].querySelectorAll(".ui-grid-cell-contents")),p=!1,q=!1,r=function(b){i=a.grid.element[0].getBoundingClientRect().left,a.grid.hasLeftContainer()&&(i+=a.grid.renderContainers.left.header[0].getBoundingClientRect().width),j=b.pageX,k=0,l=i+a.grid.getViewportWidth(),"mousedown"===b.type?(d.on("mousemove",s),d.on("mouseup",t)):"touchstart"===b.type&&(d.on("touchmove",s),d.on("touchend",t))},s=function(a){var b=a.pageX-j;0!==b&&(document.onselectstart=function(){return!1},q=!0,p?p&&(x(b),j=a.pageX):w())},t=function(b){if(document.onselectstart=null,m&&(m.remove(),p=!1),v(),u(),q){for(var d=a.grid.columns,e=0,f=0;f<d.length&&d[f].colDef.name!==a.col.colDef.name;f++)e++;if(0>k){for(var g=0,h=e-1;h>=0;h--)if((angular.isUndefined(d[h].colDef.visible)||d[h].colDef.visible===!0)&&(g+=d[h].drawnWidth||d[h].width||d[h].colDef.width,g>Math.abs(k))){c.redrawColumnAtPosition(a.grid,e,h+1);break}g<Math.abs(k)&&c.redrawColumnAtPosition(a.grid,e,0)}else if(k>0){for(var i=0,j=e+1;j<d.length;j++)if((angular.isUndefined(d[j].colDef.visible)||d[j].colDef.visible===!0)&&(i+=d[j].drawnWidth||d[j].width||d[j].colDef.width,i>k)){c.redrawColumnAtPosition(a.grid,e,j-1);break}k>i&&c.redrawColumnAtPosition(a.grid,e,d.length-1)}}},u=function(){o.on("touchstart",r),o.on("mousedown",r)},v=function(){o.off("touchstart",r),o.off("mousedown",r),d.off("mousemove",s),d.off("touchmove",s),d.off("mouseup",t),d.off("touchend",t)};u();var w=function(){p=!0,m=e.clone(),e.parent().append(m),m.addClass("movingColumn");var c,d={};c="safari"===b.detectBrowser()?e[0].offsetLeft+e[0].offsetWidth-e[0].getBoundingClientRect().width:e[0].getBoundingClientRect().left,d.left=c-i+"px";var f=a.grid.element[0].getBoundingClientRect().right,g=e[0].getBoundingClientRect().right;g>f&&(n=a.col.drawnWidth+(f-g),d.width=n+"px"),m.css(d)},x=function(b){for(var c=a.grid.columns,d=0,e=0;e<c.length;e++)(angular.isUndefined(c[e].colDef.visible)||c[e].colDef.visible===!0)&&(d+=c[e].drawnWidth||c[e].width||c[e].colDef.width);var f,j=m[0].getBoundingClientRect().left-1,o=m[0].getBoundingClientRect().right;if(f=j-i+b,f=l>f?f:l,(j>=i||b>0)&&(l>=o||0>b))m.css({visibility:"visible",left:f+"px"});else if(d>Math.ceil(h.grid.gridWidth)){b*=8;var p=new g(a.col.grid,null,null,"uiGridHeaderCell.moveElement");p.x={pixels:b},p.grid.scrollContainers("",p)}for(var q=0,r=0;r<c.length;r++)if(angular.isUndefined(c[r].colDef.visible)||c[r].colDef.visible===!0){if(c[r].colDef.name===a.col.colDef.name)break;q+=c[r].drawnWidth||c[r].width||c[r].colDef.width}void 0===a.newScrollLeft?k+=b:k=a.newScrollLeft+f-q,n<a.col.drawnWidth&&(n+=Math.abs(b),m.css({width:n+"px"}))}}}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pagination",["ng","ui.grid"]);a.service("uiGridPaginationService",["gridUtil",function(a){var b={initializeGrid:function(a){b.defaultGridOptions(a.options);var c={events:{pagination:{paginationChanged:function(a,b){}}},methods:{pagination:{getPage:function(){return a.options.enablePagination?a.options.paginationCurrentPage:null},getTotalPages:function(){return a.options.enablePagination?0===a.options.totalItems?1:Math.ceil(a.options.totalItems/a.options.paginationPageSize):null},nextPage:function(){a.options.enablePagination&&(a.options.totalItems>0?a.options.paginationCurrentPage=Math.min(a.options.paginationCurrentPage+1,c.methods.pagination.getTotalPages()):a.options.paginationCurrentPage++)},previousPage:function(){a.options.enablePagination&&(a.options.paginationCurrentPage=Math.max(a.options.paginationCurrentPage-1,1))},seek:function(b){if(a.options.enablePagination){if(!angular.isNumber(b)||1>b)throw"Invalid page number: "+b;a.options.paginationCurrentPage=Math.min(b,c.methods.pagination.getTotalPages())}}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods);var d=function(b){if(a.options.useExternalPagination||!a.options.enablePagination)return b;var c=parseInt(a.options.paginationPageSize,10),d=parseInt(a.options.paginationCurrentPage,10),e=b.filter(function(a){return a.visible});a.options.totalItems=e.length;var f=(d-1)*c;return f>e.length&&(d=a.options.paginationCurrentPage=1,f=(d-1)*c),e.slice(f,f+c)};a.registerRowsProcessor(d,900)},defaultGridOptions:function(b){b.enablePagination=b.enablePagination!==!1,b.enablePaginationControls=b.enablePaginationControls!==!1,b.useExternalPagination=b.useExternalPagination===!0,a.isNullOrUndefined(b.totalItems)&&(b.totalItems=0),a.isNullOrUndefined(b.paginationPageSizes)&&(b.paginationPageSizes=[250,500,1e3]),a.isNullOrUndefined(b.paginationPageSize)&&(b.paginationPageSizes.length>0?b.paginationPageSize=b.paginationPageSizes[0]:b.paginationPageSize=0),a.isNullOrUndefined(b.paginationCurrentPage)&&(b.paginationCurrentPage=1),a.isNullOrUndefined(b.paginationTemplate)&&(b.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(a,b,c){a.api.pagination.raise.paginationChanged(b,c),a.options.useExternalPagination||a.queueGridRefresh()}};return b}]),a.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(a,b){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(c,d,e,f){b.initializeGrid(f.grid),a.getTemplate(f.grid.options.paginationTemplate).then(function(a){var b=angular.element(a);d.append(b),f.innerCompile(b)})}}}}]),a.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(a,b,c,d){return{priority:-200,scope:!0,require:"^uiGrid",link:function(e,f,g,h){var i=".ui-grid-pager-control-input";e.aria=d.getSafeText("pagination.aria"),e.paginationApi=h.grid.api.pagination,e.sizesLabel=d.getSafeText("pagination.sizes"),e.totalItemsLabel=d.getSafeText("pagination.totalItems"),e.paginationOf=d.getSafeText("pagination.of"),e.paginationThrough=d.getSafeText("pagination.through");var j=h.grid.options;h.grid.renderContainers.body.registerViewportAdjuster(function(a){return a.height=a.height-c.elementHeight(f),a});var k=h.grid.registerDataChangeCallback(function(a){a.options.useExternalPagination||(a.options.totalItems=a.rows.length)},[b.dataChange.ROW]);e.$on("$destroy",k);var l=function(){e.showingLow=(j.paginationCurrentPage-1)*j.paginationPageSize+1,e.showingHigh=Math.min(j.paginationCurrentPage*j.paginationPageSize,j.totalItems)},m=e.$watch("grid.options.totalItems + grid.options.paginationPageSize",l),n=e.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(b,c){if(b!==c&&void 0!==c){if(!angular.isNumber(j.paginationCurrentPage)||j.paginationCurrentPage<1)return void(j.paginationCurrentPage=1);if(j.totalItems>0&&j.paginationCurrentPage>e.paginationApi.getTotalPages())return void(j.paginationCurrentPage=e.paginationApi.getTotalPages());l(),a.onPaginationChanged(e.grid,j.paginationCurrentPage,j.paginationPageSize)}});e.$on("$destroy",function(){m(),n()}),e.cantPageForward=function(){return j.totalItems>0?j.paginationCurrentPage>=e.paginationApi.getTotalPages():j.data.length<1},e.cantPageToLast=function(){return j.totalItems>0?e.cantPageForward():!0},e.cantPageBackward=function(){return j.paginationCurrentPage<=1};var o=function(a){a&&c.focus.bySelector(f,i)};e.pageFirstPageClick=function(){e.paginationApi.seek(1),o(e.cantPageBackward())},e.pagePreviousPageClick=function(){e.paginationApi.previousPage(),o(e.cantPageBackward())},e.pageNextPageClick=function(){e.paginationApi.nextPage(),o(e.cantPageForward())},e.pageLastPageClick=function(){e.paginationApi.seek(e.paginationApi.getTotalPages()),o(e.cantPageToLast())}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pinning",["ui.grid"]);a.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),a.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(a,b,c,d){var e={initializeGrid:function(a){e.defaultGridOptions(a.options),a.registerColumnBuilder(e.pinningColumnBuilder);var b={events:{pinning:{columnPinned:function(a,b){}}},methods:{pinning:{pinColumn:function(b,c){e.pinColumn(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enablePinning=a.enablePinning!==!1},pinningColumnBuilder:function(b,f,g){if(b.enablePinning=void 0===b.enablePinning?g.enablePinning:b.enablePinning,b.pinnedLeft?(f.renderContainer="left",f.grid.createLeftContainer()):b.pinnedRight&&(f.renderContainer="right",f.grid.createRightContainer()),b.enablePinning){var h={name:"ui.grid.pinning.pinLeft",title:c.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.LEFT)}},i={name:"ui.grid.pinning.pinRight",title:c.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.RIGHT)}},j={name:"ui.grid.pinning.unpin",title:c.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return"undefined"!=typeof this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.UNPIN)}};a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinLeft")||f.menuItems.push(h),a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinRight")||f.menuItems.push(i),a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.unpin")||f.menuItems.push(j)}},pinColumn:function(a,b,c){c===d.container.NONE?b.renderContainer=null:(b.renderContainer=c,c===d.container.LEFT?a.createLeftContainer():c===d.container.RIGHT&&a.createRightContainer()),a.refresh().then(function(){a.api.pinning.raise.columnPinned(b.colDef,c)})}};return e}]),a.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(a,b){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.resizeColumns",["ui.grid"]);a.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(a,b,c){var d={defaultGridOptions:function(a){a.enableColumnResizing=a.enableColumnResizing!==!1,a.enableColumnResize===!1&&(a.enableColumnResizing=!1)},colResizerColumnBuilder:function(a,c,d){var e=[];return a.enableColumnResizing=void 0===a.enableColumnResizing?d.enableColumnResizing:a.enableColumnResizing,a.enableColumnResize===!1&&(a.enableColumnResizing=!1),b.all(e)},registerPublicApi:function(a){var b={events:{colResizable:{columnSizeChanged:function(a,b){}}}};a.api.registerEventsFromObject(b.events)},fireColumnSizeChanged:function(b,d,e){c(function(){b.api.colResizable?b.api.colResizable.raise.columnSizeChanged(d,e):a.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(a,b,c){var d=a.getRenderContainer();if("left"===b){var e=d.visibleColumnCache.indexOf(a);return d.visibleColumnCache[e-1*c]}return a}};return d}]),a.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.defaultGridOptions(e.grid.options),e.grid.registerColumnBuilder(b.colResizerColumnBuilder),b.registerPublicApi(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,d,h,i){var j=i.grid;if(j.options.enableColumnResizing){var k=b.get("ui-grid/columnResizer"),l=1;j.isRTL()&&(a.position="left",l=-1);var m=function(){for(var b=d[0].getElementsByClassName("ui-grid-column-resizer"),f=0;f<b.length;f++)angular.element(b[f]).remove();var g=e.findTargetCol(a.col,"left",l),h=a.col.getRenderContainer();if(g&&0!==h.visibleColumnCache.indexOf(a.col)&&g.colDef.enableColumnResizing!==!1){var i=angular.element(k).clone();i.attr("position","left"),d.prepend(i),c(i)(a)}if(a.col.colDef.enableColumnResizing!==!1){var j=angular.element(k).clone();j.attr("position","right"),d.append(j),c(j)(a)}};m();var n=function(){g(m)},o=j.registerDataChangeCallback(n,[f.dataChange.COLUMN]);a.$on("$destroy",o)}}}}}}]),a.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(a,b,c,d){var e=angular.element('<div class="ui-grid-resize-overlay"></div>'),f={priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(f,g,h,i){function j(a){i.grid.refreshCanvas(!0).then(function(){i.grid.queueGridRefresh()})}function k(a,b){var c=b;return a.minWidth&&c<a.minWidth?c=a.minWidth:a.maxWidth&&c>a.maxWidth&&(c=a.maxWidth),c}function l(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),o=(a.targetTouches?a.targetTouches[0]:a).clientX-p,0>o?o=0:o>i.grid.gridWidth&&(o=i.grid.gridWidth);var g=d.findTargetCol(f.col,f.position,q);if(g.colDef.enableColumnResizing!==!1){i.grid.element.hasClass("column-resizing")||i.grid.element.addClass("column-resizing");var h=o-n,j=parseInt(g.drawnWidth+h*q,10);o+=(k(g,j)-j)*q,e.css({left:o+"px"}),i.fireEvent(c.events.ITEM_DRAGGING)}}function m(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),i.grid.element.removeClass("column-resizing"),e.remove(),o=(a.changedTouches?a.changedTouches[0]:a).clientX-p;var c=o-n;if(0===c)return t(),void s();var g=d.findTargetCol(f.col,f.position,q);if(g.colDef.enableColumnResizing!==!1){var h=parseInt(g.drawnWidth+c*q,10);g.width=k(g,h),g.hasCustomWidth=!0,j(c),d.fireColumnSizeChanged(i.grid,g.colDef,c),t(),s()}}var n=0,o=0,p=0,q=1;i.grid.isRTL()&&(f.position="left",q=-1),"left"===f.position?g.addClass("left"):"right"===f.position&&g.addClass("right");var r=function(b,c){b.originalEvent&&(b=b.originalEvent),b.stopPropagation(),p=i.grid.element[0].getBoundingClientRect().left,n=(b.targetTouches?b.targetTouches[0]:b).clientX-p,i.grid.element.append(e),e.css({left:n}),"touchstart"===b.type?(a.on("touchend",m),a.on("touchmove",l),g.off("mousedown",r)):(a.on("mouseup",m),a.on("mousemove",l),g.off("touchstart",r))},s=function(){g.on("mousedown",r),g.on("touchstart",r)},t=function(){a.off("mouseup",m),a.off("touchend",m),a.off("mousemove",l),a.off("touchmove",l),g.off("mousedown",r),g.off("touchstart",r)};s();var u=function(a,e){a.stopPropagation();var h=d.findTargetCol(f.col,f.position,q);if(h.colDef.enableColumnResizing!==!1){var l=0,m=0,n=b.closestElm(g,".ui-grid-render-container"),o=n.querySelectorAll("."+c.COL_CLASS_PREFIX+h.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(o,function(a){var c;angular.element(a).parent().hasClass("ui-grid-header-cell")&&(c=angular.element(a).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),b.fakeElement(a,{},function(a){var d=angular.element(a);d.attr("style","float: left");var e=b.elementWidth(d);if(c){var f=b.elementWidth(c);e+=f}e>l&&(l=e,m=l-e)})}),h.width=k(h,l),h.hasCustomWidth=!0,j(m),d.fireColumnSizeChanged(i.grid,h.colDef,m)}};g.on("dblclick",u),g.on("$destroy",function(){g.off("dblclick",u),t()})}};return f}])}(),function(){"use strict";var a=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);a.constant("uiGridRowEditConstants",{}),a.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(a,b,c,d,e){var f={initializeGrid:function(a,b){b.rowEdit={};var c={events:{rowEdit:{saveRow:function(a){}}},methods:{rowEdit:{setSavePromise:function(a,c){f.setSavePromise(b,a,c)},getDirtyRows:function(){return b.rowEdit.dirtyRows?b.rowEdit.dirtyRows:[]},getErrorRows:function(){return b.rowEdit.errorRows?b.rowEdit.errorRows:[]},flushDirtyRows:function(){return f.flushDirtyRows(b)},setRowsDirty:function(a){f.setRowsDirty(b,a)},setRowsClean:function(a){f.setRowsClean(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.api.core.on.renderingComplete(a,function(c){b.api.edit.on.afterCellEdit(a,f.endEditCell),b.api.edit.on.beginCellEdit(a,f.beginEditCell),b.api.edit.on.cancelCellEdit(a,f.cancelEditCell),b.api.cellNav&&b.api.cellNav.on.navigate(a,f.navigate)})},defaultGridOptions:function(a){},saveRow:function(a,b){var c=this;return function(){if(b.isSaving=!0,b.rowEditSavePromise)return b.rowEditSavePromise;var d=a.api.rowEdit.raise.saveRow(b.entity);return b.rowEditSavePromise?b.rowEditSavePromise.then(c.processSuccessPromise(a,b),c.processErrorPromise(a,b)):e.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),d}},setSavePromise:function(a,b,c){var d=a.getRow(b);d.rowEditSavePromise=c},processSuccessPromise:function(a,b){var c=this;return function(){delete b.isSaving,delete b.isDirty,delete b.isError,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,c.removeRow(a.rowEdit.errorRows,b),c.removeRow(a.rowEdit.dirtyRows,b)}},processErrorPromise:function(a,b){return function(){delete b.isSaving,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,b.isError=!0,a.rowEdit.errorRows||(a.rowEdit.errorRows=[]),f.isRowPresent(a.rowEdit.errorRows,b)||a.rowEdit.errorRows.push(b)}},removeRow:function(a,b){"undefined"!=typeof a&&null!==a&&a.forEach(function(c,d){c.uid===b.uid&&a.splice(d,1)})},isRowPresent:function(a,b){var c=!1;return a.forEach(function(a,d){a.uid===b.uid&&(c=!0)}),c},flushDirtyRows:function(a){var c=[];return a.api.rowEdit.getDirtyRows().forEach(function(b){f.saveRow(a,b)(),c.push(b.rowEditSavePromise)}),b.all(c)},endEditCell:function(a,b,c,d){var g=this.grid,h=g.getRow(a);return h?void((c!==d||h.isDirty)&&(g.rowEdit.dirtyRows||(g.rowEdit.dirtyRows=[]),h.isDirty||(h.isDirty=!0,g.rowEdit.dirtyRows.push(h)),delete h.isError,f.considerSetTimer(g,h))):void e.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.cancelTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.considerSetTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(a,b){var c=this.grid;a.row.rowEditSaveTimer&&f.cancelTimer(c,a.row),b&&b.row&&b.row!==a.row&&f.considerSetTimer(c,b.row)},considerSetTimer:function(b,c){if(f.cancelTimer(b,c),c.isDirty&&!c.isSaving&&-1!==b.options.rowEditWaitInterval){var d=b.options.rowEditWaitInterval?b.options.rowEditWaitInterval:2e3;c.rowEditSaveTimer=a(f.saveRow(b,c),d,1)}},cancelTimer:function(b,c){c.rowEditSaveTimer&&!c.isSaving&&(a.cancel(c.rowEditSaveTimer),delete c.rowEditSaveTimer)},setRowsDirty:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),c.isDirty||(c.isDirty=!0,a.rowEdit.dirtyRows.push(c)),delete c.isError,f.considerSetTimer(a,c)):e.logError("requested row not found in rowEdit.setRowsDirty, row was: "+b)})},setRowsClean:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(delete c.isDirty,f.removeRow(a.rowEdit.dirtyRows,c),f.cancelTimer(a,c),delete c.isError,f.removeRow(a.rowEdit.errorRows,c)):e.logError("requested row not found in rowEdit.setRowsClean, row was: "+b)})}};return f}]),a.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(a,b,c,d){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);a.constant("uiGridSaveStateConstants",{featureName:"saveState"}),a.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(a,b,c,d,e,f){var g={initializeGrid:function(a){a.saveState={},this.defaultGridOptions(a.options);var b={events:{saveState:{}},methods:{saveState:{save:function(){return g.save(a)},restore:function(b,c){g.restore(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.saveWidths=a.saveWidths!==!1,a.saveOrder=a.saveOrder!==!1,a.saveScroll=a.saveScroll===!0,a.saveFocus=a.saveScroll!==!0&&a.saveFocus!==!1,a.saveVisible=a.saveVisible!==!1,a.saveSort=a.saveSort!==!1,a.saveFilter=a.saveFilter!==!1,a.saveSelection=a.saveSelection!==!1,a.saveGrouping=a.saveGrouping!==!1,a.saveGroupingExpandedStates=a.saveGroupingExpandedStates===!0,a.savePinning=a.savePinning!==!1,a.saveTreeView=a.saveTreeView!==!1},save:function(a){var b={};return b.columns=g.saveColumns(a),b.scrollFocus=g.saveScrollFocus(a),b.selection=g.saveSelection(a),b.grouping=g.saveGrouping(a),b.treeView=g.saveTreeView(a),b},restore:function(a,b,c){c.columns&&g.restoreColumns(a,c.columns),c.scrollFocus&&g.restoreScrollFocus(a,b,c.scrollFocus),c.selection&&g.restoreSelection(a,c.selection),c.grouping&&g.restoreGrouping(a,c.grouping),c.treeView&&g.restoreTreeView(a,c.treeView),a.refresh()},saveColumns:function(a){var b=[];return a.getOnlyDataColumns().forEach(function(c){var d={};d.name=c.name,a.options.saveVisible&&(d.visible=c.visible),a.options.saveWidths&&(d.width=c.width),a.options.saveSort&&(d.sort=angular.copy(c.sort)),a.options.saveFilter&&(d.filters=[],c.filters.forEach(function(a){var b={};angular.forEach(a,function(a,c){"condition"!==c&&"$$hashKey"!==c&&"placeholder"!==c&&(b[c]=a)}),d.filters.push(b)})),a.api.pinning&&a.options.savePinning&&(d.pinned=c.renderContainer?c.renderContainer:""),b.push(d)}),b},saveScrollFocus:function(a){if(!a.api.cellNav)return{};var b={};if(a.options.saveFocus){b.focus=!0;var c=a.api.cellNav.getFocusedCell();null!==c&&(null!==c.col&&(b.colName=c.col.colDef.name),null!==c.row&&(b.rowVal=g.getRowVal(a,c.row)))}return(a.options.saveScroll||a.options.saveFocus&&!b.colName&&!b.rowVal)&&(b.focus=!1,a.renderContainers.body.prevRowScrollIndex&&(b.rowVal=g.getRowVal(a,a.renderContainers.body.visibleRowCache[a.renderContainers.body.prevRowScrollIndex])),a.renderContainers.body.prevColScrollIndex&&(b.colName=a.renderContainers.body.visibleColumnCache[a.renderContainers.body.prevColScrollIndex].name)),b},saveSelection:function(a){if(!a.api.selection||!a.options.saveSelection)return[];var b=a.api.selection.getSelectedGridRows().map(function(b){return g.getRowVal(a,b)});return b},saveGrouping:function(a){return a.api.grouping&&a.options.saveGrouping?a.api.grouping.getGrouping(a.options.saveGroupingExpandedStates):{}},saveTreeView:function(a){return a.api.treeView&&a.options.saveTreeView?a.api.treeView.getTreeView():{}},getRowVal:function(a,b){if(!b)return null;var c={};return a.options.saveRowIdentity?(c.identity=!0,c.row=a.options.saveRowIdentity(b.entity)):(c.identity=!1,c.row=a.renderContainers.body.visibleRowCache.indexOf(b)),c},restoreColumns:function(a,b){var c=!1;b.forEach(function(b,d){var e=a.getColumn(b.name);if(e&&!a.isRowHeaderColumn(e)){!a.options.saveVisible||e.visible===b.visible&&e.colDef.visible===b.visible||(e.visible=b.visible,e.colDef.visible=b.visible,a.api.core.raise.columnVisibilityChanged(e)),a.options.saveWidths&&(e.width=b.width),!a.options.saveSort||angular.equals(e.sort,b.sort)||void 0===e.sort&&angular.isEmpty(b.sort)||(e.sort=angular.copy(b.sort),c=!0),a.options.saveFilter&&!angular.equals(e.filters,b.filters)&&(b.filters.forEach(function(a,b){angular.extend(e.filters[b],a),("undefined"==typeof a.term||null===a.term)&&delete e.filters[b].term}),a.api.core.raise.filterChanged()),a.api.pinning&&a.options.savePinning&&e.renderContainer!==b.pinned&&a.api.pinning.pinColumn(e,b.pinned);var f=a.getOnlyDataColumns().indexOf(e);if(-1!==f&&a.options.saveOrder&&f!==d){var g=a.columns.splice(f+a.rowHeaderColumns.length,1)[0];a.columns.splice(d+a.rowHeaderColumns.length,0,g)}}}),c&&a.api.core.raise.sortChanged(a,a.getColumnSorting())},restoreScrollFocus:function(a,b,c){if(a.api.cellNav){var d,e;if(c.colName){var f=a.options.columnDefs.filter(function(a){return a.name===c.colName});f.length>0&&(d=f[0])}c.rowVal&&c.rowVal.row&&(e=c.rowVal.identity?g.findRowByIdentity(a,c.rowVal):a.renderContainers.body.visibleRowCache[c.rowVal.row]);var h=e&&e.entity?e.entity:null;(d||h)&&(c.focus?a.api.cellNav.scrollToFocus(h,d):a.scrollTo(h,d))}},restoreSelection:function(a,b){a.api.selection&&(a.api.selection.clearSelectedRows(),b.forEach(function(b){if(b.identity){var c=g.findRowByIdentity(a,b);c&&a.api.selection.selectRow(c.entity)}else a.api.selection.selectRowByVisibleIndex(b.row)}))},restoreGrouping:function(a,b){a.api.grouping&&"undefined"!=typeof b&&null!==b&&!angular.equals(b,{})&&a.api.grouping.setGrouping(b)},restoreTreeView:function(a,b){a.api.treeView&&"undefined"!=typeof b&&null!==b&&!angular.equals(b,{})&&a.api.treeView.setTreeView(b)},findRowByIdentity:function(a,b){if(!a.options.saveRowIdentity)return null;var c=a.rows.filter(function(c){return a.options.saveRowIdentity(c.entity)===b.row?!0:!1});return c.length>0?c[0]:null}};return g}]),a.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.selection",["ui.grid"]);a.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(a){a.decorator("GridRow",["$delegate",function(a){return a.prototype.setSelected=function(a){this.isSelected=a,a?this.grid.selection.selectedCount++:this.grid.selection.selectedCount--},a}])}]),a.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(a,b,c,d){var e={initializeGrid:function(a){a.selection={},a.selection.lastSelectedRow=null,a.selection.selectAll=!1,a.selection.selectedCount=0,e.defaultGridOptions(a.options);var b={events:{selection:{rowSelectionChanged:function(a,b,c){},rowSelectionChangedBatch:function(a,b,c){}}},methods:{selection:{toggleRowSelection:function(b,c){var d=a.getRow(b);null!==d&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRow:function(b,c){var d=a.getRow(b);null===d||d.isSelected||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRowByVisibleIndex:function(b,c){var d=a.renderContainers.body.visibleRowCache[b];null===d||"undefined"==typeof d||d.isSelected||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect);
},unSelectRow:function(b,c){var d=a.getRow(b);null!==d&&d.isSelected&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectAllRows:function(b){if(a.options.multiSelect!==!1){var c=[];a.rows.forEach(function(d){d.isSelected||d.enableSelection===!1||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},selectAllVisibleRows:function(b){if(a.options.multiSelect!==!1){var c=[];a.rows.forEach(function(d){d.visible?d.isSelected||d.enableSelection===!1||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b)):d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},clearSelectedRows:function(b){e.clearSelectedRows(a,b)},getSelectedRows:function(){return e.getSelectedRows(a).map(function(a){return a.entity})},getSelectedGridRows:function(){return e.getSelectedRows(a)},setMultiSelect:function(b){a.options.multiSelect=b},setModifierKeysToMultiSelect:function(b){a.options.modifierKeysToMultiSelect=b},getSelectAllState:function(){return a.selection.selectAll}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enableRowSelection=a.enableRowSelection!==!1,a.multiSelect=a.multiSelect!==!1,a.noUnselect=a.noUnselect===!0,a.modifierKeysToMultiSelect=a.modifierKeysToMultiSelect===!0,a.enableRowHeaderSelection=a.enableRowHeaderSelection!==!1,"undefined"==typeof a.enableFullRowSelection&&(a.enableFullRowSelection=!a.enableRowHeaderSelection),a.enableSelectAll=a.enableSelectAll!==!1,a.enableSelectionBatchEvent=a.enableSelectionBatchEvent!==!1,a.selectionRowHeaderWidth=angular.isDefined(a.selectionRowHeaderWidth)?a.selectionRowHeaderWidth:30,a.enableFooterTotalSelected=a.enableFooterTotalSelected!==!1,a.isRowSelectable=angular.isDefined(a.isRowSelectable)?a.isRowSelectable:angular.noop},toggleRowSelection:function(a,b,c,d,f){var g=b.isSelected;if(b.enableSelection!==!1||g){var h;d||g?!d&&g&&(h=e.getSelectedRows(a),h.length>1&&(g=!1,e.clearSelectedRows(a,c))):e.clearSelectedRows(a,c),g&&f||(b.setSelected(!g),b.isSelected===!0&&(a.selection.lastSelectedRow=b),h=e.getSelectedRows(a),a.selection.selectAll=a.rows.length===h.length,a.api.selection.raise.rowSelectionChanged(b,c))}},shiftSelect:function(a,b,c,d){if(d){var f=e.getSelectedRows(a),g=f.length>0?a.renderContainers.body.visibleRowCache.indexOf(a.selection.lastSelectedRow):0,h=a.renderContainers.body.visibleRowCache.indexOf(b);if(g>h){var i=g;g=h,h=i}for(var j=[],k=g;h>=k;k++){var l=a.renderContainers.body.visibleRowCache[k];l&&(l.isSelected||l.enableSelection===!1||(l.setSelected(!0),a.selection.lastSelectedRow=l,e.decideRaiseSelectionEvent(a,l,j,c)))}e.decideRaiseSelectionBatchEvent(a,j,c)}},getSelectedRows:function(a){return a.rows.filter(function(a){return a.isSelected})},clearSelectedRows:function(a,b){var c=[];e.getSelectedRows(a).forEach(function(d){d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!1,a.selection.selectedCount=0},decideRaiseSelectionEvent:function(a,b,c,d){a.options.enableSelectionBatchEvent?c.push(b):a.api.selection.raise.rowSelectionChanged(b,d)},decideRaiseSelectionBatchEvent:function(a,b,c){b.length>0&&a.api.selection.raise.rowSelectionChangedBatch(b,c)}};return e}]),a.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,e,f,g){if(b.initializeGrid(g.grid),g.grid.options.enableRowHeaderSelection){var h={name:a.selectionRowHeaderColName,displayName:"",width:g.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};g.grid.addRowHeaderColumn(h)}var i=!1,j=function(a){return a.forEach(function(a){a.enableSelection=g.grid.options.isRowSelectable(a)}),a},k=function(){g.grid.options.isRowSelectable!==angular.noop&&i!==!0&&(g.grid.registerRowsProcessor(j,500),i=!0)};k();var l=g.grid.registerDataChangeCallback(k,[d.dataChange.OPTIONS]);c.$on("$destroy",l)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(a,b,c){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,d,e,f){function g(a,c){c.stopPropagation(),c.shiftKey?b.shiftSelect(i,a,c,i.options.multiSelect):c.ctrlKey||c.metaKey?b.toggleRowSelection(i,a,c,i.options.multiSelect,i.options.noUnselect):b.toggleRowSelection(i,a,c,i.options.multiSelect&&!i.options.modifierKeysToMultiSelect,i.options.noUnselect)}function h(a){(a.ctrlKey||a.shiftKey)&&(a.target.onselectstart=function(){return!1},window.setTimeout(function(){a.target.onselectstart=null},0))}var i=f.grid;a.selectButtonClick=g,"ie"===c.detectBrowser()&&d.on("mousedown",h)}}}]),a.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.selection.selectAll?(b.clearSelectedRows(f,c),f.options.noUnselect&&f.api.selection.selectRowByVisibleIndex(0,c),f.selection.selectAll=!1):f.options.multiSelect&&(f.api.selection.selectAllVisibleRows(c),f.selection.selectAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(a,b,c,d,e,f){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}]),a.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function(a,b,c,d,e,f,g){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(a,c,d,e){function h(){a.grid.options.enableRowSelection&&a.grid.options.enableFullRowSelection&&(c.addClass("ui-grid-disable-selection"),c.on("touchstart",m),c.on("touchend",n),c.on("click",l),a.registered=!0)}function i(){a.registered&&(c.removeClass("ui-grid-disable-selection"),c.off("touchstart",m),c.off("touchend",n),c.off("click",l),a.registered=!1)}var j=0,k=300;e.grid.api.cellNav&&e.grid.api.cellNav.on.viewPortKeyDown(a,function(b,c){null!==c&&c.row===a.row&&c.col===a.col&&32===b.keyCode&&"selectionRowHeaderCol"===a.col.colDef.name&&(f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply())});var l=function(b){c.off("touchend",n),b.shiftKey?f.shiftSelect(a.grid,a.row,b,a.grid.options.multiSelect):b.ctrlKey||b.metaKey?f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect,a.grid.options.noUnselect):f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply(),g(function(){c.on("touchend",n)},k)},m=function(a){j=(new Date).getTime(),c.off("click",l)},n=function(a){var b=(new Date).getTime(),d=b-j;k>d&&l(a),g(function(){c.on("click",l)},k)};h();var o=a.grid.registerDataChangeCallback(function(){a.grid.options.enableRowSelection&&a.grid.options.enableFullRowSelection&&!a.registered?h():a.grid.options.enableRowSelection&&a.grid.options.enableFullRowSelection||!a.registered||i()},[b.dataChange.OPTIONS]);c.on("$destroy",o)}}}]),a.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(a,b,c){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(b,d){return{pre:function(b,d,e,f){f.grid.options.showGridFooter&&c.getTemplate("ui-grid/gridFooterSelectedItems").then(function(c){var e=angular.element(c),f=a(e)(b);angular.element(d[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.treeBase",["ui.grid"]);a.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){a.treeBase={},a.treeBase.numberLevels=0,a.treeBase.expandAll=!1,a.treeBase.tree={},i.defaultGridOptions(a.options),a.registerRowsProcessor(i.treeRows,410),a.registerColumnBuilder(i.treeBaseColumnBuilder),i.createRowHeader(a);var c={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){i.expandAllRows(a)},collapseAllRows:function(){i.collapseAllRows(a)},toggleRowTreeState:function(b){i.toggleRowTreeState(a,b)},expandRow:function(b){i.expandRow(a,b)},expandRowChildren:function(b){i.expandRowChildren(a,b)},collapseRow:function(b){i.collapseRow(a,b)},collapseRowChildren:function(b){i.collapseRowChildren(a,b)},getTreeExpandedState:function(){return{expandedState:i.getTreeState(a)}},setTreeState:function(b){i.setTreeState(a,b)},getRowChildren:function(a){return a.treeNode.children.map(function(a){return a.row})}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.treeRowHeaderBaseWidth=a.treeRowHeaderBaseWidth||30,a.treeIndent=a.treeIndent||10,a.showTreeRowHeader=a.showTreeRowHeader!==!1,a.showTreeExpandNoChildren=a.showTreeExpandNoChildren!==!1,a.treeRowHeaderAlwaysVisible=a.treeRowHeaderAlwaysVisible!==!1,a.treeCustomAggregations=a.treeCustomAggregations||{}},treeBaseColumnBuilder:function(a,b,c){"undefined"!=typeof a.customTreeAggregationFn&&(b.treeAggregationFn=a.customTreeAggregationFn),"undefined"!=typeof a.treeAggregationType&&(b.treeAggregation={type:a.treeAggregationType},"undefined"!=typeof c.treeCustomAggregations[a.treeAggregationType]?(b.treeAggregationFn=c.treeCustomAggregations[a.treeAggregationType].aggregationFn,b.treeAggregationFinalizerFn=c.treeCustomAggregations[a.treeAggregationType].finalizerFn,b.treeAggregation.label=c.treeCustomAggregations[a.treeAggregationType].label):"undefined"!=typeof i.nativeAggregations()[a.treeAggregationType]&&(b.treeAggregationFn=i.nativeAggregations()[a.treeAggregationType].aggregationFn,b.treeAggregation.label=i.nativeAggregations()[a.treeAggregationType].label)),"undefined"!=typeof a.treeAggregationLabel&&("undefined"==typeof b.treeAggregation&&(b.treeAggregation={}),b.treeAggregation.label=a.treeAggregationLabel),b.treeAggregationUpdateEntity=a.treeAggregationUpdateEntity!==!1,"undefined"==typeof b.customTreeAggregationFinalizerFn&&(b.customTreeAggregationFinalizerFn=a.customTreeAggregationFinalizerFn)},createRowHeader:function(a){var c={name:b.rowHeaderColName,displayName:"",width:a.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};c.visible=a.options.treeRowHeaderAlwaysVisible,a.addRowHeaderColumn(c)},expandAllRows:function(a){a.treeBase.tree.forEach(function(c){i.setAllNodes(a,c,b.EXPANDED)}),a.treeBase.expandAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.treeBase.tree.forEach(function(c){i.setAllNodes(a,c,b.COLLAPSED)}),a.treeBase.expandAll=!1,a.queueGridRefresh()},setAllNodes:function(a,c,d){"undefined"!=typeof c.state&&c.state!==d&&(c.state=d,d===b.EXPANDED?a.api.treeBase.raise.rowExpanded(c.row):a.api.treeBase.raise.rowCollapsed(c.row)),c.children&&c.children.forEach(function(b){i.setAllNodes(a,b,d)})},toggleRowTreeState:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||(c.treeNode.state===b.EXPANDED?i.collapseRow(a,c):i.expandRow(a,c),a.queueGridRefresh())},expandRow:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||c.treeNode.state!==b.EXPANDED&&(c.treeNode.state=b.EXPANDED,a.api.treeBase.raise.rowExpanded(c),a.treeBase.expandAll=i.allExpanded(a.treeBase.tree),a.queueGridRefresh())},expandRowChildren:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||(i.setAllNodes(a,c.treeNode,b.EXPANDED),a.treeBase.expandAll=i.allExpanded(a.treeBase.tree),a.queueGridRefresh())},collapseRow:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||c.treeNode.state!==b.COLLAPSED&&(c.treeNode.state=b.COLLAPSED,a.treeBase.expandAll=!1,a.api.treeBase.raise.rowCollapsed(c),a.queueGridRefresh())},collapseRowChildren:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||(i.setAllNodes(a,c.treeNode,b.COLLAPSED),a.treeBase.expandAll=!1,a.queueGridRefresh())},allExpanded:function(a){var b=!0;return a.forEach(function(a){i.allExpandedInternal(a)||(b=!1)}),b},allExpandedInternal:function(a){if(a.children&&a.children.length>0){if(a.state===b.COLLAPSED)return!1;var c=!0;return a.children.forEach(function(a){i.allExpandedInternal(a)||(c=!1)}),c}return!0},treeRows:function(a){if(0===a.length)return a;var c=this;return b.EXPANDED,c.treeBase.tree=i.createTree(c,a),i.updateRowHeaderWidth(c),i.sortTree(c),i.fixFilter(c),i.renderTree(c.treeBase.tree)},updateRowHeaderWidth:function(a){var c=a.getColumn(b.rowHeaderColName),d=a.options.treeRowHeaderBaseWidth+a.options.treeIndent*Math.max(a.treeBase.numberLevels-1,0);c&&d!==c.width&&(c.width=d,a.queueRefresh());var e=!0;a.options.showTreeRowHeader===!1&&(e=!1),a.options.treeRowHeaderAlwaysVisible===!1&&a.treeBase.numberLevels<=0&&(e=!1),c.visible!==e&&(c.visible=e,c.colDef.visible=e,a.queueGridRefresh())},renderTree:function(a){var c=[];return a.forEach(function(a){a.row.visible&&c.push(a.row),a.state===b.EXPANDED&&a.children&&a.children.length>0&&(c=c.concat(i.renderTree(a.children)))}),c},createTree:function(a,c){var d,e=-1,f=[];a.treeBase.tree=[],a.treeBase.numberLevels=0;var g=i.getAggregations(a),h=function(c){if("undefined"!=typeof c.entity.$$treeLevel&&c.treeLevel!==c.entity.$$treeLevel&&(c.treeLevel=c.entity.$$treeLevel),c.treeLevel<=e){for(;c.treeLevel<=e;){var h=f.pop();i.finaliseAggregations(h),e--}d=f.length>0?i.setCurrentState(f):b.EXPANDED}("undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0)&&c.visible&&i.aggregate(a,c,f),i.addOrUseNode(a,c,f,g),"undefined"!=typeof c.treeLevel&&null!==c.treeLevel&&c.treeLevel>=0&&(f.push(c),e++,d=i.setCurrentState(f)),a.treeBase.numberLevels<c.treeLevel+1&&(a.treeBase.numberLevels=c.treeLevel+1)};for(c.forEach(h);f.length>0;){var j=f.pop();i.finaliseAggregations(j)}return a.treeBase.tree},addOrUseNode:function(a,c,d,e){var f=[];e.forEach(function(a){f.push(i.buildAggregationObject(a.col))});var g={state:b.COLLAPSED,row:c,parentRow:null,aggregations:f,children:[]};c.treeNode&&(g.state=c.treeNode.state),d.length>0&&(g.parentRow=d[d.length-1]),c.treeNode=g,0===d.length?a.treeBase.tree.push(g):d[d.length-1].treeNode.children.push(g)},setCurrentState:function(a){var c=b.EXPANDED;return a.forEach(function(a){a.treeNode.state===b.COLLAPSED&&(c=b.COLLAPSED)}),c},sortTree:function(a){a.columns.forEach(function(a){a.sort&&a.sort.ignoreSort&&delete a.sort.ignoreSort}),a.treeBase.tree=i.sortInternal(a,a.treeBase.tree)},sortInternal:function(a,c){var d=c.map(function(a){return a.row});d=h.sort(a,d,a.columns);var e=d.map(function(a){return a.treeNode});return e.forEach(function(c){c.state===b.EXPANDED&&c.children&&c.children.length>0&&(c.children=i.sortInternal(a,c.children))}),e},fixFilter:function(a){var b;a.treeBase.tree.forEach(function(a){a.children&&a.children.length>0&&(b=a.row.visible,i.fixFilterInternal(a.children,b))})},fixFilterInternal:function(a,b){return a.forEach(function(a){a.row.visible&&!b&&(i.setParentsVisible(a),b=!0),a.children&&a.children.length>0&&i.fixFilterInternal(a.children,b&&a.row.visible)&&(b=!0)}),b},setParentsVisible:function(a){for(;a.parentRow;)a.parentRow.visible=!0,a=a.parentRow.treeNode},buildAggregationObject:function(a){var b={col:a};return a.treeAggregation&&a.treeAggregation.type&&(b.type=a.treeAggregation.type),a.treeAggregation&&a.treeAggregation.label&&(b.label=a.treeAggregation.label),b},getAggregations:function(a){var b=[];return a.columns.forEach(function(c){"undefined"!=typeof c.treeAggregationFn&&(b.push(i.buildAggregationObject(c)),a.options.showColumnFooter&&"undefined"==typeof c.colDef.aggregationType&&c.treeAggregation&&(c.treeFooterAggregation=i.buildAggregationObject(c),c.aggregationType=i.treeFooterAggregationType))}),b},aggregate:function(a,b,c){0===c.length&&b.treeNode&&b.treeNode.aggregations&&b.treeNode.aggregations.forEach(function(c){if("undefined"!=typeof c.col.treeFooterAggregation){var d=a.getCellValue(b,c.col),e=Number(d);c.col.treeAggregationFn(c.col.treeFooterAggregation,d,e,b)}}),c.forEach(function(c,d){c.treeNode.aggregations&&c.treeNode.aggregations.forEach(function(c){var e=a.getCellValue(b,c.col),f=Number(e);c.col.treeAggregationFn(c,e,f,b),0===d&&"undefined"!=typeof c.col.treeFooterAggregation&&c.col.treeAggregationFn(c.col.treeFooterAggregation,e,f,b)})})},nativeAggregations:function(){var a={count:{label:f.get().aggregation.count,menuTitle:f.get().grouping.aggregate_count,aggregationFn:function(a,b,c){"undefined"==typeof a.value?a.value=1:a.value++}},sum:{label:f.get().aggregation.sum,menuTitle:f.get().grouping.aggregate_sum,aggregationFn:function(a,b,c){isNaN(c)||("undefined"==typeof a.value?a.value=c:a.value+=c)}},min:{label:f.get().aggregation.min,menuTitle:f.get().grouping.aggregate_min,aggregationFn:function(a,b,c){"undefined"==typeof a.value?a.value=b:"undefined"!=typeof b&&null!==b&&(b<a.value||null===a.value)&&(a.value=b)}},max:{label:f.get().aggregation.max,menuTitle:f.get().grouping.aggregate_max,aggregationFn:function(a,b,c){"undefined"==typeof a.value?a.value=b:"undefined"!=typeof b&&null!==b&&(b>a.value||null===a.value)&&(a.value=b)}},avg:{label:f.get().aggregation.avg,menuTitle:f.get().grouping.aggregate_avg,aggregationFn:function(a,b,c){"undefined"==typeof a.count?a.count=1:a.count++,isNaN(c)||("undefined"==typeof a.value||"undefined"==typeof a.sum?(a.value=c,a.sum=c):(a.sum+=c,a.value=a.sum/a.count))}}};return a},finaliseAggregation:function(a,b){b.col.treeAggregationUpdateEntity&&"undefined"!=typeof a&&"undefined"!=typeof a.entity["$$"+b.col.uid]&&angular.extend(b,a.entity["$$"+b.col.uid]),"function"==typeof b.col.treeAggregationFinalizerFn&&b.col.treeAggregationFinalizerFn(b),"function"==typeof b.col.customTreeAggregationFinalizerFn&&b.col.customTreeAggregationFinalizerFn(b),"undefined"==typeof b.rendered&&(b.rendered=b.label?b.label+b.value:b.value)},finaliseAggregations:function(a){"undefined"!=typeof a.treeNode.aggregations&&a.treeNode.aggregations.forEach(function(b){if(i.finaliseAggregation(a,b),b.col.treeAggregationUpdateEntity){var c={};angular.forEach(b,function(a,d){b.hasOwnProperty(d)&&"col"!==d&&(c[d]=a)}),a.entity["$$"+b.col.uid]=c}})},treeFooterAggregationType:function(a,b){return i.finaliseAggregation(void 0,b.treeFooterAggregation),"undefined"==typeof b.treeFooterAggregation.value||null===b.treeFooterAggregation.rendered?"":b.treeFooterAggregation.rendered}};return i}]),a.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.treeButtonClick=function(a,c){b.toggleRowTreeState(f,a,c)}}}}]),a.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.treeBase.expandAll?b.collapseAllRows(f,c):b.expandAllRows(f,c)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(a,b,c,d){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);a.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(a,b,c,d,e,f,g,h,i){var j={initializeGrid:function(a,b){d.initializeGrid(a,b),a.treeView={},a.registerRowsProcessor(j.adjustSorting,60);var c={events:{treeView:{}},methods:{treeView:{}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableTreeView=a.enableTreeView!==!1},adjustSorting:function(a){var b=this;return b.columns.forEach(function(a){a.sort&&(a.sort.ignoreSort=!0)}),a}};return j}]),a.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){e.grid.options.enableTreeView!==!1&&b.initializeGrid(e.grid,a)},post:function(a,b,c,d){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(a){"use strict";a.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),a.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row"><!-- tfooter --><div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),a.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),a.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header"><!-- theader --><div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),a.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),a.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),a.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid"><!-- TODO (c0bra): add "scoped" attr here, eventually? --><style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),a.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems"><!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --></div></div>'),a.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),a.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{col.sort.priority ? i18n.headerCell.priority + \' \' + col.sort.priority : null}}" aria-hidden="true"></i> <sub class="ui-grid-sort-priority-number">{{col.sort.priority}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),a.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><button type="button" ng-focus="focus=true" ng-blur="focus=false" class="ui-grid-menu-close-button" ng-class="{\'ui-grid-sr-only\': (!focus)}"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="i18n.close"></i></button><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),a.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ name }}</button>'),
a.put("ui-grid/uiGridRenderContainer","<div role=\"grid\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\"><!-- All of these dom elements are replaced in place --><div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),a.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()"><!-- tbody --><div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),a.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),a.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),a.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),a.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),a.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),a.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),a.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),a.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),a.put("ui-grid/pagination",'<div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div role="menubar" class="ui-grid-pager-control"><button type="button" role="menuitem" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div class="first-triangle"><div class="first-bar"></div></div></button> <button type="button" role="menuitem" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div class="first-triangle prev-triangle"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" role="menuitem" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div class="last-triangle next-triangle"></div></button> <button type="button" role="menuitem" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div class="last-triangle"><div class="last-bar"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{showingHigh}} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),a.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),a.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),a.put("ui-grid/selectionHeaderCell",'<div><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),a.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),a.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),a.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons></ui-grid-tree-base-expand-all-buttons></div></div>'),a.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),a.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>")}]),function(){function $websocketProvider(){var wsp=this;wsp.$$config={lazy:!1,reconnect:!0,reconnectInterval:2e3,mock:!1,enqueue:!1,protocols:null},wsp.$setup=function(cfg){return cfg=cfg||{},wsp.$$config=angular.extend({},wsp.$$config,cfg),wsp},wsp.$get=["$http",function($http){return new $websocketService(wsp.$$config,$http)}]}function $websocketService(cfg,$http){var wss=this;wss.$$websocketList={},wss.$$config=cfg||{},wss.$get=function(url){return wss.$$websocketList[url]},wss.$new=function(cfg){cfg=cfg||{},"string"==typeof cfg&&(cfg={url:cfg},arguments.length>1&&("string"==typeof arguments[1]&&arguments[1].length>0?cfg.protocols=[arguments[1]]:"object"==typeof arguments[1]&&arguments[1].length>0&&(cfg.protocols=arguments[1])));var ws=wss.$get(cfg.url);if("undefined"==typeof ws){var wsCfg=angular.extend({},wss.$$config,cfg);ws=new $websocket(wsCfg,$http),wss.$$websocketList[wsCfg.url]=ws}return ws}}function $websocket(cfg,$http){var me=this;if("undefined"==typeof cfg||"object"==typeof cfg&&"undefined"==typeof cfg.url)throw new Error("An url must be specified for WebSocket");return me.$$eventMap={},me.$$ws=void 0,me.$$reconnectTask=void 0,me.$$reconnectCopy=!0,me.$$queue=[],me.$$config={url:void 0,lazy:!1,reconnect:!0,reconnectInterval:2e3,enqueue:!1,mock:!1,protocols:null},me.$$fireEvent=function(){var args=[];Array.prototype.push.apply(args,arguments);var event=args.shift(),handlers=me.$$eventMap[event];if("undefined"!=typeof handlers)for(var i=0;i<handlers.length;i++)"function"==typeof handlers[i]&&handlers[i].apply(me,args)},me.$$init=function(cfg){return me.$$ws=cfg.mock?new $$mockWebsocket(cfg.mock,$http):new WebSocket(cfg.url,cfg.protocols),me.$$ws.onmessage=function(message){try{var decoded=JSON.parse(message.data);me.$$fireEvent(decoded.event,decoded.data),me.$$fireEvent("$message",decoded)}catch(err){me.$$fireEvent("$message",message.data)}},me.$$ws.onerror=function(error){me.$$fireEvent("$error",error)},me.$$ws.onopen=function(){if(me.$$reconnectTask&&(clearInterval(me.$$reconnectTask),delete me.$$reconnectTask),me.$$config.enqueue&&me.$$queue.length>0)for(;me.$$queue.length>0&&me.$ready();)me.$$send(me.$$queue.shift());me.$$fireEvent("$open")},me.$$ws.onclose=function(){me.$$config.reconnect&&(me.$$reconnectTask=setInterval(function(){me.$status()===me.$CLOSED&&me.$open()},me.$$config.reconnectInterval)),me.$$fireEvent("$close")},me},me.$CONNECTING=0,me.$OPEN=1,me.$CLOSING=2,me.$CLOSED=3,me.$on=function(){var handlers=[];Array.prototype.push.apply(handlers,arguments);var event=handlers.shift();if("string"!=typeof event||0===handlers.length)throw new Error("$on accept two parameters at least: a String and a Function or an array of Functions");me.$$eventMap[event]=me.$$eventMap[event]||[];for(var i=0;i<handlers.length;i++)me.$$eventMap[event].push(handlers[i]);return me},me.$un=function(event){if("string"!=typeof event)throw new Error("$un needs a String representing an event.");return"undefined"!=typeof me.$$eventMap[event]&&delete me.$$eventMap[event],me},me.$$send=function(message){me.$ready()?me.$$ws.send(JSON.stringify(message)):me.$$config.enqueue&&me.$$queue.push(message)},me.$emit=function(event,data){if("string"!=typeof event)throw new Error("$emit needs two parameter: a String and a Object or a String");var message={event:event,data:data};return me.$$send(message),me},me.$open=function(){return me.$$config.reconnect=me.$$reconnectCopy,me.$status()!==me.$OPEN&&me.$$init(me.$$config),me},me.$close=function(){return me.$status()!==me.$CLOSED&&me.$$ws.close(),me.$$reconnectTask&&(clearInterval(me.$$reconnectTask),delete me.$$reconnectTask),me.$$config.reconnect=!1,me},me.$status=function(){return"undefined"==typeof me.$$ws?me.$CLOSED:me.$$ws.readyState},me.$ready=function(){return me.$status()===me.$OPEN},me.$mockup=function(){return me.$$config.mock},me.$$config=angular.extend({},me.$$config,cfg),me.$$reconnectCopy=me.$$config.reconnect,me.$$config.lazy||me.$$init(me.$$config),me}function $$mockWebsocket(cfg,$http){cfg=cfg||{};var me=this,openTimeout=cfg.openTimeout||500,closeTimeout=cfg.closeTimeout||1e3,messageInterval=cfg.messageInterval||2e3,fixtures=cfg.fixtures||{},messageQueue=[];me.CONNECTING=0,me.OPEN=1,me.CLOSING=2,me.CLOSED=3,me.readyState=me.CONNECTING,me.send=function(message){if(me.readyState===me.OPEN)return messageQueue.push(message),me;throw new Error("WebSocket is already in CLOSING or CLOSED state.")},me.close=function(){return me.readyState===me.OPEN&&(me.readyState=me.CLOSING,setTimeout(function(){me.readyState=me.CLOSED,me.onclose()},closeTimeout)),me},me.onmessage=function(){},me.onerror=function(){},me.onopen=function(){},me.onclose=function(){},setInterval(function(){if(messageQueue.length>0){var message=messageQueue.shift(),msgObj=JSON.parse(message);switch(msgObj.event){case"$close":me.close();break;default:"undefined"!=typeof fixtures[msgObj.event]&&(msgObj.data=fixtures[msgObj.event].data||msgObj.data,msgObj.event=fixtures[msgObj.event].event||msgObj.event),message=JSON.stringify(msgObj),me.onmessage({data:message})}}},messageInterval);var start=function(fixs){fixs=fixs||{},fixs=fixs instanceof Error?{}:fixs,fixtures=fixs,setTimeout(function(){me.readyState=me.OPEN,me.onopen()},openTimeout)};return"string"==typeof fixtures?$http.get(fixtures).success(start).error(start):start(fixtures),me}angular.module("ngWebsocket",[]).provider("$websocket",$websocketProvider)}(),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.io=e()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":2}],2:[function(_dereq_,module,exports){function lookup(uri,opts){"object"==typeof uri&&(opts=uri,uri=void 0),opts=opts||{};var io,parsed=url(uri),source=parsed.source,id=parsed.id;return opts.forceNew||opts["force new connection"]||!1===opts.multiplex?(debug("ignoring socket cache for %s",source),io=Manager(source,opts)):(cache[id]||(debug("new io instance for %s",source),cache[id]=Manager(source,opts)),io=cache[id]),io.socket(parsed.path)}var url=_dereq_("./url"),parser=_dereq_("socket.io-parser"),Manager=_dereq_("./manager"),debug=_dereq_("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=_dereq_("./manager"),exports.Socket=_dereq_("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":44}],3:[function(_dereq_,module,exports){function Manager(uri,opts){return this instanceof Manager?(uri&&"object"==typeof uri&&(opts=uri,uri=void 0),opts=opts||{},opts.path=opts.path||"/socket.io",this.nsps={},this.subs=[],this.opts=opts,this.reconnection(opts.reconnection!==!1),this.reconnectionAttempts(opts.reconnectionAttempts||1/0),this.reconnectionDelay(opts.reconnectionDelay||1e3),this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3),this.randomizationFactor(opts.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==opts.timeout?2e4:opts.timeout),this.readyState="closed",this.uri=uri,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new parser.Encoder,this.decoder=new parser.Decoder,this.autoConnect=opts.autoConnect!==!1,void(this.autoConnect&&this.open())):new Manager(uri,opts)}var eio=(_dereq_("./url"),_dereq_("engine.io-client")),Socket=_dereq_("./socket"),Emitter=_dereq_("component-emitter"),parser=_dereq_("socket.io-parser"),on=_dereq_("./on"),bind=_dereq_("component-bind"),debug=(_dereq_("object-component"),_dereq_("debug")("socket.io-client:manager")),indexOf=_dereq_("indexof"),Backoff=_dereq_("backo2");module.exports=Manager,Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps)this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)},Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps)this.nsps[nsp].id=this.engine.id},Emitter(Manager.prototype),Manager.prototype.reconnection=function(v){return arguments.length?(this._reconnection=!!v,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(v){return arguments.length?(this._reconnectionAttempts=v,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(v){return arguments.length?(this._reconnectionDelay=v,this.backoff&&this.backoff.setMin(v),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(v){return arguments.length?(this._randomizationFactor=v,this.backoff&&this.backoff.setJitter(v),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(v){return arguments.length?(this._reconnectionDelayMax=v,this.backoff&&this.backoff.setMax(v),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(v){return arguments.length?(this._timeout=v,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(fn){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var socket=this.engine,self=this;this.readyState="opening",this.skipReconnect=!1;var openSub=on(socket,"open",function(){self.onopen(),fn&&fn()}),errorSub=on(socket,"error",function(data){if(debug("connect_error"),self.cleanup(),self.readyState="closed",self.emitAll("connect_error",data),fn){var err=new Error("Connection error");err.data=data,fn(err)}else self.maybeReconnectOnOpen()});if(!1!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout),openSub.destroy(),socket.close(),socket.emit("error","timeout"),self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function(){clearTimeout(timer)}})}return this.subs.push(openSub),this.subs.push(errorSub),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded"))),this.subs.push(on(socket,"error",bind(this,"onerror"))),this.subs.push(on(socket,"close",bind(this,"onclose")))},Manager.prototype.ondata=function(data){this.decoder.add(data)},Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)},Manager.prototype.onerror=function(err){debug("error",err),this.emitAll("error",err)},Manager.prototype.socket=function(nsp){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp),this.nsps[nsp]=socket;var self=this;socket.on("connect",function(){socket.id=self.engine.id,~indexOf(self.connected,socket)||self.connected.push(socket)})}return socket},Manager.prototype.destroy=function(socket){var index=indexOf(this.connected,socket);~index&&this.connected.splice(index,1),this.connected.length||this.close()},Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;self.encoding?self.packetBuffer.push(packet):(self.encoding=!0,this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++)self.engine.write(encodedPackets[i]);self.encoding=!1,self.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}},Manager.prototype.cleanup=function(){for(var sub;sub=this.subs.shift();)sub.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(reason){debug("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",reason),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay),this.reconnecting=!0;var timer=setTimeout(function(){self.skipReconnect||(debug("attempting reconnect"),self.emitAll("reconnect_attempt",self.backoff.attempts),self.emitAll("reconnecting",self.backoff.attempts),self.skipReconnect||self.open(function(err){err?(debug("reconnect attempt error"),self.reconnecting=!1,self.reconnect(),self.emitAll("reconnect_error",err.data)):(debug("reconnect success"),self.onreconnect())}))},delay);this.subs.push({destroy:function(){clearTimeout(timer)}})}},Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",attempt)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:40,"object-component":41,"socket.io-parser":44}],4:[function(_dereq_,module,exports){function on(obj,ev,fn){return obj.on(ev,fn),{destroy:function(){obj.removeListener(ev,fn)}}}module.exports=on},{}],5:[function(_dereq_,module,exports){function Socket(io,nsp){this.io=io,this.nsp=nsp,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var parser=_dereq_("socket.io-parser"),Emitter=_dereq_("component-emitter"),toArray=_dereq_("to-array"),on=_dereq_("./on"),bind=_dereq_("component-bind"),debug=_dereq_("debug")("socket.io-client:socket"),hasBin=_dereq_("has-binary");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},emit=Emitter.prototype.emit;Emitter(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},Socket.prototype.send=function(){var args=toArray(arguments);return args.unshift("message"),this.emit.apply(this,args),this},Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev))return emit.apply(this,arguments),this;var args=toArray(arguments),parserType=parser.EVENT;hasBin(args)&&(parserType=parser.BINARY_EVENT);var packet={type:parserType,data:args};return"function"==typeof args[args.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=args.pop(),packet.id=this.ids++),this.connected?this.packet(packet):this.sendBuffer.push(packet),this},Socket.prototype.packet=function(packet){packet.nsp=this.nsp,this.io.packet(packet)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:parser.CONNECT})},Socket.prototype.onclose=function(reason){debug("close (%s)",reason),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",reason)},Socket.prototype.onpacket=function(packet){if(packet.nsp==this.nsp)switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data)}},Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args),null!=packet.id&&(debug("attaching ack callback to event"),args.push(this.ack(packet.id))),this.connected?emit.apply(this,args):this.receiveBuffer.push(args)},Socket.prototype.ack=function(id){var self=this,sent=!1;return function(){if(!sent){sent=!0;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}}},Socket.prototype.onack=function(packet){debug("calling ack %s with %j",packet.id,packet.data);var fn=this.acks[packet.id];fn.apply(this,packet.data),delete this.acks[packet.id]},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)emit.apply(this,this.receiveBuffer[i]);for(this.receiveBuffer=[],i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":36,"socket.io-parser":44,"to-array":48}],6:[function(_dereq_,module,exports){(function(global){function url(uri,loc){var obj=uri,loc=loc||global.location;return null==uri&&(uri=loc.protocol+"//"+loc.host),"string"==typeof uri&&("/"==uri.charAt(0)&&(uri="/"==uri.charAt(1)?loc.protocol+uri:loc.hostname+uri),/^(https?|wss?):\/\//.test(uri)||(debug("protocol-less url %s",uri),uri="undefined"!=typeof loc?loc.protocol+"//"+uri:"https://"+uri),debug("parse %s",uri),obj=parseuri(uri)),obj.port||(/^(http|ws)$/.test(obj.protocol)?obj.port="80":/^(http|ws)s$/.test(obj.protocol)&&(obj.port="443")),obj.path=obj.path||"/",obj.id=obj.protocol+"://"+obj.host+":"+obj.port,obj.href=obj.protocol+"://"+obj.host+(loc&&loc.port==obj.port?"":":"+obj.port),obj}var parseuri=_dereq_("parseuri"),debug=_dereq_("debug")("socket.io-client:url");module.exports=url}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:42}],7:[function(_dereq_,module,exports){function Backoff(opts){opts=opts||{},this.ms=opts.min||100,this.max=opts.max||1e4,this.factor=opts.factor||2,this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0,this.attempts=0}module.exports=Backoff,Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random(),deviation=Math.floor(rand*this.jitter*ms);ms=0==(1&Math.floor(10*rand))?ms-deviation:ms+deviation}return 0|Math.min(ms,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(min){this.ms=min},Backoff.prototype.setMax=function(max){this.max=max},Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}},{}],8:[function(_dereq_,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn&&(fn=obj[fn]),"function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],9:[function(_dereq_,module,exports){function Emitter(obj){return obj?mixin(obj):void 0}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)}var self=this;return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;len>i;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],10:[function(_dereq_,module,exports){function debug(name){return debug.enabled(name)?function(fmt){fmt=coerce(fmt);var curr=new Date,ms=curr-(debug[name]||curr);debug[name]=curr,fmt=name+" "+fmt+" +"+debug.humanize(ms),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function coerce(val){return val instanceof Error?val.stack||val.message:val}module.exports=debug,debug.names=[],debug.skips=[],debug.enable=function(name){try{localStorage.debug=name}catch(e){}for(var split=(name||"").split(/[\s,]+/),len=split.length,i=0;len>i;i++)name=split[i].replace("*",".*?"),"-"===name[0]?debug.skips.push(new RegExp("^"+name.substr(1)+"$")):debug.names.push(new RegExp("^"+name+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(ms){var sec=1e3,min=6e4,hour=60*min;return ms>=hour?(ms/hour).toFixed(1)+"h":ms>=min?(ms/min).toFixed(1)+"m":ms>=sec?(ms/sec|0)+"s":ms+"ms"},debug.enabled=function(name){for(var i=0,len=debug.skips.length;len>i;i++)if(debug.skips[i].test(name))return!1;for(var i=0,len=debug.names.length;len>i;i++)if(debug.names[i].test(name))return!0;return!1};try{window.localStorage&&debug.enable(localStorage.debug)}catch(e){}},{}],11:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/");
},{"./lib/":12}],12:[function(_dereq_,module,exports){module.exports=_dereq_("./socket"),module.exports.parser=_dereq_("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(_dereq_,module,exports){(function(global){function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);if(opts=opts||{},uri&&"object"==typeof uri&&(opts=uri,uri=null),uri&&(uri=parseuri(uri),opts.host=uri.host,opts.secure="https"==uri.protocol||"wss"==uri.protocol,opts.port=uri.port,uri.query&&(opts.query=uri.query)),this.secure=null!=opts.secure?opts.secure:global.location&&"https:"==location.protocol,opts.host){var pieces=opts.host.split(":");opts.hostname=pieces.shift(),pieces.length?opts.port=pieces.pop():opts.port||(opts.port=this.secure?"443":"80")}this.agent=opts.agent||!1,this.hostname=opts.hostname||(global.location?location.hostname:"localhost"),this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=opts.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==opts.upgrade,this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!opts.forceJSONP,this.jsonp=!1!==opts.jsonp,this.forceBase64=!!opts.forceBase64,this.enablesXDR=!!opts.enablesXDR,this.timestampParam=opts.timestampParam||"t",this.timestampRequests=opts.timestampRequests,this.transports=opts.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=opts.policyPort||843,this.rememberUpgrade=opts.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades,this.pfx=opts.pfx||null,this.key=opts.key||null,this.passphrase=opts.passphrase||null,this.cert=opts.cert||null,this.ca=opts.ca||null,this.ciphers=opts.ciphers||null,this.rejectUnauthorized=opts.rejectUnauthorized||null,this.open()}function clone(obj){var o={};for(var i in obj)obj.hasOwnProperty(i)&&(o[i]=obj[i]);return o}var transports=_dereq_("./transports"),Emitter=_dereq_("component-emitter"),debug=_dereq_("debug")("engine.io-client:socket"),index=_dereq_("indexof"),parser=_dereq_("engine.io-parser"),parseuri=_dereq_("parseuri"),parsejson=_dereq_("parsejson"),parseqs=_dereq_("parseqs");module.exports=Socket,Socket.priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,Socket.Socket=Socket,Socket.Transport=_dereq_("./transport"),Socket.transports=_dereq_("./transports"),Socket.parser=_dereq_("engine.io-parser"),Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol,query.transport=name,this.id&&(query.sid=this.id);var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return transport},Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))transport="websocket";else{if(0==this.transports.length){var self=this;return void setTimeout(function(){self.emit("error","No transports available")},0)}transport=this.transports[0]}this.readyState="opening";var transport;try{transport=this.createTransport(transport)}catch(e){return this.transports.shift(),void this.open()}transport.open(),this.setTransport(transport)},Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=transport,transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})},Socket.prototype.probe=function(name){function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}failed||(debug('probe transport "%s" opened',name),transport.send([{type:"ping",data:"probe"}]),transport.once("packet",function(msg){if(!failed)if("pong"==msg.type&&"probe"==msg.data){if(debug('probe transport "%s" pong',name),self.upgrading=!0,self.emit("upgrading",transport),!transport)return;Socket.priorWebsocketSuccess="websocket"==transport.name,debug('pausing current transport "%s"',self.transport.name),self.transport.pause(function(){failed||"closed"!=self.readyState&&(debug("changing transport and sending upgrade packet"),cleanup(),self.setTransport(transport),transport.send([{type:"upgrade"}]),self.emit("upgrade",transport),transport=null,self.upgrading=!1,self.flush())})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name,self.emit("upgradeError",err)}}))}function freezeTransport(){failed||(failed=!0,cleanup(),transport.close(),transport=null)}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name,freezeTransport(),debug('probe transport "%s" failed because of error: %s',name,err),self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){transport&&to.name!=transport.name&&(debug('"%s" works - aborting "%s"',to.name,transport.name),freezeTransport())}function cleanup(){transport.removeListener("open",onTransportOpen),transport.removeListener("error",onerror),transport.removeListener("close",onTransportClose),self.removeListener("close",onclose),self.removeListener("upgrading",onupgrade)}debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=!1,self=this;Socket.priorWebsocketSuccess=!1,transport.once("open",onTransportOpen),transport.once("error",onerror),transport.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),transport.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;l>i;i++)this.probe(this.upgrades[i])}},Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState)switch(debug('socket receive: type "%s", data "%s"',packet.type,packet.data),this.emit("packet",packet),this.emit("heartbeat"),packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing();break;case"error":var err=new Error("server error");err.code=packet.data,this.emit("error",err);break;case"message":this.emit("data",packet.data),this.emit("message",packet.data)}else debug('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(data){this.emit("handshake",data),this.id=data.sid,this.transport.query.sid=data.sid,this.upgrades=this.filterUpgrades(data.upgrades),this.pingInterval=data.pingInterval,this.pingTimeout=data.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){"closed"!=self.readyState&&self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)},Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer),self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout),self.ping(),self.onHeartbeat(self.pingTimeout)},self.pingInterval)},Socket.prototype.ping=function(){this.sendPacket("ping")},Socket.prototype.onDrain=function(){for(var i=0;i<this.prevBufferLen;i++)this.callbackBuffer[i]&&this.callbackBuffer[i]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(msg,fn){return this.sendPacket("message",msg,fn),this},Socket.prototype.sendPacket=function(type,data,fn){if("closing"!=this.readyState&&"closed"!=this.readyState){var packet={type:type,data:data};this.emit("packetCreate",packet),this.writeBuffer.push(packet),this.callbackBuffer.push(fn),this.flush()}},Socket.prototype.close=function(){function close(){self.onClose("forced close"),debug("socket closing - telling transport to close"),self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose),self.removeListener("upgradeError",cleanupAndClose),close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose),self.once("upgradeError",cleanupAndClose)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var self=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()}return this},Socket.prototype.onError=function(err){debug("socket error %j",err),Socket.priorWebsocketSuccess=!1,this.emit("error",err),this.onClose("transport error",err)},Socket.prototype.onClose=function(reason,desc){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){self.writeBuffer=[],self.callbackBuffer=[],self.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",reason,desc)}},Socket.prototype.filterUpgrades=function(upgrades){for(var filteredUpgrades=[],i=0,j=upgrades.length;j>i;i++)~index(this.transports,upgrades[i])&&filteredUpgrades.push(upgrades[i]);return filteredUpgrades}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:40,parsejson:32,parseqs:33,parseuri:34}],14:[function(_dereq_,module,exports){function Transport(opts){this.path=opts.path,this.hostname=opts.hostname,this.port=opts.port,this.secure=opts.secure,this.query=opts.query,this.timestampParam=opts.timestampParam,this.timestampRequests=opts.timestampRequests,this.readyState="",this.agent=opts.agent||!1,this.socket=opts.socket,this.enablesXDR=opts.enablesXDR,this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,this.ca=opts.ca,this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized}var parser=_dereq_("engine.io-parser"),Emitter=_dereq_("component-emitter");module.exports=Transport,Emitter(Transport.prototype),Transport.timestamps=0,Transport.prototype.onError=function(msg,desc){var err=new Error(msg);return err.type="TransportError",err.description=desc,this.emit("error",err),this},Transport.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},Transport.prototype.send=function(packets){if("open"!=this.readyState)throw new Error("Transport not open");this.write(packets)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)},Transport.prototype.onPacket=function(packet){this.emit("packet",packet)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(_dereq_,module,exports){(function(global){function polling(opts){var xhr,xd=!1,xs=!1,jsonp=!1!==opts.jsonp;if(global.location){var isSSL="https:"==location.protocol,port=location.port;port||(port=isSSL?443:80),xd=opts.hostname!=location.hostname||port!=opts.port,xs=opts.secure!=isSSL}if(opts.xdomain=xd,opts.xscheme=xs,xhr=new XMLHttpRequest(opts),"open"in xhr&&!opts.forceJSONP)return new XHR(opts);if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)}var XMLHttpRequest=_dereq_("xmlhttprequest"),XHR=_dereq_("./polling-xhr"),JSONP=_dereq_("./polling-jsonp"),websocket=_dereq_("./websocket");exports.polling=polling,exports.websocket=websocket}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(_dereq_,module,exports){(function(global){function empty(){}function JSONPPolling(opts){Polling.call(this,opts),this.query=this.query||{},callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){self.script&&(self.script.onerror=empty)},!1)}var Polling=_dereq_("./polling"),inherit=_dereq_("component-inherit");module.exports=JSONPPolling;var callbacks,rNewline=/\n/g,rEscapedNewline=/\\n/g;inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var self=this,script=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),script.async=!0,script.src=this.uri(),script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt),this.script=script;var isUAgecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);isUAgecko&&setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe),document.body.removeChild(iframe)},100)},JSONPPolling.prototype.doWrite=function(data,fn){function complete(){initIframe(),fn()}function initIframe(){if(self.iframe)try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe"),iframe.name=self.iframeId,iframe.src="javascript:0"}iframe.id=self.iframeId,self.form.appendChild(iframe),self.iframe=iframe}var self=this;if(!this.form){var iframe,form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="eio_iframe_"+this.index;form.className="socketio",form.style.position="absolute",form.style.top="-1000px",form.style.left="-1000px",form.target=id,form.method="POST",form.setAttribute("accept-charset","utf-8"),area.name="d",form.appendChild(area),document.body.appendChild(form),this.form=form,this.area=area}this.form.action=this.uri(),initIframe(),data=data.replace(rEscapedNewline,"\\\n"),this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==self.iframe.readyState&&complete()}:this.iframe.onload=complete}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(_dereq_,module,exports){(function(global){function empty(){}function XHR(opts){if(Polling.call(this,opts),global.location){var isSSL="https:"==location.protocol,port=location.port;port||(port=isSSL?443:80),this.xd=opts.hostname!=global.location.hostname||port!=opts.port,this.xs=opts.secure!=isSSL}}function Request(opts){this.method=opts.method||"GET",this.uri=opts.uri,this.xd=!!opts.xd,this.xs=!!opts.xs,this.async=!1!==opts.async,this.data=void 0!=opts.data?opts.data:null,this.agent=opts.agent,this.isBinary=opts.isBinary,this.supportsBinary=opts.supportsBinary,this.enablesXDR=opts.enablesXDR,this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,this.ca=opts.ca,this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized,this.create()}function unloadHandler(){for(var i in Request.requests)Request.requests.hasOwnProperty(i)&&Request.requests[i].abort()}var XMLHttpRequest=_dereq_("xmlhttprequest"),Polling=_dereq_("./polling"),Emitter=_dereq_("component-emitter"),inherit=_dereq_("component-inherit"),debug=_dereq_("debug")("engine.io-client:polling-xhr");module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(opts){return opts=opts||{},opts.uri=this.uri(),opts.xd=this.xd,opts.xs=this.xs,opts.agent=this.agent||!1,opts.supportsBinary=this.supportsBinary,opts.enablesXDR=this.enablesXDR,opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized,new Request(opts)},XHR.prototype.doWrite=function(data,fn){var isBinary="string"!=typeof data&&void 0!==data,req=this.request({method:"POST",data:data,isBinary:isBinary}),self=this;req.on("success",fn),req.on("error",function(err){self.onError("xhr post error",err)}),this.sendXhr=req},XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request(),self=this;req.on("data",function(data){self.onData(data)}),req.on("error",function(err){self.onError("xhr poll error",err)}),this.pollXhr=req},Emitter(Request.prototype),Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts),self=this;try{if(debug("xhr open %s: %s",this.method,this.uri),xhr.open(this.method,this.uri,this.async),this.supportsBinary&&(xhr.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?xhr.setRequestHeader("Content-type","application/octet-stream"):xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in xhr&&(xhr.withCredentials=!0),this.hasXDR()?(xhr.onload=function(){self.onLoad()},xhr.onerror=function(){self.onError(xhr.responseText)}):xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||1223==xhr.status?self.onLoad():setTimeout(function(){self.onError(xhr.status)},0))},debug("xhr data %s",this.data),xhr.send(this.data)}catch(e){return void setTimeout(function(){self.onError(e)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(data){this.emit("data",data),this.onSuccess()},Request.prototype.onError=function(err){this.emit("error",err),this.cleanup(!0)},Request.prototype.cleanup=function(fromError){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,fromError)try{this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}data="application/octet-stream"===contentType?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=data&&this.onData(data)},Request.prototype.hasXDR=function(){return"undefined"!=typeof global.XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},global.document&&(Request.requestsCount=0,Request.requests={},global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(_dereq_,module,exports){function Polling(opts){var forceBase64=opts&&opts.forceBase64;(!hasXHR2||forceBase64)&&(this.supportsBinary=!1),Transport.call(this,opts)}var Transport=_dereq_("../transport"),parseqs=_dereq_("parseqs"),parser=_dereq_("engine.io-parser"),inherit=_dereq_("component-inherit"),debug=_dereq_("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var XMLHttpRequest=_dereq_("xmlhttprequest"),xhr=new XMLHttpRequest({xdomain:!1});return null!=xhr.responseType}();inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(onPause){function pause(){debug("paused"),self.readyState="paused",onPause()}var self=this;if(this.readyState="pausing",this.polling||!this.writable){var total=0;this.polling&&(debug("we are currently polling - waiting to pause"),total++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--total||pause()})),this.writable||(debug("we are currently writing - waiting to pause"),total++,this.once("drain",function(){debug("pre-pause writing complete"),--total||pause()}))}else pause()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);var callback=function(packet,index,total){return"opening"==self.readyState&&self.onOpen(),"close"==packet.type?(self.onClose(),!1):void self.onPacket(packet)};parser.decodePayload(data,this.socket.binaryType,callback),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function close(){debug("writing close packet"),self.write([{type:"close"}])}var self=this;"open"==this.readyState?(debug("transport open - closing"),close()):(debug("transport not open - deferring close"),this.once("open",close))},Polling.prototype.write=function(packets){var self=this;this.writable=!1;var callbackfn=function(){self.writable=!0,self.emit("drain")},self=this;parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})},Polling.prototype.uri=function(){var query=this.query||{},schema=this.secure?"https":"http",port="";return!1!==this.timestampRequests&&(query[this.timestampParam]=+new Date+"-"+Transport.timestamps++),this.supportsBinary||query.sid||(query.b64=1),query=parseqs.encode(query),this.port&&("https"==schema&&443!=this.port||"http"==schema&&80!=this.port)&&(port=":"+this.port),query.length&&(query="?"+query),schema+"://"+this.hostname+port+this.path+query}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,xmlhttprequest:20}],19:[function(_dereq_,module,exports){function WS(opts){var forceBase64=opts&&opts.forceBase64;forceBase64&&(this.supportsBinary=!1),Transport.call(this,opts)}var Transport=_dereq_("../transport"),parser=_dereq_("engine.io-parser"),parseqs=_dereq_("parseqs"),inherit=_dereq_("component-inherit"),debug=_dereq_("debug")("engine.io-client:websocket"),WebSocket=_dereq_("ws");module.exports=WS,inherit(WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var uri=this.uri(),protocols=void 0,opts={agent:this.agent};opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized,this.ws=new WebSocket(uri,protocols,opts),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()},this.ws.onclose=function(){self.onClose()},this.ws.onmessage=function(ev){self.onData(ev.data)},this.ws.onerror=function(e){self.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(data){var self=this;setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}),WS.prototype.write=function(packets){function ondrain(){self.writable=!0,self.emit("drain")}var self=this;this.writable=!1;for(var i=0,l=packets.length;l>i;i++)parser.encodePacket(packets[i],this.supportsBinary,function(data){try{self.ws.send(data)}catch(e){debug("websocket closed before onclose event")}});setTimeout(ondrain,0)},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var query=this.query||{},schema=this.secure?"wss":"ws",port="";return this.port&&("wss"==schema&&443!=this.port||"ws"==schema&&80!=this.port)&&(port=":"+this.port),this.timestampRequests&&(query[this.timestampParam]=+new Date),this.supportsBinary||(query.b64=1),query=parseqs.encode(query),query.length&&(query="?"+query),schema+"://"+this.hostname+port+this.path+query},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,ws:35}],20:[function(_dereq_,module,exports){var hasCORS=_dereq_("has-cors");module.exports=function(opts){var xdomain=opts.xdomain,xscheme=opts.xscheme,enablesXDR=opts.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!xscheme&&enablesXDR)return new XDomainRequest}catch(e){}if(!xdomain)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":38}],21:[function(_dereq_,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype,a.prototype=new fn,a.prototype.constructor=a}},{}],22:[function(_dereq_,module,exports){function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var args=arguments,useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0,lastC=0;return args[0].replace(/%[a-z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c),args}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{null==namespaces?localStorage.removeItem("debug"):localStorage.debug=namespaces}catch(e){}}function load(){var r;try{r=localStorage.debug}catch(e){}return r}exports=module.exports=_dereq_("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){return JSON.stringify(v)},exports.enable(load())},{"./debug":23}],23:[function(_dereq_,module,exports){function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}function enabled(){var self=enabled,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,null==self.useColors&&(self.useColors=exports.useColors()),null==self.color&&self.useColors&&(self.color=selectColor());var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&(args=["%o"].concat(args));var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),"function"==typeof exports.formatArgs&&(args=exports.formatArgs.apply(self,args));var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}disabled.enabled=!1,enabled.enabled=!0;var fn=exports.enabled(namespace)?enabled:disabled;return fn.namespace=namespace,fn}function enable(namespaces){exports.save(namespaces);for(var split=(namespaces||"").split(/[\s,]+/),len=split.length,i=0;len>i;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;len>i;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;len>i;i++)if(exports.names[i].test(name))return!0;return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=_dereq_("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevTime,prevColor=0},{ms:24}],24:[function(_dereq_,module,exports){function parse(str){var match=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]),type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"h":return n*h;case"minutes":case"minute":case"m":return n*m;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}function short(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){return n>ms?void 0:1.5*n>ms?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(val,options){return options=options||{},"string"==typeof val?parse(val):options["long"]?long(val):short(val)}},{}],25:[function(_dereq_,module,exports){(function(global){function encodeBase64Object(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var data=packet.data,contentArray=new Uint8Array(data),resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++)resultBuffer[i+1]=contentArray[i];return callback(resultBuffer.buffer);
}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var fr=new FileReader;return fr.onload=function(){packet.data=fr.result,exports.encodePacket(packet,supportsBinary,!0,callback)},fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);if(dontSendBlobs)return encodeBlobAsArrayBuffer(packet,supportsBinary,callback);var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}function map(ary,each,done){for(var result=new Array(ary.length),next=after(ary.length,done),eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg,cb(error,result)})},i=0;i<ary.length;i++)eachWithIndex(i,ary[i],next)}var keys=_dereq_("./keys"),hasBinary=_dereq_("has-binary"),sliceBuffer=_dereq_("arraybuffer.slice"),base64encoder=_dereq_("base64-arraybuffer"),after=_dereq_("after"),utf8=_dereq_("utf8"),isAndroid=navigator.userAgent.match(/Android/i),isPhantomJS=/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={type:"error",data:"parser error"},Blob=_dereq_("blob");exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=!1),"function"==typeof utf8encode&&(callback=utf8encode,utf8encode=null);var data=void 0===packet.data?void 0:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer)return encodeArrayBuffer(packet,supportsBinary,callback);if(Blob&&data instanceof global.Blob)return encodeBlob(packet,supportsBinary,callback);if(data&&data.base64)return encodeBase64Object(packet,callback);var encoded=packets[packet.type];return void 0!==packet.data&&(encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)),callback(""+encoded)},exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof Blob){var fr=new FileReader;return fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)},fr.readAsDataURL(packet.data)}var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){for(var typed=new Uint8Array(packet.data),basic=new Array(typed.length),i=0;i<typed.length;i++)basic[i]=typed[i];b64data=String.fromCharCode.apply(null,basic)}return message+=global.btoa(b64data),callback(message)},exports.decodePacket=function(data,binaryType,utf8decode){if("string"==typeof data||void 0===data){if("b"==data.charAt(0))return exports.decodeBase64Packet(data.substr(1),binaryType);if(utf8decode)try{data=utf8.decode(data)}catch(e){return err}var type=data.charAt(0);return Number(type)==type&&packetslist[type]?data.length>1?{type:packetslist[type],data:data.substring(1)}:{type:packetslist[type]}:err}var asArray=new Uint8Array(data),type=asArray[0],rest=sliceBuffer(data,1);return Blob&&"blob"===binaryType&&(rest=new Blob([rest])),{type:packetslist[type],data:rest}},exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!global.ArrayBuffer)return{type:type,data:{base64:!0,data:msg.substr(1)}};var data=base64encoder.decode(msg.substr(1));return"blob"===binaryType&&Blob&&(data=new Blob([data])),{type:type,data:data}},exports.encodePayload=function(packets,supportsBinary,callback){function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){exports.encodePacket(packet,isBinary?supportsBinary:!1,!0,function(message){doneCallback(null,setLengthHeader(message))})}"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=null);var isBinary=hasBinary(packets);return supportsBinary&&isBinary?Blob&&!dontSendBlobs?exports.encodePayloadAsBlob(packets,callback):exports.encodePayloadAsArrayBuffer(packets,callback):packets.length?void map(packets,encodeOne,function(err,results){return callback(results.join(""))}):callback("0:")},exports.decodePayload=function(data,binaryType,callback){if("string"!=typeof data)return exports.decodePayloadAsBinary(data,binaryType,callback);"function"==typeof binaryType&&(callback=binaryType,binaryType=null);var packet;if(""==data)return callback(err,0,1);for(var n,msg,length="",i=0,l=data.length;l>i;i++){var chr=data.charAt(i);if(":"!=chr)length+=chr;else{if(""==length||length!=(n=Number(length)))return callback(err,0,1);if(msg=data.substr(i+1,n),length!=msg.length)return callback(err,0,1);if(msg.length){if(packet=exports.decodePacket(msg,binaryType,!0),err.type==packet.type&&err.data==packet.data)return callback(err,0,1);var ret=callback(packet,i+n,l);if(!1===ret)return}i+=n,length=""}}return""!=length?callback(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,!0,!0,function(data){return doneCallback(null,data)})}return packets.length?void map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;return len="string"==typeof p?p.length:p.byteLength,acc+len.toString().length+len+2},0),resultArray=new Uint8Array(totalLength),bufferIndex=0;return encodedPackets.forEach(function(p){var isString="string"==typeof p,ab=p;if(isString){for(var view=new Uint8Array(p.length),i=0;i<p.length;i++)view[i]=p.charCodeAt(i);ab=view.buffer}isString?resultArray[bufferIndex++]=0:resultArray[bufferIndex++]=1;for(var lenStr=ab.byteLength.toString(),i=0;i<lenStr.length;i++)resultArray[bufferIndex++]=parseInt(lenStr[i]);resultArray[bufferIndex++]=255;for(var view=new Uint8Array(ab),i=0;i<view.length;i++)resultArray[bufferIndex++]=view[i]}),callback(resultArray.buffer)}):callback(new ArrayBuffer(0))},exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,!0,!0,function(encoded){var binaryIdentifier=new Uint8Array(1);if(binaryIdentifier[0]=1,"string"==typeof encoded){for(var view=new Uint8Array(encoded.length),i=0;i<encoded.length;i++)view[i]=encoded.charCodeAt(i);encoded=view.buffer,binaryIdentifier[0]=0}for(var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size,lenStr=len.toString(),lengthAry=new Uint8Array(lenStr.length+1),i=0;i<lenStr.length;i++)lengthAry[i]=parseInt(lenStr[i]);if(lengthAry[lenStr.length]=255,Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))})},exports.decodePayloadAsBinary=function(data,binaryType,callback){"function"==typeof binaryType&&(callback=binaryType,binaryType=null);for(var bufferTail=data,buffers=[],numberTooLong=!1;bufferTail.byteLength>0;){for(var tailArray=new Uint8Array(bufferTail),isString=0===tailArray[0],msgLength="",i=1;255!=tailArray[i];i++){if(msgLength.length>310){numberTooLong=!0;break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length),msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString)try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(var i=0;i<typed.length;i++)msg+=String.fromCharCode(typed[i])}buffers.push(msg),bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,!0),i,total)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":36,utf8:31}],26:[function(_dereq_,module,exports){module.exports=Object.keys||function(obj){var arr=[],has=Object.prototype.hasOwnProperty;for(var i in obj)has.call(obj,i)&&arr.push(i);return arr}},{}],27:[function(_dereq_,module,exports){function after(count,callback,err_cb){function proxy(err,result){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count,err?(bail=!0,callback(err),callback=err_cb):0!==proxy.count||bail||callback(null,result)}var bail=!1;return err_cb=err_cb||noop,proxy.count=count,0===count?callback():proxy}function noop(){}module.exports=after},{}],28:[function(_dereq_,module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;if(start=start||0,end=end||bytes,arraybuffer.slice)return arraybuffer.slice(start,end);if(0>start&&(start+=bytes),0>end&&(end+=bytes),end>bytes&&(end=bytes),start>=bytes||start>=end||0===bytes)return new ArrayBuffer(0);for(var abv=new Uint8Array(arraybuffer),result=new Uint8Array(end-start),i=start,ii=0;end>i;i++,ii++)result[ii]=abv[i];return result.buffer}},{}],29:[function(_dereq_,module,exports){!function(chars){"use strict";exports.encode=function(arraybuffer){var i,bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="";for(i=0;len>i;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64+=chars[63&bytes[i+2]];return len%3===2?base64=base64.substring(0,base64.length-1)+"=":len%3===1&&(base64=base64.substring(0,base64.length-2)+"=="),base64},exports.decode=function(base64){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0;"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--);var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;len>i;i+=4)encoded1=chars.indexOf(base64[i]),encoded2=chars.indexOf(base64[i+1]),encoded3=chars.indexOf(base64[i+2]),encoded4=chars.indexOf(base64[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return arraybuffer}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(_dereq_,module,exports){(function(global){function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength)),buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++)bb.append(ary[i]);return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){return mapArrayBufferViews(ary),new Blob(ary,options||{})}var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{var b=new Blob([new Uint8Array([1,2])]);return 2===b.size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;module.exports=function(){return blobSupported?blobSupportsArrayBufferView?global.Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(_dereq_,module,exports){(function(global){!function(root){function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;length>counter;)value=string.charCodeAt(counter++),value>=55296&&56319>=value&&length>counter?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--)):output.push(value);return output}function ucs2encode(array){for(var value,length=array.length,index=-1,output="";++index<length;)value=array[index],value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value);return output}function checkScalarValue(codePoint){if(codePoint>=55296&&57343>=codePoint)throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if(0==(4294967168&codePoint))return stringFromCharCode(codePoint);var symbol="";return 0==(4294965248&codePoint)?symbol=stringFromCharCode(codePoint>>6&31|192):0==(4294901760&codePoint)?(checkScalarValue(codePoint),symbol=stringFromCharCode(codePoint>>12&15|224),symbol+=createByte(codePoint,6)):0==(4292870144&codePoint)&&(symbol=stringFromCharCode(codePoint>>18&7|240),symbol+=createByte(codePoint,12),symbol+=createByte(codePoint,6)),symbol+=stringFromCharCode(63&codePoint|128)}function utf8encode(string){for(var codePoint,codePoints=ucs2decode(string),length=codePoints.length,index=-1,byteString="";++index<length;)codePoint=codePoints[index],byteString+=encodeCodePoint(codePoint);return byteString}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var continuationByte=255&byteArray[byteIndex];if(byteIndex++,128==(192&continuationByte))return 63&continuationByte;throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1,byte2,byte3,byte4,codePoint;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(byte1=255&byteArray[byteIndex],byteIndex++,0==(128&byte1))return byte1;if(192==(224&byte1)){var byte2=readContinuationByte();if(codePoint=(31&byte1)<<6|byte2,codePoint>=128)return codePoint;throw Error("Invalid continuation byte")}if(224==(240&byte1)){if(byte2=readContinuationByte(),byte3=readContinuationByte(),codePoint=(15&byte1)<<12|byte2<<6|byte3,codePoint>=2048)return checkScalarValue(codePoint),codePoint;throw Error("Invalid continuation byte")}if(240==(248&byte1)&&(byte2=readContinuationByte(),byte3=readContinuationByte(),byte4=readContinuationByte(),codePoint=(15&byte1)<<18|byte2<<12|byte3<<6|byte4,codePoint>=65536&&1114111>=codePoint))return codePoint;throw Error("Invalid UTF-8 detected")}function utf8decode(byteString){byteArray=ucs2decode(byteString),byteCount=byteArray.length,byteIndex=0;for(var tmp,codePoints=[];(tmp=decodeSymbol())!==!1;)codePoints.push(tmp);return ucs2encode(codePoints)}var freeExports="object"==typeof exports&&exports,freeModule="object"==typeof module&&module&&module.exports==freeExports&&module,freeGlobal="object"==typeof global&&global;(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)&&(root=freeGlobal);var byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode,utf8={version:"2.0.0",encode:utf8encode,decode:utf8decode};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return utf8});else if(freeExports&&!freeExports.nodeType)if(freeModule)freeModule.exports=utf8;else{var object={},hasOwnProperty=object.hasOwnProperty;for(var key in utf8)hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key])}else root.utf8=utf8}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(_dereq_,module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;module.exports=function(data){return"string"==typeof data&&data?(data=data.replace(rtrimLeft,"").replace(rtrimRight,""),global.JSON&&JSON.parse?JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(_dereq_,module,exports){exports.encode=function(obj){var str="";for(var i in obj)obj.hasOwnProperty(i)&&(str.length&&(str+="&"),str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return str},exports.decode=function(qs){for(var qry={},pairs=qs.split("&"),i=0,l=pairs.length;l>i;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},{}],34:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");-1!=b&&-1!=e&&(str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length));for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||"";return-1!=b&&-1!=e&&(uri.source=src,uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":"),uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":"),uri.ipv6uri=!0),uri}},{}],35:[function(_dereq_,module,exports){function ws(uri,protocols,opts){var instance;return instance=protocols?new WebSocket(uri,protocols):new WebSocket(uri)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype)},{}],36:[function(_dereq_,module,exports){(function(global){function hasBinary(data){function _hasBinary(obj){if(!obj)return!1;if(global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File)return!0;if(isArray(obj)){for(var i=0;i<obj.length;i++)if(_hasBinary(obj[i]))return!0}else if(obj&&"object"==typeof obj){obj.toJSON&&(obj=obj.toJSON());for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key]))return!0}return!1}return _hasBinary(data)}var isArray=_dereq_("isarray");module.exports=hasBinary}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:37}],37:[function(_dereq_,module,exports){module.exports=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}},{}],38:[function(_dereq_,module,exports){var global=_dereq_("global");try{module.exports="XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}catch(err){module.exports=!1}},{global:39}],39:[function(_dereq_,module,exports){module.exports=function(){return this}()},{}],40:[function(_dereq_,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},{}],41:[function(_dereq_,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj)has.call(obj,key)&&keys.push(key);return keys},exports.values=function(obj){var vals=[];for(var key in obj)has.call(obj,key)&&vals.push(obj[key]);return vals},exports.merge=function(a,b){for(var key in b)has.call(b,key)&&(a[key]=b[key]);return a},exports.length=function(obj){return exports.keys(obj).length},exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],42:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(str){for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||"";return uri}},{}],43:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray"),isBuf=_dereq_("./is-buffer");exports.deconstructPacket=function(packet){function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:!0,num:buffers.length};return buffers.push(data),placeholder}if(isArray(data)){for(var newData=new Array(data.length),i=0;i<data.length;i++)newData[i]=_deconstructPacket(data[i]);return newData}if("object"==typeof data&&!(data instanceof Date)){var newData={};for(var key in data)newData[key]=_deconstructPacket(data[key]);return newData}return data}var buffers=[],packetData=packet.data,pack=packet;return pack.data=_deconstructPacket(packetData),pack.attachments=buffers.length,{packet:pack,buffers:buffers}},exports.reconstructPacket=function(packet,buffers){function _reconstructPacket(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf}if(isArray(data)){for(var i=0;i<data.length;i++)data[i]=_reconstructPacket(data[i]);return data}if(data&&"object"==typeof data){for(var key in data)data[key]=_reconstructPacket(data[key]);return data}return data}return packet.data=_reconstructPacket(packet.data),packet.attachments=void 0,packet},exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){containingObject?containingObject[curKey]=this.result:bloblessData=this.result,--pendingBlobs||callback(bloblessData)},fileReader.readAsArrayBuffer(obj)}else if(isArray(obj))for(var i=0;i<obj.length;i++)_removeBlobs(obj[i],i,obj);else if(obj&&"object"==typeof obj&&!isBuf(obj))for(var key in obj)_removeBlobs(obj[key],key,obj)}var pendingBlobs=0,bloblessData=data;_removeBlobs(bloblessData),pendingBlobs||callback(bloblessData)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":45,isarray:46}],44:[function(_dereq_,module,exports){function Encoder(){}function encodeAsString(obj){var str="",nsp=!1;return str+=obj.type,(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type)&&(str+=obj.attachments,str+="-"),obj.nsp&&"/"!=obj.nsp&&(nsp=!0,str+=obj.nsp),null!=obj.id&&(nsp&&(str+=",",nsp=!1),str+=obj.id),null!=obj.data&&(nsp&&(str+=","),str+=json.stringify(obj.data)),debug("encoded %j as %s",obj,str),str}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData),pack=encodeAsString(deconstruction.packet),buffers=deconstruction.buffers;buffers.unshift(pack),callback(buffers)}binary.removeBlobs(obj,writeEncoding)}function Decoder(){this.reconstructor=null}function decodeString(str){var p={},i=0;if(p.type=Number(str.charAt(0)),null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){for(var buf="";"-"!=str.charAt(++i)&&(buf+=str.charAt(i),i!=str.length););if(buf!=Number(buf)||"-"!=str.charAt(i))throw new Error("Illegal attachments");p.attachments=Number(buf)}if("/"==str.charAt(i+1))for(p.nsp="";++i;){var c=str.charAt(i);if(","==c)break;if(p.nsp+=c,i==str.length)break}else p.nsp="/";var next=str.charAt(i+1);if(""!==next&&Number(next)==next){for(p.id="";++i;){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}if(p.id+=str.charAt(i),i==str.length)break}p.id=Number(p.id)}if(str.charAt(++i))try{p.data=json.parse(str.substr(i))}catch(e){return error()}return debug("decoded %s as %j",str,p),p}function BinaryReconstructor(packet){this.reconPack=packet,this.buffers=[]}function error(data){return{type:exports.ERROR,data:"parser error"}}var debug=_dereq_("debug")("socket.io-parser"),json=_dereq_("json3"),Emitter=(_dereq_("isarray"),_dereq_("component-emitter")),binary=_dereq_("./binary"),isBuf=_dereq_("./is-buffer");exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,exports.Decoder=Decoder,Encoder.prototype.encode=function(obj,callback){if(debug("encoding packet %j",obj),exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type)encodeAsBinary(obj,callback);else{var encoding=encodeAsString(obj);callback([encoding])}},Emitter(Decoder.prototype),Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj)packet=decodeString(obj),exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type?(this.reconstructor=new BinaryReconstructor(packet),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",packet)):this.emit("decoded",packet);else{if(!isBuf(obj)&&!obj.base64)throw new Error("Unknown type: "+obj);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");packet=this.reconstructor.takeBinaryData(obj),packet&&(this.reconstructor=null,this.emit("decoded",packet))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(binData){if(this.buffers.push(binData),this.buffers.length==this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),packet}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":9,debug:10,isarray:46,json3:47}],45:[function(_dereq_,module,exports){(function(global){function isBuf(obj){return global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}module.exports=isBuf}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(_dereq_,module,exports){module.exports=_dereq_(37)},{}],47:[function(_dereq_,module,exports){!function(window){function has(name){if(has[name]!==undef)return has[name];var isSupported;if("bug-string-char-index"==name)isSupported="a"!="a"[0];else if("json"==name)isSupported=has("json-stringify")&&has("json-parse");else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==name){var stringify=JSON3.stringify,stringifySupported="function"==typeof stringify&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported="0"===stringify(0)&&"0"===stringify(new Number)&&'""'==stringify(new String)&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&"1"===stringify(value)&&"[1]"==stringify([value])&&"[null]"==stringify([undef])&&"null"==stringify(null)&&"[null,null,null]"==stringify([undef,getClass,null])&&stringify({a:[value,!0,!1,null,"\x00\b\n\f\r	"]})==serialized&&"1"===stringify(null,value)&&"[\n 1,\n 2\n]"==stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==stringify(new Date(-1))}catch(exception){stringifySupported=!1}}isSupported=stringifySupported}if("json-parse"==name){var parse=JSON3.parse;if("function"==typeof parse)try{if(0===parse("0")&&!parse(!1)){value=parse(serialized);var parseSupported=5==value.a.length&&1===value.a[0];if(parseSupported){try{parseSupported=!parse('"	"')}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("01")}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("1.")}catch(exception){}}}}catch(exception){parseSupported=!1}isSupported=parseSupported}}return has[name]=!!isSupported}var isProperty,forEach,undef,getClass={}.toString,isLoader="function"==typeof define&&define.amd,nativeJSON="object"==typeof JSON&&JSON,JSON3="object"==typeof exports&&exports&&!exports.nodeType&&exports;JSON3&&nativeJSON?(JSON3.stringify=nativeJSON.stringify,JSON3.parse=nativeJSON.parse):JSON3=window.JSON=nativeJSON||{};var isExtended=new Date(-0xc782b5b800cec);try{isExtended=-109252==isExtended.getUTCFullYear()&&0===isExtended.getUTCMonth()&&1===isExtended.getUTCDate()&&10==isExtended.getUTCHours()&&37==isExtended.getUTCMinutes()&&6==isExtended.getUTCSeconds()&&708==isExtended.getUTCMilliseconds()}catch(exception){}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]",charIndexBuggy=has("bug-string-char-index");if(!isExtended)var floor=Math.floor,Months=[0,31,59,90,120,151,181,212,243,273,304,334],getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)};(isProperty={}.hasOwnProperty)||(isProperty=function(property){var constructor,members={};return(members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass?isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);return this.__proto__=original,result}:(constructor=members.constructor,isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}),members=null,isProperty.call(this,property)});var PrimitiveTypes={"boolean":1,number:1,string:1,undefined:1},isHostType=function(object,property){var type=typeof object[property];return"object"==type?!!object[property]:!PrimitiveTypes[type]};if(forEach=function(object,callback){var Properties,members,property,size=0;(Properties=function(){this.valueOf=0}).prototype.valueOf=0,members=new Properties;for(property in members)isProperty.call(members,property)&&size++;return Properties=members=null,size?forEach=2==size?function(object,callback){var property,members={},isFunction=getClass.call(object)==functionClass;for(property in object)isFunction&&"prototype"==property||isProperty.call(members,property)||!(members[property]=1)||!isProperty.call(object,property)||callback(property)}:function(object,callback){var property,isConstructor,isFunction=getClass.call(object)==functionClass;for(property in object)isFunction&&"prototype"==property||!isProperty.call(object,property)||(isConstructor="constructor"===property)||callback(property);(isConstructor||isProperty.call(object,property="constructor"))&&callback(property)}:(members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],forEach=function(object,callback){var property,length,isFunction=getClass.call(object)==functionClass,hasProperty=!isFunction&&"function"!=typeof object.constructor&&isHostType(object,"hasOwnProperty")?object.hasOwnProperty:isProperty;for(property in object)isFunction&&"prototype"==property||!hasProperty.call(object,property)||callback(property);for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}),forEach(object,callback)},!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},leadingZeroes="000000",toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)},unicodePrefix="\\u00",quote=function(value){var symbols,result='"',index=0,length=value.length,isLarge=length>10&&charIndexBuggy;for(isLarge&&(symbols=value.split(""));length>index;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(32>charCode){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=isLarge?symbols[index]:charIndexBuggy?value.charAt(index):value[index]}}return result+'"'},serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property];
}catch(exception){}if("object"==typeof value&&value)if(className=getClass.call(value),className!=dateClass||isProperty.call(value,"toJSON"))"function"==typeof value.toJSON&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))&&(value=value.toJSON(property));else if(value>-1/0&&1/0>value){if(getDay){for(date=floor(value/864e5),year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month),time=(value%864e5+864e5)%864e5,hours=floor(time/36e5)%24,minutes=floor(time/6e4)%60,seconds=floor(time/1e3)%60,milliseconds=time%1e3}else year=value.getUTCFullYear(),month=value.getUTCMonth(),date=value.getUTCDate(),hours=value.getUTCHours(),minutes=value.getUTCMinutes(),seconds=value.getUTCSeconds(),milliseconds=value.getUTCMilliseconds();value=(0>=year||year>=1e4?(0>year?"-":"+")+toPaddedString(6,0>year?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else value=null;if(callback&&(value=callback.call(object,property,value)),null===value)return"null";if(className=getClass.call(value),className==booleanClass)return""+value;if(className==numberClass)return value>-1/0&&1/0>value?""+value:"null";if(className==stringClass)return quote(""+value);if("object"==typeof value){for(length=stack.length;length--;)if(stack[length]===value)throw TypeError();if(stack.push(value),results=[],prefix=indentation,indentation+=whitespace,className==arrayClass){for(index=0,length=value.length;length>index;index++)element=serialize(index,value,callback,properties,whitespace,indentation,stack),results.push(element===undef?"null":element);result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);element!==undef&&results.push(quote(property)+":"+(whitespace?" ":"")+element)}),result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}";return stack.pop(),result}};JSON3.stringify=function(source,filter,width){var whitespace,callback,properties,className;if("function"==typeof filter||"object"==typeof filter&&filter)if((className=getClass.call(filter))==functionClass)callback=filter;else if(className==arrayClass){properties={};for(var value,index=0,length=filter.length;length>index;value=filter[index++],className=getClass.call(value),(className==stringClass||className==numberClass)&&(properties[value]=1));}if(width)if((className=getClass.call(width))==numberClass){if((width-=width%1)>0)for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}else className==stringClass&&(whitespace=width.length<=10?width:width.slice(0,10));return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var Index,Source,fromCharCode=String.fromCharCode,Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},abort=function(){throw Index=Source=null,SyntaxError()},lex=function(){for(var value,begin,position,isSigned,charCode,source=Source,length=source.length;length>Index;)switch(charCode=source.charCodeAt(Index)){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:return value=charIndexBuggy?source.charAt(Index):source[Index],Index++,value;case 34:for(value="@",Index++;length>Index;)if(charCode=source.charCodeAt(Index),32>charCode)abort();else if(92==charCode)switch(charCode=source.charCodeAt(++Index)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode],Index++;break;case 117:for(begin=++Index,position=Index+4;position>Index;Index++)charCode=source.charCodeAt(Index),charCode>=48&&57>=charCode||charCode>=97&&102>=charCode||charCode>=65&&70>=charCode||abort();value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}else{if(34==charCode)break;for(charCode=source.charCodeAt(Index),begin=Index;charCode>=32&&92!=charCode&&34!=charCode;)charCode=source.charCodeAt(++Index);value+=source.slice(begin,Index)}if(34==source.charCodeAt(Index))return Index++,value;abort();default:if(begin=Index,45==charCode&&(isSigned=!0,charCode=source.charCodeAt(++Index)),charCode>=48&&57>=charCode){for(48==charCode&&(charCode=source.charCodeAt(Index+1),charCode>=48&&57>=charCode)&&abort(),isSigned=!1;length>Index&&(charCode=source.charCodeAt(Index),charCode>=48&&57>=charCode);Index++);if(46==source.charCodeAt(Index)){for(position=++Index;length>position&&(charCode=source.charCodeAt(position),charCode>=48&&57>=charCode);position++);position==Index&&abort(),Index=position}if(charCode=source.charCodeAt(Index),101==charCode||69==charCode){for(charCode=source.charCodeAt(++Index),(43==charCode||45==charCode)&&Index++,position=Index;length>position&&(charCode=source.charCodeAt(position),charCode>=48&&57>=charCode);position++);position==Index&&abort(),Index=position}return+source.slice(begin,Index)}if(isSigned&&abort(),"true"==source.slice(Index,Index+4))return Index+=4,!0;if("false"==source.slice(Index,Index+5))return Index+=5,!1;if("null"==source.slice(Index,Index+4))return Index+=4,null;abort()}return"$"},get=function(value){var results,hasMembers;if("$"==value&&abort(),"string"==typeof value){if("@"==(charIndexBuggy?value.charAt(0):value[0]))return value.slice(1);if("["==value){for(results=[];value=lex(),"]"!=value;hasMembers||(hasMembers=!0))hasMembers&&(","==value?(value=lex(),"]"==value&&abort()):abort()),","==value&&abort(),results.push(get(value));return results}if("{"==value){for(results={};value=lex(),"}"!=value;hasMembers||(hasMembers=!0))hasMembers&&(","==value?(value=lex(),"}"==value&&abort()):abort()),(","==value||"string"!=typeof value||"@"!=(charIndexBuggy?value.charAt(0):value[0])||":"!=lex())&&abort(),results[value.slice(1)]=get(lex());return results}abort()}return value},update=function(source,property,callback){var element=walk(source,property,callback);element===undef?delete source[property]:source[property]=element},walk=function(source,property,callback){var length,value=source[property];if("object"==typeof value&&value)if(getClass.call(value)==arrayClass)for(length=value.length;length--;)update(value,length,callback);else forEach(value,function(property){update(value,property,callback)});return callback.call(source,property,value)};JSON3.parse=function(source,callback){var result,value;return Index=0,Source=""+source,result=get(lex()),"$"!=lex()&&abort(),Index=Source=null,callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}isLoader&&define(function(){return JSON3})}(this)},{}],48:[function(_dereq_,module,exports){function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++)array[i-index]=list[i];return array}module.exports=toArray},{}]},{},[1])(1)}),angular.module("btford.socket-io",[]).provider("socketFactory",function(){"use strict";var n="socket:";this.$get=["$rootScope","$timeout",function(t,e){var r=function(n,t){return t?function(){var r=arguments;e(function(){t.apply(n,r)},0)}:angular.noop};return function(e){e=e||{};var o=e.ioSocket||io.connect(),c=void 0===e.prefix?n:e.prefix,u=e.scope||t,i=function(n,t){o.on(n,t.__ng=r(o,t))},a=function(n,t){o.once(n,t.__ng=r(o,t))},s={on:i,addListener:i,once:a,emit:function(n,t,e){var c=arguments.length-1,e=arguments[c];return"function"==typeof e&&(e=r(o,e),arguments[c]=e),o.emit.apply(o,arguments)},removeListener:function(n,t){return t&&t.__ng&&(arguments[1]=t.__ng),o.removeListener.apply(o,arguments)},removeAllListeners:function(){return o.removeAllListeners.apply(o,arguments)},disconnect:function(n){return o.disconnect(n)},connect:function(){return o.connect()},forward:function(n,t){n instanceof Array==0&&(n=[n]),t||(t=u),n.forEach(function(n){var e=c+n,u=r(o,function(){Array.prototype.unshift.call(arguments,e),t.$broadcast.apply(t,arguments)});t.$on("$destroy",function(){o.removeListener(n,u)}),o.on(n,u)})}};return s}}]}),function(f,define){define([],f)}(function(){return function(){!function(){!function($,window,undefined){function Class(){}function compilePart(part,stringPart){if(stringPart)return"'"+part.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var first=part.charAt(0),rest=part.substring(1);return"="===first?"+("+rest+")+":":"===first?"+$kendoHtmlEncode("+rest+")+":";"+part+";$kendoOutput+="}function pad(number,digits,end){return number+="",digits=digits||2,end=digits-number.length,end?zeros[digits].substring(0,end)+number:number}function getShadows(element){var shadow=element.css(kendo.support.transitions.css+"box-shadow")||element.css("box-shadow"),radius=shadow?shadow.match(boxShadowRegExp)||[0,0,0,0,0]:[0,0,0,0,0],blur=math.max(+radius[3],+(radius[4]||0));return{left:-radius[1]+blur,right:+radius[1]+blur,bottom:+radius[2]+blur}}function wrap(element,autosize){var percentage,browser=support.browser,isRtl="rtl"==element.css("direction");if(element.parent().hasClass("k-animation-container")){var wrapper=element.parent(".k-animation-container"),wrapperStyle=wrapper[0].style;wrapper.is(":hidden")&&wrapper.show(),percentage=percentRegExp.test(wrapperStyle.width)||percentRegExp.test(wrapperStyle.height),percentage||wrapper.css({width:element.outerWidth(),height:element.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}else{var shadows=getShadows(element),width=element[0].style.width,height=element[0].style.height,percentWidth=percentRegExp.test(width),percentHeight=percentRegExp.test(height);browser.opera&&(shadows.left=shadows.right=shadows.bottom=5),percentage=percentWidth||percentHeight,!percentWidth&&(!autosize||autosize&&width)&&(width=element.outerWidth()),!percentHeight&&(!autosize||autosize&&height)&&(height=element.outerHeight()),element.wrap($("<div/>").addClass("k-animation-container").css({width:width,height:height,marginLeft:shadows.left*(isRtl?1:-1),paddingLeft:shadows.left,paddingRight:shadows.right,paddingBottom:shadows.bottom})),percentage&&element.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return browser.msie&&math.floor(browser.version)<=7&&(element.css({zoom:1}),element.children(".k-menu").width(element.width())),element.parent()}function deepExtend(destination){var i=1,length=arguments.length;for(i=1;length>i;i++)deepExtendOne(destination,arguments[i]);return destination}function deepExtendOne(destination,source){var property,propValue,propType,propInit,destProp,ObservableArray=kendo.data.ObservableArray,LazyObservableArray=kendo.data.LazyObservableArray,DataSource=kendo.data.DataSource,HierarchicalDataSource=kendo.data.HierarchicalDataSource;for(property in source)propValue=source[property],propType=typeof propValue,propInit=propType===OBJECT&&null!==propValue?propValue.constructor:null,propInit&&propInit!==Array&&propInit!==ObservableArray&&propInit!==LazyObservableArray&&propInit!==DataSource&&propInit!==HierarchicalDataSource?propValue instanceof Date?destination[property]=new Date(propValue.getTime()):isFunction(propValue.clone)?destination[property]=propValue.clone():(destProp=destination[property],typeof destProp===OBJECT?destination[property]=destProp||{}:destination[property]={},deepExtendOne(destination[property],propValue)):propType!==UNDEFINED&&(destination[property]=propValue);return destination}function testRx(agent,rxs,dflt){for(var rx in rxs)if(rxs.hasOwnProperty(rx)&&rxs[rx].test(agent))return rx;return dflt!==undefined?dflt:agent}function toHyphens(str){return str.replace(/([a-z][A-Z])/g,function(g){return g.charAt(0)+"-"+g.charAt(1).toLowerCase()})}function toCamelCase(str){return str.replace(/\-(\w)/g,function(strMatch,g1){return g1.toUpperCase()})}function getComputedStyles(element,properties){var computedStyle,styles={};return document.defaultView&&document.defaultView.getComputedStyle?(computedStyle=document.defaultView.getComputedStyle(element,""),properties&&$.each(properties,function(idx,value){styles[value]=computedStyle.getPropertyValue(value)})):(computedStyle=element.currentStyle,properties&&$.each(properties,function(idx,value){styles[value]=computedStyle[toCamelCase(value)]})),kendo.size(styles)||(styles=computedStyle),styles}function isScrollable(element){if(element&&element.className&&"string"==typeof element.className&&element.className.indexOf("k-auto-scrollable")>-1)return!0;var overflow=getComputedStyles(element,["overflow"]).overflow;return"auto"==overflow||"scroll"==overflow}function scrollLeft(element,value){var el=element instanceof $?element[0]:element,isRtl=support.isRtl(element),webkit=support.browser.webkit,mozila=support.browser.mozilla;return value===undefined?isRtl&&webkit?el.scrollWidth-el.clientWidth-el.scrollLeft:Math.abs(el.scrollLeft):void(isRtl&&webkit?el.scrollLeft=el.scrollWidth-el.clientWidth-value:isRtl&&mozila?el.scrollLeft=-value:el.scrollLeft=value)}function size(obj){var key,result=0;for(key in obj)obj.hasOwnProperty(key)&&"toJSON"!=key&&result++;return result}function getOffset(element,type,positioned){type||(type="offset");var result=element[type]();return support.browser.msie&&(support.pointers||support.msPointers)&&!positioned&&(result.top-=window.pageYOffset-document.documentElement.scrollTop,result.left-=window.pageXOffset-document.documentElement.scrollLeft),result}function parseEffects(input){var effects={};return each("string"==typeof input?input.split(" "):input,function(idx){effects[idx]=this}),effects}function fx(element){return new kendo.effects.Element(element)}function prepareAnimationOptions(options,duration,reverse,complete){return typeof options===STRING&&(isFunction(duration)&&(complete=duration,duration=400,reverse=!1),isFunction(reverse)&&(complete=reverse,reverse=!1),typeof duration===BOOLEAN&&(reverse=duration,duration=400),options={effects:options,duration:duration,reverse:reverse,complete:complete}),extend({effects:{},duration:400,reverse:!1,init:noop,teardown:noop,hide:!1},options,{completeCallback:options.complete,complete:noop})}function animate(element,options,duration,reverse,complete){for(var instance,idx=0,length=element.length;length>idx;idx++)instance=$(element[idx]),instance.queue(function(){effects.promise(instance,prepareAnimationOptions(options,duration,reverse,complete))});return element}function toggleClass(element,classes,options,add){return classes&&(classes=classes.split(" "),each(classes,function(idx,value){element.toggleClass(value,add)})),element}function htmlEncode(value){return(""+value).replace(ampRegExp,"&amp;").replace(ltRegExp,"&lt;").replace(gtRegExp,"&gt;").replace(quoteRegExp,"&quot;").replace(aposRegExp,"&#39;")}function parseOption(element,option){var value;return 0===option.indexOf("data")&&(option=option.substring(4),option=option.charAt(0).toLowerCase()+option.substring(1)),option=option.replace(dashRegExp,"-$1"),value=element.getAttribute("data-"+kendo.ns+option),null===value?value=undefined:"null"===value?value=null:"true"===value?value=!0:"false"===value?value=!1:numberRegExp.test(value)?value=parseFloat(value):jsonRegExp.test(value)&&!jsonFormatRegExp.test(value)&&(value=new Function("return ("+value+")")()),value}function parseOptions(element,options){var option,value,result={};for(option in options)value=parseOption(element,option),value!==undefined&&(templateRegExp.test(option)&&(value=kendo.template($("#"+value).html())),result[option]=value);return result}function containmentComparer(a,b){return $.contains(a,b)?-1:1}function resizableWidget(){var widget=$(this);return $.inArray(widget.attr("data-"+kendo.ns+"role"),["slider","rangeslider"])>-1||widget.is(":visible")}function focusable(element,isTabIndexNotNaN){var nodeName=element.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}function kendoJQuery(selector,context){return new kendoJQuery.fn.init(selector,context)}var Template,kendo=window.kendo=window.kendo||{cultures:{}},extend=$.extend,each=$.each,isArray=$.isArray,proxy=$.proxy,noop=$.noop,math=Math,JSON=window.JSON||{},support={},percentRegExp=/%/,formatRegExp=/\{(\d+)(:[^\}]+)?\}/g,boxShadowRegExp=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,numberRegExp=/^(\+|-?)\d+(\.?)\d*$/,FUNCTION="function",STRING="string",NUMBER="number",OBJECT="object",NULL="null",BOOLEAN="boolean",UNDEFINED="undefined",getterCache={},setterCache={},slice=[].slice,globalize=window.Globalize;kendo.version="2015.3.1023",Class.extend=function(proto){var member,fn,base=function(){},that=this,subclass=proto&&proto.init?proto.init:function(){that.apply(this,arguments)};base.prototype=that.prototype,fn=subclass.fn=subclass.prototype=new base;for(member in proto)null!=proto[member]&&proto[member].constructor===Object?fn[member]=extend(!0,{},base.prototype[member],proto[member]):fn[member]=proto[member];return fn.constructor=subclass,subclass.extend=that.extend,subclass},Class.prototype._initOptions=function(options){this.options=deepExtend({},this.options,options)};var isFunction=kendo.isFunction=function(fn){return"function"==typeof fn},preventDefault=function(){this._defaultPrevented=!0},isDefaultPrevented=function(){return this._defaultPrevented===!0},Observable=Class.extend({init:function(){this._events={}},bind:function(eventName,handlers,one){var idx,length,original,handler,events,that=this,eventNames=typeof eventName===STRING?[eventName]:eventName,handlersIsFunction=typeof handlers===FUNCTION;if(handlers===undefined){for(idx in eventName)that.bind(idx,eventName[idx]);return that}for(idx=0,length=eventNames.length;length>idx;idx++)eventName=eventNames[idx],handler=handlersIsFunction?handlers:handlers[eventName],handler&&(one&&(original=handler,handler=function(){that.unbind(eventName,handler),original.apply(that,arguments)},handler.original=original),events=that._events[eventName]=that._events[eventName]||[],events.push(handler));return that},one:function(eventNames,handlers){return this.bind(eventNames,handlers,!0)},first:function(eventName,handlers){var idx,length,handler,events,that=this,eventNames=typeof eventName===STRING?[eventName]:eventName,handlersIsFunction=typeof handlers===FUNCTION;for(idx=0,length=eventNames.length;length>idx;idx++)eventName=eventNames[idx],handler=handlersIsFunction?handlers:handlers[eventName],handler&&(events=that._events[eventName]=that._events[eventName]||[],events.unshift(handler));return that},trigger:function(eventName,e){var idx,length,that=this,events=that._events[eventName];if(events){for(e=e||{},e.sender=that,e._defaultPrevented=!1,e.preventDefault=preventDefault,e.isDefaultPrevented=isDefaultPrevented,events=events.slice(),idx=0,length=events.length;length>idx;idx++)events[idx].call(that,e);return e._defaultPrevented===!0}return!1},unbind:function(eventName,handler){var idx,that=this,events=that._events[eventName];if(eventName===undefined)that._events={};else if(events)if(handler)for(idx=events.length-1;idx>=0;idx--)(events[idx]===handler||events[idx].original===handler)&&events.splice(idx,1);else that._events[eventName]=[];return that}}),argumentNameRegExp=/^\w+/,encodeRegExp=/\$\{([^}]*)\}/g,escapedCurlyRegExp=/\\\}/g,curlyRegExp=/__CURLY__/g,escapedSharpRegExp=/\\#/g,sharpRegExp=/__SHARP__/g,zeros=["","0","00","000","0000"];Template={paramName:"data",useWithBlock:!0,render:function(template,data){var idx,length,html="";for(idx=0,length=data.length;length>idx;idx++)html+=template(data[idx]);return html},compile:function(template,options){var fn,parts,idx,settings=extend({},this,options),paramName=settings.paramName,argumentName=paramName.match(argumentNameRegExp)[0],useWithBlock=settings.useWithBlock,functionBody="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(isFunction(template))return template;for(functionBody+=useWithBlock?"with("+paramName+"){":"",functionBody+="$kendoOutput=",parts=template.replace(escapedCurlyRegExp,"__CURLY__").replace(encodeRegExp,"#=$kendoHtmlEncode($1)#").replace(curlyRegExp,"}").replace(escapedSharpRegExp,"__SHARP__").split("#"),idx=0;idx<parts.length;idx++)functionBody+=compilePart(parts[idx],idx%2===0);functionBody+=useWithBlock?";}":";",functionBody+="return $kendoOutput;",functionBody=functionBody.replace(sharpRegExp,"#");try{return fn=new Function(argumentName,functionBody),fn._slotCount=Math.floor(parts.length/2),fn}catch(e){throw new Error(kendo.format("Invalid template:'{0}' Generated code:'{1}'",template,functionBody))}}},function(){function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c===STRING?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,type,mind=gap,value=holder[key];if(value&&typeof value===OBJECT&&typeof value.toJSON===FUNCTION&&(value=value.toJSON(key)),typeof rep===FUNCTION&&(value=rep.call(holder,key,value)),type=typeof value,type===STRING)return quote(value);if(type===NUMBER)return isFinite(value)?String(value):NULL;if(type===BOOLEAN||type===NULL)return String(value);if(type===OBJECT){if(!value)return NULL;if(gap+=indent,partial=[],"[object Array]"===toString.apply(value)){for(length=value.length,i=0;length>i;i++)partial[i]=str(i,value)||NULL;return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&typeof rep===OBJECT)for(length=rep.length,i=0;length>i;i++)typeof rep[i]===STRING&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}var gap,indent,rep,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},toString={}.toString;typeof Date.prototype.toJSON!==FUNCTION&&(Date.prototype.toJSON=function(){var that=this;return isFinite(that.valueOf())?pad(that.getUTCFullYear(),4)+"-"+pad(that.getUTCMonth()+1)+"-"+pad(that.getUTCDate())+"T"+pad(that.getUTCHours())+":"+pad(that.getUTCMinutes())+":"+pad(that.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof JSON.stringify!==FUNCTION&&(JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="",typeof space===NUMBER)for(i=0;space>i;i+=1)indent+=" ";else typeof space===STRING&&(indent=space);if(rep=replacer,replacer&&typeof replacer!==FUNCTION&&(typeof replacer!==OBJECT||typeof replacer.length!==NUMBER))throw new Error("JSON.stringify");return str("",{"":value})})}(),function(){function findCulture(culture){if(culture){if(culture.numberFormat)return culture;if(typeof culture===STRING){var cultures=kendo.cultures;return cultures[culture]||cultures[culture.split("-")[0]]||null}return null}return null}function getCulture(culture){return culture&&(culture=findCulture(culture)),culture||kendo.cultures.current}function expandNumberFormat(numberFormat){numberFormat.groupSizes=numberFormat.groupSize,numberFormat.percent.groupSizes=numberFormat.percent.groupSize,numberFormat.currency.groupSizes=numberFormat.currency.groupSize}function formatDate(date,format,culture){culture=getCulture(culture);var calendar=culture.calendars.standard,days=calendar.days,months=calendar.months;return format=calendar.patterns[format]||format,format.replace(dateFormatRegExp,function(match){var minutes,result,sign;return"d"===match?result=date.getDate():"dd"===match?result=pad(date.getDate()):"ddd"===match?result=days.namesAbbr[date.getDay()]:"dddd"===match?result=days.names[date.getDay()]:"M"===match?result=date.getMonth()+1:"MM"===match?result=pad(date.getMonth()+1):"MMM"===match?result=months.namesAbbr[date.getMonth()]:"MMMM"===match?result=months.names[date.getMonth()]:"yy"===match?result=pad(date.getFullYear()%100):"yyyy"===match?result=pad(date.getFullYear(),4):"h"===match?result=date.getHours()%12||12:"hh"===match?result=pad(date.getHours()%12||12):"H"===match?result=date.getHours():"HH"===match?result=pad(date.getHours()):"m"===match?result=date.getMinutes():"mm"===match?result=pad(date.getMinutes()):"s"===match?result=date.getSeconds():"ss"===match?result=pad(date.getSeconds()):"f"===match?result=math.floor(date.getMilliseconds()/100):"ff"===match?(result=date.getMilliseconds(),result>99&&(result=math.floor(result/10)),result=pad(result)):"fff"===match?result=pad(date.getMilliseconds(),3):"tt"===match?result=date.getHours()<12?calendar.AM[0]:calendar.PM[0]:"zzz"===match?(minutes=date.getTimezoneOffset(),sign=0>minutes,result=math.abs(minutes/60).toString().split(".")[0],minutes=math.abs(minutes)-60*result,result=(sign?"+":"-")+pad(result),result+=":"+pad(minutes)):("zz"===match||"z"===match)&&(result=date.getTimezoneOffset()/60,sign=0>result,result=math.abs(result).toString().split(".")[0],result=(sign?"+":"-")+("zz"===match?pad(result):result)),result!==undefined?result:match.slice(1,match.length-1)})}function formatNumber(number,format,culture){culture=getCulture(culture);var symbol,isCurrency,isPercent,customPrecision,formatAndPrecision,integer,fraction,integerLength,fractionLength,idx,length,ch,hasGroup,hasNegativeFormat,decimalIndex,sharpIndex,zeroIndex,hasZero,hasSharp,percentIndex,currencyIndex,startZeroIndex,end,numberFormat=culture.numberFormat,groupSize=numberFormat.groupSize[0],groupSeparator=numberFormat[COMMA],decimal=numberFormat[POINT],precision=numberFormat.decimals,pattern=numberFormat.pattern[0],literals=[],negative=0>number,replacement=EMPTY,value=EMPTY,start=-1;if(number===undefined)return EMPTY;if(!isFinite(number))return number;if(!format)return culture.name.length?number.toLocaleString():number.toString();if(formatAndPrecision=standardFormatRegExp.exec(format)){if(format=formatAndPrecision[1].toLowerCase(),isCurrency="c"===format,isPercent="p"===format,(isCurrency||isPercent)&&(numberFormat=isCurrency?numberFormat.currency:numberFormat.percent,groupSize=numberFormat.groupSize[0],groupSeparator=numberFormat[COMMA],decimal=numberFormat[POINT],precision=numberFormat.decimals,symbol=numberFormat.symbol,pattern=numberFormat.pattern[negative?0:1]),customPrecision=formatAndPrecision[2],customPrecision&&(precision=+customPrecision),"e"===format)return customPrecision?number.toExponential(precision):number.toExponential();if(isPercent&&(number*=100),number=round(number,precision),negative=0>number,number=number.split(POINT),integer=number[0],fraction=number[1],negative&&(integer=integer.substring(1)),value=integer,integerLength=integer.length,integerLength>=groupSize)for(value=EMPTY,idx=0;integerLength>idx;idx++)idx>0&&(integerLength-idx)%groupSize===0&&(value+=groupSeparator),value+=integer.charAt(idx);if(fraction&&(value+=decimal+fraction),"n"===format&&!negative)return value;for(number=EMPTY,idx=0,length=pattern.length;length>idx;idx++)ch=pattern.charAt(idx),number+="n"===ch?value:"$"===ch||"%"===ch?symbol:ch;return number}if(negative&&(number=-number),(format.indexOf("'")>-1||format.indexOf('"')>-1||format.indexOf("\\")>-1)&&(format=format.replace(literalRegExp,function(match){var quoteChar=match.charAt(0).replace("\\",""),literal=match.slice(1).replace(quoteChar,"");return literals.push(literal),PLACEHOLDER})),format=format.split(";"),negative&&format[1])format=format[1],hasNegativeFormat=!0;else if(0===number){if(format=format[2]||format[0],-1==format.indexOf(SHARP)&&-1==format.indexOf(ZERO))return format}else format=format[0];if(percentIndex=format.indexOf("%"),currencyIndex=format.indexOf("$"),isPercent=-1!=percentIndex,isCurrency=-1!=currencyIndex,isPercent&&(number*=100),isCurrency&&"\\"===format[currencyIndex-1]&&(format=format.split("\\").join(""),isCurrency=!1),(isCurrency||isPercent)&&(numberFormat=isCurrency?numberFormat.currency:numberFormat.percent,groupSize=numberFormat.groupSize[0],groupSeparator=numberFormat[COMMA],decimal=numberFormat[POINT],precision=numberFormat.decimals,symbol=numberFormat.symbol),hasGroup=format.indexOf(COMMA)>-1,hasGroup&&(format=format.replace(commaRegExp,EMPTY)),decimalIndex=format.indexOf(POINT),length=format.length,-1!=decimalIndex?(fraction=number.toString().split("e"),fraction=fraction[1]?round(number,Math.abs(fraction[1])):fraction[0],fraction=fraction.split(POINT)[1]||EMPTY,zeroIndex=format.lastIndexOf(ZERO)-decimalIndex,sharpIndex=format.lastIndexOf(SHARP)-decimalIndex,hasZero=zeroIndex>-1,hasSharp=sharpIndex>-1,idx=fraction.length,hasZero||hasSharp||(format=format.substring(0,decimalIndex)+format.substring(decimalIndex+1),length=format.length,decimalIndex=-1,idx=0),hasZero&&zeroIndex>sharpIndex?idx=zeroIndex:sharpIndex>zeroIndex&&(hasSharp&&idx>sharpIndex?idx=sharpIndex:hasZero&&zeroIndex>idx&&(idx=zeroIndex)),idx>-1&&(number=round(number,idx))):number=round(number),sharpIndex=format.indexOf(SHARP),startZeroIndex=zeroIndex=format.indexOf(ZERO),start=-1==sharpIndex&&-1!=zeroIndex?zeroIndex:-1!=sharpIndex&&-1==zeroIndex?sharpIndex:sharpIndex>zeroIndex?zeroIndex:sharpIndex,sharpIndex=format.lastIndexOf(SHARP),zeroIndex=format.lastIndexOf(ZERO),end=-1==sharpIndex&&-1!=zeroIndex?zeroIndex:-1!=sharpIndex&&-1==zeroIndex?sharpIndex:sharpIndex>zeroIndex?sharpIndex:zeroIndex,start==length&&(end=start),-1!=start){if(value=number.toString().split(POINT),integer=value[0],fraction=value[1]||EMPTY,integerLength=integer.length,fractionLength=fraction.length,negative&&-1*number>=0&&(negative=!1),hasGroup)if(integerLength===groupSize&&decimalIndex-startZeroIndex>integerLength)integer=groupSeparator+integer;else if(integerLength>groupSize){for(value=EMPTY,idx=0;integerLength>idx;idx++)idx>0&&(integerLength-idx)%groupSize===0&&(value+=groupSeparator),value+=integer.charAt(idx);integer=value}for(number=format.substring(0,start),negative&&!hasNegativeFormat&&(number+="-"),idx=start;length>idx;idx++){if(ch=format.charAt(idx),-1==decimalIndex){if(integerLength>end-idx){number+=integer;break}}else if(-1!=zeroIndex&&idx>zeroIndex&&(replacement=EMPTY),integerLength>=decimalIndex-idx&&decimalIndex-idx>-1&&(number+=integer,idx=decimalIndex),decimalIndex===idx){number+=(fraction?decimal:EMPTY)+fraction,idx+=end-decimalIndex+1;continue}ch===ZERO?(number+=ch,replacement=ch):ch===SHARP&&(number+=replacement)}if(end>=start&&(number+=format.substring(end+1)),isCurrency||isPercent){for(value=EMPTY,idx=0,length=number.length;length>idx;idx++)ch=number.charAt(idx),value+="$"===ch||"%"===ch?symbol:ch;number=value}if(length=literals.length)for(idx=0;length>idx;idx++)number=number.replace(PLACEHOLDER,literals[idx])}return number}var dateFormatRegExp=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,standardFormatRegExp=/^(n|c|p|e)(\d*)$/i,literalRegExp=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,commaRegExp=/\,/g,EMPTY="",POINT=".",COMMA=",",SHARP="#",ZERO="0",PLACEHOLDER="??",EN="en-US",objectToString={}.toString;kendo.cultures["en-US"]={name:EN,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],
decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},kendo.culture=function(cultureName){var culture,cultures=kendo.cultures;return cultureName===undefined?cultures.current:(culture=findCulture(cultureName)||cultures[EN],culture.calendar=culture.calendars.standard,cultures.current=culture,globalize&&!globalize.load&&expandNumberFormat(culture.numberFormat),void 0)},kendo.findCulture=findCulture,kendo.getCulture=getCulture,kendo.culture(EN);var round=function(value,precision){return precision=precision||0,value=value.toString().split("e"),value=Math.round(+(value[0]+"e"+(value[1]?+value[1]+precision:precision))),value=value.toString().split("e"),value=+(value[0]+"e"+(value[1]?+value[1]-precision:-precision)),value.toFixed(precision)},toString=function(value,fmt,culture){if(fmt){if("[object Date]"===objectToString.call(value))return formatDate(value,fmt,culture);if(typeof value===NUMBER)return formatNumber(value,fmt,culture)}return value!==undefined?value:""};globalize&&!globalize.load&&(toString=function(value,format,culture){return $.isPlainObject(culture)&&(culture=culture.name),globalize.format(value,format,culture)}),kendo.format=function(fmt){var values=arguments;return fmt.replace(formatRegExp,function(match,index,placeholderFormat){var value=values[parseInt(index,10)+1];return toString(value,placeholderFormat?placeholderFormat.substring(1):"")})},kendo._extractFormat=function(format){return"{0:"===format.slice(0,3)&&(format=format.slice(3,format.length-1)),format},kendo._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},kendo._round=round,kendo.toString=toString}(),function(){function outOfRange(value,start,end){return!(value>=start&&end>=value)}function designatorPredicate(designator){return designator.charAt(0)}function mapDesignators(designators){return $.map(designators,designatorPredicate)}function adjustDST(date,hours){hours||23!==date.getHours()||date.setHours(date.getHours()+2)}function lowerArray(data){for(var idx=0,length=data.length,array=[];length>idx;idx++)array[idx]=(data[idx]+"").toLowerCase();return array}function lowerLocalInfo(localInfo){var property,newLocalInfo={};for(property in localInfo)newLocalInfo[property]=lowerArray(localInfo[property]);return newLocalInfo}function parseExact(value,format,culture){if(!value)return null;var ch,count,length,pattern,pmHour,UTC,matches,amDesignators,pmDesignators,hoursOffset,minutesOffset,hasTime,match,lookAhead=function(match){for(var i=0;format[idx]===match;)i++,idx++;return i>0&&(idx-=1),i},getNumber=function(size){var rg=numberRegExp[size]||new RegExp("^\\d{1,"+size+"}"),match=value.substr(valueIdx,size).match(rg);return match?(match=match[0],valueIdx+=match.length,parseInt(match,10)):null},getIndexByName=function(names,lower){for(var name,nameLength,subValue,i=0,length=names.length,matchLength=0,matchIdx=0;length>i;i++)name=names[i],nameLength=name.length,subValue=value.substr(valueIdx,nameLength),lower&&(subValue=subValue.toLowerCase()),subValue==name&&nameLength>matchLength&&(matchLength=nameLength,matchIdx=i);return matchLength?(valueIdx+=matchLength,matchIdx+1):null},checkLiteral=function(){var result=!1;return value.charAt(valueIdx)===format[idx]&&(valueIdx++,result=!0),result},calendar=culture.calendars.standard,year=null,month=null,day=null,hours=null,minutes=null,seconds=null,milliseconds=null,idx=0,valueIdx=0,literal=!1,date=new Date,twoDigitYearMax=calendar.twoDigitYearMax||2029,defaultYear=date.getFullYear();for(format||(format="d"),pattern=calendar.patterns[format],pattern&&(format=pattern),format=format.split(""),length=format.length;length>idx;idx++)if(ch=format[idx],literal)"'"===ch?literal=!1:checkLiteral();else if("d"===ch){if(count=lookAhead("d"),calendar._lowerDays||(calendar._lowerDays=lowerLocalInfo(calendar.days)),null!==day&&count>2)continue;if(day=3>count?getNumber(2):getIndexByName(calendar._lowerDays[3==count?"namesAbbr":"names"],!0),null===day||outOfRange(day,1,31))return null}else if("M"===ch){if(count=lookAhead("M"),calendar._lowerMonths||(calendar._lowerMonths=lowerLocalInfo(calendar.months)),month=3>count?getNumber(2):getIndexByName(calendar._lowerMonths[3==count?"namesAbbr":"names"],!0),null===month||outOfRange(month,1,12))return null;month-=1}else if("y"===ch){if(count=lookAhead("y"),year=getNumber(count),null===year)return null;2==count&&("string"==typeof twoDigitYearMax&&(twoDigitYearMax=defaultYear+parseInt(twoDigitYearMax,10)),year=defaultYear-defaultYear%100+year,year>twoDigitYearMax&&(year-=100))}else if("h"===ch){if(lookAhead("h"),hours=getNumber(2),12==hours&&(hours=0),null===hours||outOfRange(hours,0,11))return null}else if("H"===ch){if(lookAhead("H"),hours=getNumber(2),null===hours||outOfRange(hours,0,23))return null}else if("m"===ch){if(lookAhead("m"),minutes=getNumber(2),null===minutes||outOfRange(minutes,0,59))return null}else if("s"===ch){if(lookAhead("s"),seconds=getNumber(2),null===seconds||outOfRange(seconds,0,59))return null}else if("f"===ch){if(count=lookAhead("f"),match=value.substr(valueIdx,count).match(numberRegExp[3]),milliseconds=getNumber(count),null!==milliseconds&&(match=match[0].length,3>match&&(milliseconds*=Math.pow(10,3-match)),count>3&&(milliseconds=parseInt(milliseconds.toString().substring(0,3),10))),null===milliseconds||outOfRange(milliseconds,0,999))return null}else if("t"===ch){if(count=lookAhead("t"),amDesignators=calendar.AM,pmDesignators=calendar.PM,1===count&&(amDesignators=mapDesignators(amDesignators),pmDesignators=mapDesignators(pmDesignators)),pmHour=getIndexByName(pmDesignators),!pmHour&&!getIndexByName(amDesignators))return null}else if("z"===ch){if(UTC=!0,count=lookAhead("z"),"Z"===value.substr(valueIdx,1)){checkLiteral();continue}if(matches=value.substr(valueIdx,6).match(count>2?longTimeZoneRegExp:shortTimeZoneRegExp),!matches)return null;if(matches=matches[0].split(":"),hoursOffset=matches[0],minutesOffset=matches[1],!minutesOffset&&hoursOffset.length>3&&(valueIdx=hoursOffset.length-2,minutesOffset=hoursOffset.substring(valueIdx),hoursOffset=hoursOffset.substring(0,valueIdx)),hoursOffset=parseInt(hoursOffset,10),outOfRange(hoursOffset,-12,13))return null;if(count>2&&(minutesOffset=parseInt(minutesOffset,10),isNaN(minutesOffset)||outOfRange(minutesOffset,0,59)))return null}else if("'"===ch)literal=!0,checkLiteral();else if(!checkLiteral())return null;return hasTime=null!==hours||null!==minutes||seconds||null,null===year&&null===month&&null===day&&hasTime?(year=defaultYear,month=date.getMonth(),day=date.getDate()):(null===year&&(year=defaultYear),null===day&&(day=1)),pmHour&&12>hours&&(hours+=12),UTC?(hoursOffset&&(hours+=-hoursOffset),minutesOffset&&(minutes+=-minutesOffset),value=new Date(Date.UTC(year,month,day,hours,minutes,seconds,milliseconds))):(value=new Date(year,month,day,hours,minutes,seconds,milliseconds),adjustDST(value,hours)),100>year&&value.setFullYear(year),value.getDate()!==day&&UTC===undefined?null:value}function parseMicrosoftFormatOffset(offset){var sign="-"===offset.substr(0,1)?-1:1;return offset=offset.substring(1),offset=60*parseInt(offset.substr(0,2),10)+parseInt(offset.substring(2),10),sign*offset}var nonBreakingSpaceRegExp=/\u00A0/g,exponentRegExp=/[eE][\-+]?[0-9]+/,shortTimeZoneRegExp=/[+|\-]\d{1,2}/,longTimeZoneRegExp=/[+|\-]\d{1,2}:?\d{2}/,dateRegExp=/^\/Date\((.*?)\)\/$/,offsetRegExp=/[+-]\d*/,formatsSequence=["G","g","d","F","D","y","m","T","t"],numberRegExp={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},objectToString={}.toString;kendo.parseDate=function(value,formats,culture){if("[object Date]"===objectToString.call(value))return value;var length,patterns,tzoffset,idx=0,date=null;if(value&&0===value.indexOf("/D")&&(date=dateRegExp.exec(value)))return date=date[1],tzoffset=offsetRegExp.exec(date.substring(1)),date=new Date(parseInt(date,10)),tzoffset&&(tzoffset=parseMicrosoftFormatOffset(tzoffset[0]),date=kendo.timezone.apply(date,0),date=kendo.timezone.convert(date,0,-1*tzoffset)),date;if(culture=kendo.getCulture(culture),!formats){for(formats=[],patterns=culture.calendar.patterns,length=formatsSequence.length;length>idx;idx++)formats[idx]=patterns[formatsSequence[idx]];idx=0,formats=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fff","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"].concat(formats)}for(formats=isArray(formats)?formats:[formats],length=formats.length;length>idx;idx++)if(date=parseExact(value,formats[idx],culture))return date;return date},kendo.parseInt=function(value,culture){var result=kendo.parseFloat(value,culture);return result&&(result=0|result),result},kendo.parseFloat=function(value,culture,format){if(!value&&0!==value)return null;if(typeof value===NUMBER)return value;value=value.toString(),culture=kendo.getCulture(culture);var parts,isPercent,number=culture.numberFormat,percent=number.percent,currency=number.currency,symbol=currency.symbol,percentSymbol=percent.symbol,negative=value.indexOf("-");return exponentRegExp.test(value)?(value=parseFloat(value.replace(number["."],".")),isNaN(value)&&(value=null),value):negative>0?null:(negative=negative>-1,value.indexOf(symbol)>-1||format&&format.toLowerCase().indexOf("c")>-1?(number=currency,parts=number.pattern[0].replace("$",symbol).split("n"),value.indexOf(parts[0])>-1&&value.indexOf(parts[1])>-1&&(value=value.replace(parts[0],"").replace(parts[1],""),negative=!0)):value.indexOf(percentSymbol)>-1&&(isPercent=!0,number=percent,symbol=percentSymbol),value=value.replace("-","").replace(symbol,"").replace(nonBreakingSpaceRegExp," ").split(number[","].replace(nonBreakingSpaceRegExp," ")).join("").replace(number["."],"."),value=parseFloat(value),isNaN(value)?value=null:negative&&(value*=-1),value&&isPercent&&(value/=100),value)},globalize&&!globalize.load&&(kendo.parseDate=function(value,format,culture){return"[object Date]"===objectToString.call(value)?value:globalize.parseDate(value,format,culture)},kendo.parseFloat=function(value,culture){return typeof value===NUMBER?value:value===undefined||null===value?null:($.isPlainObject(culture)&&(culture=culture.name),value=globalize.parseFloat(value,culture),isNaN(value)?null:value)})}(),function(){support._scrollbar=undefined,support.scrollbar=function(refresh){if(isNaN(support._scrollbar)||refresh){var result,div=document.createElement("div");return div.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",div.innerHTML="&nbsp;",document.body.appendChild(div),support._scrollbar=result=div.offsetWidth-div.scrollWidth,document.body.removeChild(div),result}return support._scrollbar},support.isRtl=function(element){return $(element).closest(".k-rtl").length>0};var table=document.createElement("table");try{table.innerHTML="<tr><td></td></tr>",support.tbodyInnerHtml=!0}catch(e){support.tbodyInnerHtml=!1}support.touch="ontouchstart"in window,support.msPointers=window.MSPointerEvent,support.pointers=window.PointerEvent;var transitions=support.transitions=!1,transforms=support.transforms=!1,elementProto="HTMLElement"in window?HTMLElement.prototype:[];support.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,each(["Moz","webkit","O","ms"],function(){var prefix=this.toString(),hasTransitions=typeof table.style[prefix+"Transition"]===STRING;if(hasTransitions||typeof table.style[prefix+"Transform"]===STRING){var lowPrefix=prefix.toLowerCase();return transforms={css:"ms"!=lowPrefix?"-"+lowPrefix+"-":"",prefix:prefix,event:"o"===lowPrefix||"webkit"===lowPrefix?lowPrefix:""},hasTransitions&&(transitions=transforms,transitions.event=transitions.event?transitions.event+"TransitionEnd":"transitionend"),!1}}),table=null,support.transforms=transforms,support.transitions=transitions,support.devicePixelRatio=window.devicePixelRatio===undefined?1:window.devicePixelRatio;try{support.screenWidth=window.outerWidth||window.screen?window.screen.availWidth:window.innerWidth,support.screenHeight=window.outerHeight||window.screen?window.screen.availHeight:window.innerHeight}catch(e){support.screenWidth=window.screen.availWidth,support.screenHeight=window.screen.availHeight}support.detectOS=function(ua){var minorVersion,os=!1,match=[],notAndroidPhone=!/mobile safari/i.test(ua),agentRxs={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},osRxs={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},formFactorRxs={tablet:/playbook|ipad|fire/i},browserRxs={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var agent in agentRxs)if(agentRxs.hasOwnProperty(agent)&&(match=ua.match(agentRxs[agent]))){if("windows"==agent&&"plugins"in navigator)return!1;os={},os.device=agent,os.tablet=testRx(agent,formFactorRxs,!1),os.browser=testRx(ua,browserRxs,"default"),os.name=testRx(agent,osRxs),os[os.name]=!0,os.majorVersion=match[2],os.minorVersion=match[3].replace("_","."),minorVersion=os.minorVersion.replace(".","").substr(0,2),os.flatVersion=os.majorVersion+minorVersion+new Array(3-(minorVersion.length<3?minorVersion.length:2)).join("0"),os.cordova=typeof window.PhoneGap!==UNDEFINED||typeof window.cordova!==UNDEFINED,os.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||os.cordova,os.android&&(support.devicePixelRatio<1.5&&os.flatVersion<400||notAndroidPhone)&&(support.screenWidth>800||support.screenHeight>800)&&(os.tablet=agent);break}return os};var mobileOS=support.mobileOS=support.detectOS(navigator.userAgent);support.wpDevicePixelRatio=mobileOS.wp?screen.width/320:0,support.kineticScrollNeeded=mobileOS&&(support.touch||support.msPointers||support.pointers),support.hasNativeScrolling=!1,(mobileOS.ios||mobileOS.android&&mobileOS.majorVersion>2||mobileOS.wp)&&(support.hasNativeScrolling=mobileOS),support.mouseAndTouchPresent=support.touch&&!(support.mobileOS.ios||support.mobileOS.android),support.detectBrowser=function(ua){var browser=!1,match=[],browserRxs={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var agent in browserRxs)if(browserRxs.hasOwnProperty(agent)&&(match=ua.match(browserRxs[agent]))){browser={},browser[agent]=!0,browser[match[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,browser.version=parseInt(document.documentMode||match[2],10);break}return browser},support.browser=support.detectBrowser(navigator.userAgent),support.zoomLevel=function(){try{var browser=support.browser,ie11WidthCorrection=0,docEl=document.documentElement;return browser.msie&&11==browser.version&&docEl.scrollHeight>docEl.clientHeight&&!support.touch&&(ie11WidthCorrection=support.scrollbar()),support.touch?docEl.clientWidth/window.innerWidth:browser.msie&&browser.version>=10?((top||window).document.documentElement.offsetWidth+ie11WidthCorrection)/(top||window).innerWidth:1}catch(e){return 1}},support.cssBorderSpacing="undefined"!=typeof document.documentElement.style.borderSpacing&&!(support.browser.msie&&support.browser.version<8),function(browser){var cssClass="",docElement=$(document.documentElement),majorVersion=parseInt(browser.version,10);browser.msie?cssClass="ie":browser.mozilla?cssClass="ff":browser.safari?cssClass="safari":browser.webkit?cssClass="webkit":browser.opera?cssClass="opera":browser.edge&&(cssClass="edge"),cssClass&&(cssClass="k-"+cssClass+" k-"+cssClass+majorVersion),support.mobileOS&&(cssClass+=" k-mobile"),docElement.addClass(cssClass)}(support.browser),support.eventCapture=document.documentElement.addEventListener;var input=document.createElement("input");support.placeholder="placeholder"in input,support.propertyChangeEvent="onpropertychange"in input,support.input=function(){for(var type,types=["number","date","time","month","week","datetime","datetime-local"],length=types.length,value="test",result={},idx=0;length>idx;idx++)type=types[idx],input.setAttribute("type",type),input.value=value,result[type.replace("-","")]="text"!==input.type&&input.value!==value;return result}(),input.style.cssText="float:left;",support.cssFloat=!!input.style.cssFloat,input=null,support.stableSort=function(){for(var threshold=513,sorted=[{index:0,field:"b"}],i=1;threshold>i;i++)sorted.push({index:i,field:"a"});return sorted.sort(function(a,b){return a.field>b.field?1:a.field<b.field?-1:0}),1===sorted[0].index}(),support.matchesSelector=elementProto.webkitMatchesSelector||elementProto.mozMatchesSelector||elementProto.msMatchesSelector||elementProto.oMatchesSelector||elementProto.matchesSelector||elementProto.matches||function(selector){for(var nodeList=document.querySelectorAll?(this.parentNode||document).querySelectorAll(selector)||[]:$(selector),i=nodeList.length;i--;)if(nodeList[i]==this)return!0;return!1},support.pushState=window.history&&window.history.pushState;var documentMode=document.documentMode;support.hashChange="onhashchange"in window&&!(support.browser.msie&&(!documentMode||8>=documentMode)),support.customElements="registerElement"in window.document}();var directions={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},effects={};$.extend(effects,{enabled:!0,Element:function(element){this.element=$(element)},promise:function(element,options){element.is(":visible")||element.css({display:element.data("olddisplay")||"block"}).css("display"),options.hide&&element.data("olddisplay",element.css("display")).hide(),options.init&&options.init(),options.completeCallback&&options.completeCallback(element),element.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),effects.promiseShim=effects.promise,"kendoAnimate"in $.fn||extend($.fn,{kendoStop:function(clearQueue,gotoEnd){return this.stop(clearQueue,gotoEnd)},kendoAnimate:function(options,duration,reverse,complete){return animate(this,options,duration,reverse,complete)},kendoAddClass:function(classes,options){return kendo.toggleClass(this,classes,options,!0)},kendoRemoveClass:function(classes,options){return kendo.toggleClass(this,classes,options,!1)},kendoToggleClass:function(classes,options,toggle){return kendo.toggleClass(this,classes,options,toggle)}});var ampRegExp=/&/g,ltRegExp=/</g,quoteRegExp=/"/g,aposRegExp=/'/g,gtRegExp=/>/g,eventTarget=function(e){return e.target};support.touch&&(eventTarget=function(e){var touches="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return touches?document.elementFromPoint(touches[0].clientX,touches[0].clientY):e.target},each(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(m,value){$.fn[value]=function(callback){return this.bind(value,callback)}})),support.touch?support.mobileOS?(support.mousedown="touchstart",support.mouseup="touchend",support.mousemove="touchmove",support.mousecancel="touchcancel",support.click="touchend",support.resize="orientationchange"):(support.mousedown="mousedown touchstart",support.mouseup="mouseup touchend",support.mousemove="mousemove touchmove",support.mousecancel="mouseleave touchcancel",support.click="click",support.resize="resize"):support.pointers?(support.mousemove="pointermove",support.mousedown="pointerdown",support.mouseup="pointerup",support.mousecancel="pointercancel",support.click="pointerup",support.resize="orientationchange resize"):support.msPointers?(support.mousemove="MSPointerMove",support.mousedown="MSPointerDown",support.mouseup="MSPointerUp",support.mousecancel="MSPointerCancel",support.click="MSPointerUp",support.resize="orientationchange resize"):(support.mousemove="mousemove",support.mousedown="mousedown",support.mouseup="mouseup",support.mousecancel="mouseleave",support.click="click",support.resize="resize");var wrapExpression=function(members,paramName){var index,idx,length,member,result=paramName||"d",count=1;for(idx=0,length=members.length;length>idx;idx++)member=members[idx],""!==member&&(index=member.indexOf("["),0!==index&&(-1==index?member="."+member:(count++,member="."+member.substring(0,index)+" || {})"+member.substring(index))),count++,result+=member+(length-1>idx?" || {})":")"));return new Array(count).join("(")+result},localUrlRe=/^([a-z]+:)?\/\//i;extend(kendo,{widgets:[],_widgetRegisteredCallbacks:[],ui:kendo.ui||{},fx:kendo.fx||fx,effects:kendo.effects||effects,mobile:kendo.mobile||{},data:kendo.data||{},dataviz:kendo.dataviz||{},drawing:kendo.drawing||{},spreadsheet:{},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:kendo.support||support,animate:kendo.animate||animate,ns:"",attr:function(value){return"data-"+kendo.ns+value},getShadows:getShadows,wrap:wrap,deepExtend:deepExtend,getComputedStyles:getComputedStyles,webComponents:[],isScrollable:isScrollable,scrollLeft:scrollLeft,size:size,toCamelCase:toCamelCase,toHyphens:toHyphens,getOffset:kendo.getOffset||getOffset,parseEffects:kendo.parseEffects||parseEffects,toggleClass:kendo.toggleClass||toggleClass,directions:kendo.directions||directions,Observable:Observable,Class:Class,Template:Template,template:proxy(Template.compile,Template),render:proxy(Template.render,Template),stringify:proxy(JSON.stringify,JSON),eventTarget:eventTarget,htmlEncode:htmlEncode,isLocalUrl:function(url){return url&&!localUrlRe.test(url)},expr:function(expression,safe,paramName){return expression=expression||"",typeof safe==STRING&&(paramName=safe,safe=!1),paramName=paramName||"d",expression&&"["!==expression.charAt(0)&&(expression="."+expression),safe?(expression=expression.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"'),expression=expression.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),expression=wrapExpression(expression.split("."),paramName),expression=expression.replace(/_\$DOT\$_/g,".")):expression=paramName+expression,expression},getter:function(expression,safe){var key=expression+safe;return getterCache[key]=getterCache[key]||new Function("d","return "+kendo.expr(expression,safe))},setter:function(expression){return setterCache[expression]=setterCache[expression]||new Function("d,value",kendo.expr(expression)+"=value")},accessor:function(expression){return{get:kendo.getter(expression),set:kendo.setter(expression)}},guid:function(){var i,random,id="";for(i=0;32>i;i++)random=16*math.random()|0,(8==i||12==i||16==i||20==i)&&(id+="-"),id+=(12==i?4:16==i?3&random|8:random).toString(16);return id},roleSelector:function(role){return role.replace(/(\S+)/g,"["+kendo.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(directives){var selectors=directives.split(" ");if(selectors)for(var i=0;i<selectors.length;i++)"view"!=selectors[i]&&(selectors[i]=selectors[i].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return selectors.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},onWidgetRegistered:function(callback){for(var i=0,len=kendo.widgets.length;len>i;i++)callback(kendo.widgets[i]);kendo._widgetRegisteredCallbacks.push(callback)},logToConsole:function(message){var console=window.console;!kendo.suppressLog&&"undefined"!=typeof console&&console.log&&console.log(message)}});var Widget=Observable.extend({init:function(element,options){var that=this;that.element=kendo.jQuery(element).handler(that),that.angular("init",options),Observable.fn.init.call(that);var dataSource=options?options.dataSource:null;dataSource&&(options=extend({},options,{dataSource:{}})),options=that.options=extend(!0,{},that.options,options),dataSource&&(options.dataSource=dataSource),that.element.attr(kendo.attr("role"))||that.element.attr(kendo.attr("role"),(options.name||"").toLowerCase()),that.element.data("kendo"+options.prefix+options.name,that),that.bind(that.events,options)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(target){target=target||this.wrapper;var element=this.element,TABINDEX="tabindex",tabindex=target.attr(TABINDEX)||element.attr(TABINDEX);element.removeAttr(TABINDEX),target.attr(TABINDEX,isNaN(tabindex)?0:tabindex)},setOptions:function(options){this._setEvents(options),$.extend(this.options,options)},_setEvents:function(options){for(var e,that=this,idx=0,length=that.events.length;length>idx;idx++)e=that.events[idx],that.options[e]&&options[e]&&that.unbind(e,that.options[e]);that.bind(that.events,options)},resize:function(force){var size=this.getSize(),currentSize=this._size;(force||(size.width>0||size.height>0)&&(!currentSize||size.width!==currentSize.width||size.height!==currentSize.height))&&(this._size=size,this._resize(size,force),this.trigger("resize",size))},getSize:function(){return kendo.dimensions(this.element)},size:function(size){return size?void this.setSize(size):this.getSize()},setSize:$.noop,_resize:$.noop,destroy:function(){var that=this;that.element.removeData("kendo"+that.options.prefix+that.options.name),that.element.removeData("handler"),that.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(callback){this._muteRebind=!0,callback.call(this),this._muteRebind=!1}}),DataBoundWidget=Widget.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(cmd){var that=this;that.angular(cmd,function(){return{elements:that.items(),data:$.map(that.dataItems(),function(dataItem){return{dataItem:dataItem}})}})}});kendo.dimensions=function(element,dimensions){var domElement=element[0];return dimensions&&element.css(dimensions),{width:domElement.offsetWidth,height:domElement.offsetHeight}},kendo.notify=noop;var templateRegExp=/template$/i,jsonRegExp=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,jsonFormatRegExp=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,dashRegExp=/([A-Z])/g;kendo.initWidget=function(element,options,roles){var result,option,widget,idx,length,role,value,dataSource,fullPath,widgetKeyRegExp;if(roles?roles.roles&&(roles=roles.roles):roles=kendo.ui.roles,element=element.nodeType?element:element[0],role=element.getAttribute("data-"+kendo.ns+"role")){fullPath=-1===role.indexOf("."),widget=fullPath?roles[role]:kendo.getter(role)(window);var data=$(element).data(),widgetKey=widget?"kendo"+widget.fn.options.prefix+widget.fn.options.name:"";widgetKeyRegExp=fullPath?new RegExp("^kendo.*"+role+"$","i"):new RegExp("^"+widgetKey+"$","i");for(var key in data)if(key.match(widgetKeyRegExp)){if(key!==widgetKey)return data[key];result=data[key]}if(widget){for(dataSource=parseOption(element,"dataSource"),options=$.extend({},parseOptions(element,widget.fn.options),options),dataSource&&(typeof dataSource===STRING?options.dataSource=kendo.getter(dataSource)(window):options.dataSource=dataSource),idx=0,length=widget.fn.events.length;length>idx;idx++)option=widget.fn.events[idx],value=parseOption(element,option),value!==undefined&&(options[option]=kendo.getter(value)(window));return result?$.isEmptyObject(options)||result.setOptions(options):result=new widget(element,options),result}}},kendo.rolesFromNamespaces=function(namespaces){var idx,length,roles=[];for(namespaces[0]||(namespaces=[kendo.ui,kendo.dataviz.ui]),idx=0,length=namespaces.length;length>idx;idx++)roles[idx]=namespaces[idx].roles;return extend.apply(null,[{}].concat(roles.reverse()))},kendo.init=function(element){var roles=kendo.rolesFromNamespaces(slice.call(arguments,1));$(element).find("[data-"+kendo.ns+"role]").addBack().each(function(){kendo.initWidget(this,{},roles)})},kendo.destroy=function(element){$(element).find("[data-"+kendo.ns+"role]").addBack().each(function(){var data=$(this).data();for(var key in data)0===key.indexOf("kendo")&&typeof data[key].destroy===FUNCTION&&data[key].destroy()})},kendo.resize=function(element,force){var widgets=$(element).find("[data-"+kendo.ns+"role]").addBack().filter(resizableWidget);if(widgets.length){var widgetsArray=$.makeArray(widgets);widgetsArray.sort(containmentComparer),$.each(widgetsArray,function(){var widget=kendo.widgetInstance($(this));widget&&widget.resize(force)})}},kendo.parseOptions=parseOptions,extend(kendo.ui,{Widget:Widget,DataBoundWidget:DataBoundWidget,roles:{},progress:function(container,toggle){var isRtl,leftRight,webkitCorrection,containerScrollLeft,mask=container.find(".k-loading-mask"),support=kendo.support,browser=support.browser;toggle?mask.length||(isRtl=support.isRtl(container),leftRight=isRtl?"right":"left",containerScrollLeft=container.scrollLeft(),webkitCorrection=browser.webkit&&isRtl?container[0].scrollWidth-container.width()-2*containerScrollLeft:0,mask=$("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",container.scrollTop()).css(leftRight,Math.abs(containerScrollLeft)+webkitCorrection).prependTo(container)):mask&&mask.remove()},plugin:function(widget,register,prefix){var getter,name=widget.fn.options.name;register=register||kendo.ui,prefix=prefix||"",register[name]=widget,register.roles[name.toLowerCase()]=widget,getter="getKendo"+prefix+name,name="kendo"+prefix+name;var widgetEntry={name:name,widget:widget,prefix:prefix||""};kendo.widgets.push(widgetEntry);for(var i=0,len=kendo._widgetRegisteredCallbacks.length;len>i;i++)kendo._widgetRegisteredCallbacks[i](widgetEntry);$.fn[name]=function(options){var args,value=this;return typeof options===STRING?(args=slice.call(arguments,1),this.each(function(){var method,result,widget=$.data(this,name);if(!widget)throw new Error(kendo.format("Cannot call method '{0}' of {1} before it is initialized",options,name));if(method=widget[options],typeof method!==FUNCTION)throw new Error(kendo.format("Cannot find method '{0}' of {1}",options,name));return result=method.apply(widget,args),result!==undefined?(value=result,!1):void 0})):this.each(function(){return new widget(this,options);
}),value},$.fn[name].widget=widget,$.fn[getter]=function(){return this.data(name)}}});var ContainerNullObject={bind:function(){return this},nullObject:!0,options:{}},MobileWidget=Widget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){Widget.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var viewElement=this.element.closest(kendo.roleSelector("view splitview modalview drawer"));return kendo.widgetInstance(viewElement,kendo.mobile.ui)||ContainerNullObject},viewHasNativeScrolling:function(){var view=this.view();return view&&view.options.useNativeScrolling},container:function(){var element=this.element.closest(kendo.roleSelector("view layout modalview drawer splitview"));return kendo.widgetInstance(element.eq(0),kendo.mobile.ui)||ContainerNullObject}});extend(kendo.mobile,{init:function(element){kendo.init(element,kendo.mobile.ui,kendo.ui,kendo.dataviz.ui)},appLevelNativeScrolling:function(){return kendo.mobile.application&&kendo.mobile.application.options&&kendo.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:MobileWidget,DataBoundWidget:DataBoundWidget.extend(MobileWidget.prototype),roles:{},plugin:function(widget){kendo.ui.plugin(widget,kendo.mobile.ui,"Mobile")}}}),deepExtend(kendo.dataviz,{init:function(element){kendo.init(element,kendo.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(widget){kendo.ui.plugin(widget,kendo.dataviz.ui)}},roles:{}}),kendo.touchScroller=function(elements,options){return options||(options={}),options.useNative=!0,$(elements).map(function(idx,element){return element=$(element),support.kineticScrollNeeded&&kendo.mobile.ui.Scroller&&!element.data("kendoMobileScroller")?(element.kendoMobileScroller(options),element.data("kendoMobileScroller")):!1})[0]},kendo.preventDefault=function(e){e.preventDefault()},kendo.widgetInstance=function(element,suites){var i,length,role=element.data(kendo.ns+"role"),widgets=[];if(role){if("content"===role&&(role="scroller"),suites)if(suites[0])for(i=0,length=suites.length;length>i;i++)widgets.push(suites[i].roles[role]);else widgets.push(suites.roles[role]);else widgets=[kendo.ui.roles[role],kendo.dataviz.ui.roles[role],kendo.mobile.ui.roles[role]];for(role.indexOf(".")>=0&&(widgets=[kendo.getter(role)(window)]),i=0,length=widgets.length;length>i;i++){var widget=widgets[i];if(widget){var instance=element.data("kendo"+widget.fn.options.prefix+widget.fn.options.name);if(instance)return instance}}}},kendo.onResize=function(callback){var handler=callback;return support.mobileOS.android&&(handler=function(){setTimeout(callback,600)}),$(window).on(support.resize,handler),handler},kendo.unbindResize=function(callback){$(window).off(support.resize,callback)},kendo.attrValue=function(element,key){return element.data(kendo.ns+key)},kendo.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},$.extend($.expr[":"],{kendoFocusable:function(element){var idx=$.attr(element,"tabindex");return focusable(element,!isNaN(idx)&&idx>-1)}});var MOUSE_EVENTS=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],EXCLUDE_BUST_CLICK_SELECTOR="label, input, [data-rel=external]",MouseEventNormalizer={setupMouseMute:function(){var idx=0,length=MOUSE_EVENTS.length,element=document.documentElement;if(!MouseEventNormalizer.mouseTrap&&support.eventCapture){MouseEventNormalizer.mouseTrap=!0,MouseEventNormalizer.bustClick=!1,MouseEventNormalizer.captureMouse=!1;for(var handler=function(e){MouseEventNormalizer.captureMouse&&("click"===e.type?MouseEventNormalizer.bustClick&&!$(e.target).is(EXCLUDE_BUST_CLICK_SELECTOR)&&(e.preventDefault(),e.stopPropagation()):e.stopPropagation())};length>idx;idx++)element.addEventListener(MOUSE_EVENTS[idx],handler,!0)}},muteMouse:function(e){MouseEventNormalizer.captureMouse=!0,e.data.bustClick&&(MouseEventNormalizer.bustClick=!0),clearTimeout(MouseEventNormalizer.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(MouseEventNormalizer.mouseTrapTimeoutID),MouseEventNormalizer.mouseTrapTimeoutID=setTimeout(function(){MouseEventNormalizer.captureMouse=!1,MouseEventNormalizer.bustClick=!1},400)}},eventMap={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};support.touch&&(support.mobileOS.ios||support.mobileOS.android)?eventMap={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:support.pointers?eventMap={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:support.msPointers&&(eventMap={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!support.msPointers||"onmspointerenter"in window||$.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(orig,fix){$.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!$.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}});var getEventMap=function(e){return eventMap[e]||e},eventRegEx=/([^ ]+)/g;kendo.applyEventMap=function(events,ns){return events=events.replace(eventRegEx,getEventMap),ns&&(events=events.replace(eventRegEx,"$1."+ns)),events};var on=$.fn.on;extend(!0,kendoJQuery,$),kendoJQuery.fn=kendoJQuery.prototype=new $,kendoJQuery.fn.constructor=kendoJQuery,kendoJQuery.fn.init=function(selector,context){return context&&context instanceof $&&!(context instanceof kendoJQuery)&&(context=kendoJQuery(context)),$.fn.init.call(this,selector,context,rootjQuery)},kendoJQuery.fn.init.prototype=kendoJQuery.fn;var rootjQuery=kendoJQuery(document);extend(kendoJQuery.fn,{handler:function(handler){return this.data("handler",handler),this},autoApplyNS:function(ns){return this.data("kendoNS",ns||kendo.guid()),this},on:function(){var that=this,ns=that.data("kendoNS");if(1===arguments.length)return on.call(that,arguments[0]);var context=that,args=slice.call(arguments);typeof args[args.length-1]===UNDEFINED&&args.pop();var callback=args[args.length-1],events=kendo.applyEventMap(args[0],ns);if(support.mouseAndTouchPresent&&events.search(/mouse|click/)>-1&&this[0]!==document.documentElement){MouseEventNormalizer.setupMouseMute();var selector=2===args.length?null:args[1],bustClick=events.indexOf("click")>-1&&events.indexOf("touchend")>-1;on.call(this,{touchstart:MouseEventNormalizer.muteMouse,touchend:MouseEventNormalizer.unMuteMouse},selector,{bustClick:bustClick})}return typeof callback===STRING&&(context=that.data("handler"),callback=context[callback],args[args.length-1]=function(e){callback.call(context,e)}),args[0]=events,on.apply(that,args),that},kendoDestroy:function(ns){return ns=ns||this.data("kendoNS"),ns&&this.off("."+ns),this}}),kendo.jQuery=kendoJQuery,kendo.eventMap=eventMap,kendo.timezone=function(){function ruleToDate(year,rule){var date,targetDay,ourDay,month=rule[3],on=rule[4],time=rule[5],cache=rule[8];return cache||(rule[8]=cache={}),cache[year]?cache[year]:(isNaN(on)?0===on.indexOf("last")?(date=new Date(Date.UTC(year,months[month]+1,1,time[0]-24,time[1],time[2],0)),targetDay=days[on.substr(4,3)],ourDay=date.getUTCDay(),date.setUTCDate(date.getUTCDate()+targetDay-ourDay-(targetDay>ourDay?7:0))):on.indexOf(">=")>=0&&(date=new Date(Date.UTC(year,months[month],on.substr(5),time[0],time[1],time[2],0)),targetDay=days[on.substr(0,3)],ourDay=date.getUTCDay(),date.setUTCDate(date.getUTCDate()+targetDay-ourDay+(ourDay>targetDay?7:0))):date=new Date(Date.UTC(year,months[month],on,time[0],time[1],time[2],0)),cache[year]=date)}function findRule(utcTime,rules,zone){if(rules=rules[zone],!rules){var time=zone.split(":"),offset=0;return time.length>1&&(offset=60*time[0]+Number(time[1])),[-1e6,"max","-","Jan",1,[0,0,0],offset,"-"]}var year=new Date(utcTime).getUTCFullYear();rules=jQuery.grep(rules,function(rule){var from=rule[0],to=rule[1];return year>=from&&(to>=year||from==year&&"only"==to||"max"==to)}),rules.push(utcTime),rules.sort(function(a,b){return"number"!=typeof a&&(a=Number(ruleToDate(year,a))),"number"!=typeof b&&(b=Number(ruleToDate(year,b))),a-b});var rule=rules[jQuery.inArray(utcTime,rules)-1]||rules[rules.length-1];return isNaN(rule)?rule:null}function findZone(utcTime,zones,timezone){var zoneRules=zones[timezone];if("string"==typeof zoneRules&&(zoneRules=zones[zoneRules]),!zoneRules)throw new Error('Timezone "'+timezone+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var idx=zoneRules.length-1;idx>=0;idx--){var until=zoneRules[idx][3];if(until&&utcTime>until)break}var zone=zoneRules[idx+1];if(!zone)throw new Error('Timezone "'+timezone+'" not found on '+utcTime+".");return zone}function zoneAndRule(utcTime,zones,rules,timezone){typeof utcTime!=NUMBER&&(utcTime=Date.UTC(utcTime.getFullYear(),utcTime.getMonth(),utcTime.getDate(),utcTime.getHours(),utcTime.getMinutes(),utcTime.getSeconds(),utcTime.getMilliseconds()));var zone=findZone(utcTime,zones,timezone);return{zone:zone,rule:findRule(utcTime,rules,zone[1])}}function offset(utcTime,timezone){if("Etc/UTC"==timezone||"Etc/GMT"==timezone)return 0;var info=zoneAndRule(utcTime,this.zones,this.rules,timezone),zone=info.zone,rule=info.rule;return kendo.parseFloat(rule?zone[0]-rule[6]:zone[0])}function abbr(utcTime,timezone){var info=zoneAndRule(utcTime,this.zones,this.rules,timezone),zone=info.zone,rule=info.rule,base=zone[2];return base.indexOf("/")>=0?base.split("/")[rule&&+rule[6]?1:0]:base.indexOf("%s")>=0?base.replace("%s",rule&&"-"!=rule[7]?rule[7]:""):base}function convert(date,fromOffset,toOffset){typeof fromOffset==STRING&&(fromOffset=this.offset(date,fromOffset)),typeof toOffset==STRING&&(toOffset=this.offset(date,toOffset));var fromLocalOffset=date.getTimezoneOffset();date=new Date(date.getTime()+6e4*(fromOffset-toOffset));var toLocalOffset=date.getTimezoneOffset();return new Date(date.getTime()+6e4*(toLocalOffset-fromLocalOffset))}function apply(date,timezone){return this.convert(date,date.getTimezoneOffset(),timezone)}function remove(date,timezone){return this.convert(date,timezone,date.getTimezoneOffset())}function toLocalDate(time){return this.apply(new Date(time),"Etc/UTC")}var months={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},days={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:offset,convert:convert,apply:apply,remove:remove,abbr:abbr,toLocalDate:toLocalDate}}(),kendo.date=function(){function adjustDST(date,hours){return 0===hours&&23===date.getHours()?(date.setHours(date.getHours()+2),!0):!1}function setDayOfWeek(date,day,dir){var hours=date.getHours();dir=dir||1,day=(day-date.getDay()+7*dir)%7,date.setDate(date.getDate()+day),adjustDST(date,hours)}function dayOfWeek(date,day,dir){return date=new Date(date),setDayOfWeek(date,day,dir),date}function firstDayOfMonth(date){return new Date(date.getFullYear(),date.getMonth(),1)}function lastDayOfMonth(date){var last=new Date(date.getFullYear(),date.getMonth()+1,0),first=firstDayOfMonth(date),timeOffset=Math.abs(last.getTimezoneOffset()-first.getTimezoneOffset());return timeOffset&&last.setHours(first.getHours()+timeOffset/60),last}function getDate(date){return date=new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0),adjustDST(date,0),date}function toUtcTime(date){return Date.UTC(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds())}function getMilliseconds(date){return date.getTime()-getDate(date)}function isInTimeRange(value,min,max){var msValue,msMin=getMilliseconds(min),msMax=getMilliseconds(max);return value&&msMin!=msMax?(min>=max&&(max+=MS_PER_DAY),msValue=getMilliseconds(value),msMin>msValue&&(msValue+=MS_PER_DAY),msMin>msMax&&(msMax+=MS_PER_DAY),msValue>=msMin&&msMax>=msValue):!0}function isInDateRange(value,min,max){var msValue,msMin=min.getTime(),msMax=max.getTime();return msMin>=msMax&&(msMax+=MS_PER_DAY),msValue=value.getTime(),msValue>=msMin&&msMax>=msValue}function addDays(date,offset){var hours=date.getHours();return date=new Date(date),setTime(date,offset*MS_PER_DAY),adjustDST(date,hours),date}function setTime(date,milliseconds,ignoreDST){var difference,offset=date.getTimezoneOffset();date.setTime(date.getTime()+milliseconds),ignoreDST||(difference=date.getTimezoneOffset()-offset,date.setTime(date.getTime()+difference*MS_PER_MINUTE))}function today(){return getDate(new Date)}function isToday(date){return getDate(date).getTime()==today().getTime()}function toInvariantTime(date){var staticDate=new Date(1980,1,1,0,0,0);return date&&staticDate.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()),staticDate}var MS_PER_MINUTE=6e4,MS_PER_DAY=864e5;return{adjustDST:adjustDST,dayOfWeek:dayOfWeek,setDayOfWeek:setDayOfWeek,getDate:getDate,isInDateRange:isInDateRange,isInTimeRange:isInTimeRange,isToday:isToday,nextDay:function(date){return addDays(date,1)},previousDay:function(date){return addDays(date,-1)},toUtcTime:toUtcTime,MS_PER_DAY:MS_PER_DAY,MS_PER_HOUR:60*MS_PER_MINUTE,MS_PER_MINUTE:MS_PER_MINUTE,setTime:setTime,addDays:addDays,today:today,toInvariantTime:toInvariantTime,firstDayOfMonth:firstDayOfMonth,lastDayOfMonth:lastDayOfMonth,getMilliseconds:getMilliseconds}}(),kendo.stripWhitespace=function(element){if(document.createNodeIterator)for(var iterator=document.createNodeIterator(element,NodeFilter.SHOW_TEXT,function(node){return node.parentNode==element?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);iterator.nextNode();)iterator.referenceNode&&!iterator.referenceNode.textContent.trim()&&iterator.referenceNode.parentNode.removeChild(iterator.referenceNode);else for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];3!=child.nodeType||/\S/.test(child.nodeValue)||(element.removeChild(child),i--),1==child.nodeType&&kendo.stripWhitespace(child)}};var animationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,1e3/60)};kendo.animationFrame=function(callback){animationFrame.call(window,callback)};var animationQueue=[];kendo.queueAnimation=function(callback){animationQueue[animationQueue.length]=callback,1===animationQueue.length&&kendo.runNextAnimation()},kendo.runNextAnimation=function(){kendo.animationFrame(function(){animationQueue[0]&&(animationQueue.shift()(),animationQueue[0]&&kendo.runNextAnimation())})},kendo.parseQueryStringParams=function(url){for(var queryString=url.split("?")[1]||"",params={},paramParts=queryString.split(/&|=/),length=paramParts.length,idx=0;length>idx;idx+=2)""!==paramParts[idx]&&(params[decodeURIComponent(paramParts[idx])]=decodeURIComponent(paramParts[idx+1]));return params},kendo.elementUnderCursor=function(e){return"undefined"!=typeof e.x.client?document.elementFromPoint(e.x.client,e.y.client):void 0},kendo.wheelDeltaY=function(jQueryEvent){var delta,e=jQueryEvent.originalEvent,deltaY=e.wheelDeltaY;return e.wheelDelta?(deltaY===undefined||deltaY)&&(delta=e.wheelDelta):e.detail&&e.axis===e.VERTICAL_AXIS&&(delta=10*-e.detail),delta},kendo.throttle=function(fn,delay){var timeout,lastExecTime=0;if(!delay||0>=delay)return fn;var throttled=function(){function exec(){fn.apply(that,args),lastExecTime=+new Date}var that=this,elapsed=+new Date-lastExecTime,args=arguments;return lastExecTime?(timeout&&clearTimeout(timeout),void(elapsed>delay?exec():timeout=setTimeout(exec,delay-elapsed))):exec()};return throttled.cancel=function(){clearTimeout(timeout)},throttled},kendo.caret=function(element,start,end){var rangeElement,isPosition=start!==undefined;if(end===undefined&&(end=start),element[0]&&(element=element[0]),!isPosition||!element.disabled){try{if(element.selectionStart!==undefined)isPosition?(element.focus(),element.setSelectionRange(start,end)):start=[element.selectionStart,element.selectionEnd];else if(document.selection)if($(element).is(":visible")&&element.focus(),rangeElement=element.createTextRange(),isPosition)rangeElement.collapse(!0),rangeElement.moveStart("character",start),rangeElement.moveEnd("character",end-start),rangeElement.select();else{var selectionStart,selectionEnd,rangeDuplicated=rangeElement.duplicate();rangeElement.moveToBookmark(document.selection.createRange().getBookmark()),rangeDuplicated.setEndPoint("EndToStart",rangeElement),selectionStart=rangeDuplicated.text.length,selectionEnd=selectionStart+rangeElement.text.length,start=[selectionStart,selectionEnd]}}catch(e){start=[]}return start}},kendo.compileMobileDirective=function(element,scope){var angular=window.angular;return element.attr("data-"+kendo.ns+"role",element[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),angular.element(element).injector().invoke(["$compile",function($compile){$compile(element)(scope),/^\$(digest|apply)$/.test(scope.$$phase)||scope.$digest()}]),kendo.widgetInstance(element,kendo.mobile.ui)},kendo.antiForgeryTokens=function(){var tokens={},csrf_token=$("meta[name=csrf-token],meta[name=_csrf]").attr("content"),csrf_param=$("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return $("input[name^='__RequestVerificationToken']").each(function(){tokens[this.name]=this.value}),csrf_param!==undefined&&csrf_token!==undefined&&(tokens[csrf_param]=csrf_token),tokens},kendo.cycleForm=function(form){function focus(el){var widget=kendo.widgetInstance(el);widget&&widget.focus?widget.focus():el.focus()}var firstElement=form.find("input, .k-widget").first(),lastElement=form.find("button, .k-button").last();lastElement.on("keydown",function(e){e.keyCode!=kendo.keys.TAB||e.shiftKey||(e.preventDefault(),focus(firstElement))}),firstElement.on("keydown",function(e){e.keyCode==kendo.keys.TAB&&e.shiftKey&&(e.preventDefault(),focus(lastElement))})},function(){function postToProxy(dataURI,fileName,proxyURL,proxyTarget){var form=$("<form>").attr({action:proxyURL,method:"POST",target:proxyTarget}),data=kendo.antiForgeryTokens();data.fileName=fileName;var parts=dataURI.split(";base64,");data.contentType=parts[0].replace("data:",""),data.base64=parts[1];for(var name in data)data.hasOwnProperty(name)&&$("<input>").attr({value:data[name],name:name,type:"hidden"}).appendTo(form);form.appendTo("body").submit().remove()}function saveAsBlob(dataURI,fileName){var blob=dataURI;if("string"==typeof dataURI){for(var parts=dataURI.split(";base64,"),contentType=parts[0],base64=atob(parts[1]),array=new Uint8Array(base64.length),idx=0;idx<base64.length;idx++)array[idx]=base64.charCodeAt(idx);blob=new Blob([array.buffer],{type:contentType})}navigator.msSaveBlob(blob,fileName)}function saveAsDataURI(dataURI,fileName){window.Blob&&dataURI instanceof Blob&&(dataURI=URL.createObjectURL(dataURI)),fileSaver.download=fileName,fileSaver.href=dataURI;var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),fileSaver.dispatchEvent(e)}var fileSaver=document.createElement("a"),downloadAttribute="download"in fileSaver;kendo.saveAs=function(options){var save=postToProxy;options.forceProxy||(downloadAttribute?save=saveAsDataURI:navigator.msSaveBlob&&(save=saveAsBlob)),save(options.dataURI,options.fileName,options.proxyURL,options.proxyTarget)}}()}(jQuery,window)}()}(),function(){!function(){!function($,angular,undefined){"use strict";function withoutTimeout(f){var save=$timeout;try{return $timeout=function(f){return f()},f()}finally{$timeout=save}}function createWidget(scope,element,attrs,widget,origAttr,controllers){function createIt(){var originalElement;attrs.kRebind&&(originalElement=$($(element)[0].cloneNode(!0))),options=parseOptions(scope,element,attrs,widget,ctor).options,element.is("select")&&!function(options){if(options.length>0){var first=$(options[0]);!/\S/.test(first.text())&&/^\?/.test(first.val())&&first.remove()}}(element[0].options);var object=ctor.call(element,OPTIONS_NOW=options).data(widget);exposeWidget(object,scope,attrs,widget,origAttr),scope.$emit("kendoWidgetCreated",object);var destroyRegister=destroyWidgetOnScopeDestroy(scope,object);if(attrs.kRebind&&setupRebind(object,scope,element,originalElement,attrs.kRebind,destroyRegister,attrs),attrs.kNgDisabled){var kNgDisabled=attrs.kNgDisabled,isDisabled=scope.$eval(kNgDisabled);isDisabled&&object.enable(!isDisabled),bindToKNgDisabled(object,scope,element,kNgDisabled)}if(attrs.kNgReadonly){var kNgReadonly=attrs.kNgReadonly,isReadonly=scope.$eval(kNgReadonly);isReadonly&&object.readonly(isReadonly),bindToKNgReadonly(object,scope,element,kNgReadonly)}return attrs.kNgModel&&bindToKNgModel(object,scope,attrs.kNgModel),ngModel&&bindToNgModel(object,scope,element,ngModel,ngForm),object&&propagateClassToWidgetWrapper(object,element),object}if(!(element instanceof jQuery))throw new Error("The Kendo UI directives require jQuery to be available before AngularJS. Please include jquery before angular in the document.");var kNgDelay=attrs.kNgDelay,delayValue=scope.$eval(kNgDelay);controllers=controllers||[];var ngModel=controllers[0],ngForm=controllers[1],ctor=$(element)[widget];if(!ctor)return window.console.error("Could not find: "+widget),null;var parsed=parseOptions(scope,element,attrs,widget,ctor),options=parsed.options;if(parsed.unresolved.length){for(var promises=[],i=0,len=parsed.unresolved.length;len>i;i++){var unresolved=parsed.unresolved[i],promise=$.Deferred(function(d){var unwatch=scope.$watch(unresolved.path,function(newValue){newValue!==undefined&&(unwatch(),d.resolve())})}).promise();promises.push(promise)}return void $.when.apply(null,promises).then(createIt)}if(kNgDelay&&!delayValue){var root=scope.$root||scope,register=function(){var unregister=scope.$watch(kNgDelay,function(newValue){newValue!==undefined&&(unregister(),element.removeAttr(attrs.$attr.kNgDelay),kNgDelay=null,$timeout(createIt))})};return void(/^\$(digest|apply)$/.test(root.$$phase)?register():scope.$apply(register))}return createIt()}function parseOptions(scope,element,attrs,widget,ctor){function addOption(name,value){var scopeValue=angular.copy(scope.$eval(value));scopeValue===undefined?unresolved.push({option:name,path:value}):options[name]=scopeValue}var role=widget.replace(/^kendo/,""),unresolved=[],optionsPath=attrs.kOptions||attrs.options,optionsValue=scope.$eval(optionsPath);optionsPath&&optionsValue===undefined&&unresolved.push({option:"options",path:optionsPath});var options=angular.extend({},attrs.defaultOptions,optionsValue),widgetOptions=ctor.widget.prototype.options,widgetEvents=ctor.widget.prototype.events;$.each(attrs,function(name,value){if("source"!==name&&"kDataSource"!==name&&"kScopeField"!==name){var dataName="data"+name.charAt(0).toUpperCase()+name.slice(1);if(0===name.indexOf("on")){var eventKey=name.replace(/^on./,function(prefix){return prefix.charAt(2).toLowerCase()});widgetEvents.indexOf(eventKey)>-1&&(options[eventKey]=value)}if(widgetOptions.hasOwnProperty(dataName))addOption(dataName,value);else if(widgetOptions.hasOwnProperty(name)&&!ignoredOwnProperties[name])addOption(name,value);else if(!ignoredAttributes[name]){var match=name.match(/^k(On)?([A-Z].*)/);if(match){var optionName=match[2].charAt(0).toLowerCase()+match[2].slice(1);match[1]&&"kOnLabel"!=name?options[optionName]=value:("kOnLabel"==name&&(optionName="onLabel"),addOption(optionName,value))}}}});var dataSource=attrs.kDataSource||attrs.source;return dataSource&&(options.dataSource=createDataSource(scope,element,role,dataSource)),options.$angular=[scope],{options:options,unresolved:unresolved}}function bindToKNgDisabled(widget,scope,element,kNgDisabled){return kendo.ui.PanelBar&&widget instanceof kendo.ui.PanelBar||kendo.ui.Menu&&widget instanceof kendo.ui.Menu?void $log.warn("k-ng-disabled specified on a widget that does not have the enable() method: "+widget.options.name):void scope.$watch(kNgDisabled,function(newValue,oldValue){newValue!=oldValue&&widget.enable(!newValue)})}function bindToKNgReadonly(widget,scope,element,kNgReadonly){return"function"!=typeof widget.readonly?void $log.warn("k-ng-readonly specified on a widget that does not have the readonly() method: "+widget.options.name):void scope.$watch(kNgReadonly,function(newValue,oldValue){newValue!=oldValue&&widget.readonly(newValue)})}function exposeWidget(widget,scope,attrs,kendoWidget,origAttr){if(attrs[origAttr]){var set=$parse(attrs[origAttr]).assign;if(!set)throw new Error(origAttr+" attribute used but expression in it is not assignable: "+attrs[kendoWidget]);set(scope,widget)}}function formValue(element){return/checkbox|radio/i.test(element.attr("type"))?element.prop("checked"):element.val()}function isForm(element){return formRegExp.test(element[0].tagName)}function bindToNgModel(widget,scope,element,ngModel,ngForm){if(widget.value){var value;value=isForm(element)?function(){return formValue(element)}:function(){return widget.value()},ngModel.$render=function(){var val=ngModel.$viewValue;val===undefined&&(val=ngModel.$modelValue),val===undefined&&(val=null),setTimeout(function(){if(widget){var kNgModel=scope[widget.element.attr("k-ng-model")];kNgModel&&(val=kNgModel),widget.value(val)}},0)};var haveChangeOnElement=!1;isForm(element)&&element.on("change",function(){haveChangeOnElement=!0});var onChange=function(pristine){return function(){var formPristine;haveChangeOnElement||(pristine&&ngForm&&(formPristine=ngForm.$pristine),ngModel.$setViewValue(value()),pristine&&(ngModel.$setPristine(),formPristine&&ngForm.$setPristine()),digest(scope))}};widget.first("change",onChange(!1)),kendo.ui.AutoComplete&&widget instanceof kendo.ui.AutoComplete||widget.first("dataBound",onChange(!0));var currentVal=value();isNaN(ngModel.$viewValue)||currentVal==ngModel.$viewValue||(ngModel.$isEmpty(ngModel.$viewValue)?null!=currentVal&&""!==currentVal&&currentVal!=ngModel.$viewValue&&ngModel.$setViewValue(currentVal):widget.value(ngModel.$viewValue)),ngModel.$setPristine()}}function bindToKNgModel(widget,scope,kNgModel){if("function"!=typeof widget.value)return void $log.warn("k-ng-model specified on a widget that does not have the value() method: "+widget.options.name);var form=$(widget.element).parents("form"),ngForm=scope[form.attr("name")],getter=$parse(kNgModel),setter=getter.assign,updating=!1,current=getter(scope);widget.$angular_setLogicValue(current);var valueIsCollection=kendo.ui.MultiSelect&&widget instanceof kendo.ui.MultiSelect;if(valueIsCollection)var sourceItemCount=current.length;var watchHandler=function(newValue){if(newValue===undefined&&(newValue=null),valueIsCollection){if(newValue==current&&newValue.length==sourceItemCount)return}else if(newValue==current)return;updating||(current=newValue,valueIsCollection&&(sourceItemCount=current.length),widget.$angular_setLogicValue(newValue))};valueIsCollection?scope.$watchCollection(kNgModel,watchHandler):scope.$watch(kNgModel,watchHandler),widget.first("change",function(){updating=!0,ngForm&&ngForm.$pristine&&ngForm.$setDirty(),scope.$apply(function(){setter(scope,widget.$angular_getLogicValue())}),updating=!1})}function destroyWidgetOnScopeDestroy(scope,widget){var deregister=scope.$on("$destroy",function(){deregister(),widget&&(widget.element&&(widget=kendoWidgetInstance(widget.element),widget&&widget.destroy()),widget=null)});return deregister}function propagateClassToWidgetWrapper(widget,element){function suspend(){mo.disconnect()}function resume(){mo.observe($(element)[0],{attributes:!0})}if(window.MutationObserver&&widget.wrapper){var prevClassList=[].slice.call($(element)[0].classList),mo=new MutationObserver(function(changes){suspend(),widget&&(changes.forEach(function(chg){var w=$(widget.wrapper)[0];switch(chg.attributeName){case"class":var currClassList=[].slice.call(chg.target.classList);currClassList.forEach(function(cls){prevClassList.indexOf(cls)<0&&(w.classList.add(cls),kendo.ui.ComboBox&&widget instanceof kendo.ui.ComboBox&&widget.input[0].classList.add(cls))}),prevClassList.forEach(function(cls){currClassList.indexOf(cls)<0&&(w.classList.remove(cls),kendo.ui.ComboBox&&widget instanceof kendo.ui.ComboBox&&widget.input[0].classList.remove(cls))}),prevClassList=currClassList;break;case"disabled":"function"!=typeof widget.enable||widget.element.attr("readonly")||widget.enable(!$(chg.target).attr("disabled"));break;case"readonly":"function"!=typeof widget.readonly||widget.element.attr("disabled")||widget.readonly(!!$(chg.target).attr("readonly"))}}),resume())});resume(),widget.first("destroy",suspend)}}function setupRebind(widget,scope,element,originalElement,rebindAttr,destroyRegister,attrs){var unregister=scope.$watch(rebindAttr,function(newValue,oldValue){if(!widget._muteRebind&&newValue!==oldValue){unregister();var templateOptions=WIDGET_TEMPLATE_OPTIONS[widget.options.name];templateOptions&&templateOptions.forEach(function(name){var templateContents=scope.$eval(attrs["k"+name]);templateContents&&originalElement.append($(templateContents).attr(kendo.toHyphens("k"+name),""))});var _wrapper=$(widget.wrapper)[0],_element=$(widget.element)[0],compile=element.injector().get("$compile");widget._destroy(),destroyRegister&&destroyRegister(),widget=null,_element&&(_wrapper&&_wrapper.parentNode.replaceChild(_element,_wrapper),$(element).replaceWith(originalElement)),compile(originalElement)(scope)}},!0);digest(scope)}function createDirectives(klass,isMobile){function make(directiveName,widgetName){module.directive(directiveName,["directiveFactory",function(directiveFactory){return directiveFactory.create(widgetName,directiveName)}])}var name=isMobile?"Mobile":"";name+=klass.fn.options.name;var className=name,shortcut="kendo"+name.charAt(0)+name.substr(1).toLowerCase();name="kendo"+name;var dashed=name.replace(/([A-Z])/g,"-$1");if(-1==SKIP_SHORTCUTS.indexOf(name.replace("kendo",""))){var names=name===shortcut?[name]:[name,shortcut];angular.forEach(names,function(directiveName){module.directive(directiveName,function(){return{restrict:"E",replace:!0,template:function(element,attributes){var tag=TAGNAMES[className]||"div",scopeField=attributes.kScopeField;return"<"+tag+" "+dashed+(scopeField?'="'+scopeField+'"':"")+">"+element.html()+"</"+tag+">"}}})})}MANUAL_DIRECTIVES.indexOf(name.replace("kendo",""))>-1||(make(name,name),shortcut!=name&&make(shortcut,name))}function kendoWidgetInstance(el){return el=$(el),kendo.widgetInstance(el,kendo.ui)||kendo.widgetInstance(el,kendo.mobile.ui)||kendo.widgetInstance(el,kendo.dataviz.ui)}function digest(scope,func){var root=scope.$root||scope,isDigesting=/^\$(digest|apply)$/.test(root.$$phase);func?isDigesting?func():root.$apply(func):isDigesting||root.$digest()}function destroyScope(scope,el){scope.$destroy(),el&&$(el).removeData("$scope").removeData("$$kendoScope").removeData("$isolateScope").removeData("$isolateScopeNoTemplate").removeClass("ng-scope")}function defadvice(klass,methodName,func){if($.isArray(klass))return angular.forEach(klass,function(klass){defadvice(klass,methodName,func)});if("string"==typeof klass){for(var a=klass.split("."),x=kendo;x&&a.length>0;)x=x[a.shift()];if(!x)return pendingPatches.push([klass,methodName,func]),!1;klass=x.prototype}var origMethod=klass[methodName];return klass[methodName]=function(){var self=this,args=arguments;return func.apply({self:self,next:function(){return origMethod.apply(self,arguments.length>0?arguments:args)}},args)},!0}if(angular&&angular.injector){var $defaultCompile,OPTIONS_NOW,module=angular.module("kendo.directives",[]),$injector=angular.injector(["ng"]),$parse=$injector.get("$parse"),$timeout=$injector.get("$timeout"),$log=$injector.get("$log"),createDataSource=function(){var types={TreeList:"TreeListDataSource",TreeView:"HierarchicalDataSource",Scheduler:"SchedulerDataSource",PanelBar:"$PLAIN",Menu:"$PLAIN",
ContextMenu:"$PLAIN"},toDataSource=function(dataSource,type){return"$PLAIN"==type?dataSource:kendo.data[type].create(dataSource)};return function(scope,element,role,source){var type=types[role]||"DataSource",current=scope.$eval(source),ds=toDataSource(current,type);return scope.$watch(source,function(mew){var widget=kendoWidgetInstance(element);if(widget&&"function"==typeof widget.setDataSource&&mew!==current){var ds=toDataSource(mew,type);widget.setDataSource(ds),current=mew}}),ds}}(),ignoredAttributes={kDataSource:!0,kOptions:!0,kRebind:!0,kNgModel:!0,kNgDelay:!0},ignoredOwnProperties={name:!0,title:!0,style:!0},formRegExp=/^(input|select|textarea)$/i;module.factory("directiveFactory",["$compile",function(compile){var kendoRenderedTimeout,RENDERED=!1;$defaultCompile=compile;var create=function(role,origAttr){return{restrict:"AC",require:["?ngModel","^?form"],scope:!1,controller:["$scope","$attrs","$element",function($scope,$attrs){var that=this;that.template=function(key,value){$attrs[key]=kendo.stringify(value)},$scope.$on("$destroy",function(){that.template=null,that=null})}],link:function(scope,element,attrs,controllers){var $element=$(element),roleattr=role.replace(/([A-Z])/g,"-$1");$element.attr(roleattr,$element.attr("data-"+roleattr)),$element[0].removeAttribute("data-"+roleattr);var widget=createWidget(scope,element,attrs,role,origAttr,controllers);widget&&(kendoRenderedTimeout&&clearTimeout(kendoRenderedTimeout),kendoRenderedTimeout=setTimeout(function(){scope.$emit("kendoRendered"),RENDERED||(RENDERED=!0,$("form").each(function(){var form=$(this).controller("form");form&&form.$setPristine()}))}))}}};return{create:create}}]);var TAGNAMES={Editor:"textarea",NumericTextBox:"input",DatePicker:"input",DateTimePicker:"input",TimePicker:"input",AutoComplete:"input",ColorPicker:"input",MaskedTextBox:"input",MultiSelect:"input",Upload:"input",Validator:"form",Button:"button",MobileButton:"a",MobileBackButton:"a",MobileDetailButton:"a",ListView:"ul",MobileListView:"ul",TreeView:"ul",Menu:"ul",ContextMenu:"ul",ActionSheet:"ul"},SKIP_SHORTCUTS=["MobileView","MobileDrawer","MobileLayout","MobileSplitView","MobilePane","MobileModalView"],MANUAL_DIRECTIVES=["MobileApplication","MobileView","MobileModalView","MobileLayout","MobileActionSheet","MobileDrawer","MobileSplitView","MobilePane","MobileScrollView","MobilePopOver"];angular.forEach(["MobileNavBar","MobileButton","MobileBackButton","MobileDetailButton","MobileTabStrip","MobileScrollView","MobileScroller"],function(widget){MANUAL_DIRECTIVES.push(widget),widget="kendo"+widget,module.directive(widget,function(){return{restrict:"A",link:function(scope,element,attrs){createWidget(scope,element,attrs,widget,widget)}}})});var pendingPatches=[];kendo.onWidgetRegistered(function(entry){pendingPatches=$.grep(pendingPatches,function(args){return!defadvice.apply(null,args)}),createDirectives(entry.widget,"Mobile"==entry.prefix)}),defadvice(["ui.Widget","mobile.ui.Widget"],"angular",function(cmd,arg){var self=this.self;if("init"==cmd)return!arg&&OPTIONS_NOW&&(arg=OPTIONS_NOW),OPTIONS_NOW=null,void(arg&&arg.$angular&&(self.$angular_scope=arg.$angular[0],self.$angular_init(self.element,arg)));var scope=self.$angular_scope;scope&&withoutTimeout(function(){var x=arg(),elements=x.elements,data=x.data;if(elements.length>0)switch(cmd){case"cleanup":angular.forEach(elements,function(el){var itemScope=$(el).data("$$kendoScope");itemScope&&itemScope!==scope&&itemScope.$$kendoScope&&destroyScope(itemScope,el)});break;case"compile":var injector=self.element.injector(),compile=injector?injector.get("$compile"):$defaultCompile;angular.forEach(elements,function(el,i){var itemScope;if(x.scopeFrom)itemScope=x.scopeFrom;else{var vars=data&&data[i];vars!==undefined?(itemScope=$.extend(scope.$new(),vars),itemScope.$$kendoScope=!0):itemScope=scope}$(el).data("$$kendoScope",itemScope),compile(el)(itemScope)}),digest(scope)}})}),defadvice("ui.Widget","$angular_getLogicValue",function(){return this.self.value()}),defadvice("ui.Widget","$angular_setLogicValue",function(val){this.self.value(val)}),defadvice("ui.Select","$angular_getLogicValue",function(){var item=this.self.dataItem(),valueField=this.self.options.dataValueField;return item?this.self.options.valuePrimitive?valueField?item[valueField]:item:item.toJSON():null}),defadvice("ui.Select","$angular_setLogicValue",function(val){var self=this.self,options=self.options,valueField=options.dataValueField,text=options.text||"";val===undefined&&(val=""),valueField&&!options.valuePrimitive&&val&&(text=val[options.dataTextField]||"",val=val[valueField||options.dataTextField]),self.options.autoBind!==!1||self.listView.isBound()?self.value(val):!text&&val&&options.valuePrimitive?self.value(val):self._preselect(val,text)}),defadvice("ui.MultiSelect","$angular_getLogicValue",function(){var value=this.self.dataItems().slice(0),valueField=this.self.options.dataValueField;return valueField&&this.self.options.valuePrimitive&&(value=$.map(value,function(item){return item[valueField]})),value}),defadvice("ui.MultiSelect","$angular_setLogicValue",function(val){null==val&&(val=[]);var self=this.self,options=self.options,valueField=options.dataValueField,data=val;valueField&&!options.valuePrimitive&&(val=$.map(val,function(item){return item[valueField]})),options.autoBind!==!1||options.valuePrimitive||self.listView.isBound()?self.value(val):self._preselect(data,val)}),defadvice("ui.AutoComplete","$angular_getLogicValue",function(){for(var options=this.self.options,values=this.self.value().split(options.separator),valuePrimitive=options.valuePrimitive,data=this.self.dataSource.data(),dataItems=[],idx=0,length=data.length;length>idx;idx++)for(var item=data[idx],dataValue=options.dataTextField?item[options.dataTextField]:item,j=0;j<values.length;j++)if(dataValue===values[j]){dataItems.push(valuePrimitive?dataValue:item.toJSON());break}return dataItems}),defadvice("ui.AutoComplete","$angular_setLogicValue",function(value){null==value&&(value=[]);var self=this.self,dataTextField=self.options.dataTextField;dataTextField&&!self.options.valuePrimitive&&(value=$.map(value,function(item){return item[dataTextField]})),self.value(value)}),defadvice("ui.Widget","$angular_init",function(element,options){var self=this.self;if(options&&!$.isArray(options))for(var scope=self.$angular_scope,i=self.events.length;--i>=0;){var event=self.events[i],handler=options[event];handler&&"string"==typeof handler&&(options[event]=self.$angular_makeEventHandler(event,scope,handler))}}),defadvice("ui.Widget","$angular_makeEventHandler",function(event,scope,handler){return handler=$parse(handler),function(e){digest(scope,function(){handler(scope,{kendoEvent:e})})}}),defadvice(["ui.Grid","ui.ListView","ui.TreeView"],"$angular_makeEventHandler",function(event,scope,handler){return"change"!=event?this.next():(handler=$parse(handler),function(ev){var cell,multiple,elems,items,columns,colIdx,widget=ev.sender,options=widget.options,locals={kendoEvent:ev};angular.isString(options.selectable)&&(cell=-1!==options.selectable.indexOf("cell"),multiple=-1!==options.selectable.indexOf("multiple")),elems=locals.selected=this.select(),items=locals.data=[],columns=locals.columns=[];for(var i=0;i<elems.length;i++){var item=cell?elems[i].parentNode:elems[i],dataItem=widget.dataItem(item);cell?(angular.element.inArray(dataItem,items)<0&&items.push(dataItem),colIdx=angular.element(elems[i]).index(),angular.element.inArray(colIdx,columns)<0&&columns.push(colIdx)):items.push(dataItem)}multiple||(locals.dataItem=locals.data=items[0],locals.selected=elems[0]),digest(scope,function(){handler(scope,locals)})})}),defadvice("ui.Grid","$angular_init",function(element,options){if(this.next(),options.columns){var settings=$.extend({},kendo.Template,options.templateSettings);angular.forEach(options.columns,function(col){!col.field||col.template||col.format||col.values||col.encoded!==undefined&&!col.encoded||(col.template="<span ng-bind='"+kendo.expr(col.field,"dataItem")+"'>#: "+kendo.expr(col.field,settings.paramName)+"#</span>")})}}),defadvice("mobile.ui.ButtonGroup","value",function(mew){var self=this.self;return null!=mew&&(self.select(self.element.children("li.km-button").eq(mew)),self.trigger("change"),self.trigger("select",{index:self.selectedIndex})),self.selectedIndex}),defadvice("mobile.ui.ButtonGroup","_select",function(){this.next(),this.self.trigger("change")}),module.directive("kendoMobileApplication",function(){return{terminal:!0,link:function(scope,element,attrs){createWidget(scope,element,attrs,"kendoMobileApplication","kendoMobileApplication")}}}).directive("kendoMobileView",function(){return{scope:!0,link:{pre:function(scope,element,attrs){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileView","kendoMobileView")},post:function(scope,element,attrs){attrs._instance._layout(),attrs._instance._scroller()}}}}).directive("kendoMobileDrawer",function(){return{scope:!0,link:{pre:function(scope,element,attrs){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileDrawer","kendoMobileDrawer")},post:function(scope,element,attrs){attrs._instance._layout(),attrs._instance._scroller()}}}}).directive("kendoMobileModalView",function(){return{scope:!0,link:{pre:function(scope,element,attrs){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileModalView","kendoMobileModalView")},post:function(scope,element,attrs){attrs._instance._layout(),attrs._instance._scroller()}}}}).directive("kendoMobileSplitView",function(){return{terminal:!0,link:{pre:function(scope,element,attrs){attrs.defaultOptions=scope.viewOptions,attrs._instance=createWidget(scope,element,attrs,"kendoMobileSplitView","kendoMobileSplitView")},post:function(scope,element,attrs){attrs._instance._layout()}}}}).directive("kendoMobilePane",function(){return{terminal:!0,link:{pre:function(scope,element,attrs){attrs.defaultOptions=scope.viewOptions,createWidget(scope,element,attrs,"kendoMobilePane","kendoMobilePane")}}}}).directive("kendoMobileLayout",function(){return{link:{pre:function(scope,element,attrs){createWidget(scope,element,attrs,"kendoMobileLayout","kendoMobileLayout")}}}}).directive("kendoMobileActionSheet",function(){return{restrict:"A",link:function(scope,element,attrs){element.find("a[k-action]").each(function(){$(this).attr("data-"+kendo.ns+"action",$(this).attr("k-action"))}),createWidget(scope,element,attrs,"kendoMobileActionSheet","kendoMobileActionSheet")}}}).directive("kendoMobilePopOver",function(){return{terminal:!0,link:{pre:function(scope,element,attrs){attrs.defaultOptions=scope.viewOptions,createWidget(scope,element,attrs,"kendoMobilePopOver","kendoMobilePopOver")}}}}).directive("kendoViewTitle",function(){return{restrict:"E",replace:!0,template:function(element){return"<span data-"+kendo.ns+"role='view-title'>"+element.html()+"</span>"}}}).directive("kendoMobileHeader",function(){return{restrict:"E",link:function(scope,element){element.addClass("km-header").attr("data-role","header")}}}).directive("kendoMobileFooter",function(){return{restrict:"E",link:function(scope,element){element.addClass("km-footer").attr("data-role","footer")}}}).directive("kendoMobileScrollViewPage",function(){return{restrict:"E",replace:!0,template:function(element){return"<div data-"+kendo.ns+"role='page'>"+element.html()+"</div>"}}}),angular.forEach(["align","icon","rel","transition","actionsheetContext"],function(attr){var kAttr="k"+attr.slice(0,1).toUpperCase()+attr.slice(1);module.directive(kAttr,function(){return{restrict:"A",priority:2,link:function(scope,element,attrs){element.attr(kendo.attr(kendo.toHyphens(attr)),scope.$eval(attrs[kAttr]))}}})});var WIDGET_TEMPLATE_OPTIONS={TreeMap:["Template"],MobileListView:["HeaderTemplate","Template"],MobileScrollView:["EmptyTemplate","Template"],Grid:["AltRowTemplate","DetailTemplate","RowTemplate"],ListView:["EditTemplate","Template","AltTemplate"],Pager:["SelectTemplate","LinkTemplate"],PivotGrid:["ColumnHeaderTemplate","DataCellTemplate","RowHeaderTemplate"],Scheduler:["AllDayEventTemplate","DateHeaderTemplate","EventTemplate","MajorTimeHeaderTemplate","MinorTimeHeaderTemplate"],TreeView:["Template"],Validator:["ErrorTemplate"]};!function(){var templateDirectives={};angular.forEach(WIDGET_TEMPLATE_OPTIONS,function(templates,widget){angular.forEach(templates,function(template){templateDirectives[template]||(templateDirectives[template]=[]),templateDirectives[template].push("?^^kendo"+widget)})}),angular.forEach(templateDirectives,function(parents,directive){var templateName="k"+directive,attrName=kendo.toHyphens(templateName);module.directive(templateName,function(){return{restrict:"A",require:parents,terminal:!0,compile:function($element,$attrs){if(""===$attrs[templateName]){$element.removeAttr(attrName);var template=$element[0].outerHTML;return function(scope,element,attrs,controllers){for(var controller;!controller&&controllers.length;)controller=controllers.shift();controller?(controller.template(templateName,template),$element.remove()):$log.warn(attrName+" without a matching parent widget found. It can be one of the following: "+parents.join(", "))}}}}})})}()}}(window.kendo.jQuery,window.angular)}()}(),function(){!function(){!function($,undefined){function toOdataFilter(filter,useOdataFour){var idx,length,field,type,format,operator,value,ignoreCase,result=[],logic=filter.logic||"and",filters=filter.filters;for(idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],field=filter.field,value=filter.value,operator=filter.operator,filter.filters?filter=toOdataFilter(filter,useOdataFour):(ignoreCase=filter.ignoreCase,field=field.replace(/\./g,"/"),filter=odataFilters[operator],useOdataFour&&(filter=odataFiltersVersionFour[operator]),filter&&value!==undefined&&(type=$.type(value),"string"===type?(format="'{1}'",value=value.replace(/'/g,"''"),ignoreCase===!0&&(field="tolower("+field+")")):format="date"===type?useOdataFour?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",filter.length>3?"substringof"!==filter?format="{0}({2},"+format+")":(format="{0}("+format+",{2})","doesnotcontain"===operator&&(useOdataFour?(format="{0}({2},'{1}') eq -1",filter="indexof"):format+=" eq false")):format="{2} {0} "+format,filter=kendo.format(format,filter,value,field))),result.push(filter);return filter=result.join(" "+logic+" "),result.length>1&&(filter="("+filter+")"),filter}function stripMetadata(obj){for(var name in obj)0===name.indexOf("@odata")&&delete obj[name]}var kendo=window.kendo,extend=$.extend,odataFilters={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith"},odataFiltersVersionFour=extend({},odataFilters,{contains:"contains"}),mappers={pageSize:$.noop,page:$.noop,filter:function(params,filter,useVersionFour){filter&&(filter=toOdataFilter(filter,useVersionFour),filter&&(params.$filter=filter))},sort:function(params,orderby){var expr=$.map(orderby,function(value){var order=value.field.replace(/\./g,"/");return"desc"===value.dir&&(order+=" desc"),order}).join(",");expr&&(params.$orderby=expr)},skip:function(params,skip){skip&&(params.$skip=skip)},take:function(params,take){take&&(params.$top=take)}},defaultDataType={read:{dataType:"jsonp"}};extend(!0,kendo.data,{schemas:{odata:{type:"json",data:function(data){return data.d.results||[data.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(options,type,useVersionFour){var params,value,option,dataType;if(options=options||{},type=type||"read",dataType=(this.options||defaultDataType)[type],dataType=dataType?dataType.dataType:"json","read"===type){params={$inlinecount:"allpages"},"json"!=dataType&&(params.$format="json");for(option in options)mappers[option]?mappers[option](params,options[option],useVersionFour):params[option]=options[option]}else{if("json"!==dataType)throw new Error("Only json dataType can be used for "+type+" operation.");if("destroy"!==type){for(option in options)value=options[option],"number"==typeof value&&(options[option]=value+"");params=kendo.stringify(options)}}return params}}}}),extend(!0,kendo.data,{schemas:{"odata-v4":{type:"json",data:function(data){return data=$.extend({},data),stripMetadata(data),data.value?data.value:[data]},total:function(data){return data["@odata.count"]}}},transports:{"odata-v4":{read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(options,type){var result=kendo.data.transports.odata.parameterMap(options,type,!0);return"read"==type&&(result.$count=!0,delete result.$inlinecount),result}}}})}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,isArray=$.isArray,isPlainObject=$.isPlainObject,map=$.map,each=$.each,extend=$.extend,getter=kendo.getter,Class=kendo.Class,XmlDataReader=Class.extend({init:function(options){var that=this,total=options.total,model=options.model,parse=options.parse,errors=options.errors,serialize=options.serialize,data=options.data;if(model){if(isPlainObject(model)){var base=options.modelBase||kendo.data.Model;model.fields&&each(model.fields,function(field,value){isPlainObject(value)&&value.field?$.isFunction(value.field)||(value=extend(value,{field:that.getter(value.field)})):value={field:that.getter(value)},model.fields[field]=value});var id=model.id;if(id){var idField={};idField[that.xpathToMember(id,!0)]={field:that.getter(id)},model.fields=extend(idField,model.fields),model.id=that.xpathToMember(id)}model=base.define(model)}that.model=model}if(total&&("string"==typeof total?(total=that.getter(total),that.total=function(data){return parseInt(total(data),10)}):"function"==typeof total&&(that.total=total)),errors&&("string"==typeof errors?(errors=that.getter(errors),that.errors=function(data){return errors(data)||null}):"function"==typeof errors&&(that.errors=errors)),data&&("string"==typeof data?(data=that.xpathToMember(data),that.data=function(value){var modelInstance,result=that.evaluate(value,data);return result=isArray(result)?result:[result],that.model&&model.fields?(modelInstance=new that.model,map(result,function(value){if(value){var field,record={};for(field in model.fields)record[field]=modelInstance._parse(field,model.fields[field].field(value));return record}})):result}):"function"==typeof data&&(that.data=data)),"function"==typeof parse){var xmlParse=that.parse;that.parse=function(data){var xml=parse.call(that,data);return xmlParse.call(that,xml)}}"function"==typeof serialize&&(that.serialize=serialize)},total:function(result){return this.data(result).length},errors:function(data){return data?data.errors:null},serialize:function(data){return data},parseDOM:function(element){var parsedNode,node,nodeType,nodeName,member,attribute,idx,result={},attributes=element.attributes,attributeCount=attributes.length;for(idx=0;attributeCount>idx;idx++)attribute=attributes[idx],result["@"+attribute.nodeName]=attribute.nodeValue;for(node=element.firstChild;node;node=node.nextSibling)nodeType=node.nodeType,3===nodeType||4===nodeType?result["#text"]=node.nodeValue:1===nodeType&&(parsedNode=this.parseDOM(node),nodeName=node.nodeName,member=result[nodeName],isArray(member)?member.push(parsedNode):member=member!==undefined?[member,parsedNode]:parsedNode,result[nodeName]=member);return result},evaluate:function(value,expression){for(var member,result,length,intermediateResult,idx,members=expression.split(".");member=members.shift();)if(value=value[member],isArray(value)){for(result=[],expression=members.join("."),idx=0,length=value.length;length>idx;idx++)intermediateResult=this.evaluate(value[idx],expression),intermediateResult=isArray(intermediateResult)?intermediateResult:[intermediateResult],result.push.apply(result,intermediateResult);return result}return value},parse:function(xml){var documentElement,tree,result={};return documentElement=xml.documentElement||$.parseXML(xml).documentElement,tree=this.parseDOM(documentElement),result[documentElement.nodeName]=tree,result},xpathToMember:function(member,raw){return member?(member=member.replace(/^\//,"").replace(/\//g,"."),member.indexOf("@")>=0?member.replace(/\.?(@.*)/,raw?"$1":'["$1"]'):member.indexOf("text()")>=0?member.replace(/(\.?text\(\))/,raw?"#text":'["#text"]'):member):""},getter:function(member){return getter(this.xpathToMember(member),!0)}});$.extend(!0,kendo.data,{XmlDataReader:XmlDataReader,readers:{xml:XmlDataReader}})}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function eventHandler(context,type,field,prefix){return function(e){var key,event={};for(key in e)event[key]=e[key];prefix?event.field=field+"."+e.field:event.field=field,type==CHANGE&&context._notifyChange&&context._notifyChange(event),context.trigger(type,event)}}function equal(x,y){if(x===y)return!0;var field,xtype=$.type(x),ytype=$.type(y);if(xtype!==ytype)return!1;if("date"===xtype)return x.getTime()===y.getTime();if("object"!==xtype&&"array"!==xtype)return!1;for(field in x)if(!equal(x[field],y[field]))return!1;return!0}function getFieldByName(obj,name){var field,fieldName;for(fieldName in obj){if(field=obj[fieldName],isPlainObject(field)&&field.field&&field.field===name)return field;if(field===name)return field}return null}function Query(data){this.data=data||[]}function normalizeSort(field,dir){if(field){var descriptor=typeof field===STRING?{field:field,dir:dir}:field,descriptors=isArray(descriptor)?descriptor:descriptor!==undefined?[descriptor]:[];return grep(descriptors,function(d){return!!d.dir})}}function normalizeOperator(expression){var idx,length,filter,operator,filters=expression.filters;if(filters)for(idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],operator=filter.operator,operator&&typeof operator===STRING&&(filter.operator=operatorMap[operator.toLowerCase()]||operator),normalizeOperator(filter)}function normalizeFilter(expression){return expression&&!isEmptyObject(expression)?((isArray(expression)||!expression.filters)&&(expression={logic:"and",filters:isArray(expression)?expression:[expression]}),normalizeOperator(expression),expression):void 0}function normalizeAggregate(expressions){return isArray(expressions)?expressions:[expressions]}function normalizeGroup(field,dir){var descriptor=typeof field===STRING?{field:field,dir:dir}:field,descriptors=isArray(descriptor)?descriptor:descriptor!==undefined?[descriptor]:[];return map(descriptors,function(d){return{field:d.field,dir:d.dir||"asc",aggregates:d.aggregates}})}function groupValueComparer(a,b){return a&&a.getTime&&b&&b.getTime?a.getTime()===b.getTime():a===b}function calculateAggregate(accumulator,aggregates,item,index,length,state){aggregates=aggregates||[];var idx,aggr,functionName,len=aggregates.length;for(idx=0;len>idx;idx++){aggr=aggregates[idx],functionName=aggr.aggregate;var field=aggr.field;accumulator[field]=accumulator[field]||{},state[field]=state[field]||{},state[field][functionName]=state[field][functionName]||{},accumulator[field][functionName]=functions[functionName.toLowerCase()](accumulator[field][functionName],item,kendo.accessor(field),index,length,state[field][functionName])}}function isNumber(val){return"number"==typeof val&&!isNaN(val)}function isDate(val){return val&&val.getTime}function toJSON(array){var idx,length=array.length,result=new Array(length);for(idx=0;length>idx;idx++)result[idx]=array[idx].toJSON();return result}function serializeRecords(data,getters,modelInstance,originalFieldNames,fieldNames){var record,getter,originalName,idx,length,setters={};for(idx=0,length=data.length;length>idx;idx++){record=data[idx];for(getter in getters)originalName=fieldNames[getter],originalName&&originalName!==getter&&(setters[originalName]||(setters[originalName]=kendo.setter(originalName)),setters[originalName](record,getters[getter](record)),delete record[getter])}}function convertRecords(data,getters,modelInstance,originalFieldNames,fieldNames){var record,getter,originalName,idx,length;for(idx=0,length=data.length;length>idx;idx++){record=data[idx];for(getter in getters)record[getter]=modelInstance._parse(getter,getters[getter](record)),originalName=fieldNames[getter],originalName&&originalName!==getter&&delete record[originalName]}}function convertGroup(data,getters,modelInstance,originalFieldNames,fieldNames){var record,idx,fieldName,length;for(idx=0,length=data.length;length>idx;idx++)record=data[idx],fieldName=originalFieldNames[record.field],fieldName&&fieldName!=record.field&&(record.field=fieldName),record.value=modelInstance._parse(record.field,record.value),record.hasSubgroups?convertGroup(record.items,getters,modelInstance,originalFieldNames,fieldNames):convertRecords(record.items,getters,modelInstance,originalFieldNames,fieldNames)}function wrapDataAccess(originalFunction,model,converter,getters,originalFieldNames,fieldNames){return function(data){return data=originalFunction(data),data&&!isEmptyObject(getters)&&("[object Array]"===toString.call(data)||data instanceof ObservableArray||(data=[data]),converter(data,getters,new model,originalFieldNames,fieldNames)),data||[]}}function mergeGroups(target,dest,skip,take){for(var group,items,idx=0;dest.length&&take;){group=dest[idx],items=group.items;var length=items.length;if(target&&target.field===group.field&&target.value===group.value?(target.hasSubgroups&&target.items.length?mergeGroups(target.items[target.items.length-1],group.items,skip,take):(items=items.slice(skip,skip+take),target.items=target.items.concat(items)),dest.splice(idx--,1)):group.hasSubgroups&&items.length?(mergeGroups(group,items,skip,take),group.items.length||dest.splice(idx--,1)):(items=items.slice(skip,skip+take),group.items=items,group.items.length||dest.splice(idx--,1)),0===items.length?skip-=length:(skip=0,take-=items.length),++idx>=dest.length)break}idx<dest.length&&dest.splice(idx,dest.length-idx)}function flattenGroups(data){var idx,length,items,itemIndex,result=[];for(idx=0,length=data.length;length>idx;idx++){var group=data.at(idx);if(group.hasSubgroups)result=result.concat(flattenGroups(group.items));else for(items=group.items,itemIndex=0;itemIndex<items.length;itemIndex++)result.push(items.at(itemIndex))}return result}function wrapGroupItems(data,model){var idx,length,group;if(model)for(idx=0,length=data.length;length>idx;idx++)group=data.at(idx),group.hasSubgroups?wrapGroupItems(group.items,model):group.items=new LazyObservableArray(group.items,model)}function eachGroupItems(data,func){for(var idx=0,length=data.length;length>idx;idx++)if(data[idx].hasSubgroups){if(eachGroupItems(data[idx].items,func))return!0}else if(func(data[idx].items,data[idx]))return!0}function replaceInRanges(ranges,data,item,observable){for(var idx=0;idx<ranges.length&&ranges[idx].data!==data&&!replaceInRange(ranges[idx].data,item,observable);idx++);}function replaceInRange(items,item,observable){for(var idx=0,length=items.length;length>idx;idx++){if(items[idx]&&items[idx].hasSubgroups)return replaceInRange(items[idx].items,item,observable);if(items[idx]===item||items[idx]===observable)return items[idx]=observable,!0}}function replaceWithObservable(view,data,ranges,type,serverGrouping){for(var viewIndex=0,length=view.length;length>viewIndex;viewIndex++){var item=view[viewIndex];if(item&&!(item instanceof type))if(item.hasSubgroups===undefined||serverGrouping){for(var idx=0;idx<data.length;idx++)if(data[idx]===item){view[viewIndex]=data.at(idx),replaceInRanges(ranges,data,item,view[viewIndex]);break}}else replaceWithObservable(item.items,data,ranges,type,serverGrouping)}}function removeModel(data,model){var idx,length;for(idx=0,length=data.length;length>idx;idx++){var dataItem=data.at(idx);if(dataItem.uid==model.uid)return data.splice(idx,1),dataItem}}function indexOfPristineModel(data,model){return model?indexOf(data,function(item){return item.uid&&item.uid==model.uid||item[model.idField]===model.id&&model.id!==model._defaultId}):-1}function indexOfModel(data,model){return model?indexOf(data,function(item){return item.uid==model.uid}):-1}function indexOf(data,comparer){var idx,length;for(idx=0,length=data.length;length>idx;idx++)if(comparer(data[idx]))return idx;return-1}function fieldNameFromModel(fields,name){if(fields&&!isEmptyObject(fields)){var fieldName,descriptor=fields[name];return fieldName=isPlainObject(descriptor)?descriptor.from||descriptor.field||name:fields[name]||name,isFunction(fieldName)?name:fieldName}return name}function convertFilterDescriptorsField(descriptor,model){var idx,length,target={};for(var field in descriptor)"filters"!==field&&(target[field]=descriptor[field]);if(descriptor.filters)for(target.filters=[],idx=0,length=descriptor.filters.length;length>idx;idx++)target.filters[idx]=convertFilterDescriptorsField(descriptor.filters[idx],model);else target.field=fieldNameFromModel(model.fields,target.field);return target}function convertDescriptorsField(descriptors,model){var idx,length,target,descriptor,result=[];for(idx=0,length=descriptors.length;length>idx;idx++){target={},descriptor=descriptors[idx];for(var field in descriptor)target[field]=descriptor[field];target.field=fieldNameFromModel(model.fields,target.field),target.aggregates&&isArray(target.aggregates)&&(target.aggregates=convertDescriptorsField(target.aggregates,model)),result.push(target)}return result}function inferSelect(select,fields){select=$(select)[0];var idx,length,optgroup,option,record,value,options=select.options,firstField=fields[0],secondField=fields[1],data=[];for(idx=0,length=options.length;length>idx;idx++)record={},option=options[idx],optgroup=option.parentNode,optgroup===select&&(optgroup=null),option.disabled||optgroup&&optgroup.disabled||(optgroup&&(record.optgroup=optgroup.label),record[firstField.field]=option.text,value=option.attributes.value,value=value&&value.specified?option.value:option.text,record[secondField.field]=value,data.push(record));return data}function inferTable(table,fields){var idx,length,fieldIndex,cells,record,cell,empty,tbody=$(table)[0].tBodies[0],rows=tbody?tbody.rows:[],fieldCount=fields.length,data=[];for(idx=0,length=rows.length;length>idx;idx++){for(record={},empty=!0,cells=rows[idx].cells,fieldIndex=0;fieldCount>fieldIndex;fieldIndex++)cell=cells[fieldIndex],"th"!==cell.nodeName.toLowerCase()&&(empty=!1,record[fields[fieldIndex].field]=cell.innerHTML);empty||data.push(record)}return data}function dataMethod(name){return function(){var data=this._data,result=DataSource.fn[name].apply(this,slice.call(arguments));return this._data!=data&&this._attachBubbleHandlers(),result}}function inferList(list,fields){function elements(collection,tagName){return collection.filter(tagName).add(collection.find(tagName))}var idx,length,record,item,id,textChild,className,children,items=$(list).children(),data=[],textField=fields[0].field,urlField=fields[1]&&fields[1].field,spriteCssClassField=fields[2]&&fields[2].field,imageUrlField=fields[3]&&fields[3].field;for(idx=0,length=items.length;length>idx;idx++)record={_loaded:!0},item=items.eq(idx),textChild=item[0].firstChild,children=item.children(),list=children.filter("ul"),children=children.filter(":not(ul)"),id=item.attr("data-id"),id&&(record.id=id),textChild&&(record[textField]=3==textChild.nodeType?textChild.nodeValue:children.text()),urlField&&(record[urlField]=elements(children,"a").attr("href")),imageUrlField&&(record[imageUrlField]=elements(children,"img").attr("src")),spriteCssClassField&&(className=elements(children,".k-sprite").prop("className"),
record[spriteCssClassField]=className&&$.trim(className.replace("k-sprite",""))),list.length&&(record.items=inferList(list.eq(0),fields)),"true"==item.attr("data-hasChildren")&&(record.hasChildren=!0),data.push(record);return data}var map,extend=$.extend,proxy=$.proxy,isPlainObject=$.isPlainObject,isEmptyObject=$.isEmptyObject,isArray=$.isArray,grep=$.grep,ajax=$.ajax,each=$.each,noop=$.noop,kendo=window.kendo,isFunction=kendo.isFunction,Observable=kendo.Observable,Class=kendo.Class,STRING="string",FUNCTION="function",CREATE="create",READ="read",UPDATE="update",DESTROY="destroy",CHANGE="change",SYNC="sync",GET="get",ERROR="error",REQUESTSTART="requestStart",PROGRESS="progress",REQUESTEND="requestEnd",crud=[CREATE,READ,UPDATE,DESTROY],identity=function(o){return o},getter=kendo.getter,stringify=kendo.stringify,math=Math,push=[].push,join=[].join,pop=[].pop,splice=[].splice,shift=[].shift,slice=[].slice,unshift=[].unshift,toString={}.toString,stableSort=kendo.support.stableSort,dateRegExp=/^\/Date\((.*?)\)\/$/,newLineRegExp=/(\r+|\n+)/g,quoteRegExp=/(?=['\\])/g,ObservableArray=Observable.extend({init:function(array,type){var that=this;that.type=type||ObservableObject,Observable.fn.init.call(that),that.length=array.length,that.wrapAll(array,that)},at:function(index){return this[index]},toJSON:function(){var idx,value,length=this.length,json=new Array(length);for(idx=0;length>idx;idx++)value=this[idx],value instanceof ObservableObject&&(value=value.toJSON()),json[idx]=value;return json},parent:noop,wrapAll:function(source,target){var idx,length,that=this,parent=function(){return that};for(target=target||[],idx=0,length=source.length;length>idx;idx++)target[idx]=that.wrap(source[idx],parent);return target},wrap:function(object,parent){var observable,that=this;return null!==object&&"[object Object]"===toString.call(object)&&(observable=object instanceof that.type||object instanceof Model,observable||(object=object instanceof ObservableObject?object.toJSON():object,object=new that.type(object)),object.parent=parent,object.bind(CHANGE,function(e){that.trigger(CHANGE,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),object},push:function(){var result,index=this.length,items=this.wrapAll(arguments);return result=push.apply(this,items),this.trigger(CHANGE,{action:"add",index:index,items:items}),result},slice:slice,sort:[].sort,join:join,pop:function(){var length=this.length,result=pop.apply(this);return length&&this.trigger(CHANGE,{action:"remove",index:length-1,items:[result]}),result},splice:function(index,howMany,item){var result,i,len,items=this.wrapAll(slice.call(arguments,2));if(result=splice.apply(this,[index,howMany].concat(items)),result.length)for(this.trigger(CHANGE,{action:"remove",index:index,items:result}),i=0,len=result.length;len>i;i++)result[i]&&result[i].children&&result[i].unbind(CHANGE);return item&&this.trigger(CHANGE,{action:"add",index:index,items:items}),result},shift:function(){var length=this.length,result=shift.apply(this);return length&&this.trigger(CHANGE,{action:"remove",index:0,items:[result]}),result},unshift:function(){var result,items=this.wrapAll(arguments);return result=unshift.apply(this,items),this.trigger(CHANGE,{action:"add",index:0,items:items}),result},indexOf:function(item){var idx,length,that=this;for(idx=0,length=that.length;length>idx;idx++)if(that[idx]===item)return idx;return-1},forEach:function(callback){for(var idx=0,length=this.length;length>idx;idx++)callback(this[idx],idx,this)},map:function(callback){for(var idx=0,result=[],length=this.length;length>idx;idx++)result[idx]=callback(this[idx],idx,this);return result},reduce:function(callback){var result,idx=0,length=this.length;for(2==arguments.length?result=arguments[1]:length>idx&&(result=this[idx++]);length>idx;idx++)result=callback(result,this[idx],idx,this);return result},reduceRight:function(callback){var result,idx=this.length-1;for(2==arguments.length?result=arguments[1]:idx>0&&(result=this[idx--]);idx>=0;idx--)result=callback(result,this[idx],idx,this);return result},filter:function(callback){for(var item,idx=0,result=[],length=this.length;length>idx;idx++)item=this[idx],callback(item,idx,this)&&(result[result.length]=item);return result},find:function(callback){for(var item,idx=0,length=this.length;length>idx;idx++)if(item=this[idx],callback(item,idx,this))return item},every:function(callback){for(var item,idx=0,length=this.length;length>idx;idx++)if(item=this[idx],!callback(item,idx,this))return!1;return!0},some:function(callback){for(var item,idx=0,length=this.length;length>idx;idx++)if(item=this[idx],callback(item,idx,this))return!0;return!1},remove:function(item){var idx=this.indexOf(item);-1!==idx&&this.splice(idx,1)},empty:function(){this.splice(0,this.length)}}),LazyObservableArray=ObservableArray.extend({init:function(data,type){Observable.fn.init.call(this),this.type=type||ObservableObject;for(var idx=0;idx<data.length;idx++)this[idx]=data[idx];this.length=idx,this._parent=proxy(function(){return this},this)},at:function(index){var item=this[index];return item instanceof this.type?item.parent=this._parent:item=this[index]=this.wrap(item,this._parent),item}}),ObservableObject=Observable.extend({init:function(value){var member,field,that=this,parent=function(){return that};Observable.fn.init.call(this),this._handlers={};for(field in value)member=value[field],"object"==typeof member&&member&&!member.getTime&&"_"!=field.charAt(0)&&(member=that.wrap(member,field,parent)),that[field]=member;that.uid=kendo.guid()},shouldSerialize:function(field){return this.hasOwnProperty(field)&&"_handlers"!==field&&"_events"!==field&&typeof this[field]!==FUNCTION&&"uid"!==field},forEach:function(f){for(var i in this)this.shouldSerialize(i)&&f(this[i],i)},toJSON:function(){var value,field,result={};for(field in this)this.shouldSerialize(field)&&(value=this[field],(value instanceof ObservableObject||value instanceof ObservableArray)&&(value=value.toJSON()),result[field]=value);return result},get:function(field){var result,that=this;return that.trigger(GET,{field:field}),result="this"===field?that:kendo.getter(field,!0)(that)},_set:function(field,value){var that=this,composite=field.indexOf(".")>=0;if(composite)for(var paths=field.split("."),path="";paths.length>1;){path+=paths.shift();var obj=kendo.getter(path,!0)(that);if(obj instanceof ObservableObject)return obj.set(paths.join("."),value),composite;path+="."}return kendo.setter(field)(that,value),composite},set:function(field,value){var that=this,composite=field.indexOf(".")>=0,current=kendo.getter(field,!0)(that);current!==value&&(current instanceof Observable&&this._handlers[field]&&(this._handlers[field].get&&current.unbind(GET,this._handlers[field].get),current.unbind(CHANGE,this._handlers[field].change)),that.trigger("set",{field:field,value:value})||(composite||(value=that.wrap(value,field,function(){return that})),(!that._set(field,value)||field.indexOf("(")>=0||field.indexOf("[")>=0)&&that.trigger(CHANGE,{field:field})))},parent:noop,wrap:function(object,field,parent){var get,change,that=this,type=toString.call(object);if(null!=object&&("[object Object]"===type||"[object Array]"===type)){var isObservableArray=object instanceof ObservableArray,isDataSource=object instanceof DataSource;"[object Object]"!==type||isDataSource||isObservableArray?("[object Array]"===type||isObservableArray||isDataSource)&&(isObservableArray||isDataSource||(object=new ObservableArray(object)),change=eventHandler(that,CHANGE,field,!1),object.bind(CHANGE,change),that._handlers[field]={change:change}):(object instanceof ObservableObject||(object=new ObservableObject(object)),get=eventHandler(that,GET,field,!0),object.bind(GET,get),change=eventHandler(that,CHANGE,field,!0),object.bind(CHANGE,change),that._handlers[field]={get:get,change:change}),object.parent=parent}return object}}),parsers={number:function(value){return kendo.parseFloat(value)},date:function(value){return kendo.parseDate(value)},"boolean":function(value){return typeof value===STRING?"true"===value.toLowerCase():null!=value?!!value:value},string:function(value){return null!=value?value+"":value},"default":function(value){return value}},defaultValues={string:"",number:0,date:new Date,"boolean":!1,"default":""},Model=ObservableObject.extend({init:function(data){var that=this;if((!data||$.isEmptyObject(data))&&(data=$.extend({},that.defaults,data),that._initializers))for(var idx=0;idx<that._initializers.length;idx++){var name=that._initializers[idx];data[name]=that.defaults[name]()}ObservableObject.fn.init.call(that,data),that.dirty=!1,that.idField&&(that.id=that.get(that.idField),that.id===undefined&&(that.id=that._defaultId))},shouldSerialize:function(field){return ObservableObject.fn.shouldSerialize.call(this,field)&&"uid"!==field&&!("id"!==this.idField&&"id"===field)&&"dirty"!==field&&"_accessors"!==field},_parse:function(field,value){var parse,that=this,fieldName=field,fields=that.fields||{};return field=fields[field],field||(field=getFieldByName(fields,fieldName)),field&&(parse=field.parse,!parse&&field.type&&(parse=parsers[field.type.toLowerCase()])),parse?parse(value):value},_notifyChange:function(e){var action=e.action;("add"==action||"remove"==action)&&(this.dirty=!0)},editable:function(field){return field=(this.fields||{})[field],field?field.editable!==!1:!0},set:function(field,value,initiator){var that=this;that.editable(field)&&(value=that._parse(field,value),equal(value,that.get(field))||(that.dirty=!0,ObservableObject.fn.set.call(that,field,value,initiator)))},accept:function(data){var field,that=this,parent=function(){return that};for(field in data){var value=data[field];"_"!=field.charAt(0)&&(value=that.wrap(data[field],field,parent)),that._set(field,value)}that.idField&&(that.id=that.get(that.idField)),that.dirty=!1},isNew:function(){return this.id===this._defaultId}});Model.define=function(base,options){options===undefined&&(options=base,base=Model);var model,name,field,type,value,idx,length,originalName,proto=extend({defaults:{}},options),fields={},id=proto.id,functionFields=[];if(id&&(proto.idField=id),proto.id&&delete proto.id,id&&(proto.defaults[id]=proto._defaultId=""),"[object Array]"===toString.call(proto.fields)){for(idx=0,length=proto.fields.length;length>idx;idx++)field=proto.fields[idx],typeof field===STRING?fields[field]={}:field.field&&(fields[field.field]=field);proto.fields=fields}for(name in proto.fields)field=proto.fields[name],type=field.type||"default",value=null,originalName=name,name=typeof field.field===STRING?field.field:name,field.nullable||(value=proto.defaults[originalName!==name?originalName:name]=field.defaultValue!==undefined?field.defaultValue:defaultValues[type.toLowerCase()],"function"==typeof value&&functionFields.push(name)),options.id===name&&(proto._defaultId=value),proto.defaults[originalName!==name?originalName:name]=value,field.parse=field.parse||parsers[type];return functionFields.length>0&&(proto._initializers=functionFields),model=base.extend(proto),model.define=function(options){return Model.define(model,options)},proto.fields&&(model.fields=proto.fields,model.idField=proto.idField),model};var Comparer={selector:function(field){return isFunction(field)?field:getter(field)},compare:function(field){var selector=this.selector(field);return function(a,b){return a=selector(a),b=selector(b),null==a&&null==b?0:null==a?-1:null==b?1:a.localeCompare?a.localeCompare(b):a>b?1:b>a?-1:0}},create:function(sort){var compare=sort.compare||this.compare(sort.field);return"desc"==sort.dir?function(a,b){return compare(b,a,!0)}:compare},combine:function(comparers){return function(a,b){var idx,length,result=comparers[0](a,b);for(idx=1,length=comparers.length;length>idx;idx++)result=result||comparers[idx](a,b);return result}}},StableComparer=extend({},Comparer,{asc:function(field){var selector=this.selector(field);return function(a,b){var valueA=selector(a),valueB=selector(b);return valueA&&valueA.getTime&&valueB&&valueB.getTime&&(valueA=valueA.getTime(),valueB=valueB.getTime()),valueA===valueB?a.__position-b.__position:null==valueA?-1:null==valueB?1:valueA.localeCompare?valueA.localeCompare(valueB):valueA>valueB?1:-1}},desc:function(field){var selector=this.selector(field);return function(a,b){var valueA=selector(a),valueB=selector(b);return valueA&&valueA.getTime&&valueB&&valueB.getTime&&(valueA=valueA.getTime(),valueB=valueB.getTime()),valueA===valueB?a.__position-b.__position:null==valueA?1:null==valueB?-1:valueB.localeCompare?valueB.localeCompare(valueA):valueB>valueA?1:-1}},create:function(sort){return this[sort.dir](sort.field)}});map=function(array,callback){var idx,length=array.length,result=new Array(length);for(idx=0;length>idx;idx++)result[idx]=callback(array[idx],idx,array);return result};var operators=function(){function quote(value){return value.replace(quoteRegExp,"\\").replace(newLineRegExp,"")}function operator(op,a,b,ignore){var date;return null!=b&&(typeof b===STRING&&(b=quote(b),date=dateRegExp.exec(b),date?b=new Date(+date[1]):ignore?(b="'"+b.toLowerCase()+"'",a="("+a+" || '').toLowerCase()"):b="'"+b+"'"),b.getTime&&(a="("+a+"?"+a+".getTime():"+a+")",b=b.getTime())),a+" "+op+" "+b}return{quote:function(value){return value&&value.getTime?"new Date("+value.getTime()+")":"string"==typeof value?"'"+quote(value)+"'":""+value},eq:function(a,b,ignore){return operator("==",a,b,ignore)},neq:function(a,b,ignore){return operator("!=",a,b,ignore)},gt:function(a,b,ignore){return operator(">",a,b,ignore)},gte:function(a,b,ignore){return operator(">=",a,b,ignore)},lt:function(a,b,ignore){return operator("<",a,b,ignore)},lte:function(a,b,ignore){return operator("<=",a,b,ignore)},startswith:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".lastIndexOf('"+b+"', 0) == 0"},doesnotstartwith:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".lastIndexOf('"+b+"', 0) == -1"},endswith:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".indexOf('"+b+"', "+a+".length - "+(b||"").length+") >= 0"},doesnotendwith:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".indexOf('"+b+"', "+a+".length - "+(b||"").length+") < 0"},contains:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".indexOf('"+b+"') >= 0"},doesnotcontain:function(a,b,ignore){return ignore&&(a="("+a+" || '').toLowerCase()",b&&(b=b.toLowerCase())),b&&(b=quote(b)),a+".indexOf('"+b+"') == -1"}}}();Query.filterExpr=function(expression){var idx,length,filter,expr,field,operator,expressions=[],logic={and:" && ",or:" || "},fieldFunctions=[],operatorFunctions=[],filters=expression.filters;for(idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],field=filter.field,operator=filter.operator,filter.filters?(expr=Query.filterExpr(filter),filter=expr.expression.replace(/__o\[(\d+)\]/g,function(match,index){return index=+index,"__o["+(operatorFunctions.length+index)+"]"}).replace(/__f\[(\d+)\]/g,function(match,index){return index=+index,"__f["+(fieldFunctions.length+index)+"]"}),operatorFunctions.push.apply(operatorFunctions,expr.operators),fieldFunctions.push.apply(fieldFunctions,expr.fields)):(typeof field===FUNCTION?(expr="__f["+fieldFunctions.length+"](d)",fieldFunctions.push(field)):expr=kendo.expr(field),typeof operator===FUNCTION?(filter="__o["+operatorFunctions.length+"]("+expr+", "+operators.quote(filter.value)+")",operatorFunctions.push(operator)):filter=operators[(operator||"eq").toLowerCase()](expr,filter.value,filter.ignoreCase!==undefined?filter.ignoreCase:!0)),expressions.push(filter);return{expression:"("+expressions.join(logic[expression.logic])+")",fields:fieldFunctions,operators:operatorFunctions}};var operatorMap={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};Query.normalizeFilter=normalizeFilter,Query.prototype={toArray:function(){return this.data},range:function(index,count){return new Query(this.data.slice(index,index+count))},skip:function(count){return new Query(this.data.slice(count))},take:function(count){return new Query(this.data.slice(0,count))},select:function(selector){return new Query(map(this.data,selector))},order:function(selector,dir){var sort={dir:dir};return selector&&(selector.compare?sort.compare=selector.compare:sort.field=selector),new Query(this.data.slice(0).sort(Comparer.create(sort)))},orderBy:function(selector){return this.order(selector,"asc")},orderByDescending:function(selector){return this.order(selector,"desc")},sort:function(field,dir,comparer){var idx,length,descriptors=normalizeSort(field,dir),comparers=[];if(comparer=comparer||Comparer,descriptors.length){for(idx=0,length=descriptors.length;length>idx;idx++)comparers.push(comparer.create(descriptors[idx]));return this.orderBy({compare:comparer.combine(comparers)})}return this},filter:function(expressions){var idx,current,length,compiled,predicate,fields,operators,filter,data=this.data,result=[];if(expressions=normalizeFilter(expressions),!expressions||0===expressions.filters.length)return this;for(compiled=Query.filterExpr(expressions),fields=compiled.fields,operators=compiled.operators,predicate=filter=new Function("d, __f, __o","return "+compiled.expression),(fields.length||operators.length)&&(filter=function(d){return predicate(d,fields,operators)}),idx=0,length=data.length;length>idx;idx++)current=data[idx],filter(current)&&result.push(current);return new Query(result)},group:function(descriptors,allData){descriptors=normalizeGroup(descriptors||[]),allData=allData||this.data;var descriptor,that=this,result=new Query(that.data);return descriptors.length>0&&(descriptor=descriptors[0],result=result.groupBy(descriptor).select(function(group){var data=new Query(allData).filter([{field:group.field,operator:"eq",value:group.value,ignoreCase:!1}]);return{field:group.field,value:group.value,items:descriptors.length>1?new Query(group.items).group(descriptors.slice(1),data.toArray()).toArray():group.items,hasSubgroups:descriptors.length>1,aggregates:data.aggregate(descriptor.aggregates)}})),result},groupBy:function(descriptor){if(isEmptyObject(descriptor)||!this.data.length)return new Query([]);var item,currentValue,idx,len,field=descriptor.field,sorted=this._sortForGrouping(field,descriptor.dir||"asc"),accessor=kendo.accessor(field),groupValue=accessor.get(sorted[0],field),group={field:field,value:groupValue,items:[]},result=[group];for(idx=0,len=sorted.length;len>idx;idx++)item=sorted[idx],currentValue=accessor.get(item,field),groupValueComparer(groupValue,currentValue)||(groupValue=currentValue,group={field:field,value:groupValue,items:[]},result.push(group)),group.items.push(item);return new Query(result)},_sortForGrouping:function(field,dir){var idx,length,data=this.data;if(!stableSort){for(idx=0,length=data.length;length>idx;idx++)data[idx].__position=idx;for(data=new Query(data).sort(field,dir,StableComparer).toArray(),idx=0,length=data.length;length>idx;idx++)delete data[idx].__position;return data}return this.sort(field,dir).toArray()},aggregate:function(aggregates){var idx,len,result={},state={};if(aggregates&&aggregates.length)for(idx=0,len=this.data.length;len>idx;idx++)calculateAggregate(result,aggregates,this.data[idx],idx,len,state);return result}};var functions={sum:function(accumulator,item,accessor){var value=accessor.get(item);return isNumber(accumulator)?isNumber(value)&&(accumulator+=value):accumulator=value,accumulator},count:function(accumulator){return(accumulator||0)+1},average:function(accumulator,item,accessor,index,length,state){var value=accessor.get(item);return state.count===undefined&&(state.count=0),isNumber(accumulator)?isNumber(value)&&(accumulator+=value):accumulator=value,isNumber(value)&&state.count++,index==length-1&&isNumber(accumulator)&&(accumulator/=state.count),accumulator},max:function(accumulator,item,accessor){var value=accessor.get(item);return isNumber(accumulator)||isDate(accumulator)||(accumulator=value),value>accumulator&&(isNumber(value)||isDate(value))&&(accumulator=value),accumulator},min:function(accumulator,item,accessor){var value=accessor.get(item);return isNumber(accumulator)||isDate(accumulator)||(accumulator=value),accumulator>value&&(isNumber(value)||isDate(value))&&(accumulator=value),accumulator}};Query.process=function(data,options){options=options||{};var total,query=new Query(data),group=options.group,sort=normalizeGroup(group||[]).concat(normalizeSort(options.sort||[])),filterCallback=options.filterCallback,filter=options.filter,skip=options.skip,take=options.take;return filter&&(query=query.filter(filter),filterCallback&&(query=filterCallback(query)),total=query.toArray().length),sort&&(query=query.sort(sort),group&&(data=query.toArray())),skip!==undefined&&take!==undefined&&(query=query.range(skip,take)),group&&(query=query.group(group,data)),{total:total,data:query.toArray()}};var LocalTransport=Class.extend({init:function(options){this.data=options.data},read:function(options){options.success(this.data)},update:function(options){options.success(options.data)},create:function(options){options.success(options.data)},destroy:function(options){options.success(options.data)}}),RemoteTransport=Class.extend({init:function(options){var parameterMap,that=this;options=that.options=extend({},that.options,options),each(crud,function(index,type){typeof options[type]===STRING&&(options[type]={url:options[type]})}),that.cache=options.cache?Cache.create(options.cache):{find:noop,add:noop},parameterMap=options.parameterMap,isFunction(options.push)&&(that.push=options.push),that.push||(that.push=identity),that.parameterMap=isFunction(parameterMap)?parameterMap:function(options){var result={};return each(options,function(option,value){option in parameterMap&&(option=parameterMap[option],isPlainObject(option)&&(value=option.value(value),option=option.key)),result[option]=value}),result}},options:{parameterMap:identity},create:function(options){return ajax(this.setup(options,CREATE))},read:function(options){var success,error,result,that=this,cache=that.cache;options=that.setup(options,READ),success=options.success||noop,error=options.error||noop,result=cache.find(options.data),result!==undefined?success(result):(options.success=function(result){cache.add(options.data,result),success(result)},$.ajax(options))},update:function(options){return ajax(this.setup(options,UPDATE))},destroy:function(options){return ajax(this.setup(options,DESTROY))},setup:function(options,type){options=options||{};var parameters,that=this,operation=that.options[type],data=isFunction(operation.data)?operation.data(options.data):operation.data;return options=extend(!0,{},operation,options),parameters=extend(!0,{},data,options.data),options.data=that.parameterMap(parameters,type),isFunction(options.url)&&(options.url=options.url(parameters)),options}}),Cache=Class.extend({init:function(){this._store={}},add:function(key,data){key!==undefined&&(this._store[stringify(key)]=data)},find:function(key){return this._store[stringify(key)]},clear:function(){this._store={}},remove:function(key){delete this._store[stringify(key)]}});Cache.create=function(options){var store={inmemory:function(){return new Cache}};return isPlainObject(options)&&isFunction(options.find)?options:options===!0?new Cache:store[options]()};var DataReader=Class.extend({init:function(schema){var member,get,model,base,that=this;schema=schema||{};for(member in schema)get=schema[member],that[member]=typeof get===STRING?getter(get):get;base=schema.modelBase||Model,isPlainObject(that.model)&&(that.model=model=base.define(that.model));var dataFunction=proxy(that.data,that);if(that._dataAccessFunction=dataFunction,that.model){var fieldName,groupsFunction=proxy(that.groups,that),serializeFunction=proxy(that.serialize,that),originalFieldNames={},getters={},serializeGetters={},fieldNames={},shouldSerialize=!1;model=that.model,model.fields&&(each(model.fields,function(field,value){var fromName;fieldName=field,isPlainObject(value)&&value.field?fieldName=value.field:typeof value===STRING&&(fieldName=value),isPlainObject(value)&&value.from&&(fromName=value.from),shouldSerialize=shouldSerialize||fromName&&fromName!==field||fieldName!==field,getters[field]=getter(fromName||fieldName),serializeGetters[field]=getter(field),originalFieldNames[fromName||fieldName]=field,fieldNames[field]=fromName||fieldName}),!schema.serialize&&shouldSerialize&&(that.serialize=wrapDataAccess(serializeFunction,model,serializeRecords,serializeGetters,originalFieldNames,fieldNames))),that._dataAccessFunction=dataFunction,that.data=wrapDataAccess(dataFunction,model,convertRecords,getters,originalFieldNames,fieldNames),that.groups=wrapDataAccess(groupsFunction,model,convertGroup,getters,originalFieldNames,fieldNames)}},errors:function(data){return data?data.errors:null},parse:identity,data:identity,total:function(data){return data.length},groups:identity,aggregates:function(){return{}},serialize:function(data){return data}}),DataSource=Observable.extend({init:function(options){var model,data,that=this;if(options&&(data=options.data),options=that.options=extend({},that.options,options),that._map={},that._prefetch={},that._data=[],that._pristineData=[],that._ranges=[],that._view=[],that._pristineTotal=0,that._destroyed=[],that._pageSize=options.pageSize,that._page=options.page||(options.pageSize?1:undefined),that._sort=normalizeSort(options.sort),that._filter=normalizeFilter(options.filter),that._group=normalizeGroup(options.group),that._aggregate=options.aggregate,that._total=options.total,that._shouldDetachObservableParents=!0,Observable.fn.init.call(that),that.transport=Transport.create(options,data,that),isFunction(that.transport.push)&&that.transport.push({pushCreate:proxy(that._pushCreate,that),pushUpdate:proxy(that._pushUpdate,that),pushDestroy:proxy(that._pushDestroy,that)}),null!=options.offlineStorage)if("string"==typeof options.offlineStorage){var key=options.offlineStorage;that._storage={getItem:function(){return JSON.parse(localStorage.getItem(key))},setItem:function(item){localStorage.setItem(key,stringify(that.reader.serialize(item)))}}}else that._storage=options.offlineStorage;that.reader=new kendo.data.readers[options.schema.type||"json"](options.schema),model=that.reader.model||{},that._detachObservableParents(),that._data=that._observe(that._data),that._online=!0,that.bind(["push",ERROR,CHANGE,REQUESTSTART,SYNC,REQUESTEND,PROGRESS],options)},options:{data:null,schema:{modelBase:Model},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},clone:function(){return this},online:function(value){return value!==undefined?this._online!=value&&(this._online=value,value)?this.sync():$.Deferred().resolve().promise():this._online},offlineData:function(state){return null==this.options.offlineStorage?null:state!==undefined?this._storage.setItem(state):this._storage.getItem()||[]},_isServerGrouped:function(){var group=this.group()||[];return this.options.serverGrouping&&group.length},_pushCreate:function(result){this._push(result,"pushCreate")},_pushUpdate:function(result){this._push(result,"pushUpdate")},_pushDestroy:function(result){this._push(result,"pushDestroy")},_push:function(result,operation){var data=this._readData(result);data||(data=result),this[operation](data)},_flatData:function(data,skip){if(data){if(this._isServerGrouped())return flattenGroups(data);if(!skip)for(var idx=0;idx<data.length;idx++)data.at(idx)}return data},parent:noop,get:function(id){var idx,length,data=this._flatData(this._data);for(idx=0,length=data.length;length>idx;idx++)if(data[idx].id==id)return data[idx]},getByUid:function(id){var idx,length,data=this._flatData(this._data);if(data)for(idx=0,length=data.length;length>idx;idx++)if(data[idx].uid==id)return data[idx]},indexOf:function(model){return indexOfModel(this._data,model)},at:function(index){return this._data.at(index)},data:function(value){var that=this;if(value===undefined){if(that._data)for(var idx=0;idx<that._data.length;idx++)that._data.at(idx);return that._data}that._detachObservableParents(),that._data=this._observe(value),that._pristineData=value.slice(0),that._storeData(),that._ranges=[],that.trigger("reset"),that._addRange(that._data),that._total=that._data.length,that._pristineTotal=that._total,that._process(that._data)},view:function(value){return value===undefined?this._view:void(this._view=this._observeView(value))},_observeView:function(data){var that=this;replaceWithObservable(data,that._data,that._ranges,that.reader.model||ObservableObject,that._isServerGrouped());var view=new LazyObservableArray(data,that.reader.model);return view.parent=function(){return that.parent()},view},flatView:function(){var groups=this.group()||[];return groups.length?flattenGroups(this._view):this._view},add:function(model){return this.insert(this._data.length,model)},_createNewModel:function(model){return this.reader.model?new this.reader.model(model):model instanceof ObservableObject?model:new ObservableObject(model)},insert:function(index,model){return model||(model=index,index=0),model instanceof Model||(model=this._createNewModel(model)),this._isServerGrouped()?this._data.splice(index,0,this._wrapInEmptyGroup(model)):this._data.splice(index,0,model),model},pushCreate:function(items){isArray(items)||(items=[items]);var pushed=[],autoSync=this.options.autoSync;this.options.autoSync=!1;try{for(var idx=0;idx<items.length;idx++){var item=items[idx],result=this.add(item);pushed.push(result);var pristine=result.toJSON();this._isServerGrouped()&&(pristine=this._wrapInEmptyGroup(pristine)),this._pristineData.push(pristine)}}finally{this.options.autoSync=autoSync}pushed.length&&this.trigger("push",{type:"create",items:pushed})},pushUpdate:function(items){isArray(items)||(items=[items]);for(var pushed=[],idx=0;idx<items.length;idx++){var item=items[idx],model=this._createNewModel(item),target=this.get(model.id);target?(pushed.push(target),target.accept(item),target.trigger(CHANGE),this._updatePristineForModel(target,item)):this.pushCreate(item)}pushed.length&&this.trigger("push",{type:"update",items:pushed})},pushDestroy:function(items){var pushed=this._removeItems(items);pushed.length&&this.trigger("push",{type:"destroy",items:pushed})},_removeItems:function(items){isArray(items)||(items=[items]);var destroyed=[],autoSync=this.options.autoSync;this.options.autoSync=!1;try{for(var idx=0;idx<items.length;idx++){var item=items[idx],model=this._createNewModel(item),found=!1;this._eachItem(this._data,function(items){for(var idx=0;idx<items.length;idx++){var item=items.at(idx);if(item.id===model.id){destroyed.push(item),items.splice(idx,1),found=!0;break}}}),found&&(this._removePristineForModel(model),this._destroyed.pop())}}finally{this.options.autoSync=autoSync}return destroyed},remove:function(model){var result,that=this,hasGroups=that._isServerGrouped();return this._eachItem(that._data,function(items){return result=removeModel(items,model),result&&hasGroups?(result.isNew&&result.isNew()||that._destroyed.push(result),!0):void 0}),this._removeModelFromRanges(model),this._updateRangesLength(),model},destroyed:function(){return this._destroyed},created:function(){var idx,length,result=[],data=this._flatData(this._data);for(idx=0,length=data.length;length>idx;idx++)data[idx].isNew&&data[idx].isNew()&&result.push(data[idx]);return result;
},updated:function(){var idx,length,result=[],data=this._flatData(this._data);for(idx=0,length=data.length;length>idx;idx++)data[idx].isNew&&!data[idx].isNew()&&data[idx].dirty&&result.push(data[idx]);return result},sync:function(){var that=this,created=[],updated=[],destroyed=that._destroyed,promise=$.Deferred().resolve().promise();if(that.online()){if(!that.reader.model)return promise;created=that.created(),updated=that.updated();var promises=[];that.options.batch&&that.transport.submit?promises=that._sendSubmit(created,updated,destroyed):(promises.push.apply(promises,that._send("create",created)),promises.push.apply(promises,that._send("update",updated)),promises.push.apply(promises,that._send("destroy",destroyed))),promise=$.when.apply(null,promises).then(function(){var idx,length;for(idx=0,length=arguments.length;length>idx;idx++)that._accept(arguments[idx]);that._storeData(!0),that._change({action:"sync"}),that.trigger(SYNC)})}else that._storeData(!0),that._change({action:"sync"});return promise},cancelChanges:function(model){var that=this;model instanceof kendo.data.Model?that._cancelModel(model):(that._destroyed=[],that._detachObservableParents(),that._data=that._observe(that._pristineData),that.options.serverPaging&&(that._total=that._pristineTotal),that._ranges=[],that._addRange(that._data),that._change())},hasChanges:function(){var idx,length,data=this._flatData(this._data);if(this._destroyed.length)return!0;for(idx=0,length=data.length;length>idx;idx++)if(data[idx].isNew&&data[idx].isNew()||data[idx].dirty)return!0;return!1},_accept:function(result){var length,that=this,models=result.models,response=result.response,idx=0,serverGroup=that._isServerGrouped(),pristine=that._pristineData,type=result.type;if(that.trigger(REQUESTEND,{response:response,type:type}),response&&!isEmptyObject(response)){if(response=that.reader.parse(response),that._handleCustomErrors(response))return;response=that.reader.data(response),isArray(response)||(response=[response])}else response=$.map(models,function(model){return model.toJSON()});for("destroy"===type&&(that._destroyed=[]),idx=0,length=models.length;length>idx;idx++)"destroy"!==type?(models[idx].accept(response[idx]),"create"===type?pristine.push(serverGroup?that._wrapInEmptyGroup(models[idx]):response[idx]):"update"===type&&that._updatePristineForModel(models[idx],response[idx])):that._removePristineForModel(models[idx])},_updatePristineForModel:function(model,values){this._executeOnPristineForModel(model,function(index,items){kendo.deepExtend(items[index],values)})},_executeOnPristineForModel:function(model,callback){this._eachPristineItem(function(items){var index=indexOfPristineModel(items,model);return index>-1?(callback(index,items),!0):void 0})},_removePristineForModel:function(model){this._executeOnPristineForModel(model,function(index,items){items.splice(index,1)})},_readData:function(data){var read=this._isServerGrouped()?this.reader.groups:this.reader.data;return read.call(this.reader,data)},_eachPristineItem:function(callback){this._eachItem(this._pristineData,callback)},_eachItem:function(data,callback){data&&data.length&&(this._isServerGrouped()?eachGroupItems(data,callback):callback(data))},_pristineForModel:function(model){var pristine,idx,callback=function(items){return idx=indexOfPristineModel(items,model),idx>-1?(pristine=items[idx],!0):void 0};return this._eachPristineItem(callback),pristine},_cancelModel:function(model){var pristine=this._pristineForModel(model);this._eachItem(this._data,function(items){var idx=indexOfModel(items,model);idx>=0&&(!pristine||model.isNew()&&!pristine.__state__?items.splice(idx,1):items[idx].accept(pristine))})},_submit:function(promises,data){var that=this;that.trigger(REQUESTSTART,{type:"submit"}),that.transport.submit(extend({success:function(response,type){var promise=$.grep(promises,function(x){return x.type==type})[0];promise&&promise.resolve({response:response,models:promise.models,type:type})},error:function(response,status,error){for(var idx=0;idx<promises.length;idx++)promises[idx].reject(response);that.error(response,status,error)}},data))},_sendSubmit:function(created,updated,destroyed){var that=this,promises=[];return that.options.batch&&(created.length&&promises.push($.Deferred(function(deferred){deferred.type="create",deferred.models=created})),updated.length&&promises.push($.Deferred(function(deferred){deferred.type="update",deferred.models=updated})),destroyed.length&&promises.push($.Deferred(function(deferred){deferred.type="destroy",deferred.models=destroyed})),that._submit(promises,{data:{created:that.reader.serialize(toJSON(created)),updated:that.reader.serialize(toJSON(updated)),destroyed:that.reader.serialize(toJSON(destroyed))}})),promises},_promise:function(data,models,type){var that=this;return $.Deferred(function(deferred){that.trigger(REQUESTSTART,{type:type}),that.transport[type].call(that.transport,extend({success:function(response){deferred.resolve({response:response,models:models,type:type})},error:function(response,status,error){deferred.reject(response),that.error(response,status,error)}},data))}).promise()},_send:function(method,data){var idx,length,that=this,promises=[],converted=that.reader.serialize(toJSON(data));if(that.options.batch)data.length&&promises.push(that._promise({data:{models:converted}},data,method));else for(idx=0,length=data.length;length>idx;idx++)promises.push(that._promise({data:converted[idx]},[data[idx]],method));return promises},read:function(data){var that=this,params=that._params(data),deferred=$.Deferred();return that._queueRequest(params,function(){var isPrevented=that.trigger(REQUESTSTART,{type:"read"});isPrevented?(that._dequeueRequest(),deferred.resolve(isPrevented)):(that.trigger(PROGRESS),that._ranges=[],that.trigger("reset"),that.online()?that.transport.read({data:params,success:function(data){that.success(data,params),deferred.resolve()},error:function(){var args=slice.call(arguments);that.error.apply(that,args),deferred.reject.apply(deferred,args)}}):null!=that.options.offlineStorage&&(that.success(that.offlineData(),params),deferred.resolve()))}),deferred.promise()},_readAggregates:function(data){return this.reader.aggregates(data)},success:function(data){var that=this,options=that.options;if(that.trigger(REQUESTEND,{response:data,type:"read"}),that.online()){if(data=that.reader.parse(data),that._handleCustomErrors(data))return void that._dequeueRequest();that._total=that.reader.total(data),that._aggregate&&options.serverAggregates&&(that._aggregateResult=that._readAggregates(data)),data=that._readData(data)}else{data=that._readData(data);var idx,items=[],itemIds={},model=that.reader.model,idField=model?model.idField:"id";for(idx=0;idx<this._destroyed.length;idx++){var id=this._destroyed[idx][idField];itemIds[id]=id}for(idx=0;idx<data.length;idx++){var item=data[idx],state=item.__state__;"destroy"==state?itemIds[item[idField]]||this._destroyed.push(this._createNewModel(item)):items.push(item)}data=items,that._total=data.length}that._pristineTotal=that._total,that._pristineData=data.slice(0),that._detachObservableParents(),that._data=that._observe(data),null!=that.options.offlineStorage&&that._eachItem(that._data,function(items){for(var idx=0;idx<items.length;idx++){var item=items.at(idx);"update"==item.__state__&&(item.dirty=!0)}}),that._storeData(),that._addRange(that._data),that._process(that._data),that._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var idx=0;idx<this._data.length;idx++)this._data[idx].parent&&(this._data[idx].parent=noop)},_storeData:function(updatePristine){function items(data){for(var state=[],idx=0;idx<data.length;idx++){var dataItem=data.at(idx),item=dataItem.toJSON();serverGrouping&&dataItem.items?item.items=items(dataItem.items):(item.uid=dataItem.uid,model&&(dataItem.isNew()?item.__state__="create":dataItem.dirty&&(item.__state__="update"))),state.push(item)}return state}var serverGrouping=this._isServerGrouped(),model=this.reader.model;if(null!=this.options.offlineStorage){for(var state=items(this._data),destroyed=[],idx=0;idx<this._destroyed.length;idx++){var item=this._destroyed[idx].toJSON();item.__state__="destroy",destroyed.push(item)}this.offlineData(state.concat(destroyed)),updatePristine&&(this._pristineData=state)}},_addRange:function(data){var that=this,start=that._skip||0,end=start+that._flatData(data,!0).length;that._ranges.push({start:start,end:end,data:data,timestamp:(new Date).getTime()}),that._ranges.sort(function(x,y){return x.start-y.start})},error:function(xhr,status,errorThrown){this._dequeueRequest(),this.trigger(REQUESTEND,{}),this.trigger(ERROR,{xhr:xhr,status:status,errorThrown:errorThrown})},_params:function(data){var that=this,options=extend({take:that.take(),skip:that.skip(),page:that.page(),pageSize:that.pageSize(),sort:that._sort,filter:that._filter,group:that._group,aggregate:that._aggregate},data);return that.options.serverPaging||(delete options.take,delete options.skip,delete options.page,delete options.pageSize),that.options.serverGrouping?that.reader.model&&options.group&&(options.group=convertDescriptorsField(options.group,that.reader.model)):delete options.group,that.options.serverFiltering?that.reader.model&&options.filter&&(options.filter=convertFilterDescriptorsField(options.filter,that.reader.model)):delete options.filter,that.options.serverSorting?that.reader.model&&options.sort&&(options.sort=convertDescriptorsField(options.sort,that.reader.model)):delete options.sort,that.options.serverAggregates?that.reader.model&&options.aggregate&&(options.aggregate=convertDescriptorsField(options.aggregate,that.reader.model)):delete options.aggregate,options},_queueRequest:function(options,callback){var that=this;that._requestInProgress?that._pending={callback:proxy(callback,that),options:options}:(that._requestInProgress=!0,that._pending=undefined,callback())},_dequeueRequest:function(){var that=this;that._requestInProgress=!1,that._pending&&that._queueRequest(that._pending.options,that._pending.callback)},_handleCustomErrors:function(response){if(this.reader.errors){var errors=this.reader.errors(response);if(errors)return this.trigger(ERROR,{xhr:null,status:"customerror",errorThrown:"custom error",errors:errors}),!0}return!1},_shouldWrap:function(data){var model=this.reader.model;return model&&data.length?!(data[0]instanceof model):!1},_observe:function(data){var that=this,model=that.reader.model;if(that._shouldDetachObservableParents=!0,data instanceof ObservableArray)that._shouldDetachObservableParents=!1,that._shouldWrap(data)&&(data.type=that.reader.model,data.wrapAll(data,data));else{var arrayType=that.pageSize()&&!that.options.serverPaging?LazyObservableArray:ObservableArray;data=new arrayType(data,that.reader.model),data.parent=function(){return that.parent()}}return that._isServerGrouped()&&wrapGroupItems(data,model),that._changeHandler&&that._data&&that._data instanceof ObservableArray?that._data.unbind(CHANGE,that._changeHandler):that._changeHandler=proxy(that._change,that),data.bind(CHANGE,that._changeHandler)},_updateTotalForAction:function(action,items){var that=this,total=parseInt(that._total,10);isNumber(that._total)||(total=parseInt(that._pristineTotal,10)),"add"===action?total+=items.length:"remove"===action?total-=items.length:"itemchange"===action||"sync"===action||that.options.serverPaging?"sync"===action&&(total=that._pristineTotal=parseInt(that._total,10)):total=that._pristineTotal,that._total=total},_change:function(e){var idx,length,that=this,action=e?e.action:"";if("remove"===action)for(idx=0,length=e.items.length;length>idx;idx++)e.items[idx].isNew&&e.items[idx].isNew()||that._destroyed.push(e.items[idx]);if(!that.options.autoSync||"add"!==action&&"remove"!==action&&"itemchange"!==action)that._updateTotalForAction(action,e?e.items:[]),that._process(that._data,e);else{var handler=function(args){"sync"===args.action&&(that.unbind("change",handler),that._updateTotalForAction(action,e.items))};that.first("change",handler),that.sync()}},_calculateAggregates:function(data,options){options=options||{};var query=new Query(data),aggregates=options.aggregate,filter=options.filter;return filter&&(query=query.filter(filter)),query.aggregate(aggregates)},_process:function(data,e){var result,that=this,options={};that.options.serverPaging!==!0&&(options.skip=that._skip,options.take=that._take||that._pageSize,options.skip===undefined&&that._page!==undefined&&that._pageSize!==undefined&&(options.skip=(that._page-1)*that._pageSize)),that.options.serverSorting!==!0&&(options.sort=that._sort),that.options.serverFiltering!==!0&&(options.filter=that._filter),that.options.serverGrouping!==!0&&(options.group=that._group),that.options.serverAggregates!==!0&&(options.aggregate=that._aggregate,that._aggregateResult=that._calculateAggregates(data,options)),result=that._queryProcess(data,options),that.view(result.data),result.total===undefined||that.options.serverFiltering||(that._total=result.total),e=e||{},e.items=e.items||that._view,that.trigger(CHANGE,e)},_queryProcess:function(data,options){return Query.process(data,options)},_mergeState:function(options){var that=this;return options!==undefined&&(that._pageSize=options.pageSize,that._page=options.page,that._sort=options.sort,that._filter=options.filter,that._group=options.group,that._aggregate=options.aggregate,that._skip=options.skip,that._take=options.take,that._skip===undefined&&(that._skip=that.skip(),options.skip=that.skip()),that._take===undefined&&that._pageSize!==undefined&&(that._take=that._pageSize,options.take=that._take),options.sort&&(that._sort=options.sort=normalizeSort(options.sort)),options.filter&&(that._filter=options.filter=normalizeFilter(options.filter)),options.group&&(that._group=options.group=normalizeGroup(options.group)),options.aggregate&&(that._aggregate=options.aggregate=normalizeAggregate(options.aggregate))),options},query:function(options){var result,remote=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;if(remote||(this._data===undefined||0===this._data.length)&&!this._destroyed.length)return this.read(this._mergeState(options));var isPrevented=this.trigger(REQUESTSTART,{type:"read"});return isPrevented||(this.trigger(PROGRESS),result=this._queryProcess(this._data,this._mergeState(options)),this.options.serverFiltering||(result.total!==undefined?this._total=result.total:this._total=this._data.length),this._aggregateResult=this._calculateAggregates(this._data,options),this.view(result.data),this.trigger(REQUESTEND,{type:"read"}),this.trigger(CHANGE,{items:result.data})),$.Deferred().resolve(isPrevented).promise()},fetch:function(callback){var that=this,fn=function(isPrevented){isPrevented!==!0&&isFunction(callback)&&callback.call(that)};return this._query().then(fn)},_query:function(options){var that=this;return that.query(extend({},{page:that.page(),pageSize:that.pageSize(),sort:that.sort(),filter:that.filter(),group:that.group(),aggregate:that.aggregate()},options))},next:function(options){var that=this,page=that.page(),total=that.total();return options=options||{},!page||total&&page+1>that.totalPages()?void 0:(that._skip=page*that.take(),page+=1,options.page=page,that._query(options),page)},prev:function(options){var that=this,page=that.page();return options=options||{},page&&1!==page?(that._skip=that._skip-that.take(),page-=1,options.page=page,that._query(options),page):void 0},page:function(val){var skip,that=this;return val!==undefined?(val=math.max(math.min(math.max(val,1),that.totalPages()),1),void that._query({page:val})):(skip=that.skip(),skip!==undefined?math.round((skip||0)/(that.take()||1))+1:undefined)},pageSize:function(val){var that=this;return val!==undefined?void that._query({pageSize:val,page:1}):that.take()},sort:function(val){var that=this;return val!==undefined?void that._query({sort:val}):that._sort},filter:function(val){var that=this;return val===undefined?that._filter:(that.trigger("reset"),void that._query({filter:val,page:1}))},group:function(val){var that=this;return val!==undefined?void that._query({group:val}):that._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(val){var that=this;return val!==undefined?void that._query({aggregate:val}):that._aggregate},aggregates:function(){var result=this._aggregateResult;return isEmptyObject(result)&&(result=this._emptyAggregates(this.aggregate())),result},_emptyAggregates:function(aggregates){var result={};if(!isEmptyObject(aggregates)){var aggregate={};isArray(aggregates)||(aggregates=[aggregates]);for(var idx=0;idx<aggregates.length;idx++)aggregate[aggregates[idx].aggregate]=0,result[aggregates[idx].field]=aggregate}return result},_wrapInEmptyGroup:function(model){var parent,group,idx,length,groups=this.group();for(idx=groups.length-1,length=0;idx>=length;idx--)group=groups[idx],parent={value:model.get(group.field),field:group.field,items:parent?[parent]:[model],hasSubgroups:!!parent,aggregates:this._emptyAggregates(group.aggregates)};return parent},totalPages:function(){var that=this,pageSize=that.pageSize()||that.total();return math.ceil((that.total()||0)/pageSize)},inRange:function(skip,take){var that=this,end=math.min(skip+take,that.total());return!that.options.serverPaging&&that._data.length>0?!0:that._findRange(skip,end).length>0},lastRange:function(){var ranges=this._ranges;return ranges[ranges.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var ranges=this._ranges;return ranges.length&&ranges[0].data.length&&ranges[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(skip,take){this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0,skip=math.min(skip||0,this.total());var data,that=this,pageSkip=math.max(math.floor(skip/take),0)*take,size=math.min(pageSkip+take,that.total());if(data=that._findRange(skip,math.min(skip+take,that.total())),data.length){that._pending=undefined,that._skip=skip>that.skip()?math.min(size,(that.totalPages()-1)*that.take()):pageSkip,that._take=take;var paging=that.options.serverPaging,sorting=that.options.serverSorting,filtering=that.options.serverFiltering,aggregates=that.options.serverAggregates;try{that.options.serverPaging=!0,that._isServerGrouped()||that.group()&&that.group().length||(that.options.serverSorting=!0),that.options.serverFiltering=!0,that.options.serverPaging=!0,that.options.serverAggregates=!0,paging&&(that._detachObservableParents(),that._data=data=that._observe(data)),that._process(data)}finally{that.options.serverPaging=paging,that.options.serverSorting=sorting,that.options.serverFiltering=filtering,that.options.serverAggregates=aggregates}}else take!==undefined&&(that._rangeExists(pageSkip,size)?skip>pageSkip&&that.prefetch(size,take,function(){that.range(skip,take)}):that.prefetch(pageSkip,take,function(){skip>pageSkip&&size<that.total()&&!that._rangeExists(size,math.min(size+take,that.total()))?that.prefetch(size,take,function(){that.range(skip,take)}):that.range(skip,take)}))},_findRange:function(start,end){var range,skipIdx,takeIdx,startIndex,endIndex,rangeData,rangeEnd,processed,flatData,count,length,that=this,ranges=that._ranges,data=[],options=that.options,remote=options.serverSorting||options.serverPaging||options.serverFiltering||options.serverGrouping||options.serverAggregates;for(skipIdx=0,length=ranges.length;length>skipIdx;skipIdx++)if(range=ranges[skipIdx],start>=range.start&&start<=range.end){for(count=0,takeIdx=skipIdx;length>takeIdx;takeIdx++)if(range=ranges[takeIdx],flatData=that._flatData(range.data,!0),flatData.length&&start+count>=range.start){if(rangeData=range.data,rangeEnd=range.end,!remote){var sort=normalizeGroup(that.group()||[]).concat(normalizeSort(that.sort()||[]));processed=that._queryProcess(range.data,{sort:sort,filter:that.filter()}),flatData=rangeData=processed.data,processed.total!==undefined&&(rangeEnd=processed.total)}if(startIndex=0,start+count>range.start&&(startIndex=start+count-range.start),endIndex=flatData.length,rangeEnd>end&&(endIndex-=rangeEnd-end),count+=endIndex-startIndex,data=that._mergeGroups(data,rangeData,startIndex,endIndex),end<=range.end&&count==end-start)return data}break}return[]},_mergeGroups:function(data,range,skip,take){if(this._isServerGrouped()){var prevGroup,temp=range.toJSON();return data.length&&(prevGroup=data[data.length-1]),mergeGroups(prevGroup,temp,skip,take),data.concat(temp)}return data.concat(range.slice(skip,take))},skip:function(){var that=this;return that._skip===undefined?that._page!==undefined?(that._page-1)*(that.take()||1):undefined:that._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(skip,size,callback,force){var that=this,timestamp=that._timeStamp();return function(data){var idx,length,temp,found=!1,range={start:skip,end:size,data:[],timestamp:that._timeStamp()};if(that._dequeueRequest(),that.trigger(REQUESTEND,{response:data,type:"read"}),data=that.reader.parse(data),temp=that._readData(data),temp.length){for(idx=0,length=that._ranges.length;length>idx;idx++)if(that._ranges[idx].start===skip){found=!0,range=that._ranges[idx];break}found||that._ranges.push(range)}range.data=that._observe(temp),range.end=range.start+that._flatData(range.data,!0).length,that._ranges.sort(function(x,y){return x.start-y.start}),that._total=that.reader.total(data),(force||timestamp>=that._currentRequestTimeStamp||!that._skipRequestsInProgress)&&(callback&&temp.length?callback():that.trigger(CHANGE,{}))}},prefetch:function(skip,take,callback){var that=this,size=math.min(skip+take,that.total()),options={take:take,skip:skip,page:skip/take+1,pageSize:take,sort:that._sort,filter:that._filter,group:that._group,aggregate:that._aggregate};that._rangeExists(skip,size)?callback&&callback():(clearTimeout(that._timeout),that._timeout=setTimeout(function(){that._queueRequest(options,function(){that.trigger(REQUESTSTART,{type:"read"})?that._dequeueRequest():that.transport.read({data:that._params(options),success:that._prefetchSuccessHandler(skip,size,callback),error:function(){var args=slice.call(arguments);that.error.apply(that,args)}})})},100))},_multiplePrefetch:function(skip,take,callback){var that=this,size=math.min(skip+take,that.total()),options={take:take,skip:skip,page:skip/take+1,pageSize:take,sort:that._sort,filter:that._filter,group:that._group,aggregate:that._aggregate};that._rangeExists(skip,size)?callback&&callback():that.trigger(REQUESTSTART,{type:"read"})||that.transport.read({data:that._params(options),success:that._prefetchSuccessHandler(skip,size,callback,!0)})},_rangeExists:function(start,end){var idx,length,that=this,ranges=that._ranges;for(idx=0,length=ranges.length;length>idx;idx++)if(ranges[idx].start<=start&&ranges[idx].end>=end)return!0;return!1},_removeModelFromRanges:function(model){for(var result,found,range,idx=0,length=this._ranges.length;length>idx&&(range=this._ranges[idx],this._eachItem(range.data,function(items){result=removeModel(items,model),result&&(found=!0)}),!found);idx++);},_updateRangesLength:function(){for(var range,rangeLength,startOffset=0,idx=0,length=this._ranges.length;length>idx;idx++)range=this._ranges[idx],range.start=range.start-startOffset,rangeLength=this._flatData(range.data,!0).length,startOffset=range.end-rangeLength,range.end=range.start+rangeLength}}),Transport={};Transport.create=function(options,data,dataSource){var transport,transportOptions=options.transport?$.extend({},options.transport):null;return transportOptions?(transportOptions.read=typeof transportOptions.read===STRING?{url:transportOptions.read}:transportOptions.read,"jsdo"===options.type&&(transportOptions.dataSource=dataSource),options.type&&(kendo.data.transports=kendo.data.transports||{},kendo.data.schemas=kendo.data.schemas||{},kendo.data.transports[options.type]&&!isPlainObject(kendo.data.transports[options.type])?transport=new kendo.data.transports[options.type](extend(transportOptions,{data:data})):transportOptions=extend(!0,{},kendo.data.transports[options.type],transportOptions),options.schema=extend(!0,{},kendo.data.schemas[options.type],options.schema)),transport||(transport=isFunction(transportOptions.read)?transportOptions:new RemoteTransport(transportOptions))):transport=new LocalTransport({data:options.data||[]}),transport},DataSource.create=function(options){(isArray(options)||options instanceof ObservableArray)&&(options={data:options});var idx,length,field,dataSource=options||{},data=dataSource.data,fields=dataSource.fields,table=dataSource.table,select=dataSource.select,model={};if(data||!fields||dataSource.transport||(table?data=inferTable(table,fields):select&&(data=inferSelect(select,fields),dataSource.group===undefined&&data[0]&&data[0].optgroup!==undefined&&(dataSource.group="optgroup"))),kendo.data.Model&&fields&&(!dataSource.schema||!dataSource.schema.model)){for(idx=0,length=fields.length;length>idx;idx++)field=fields[idx],field.type&&(model[field.field]=field);isEmptyObject(model)||(dataSource.schema=extend(!0,dataSource.schema,{model:{fields:model}}))}return dataSource.data=data,select=null,dataSource.select=null,table=null,dataSource.table=null,dataSource instanceof DataSource?dataSource:new DataSource(dataSource)};var Node=Model.define({idField:"id",init:function(value){var that=this,hasChildren=that.hasChildren||value&&value.hasChildren,childrenField="items",childrenOptions={};kendo.data.Model.fn.init.call(that,value),typeof that.children===STRING&&(childrenField=that.children),childrenOptions={schema:{data:childrenField,model:{hasChildren:hasChildren,id:that.idField,fields:that.fields}}},typeof that.children!==STRING&&extend(childrenOptions,that.children),childrenOptions.data=value,hasChildren||(hasChildren=childrenOptions.schema.data),typeof hasChildren===STRING&&(hasChildren=kendo.getter(hasChildren)),isFunction(hasChildren)&&(that.hasChildren=!!hasChildren.call(that,that)),that._childrenOptions=childrenOptions,that.hasChildren&&that._initChildren(),that._loaded=!(!value||!value[childrenField]&&!value._loaded)},_initChildren:function(){var children,transport,parameterMap,that=this;that.children instanceof HierarchicalDataSource||(children=that.children=new HierarchicalDataSource(that._childrenOptions),transport=children.transport,parameterMap=transport.parameterMap,transport.parameterMap=function(data,type){return data[that.idField||"id"]=that.id,parameterMap&&(data=parameterMap(data,type)),data},children.parent=function(){return that},children.bind(CHANGE,function(e){e.node=e.node||that,that.trigger(CHANGE,e)}),children.bind(ERROR,function(e){var collection=that.parent();collection&&(e.node=e.node||that,collection.trigger(ERROR,e))}),that._updateChildrenField())},append:function(model){this._initChildren(),this.loaded(!0),this.children.add(model)},hasChildren:!1,level:function(){for(var parentNode=this.parentNode(),level=0;parentNode&&parentNode.parentNode;)level++,parentNode=parentNode.parentNode?parentNode.parentNode():null;return level},_updateChildrenField:function(){var fieldName=this._childrenOptions.schema.data;this[fieldName||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var children,promise,options={},method="_query";return this.hasChildren?(this._initChildren(),children=this.children,options[this.idField||"id"]=this.id,this._loaded||(children._data=undefined,method="read"),children.one(CHANGE,proxy(this._childrenLoaded,this)),promise=children[method](options)):this.loaded(!0),promise||$.Deferred().resolve().promise()},parentNode:function(){var array=this.parent();return array.parent()},loaded:function(value){return value===undefined?this._loaded:void(this._loaded=value)},shouldSerialize:function(field){return Model.fn.shouldSerialize.call(this,field)&&"children"!==field&&"_loaded"!==field&&"hasChildren"!==field&&"_childrenOptions"!==field}}),HierarchicalDataSource=DataSource.extend({init:function(options){var node=Node.define({children:options});DataSource.fn.init.call(this,extend(!0,{},{schema:{modelBase:node,model:node}},options)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var that=this;that._data.bind(ERROR,function(e){that.trigger(ERROR,e)})},remove:function(node){var result,parentNode=node.parentNode(),dataSource=this;return parentNode&&parentNode._initChildren&&(dataSource=parentNode.children),result=DataSource.fn.remove.call(dataSource,node),parentNode&&!dataSource.data().length&&(parentNode.hasChildren=!1),result},success:dataMethod("success"),data:dataMethod("data"),insert:function(index,model){var parentNode=this.parent();return parentNode&&parentNode._initChildren&&(parentNode.hasChildren=!0,parentNode._initChildren()),DataSource.fn.insert.call(this,index,model)},_find:function(method,value){var idx,length,node,children,data=this._data;if(data){if(node=DataSource.fn[method].call(this,value))return node;for(data=this._flatData(this._data),idx=0,length=data.length;length>idx;idx++)if(children=data[idx].children,children instanceof HierarchicalDataSource&&(node=children[method](value)))return node}},get:function(id){return this._find("get",id)},getByUid:function(uid){return this._find("getByUid",uid)}});HierarchicalDataSource.create=function(options){options=options&&options.push?{data:options}:options;var dataSource=options||{},data=dataSource.data,fields=dataSource.fields,list=dataSource.list;return data&&data._dataSource?data._dataSource:(data||!fields||dataSource.transport||list&&(data=inferList(list,fields)),dataSource.data=data,dataSource instanceof HierarchicalDataSource?dataSource:new HierarchicalDataSource(dataSource))};var Buffer=kendo.Observable.extend({init:function(dataSource,viewSize,disablePrefetch){kendo.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=dataSource,this.prefetch=!disablePrefetch;var buffer=this;dataSource.bind("change",function(){buffer._change()}),dataSource.bind("reset",function(){buffer._reset()}),this._syncWithDataSource(),this.setViewSize(viewSize)},setViewSize:function(viewSize){this.viewSize=viewSize,this._recalculate()},at:function(index){var pageSize=this.pageSize,itemPresent=!0;return index>=this.total()?(this.trigger("endreached",{index:index}),null):this.useRanges?this.useRanges?((index<this.dataOffset||index>=this.skip+pageSize)&&(itemPresent=this.range(Math.floor(index/pageSize)*pageSize)),index===this.prefetchThreshold&&this._prefetch(),index===this.midPageThreshold?this.range(this.nextMidRange,!0):index===this.nextPageThreshold?this.range(this.nextFullRange):index===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),itemPresent?this.dataSource.at(index-this.dataOffset):(this.trigger("endreached",{index:index}),null)):void 0:this.dataSource.view()[index]},indexOf:function(item){return this.dataSource.data().indexOf(item)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var buffer=this,pageSize=buffer.pageSize,offset=buffer.skip-buffer.viewSize+pageSize,pageSkip=math.max(math.floor(offset/pageSize),0)*pageSize;this.offset=offset,this.dataSource.prefetch(pageSkip,pageSize,function(){buffer._goToRange(offset,!0)})},range:function(offset,nextRange){if(this.offset===offset)return!0;var buffer=this,pageSize=this.pageSize,pageSkip=math.max(math.floor(offset/pageSize),0)*pageSize,dataSource=this.dataSource;return nextRange&&(pageSkip+=pageSize),dataSource.inRange(offset,pageSize)?(this.offset=offset,this._recalculate(),this._goToRange(offset),!0):this.prefetch?(dataSource.prefetch(pageSkip,pageSize,function(){buffer.offset=offset,buffer._recalculate(),buffer._goToRange(offset,!0)}),!1):!0},syncDataSource:function(){var offset=this.offset;this.offset=null,this.range(offset)},destroy:function(){this.unbind()},_prefetch:function(){
var buffer=this,pageSize=this.pageSize,prefetchOffset=this.skip+pageSize,dataSource=this.dataSource;dataSource.inRange(prefetchOffset,pageSize)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:prefetchOffset,take:pageSize}),dataSource.prefetch(prefetchOffset,pageSize,function(){buffer._prefetching=!1,buffer.trigger("prefetched",{skip:prefetchOffset,take:pageSize})}))},_goToRange:function(offset,expanding){this.offset===offset&&(this.dataOffset=offset,this._expanding=expanding,this.dataSource.range(offset,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var dataSource=this.dataSource;this.length=this.useRanges?dataSource.lastRange().end:dataSource.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var dataSource=this.dataSource;this._firstItemUid=dataSource.firstItemUid(),this.dataOffset=this.offset=dataSource.skip()||0,this.pageSize=dataSource.pageSize(),this.useRanges=dataSource.options.serverPaging},_recalculate:function(){var pageSize=this.pageSize,offset=this.offset,viewSize=this.viewSize,skip=Math.ceil(offset/pageSize)*pageSize;this.skip=skip,this.midPageThreshold=skip+pageSize-1,this.nextPageThreshold=skip+viewSize-1,this.prefetchThreshold=skip+Math.floor(pageSize/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=skip+pageSize-viewSize,this.nextFullRange=skip,this.previousMidRange=offset-viewSize,this.previousFullRange=skip-pageSize}}),BatchBuffer=kendo.Observable.extend({init:function(dataSource,batchSize){var batchBuffer=this;kendo.Observable.fn.init.call(batchBuffer),this.dataSource=dataSource,this.batchSize=batchSize,this._total=0,this.buffer=new Buffer(dataSource,3*batchSize),this.buffer.bind({endreached:function(e){batchBuffer.trigger("endreached",{index:e.index})},prefetching:function(e){batchBuffer.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){batchBuffer.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){batchBuffer._total=0,batchBuffer.trigger("reset")},resize:function(){batchBuffer._total=Math.ceil(this.length/batchBuffer.batchSize),batchBuffer.trigger("resize",{total:batchBuffer.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(index){var item,buffer=this.buffer,skip=index*this.batchSize,take=this.batchSize,view=[];buffer.offset>skip&&buffer.at(buffer.offset-1);for(var i=0;take>i&&(item=buffer.at(skip+i),null!==item);i++)view.push(item);return view},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});extend(!0,kendo.data,{readers:{json:DataReader},Query:Query,DataSource:DataSource,HierarchicalDataSource:HierarchicalDataSource,Node:Node,ObservableObject:ObservableObject,ObservableArray:ObservableArray,LazyObservableArray:LazyObservableArray,LocalTransport:LocalTransport,RemoteTransport:RemoteTransport,Cache:Cache,DataReader:DataReader,Model:Model,Buffer:Buffer,BatchBuffer:BatchBuffer})}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,DIR="dir",ASC="asc",SINGLE="single",FIELD="field",DESC="desc",sorterNS=".kendoColumnSorter",TLINK=".k-link",ARIASORT="aria-sort",proxy=$.proxy,ColumnSorter=Widget.extend({init:function(element,options){var link,that=this;Widget.fn.init.call(that,element,options),that._refreshHandler=proxy(that.refresh,that),that.dataSource=that.options.dataSource.bind("change",that._refreshHandler),link=that.element.find(TLINK),link[0]||(link=that.element.wrapInner('<a class="k-link" href="#"/>').find(TLINK)),that.link=link,that.element.on("click"+sorterNS,proxy(that._click,that))},options:{name:"ColumnSorter",mode:SINGLE,allowUnsort:!0,compare:null,filter:""},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.element.off(sorterNS),that.dataSource.unbind("change",that._refreshHandler),that._refreshHandler=that.element=that.link=that.dataSource=null},refresh:function(){var idx,length,descriptor,dir,that=this,sort=that.dataSource.sort()||[],element=that.element,field=element.attr(kendo.attr(FIELD));for(element.removeAttr(kendo.attr(DIR)),element.removeAttr(ARIASORT),idx=0,length=sort.length;length>idx;idx++)descriptor=sort[idx],field==descriptor.field&&element.attr(kendo.attr(DIR),descriptor.dir);dir=element.attr(kendo.attr(DIR)),element.find(".k-i-arrow-n,.k-i-arrow-s").remove(),dir===ASC?($('<span class="k-icon k-i-arrow-n" />').appendTo(that.link),element.attr(ARIASORT,"ascending")):dir===DESC&&($('<span class="k-icon k-i-arrow-s" />').appendTo(that.link),element.attr(ARIASORT,"descending"))},_click:function(e){var idx,length,that=this,element=that.element,field=element.attr(kendo.attr(FIELD)),dir=element.attr(kendo.attr(DIR)),options=that.options,compare=null===that.options.compare?undefined:that.options.compare,sort=that.dataSource.sort()||[];if(e.preventDefault(),!options.filter||element.is(options.filter)){if(dir=dir===ASC?DESC:dir===DESC&&options.allowUnsort?undefined:ASC,options.mode===SINGLE)sort=[{field:field,dir:dir,compare:compare}];else if("multiple"===options.mode){for(idx=0,length=sort.length;length>idx;idx++)if(sort[idx].field===field){sort.splice(idx,1);break}sort.push({field:field,dir:dir,compare:compare})}this.dataSource.sort(sort)}}});ui.plugin(ColumnSorter)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function title(date,min,max,modular){var end,start=date.getFullYear(),minYear=min.getFullYear(),maxYear=max.getFullYear();return start-=start%modular,end=start+(modular-1),minYear>start&&(start=minYear),end>maxYear&&(end=maxYear),start+"-"+end}function view(options){for(var data,idx=0,min=options.min,max=options.max,start=options.start,setter=options.setter,build=options.build,length=options.cells||12,cellsPerRow=options.perRow||4,content=options.content||cellTemplate,empty=options.empty||emptyCellTemplate,html=options.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';length>idx;idx++)idx>0&&idx%cellsPerRow===0&&(html+='</tr><tr role="row">'),data=build(start,idx),html+=isInRange(start,min,max)?content(data):empty(data),setter(start,1);return html+"</tr></tbody></table>"}function compare(date1,date2,modifier){var year1=date1.getFullYear(),start=date2.getFullYear(),end=start,result=0;return modifier&&(start-=start%modifier,end=start-start%modifier+modifier-1),year1>end?result=1:start>year1&&(result=-1),result}function getToday(){var today=new DATE;return new DATE(today.getFullYear(),today.getMonth(),today.getDate())}function restrictValue(value,min,max){var today=getToday();return value&&(today=new DATE(+value)),min>today?today=new DATE(+min):today>max&&(today=new DATE(+max)),today}function isInRange(date,min,max){return+date>=+min&&+max>=+date}function shiftArray(array,idx){return array.slice(idx).concat(array.slice(0,idx))}function setDate(date,value,multiplier){value=value instanceof DATE?value.getFullYear():date.getFullYear()+multiplier*value,date.setFullYear(value)}function mousetoggle(e){$(this).toggleClass(HOVER,MOUSEENTER.indexOf(e.type)>-1||e.type==FOCUS)}function prevent(e){e.preventDefault()}function getCalendarInfo(culture){return getCulture(culture).calendars.standard}function normalize(options){var start=views[options.start],depth=views[options.depth],culture=getCulture(options.culture);options.format=extractFormat(options.format||culture.calendars.standard.patterns.d),isNaN(start)&&(start=0,options.start=MONTH),(depth===undefined||depth>start)&&(options.depth=MONTH),options.dates||(options.dates=[])}function makeUnselectable(element){isIE8&&element.find("*").attr("unselectable","on")}function inArray(date,dates){for(var i=0,length=dates.length;length>i;i++)if(date===+dates[i])return!0;return!1}function isEqualDatePart(value1,value2){return value1?value1.getFullYear()===value2.getFullYear()&&value1.getMonth()===value2.getMonth()&&value1.getDate()===value2.getDate():!1}function isEqualMonth(value1,value2){return value1?value1.getFullYear()===value2.getFullYear()&&value1.getMonth()===value2.getMonth():!1}var kendo=window.kendo,support=kendo.support,ui=kendo.ui,Widget=ui.Widget,keys=kendo.keys,parse=kendo.parseDate,adjustDST=kendo.date.adjustDST,extractFormat=kendo._extractFormat,template=kendo.template,getCulture=kendo.getCulture,transitions=kendo.support.transitions,transitionOrigin=transitions?transitions.css+"transform-origin":"",cellTemplate=template('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),emptyCellTemplate=template('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),browser=kendo.support.browser,isIE8=browser.msie&&browser.version<9,ns=".kendoCalendar",CLICK="click"+ns,KEYDOWN_NS="keydown"+ns,ID="id",MIN="min",LEFT="left",SLIDE="slideIn",MONTH="month",CENTURY="century",CHANGE="change",NAVIGATE="navigate",VALUE="value",HOVER="k-state-hover",DISABLED="k-state-disabled",FOCUSED="k-state-focused",OTHERMONTH="k-other-month",OTHERMONTHCLASS=' class="'+OTHERMONTH+'"',TODAY="k-nav-today",CELLSELECTOR="td:has(.k-link)",BLUR="blur"+ns,FOCUS="focus",FOCUS_WITH_NS=FOCUS+ns,MOUSEENTER=support.touch?"touchstart":"mouseenter",MOUSEENTER_WITH_NS=support.touch?"touchstart"+ns:"mouseenter"+ns,MOUSELEAVE=support.touch?"touchend"+ns+" touchmove"+ns:"mouseleave"+ns,MS_PER_MINUTE=6e4,MS_PER_DAY=864e5,PREVARROW="_prevArrow",NEXTARROW="_nextArrow",ARIA_DISABLED="aria-disabled",ARIA_SELECTED="aria-selected",proxy=$.proxy,extend=$.extend,DATE=Date,views={month:0,year:1,decade:2,century:3},Calendar=Widget.extend({init:function(element,options){var value,id,that=this;Widget.fn.init.call(that,element,options),element=that.wrapper=that.element,options=that.options,options.url=window.unescape(options.url),that._templates(),that._header(),that._footer(that.footer),id=element.addClass("k-widget k-calendar").on(MOUSEENTER_WITH_NS+" "+MOUSELEAVE,CELLSELECTOR,mousetoggle).on(KEYDOWN_NS,"table.k-content",proxy(that._move,that)).on(CLICK,CELLSELECTOR,function(e){var link=e.currentTarget.firstChild;-1!=link.href.indexOf("#")&&e.preventDefault(),that._click($(link))}).on("mouseup"+ns,"table.k-content, .k-footer",function(){that._focusView(that.options.focusOnNav!==!1)}).attr(ID),id&&(that._cellID=id+"_cell_selected"),normalize(options),value=parse(options.value,options.format,options.culture),that._index=views[options.start],that._current=new DATE(+restrictValue(value,options.min,options.max)),that._addClassProxy=function(){that._active=!0,that._cell.addClass(FOCUSED)},that._removeClassProxy=function(){that._active=!1,that._cell.removeClass(FOCUSED)},that.value(value),kendo.notify(that)},options:{name:"Calendar",value:null,min:new DATE(1900,0,1),max:new DATE(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:MONTH,depth:MONTH,animation:{horizontal:{effects:SLIDE,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[CHANGE,NAVIGATE],setOptions:function(options){var that=this;normalize(options),options.dates[0]||(options.dates=that.options.dates),Widget.fn.setOptions.call(that,options),that._templates(),that._footer(that.footer),that._index=views[that.options.start],that.navigate()},destroy:function(){var that=this,today=that._today;that.element.off(ns),that._title.off(ns),that[PREVARROW].off(ns),that[NEXTARROW].off(ns),kendo.destroy(that._table),today&&kendo.destroy(today.off(ns)),Widget.fn.destroy.call(that)},current:function(){return this._current},view:function(){return this._view},focus:function(table){table=table||this._table,this._bindTable(table),table.focus()},min:function(value){return this._option(MIN,value)},max:function(value){return this._option("max",value)},navigateToPast:function(){this._navigate(PREVARROW,-1)},navigateToFuture:function(){this._navigate(NEXTARROW,1)},navigateUp:function(){var that=this,index=that._index;that._title.hasClass(DISABLED)||that.navigate(that._current,++index)},navigateDown:function(value){var that=this,index=that._index,depth=that.options.depth;if(value)return index===views[depth]?void(+that._value!=+value&&(that.value(value),that.trigger(CHANGE))):void that.navigate(value,--index)},navigate:function(value,view){view=isNaN(view)?views[view]:view;var to,currentView,compare,disabled,that=this,options=that.options,culture=options.culture,min=options.min,max=options.max,title=that._title,from=that._table,old=that._oldTable,selectedValue=that._value,currentValue=that._current,future=value&&+value>+currentValue,vertical=view!==undefined&&view!==that._index;value||(value=currentValue),that._current=value=new DATE(+restrictValue(value,min,max)),view===undefined?view=that._index:that._index=view,that._view=currentView=calendar.views[view],compare=currentView.compare,disabled=view===views[CENTURY],title.toggleClass(DISABLED,disabled).attr(ARIA_DISABLED,disabled),disabled=compare(value,min)<1,that[PREVARROW].toggleClass(DISABLED,disabled).attr(ARIA_DISABLED,disabled),disabled=compare(value,max)>-1,that[NEXTARROW].toggleClass(DISABLED,disabled).attr(ARIA_DISABLED,disabled),from&&old&&old.data("animating")&&(old.kendoStop(!0,!0),from.kendoStop(!0,!0)),that._oldTable=from,(!from||that._changeView)&&(title.html(currentView.title(value,min,max,culture)),that._table=to=$(currentView.content(extend({min:min,max:max,date:value,url:options.url,dates:options.dates,format:options.format,culture:culture},that[currentView.name]))),makeUnselectable(to),that._animate({from:from,to:to,vertical:vertical,future:future}),that._focus(value),that.trigger(NAVIGATE)),view===views[options.depth]&&selectedValue&&that._class("k-state-selected",currentView.toDateString(selectedValue)),that._class(FOCUSED,currentView.toDateString(value)),!from&&that._cell&&that._cell.removeClass(FOCUSED),that._changeView=!0},value:function(value){var that=this,view=that._view,options=that.options,old=that._view,min=options.min,max=options.max;return value===undefined?that._value:(value=parse(value,options.format,options.culture),null!==value&&(value=new DATE(+value),isInRange(value,min,max)||(value=null)),that._value=value,void(old&&null===value&&that._cell?that._cell.removeClass("k-state-selected"):(that._changeView=!value||view&&0!==view.compare(value,that._current),that.navigate(value))))},_move:function(e){var value,prevent,method,temp,that=this,options=that.options,key=e.keyCode,view=that._view,index=that._index,currentValue=new DATE(+that._current),isRtl=kendo.support.isRtl(that.wrapper);return e.target===that._table[0]&&(that._active=!0),e.ctrlKey?key==keys.RIGHT&&!isRtl||key==keys.LEFT&&isRtl?(that.navigateToFuture(),prevent=!0):key==keys.LEFT&&!isRtl||key==keys.RIGHT&&isRtl?(that.navigateToPast(),prevent=!0):key==keys.UP?(that.navigateUp(),prevent=!0):key==keys.DOWN&&(that._click($(that._cell[0].firstChild)),prevent=!0):(key==keys.RIGHT&&!isRtl||key==keys.LEFT&&isRtl?(value=1,prevent=!0):key==keys.LEFT&&!isRtl||key==keys.RIGHT&&isRtl?(value=-1,prevent=!0):key==keys.UP?(value=0===index?-7:-4,prevent=!0):key==keys.DOWN?(value=0===index?7:4,prevent=!0):key==keys.ENTER?(that._click($(that._cell[0].firstChild)),prevent=!0):key==keys.HOME||key==keys.END?(method=key==keys.HOME?"first":"last",temp=view[method](currentValue),currentValue=new DATE(temp.getFullYear(),temp.getMonth(),temp.getDate(),currentValue.getHours(),currentValue.getMinutes(),currentValue.getSeconds(),currentValue.getMilliseconds()),prevent=!0):key==keys.PAGEUP?(prevent=!0,that.navigateToPast()):key==keys.PAGEDOWN&&(prevent=!0,that.navigateToFuture()),(value||method)&&(method||view.setDate(currentValue,value),that._focus(restrictValue(currentValue,options.min,options.max)))),prevent&&e.preventDefault(),that._current},_animate:function(options){var that=this,from=options.from,to=options.to,active=that._active;from?from.parent().data("animating")?(from.off(ns),from.parent().kendoStop(!0,!0).remove(),from.remove(),to.insertAfter(that.element[0].firstChild),that._focusView(active)):from.is(":visible")&&that.options.animation!==!1?that[options.vertical?"_vertical":"_horizontal"](from,to,options.future):(to.insertAfter(from),from.off(ns).remove(),that._focusView(active)):(to.insertAfter(that.element[0].firstChild),that._bindTable(to))},_horizontal:function(from,to,future){var that=this,active=that._active,horizontal=that.options.animation.horizontal,effects=horizontal.effects,viewWidth=from.outerWidth();effects&&-1!=effects.indexOf(SLIDE)&&(from.add(to).css({width:viewWidth}),from.wrap("<div/>"),that._focusView(active,from),from.parent().css({position:"relative",width:2*viewWidth,"float":LEFT,"margin-left":future?0:-viewWidth}),to[future?"insertAfter":"insertBefore"](from),extend(horizontal,{effects:SLIDE+":"+(future?"right":LEFT),complete:function(){from.off(ns).remove(),that._oldTable=null,to.unwrap(),that._focusView(active)}}),from.parent().kendoStop(!0,!0).kendoAnimate(horizontal))},_vertical:function(from,to){var cell,position,that=this,vertical=that.options.animation.vertical,effects=vertical.effects,active=that._active;effects&&-1!=effects.indexOf("zoom")&&(to.css({position:"absolute",top:from.prev().outerHeight(),left:0}).insertBefore(from),transitionOrigin&&(cell=that._cellByDate(that._view.toDateString(that._current)),position=cell.position(),position=position.left+parseInt(cell.width()/2,10)+"px "+(position.top+parseInt(cell.height()/2,10)+"px"),to.css(transitionOrigin,position)),from.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){from.off(ns).remove(),that._oldTable=null,to.css({position:"static",top:0,left:0}),that._focusView(active)}}),to.kendoStop(!0,!0).kendoAnimate(vertical))},_cellByDate:function(value){return this._table.find("td:not(."+OTHERMONTH+")").filter(function(){return $(this.firstChild).attr(kendo.attr(VALUE))===value})},_class:function(className,value){var that=this,id=that._cellID,cell=that._cell;cell&&cell.removeAttr(ARIA_SELECTED).removeAttr("aria-label").removeAttr(ID),cell=that._table.find("td:not(."+OTHERMONTH+")").removeClass(className).filter(function(){return $(this.firstChild).attr(kendo.attr(VALUE))===value}).attr(ARIA_SELECTED,!0),className!==FOCUSED||that._active||that.options.focusOnNav===!1||(className=""),cell.addClass(className),cell[0]&&(that._cell=cell),id&&(cell.attr(ID,id),that._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",id))},_bindTable:function(table){table.on(FOCUS_WITH_NS,this._addClassProxy).on(BLUR,this._removeClassProxy)},_click:function(link){var that=this,options=that.options,currentValue=new Date(+that._current),value=link.attr(kendo.attr(VALUE)).split("/");value=new DATE(value[0],value[1],value[2]),adjustDST(value,0),that._view.setDate(currentValue,value),that.navigateDown(restrictValue(currentValue,options.min,options.max))},_focus:function(value){var that=this,view=that._view;0!==view.compare(value,that._current)?that.navigate(value):(that._current=value,that._class(FOCUSED,view.toDateString(value)))},_focusView:function(active,table){active&&this.focus(table)},_footer:function(template){var that=this,today=getToday(),element=that.element,footer=element.find(".k-footer");return template?(footer[0]||(footer=$('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(element)),that._today=footer.show().find(".k-link").html(template(today)).attr("title",kendo.toString(today,"D",that.options.culture)),void that._toggle()):(that._toggle(!1),void footer.hide())},_header:function(){var links,that=this,element=that.element;element.find(".k-header")[0]||element.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),links=element.find(".k-link").on(MOUSEENTER_WITH_NS+" "+MOUSELEAVE+" "+FOCUS_WITH_NS+" "+BLUR,mousetoggle).click(!1),that._title=links.eq(1).on(CLICK,function(){that._active=that.options.focusOnNav!==!1,that.navigateUp()}),that[PREVARROW]=links.eq(0).on(CLICK,function(){that._active=that.options.focusOnNav!==!1,that.navigateToPast()}),that[NEXTARROW]=links.eq(2).on(CLICK,function(){that._active=that.options.focusOnNav!==!1,that.navigateToFuture()})},_navigate:function(arrow,modifier){var that=this,index=that._index+1,currentValue=new DATE(+that._current);arrow=that[arrow],arrow.hasClass(DISABLED)||(index>3?currentValue.setFullYear(currentValue.getFullYear()+100*modifier):calendar.views[index].setDate(currentValue,modifier),that.navigate(currentValue))},_option:function(option,value){var isBigger,that=this,options=that.options,currentValue=that._value||that._current;return value===undefined?options[option]:(value=parse(value,options.format,options.culture),void(value&&(options[option]=new DATE(+value),isBigger=option===MIN?value>currentValue:currentValue>value,(isBigger||isEqualMonth(currentValue,value))&&(isBigger&&(that._value=null),that._changeView=!0),that._changeView||(that._changeView=!(!options.month.content&&!options.month.empty)),that.navigate(that._value),that._toggle())))},_toggle:function(toggle){var that=this,options=that.options,link=that._today;toggle===undefined&&(toggle=isInRange(getToday(),options.min,options.max)),link&&(link.off(CLICK),toggle?link.addClass(TODAY).removeClass(DISABLED).on(CLICK,proxy(that._todayClick,that)):link.removeClass(TODAY).addClass(DISABLED).on(CLICK,prevent))},_todayClick:function(e){var that=this,depth=views[that.options.depth],today=getToday();e.preventDefault(),0===that._view.compare(that._current,today)&&that._index==depth&&(that._changeView=!1),that._value=today,that.navigate(today,depth),that.trigger(CHANGE)},_templates:function(){var that=this,options=that.options,footer=options.footer,month=options.month,content=month.content,empty=month.empty;that.month={content:template('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+kendo.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(content||"#=data.value#")+"</a></td>",{useWithBlock:!!content}),empty:template('<td role="gridcell">'+(empty||"&nbsp;")+"</td>",{useWithBlock:!!empty})},that.footer=footer!==!1?template(footer||'#= kendo.toString(data,"D","'+options.culture+'") #',{useWithBlock:!1}):null}});ui.plugin(Calendar);var calendar={firstDayOfMonth:function(date){return new DATE(date.getFullYear(),date.getMonth(),1)},firstVisibleDay:function(date,calendarInfo){calendarInfo=calendarInfo||kendo.culture().calendar;for(var firstDay=calendarInfo.firstDay,firstVisibleDay=new DATE(date.getFullYear(),date.getMonth(),0,date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());firstVisibleDay.getDay()!=firstDay;)calendar.setTime(firstVisibleDay,-1*MS_PER_DAY);return firstVisibleDay},setTime:function(date,time){var tzOffsetBefore=date.getTimezoneOffset(),resultDATE=new DATE(date.getTime()+time),tzOffsetDiff=resultDATE.getTimezoneOffset()-tzOffsetBefore;date.setTime(resultDATE.getTime()+tzOffsetDiff*MS_PER_MINUTE)},views:[{name:MONTH,title:function(date,min,max,culture){return getCalendarInfo(culture).months.names[date.getMonth()]+" "+date.getFullYear()},content:function(options){for(var that=this,idx=0,min=options.min,max=options.max,date=options.date,dates=options.dates,format=options.format,culture=options.culture,navigateUrl=options.url,hasUrl=navigateUrl&&dates[0],currentCalendar=getCalendarInfo(culture),firstDayIdx=currentCalendar.firstDay,days=currentCalendar.days,names=shiftArray(days.names,firstDayIdx),shortNames=shiftArray(days.namesShort,firstDayIdx),start=calendar.firstVisibleDay(date,currentCalendar),firstDayOfMonth=that.first(date),lastDayOfMonth=that.last(date),toDateString=that.toDateString,today=new DATE,html='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>idx;idx++)html+='<th scope="col" title="'+names[idx]+'">'+shortNames[idx]+"</th>";return today=new DATE(today.getFullYear(),today.getMonth(),today.getDate()),adjustDST(today,0),today=+today,start=new DATE(start.getFullYear(),start.getMonth(),start.getDate()),adjustDST(start,0),view({cells:42,perRow:7,html:html+='</tr></thead><tbody><tr role="row">',start:start,min:new DATE(min.getFullYear(),min.getMonth(),min.getDate()),max:new DATE(max.getFullYear(),max.getMonth(),max.getDate()),content:options.content,empty:options.empty,setter:that.setDate,build:function(date){var cssClass=[],day=date.getDay(),linkClass="",url="#";return(firstDayOfMonth>date||date>lastDayOfMonth)&&cssClass.push(OTHERMONTH),+date===today&&cssClass.push("k-today"),(0===day||6===day)&&cssClass.push("k-weekend"),hasUrl&&inArray(+date,dates)&&(url=navigateUrl.replace("{0}",kendo.toString(date,format,culture)),linkClass=" k-action-link"),{date:date,dates:dates,ns:kendo.ns,title:kendo.toString(date,"D",culture),value:date.getDate(),dateString:toDateString(date),cssClass:cssClass[0]?' class="'+cssClass.join(" ")+'"':"",linkClass:linkClass,url:url}}})},first:function(date){return calendar.firstDayOfMonth(date)},last:function(date){var last=new DATE(date.getFullYear(),date.getMonth()+1,0),first=calendar.firstDayOfMonth(date),timeOffset=Math.abs(last.getTimezoneOffset()-first.getTimezoneOffset());return timeOffset&&last.setHours(first.getHours()+timeOffset/60),last},compare:function(date1,date2){var result,month1=date1.getMonth(),year1=date1.getFullYear(),month2=date2.getMonth(),year2=date2.getFullYear();return result=year1>year2?1:year2>year1?-1:month1==month2?0:month1>month2?1:-1},setDate:function(date,value){var hours=date.getHours();value instanceof DATE?date.setFullYear(value.getFullYear(),value.getMonth(),value.getDate()):calendar.setTime(date,value*MS_PER_DAY),adjustDST(date,hours)},toDateString:function(date){return date.getFullYear()+"/"+date.getMonth()+"/"+date.getDate()}},{name:"year",title:function(date){return date.getFullYear()},content:function(options){var namesAbbr=getCalendarInfo(options.culture).months.namesAbbr,toDateString=this.toDateString,min=options.min,max=options.max;return view({min:new DATE(min.getFullYear(),min.getMonth(),1),max:new DATE(max.getFullYear(),max.getMonth(),1),start:new DATE(options.date.getFullYear(),0,1),setter:this.setDate,build:function(date){return{value:namesAbbr[date.getMonth()],ns:kendo.ns,dateString:toDateString(date),cssClass:""}}})},first:function(date){return new DATE(date.getFullYear(),0,date.getDate())},last:function(date){return new DATE(date.getFullYear(),11,date.getDate())},compare:function(date1,date2){return compare(date1,date2)},setDate:function(date,value){var month,hours=date.getHours();value instanceof DATE?(month=value.getMonth(),date.setFullYear(value.getFullYear(),month,date.getDate()),month!==date.getMonth()&&date.setDate(0)):(month=date.getMonth()+value,date.setMonth(month),month>11&&(month-=12),month>0&&date.getMonth()!=month&&date.setDate(0)),adjustDST(date,hours)},toDateString:function(date){return date.getFullYear()+"/"+date.getMonth()+"/1"}},{name:"decade",title:function(date,min,max){return title(date,min,max,10)},content:function(options){var year=options.date.getFullYear(),toDateString=this.toDateString;return view({start:new DATE(year-year%10-1,0,1),min:new DATE(options.min.getFullYear(),0,1),max:new DATE(options.max.getFullYear(),0,1),setter:this.setDate,build:function(date,idx){return{value:date.getFullYear(),ns:kendo.ns,dateString:toDateString(date),cssClass:0===idx||11==idx?OTHERMONTHCLASS:""}}})},first:function(date){var year=date.getFullYear();return new DATE(year-year%10,date.getMonth(),date.getDate())},last:function(date){var year=date.getFullYear();return new DATE(year-year%10+9,date.getMonth(),date.getDate())},compare:function(date1,date2){return compare(date1,date2,10)},setDate:function(date,value){setDate(date,value,1)},toDateString:function(date){return date.getFullYear()+"/0/1"}},{name:CENTURY,title:function(date,min,max){return title(date,min,max,100)},content:function(options){var year=options.date.getFullYear(),min=options.min.getFullYear(),max=options.max.getFullYear(),toDateString=this.toDateString,minYear=min,maxYear=max;return minYear-=minYear%10,maxYear-=maxYear%10,10>maxYear-minYear&&(maxYear=minYear+9),view({start:new DATE(year-year%100-10,0,1),min:new DATE(minYear,0,1),max:new DATE(maxYear,0,1),setter:this.setDate,build:function(date,idx){var start=date.getFullYear(),end=start+9;return min>start&&(start=min),end>max&&(end=max),{ns:kendo.ns,value:start+" - "+end,dateString:toDateString(date),cssClass:0===idx||11==idx?OTHERMONTHCLASS:""}}})},first:function(date){var year=date.getFullYear();return new DATE(year-year%100,date.getMonth(),date.getDate())},last:function(date){var year=date.getFullYear();return new DATE(year-year%100+99,date.getMonth(),date.getDate())},compare:function(date1,date2){return compare(date1,date2,100)},setDate:function(date,value){setDate(date,value,10)},toDateString:function(date){var year=date.getFullYear();return year-year%10+"/0/1"}}]};calendar.isEqualDatePart=isEqualDatePart,calendar.makeUnselectable=makeUnselectable,calendar.restrictValue=restrictValue,calendar.isInRange=isInRange,calendar.normalize=normalize,calendar.viewsEnum=views,kendo.calendar=calendar}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function contains(container,target){return container===target||$.contains(container,target)}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,support=kendo.support,getOffset=kendo.getOffset,OPEN="open",CLOSE="close",DEACTIVATE="deactivate",ACTIVATE="activate",CENTER="center",LEFT="left",RIGHT="right",TOP="top",BOTTOM="bottom",ABSOLUTE="absolute",HIDDEN="hidden",BODY="body",LOCATION="location",POSITION="position",VISIBLE="visible",EFFECTS="effects",ACTIVE="k-state-active",ACTIVEBORDER="k-state-border",ACTIVEBORDERREGEXP=/k-state-border-(\w+)/,ACTIVECHILDREN=".k-picker-wrap, .k-dropdown-wrap, .k-link",MOUSEDOWN="down",DOCUMENT_ELEMENT=$(document.documentElement),WINDOW=$(window),SCROLL="scroll",RESIZE_SCROLL="resize scroll",cssPrefix=support.transitions.css,TRANSFORM=cssPrefix+"transform",extend=$.extend,NS=".kendoPopup",styles=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],Popup=Widget.extend({init:function(element,options){var parentPopup,that=this;options=options||{},options.isRtl&&(options.origin=options.origin||BOTTOM+" "+RIGHT,options.position=options.position||TOP+" "+RIGHT),Widget.fn.init.call(that,element,options),element=that.element,options=that.options,that.collisions=options.collision?options.collision.split(" "):[],that.downEvent=kendo.applyEventMap(MOUSEDOWN,kendo.guid()),1===that.collisions.length&&that.collisions.push(that.collisions[0]),parentPopup=$(that.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),options.appendTo=$($(options.appendTo)[0]||parentPopup[0]||BODY),that.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!options.isRtl).css({position:ABSOLUTE}).appendTo(options.appendTo).on("mouseenter"+NS,function(){that._hovered=!0}).on("mouseleave"+NS,function(){that._hovered=!1}),that.wrapper=$(),options.animation===!1&&(options.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),extend(options.animation.open,{complete:function(){that.wrapper.css({overflow:VISIBLE}),that._activated=!0,that._trigger(ACTIVATE)}}),extend(options.animation.close,{complete:function(){that._animationClose()}}),that._mousedownProxy=function(e){that._mousedown(e)},that._resizeProxy=function(e){that._resize(e)},options.toggleTarget&&$(options.toggleTarget).on(options.toggleEvent+NS,$.proxy(that.toggle,that));
},events:[OPEN,ACTIVATE,CLOSE,DEACTIVATE],options:{name:"Popup",toggleEvent:"click",origin:BOTTOM+" "+LEFT,position:TOP+" "+LEFT,anchor:BODY,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},_animationClose:function(){var that=this,options=that.options;that.wrapper.hide();var direction,dirClass,location=that.wrapper.data(LOCATION),anchor=$(options.anchor);location&&that.wrapper.css(location),options.anchor!=BODY&&(direction=((anchor.attr("class")||"").match(ACTIVEBORDERREGEXP)||["","down"])[1],dirClass=ACTIVEBORDER+"-"+direction,anchor.removeClass(dirClass).children(ACTIVECHILDREN).removeClass(ACTIVE).removeClass(dirClass),that.element.removeClass(ACTIVEBORDER+"-"+kendo.directions[direction].reverse)),that._closing=!1,that._trigger(DEACTIVATE)},destroy:function(){var parent,that=this,options=that.options,element=that.element.off(NS);Widget.fn.destroy.call(that),options.toggleTarget&&$(options.toggleTarget).off(NS),options.modal||(DOCUMENT_ELEMENT.unbind(that.downEvent,that._mousedownProxy),that._toggleResize(!1)),kendo.destroy(that.element.children()),element.removeData(),options.appendTo[0]===document.body&&(parent=element.parent(".k-animation-container"),parent[0]?parent.remove():element.remove())},open:function(x,y){var animation,wrapper,that=this,fixed={isFixed:!isNaN(parseInt(y,10)),x:x,y:y},element=that.element,options=that.options,direction="down",anchor=$(options.anchor),mobile=element[0]&&element.hasClass("km-widget");if(!that.visible()){if(options.copyAnchorStyles&&(mobile&&"font-size"==styles[0]&&styles.shift(),element.css(kendo.getComputedStyles(anchor[0],styles))),element.data("animating")||that._trigger(OPEN))return;if(that._activated=!1,options.modal||(DOCUMENT_ELEMENT.unbind(that.downEvent,that._mousedownProxy).bind(that.downEvent,that._mousedownProxy),support.mobileOS.ios||support.mobileOS.android||(that._toggleResize(!1),that._toggleResize(!0))),that.wrapper=wrapper=kendo.wrap(element,options.autosize).css({overflow:HIDDEN,display:"block",position:ABSOLUTE}),support.mobileOS.android&&wrapper.css(TRANSFORM,"translatez(0)"),wrapper.css(POSITION),$(options.appendTo)[0]==document.body&&wrapper.css(TOP,"-10000px"),animation=extend(!0,{},options.animation.open),that.flipped=that._position(fixed),animation.effects=kendo.parseEffects(animation.effects,that.flipped),direction=animation.effects.slideIn?animation.effects.slideIn.direction:direction,options.anchor!=BODY){var dirClass=ACTIVEBORDER+"-"+direction;element.addClass(ACTIVEBORDER+"-"+kendo.directions[direction].reverse),anchor.addClass(dirClass).children(ACTIVECHILDREN).addClass(ACTIVE).addClass(dirClass)}element.data(EFFECTS,animation.effects).kendoStop(!0).kendoAnimate(animation)}},position:function(){this.visible()&&this._position()},toggle:function(){var that=this;that[that.visible()?CLOSE:OPEN]()},visible:function(){return this.element.is(":"+VISIBLE)},close:function(skipEffects){var wrap,animation,openEffects,closeEffects,that=this,options=that.options;if(that.visible()){if(wrap=that.wrapper[0]?that.wrapper:kendo.wrap(that.element).hide(),that._toggleResize(!1),that._closing||that._trigger(CLOSE))return void that._toggleResize(!0);that.element.find(".k-popup").each(function(){var that=$(this),popup=that.data("kendoPopup");popup&&popup.close(skipEffects)}),DOCUMENT_ELEMENT.unbind(that.downEvent,that._mousedownProxy),skipEffects?animation={hide:!0,effects:{}}:(animation=extend(!0,{},options.animation.close),openEffects=that.element.data(EFFECTS),closeEffects=animation.effects,!closeEffects&&!kendo.size(closeEffects)&&openEffects&&kendo.size(openEffects)&&(animation.effects=openEffects,animation.reverse=!0),that._closing=!0),that.element.kendoStop(!0),wrap.css({overflow:HIDDEN}),that.element.kendoAnimate(animation)}},_trigger:function(ev){return this.trigger(ev,{type:ev})},_resize:function(e){var that=this;"resize"===e.type?(clearTimeout(that._resizeTimeout),that._resizeTimeout=setTimeout(function(){that._position(),that._resizeTimeout=null},50)):(!that._hovered||that._activated&&that.element.hasClass("k-list-container"))&&that.close()},_toggleResize:function(toggle){var method=toggle?"on":"off";this._scrollableParents()[method](SCROLL,this._resizeProxy),WINDOW[method](RESIZE_SCROLL,this._resizeProxy)},_mousedown:function(e){var that=this,container=that.element[0],options=that.options,anchor=$(options.anchor)[0],toggleTarget=options.toggleTarget,target=kendo.eventTarget(e),popup=$(target).closest(".k-popup"),mobile=popup.parent().parent(".km-shim").length;popup=popup[0],(mobile||!popup||popup===that.element[0])&&"popover"!==$(e.target).closest("a").data("rel")&&(contains(container,target)||contains(anchor,target)||toggleTarget&&contains($(toggleTarget)[0],target)||that.close())},_fit:function(position,size,viewPortSize){var output=0;return position+size>viewPortSize&&(output=viewPortSize-(position+size)),0>position&&(output=-position),output},_flip:function(offset,size,anchorSize,viewPortSize,origin,position,boxSize){var output=0;return boxSize=boxSize||size,position!==origin&&position!==CENTER&&origin!==CENTER&&(offset+boxSize>viewPortSize&&(output+=-(anchorSize+size)),0>offset+output&&(output+=anchorSize+size)),output},_scrollableParents:function(){return $(this.options.anchor).parentsUntil("body").filter(function(index,element){return kendo.isScrollable(element)})},_position:function(fixed){var siblingContainer,parents,parentZIndex,length,viewportWidth,viewportHeight,that=this,element=that.element,wrapper=that.wrapper,options=that.options,viewport=$(options.viewport),viewportOffset=viewport.offset(),anchor=$(options.anchor),origins=options.origin.toLowerCase().split(" "),positions=options.position.toLowerCase().split(" "),collisions=that.collisions,zoomLevel=support.zoomLevel(),zIndex=10002,isWindow=!!(viewport[0]==window&&window.innerWidth&&1.02>=zoomLevel),idx=0,docEl=document.documentElement;if(viewportWidth=isWindow?window.innerWidth:viewport.width(),viewportHeight=isWindow?window.innerHeight:viewport.height(),isWindow&&docEl.scrollHeight-docEl.clientHeight>0&&(viewportWidth-=kendo.support.scrollbar()),siblingContainer=anchor.parents().filter(wrapper.siblings()),siblingContainer[0])if(parentZIndex=Math.max(Number(siblingContainer.css("zIndex")),0))zIndex=parentZIndex+10;else for(parents=anchor.parentsUntil(siblingContainer),length=parents.length;length>idx;idx++)parentZIndex=Number($(parents[idx]).css("zIndex")),parentZIndex&&parentZIndex>zIndex&&(zIndex=parentZIndex+10);wrapper.css("zIndex",zIndex),wrapper.css(fixed&&fixed.isFixed?{left:fixed.x,top:fixed.y}:that._align(origins,positions));var pos=getOffset(wrapper,POSITION,anchor[0]===wrapper.offsetParent()[0]),offset=getOffset(wrapper),anchorParent=anchor.offsetParent().parent(".k-animation-container,.k-popup,.k-group");anchorParent.length&&(pos=getOffset(wrapper,POSITION,!0),offset=getOffset(wrapper)),viewport[0]===window?(offset.top-=window.pageYOffset||document.documentElement.scrollTop||0,offset.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(offset.top-=viewportOffset.top,offset.left-=viewportOffset.left),that.wrapper.data(LOCATION)||wrapper.data(LOCATION,extend({},pos));var offsets=extend({},offset),location=extend({},pos),adjustSize=options.adjustSize;"fit"===collisions[0]&&(location.top+=that._fit(offsets.top,wrapper.outerHeight()+adjustSize.height,viewportHeight/zoomLevel)),"fit"===collisions[1]&&(location.left+=that._fit(offsets.left,wrapper.outerWidth()+adjustSize.width,viewportWidth/zoomLevel));var flipPos=extend({},location);return"flip"===collisions[0]&&(location.top+=that._flip(offsets.top,element.outerHeight(),anchor.outerHeight(),viewportHeight/zoomLevel,origins[0],positions[0],wrapper.outerHeight())),"flip"===collisions[1]&&(location.left+=that._flip(offsets.left,element.outerWidth(),anchor.outerWidth(),viewportWidth/zoomLevel,origins[1],positions[1],wrapper.outerWidth())),element.css(POSITION,ABSOLUTE),wrapper.css(location),location.left!=flipPos.left||location.top!=flipPos.top},_align:function(origin,position){var appendToOffset,that=this,element=that.wrapper,anchor=$(that.options.anchor),verticalOrigin=origin[0],horizontalOrigin=origin[1],verticalPosition=position[0],horizontalPosition=position[1],anchorOffset=getOffset(anchor),appendTo=$(that.options.appendTo),width=element.outerWidth(),height=element.outerHeight(),anchorWidth=anchor.outerWidth(),anchorHeight=anchor.outerHeight(),top=anchorOffset.top,left=anchorOffset.left,round=Math.round;return appendTo[0]!=document.body&&(appendToOffset=getOffset(appendTo),top-=appendToOffset.top,left-=appendToOffset.left),verticalOrigin===BOTTOM&&(top+=anchorHeight),verticalOrigin===CENTER&&(top+=round(anchorHeight/2)),verticalPosition===BOTTOM&&(top-=height),verticalPosition===CENTER&&(top-=round(height/2)),horizontalOrigin===RIGHT&&(left+=anchorWidth),horizontalOrigin===CENTER&&(left+=round(anchorWidth/2)),horizontalPosition===RIGHT&&(left-=width),horizontalPosition===CENTER&&(left-=round(width/2)),{top:top,left:left}}});ui.plugin(Popup)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function normalize(options){var parseFormats=options.parseFormats,format=options.format;calendar.normalize(options),parseFormats=$.isArray(parseFormats)?parseFormats:[parseFormats],parseFormats.length||parseFormats.push("yyyy-MM-dd"),-1===$.inArray(format,parseFormats)&&parseFormats.splice(0,0,options.format),options.parseFormats=parseFormats}function preventDefault(e){e.preventDefault()}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,parse=kendo.parseDate,keys=kendo.keys,template=kendo.template,activeElement=kendo._activeElement,DIV="<div />",SPAN="<span />",ns=".kendoDatePicker",CLICK="click"+ns,OPEN="open",CLOSE="close",CHANGE="change",DISABLED="disabled",READONLY="readonly",DEFAULT="k-state-default",FOCUSED="k-state-focused",SELECTED="k-state-selected",STATEDISABLED="k-state-disabled",HOVER="k-state-hover",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,MOUSEDOWN="mousedown"+ns,ID="id",MIN="min",MAX="max",MONTH="month",ARIA_DISABLED="aria-disabled",ARIA_EXPANDED="aria-expanded",ARIA_HIDDEN="aria-hidden",ARIA_READONLY="aria-readonly",calendar=kendo.calendar,isInRange=calendar.isInRange,restrictValue=calendar.restrictValue,isEqualDatePart=calendar.isEqualDatePart,extend=$.extend,proxy=$.proxy,DATE=Date,DateView=function(options){var id,that=this,body=document.body,div=$(DIV).attr(ARIA_HIDDEN,"true").addClass("k-calendar-container").appendTo(body);that.options=options=options||{},id=options.id,id&&(id+="_dateview",div.attr(ID,id),that._dateViewID=id),that.popup=new ui.Popup(div,extend(options.popup,options,{name:"Popup",isRtl:kendo.support.isRtl(options.anchor)})),that.div=div,that.value(options.value)};DateView.prototype={_calendar:function(){var div,that=this,calendar=that.calendar,options=that.options;calendar||(div=$(DIV).attr(ID,kendo.guid()).appendTo(that.popup.element).on(MOUSEDOWN,preventDefault).on(CLICK,"td:has(.k-link)",proxy(that._click,that)),that.calendar=calendar=new ui.Calendar(div),that._setOptions(options),kendo.calendar.makeUnselectable(calendar.element),calendar.navigate(that._value||that._current,options.start),that.value(that._value))},_setOptions:function(options){this.calendar.setOptions({focusOnNav:!1,change:options.change,culture:options.culture,dates:options.dates,depth:options.depth,footer:options.footer,format:options.format,max:options.max,min:options.min,month:options.month,start:options.start})},setOptions:function(options){var old=this.options;this.options=extend(old,options,{change:old.change,close:old.close,open:old.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup.destroy()},open:function(){var that=this;that._calendar(),that.popup.open()},close:function(){this.popup.close()},min:function(value){this._option(MIN,value)},max:function(value){this._option(MAX,value)},toggle:function(){var that=this;that[that.popup.visible()?CLOSE:OPEN]()},move:function(e){var that=this,key=e.keyCode,calendar=that.calendar,selectIsClicked=e.ctrlKey&&key==keys.DOWN||key==keys.ENTER,handled=!1;if(e.altKey)key==keys.DOWN?(that.open(),e.preventDefault(),handled=!0):key==keys.UP&&(that.close(),e.preventDefault(),handled=!0);else if(that.popup.visible()){if(key==keys.ESC||selectIsClicked&&calendar._cell.hasClass(SELECTED))return that.close(),e.preventDefault(),!0;that._current=calendar._move(e),handled=!0}return handled},current:function(date){this._current=date,this.calendar._focus(date)},value:function(value){var that=this,calendar=that.calendar,options=that.options;that._value=value,that._current=new DATE(+restrictValue(value,options.min,options.max)),calendar&&calendar.value(value)},_click:function(e){-1!==e.currentTarget.className.indexOf(SELECTED)&&this.close()},_option:function(option,value){var that=this,calendar=that.calendar;that.options[option]=value,calendar&&calendar[option](value)}},DateView.normalize=normalize,kendo.DateView=DateView;var DatePicker=Widget.extend({init:function(element,options){var disabled,div,that=this;Widget.fn.init.call(that,element,options),element=that.element,options=that.options,options.min=parse(element.attr("min"))||parse(options.min),options.max=parse(element.attr("max"))||parse(options.max),normalize(options),that._initialOptions=extend({},options),that._wrapper(),that.dateView=new DateView(extend({},options,{id:element.attr(ID),anchor:that.wrapper,change:function(){that._change(this.value()),that.close()},close:function(e){that.trigger(CLOSE)?e.preventDefault():(element.attr(ARIA_EXPANDED,!1),div.attr(ARIA_HIDDEN,!0))},open:function(e){var date,options=that.options;that.trigger(OPEN)?e.preventDefault():(that.element.val()!==that._oldText&&(date=parse(element.val(),options.parseFormats,options.culture),that.dateView[date?"current":"value"](date)),element.attr(ARIA_EXPANDED,!0),div.attr(ARIA_HIDDEN,!1),that._updateARIA(date))}})),div=that.dateView.div,that._icon();try{element[0].setAttribute("type","text")}catch(e){element[0].type="text"}element.addClass("k-input").attr({role:"combobox","aria-expanded":!1,"aria-owns":that.dateView._dateViewID}),that._reset(),that._template(),disabled=element.is("[disabled]")||$(that.element).parents("fieldset").is(":disabled"),disabled?that.enable(!1):that.readonly(element.is("[readonly]")),that._old=that._update(options.value||that.element.val()),that._oldText=element.val(),kendo.notify(that)},events:[OPEN,CLOSE,CHANGE],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:MONTH,depth:MONTH,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(options){var that=this,value=that._value;Widget.fn.setOptions.call(that,options),options=that.options,options.min=parse(options.min),options.max=parse(options.max),normalize(options),that.dateView.setOptions(options),value&&(that.element.val(kendo.toString(value,options.format,options.culture)),that._updateARIA(value))},_editable:function(options){var that=this,icon=that._dateIcon.off(ns),element=that.element.off(ns),wrapper=that._inputWrapper.off(ns),readonly=options.readonly,disable=options.disable;readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),element.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),element.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1).on("keydown"+ns,proxy(that._keydown,that)).on("focusout"+ns,proxy(that._blur,that)).on("focus"+ns,function(){that._inputWrapper.addClass(FOCUSED)}),icon.on(CLICK,proxy(that._click,that)).on(MOUSEDOWN,preventDefault))},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.dateView.destroy(),that.element.off(ns),that._dateIcon.off(ns),that._inputWrapper.off(ns),that._form&&that._form.off("reset",that._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(value){return this._option(MIN,value)},max:function(value){return this._option(MAX,value)},value:function(value){var that=this;return value===undefined?that._value:(that._old=that._update(value),null===that._old&&that.element.val(""),void(that._oldText=that.element.val()))},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_blur:function(){var that=this,value=that.element.val();that.close(),value!==that._oldText&&that._change(value),that._inputWrapper.removeClass(FOCUSED)},_click:function(){var that=this,element=that.element;that.dateView.toggle(),kendo.support.touch||element[0]===activeElement()||element.focus()},_change:function(value){var that=this;value=that._update(value),+that._old!=+value&&(that._old=value,that._oldText=that.element.val(),that._typing||that.element.trigger(CHANGE),that.trigger(CHANGE)),that._typing=!1},_keydown:function(e){var that=this,dateView=that.dateView,value=that.element.val(),handled=!1;dateView.popup.visible()||e.keyCode!=keys.ENTER||value===that._oldText?(handled=dateView.move(e),that._updateARIA(dateView._current),handled||(that._typing=!0)):that._change(value)},_icon:function(){var icon,that=this,element=that.element;icon=element.next("span.k-select"),icon[0]||(icon=$('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(element)),that._dateIcon=icon.attr({role:"button","aria-controls":that.dateView._dateViewID})},_option:function(option,value){var that=this,options=that.options;return value===undefined?options[option]:(value=parse(value,options.parseFormats,options.culture),void(value&&(options[option]=new DATE(+value),that.dateView[option](value))))},_update:function(value){var formattedValue,that=this,options=that.options,min=options.min,max=options.max,current=that._value,date=parse(value,options.parseFormats,options.culture),isSameType=null===date&&null===current||date instanceof Date&&current instanceof Date;return+date===+current&&isSameType?(formattedValue=kendo.toString(date,options.format,options.culture),formattedValue!==value&&that.element.val(null===date?value:formattedValue),date):(null!==date&&isEqualDatePart(date,min)?date=restrictValue(date,min,max):isInRange(date,min,max)||(date=null),that._value=date,that.dateView.value(date),that.element.val(date?kendo.toString(date,options.format,options.culture):value),that._updateARIA(date),date)},_wrapper:function(){var wrapper,that=this,element=that.element;wrapper=element.parents(".k-datepicker"),wrapper[0]||(wrapper=element.wrap(SPAN).parent().addClass("k-picker-wrap k-state-default"),wrapper=wrapper.wrap(SPAN).parent()),wrapper[0].style.cssText=element[0].style.cssText,element.css({width:"100%",height:element[0].style.height}),that.wrapper=wrapper.addClass("k-widget k-datepicker k-header").addClass(element[0].className),that._inputWrapper=$(wrapper[0].firstChild)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){that.value(element[0].defaultValue),that.max(that._initialOptions.max),that.min(that._initialOptions.min)},that._form=form.on("reset",that._resetHandler))},_template:function(){this._ariaTemplate=template(this.options.ARIATemplate)},_updateARIA:function(date){var cell,that=this,calendar=that.dateView.calendar;that.element.removeAttr("aria-activedescendant"),calendar&&(cell=calendar._cell,cell.attr("aria-label",that._ariaTemplate({current:date||calendar.current()})),that.element.attr("aria-activedescendant",cell.attr("id")))}});ui.plugin(DatePicker)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function touchDelta(touch1,touch2){var x1=touch1.x.location,y1=touch1.y.location,x2=touch2.x.location,y2=touch2.y.location,dx=x1-x2,dy=y1-y2;return{center:{x:(x1+x2)/2,y:(y1+y2)/2},distance:Math.sqrt(dx*dx+dy*dy)}}function getTouches(e){var length,changedTouches,touch,touches=[],originalEvent=e.originalEvent,currentTarget=e.currentTarget,idx=0;if(e.api)touches.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(changedTouches=originalEvent?originalEvent.changedTouches:[],length=changedTouches.length;length>idx;idx++)touch=changedTouches[idx],touches.push({location:touch,event:e,target:touch.target,currentTarget:currentTarget,id:touch.identifier,type:"touch"});else touches.push(support.pointers||support.msPointers?{location:originalEvent,event:e,target:e.target,currentTarget:currentTarget,id:originalEvent.pointerId,type:"pointer"}:{id:1,event:e,target:e.target,currentTarget:currentTarget,location:e,type:"mouse"});return touches}function withEachUpEvent(callback){for(var downEvents=kendo.eventMap.up.split(" "),idx=0,length=downEvents.length;length>idx;idx++)callback(downEvents[idx])}var kendo=window.kendo,support=kendo.support,document=window.document,Class=kendo.Class,Observable=kendo.Observable,now=$.now,extend=$.extend,OS=support.mobileOS,invalidZeroEvents=OS&&OS.android,DEFAULT_MIN_HOLD=800,DEFAULT_THRESHOLD=support.browser.msie?5:0,PRESS="press",HOLD="hold",SELECT="select",START="start",MOVE="move",END="end",CANCEL="cancel",TAP="tap",RELEASE="release",GESTURESTART="gesturestart",GESTURECHANGE="gesturechange",GESTUREEND="gestureend",GESTURETAP="gesturetap",THRESHOLD={api:0,touch:0,mouse:9,pointer:9},ENABLE_GLOBAL_SURFACE=!support.touch||support.mouseAndTouchPresent,TouchAxis=Class.extend({init:function(axis,location){var that=this;that.axis=axis,that._updateLocationData(location),that.startLocation=that.location,that.velocity=that.delta=0,that.timeStamp=now()},move:function(location){var that=this,offset=location["page"+that.axis],timeStamp=now(),timeDelta=timeStamp-that.timeStamp||1;(offset||!invalidZeroEvents)&&(that.delta=offset-that.location,that._updateLocationData(location),that.initialDelta=offset-that.startLocation,that.velocity=that.delta/timeDelta,that.timeStamp=timeStamp)},_updateLocationData:function(location){var that=this,axis=that.axis;that.location=location["page"+axis],that.client=location["client"+axis],that.screen=location["screen"+axis]}}),Touch=Class.extend({init:function(userEvents,target,touchInfo){extend(this,{x:new TouchAxis("X",touchInfo.location),y:new TouchAxis("Y",touchInfo.location),type:touchInfo.type,threshold:userEvents.threshold||THRESHOLD[touchInfo.type],userEvents:userEvents,target:target,currentTarget:touchInfo.currentTarget,initialTouch:touchInfo.target,id:touchInfo.id,pressEvent:touchInfo,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout($.proxy(this,"_hold"),this.userEvents.minHold),this._trigger(PRESS,this.pressEvent)},_hold:function(){this._trigger(HOLD,this.pressEvent)},move:function(touchInfo){var that=this;if(!that._finished){if(that.x.move(touchInfo.location),that.y.move(touchInfo.location),!that._moved){if(that._withinIgnoreThreshold())return;if(UserEvents.current&&UserEvents.current!==that.userEvents)return that.dispose();that._start(touchInfo)}that._finished||that._trigger(MOVE,touchInfo)}},end:function(touchInfo){var that=this;that.endTime=now(),that._finished||(that._finished=!0,that._trigger(RELEASE,touchInfo),that._moved?that._trigger(END,touchInfo):that._trigger(TAP,touchInfo),clearTimeout(that._holdTimeout),that.dispose())},dispose:function(){var userEvents=this.userEvents,activeTouches=userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),activeTouches.splice($.inArray(this,activeTouches),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(touchInfo){clearTimeout(this._holdTimeout),this.startTime=now(),this._moved=!0,this._trigger(START,touchInfo)},_trigger:function(name,touchInfo){var that=this,jQueryEvent=touchInfo.event,data={touch:that,x:that.x,y:that.y,target:that.target,event:jQueryEvent};that.userEvents.notify(name,data)&&jQueryEvent.preventDefault()},_withinIgnoreThreshold:function(){var xDelta=this.x.initialDelta,yDelta=this.y.initialDelta;return Math.sqrt(xDelta*xDelta+yDelta*yDelta)<=this.threshold}}),UserEvents=Observable.extend({init:function(element,options){var filter,that=this,ns=kendo.guid();if(options=options||{},filter=that.filter=options.filter,that.threshold=options.threshold||DEFAULT_THRESHOLD,that.minHold=options.minHold||DEFAULT_MIN_HOLD,that.touches=[],that._maxTouches=options.multiTouch?2:1,that.allowSelection=options.allowSelection,that.captureUpIfMoved=options.captureUpIfMoved,that.eventNS=ns,element=$(element).handler(that),Observable.fn.init.call(that),extend(that,{element:element,surface:$(options.global&&ENABLE_GLOBAL_SURFACE?document.documentElement:options.surface||element),stopPropagation:options.stopPropagation,pressed:!1}),that.surface.handler(that).on(kendo.applyEventMap("move",ns),"_move").on(kendo.applyEventMap("up cancel",ns),"_end"),element.on(kendo.applyEventMap("down",ns),filter,"_start"),(support.pointers||support.msPointers)&&(support.browser.version<11?element.css("-ms-touch-action","pinch-zoom double-tap-zoom"):element.css("touch-action","none")),options.preventDragEvent&&element.on(kendo.applyEventMap("dragstart",ns),kendo.preventDefault),element.on(kendo.applyEventMap("mousedown",ns),filter,{root:element},"_select"),that.captureUpIfMoved&&support.eventCapture){var surfaceElement=that.surface[0],preventIfMovingProxy=$.proxy(that.preventIfMoving,that);withEachUpEvent(function(eventName){surfaceElement.addEventListener(eventName,preventIfMovingProxy,!0)})}that.bind([PRESS,HOLD,TAP,START,MOVE,END,RELEASE,CANCEL,GESTURESTART,GESTURECHANGE,GESTUREEND,GESTURETAP,SELECT],options)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var that=this;if(!that._destroyed){if(that._destroyed=!0,that.captureUpIfMoved&&support.eventCapture){var surfaceElement=that.surface[0];withEachUpEvent(function(eventName){surfaceElement.removeEventListener(eventName,that.preventIfMoving)})}that.element.kendoDestroy(that.eventNS),that.surface.kendoDestroy(that.eventNS),that.element.removeData("handler"),that.surface.removeData("handler"),that._disposeAll(),that.unbind(),delete that.surface,delete that.element,delete that.currentTarget}},capture:function(){UserEvents.current=this},cancel:function(){this._disposeAll(),this.trigger(CANCEL)},notify:function(eventName,data){var that=this,touches=that.touches;if(this._isMultiTouch()){switch(eventName){case MOVE:eventName=GESTURECHANGE;break;case END:eventName=GESTUREEND;break;case TAP:eventName=GESTURETAP}extend(data,{touches:touches},touchDelta(touches[0],touches[1]))}return this.trigger(eventName,extend(data,{type:eventName}))},press:function(x,y,target){this._apiCall("_start",x,y,target)},move:function(x,y){this._apiCall("_move",x,y)},end:function(x,y){this._apiCall("_end",x,y)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var touches=this.touches;touches.length>0;)touches.pop().dispose()},_isMoved:function(){return $.grep(this.touches,function(touch){return touch.isMoved()}).length},_select:function(e){(!this.allowSelection||this.trigger(SELECT,{event:e}))&&e.preventDefault()},_start:function(e){var target,touch,that=this,idx=0,filter=that.filter,touches=getTouches(e),length=touches.length,which=e.which;if(!(which&&which>1||that._maxTouchesReached()))for(UserEvents.current=null,that.currentTarget=e.currentTarget,that.stopPropagation&&e.stopPropagation();length>idx&&!that._maxTouchesReached();idx++)touch=touches[idx],target=filter?$(touch.currentTarget):that.element,target.length&&(touch=new Touch(that,target,touch),that.touches.push(touch),touch.press(),that._isMultiTouch()&&that.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_eachTouch:function(methodName,e){var idx,touch,touchInfo,matchingTouch,that=this,dict={},touches=getTouches(e),activeTouches=that.touches;for(idx=0;idx<activeTouches.length;idx++)touch=activeTouches[idx],dict[touch.id]=touch;for(idx=0;idx<touches.length;idx++)touchInfo=touches[idx],matchingTouch=dict[touchInfo.id],matchingTouch&&matchingTouch[methodName](touchInfo)},_apiCall:function(type,x,y,target){this[type]({api:!0,pageX:x,pageY:y,clientX:x,clientY:y,target:$(target||this.element)[0],stopPropagation:$.noop,preventDefault:$.noop})}});UserEvents.defaultThreshold=function(value){DEFAULT_THRESHOLD=value},UserEvents.minHold=function(value){DEFAULT_MIN_HOLD=value},kendo.getTouches=getTouches,kendo.touchDelta=touchDelta,kendo.UserEvents=UserEvents}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function buttonHtml(className,text){return'<span unselectable="on" class="k-link"><span unselectable="on" class="k-icon k-i-arrow-'+className+'" title="'+text+'">'+text+"</span></span>"}var kendo=window.kendo,caret=kendo.caret,keys=kendo.keys,ui=kendo.ui,Widget=ui.Widget,activeElement=kendo._activeElement,extractFormat=kendo._extractFormat,parse=kendo.parseFloat,placeholderSupported=kendo.support.placeholder,getCulture=kendo.getCulture,round=kendo._round,CHANGE="change",DISABLED="disabled",READONLY="readonly",INPUT="k-input",SPIN="spin",ns=".kendoNumericTextBox",TOUCHEND="touchend",MOUSELEAVE="mouseleave"+ns,HOVEREVENTS="mouseenter"+ns+" "+MOUSELEAVE,DEFAULT="k-state-default",FOCUSED="k-state-focused",HOVER="k-state-hover",FOCUS="focus",POINT=".",SELECTED="k-state-selected",STATEDISABLED="k-state-disabled",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",INTEGER_REGEXP=/^(-)?(\d*)$/,NULL=null,proxy=$.proxy,extend=$.extend,NumericTextBox=Widget.extend({init:function(element,options){var min,max,step,value,disabled,that=this,isStep=options&&options.step!==undefined;Widget.fn.init.call(that,element,options),options=that.options,element=that.element.on("focusout"+ns,proxy(that._focusout,that)).attr("role","spinbutton"),options.placeholder=options.placeholder||element.attr("placeholder"),that._initialOptions=extend({},options),that._reset(),that._wrapper(),that._arrows(),that._input(),kendo.support.mobileOS?that._text.on(TOUCHEND+ns+" "+FOCUS+ns,function(){that._toggleText(!1),element.focus()}):that._text.on(FOCUS+ns,proxy(that._click,that)),min=that.min(element.attr("min")),max=that.max(element.attr("max")),step=that._parse(element.attr("step")),options.min===NULL&&min!==NULL&&(options.min=min),options.max===NULL&&max!==NULL&&(options.max=max),isStep||step===NULL||(options.step=step),element.attr("aria-valuemin",options.min).attr("aria-valuemax",options.max),options.format=extractFormat(options.format),value=options.value,that.value(value!==NULL?value:element.val()),disabled=element.is("[disabled]")||$(that.element).parents("fieldset").is(":disabled"),disabled?that.enable(!1):that.readonly(element.is("[readonly]")),kendo.notify(that)},options:{name:"NumericTextBox",decimals:NULL,min:NULL,max:NULL,value:NULL,step:1,culture:"",format:"n",spinners:!0,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value"},events:[CHANGE,SPIN],_editable:function(options){var that=this,element=that.element,disable=options.disable,readonly=options.readonly,text=that._text.add(element),wrapper=that._inputWrapper.off(HOVEREVENTS);that._toggleText(!0),that._upArrowEventHandler.unbind("press"),that._downArrowEventHandler.unbind("press"),element.off("keydown"+ns).off("keypress"+ns).off("paste"+ns),
readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),text.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),text.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1),that._upArrowEventHandler.bind("press",function(e){e.preventDefault(),that._spin(1),that._upArrow.addClass(SELECTED)}),that._downArrowEventHandler.bind("press",function(e){e.preventDefault(),that._spin(-1),that._downArrow.addClass(SELECTED)}),that.element.on("keydown"+ns,proxy(that._keydown,that)).on("keypress"+ns,proxy(that._keypress,that)).on("paste"+ns,proxy(that._paste,that)))},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},destroy:function(){var that=this;that.element.add(that._text).add(that._upArrow).add(that._downArrow).add(that._inputWrapper).off(ns),that._upArrowEventHandler.destroy(),that._downArrowEventHandler.destroy(),that._form&&that._form.off("reset",that._resetHandler),Widget.fn.destroy.call(that)},min:function(value){return this._option("min",value)},max:function(value){return this._option("max",value)},step:function(value){return this._option("step",value)},value:function(value){var adjusted,that=this;return value===undefined?that._value:(value=that._parse(value),adjusted=that._adjust(value),void(value===adjusted&&(that._update(value),that._old=that._value)))},focus:function(){this._focusin()},_adjust:function(value){var that=this,options=that.options,min=options.min,max=options.max;return value===NULL?value:(min!==NULL&&min>value?value=min:max!==NULL&&value>max&&(value=max),value)},_arrows:function(){var arrows,that=this,_release=function(){clearTimeout(that._spinning),arrows.removeClass(SELECTED)},options=that.options,spinners=options.spinners,element=that.element;arrows=element.siblings(".k-icon"),arrows[0]||(arrows=$(buttonHtml("n",options.upArrowText)+buttonHtml("s",options.downArrowText)).insertAfter(element),arrows.wrapAll('<span class="k-select"/>')),spinners||(arrows.parent().toggle(spinners),that._inputWrapper.addClass("k-expand-padding")),that._upArrow=arrows.eq(0),that._upArrowEventHandler=new kendo.UserEvents(that._upArrow,{release:_release}),that._downArrow=arrows.eq(1),that._downArrowEventHandler=new kendo.UserEvents(that._downArrow,{release:_release})},_blur:function(){var that=this;that._toggleText(!0),that._change(that.element.val())},_click:function(e){var that=this;clearTimeout(that._focusing),that._focusing=setTimeout(function(){var result,groupRegExp,extractRegExp,input=e.target,idx=caret(input)[0],value=input.value.substring(0,idx),format=that._format(that.options.format),group=format[","],caretPosition=0;group&&(groupRegExp=new RegExp("\\"+group,"g"),extractRegExp=new RegExp("([\\d\\"+group+"]+)(\\"+format[POINT]+")?(\\d+)?")),extractRegExp&&(result=extractRegExp.exec(value)),result&&(caretPosition=result[0].replace(groupRegExp,"").length,-1!=value.indexOf("(")&&that._value<0&&caretPosition++),that._focusin(),caret(that.element[0],caretPosition)})},_change:function(value){var that=this;that._update(value),value=that._value,that._old!=value&&(that._old=value,that._typing||that.element.trigger(CHANGE),that.trigger(CHANGE)),that._typing=!1},_culture:function(culture){return culture||getCulture(this.options.culture)},_focusin:function(){var that=this;that._inputWrapper.addClass(FOCUSED),that._toggleText(!1),that.element[0].focus()},_focusout:function(){var that=this;clearTimeout(that._focusing),that._inputWrapper.removeClass(FOCUSED).removeClass(HOVER),that._blur()},_format:function(format,culture){var numberFormat=this._culture(culture).numberFormat;return format=format.toLowerCase(),format.indexOf("c")>-1?numberFormat=numberFormat.currency:format.indexOf("p")>-1&&(numberFormat=numberFormat.percent),numberFormat},_input:function(){var text,that=this,CLASSNAME="k-formatted-value",element=that.element.addClass(INPUT).show()[0],accessKey=element.accessKey,wrapper=that.wrapper;text=wrapper.find(POINT+CLASSNAME),text[0]||(text=$('<input type="text"/>').insertBefore(element).addClass(CLASSNAME));try{element.setAttribute("type","text")}catch(e){element.type="text"}text[0].tabIndex=element.tabIndex,text[0].style.cssText=element.style.cssText,text[0].title=element.title,text.prop("placeholder",that.options.placeholder),accessKey&&(text.attr("accesskey",accessKey),element.accessKey=""),that._text=text.addClass(element.className)},_keydown:function(e){var that=this,key=e.keyCode;that._key=key,key==keys.DOWN?that._step(-1):key==keys.UP?that._step(1):key==keys.ENTER?that._change(that.element.val()):that._typing=!0},_keypress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&e.keyCode!==keys.BACKSPACE&&e.keyCode!==keys.ENTER){var isValid,that=this,min=that.options.min,element=that.element,selection=caret(element),selectionStart=selection[0],selectionEnd=selection[1],character=String.fromCharCode(e.which),numberFormat=that._format(that.options.format),isNumPadDecimal=that._key===keys.NUMPAD_DOT,value=element.val();isNumPadDecimal&&(character=numberFormat[POINT]),value=value.substring(0,selectionStart)+character+value.substring(selectionEnd),isValid=that._numericRegex(numberFormat).test(value),isValid&&isNumPadDecimal?(element.val(value),caret(element,selectionStart+character.length),e.preventDefault()):(null!==min&&min>=0&&"-"===value.charAt(0)||!isValid)&&e.preventDefault(),that._key=0}},_numericRegex:function(numberFormat){var that=this,separator=numberFormat[POINT],precision=that.options.decimals;return separator===POINT&&(separator="\\"+separator),precision===NULL&&(precision=numberFormat.decimals),0===precision?INTEGER_REGEXP:(that._separator!==separator&&(that._separator=separator,that._floatRegExp=new RegExp("^(-)?(((\\d+("+separator+"\\d*)?)|("+separator+"\\d*)))?$")),that._floatRegExp)},_paste:function(e){var that=this,element=e.target,value=element.value;setTimeout(function(){that._parse(element.value)===NULL&&that._update(value)})},_option:function(option,value){var that=this,options=that.options;return value===undefined?options[option]:(value=that._parse(value),void((value||"step"!==option)&&(options[option]=value,that.element.attr("aria-value"+option,value).attr(option,value))))},_spin:function(step,timeout){var that=this;timeout=timeout||500,clearTimeout(that._spinning),that._spinning=setTimeout(function(){that._spin(step,50)},timeout),that._step(step)},_step:function(step){var that=this,element=that.element,value=that._parse(element.val())||0;activeElement()!=element[0]&&that._focusin(),value+=that.options.step*step,that._update(that._adjust(value)),that._typing=!1,that.trigger(SPIN)},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_toggleText:function(toggle){var that=this;that._text.toggle(toggle),that.element.toggle(!toggle)},_parse:function(value,culture){return parse(value,this._culture(culture),this.options.format)},_update:function(value){var isNotNull,that=this,options=that.options,format=options.format,decimals=options.decimals,culture=that._culture(),numberFormat=that._format(format,culture);decimals===NULL&&(decimals=numberFormat.decimals),value=that._parse(value,culture),isNotNull=value!==NULL,isNotNull&&(value=parseFloat(round(value,decimals))),that._value=value=that._adjust(value),that._placeholder(kendo.toString(value,format,culture)),isNotNull?(value=value.toString(),-1!==value.indexOf("e")&&(value=round(+value,decimals)),value=value.replace(POINT,numberFormat[POINT])):value="",that.element.val(value).attr("aria-valuenow",value)},_placeholder:function(value){this._text.val(value),placeholderSupported||value||this._text.val(this.options.placeholder)},_wrapper:function(){var wrapper,that=this,element=that.element,DOMElement=element[0];wrapper=element.parents(".k-numerictextbox"),wrapper.is("span.k-numerictextbox")||(wrapper=element.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),wrapper=wrapper.wrap("<span/>").parent()),wrapper[0].style.cssText=DOMElement.style.cssText,DOMElement.style.width="",that.wrapper=wrapper.addClass("k-widget k-numerictextbox").addClass(DOMElement.className).css("display",""),that._inputWrapper=$(wrapper[0].firstChild)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){setTimeout(function(){that.value(element[0].value),that.max(that._initialOptions.max),that.min(that._initialOptions.min)})},that._form=form.on("reset",that._resetHandler))}});ui.plugin(NumericTextBox)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function resolveRules(element){var name,resolvers=kendo.ui.validator.ruleResolvers||{},rules={};for(name in resolvers)$.extend(!0,rules,resolvers[name].resolve(element));return rules}function decode(value){return value.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function numberOfDecimalDigits(value){return value=(value+"").split("."),value.length>1?value[1].length:0}function parseHtml(text){return $($.parseHTML?$.parseHTML(text):text)}function searchForMessageContainer(elements,fieldName){for(var element,attr,containers=$(),idx=0,length=elements.length;length>idx;idx++)element=elements[idx],invalidMsgRegExp.test(element.className)&&(attr=element.getAttribute(kendo.attr("for")),attr===fieldName&&(containers=containers.add(element)));return containers}var kendo=window.kendo,Widget=kendo.ui.Widget,NS=".kendoValidator",INVALIDMSG="k-invalid-msg",invalidMsgRegExp=new RegExp(INVALIDMSG,"i"),INVALIDINPUT="k-invalid",VALIDINPUT="k-valid",emailRegExp=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,urlRegExp=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,INPUTSELECTOR=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",CHECKBOXSELECTOR=":checkbox:not([disabled],[readonly])",NUMBERINPUTSELECTOR="[type=number],[type=range]",BLUR="blur",NAME="name",FORM="form",NOVALIDATE="novalidate",proxy=$.proxy,patternMatcher=function(value,pattern){return"string"==typeof pattern&&(pattern=new RegExp("^(?:"+pattern+")$")),pattern.test(value)},matcher=function(input,selector,pattern){var value=input.val();return input.filter(selector).length&&""!==value?patternMatcher(value,pattern):!0},hasAttribute=function(input,name){return input.length?null!=input[0].attributes[name]:!1};kendo.ui.validator||(kendo.ui.validator={rules:{},messages:{}});var Validator=Widget.extend({init:function(element,options){var that=this,resolved=resolveRules(element),validateAttributeSelector="["+kendo.attr("validate")+"!=false]";options=options||{},options.rules=$.extend({},kendo.ui.validator.rules,resolved.rules,options.rules),options.messages=$.extend({},kendo.ui.validator.messages,resolved.messages,options.messages),Widget.fn.init.call(that,element,options),that._errorTemplate=kendo.template(that.options.errorTemplate),that.element.is(FORM)&&that.element.attr(NOVALIDATE,NOVALIDATE),that._inputSelector=INPUTSELECTOR+validateAttributeSelector,that._checkboxSelector=CHECKBOXSELECTOR+validateAttributeSelector,that._errors={},that._attachEvents(),that._isValidated=!1},events:["validate","change"],options:{name:"Validator",errorTemplate:'<span class="k-widget k-tooltip k-tooltip-validation"><span class="k-icon k-warning"> </span> #=message#</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date"},rules:{required:function(input){var checkbox=input.filter("[type=checkbox]").length&&!input.is(":checked"),value=input.val();return!(hasAttribute(input,"required")&&(""===value||!value||checkbox))},pattern:function(input){return input.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length&&""!==input.val()?patternMatcher(input.val(),input.attr("pattern")):!0},min:function(input){if(input.filter(NUMBERINPUTSELECTOR+",["+kendo.attr("type")+"=number]").filter("[min]").length&&""!==input.val()){var min=parseFloat(input.attr("min"))||0,val=kendo.parseFloat(input.val());return val>=min}return!0},max:function(input){if(input.filter(NUMBERINPUTSELECTOR+",["+kendo.attr("type")+"=number]").filter("[max]").length&&""!==input.val()){var max=parseFloat(input.attr("max"))||0,val=kendo.parseFloat(input.val());return max>=val}return!0},step:function(input){if(input.filter(NUMBERINPUTSELECTOR+",["+kendo.attr("type")+"=number]").filter("[step]").length&&""!==input.val()){var raise,min=parseFloat(input.attr("min"))||0,step=parseFloat(input.attr("step"))||1,val=parseFloat(input.val()),decimals=numberOfDecimalDigits(step);return decimals?(raise=Math.pow(10,decimals),Math.floor((val-min)*raise)%(step*raise)/Math.pow(100,decimals)===0):(val-min)%step===0}return!0},email:function(input){return matcher(input,"[type=email],["+kendo.attr("type")+"=email]",emailRegExp)},url:function(input){return matcher(input,"[type=url],["+kendo.attr("type")+"=url]",urlRegExp)},date:function(input){return input.filter("[type^=date],["+kendo.attr("type")+"=date]").length&&""!==input.val()?null!==kendo.parseDate(input.val(),input.attr(kendo.attr("format"))):!0}},validateOnBlur:!0},destroy:function(){Widget.fn.destroy.call(this),this.element.off(NS)},value:function(){return this._isValidated?0===this.errors().length:!1},_submit:function(e){return this.validate()?!0:(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(element){var state=this.value();this.validateInput(element),this.value()!==state&&this.trigger("change")},_attachEvents:function(){var that=this;that.element.is(FORM)&&that.element.on("submit"+NS,proxy(that._submit,that)),that.options.validateOnBlur&&(that.element.is(INPUTSELECTOR)?(that.element.on(BLUR+NS,function(){that._checkElement(that.element)}),that.element.is(CHECKBOXSELECTOR)&&that.element.on("click"+NS,function(){that._checkElement(that.element)})):(that.element.on(BLUR+NS,that._inputSelector,function(){that._checkElement($(this))}),that.element.on("click"+NS,that._checkboxSelector,function(){that._checkElement($(this))})))},validate:function(){var inputs,idx,length,result=!1,isValid=this.value();if(this._errors={},this.element.is(INPUTSELECTOR))result=this.validateInput(this.element);else{var invalid=!1;for(inputs=this.element.find(this._inputSelector),idx=0,length=inputs.length;length>idx;idx++)this.validateInput(inputs.eq(idx))||(invalid=!0);result=!invalid}return this.trigger("validate",{valid:result}),isValid!==result&&this.trigger("change"),result},validateInput:function(input){input=$(input),this._isValidated=!0;var messageText,that=this,template=that._errorTemplate,result=that._checkValidity(input),valid=result.valid,className="."+INVALIDMSG,fieldName=input.attr(NAME)||"",lbl=that._findMessageContainer(fieldName).add(input.next(className).filter(function(){var element=$(this);return element.filter("["+kendo.attr("for")+"]").length?element.attr(kendo.attr("for"))===fieldName:!0})).hide();if(input.removeAttr("aria-invalid"),valid)delete that._errors[fieldName];else{messageText=that._extractMessage(input,result.key),that._errors[fieldName]=messageText;var messageLabel=parseHtml(template({message:decode(messageText)})),lblId=lbl.attr("id");that._decorateMessageContainer(messageLabel,fieldName),lblId&&messageLabel.attr("id",lblId),lbl.replaceWith(messageLabel).length||messageLabel.insertAfter(input),messageLabel.show(),input.attr("aria-invalid",!0)}return input.toggleClass(INVALIDINPUT,!valid),input.toggleClass(VALIDINPUT,valid),valid},hideMessages:function(){var that=this,className="."+INVALIDMSG,element=that.element;element.is(INPUTSELECTOR)?element.next(className).hide():element.find(className).hide()},_findMessageContainer:function(fieldName){for(var name,locators=kendo.ui.validator.messageLocators,containers=$(),idx=0,length=this.element.length;length>idx;idx++)containers=containers.add(searchForMessageContainer(this.element[idx].getElementsByTagName("*"),fieldName));for(name in locators)containers=containers.add(locators[name].locate(this.element,fieldName));return containers},_decorateMessageContainer:function(container,fieldName){var name,locators=kendo.ui.validator.messageLocators;container.addClass(INVALIDMSG).attr(kendo.attr("for"),fieldName||"");for(name in locators)locators[name].decorate(container,fieldName);container.attr("role","alert")},_extractMessage:function(input,ruleKey){var that=this,customMessage=that.options.messages[ruleKey],fieldName=input.attr(NAME);return customMessage=kendo.isFunction(customMessage)?customMessage(input):customMessage,kendo.format(input.attr(kendo.attr(ruleKey+"-msg"))||input.attr("validationMessage")||input.attr("title")||customMessage||"",fieldName,input.attr(ruleKey))},_checkValidity:function(input){var rule,rules=this.options.rules;for(rule in rules)if(!rules[rule].call(this,input))return{valid:!1,key:rule};return{valid:!0}},errors:function(){var error,results=[],errors=this._errors;for(error in errors)results.push(errors[error]);return results}});kendo.ui.plugin(Validator)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function dataSourceBinding(bindingName,fieldName,setter){return Binder.extend({init:function(widget,bindings,options){var that=this;Binder.fn.init.call(that,widget.element[0],bindings,options),that.widget=widget,that._dataBinding=proxy(that.dataBinding,that),that._dataBound=proxy(that.dataBound,that),that._itemChange=proxy(that.itemChange,that)},itemChange:function(e){bindElement(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[bindingName]._parents()))},dataBinding:function(e){var idx,length,widget=this.widget,items=e.removedItems||widget.items();for(idx=0,length=items.length;length>idx;idx++)unbindElementTree(items[idx],!1)},_ns:function(ns){ns=ns||kendo.ui;var all=[kendo.ui,kendo.dataviz.ui,kendo.mobile.ui];return all.splice($.inArray(ns,all),1),all.unshift(ns),kendo.rolesFromNamespaces(all)},dataBound:function(e){var idx,length,view,parents,widget=this.widget,items=e.addedItems||widget.items(),dataSource=widget[fieldName],hds=kendo.data.HierarchicalDataSource;if(!(hds&&dataSource instanceof hds)&&items.length)for(view=e.addedDataItems||dataSource.flatView(),parents=this.bindings[bindingName]._parents(),idx=0,length=view.length;length>idx;idx++)bindElement(items[idx],view[idx],this._ns(e.ns),[view[idx]].concat(parents))},refresh:function(e){var source,select,multiselect,that=this,widget=that.widget;e=e||{},e.action||(that.destroy(),widget.bind("dataBinding",that._dataBinding),widget.bind("dataBound",that._dataBound),widget.bind("itemChange",that._itemChange),source=that.bindings[bindingName].get(),widget[fieldName]instanceof kendo.data.DataSource&&widget[fieldName]!=source&&(source instanceof kendo.data.DataSource?widget[setter](source):source&&source._dataSource?widget[setter](source._dataSource):(widget[fieldName].data(source),select=kendo.ui.Select&&widget instanceof kendo.ui.Select,multiselect=kendo.ui.MultiSelect&&widget instanceof kendo.ui.MultiSelect,that.bindings.value&&(select||multiselect)&&widget.value(retrievePrimitiveValues(that.bindings.value.get(),widget.options.dataValueField)))))},destroy:function(){var widget=this.widget;widget.unbind("dataBinding",this._dataBinding),widget.unbind("dataBound",this._dataBound),widget.unbind("itemChange",this._itemChange)}})}function bindingTargetForRole(element,roles){var widget=kendo.initWidget(element,{},roles);return widget?new WidgetBindingTarget(widget):void 0}function parseBindings(bind){var idx,length,token,colonIndex,key,value,tokens,result={};for(tokens=bind.match(keyValueRegExp),idx=0,length=tokens.length;length>idx;idx++)token=tokens[idx],colonIndex=token.indexOf(":"),key=token.substring(0,colonIndex),value=token.substring(colonIndex+1),"{"==value.charAt(0)&&(value=parseBindings(value)),result[key]=value;return result}function createBindings(bindings,source,type){var binding,result={};for(binding in bindings)result[binding]=new type(source,bindings[binding]);return result}function bindElement(element,source,roles,parents){var idx,bindings,target,role=element.getAttribute("data-"+kendo.ns+"role"),bind=element.getAttribute("data-"+kendo.ns+"bind"),children=element.children,childrenCopy=[],deep=!0,options={};if(parents=parents||[source],(role||bind)&&unbindElement(element,!1),role&&(target=bindingTargetForRole(element,roles)),bind&&(bind=parseBindings(bind.replace(whiteSpaceRegExp,"")),target||(options=kendo.parseOptions(element,{textField:"",valueField:"",template:"",valueUpdate:CHANGE,valuePrimitive:!1,autoBind:!0}),options.roles=roles,target=new BindingTarget(element,options)),target.source=source,bindings=createBindings(bind,parents,Binding),options.template&&(bindings.template=new TemplateBinding(parents,"",options.template)),bindings.click&&(bind.events=bind.events||{},bind.events.click=bind.click,bindings.click.destroy(),delete bindings.click),bindings.source&&(deep=!1),bind.attr&&(bindings.attr=createBindings(bind.attr,parents,Binding)),bind.style&&(bindings.style=createBindings(bind.style,parents,Binding)),bind.events&&(bindings.events=createBindings(bind.events,parents,EventBinding)),bind.css&&(bindings.css=createBindings(bind.css,parents,Binding)),target.bind(bindings)),target&&(element.kendoBindingTarget=target),deep&&children){for(idx=0;idx<children.length;idx++)childrenCopy[idx]=children[idx];for(idx=0;idx<childrenCopy.length;idx++)bindElement(childrenCopy[idx],source,roles,parents)}}function bind(dom,object){var idx,length,node,roles=kendo.rolesFromNamespaces([].slice.call(arguments,2));for(object=kendo.observable(object),dom=$(dom),idx=0,length=dom.length;length>idx;idx++)node=dom[idx],1===node.nodeType&&bindElement(node,object,roles)}function unbindElement(element,destroyWidget){var bindingTarget=element.kendoBindingTarget;if(bindingTarget&&(bindingTarget.destroy(),deleteExpando?delete element.kendoBindingTarget:element.removeAttribute?element.removeAttribute("kendoBindingTarget"):element.kendoBindingTarget=null),destroyWidget){var widget=kendo.widgetInstance($(element));widget&&typeof widget.destroy===FUNCTION&&widget.destroy()}}function unbindElementTree(element,destroyWidgets){unbindElement(element,destroyWidgets),unbindElementChildren(element,destroyWidgets)}function unbindElementChildren(element,destroyWidgets){var children=element.children;if(children)for(var idx=0,length=children.length;length>idx;idx++)unbindElementTree(children[idx],destroyWidgets)}function unbind(dom){var idx,length;for(dom=$(dom),idx=0,length=dom.length;length>idx;idx++)unbindElementTree(dom[idx],!1)}function notify(widget,namespace){var element=widget.element,bindingTarget=element[0].kendoBindingTarget;bindingTarget&&bind(element,bindingTarget.source,namespace)}function retrievePrimitiveValues(value,valueField){var length,item,values=[],idx=0;if(!valueField)return value;if(value instanceof ObservableArray){for(length=value.length;length>idx;idx++)item=value[idx],values[idx]=item.get?item.get(valueField):item[valueField];value=values}else value instanceof ObservableObject&&(value=value.get(valueField));return value}var kendo=window.kendo,Observable=kendo.Observable,ObservableObject=kendo.data.ObservableObject,ObservableArray=kendo.data.ObservableArray,toString={}.toString,binders={},Class=kendo.Class,proxy=$.proxy,VALUE="value",SOURCE="source",EVENTS="events",CHECKED="checked",CSS="css",deleteExpando=!0,FUNCTION="function",CHANGE="change";!function(){var a=document.createElement("a");try{delete a.test}catch(e){deleteExpando=!1}}();var Binding=Observable.extend({init:function(parents,path){var that=this;Observable.fn.init.call(that),that.source=parents[0],that.parents=parents,that.path=path,that.dependencies={},that.dependencies[path]=!0,that.observable=that.source instanceof Observable,that._access=function(e){that.dependencies[e.field]=!0},that.observable&&(that._change=function(e){that.change(e)},that.source.bind(CHANGE,that._change))},_parents:function(){var parents=this.parents,value=this.get();if(value&&"function"==typeof value.parent){var parent=value.parent();$.inArray(parent,parents)<0&&(parents=[parent].concat(parents))}return parents},change:function(e){var dependency,ch,field=e.field,that=this;if("this"===that.path)that.trigger(CHANGE,e);else for(dependency in that.dependencies)if(0===dependency.indexOf(field)&&(ch=dependency.charAt(field.length),!ch||"."===ch||"["===ch)){that.trigger(CHANGE,e);break}},start:function(source){source.bind("get",this._access)},stop:function(source){source.unbind("get",this._access)},get:function(){var that=this,source=that.source,index=0,path=that.path,result=source;if(!that.observable)return result;for(that.start(that.source),result=source.get(path);result===undefined&&source;)source=that.parents[++index],source instanceof ObservableObject&&(result=source.get(path));if(result===undefined)for(source=that.source;result===undefined&&source;)source=source.parent(),source instanceof ObservableObject&&(result=source.get(path));return"function"==typeof result&&(index=path.lastIndexOf("."),index>0&&(source=source.get(path.substring(0,index))),that.start(source),result=source!==that.source?result.call(source,that.source):result.call(source),that.stop(source)),source&&source!==that.source&&(that.currentSource=source,source.unbind(CHANGE,that._change).bind(CHANGE,that._change)),that.stop(that.source),result},set:function(value){var source=this.currentSource||this.source,field=kendo.getter(this.path)(source);"function"==typeof field?source!==this.source?field.call(source,this.source,value):field.call(source,value):source.set(this.path,value)},destroy:function(){this.observable&&(this.source.unbind(CHANGE,this._change),this.currentSource&&this.currentSource.unbind(CHANGE,this._change)),this.unbind()}}),EventBinding=Binding.extend({get:function(){var handler,source=this.source,path=this.path,index=0;for(handler=source.get(path);!handler&&source;)source=this.parents[++index],source instanceof ObservableObject&&(handler=source.get(path));return proxy(handler,source)}}),TemplateBinding=Binding.extend({init:function(source,path,template){var that=this;Binding.fn.init.call(that,source,path),that.template=template},render:function(value){var html;return this.start(this.source),html=kendo.render(this.template,value),this.stop(this.source),html}}),Binder=Class.extend({init:function(element,bindings,options){this.element=element,this.bindings=bindings,this.options=options},bind:function(binding,attribute){var that=this;binding=attribute?binding[attribute]:binding,binding.bind(CHANGE,function(e){that.refresh(attribute||e)}),that.refresh(attribute)},destroy:function(){}}),TypedBinder=Binder.extend({dataType:function(){var dataType=this.element.getAttribute("data-type")||this.element.type||"text";return dataType.toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(value,dataType){return"date"==dataType?value=kendo.parseDate(value,"yyyy-MM-dd"):"datetime-local"==dataType?value=kendo.parseDate(value,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==dataType?value=kendo.parseFloat(value):"boolean"==dataType&&(value=value.toLowerCase(),value=null!==kendo.parseFloat(value)?Boolean(kendo.parseFloat(value)):"true"===value.toLowerCase()),value}});binders.attr=Binder.extend({refresh:function(key){this.element.setAttribute(key,this.bindings.attr[key].get())}}),binders.css=Binder.extend({init:function(element,bindings,options){Binder.fn.init.call(this,element,bindings,options),this.classes={}},refresh:function(className){var element=$(this.element),binding=this.bindings.css[className],hasClass=this.classes[className]=binding.get();hasClass?element.addClass(className):element.removeClass(className)}}),binders.style=Binder.extend({refresh:function(key){this.element.style[key]=this.bindings.style[key].get()||""}}),binders.enabled=Binder.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),binders.readonly=Binder.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),binders.disabled=Binder.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),binders.events=Binder.extend({init:function(element,bindings,options){Binder.fn.init.call(this,element,bindings,options),this.handlers={}},refresh:function(key){var element=$(this.element),binding=this.bindings.events[key],handler=this.handlers[key];handler&&element.off(key,handler),handler=this.handlers[key]=binding.get(),element.on(key,binding.source,handler)},destroy:function(){var handler,element=$(this.element);for(handler in this.handlers)element.off(handler,this.handlers[handler])}}),binders.text=Binder.extend({refresh:function(){var text=this.bindings.text.get(),dataFormat=this.element.getAttribute("data-format")||"";null==text&&(text=""),$(this.element).text(kendo.toString(text,dataFormat))}}),binders.visible=Binder.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),binders.invisible=Binder.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),binders.html=Binder.extend({refresh:function(){
this.element.innerHTML=this.bindings.html.get()}}),binders.value=TypedBinder.extend({init:function(element,bindings,options){TypedBinder.fn.init.call(this,element,bindings,options),this._change=proxy(this.change,this),this.eventName=options.valueUpdate||CHANGE,$(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=CHANGE,this.bindings[VALUE].set(this.parsedValue()),this._initChange=!1},refresh:function(){if(!this._initChange){var value=this.bindings[VALUE].get();null==value&&(value="");var type=this.dataType();"date"==type?value=kendo.toString(value,"yyyy-MM-dd"):"datetime-local"==type&&(value=kendo.toString(value,"yyyy-MM-ddTHH:mm:ss")),this.element.value=value}this._initChange=!1},destroy:function(){$(this.element).off(this.eventName,this._change)}}),binders.source=Binder.extend({init:function(element,bindings,options){Binder.fn.init.call(this,element,bindings,options);var source=this.bindings.source.get();source instanceof kendo.data.DataSource&&options.autoBind!==!1&&source.fetch()},refresh:function(e){var that=this,source=that.bindings.source.get();source instanceof ObservableArray||source instanceof kendo.data.DataSource?(e=e||{},"add"==e.action?that.add(e.index,e.items):"remove"==e.action?that.remove(e.index,e.items):"itemchange"!=e.action&&that.render()):that.render()},container:function(){var element=this.element;return"table"==element.nodeName.toLowerCase()&&(element.tBodies[0]||element.appendChild(document.createElement("tbody")),element=element.tBodies[0]),element},template:function(){var options=this.options,template=options.template,nodeName=this.container().nodeName.toLowerCase();return template||(template="select"==nodeName?options.valueField||options.textField?kendo.format('<option value="#:{0}#">#:{1}#</option>',options.valueField||options.textField,options.textField||options.valueField):"<option>#:data#</option>":"tbody"==nodeName?"<tr><td>#:data#</td></tr>":"ul"==nodeName||"ol"==nodeName?"<li>#:data#</li>":"#:data#",template=kendo.template(template)),template},add:function(index,items){var parents,idx,length,child,element=this.container(),clone=element.cloneNode(!1),reference=element.children[index];if($(clone).html(kendo.render(this.template(),items)),clone.children.length)for(parents=this.bindings.source._parents(),idx=0,length=items.length;length>idx;idx++)child=clone.children[0],element.insertBefore(child,reference||null),bindElement(child,items[idx],this.options.roles,[items[idx]].concat(parents))},remove:function(index,items){var idx,element=this.container();for(idx=0;idx<items.length;idx++){var child=element.children[index];unbindElementTree(child,!0),element.removeChild(child)}},render:function(){var parents,idx,length,source=this.bindings.source.get(),element=this.container(),template=this.template();if(source instanceof kendo.data.DataSource&&(source=source.view()),source instanceof ObservableArray||"[object Array]"===toString.call(source)||(source=[source]),this.bindings.template){if(unbindElementChildren(element,!0),$(element).html(this.bindings.template.render(source)),element.children.length)for(parents=this.bindings.source._parents(),idx=0,length=source.length;length>idx;idx++)bindElement(element.children[idx],source[idx],this.options.roles,[source[idx]].concat(parents))}else $(element).html(kendo.render(template,source))}}),binders.input={checked:TypedBinder.extend({init:function(element,bindings,options){TypedBinder.fn.init.call(this,element,bindings,options),this._change=proxy(this.change,this),$(this.element).change(this._change)},change:function(){var element=this.element,value=this.value();if("radio"==element.type)value=this.parsedValue(),this.bindings[CHECKED].set(value);else if("checkbox"==element.type){var index,source=this.bindings[CHECKED].get();if(source instanceof ObservableArray){if(value=this.parsedValue(),value instanceof Date){for(var i=0;i<source.length;i++)if(source[i]instanceof Date&&+source[i]===+value){index=i;break}}else index=source.indexOf(value);index>-1?source.splice(index,1):source.push(value)}else this.bindings[CHECKED].set(value)}},refresh:function(){var value=this.bindings[CHECKED].get(),source=value,type=this.dataType(),element=this.element;if("checkbox"==element.type)if(source instanceof ObservableArray){var index=-1;if(value=this.parsedValue(),value instanceof Date){for(var i=0;i<source.length;i++)if(source[i]instanceof Date&&+source[i]===+value){index=i;break}}else index=source.indexOf(value);element.checked=index>=0}else element.checked=source;else"radio"==element.type&&null!=value&&("date"==type?value=kendo.toString(value,"yyyy-MM-dd"):"datetime-local"==type&&(value=kendo.toString(value,"yyyy-MM-ddTHH:mm:ss")),element.value===value.toString()?element.checked=!0:element.checked=!1)},value:function(){var element=this.element,value=element.value;return"checkbox"==element.type&&(value=element.checked),value},destroy:function(){$(this.element).off(CHANGE,this._change)}})},binders.select={source:binders.source.extend({refresh:function(e){var that=this,source=that.bindings.source.get();if(source instanceof ObservableArray||source instanceof kendo.data.DataSource){if(e=e||{},"add"==e.action)that.add(e.index,e.items);else if("remove"==e.action)that.remove(e.index,e.items);else if(("itemchange"==e.action||e.action===undefined)&&(that.render(),that.bindings.value&&that.bindings.value)){var val=retrievePrimitiveValues(that.bindings.value.get(),$(that.element).data("valueField"));null===val?that.element.selectedIndex=-1:that.element.value=val}}else that.render()}}),value:TypedBinder.extend({init:function(target,bindings,options){TypedBinder.fn.init.call(this,target,bindings,options),this._change=proxy(this.change,this),$(this.element).change(this._change)},parsedValue:function(){var value,option,idx,length,dataType=this.dataType(),values=[];for(idx=0,length=this.element.options.length;length>idx;idx++)option=this.element.options[idx],option.selected&&(value=option.attributes.value,value=value&&value.specified?option.value:option.text,values.push(this._parseValue(value,dataType)));return values},change:function(){var source,option,valueIndex,value,idx,length,values=[],element=this.element,field=this.options.valueField||this.options.textField,valuePrimitive=this.options.valuePrimitive;for(idx=0,length=element.options.length;length>idx;idx++)option=element.options[idx],option.selected&&(value=option.attributes.value,value=value&&value.specified?option.value:option.text,values.push(this._parseValue(value,this.dataType())));if(field)for(source=this.bindings.source.get(),source instanceof kendo.data.DataSource&&(source=source.view()),valueIndex=0;valueIndex<values.length;valueIndex++)for(idx=0,length=source.length;length>idx;idx++){var sourceValue=this._parseValue(source[idx].get(field),this.dataType()),match=String(sourceValue)===values[valueIndex];if(match){values[valueIndex]=source[idx];break}}value=this.bindings[VALUE].get(),value instanceof ObservableArray?value.splice.apply(value,[0,value.length].concat(values)):this.bindings[VALUE].set(valuePrimitive||!(value instanceof ObservableObject||null===value||value===undefined)&&field?values[0].get(field):values[0])},refresh:function(){var optionIndex,optionValue,element=this.element,options=element.options,value=this.bindings[VALUE].get(),values=value,field=this.options.valueField||this.options.textField,found=!1,type=this.dataType();values instanceof ObservableArray||(values=new ObservableArray([value])),element.selectedIndex=-1;for(var valueIndex=0;valueIndex<values.length;valueIndex++)for(value=values[valueIndex],field&&value instanceof ObservableObject&&(value=value.get(field)),"date"==type?value=kendo.toString(values[valueIndex],"yyyy-MM-dd"):"datetime-local"==type&&(value=kendo.toString(values[valueIndex],"yyyy-MM-ddTHH:mm:ss")),optionIndex=0;optionIndex<options.length;optionIndex++)optionValue=options[optionIndex].value,""===optionValue&&""!==value&&(optionValue=options[optionIndex].text),null!=value&&optionValue==value.toString()&&(options[optionIndex].selected=!0,found=!0)},destroy:function(){$(this.element).off(CHANGE,this._change)}})},binders.widget={events:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget,this.handlers={}},refresh:function(key){var binding=this.bindings.events[key],handler=this.handlers[key];handler&&this.widget.unbind(key,handler),handler=binding.get(),this.handlers[key]=function(e){e.data=binding.source,handler(e),e.data===binding.source&&delete e.data},this.widget.bind(key,this.handlers[key])},destroy:function(){var handler;for(handler in this.handlers)this.widget.unbind(handler,this.handlers[handler])}}),checked:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget,this._change=proxy(this.change,this),this.widget.bind(CHANGE,this._change)},change:function(){this.bindings[CHECKED].set(this.value())},refresh:function(){this.widget.check(this.bindings[CHECKED].get()===!0)},value:function(){var element=this.element,value=element.value;return("on"==value||"off"==value)&&(value=element.checked),value},destroy:function(){this.widget.unbind(CHANGE,this._change)}}),visible:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget},refresh:function(){var visible=this.bindings.visible.get();this.widget.wrapper[0].style.display=visible?"":"none"}}),invisible:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget},refresh:function(){var invisible=this.bindings.invisible.get();this.widget.wrapper[0].style.display=invisible?"none":""}}),enabled:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:dataSourceBinding("source","dataSource","setDataSource"),value:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget,this._change=$.proxy(this.change,this),this.widget.first(CHANGE,this._change);var value=this.bindings.value.get();this._valueIsObservableObject=!options.valuePrimitive&&(null==value||value instanceof ObservableObject),this._valueIsObservableArray=value instanceof ObservableArray,this._initChange=!1},change:function(){var valueIndex,valueLength,sourceItem,sourceValue,idx,length,source,value=this.widget.value(),field=this.options.dataValueField||this.options.dataTextField,isArray="[object Array]"===toString.call(value),isObservableObject=this._valueIsObservableObject,values=[];if(this._initChange=!0,field)if(this.bindings.source&&(source=this.bindings.source.get()),""===value&&(isObservableObject||this.options.valuePrimitive))value=null;else{for((!source||source instanceof kendo.data.DataSource)&&(source=this.widget.dataSource.flatView()),isArray&&(valueLength=value.length,values=value.slice(0)),idx=0,length=source.length;length>idx;idx++)if(sourceItem=source[idx],sourceValue=sourceItem.get(field),isArray){for(valueIndex=0;valueLength>valueIndex;valueIndex++)if(sourceValue==values[valueIndex]){values[valueIndex]=sourceItem;break}}else if(sourceValue==value){value=isObservableObject?sourceItem:sourceValue;break}values[0]&&(value=this._valueIsObservableArray?values:isObservableObject||!field?values[0]:values[0].get(field))}this.bindings.value.set(value),this._initChange=!1},refresh:function(){if(!this._initChange){var length,widget=this.widget,options=widget.options,textField=options.dataTextField,valueField=options.dataValueField||textField,value=this.bindings.value.get(),text=options.text||"",idx=0,values=[];if(value===undefined&&(value=null),valueField)if(value instanceof ObservableArray){for(length=value.length;length>idx;idx++)values[idx]=value[idx].get(valueField);value=values}else value instanceof ObservableObject&&(text=value.get(textField),value=value.get(valueField));options.autoBind!==!1||options.cascadeFrom||!widget.listView||widget.listView.isBound()?widget.value(value):(textField!==valueField||text||(text=value),text||!value&&0!==value||!options.valuePrimitive?widget._preselect(value,text):widget.value(value))}this._initChange=!1},destroy:function(){this.widget.unbind(CHANGE,this._change)}}),gantt:{dependencies:dataSourceBinding("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:Binder.extend({init:function(widget,bindings,options){Binder.fn.init.call(this,widget.element[0],bindings,options),this.widget=widget,this._change=$.proxy(this.change,this),this.widget.first(CHANGE,this._change),this._initChange=!1},change:function(){var that=this,oldValues=that.bindings[VALUE].get(),valuePrimitive=that.options.valuePrimitive,newValues=valuePrimitive?that.widget.value():that.widget.dataItems(),field=this.options.dataValueField||this.options.dataTextField;if(newValues=newValues.slice(0),that._initChange=!0,oldValues instanceof ObservableArray){for(var removeIndex,newValue,found,remove=[],newLength=newValues.length,i=0,j=0,old=oldValues[i],same=!1;old!==undefined;){for(found=!1,j=0;newLength>j;j++)if(valuePrimitive?same=newValues[j]==old:(newValue=newValues[j],newValue=newValue.get?newValue.get(field):newValue,same=newValue==(old.get?old.get(field):old)),same){newValues.splice(j,1),newLength-=1,found=!0;break}found?i+=1:(remove.push(old),arraySplice(oldValues,i,1),removeIndex=i),old=oldValues[i]}arraySplice(oldValues,oldValues.length,0,newValues),remove.length&&oldValues.trigger("change",{action:"remove",items:remove,index:removeIndex}),newValues.length&&oldValues.trigger("change",{action:"add",items:newValues,index:oldValues.length-1})}else that.bindings[VALUE].set(newValues);that._initChange=!1},refresh:function(){if(!this._initChange){var length,selectedValue,options=this.options,widget=this.widget,field=options.dataValueField||options.dataTextField,value=this.bindings.value.get(),data=value,idx=0,values=[];if(value===undefined&&(value=null),field)if(value instanceof ObservableArray){for(length=value.length;length>idx;idx++)selectedValue=value[idx],values[idx]=selectedValue.get?selectedValue.get(field):selectedValue;value=values}else value instanceof ObservableObject&&(value=value.get(field));options.autoBind!==!1||options.valuePrimitive===!0||widget.listView.isBound()?widget.value(value):widget._preselect(data,value)}},destroy:function(){this.widget.unbind(CHANGE,this._change)}})},scheduler:{source:dataSourceBinding("source","dataSource","setDataSource").extend({dataBound:function(e){var idx,length,data,parents,widget=this.widget,elements=e.addedItems||widget.items();if(elements.length)for(data=e.addedDataItems||widget.dataItems(),parents=this.bindings.source._parents(),idx=0,length=data.length;length>idx;idx++)bindElement(elements[idx],data[idx],this._ns(e.ns),[data[idx]].concat(parents))}})}};var arraySplice=function(arr,idx,remove,add){add=add||[],remove=remove||0;var index,addLength=add.length,oldLength=arr.length,shifted=[].slice.call(arr,idx+remove),shiftedLength=shifted.length;if(addLength){for(addLength=idx+addLength,index=0;addLength>idx;idx++)arr[idx]=add[index],index++;arr.length=addLength}else if(remove)for(arr.length=idx,remove+=idx;remove>idx;)delete arr[--remove];if(shiftedLength){for(shiftedLength=idx+shiftedLength,index=0;shiftedLength>idx;idx++)arr[idx]=shifted[index],index++;arr.length=shiftedLength}for(idx=arr.length;oldLength>idx;)delete arr[idx],idx++},BindingTarget=Class.extend({init:function(target,options){this.target=target,this.options=options,this.toDestroy=[]},bind:function(bindings){var key,hasValue,hasSource,hasEvents,hasChecked,hasCss,widgetBinding=this instanceof WidgetBindingTarget,specificBinders=this.binders();for(key in bindings)key==VALUE?hasValue=!0:key==SOURCE?hasSource=!0:key!=EVENTS||widgetBinding?key==CHECKED?hasChecked=!0:key==CSS?hasCss=!0:this.applyBinding(key,bindings,specificBinders):hasEvents=!0;hasSource&&this.applyBinding(SOURCE,bindings,specificBinders),hasValue&&this.applyBinding(VALUE,bindings,specificBinders),hasChecked&&this.applyBinding(CHECKED,bindings,specificBinders),hasEvents&&!widgetBinding&&this.applyBinding(EVENTS,bindings,specificBinders),hasCss&&!widgetBinding&&this.applyBinding(CSS,bindings,specificBinders)},binders:function(){return binders[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(name,bindings,specificBinders){var attribute,binder=specificBinders[name]||binders[name],toDestroy=this.toDestroy,binding=bindings[name];if(binder)if(binder=new binder(this.target,bindings,this.options),toDestroy.push(binder),binding instanceof Binding)binder.bind(binding),toDestroy.push(binding);else for(attribute in binding)binder.bind(binding,attribute),toDestroy.push(binding[attribute]);else if("template"!==name)throw new Error("The "+name+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var idx,length,toDestroy=this.toDestroy;for(idx=0,length=toDestroy.length;length>idx;idx++)toDestroy[idx].destroy()}}),WidgetBindingTarget=BindingTarget.extend({binders:function(){return binders.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(name,bindings,specificBinders){var attribute,binder=specificBinders[name]||binders.widget[name],toDestroy=this.toDestroy,binding=bindings[name];if(!binder)throw new Error("The "+name+" binding is not supported by the "+this.target.options.name+" widget");if(binder=new binder(this.target,bindings,this.target.options),toDestroy.push(binder),binding instanceof Binding)binder.bind(binding),toDestroy.push(binding);else for(attribute in binding)binder.bind(binding,attribute),toDestroy.push(binding[attribute])}}),keyValueRegExp=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,whiteSpaceRegExp=/\s/g;kendo.unbind=unbind,kendo.bind=bind,kendo.data.binders=binders,kendo.data.Binder=Binder,kendo.notify=notify,kendo.observable=function(object){return object instanceof ObservableObject||(object=new ObservableObject(object)),object},kendo.observableHierarchy=function(array){function recursiveRead(data){var i,children;for(i=0;i<data.length;i++)data[i]._initChildren(),children=data[i].children,children.fetch(),data[i].items=children.data(),recursiveRead(data[i].items)}var dataSource=kendo.data.HierarchicalDataSource.create(array);return dataSource.fetch(),recursiveRead(dataSource.data()),dataSource._data._dataSource=dataSource,dataSource._data}}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function fieldType(field){return field=null!=field?field:"",field.type||$.type(field)||"string"}function convertToValueBinding(container){container.find(":input:not(:button, ["+kendo.attr("role")+"=upload], ["+kendo.attr("skip")+"], [type=file]), select").each(function(){var bindAttr=kendo.attr("bind"),binding=this.getAttribute(bindAttr)||"",bindingName="checkbox"===this.type||"radio"===this.type?"checked:":"value:",fieldName=this.name;-1===binding.indexOf(bindingName)&&fieldName&&(binding+=(binding.length?",":"")+bindingName+fieldName,$(this).attr(bindAttr,binding))})}function createAttributes(options){var ruleName,rule,field=(options.model.fields||options.model)[options.field],type=fieldType(field),validation=field?field.validation:{},DATATYPE=kendo.attr("type"),BINDING=kendo.attr("bind"),attr={name:options.field};for(ruleName in validation)rule=validation[ruleName],inArray(ruleName,specialRules)>=0?attr[DATATYPE]=ruleName:isFunction(rule)||(attr[ruleName]=isPlainObject(rule)?rule.value||ruleName:rule),attr[kendo.attr(ruleName+"-msg")]=rule.message;return inArray(type,specialRules)>=0&&(attr[DATATYPE]=type),attr[BINDING]=("boolean"===type?"checked:":"value:")+options.field,attr}function convertItems(items){var idx,length,item,value,text,result;if(items&&items.length)for(result=[],idx=0,length=items.length;length>idx;idx++)item=items[idx],text=item.text||item.value||item,value=null==item.value?item.text||item:item.value,result[idx]={text:text,value:value};return result}function addValidationRules(modelField,rules){var rule,descriptor,validation=modelField?modelField.validation||{}:{};for(rule in validation)descriptor=validation[rule],isPlainObject(descriptor)&&descriptor.value&&(descriptor=descriptor.value),isFunction(descriptor)&&(rules[rule]=descriptor)}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,extend=$.extend,oldIE=kendo.support.browser.msie&&kendo.support.browser.version<9,isFunction=kendo.isFunction,isPlainObject=$.isPlainObject,inArray=$.inArray,nameSpecialCharRegExp=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,ERRORTEMPLATE='<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>#=message#<div class="k-callout k-callout-n"></div></div>',CHANGE="change",specialRules=["url","email","number","date","boolean"],editors={number:function(container,options){var attr=createAttributes(options);$('<input type="text"/>').attr(attr).appendTo(container).kendoNumericTextBox({format:options.format}),$("<span "+kendo.attr("for")+'="'+options.field+'" class="k-invalid-msg"/>').hide().appendTo(container)},date:function(container,options){var attr=createAttributes(options),format=options.format;format&&(format=kendo._extractFormat(format)),attr[kendo.attr("format")]=format,$('<input type="text"/>').attr(attr).appendTo(container).kendoDatePicker({format:options.format}),$("<span "+kendo.attr("for")+'="'+options.field+'" class="k-invalid-msg"/>').hide().appendTo(container)},string:function(container,options){var attr=createAttributes(options);$('<input type="text" class="k-input k-textbox"/>').attr(attr).appendTo(container)},"boolean":function(container,options){var attr=createAttributes(options);$('<input type="checkbox" />').attr(attr).appendTo(container)},values:function(container,options){var attr=createAttributes(options),items=kendo.stringify(convertItems(options.values));$("<select "+kendo.attr("text-field")+'="text"'+kendo.attr("value-field")+'="value"'+kendo.attr("source")+"='"+(items?items.replace(/\'/g,"&apos;"):items)+"'"+kendo.attr("role")+'="dropdownlist"/>').attr(attr).appendTo(container),$("<span "+kendo.attr("for")+'="'+options.field+'" class="k-invalid-msg"/>').hide().appendTo(container)}},Editable=Widget.extend({init:function(element,options){var that=this;options.target&&(options.$angular=options.target.options.$angular),Widget.fn.init.call(that,element,options),that._validateProxy=$.proxy(that._validate,that),that.refresh()},events:[CHANGE],options:{name:"Editable",editors:editors,clearContainer:!0,errorTemplate:ERRORTEMPLATE},editor:function(field,modelField){var that=this,editors=that.options.editors,isObject=isPlainObject(field),fieldName=isObject?field.field:field,model=that.options.model||{},isValuesEditor=isObject&&field.values,type=isValuesEditor?"values":fieldType(modelField),isCustomEditor=isObject&&field.editor,editor=isCustomEditor?field.editor:editors[type],container=that.element.find("["+kendo.attr("container-for")+"="+fieldName.replace(nameSpecialCharRegExp,"\\$1")+"]");editor=editor?editor:editors.string,isCustomEditor&&"string"==typeof field.editor&&(editor=function(container){container.append(field.editor)}),container=container.length?container:that.element,editor(container,extend(!0,{},isObject?field:{field:fieldName},{model:model}))},_validate:function(e){var input,that=this,value=e.value,preventChangeTrigger=that._validationEventInProgress,values={},bindAttribute=kendo.attr("bind"),fieldName=e.field.replace(nameSpecialCharRegExp,"\\$1"),bindingRegex=new RegExp("(value|checked)\\s*:\\s*"+fieldName+"\\s*(,|$)");values[e.field]=e.value,input=$(":input["+bindAttribute+'*="'+fieldName+'"]',that.element).filter("["+kendo.attr("validate")+"!='false']").filter(function(){return bindingRegex.test($(this).attr(bindAttribute))}),input.length>1&&(input=input.filter(function(){var element=$(this);return!element.is(":radio")||element.val()==value}));try{that._validationEventInProgress=!0,(!that.validatable.validateInput(input)||!preventChangeTrigger&&that.trigger(CHANGE,{values:values}))&&e.preventDefault()}finally{that._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var that=this;that.angular("cleanup",function(){return{elements:that.element}}),Widget.fn.destroy.call(that),that.options.model.unbind("set",that._validateProxy),kendo.unbind(that.element),that.validatable&&that.validatable.destroy(),kendo.destroy(that.element),that.element.removeData("kendoValidator")},refresh:function(){var idx,length,field,isObject,fieldName,modelField,modelFields,that=this,fields=that.options.fields||[],container=that.options.clearContainer?that.element.empty():that.element,model=that.options.model||{},rules={};for($.isArray(fields)||(fields=[fields]),idx=0,length=fields.length;length>idx;idx++)field=fields[idx],isObject=isPlainObject(field),fieldName=isObject?field.field:field,modelField=(model.fields||model)[fieldName],addValidationRules(modelField,rules),that.editor(field,modelField);if(that.options.target&&that.angular("compile",function(){return{elements:container,data:container.map(function(){return{dataItem:model}})}}),!length){modelFields=model.fields||model;for(fieldName in modelFields)addValidationRules(modelFields[fieldName],rules)}convertToValueBinding(container),that.validatable&&that.validatable.destroy(),kendo.bind(container,that.options.model),that.options.model.unbind("set",that._validateProxy),that.options.model.bind("set",that._validateProxy),that.validatable=new kendo.ui.Validator(container,{validateOnBlur:!1,errorTemplate:that.options.errorTemplate||undefined,rules:rules});var focusable=container.find(":kendoFocusable").eq(0).focus();oldIE&&focusable.focus()}});ui.plugin(Editable)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function contains(parent,child){try{return $.contains(parent,child)||parent==child}catch(e){return!1}}function numericCssPropery(element,property){return parseInt(element.css(property),10)||0}function within(value,range){return Math.min(Math.max(value,range.min),range.max)}function containerBoundaries(container,element){var offset=getOffset(container),minX=offset.left+numericCssPropery(container,"borderLeftWidth")+numericCssPropery(container,"paddingLeft"),minY=offset.top+numericCssPropery(container,"borderTopWidth")+numericCssPropery(container,"paddingTop"),maxX=minX+container.width()-element.outerWidth(!0),maxY=minY+container.height()-element.outerHeight(!0);return{x:{min:minX,max:maxX},y:{min:minY,max:maxY}}}function checkTarget(target,targets,areas){for(var theTarget,theFilter,i=0,targetLen=targets&&targets.length,areaLen=areas&&areas.length;target&&target.parentNode;){for(i=0;targetLen>i;i++)if(theTarget=targets[i],theTarget.element[0]===target)return{target:theTarget,targetElement:target};for(i=0;areaLen>i;i++)if(theFilter=areas[i],$.contains(theFilter.element[0],target)&&support.matchesSelector.call(target,theFilter.options.filter))return{target:theFilter,targetElement:target};target=target.parentNode}return undefined}function destroyDroppable(collection,widget){var i,groupName=widget.options.group,droppables=collection[groupName];if(Widget.fn.destroy.call(widget),droppables.length>1){for(i=0;i<droppables.length;i++)if(droppables[i]==widget){droppables.splice(i,1);break}}else droppables.length=0,delete collection[groupName]}function scrollableViewPort(element){var offset,top,left,root=scrollableRoot()[0];return element[0]===root?(top=root.scrollTop,left=root.scrollLeft,{top:top,left:left,bottom:top+$window.height(),right:left+$window.width()}):(offset=element.offset(),offset.bottom=offset.top+element.height(),offset.right=offset.left+element.width(),offset)}function scrollableRoot(){return $(kendo.support.browser.chrome?document.body:document.documentElement)}function findScrollableParent(element){var root=scrollableRoot();if(!element||element===document.body||element===document.documentElement)return root;for(var parent=$(element)[0];!kendo.isScrollable(parent)&&parent!==document.body;)parent=parent.parentNode;return parent===document.body?root:$(parent)}function autoScrollVelocity(mouseX,mouseY,rect){var velocity={x:0,y:0},AUTO_SCROLL_AREA=50;return mouseX-rect.left<AUTO_SCROLL_AREA?velocity.x=-(AUTO_SCROLL_AREA-(mouseX-rect.left)):rect.right-mouseX<AUTO_SCROLL_AREA&&(velocity.x=AUTO_SCROLL_AREA-(rect.right-mouseX)),mouseY-rect.top<AUTO_SCROLL_AREA?velocity.y=-(AUTO_SCROLL_AREA-(mouseY-rect.top)):rect.bottom-mouseY<AUTO_SCROLL_AREA&&(velocity.y=AUTO_SCROLL_AREA-(rect.bottom-mouseY)),velocity}var lastDropTarget,translate,kendo=window.kendo,support=kendo.support,document=window.document,$window=$(window),Class=kendo.Class,Widget=kendo.ui.Widget,Observable=kendo.Observable,UserEvents=kendo.UserEvents,proxy=$.proxy,extend=$.extend,getOffset=kendo.getOffset,draggables={},dropTargets={},dropAreas={},elementUnderCursor=kendo.elementUnderCursor,KEYUP="keyup",CHANGE="change",DRAGSTART="dragstart",HOLD="hold",DRAG="drag",DRAGEND="dragend",DRAGCANCEL="dragcancel",HINTDESTROYED="hintDestroyed",DRAGENTER="dragenter",DRAGLEAVE="dragleave",DROP="drop",TapCapture=Observable.extend({init:function(element,options){var that=this,domElement=element[0];that.capture=!1,domElement.addEventListener?($.each(kendo.eventMap.down.split(" "),function(){domElement.addEventListener(this,proxy(that._press,that),!0)}),$.each(kendo.eventMap.up.split(" "),function(){domElement.addEventListener(this,proxy(that._release,that),!0)})):($.each(kendo.eventMap.down.split(" "),function(){domElement.attachEvent(this,proxy(that._press,that))}),$.each(kendo.eventMap.up.split(" "),function(){domElement.attachEvent(this,proxy(that._release,that))})),Observable.fn.init.call(that),that.bind(["press","release"],options||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var that=this;that.trigger("press"),that.capture&&e.preventDefault()},_release:function(e){var that=this;that.trigger("release"),that.capture&&(e.preventDefault(),that.cancelCapture())}}),PaneDimension=Observable.extend({init:function(options){var that=this;Observable.fn.init.call(that),that.forcedEnabled=!1,$.extend(that,options),that.scale=1,that.horizontal?(that.measure="offsetWidth",that.scrollSize="scrollWidth",that.axis="x"):(that.measure="offsetHeight",that.scrollSize="scrollHeight",that.axis="y")},makeVirtual:function(){$.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(min,max){(this._virtualMin!==min||this._virtualMax!==max)&&(this._virtualMin=min,this._virtualMax=max,this.update())},outOfBounds:function(offset){return offset>this.max||offset<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(scale){this.scale=scale},update:function(silent){var that=this,total=that.virtual?that._virtualMax:that.getTotal(),scaledTotal=total*that.scale,size=that.getSize();(0!==total||that.forcedEnabled)&&(that.max=that.virtual?-that._virtualMin:0,that.size=size,that.total=scaledTotal,that.min=Math.min(that.max,size-scaledTotal),that.minScale=size/total,that.centerOffset=(scaledTotal-size)/2,that.enabled=that.forcedEnabled||scaledTotal>size,silent||that.trigger(CHANGE,that))}}),PaneDimensions=Observable.extend({init:function(options){var that=this;Observable.fn.init.call(that),that.x=new PaneDimension(extend({horizontal:!0},options)),
that.y=new PaneDimension(extend({horizontal:!1},options)),that.container=options.container,that.forcedMinScale=options.minScale,that.maxScale=options.maxScale||100,that.bind(CHANGE,options)},rescale:function(newScale){this.x.rescale(newScale),this.y.rescale(newScale),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var that=this;that.x.update(),that.y.update(),that.enabled=that.x.enabled||that.y.enabled,that.minScale=that.forcedMinScale||Math.min(that.x.minScale,that.y.minScale),that.fitScale=Math.max(that.x.minScale,that.y.minScale),that.trigger(CHANGE)}}),PaneAxis=Observable.extend({init:function(options){var that=this;extend(that,options),Observable.fn.init.call(that)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(delta){var that=this,dimension=that.dimension,axis=that.axis,movable=that.movable,position=movable[axis]+delta;dimension.enabled&&((position<dimension.min&&0>delta||position>dimension.max&&delta>0)&&(delta*=that.resistance),movable.translateAxis(axis,delta),that.trigger(CHANGE,that))}}),Pane=Class.extend({init:function(options){var x,y,resistance,movable,that=this;extend(that,{elastic:!0},options),resistance=that.elastic?.5:0,movable=that.movable,that.x=x=new PaneAxis({axis:"x",dimension:that.dimensions.x,resistance:resistance,movable:movable}),that.y=y=new PaneAxis({axis:"y",dimension:that.dimensions.y,resistance:resistance,movable:movable}),that.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(e){that.gesture=e,that.offset=that.dimensions.container.offset()},press:function(e){$(e.event.target).closest("a").is("[data-navigate-on-press=true]")&&e.sender.cancel()},gesturechange:function(e){var coordinates,previousGesture=that.gesture,previousCenter=previousGesture.center,center=e.center,scaleDelta=e.distance/previousGesture.distance,minScale=that.dimensions.minScale,maxScale=that.dimensions.maxScale;movable.scale<=minScale&&1>scaleDelta&&(scaleDelta+=.8*(1-scaleDelta)),movable.scale*scaleDelta>=maxScale&&(scaleDelta=maxScale/movable.scale);var offsetX=movable.x+that.offset.left,offsetY=movable.y+that.offset.top;coordinates={x:(offsetX-previousCenter.x)*scaleDelta+center.x-offsetX,y:(offsetY-previousCenter.y)*scaleDelta+center.y-offsetY},movable.scaleWith(scaleDelta),x.dragMove(coordinates.x),y.dragMove(coordinates.y),that.dimensions.rescale(movable.scale),that.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(x.dimension.enabled||y.dimension.enabled?(x.dragMove(e.x.delta),y.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),TRANSFORM_STYLE=support.transitions.prefix+"Transform";translate=support.hasHW3D?function(x,y,scale){return"translate3d("+x+"px,"+y+"px,0) scale("+scale+")"}:function(x,y,scale){return"translate("+x+"px,"+y+"px) scale("+scale+")"};var Movable=Observable.extend({init:function(element){var that=this;Observable.fn.init.call(that),that.element=$(element),that.element[0].style.webkitTransformOrigin="left top",that.x=0,that.y=0,that.scale=1,that._saveCoordinates(translate(that.x,that.y,that.scale))},translateAxis:function(axis,by){this[axis]+=by,this.refresh()},scaleTo:function(scale){this.scale=scale,this.refresh()},scaleWith:function(scaleDelta){this.scale*=scaleDelta,this.refresh()},translate:function(coordinates){this.x+=coordinates.x,this.y+=coordinates.y,this.refresh()},moveAxis:function(axis,value){this[axis]=value,this.refresh()},moveTo:function(coordinates){extend(this,coordinates),this.refresh()},refresh:function(){var newCoordinates,that=this,x=that.x,y=that.y;that.round&&(x=Math.round(x),y=Math.round(y)),newCoordinates=translate(x,y,that.scale),newCoordinates!=that.coordinates&&(kendo.support.browser.msie&&kendo.support.browser.version<10?(that.element[0].style.position="absolute",that.element[0].style.left=that.x+"px",that.element[0].style.top=that.y+"px"):that.element[0].style[TRANSFORM_STYLE]=newCoordinates,that._saveCoordinates(newCoordinates),that.trigger(CHANGE))},_saveCoordinates:function(coordinates){this.coordinates=coordinates}}),DropTarget=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options);var group=that.options.group;group in dropTargets?dropTargets[group].push(that):dropTargets[group]=[that]},events:[DRAGENTER,DRAGLEAVE,DROP],options:{name:"DropTarget",group:"default"},destroy:function(){destroyDroppable(dropTargets,this)},_trigger:function(eventName,e){var that=this,draggable=draggables[that.options.group];return draggable?that.trigger(eventName,extend({},e.event,{draggable:draggable,dropTarget:e.dropTarget})):void 0},_over:function(e){this._trigger(DRAGENTER,e)},_out:function(e){this._trigger(DRAGLEAVE,e)},_drop:function(e){var that=this,draggable=draggables[that.options.group];draggable&&(draggable.dropped=!that._trigger(DROP,e))}});DropTarget.destroyGroup=function(groupName){var i,group=dropTargets[groupName]||dropAreas[groupName];if(group){for(i=0;i<group.length;i++)Widget.fn.destroy.call(group[i]);group.length=0,delete dropTargets[groupName],delete dropAreas[groupName]}},DropTarget._cache=dropTargets;var DropTargetArea=DropTarget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options);var group=that.options.group;group in dropAreas?dropAreas[group].push(that):dropAreas[group]=[that]},destroy:function(){destroyDroppable(dropAreas,this)},options:{name:"DropTargetArea",group:"default",filter:null}}),Draggable=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),that._activated=!1,that.userEvents=new UserEvents(that.element,{global:!0,allowSelection:!0,filter:that.options.filter,threshold:that.options.distance,start:proxy(that._start,that),hold:proxy(that._hold,that),move:proxy(that._drag,that),end:proxy(that._end,that),cancel:proxy(that._cancel,that),select:proxy(that._select,that)}),that._afterEndHandler=proxy(that._afterEnd,that),that._captureEscape=proxy(that._captureEscape,that)},events:[HOLD,DRAGSTART,DRAG,DRAGEND,DRAGCANCEL,HINTDESTROYED],options:{name:"Draggable",distance:kendo.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,autoScroll:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){var that=this;e.keyCode===kendo.keys.ESC&&(that._trigger(DRAGCANCEL,{event:e}),that.userEvents.cancel())},_updateHint:function(e){var coordinates,that=this,options=that.options,boundaries=that.boundaries,axis=options.axis,cursorOffset=that.options.cursorOffset;cursorOffset?coordinates={left:e.x.location+cursorOffset.left,top:e.y.location+cursorOffset.top}:(that.hintOffset.left+=e.x.delta,that.hintOffset.top+=e.y.delta,coordinates=$.extend({},that.hintOffset)),boundaries&&(coordinates.top=within(coordinates.top,boundaries.y),coordinates.left=within(coordinates.left,boundaries.x)),"x"===axis?delete coordinates.top:"y"===axis&&delete coordinates.left,that.hint.css(coordinates)},_shouldIgnoreTarget:function(target){var ignoreSelector=this.options.ignore;return ignoreSelector&&$(target).is(ignoreSelector)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(e){var that=this,options=that.options,container=options.container,hint=options.hint;if(this._shouldIgnoreTarget(e.touch.initialTouch)||options.holdToDrag&&!that._activated)return void that.userEvents.cancel();if(that.currentTarget=e.target,that.currentTargetOffset=getOffset(that.currentTarget),hint){that.hint&&that.hint.stop(!0,!0).remove(),that.hint=kendo.isFunction(hint)?$(hint.call(that,that.currentTarget)):hint;var offset=getOffset(that.currentTarget);that.hintOffset=offset,that.hint.css({position:"absolute",zIndex:2e4,left:offset.left,top:offset.top}).appendTo(document.body),that.angular("compile",function(){that.hint.removeAttr("ng-repeat");for(var scopeTarget=$(e.target);!scopeTarget.data("$$kendoScope")&&scopeTarget.length;)scopeTarget=scopeTarget.parent();return{elements:that.hint.get(),scopeFrom:scopeTarget.data("$$kendoScope")}})}draggables[options.group]=that,that.dropped=!1,container&&(that.boundaries=containerBoundaries(container,that.hint)),$(document).on(KEYUP,that._captureEscape),that._trigger(DRAGSTART,e)&&(that.userEvents.cancel(),that._afterEnd()),that.userEvents.capture()},_hold:function(e){this.currentTarget=e.target,this._trigger(HOLD,e)?this.userEvents.cancel():this._activated=!0},_drag:function(e){var that=this;e.preventDefault();var cursorElement=this._elementUnderCursor(e);if(that._withDropTarget(cursorElement,function(target,targetElement){if(!target)return void(lastDropTarget&&(lastDropTarget._trigger(DRAGLEAVE,extend(e,{dropTarget:$(lastDropTarget.targetElement)})),lastDropTarget=null));if(lastDropTarget){if(targetElement===lastDropTarget.targetElement)return;lastDropTarget._trigger(DRAGLEAVE,extend(e,{dropTarget:$(lastDropTarget.targetElement)}))}target._trigger(DRAGENTER,extend(e,{dropTarget:$(targetElement)})),lastDropTarget=extend(target,{targetElement:targetElement})}),that._trigger(DRAG,extend(e,{dropTarget:lastDropTarget,elementUnderCursor:cursorElement})),this.options.autoScroll&&(this._cursorElement!==cursorElement&&(this._scrollableParent=findScrollableParent(cursorElement),this._cursorElement=cursorElement),this._scrollableParent[0])){var velocity=autoScrollVelocity(e.x.location,e.y.location,scrollableViewPort(this._scrollableParent));this._scrollCompenstation=$.extend({},this.hintOffset),this._scrollVelocity=velocity,0===velocity.y&&0===velocity.x?(clearInterval(this._scrollInterval),this._scrollInterval=null):this._scrollInterval||(this._scrollInterval=setInterval($.proxy(this,"_autoScroll"),50))}that.hint&&that._updateHint(e)},_autoScroll:function(){var parent=this._scrollableParent[0],velocity=this._scrollVelocity,compensation=this._scrollCompenstation;if(parent){var yIsScrollable,xIsScrollable,isRootNode=parent===scrollableRoot()[0];isRootNode?(yIsScrollable=document.body.scrollHeight>$window.height(),xIsScrollable=document.body.scrollWidth>$window.width()):(yIsScrollable=parent.offsetHeight<=parent.scrollHeight,xIsScrollable=parent.offsetWidth<=parent.scrollWidth);var yDelta=parent.scrollTop+velocity.y,yInBounds=yIsScrollable&&yDelta>0&&yDelta<parent.scrollHeight,xDelta=parent.scrollLeft+velocity.x,xInBounds=xIsScrollable&&xDelta>0&&xDelta<parent.scrollWidth;yInBounds&&(parent.scrollTop+=velocity.y),xInBounds&&(parent.scrollLeft+=velocity.x),isRootNode&&(xInBounds||yInBounds)&&(yInBounds&&(compensation.top+=velocity.y),xInBounds&&(compensation.left+=velocity.x),this.hint.css(compensation))}},_end:function(e){this._withDropTarget(this._elementUnderCursor(e),function(target,targetElement){target&&(target._drop(extend({},e,{dropTarget:$(targetElement)})),lastDropTarget=null)}),this._cancel(this._trigger(DRAGEND,e))},_cancel:function(isDefaultPrevented){var that=this;that._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),that._activated=!1,that.hint&&!that.dropped?setTimeout(function(){that.hint.stop(!0,!0),isDefaultPrevented?that._afterEndHandler():that.hint.animate(that.currentTargetOffset,"fast",that._afterEndHandler)},0):that._afterEnd()},_trigger:function(eventName,e){var that=this;return that.trigger(eventName,extend({},e.event,{x:e.x,y:e.y,currentTarget:that.currentTarget,initialTarget:e.touch?e.touch.initialTouch:null,dropTarget:e.dropTarget,elementUnderCursor:e.elementUnderCursor}))},_elementUnderCursor:function(e){var target=elementUnderCursor(e),hint=this.hint;return hint&&contains(hint[0],target)&&(hint.hide(),target=elementUnderCursor(e),target||(target=elementUnderCursor(e)),hint.show()),target},_withDropTarget:function(element,callback){var result,group=this.options.group,targets=dropTargets[group],areas=dropAreas[group];(targets&&targets.length||areas&&areas.length)&&(result=checkTarget(element,targets,areas),result?callback(result.target,result.targetElement):callback())},destroy:function(){var that=this;Widget.fn.destroy.call(that),that._afterEnd(),that.userEvents.destroy(),this._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),that.currentTarget=null},_afterEnd:function(){var that=this;that.hint&&that.hint.remove(),delete draggables[that.options.group],that.trigger("destroy"),that.trigger(HINTDESTROYED),$(document).off(KEYUP,that._captureEscape)}});kendo.ui.plugin(DropTarget),kendo.ui.plugin(DropTargetArea),kendo.ui.plugin(Draggable),kendo.TapCapture=TapCapture,kendo.containerBoundaries=containerBoundaries,extend(kendo.ui,{Pane:Pane,PaneDimensions:PaneDimensions,Movable:Movable}),kendo.ui.Draggable.utils={autoScrollVelocity:autoScrollVelocity,scrollableViewPort:scrollableViewPort,findScrollableParent:findScrollableParent}}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function defined(x){return"undefined"!=typeof x}function constrain(value,low,high){return Math.max(Math.min(parseInt(value,10),high===1/0?high:parseInt(high,10)),parseInt(low,10))}function sizingAction(actionId,callback){return function(){var that=this,wrapper=that.wrapper,style=wrapper[0].style,options=that.options;return options.isMaximized||options.isMinimized?that:(that.restoreOptions={width:style.width,height:style.height},wrapper.children(KWINDOWRESIZEHANDLES).hide().end().children(KWINDOWTITLEBAR).find(MINIMIZE_MAXIMIZE).parent().hide().eq(0).before(templates.action({name:"Restore"})),callback.call(that),"maximize"==actionId?that.wrapper.children(KWINDOWTITLEBAR).find(PIN_UNPIN).parent().hide():that.wrapper.children(KWINDOWTITLEBAR).find(PIN_UNPIN).parent().show(),that)}}function executableScript(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function WindowResizing(wnd){var that=this;that.owner=wnd,that._draggable=new Draggable(wnd.wrapper,{filter:">"+KWINDOWRESIZEHANDLES,group:wnd.wrapper.id+"-resizing",dragstart:proxy(that.dragstart,that),drag:proxy(that.drag,that),dragend:proxy(that.dragend,that)}),that._draggable.userEvents.bind("press",proxy(that.addOverlay,that)),that._draggable.userEvents.bind("release",proxy(that.removeOverlay,that))}function WindowDragging(wnd,dragHandle){var that=this;that.owner=wnd,that._draggable=new Draggable(wnd.wrapper,{filter:dragHandle,group:wnd.wrapper.id+"-moving",dragstart:proxy(that.dragstart,that),drag:proxy(that.drag,that),dragend:proxy(that.dragend,that),dragcancel:proxy(that.dragcancel,that)}),that._draggable.userEvents.stopPropagation=!1}var templates,kendo=window.kendo,Widget=kendo.ui.Widget,Draggable=kendo.ui.Draggable,isPlainObject=$.isPlainObject,activeElement=kendo._activeElement,proxy=$.proxy,extend=$.extend,each=$.each,template=kendo.template,BODY="body",NS=".kendoWindow",KWINDOW=".k-window",KWINDOWTITLE=".k-window-title",KWINDOWTITLEBAR=KWINDOWTITLE+"bar",KWINDOWCONTENT=".k-window-content",KWINDOWRESIZEHANDLES=".k-resize-handle",KOVERLAY=".k-overlay",KCONTENTFRAME="k-content-frame",LOADING="k-loading",KHOVERSTATE="k-state-hover",KFOCUSEDSTATE="k-state-focused",MAXIMIZEDSTATE="k-window-maximized",VISIBLE=":visible",HIDDEN="hidden",CURSOR="cursor",OPEN="open",ACTIVATE="activate",DEACTIVATE="deactivate",CLOSE="close",REFRESH="refresh",RESIZE="resize",RESIZEEND="resizeEnd",DRAGSTART="dragstart",DRAGEND="dragend",ERROR="error",OVERFLOW="overflow",ZINDEX="zIndex",MINIMIZE_MAXIMIZE=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",KPIN=".k-i-pin",KUNPIN=".k-i-unpin",PIN_UNPIN=KPIN+","+KUNPIN,TITLEBAR_BUTTONS=".k-window-titlebar .k-window-action",REFRESHICON=".k-window-titlebar .k-i-refresh",isLocalUrl=kendo.isLocalUrl,Window=Widget.extend({init:function(element,options){var wrapper,visibility,display,position,content,windowContent,id,that=this,offset={},isVisible=!1,suppressActions=options&&options.actions&&!options.actions.length;Widget.fn.init.call(that,element,options),options=that.options,position=options.position,element=that.element,content=options.content,suppressActions&&(options.actions=[]),that.appendTo=$(options.appendTo),content&&!isPlainObject(content)&&(content=options.content={url:content}),element.find("script").filter(executableScript).remove(),element.parent().is(that.appendTo)||position.top!==undefined&&position.left!==undefined||(element.is(VISIBLE)?(offset=element.offset(),isVisible=!0):(visibility=element.css("visibility"),display=element.css("display"),element.css({visibility:HIDDEN,display:""}),offset=element.offset(),element.css({visibility:visibility,display:display})),position.top===undefined&&(position.top=offset.top),position.left===undefined&&(position.left=offset.left)),defined(options.visible)&&null!==options.visible||(options.visible=element.is(VISIBLE)),wrapper=that.wrapper=element.closest(KWINDOW),element.is(".k-content")&&wrapper[0]||(element.addClass("k-window-content k-content"),that._createWindow(element,options),wrapper=that.wrapper=element.closest(KWINDOW),that._dimensions()),that._position(),options.pinned&&that.pin(!0),content&&that.refresh(content),options.visible&&that.toFront(),windowContent=wrapper.children(KWINDOWCONTENT),that._tabindex(windowContent),options.visible&&options.modal&&that._overlay(wrapper.is(VISIBLE)).css({opacity:.5}),wrapper.on("mouseenter"+NS,TITLEBAR_BUTTONS,proxy(that._buttonEnter,that)).on("mouseleave"+NS,TITLEBAR_BUTTONS,proxy(that._buttonLeave,that)).on("click"+NS,"> "+TITLEBAR_BUTTONS,proxy(that._windowActionHandler,that)),windowContent.on("keydown"+NS,proxy(that._keydown,that)).on("focus"+NS,proxy(that._focus,that)).on("blur"+NS,proxy(that._blur,that)),this._resizable(),this._draggable(),id=element.attr("id"),id&&(id+="_wnd_title",wrapper.children(KWINDOWTITLEBAR).children(KWINDOWTITLE).attr("id",id),windowContent.attr({role:"dialog","aria-labelledby":id})),wrapper.add(wrapper.children(".k-resize-handle,"+KWINDOWTITLEBAR)).on("mousedown"+NS,proxy(that.toFront,that)),that.touchScroller=kendo.touchScroller(element),that._resizeHandler=proxy(that._onDocumentResize,that),that._marker=kendo.guid().substring(0,8),$(window).on("resize"+NS+that._marker,that._resizeHandler),options.visible&&(that.trigger(OPEN),that.trigger(ACTIVATE)),kendo.notify(that)},_buttonEnter:function(e){$(e.currentTarget).addClass(KHOVERSTATE)},_buttonLeave:function(e){$(e.currentTarget).removeClass(KHOVERSTATE)},_focus:function(){this.wrapper.addClass(KFOCUSEDSTATE)},_blur:function(){this.wrapper.removeClass(KFOCUSEDSTATE)},_dimensions:function(){var wrapper=this.wrapper,options=this.options,width=options.width,height=options.height,maxHeight=options.maxHeight,dimensions=["minWidth","minHeight","maxWidth","maxHeight"];this.title(options.title);for(var i=0;i<dimensions.length;i++){var value=options[dimensions[i]];value&&value!=1/0&&wrapper.css(dimensions[i],value)}maxHeight&&maxHeight!=1/0&&this.element.css("maxHeight",maxHeight),width&&wrapper.width(width.toString().indexOf("%")>0?width:constrain(width,options.minWidth,options.maxWidth)),height&&wrapper.height(height.toString().indexOf("%")>0?height:constrain(height,options.minHeight,options.maxHeight)),options.visible||wrapper.hide()},_position:function(){var wrapper=this.wrapper,position=this.options.position;0===position.top&&(position.top=position.top.toString()),0===position.left&&(position.left=position.left.toString()),wrapper.css({top:position.top||"",left:position.left||""})},_animationOptions:function(id){var animation=this.options.animation,basicAnimation={open:{effects:{}},close:{hide:!0,effects:{}}};return animation&&animation[id]||basicAnimation[id]},_resize:function(){kendo.resize(this.element.children())},_resizable:function(){var resizable=this.options.resizable,wrapper=this.wrapper;this.resizing&&(wrapper.off("dblclick"+NS).children(KWINDOWRESIZEHANDLES).remove(),this.resizing.destroy(),this.resizing=null),resizable&&(wrapper.on("dblclick"+NS,KWINDOWTITLEBAR,proxy(function(e){$(e.target).closest(".k-window-action").length||this.toggleMaximization()},this)),each("n e s w se sw ne nw".split(" "),function(index,handler){wrapper.append(templates.resizeHandle(handler))}),this.resizing=new WindowResizing(this)),wrapper=null},_draggable:function(){var draggable=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),draggable&&(this.dragging=new WindowDragging(this,draggable.dragHandle||KWINDOWTITLEBAR))},_actions:function(){var actions=this.options.actions,titlebar=this.wrapper.children(KWINDOWTITLEBAR),container=titlebar.find(".k-window-actions");actions=$.map(actions,function(action){return{name:action}}),container.html(kendo.render(templates.action,actions))},setOptions:function(options){Widget.fn.setOptions.call(this,options);var scrollable=this.options.scrollable!==!1;if(this.restore(),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions(),"undefined"!=typeof options.modal){var visible=this.options.visible!==!1;this._overlay(options.modal&&visible)}this.element.css(OVERFLOW,scrollable?"":"hidden")},events:[OPEN,ACTIVATE,DEACTIVATE,CLOSE,REFRESH,RESIZE,RESIZEEND,DRAGSTART,DRAGEND,ERROR],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,scrollable:!0,position:{},content:null,visible:null,height:null,width:null,appendTo:"body"},_closable:function(){return $.inArray("close",$.map(this.options.actions,function(x){return x.toLowerCase()}))>-1},_keydown:function(e){var offset,handled,newWidth,newHeight,w,h,that=this,options=that.options,keys=kendo.keys,keyCode=e.keyCode,wrapper=that.wrapper,distance=10,isMaximized=that.options.isMaximized;e.target!=e.currentTarget||that._closing||(keyCode==keys.ESC&&that._closable()&&that._close(!1),!options.draggable||e.ctrlKey||isMaximized||(offset=kendo.getOffset(wrapper),keyCode==keys.UP?handled=wrapper.css("top",offset.top-distance):keyCode==keys.DOWN?handled=wrapper.css("top",offset.top+distance):keyCode==keys.LEFT?handled=wrapper.css("left",offset.left-distance):keyCode==keys.RIGHT&&(handled=wrapper.css("left",offset.left+distance))),options.resizable&&e.ctrlKey&&!isMaximized&&(keyCode==keys.UP?(handled=!0,newHeight=wrapper.height()-distance):keyCode==keys.DOWN&&(handled=!0,newHeight=wrapper.height()+distance),keyCode==keys.LEFT?(handled=!0,newWidth=wrapper.width()-distance):keyCode==keys.RIGHT&&(handled=!0,newWidth=wrapper.width()+distance),handled&&(w=constrain(newWidth,options.minWidth,options.maxWidth),h=constrain(newHeight,options.minHeight,options.maxHeight),isNaN(w)||(wrapper.width(w),that.options.width=w+"px"),isNaN(h)||(wrapper.height(h),that.options.height=h+"px"),that.resize())),handled&&e.preventDefault())},_overlay:function(visible){var overlay=this.appendTo.children(KOVERLAY),wrapper=this.wrapper;return overlay.length||(overlay=$("<div class='k-overlay' />")),overlay.insertBefore(wrapper[0]).toggle(visible).css(ZINDEX,parseInt(wrapper.css(ZINDEX),10)-1),overlay},_actionForIcon:function(icon){var iconClass=/\bk-i-\w+\b/.exec(icon[0].className)[0];return{"k-i-close":"_close","k-i-maximize":"maximize","k-i-minimize":"minimize","k-i-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"}[iconClass]},_windowActionHandler:function(e){if(!this._closing){var icon=$(e.target).closest(".k-window-action").find(".k-icon"),action=this._actionForIcon(icon);return action?(e.preventDefault(),this[action](),!1):void 0}},_modals:function(){var that=this,zStack=$(KWINDOW).filter(function(){var dom=$(this),object=that._object(dom),options=object&&object.options;return options&&options.modal&&options.visible&&options.appendTo===that.options.appendTo&&dom.is(VISIBLE)}).sort(function(a,b){return+$(a).css("zIndex")-+$(b).css("zIndex")});return that=null,zStack},_object:function(element){var content=element.children(KWINDOWCONTENT),widget=kendo.widgetInstance(content);return widget instanceof Window?widget:undefined},center:function(){var newTop,newLeft,that=this,position=that.options.position,wrapper=that.wrapper,documentWindow=$(window),scrollTop=0,scrollLeft=0;return that.options.isMaximized?that:(that.options.pinned||(scrollTop=documentWindow.scrollTop(),scrollLeft=documentWindow.scrollLeft()),newLeft=scrollLeft+Math.max(0,(documentWindow.width()-wrapper.width())/2),newTop=scrollTop+Math.max(0,(documentWindow.height()-wrapper.height()-parseInt(wrapper.css("paddingTop"),10))/2),wrapper.css({left:newLeft,top:newTop}),position.top=newTop,position.left=newLeft,that)},title:function(text){var titleBarHeight,that=this,wrapper=that.wrapper,options=that.options,titleBar=wrapper.children(KWINDOWTITLEBAR),title=titleBar.children(KWINDOWTITLE);return arguments.length?(text===!1?(wrapper.addClass("k-window-titleless"),titleBar.remove()):(titleBar.length?title.html(text):(wrapper.prepend(templates.titlebar(options)),that._actions(),titleBar=wrapper.children(KWINDOWTITLEBAR)),titleBarHeight=titleBar.outerHeight(),wrapper.css("padding-top",titleBarHeight),titleBar.css("margin-top",-titleBarHeight)),that.options.title=text,that):title.text()},content:function(html,data){var content=this.wrapper.children(KWINDOWCONTENT),scrollContainer=content.children(".km-scroll-container");return content=scrollContainer[0]?scrollContainer:content,defined(html)?(this.angular("cleanup",function(){return{elements:content.children()}}),kendo.destroy(this.element.children()),content.empty().html(html),this.angular("compile",function(){for(var a=[],i=content.length;--i>=0;)a.push({dataItem:data});return{elements:content.children(),data:a}}),this):content.html()},open:function(){var overlay,that=this,wrapper=that.wrapper,options=that.options,showOptions=this._animationOptions("open"),contentElement=wrapper.children(KWINDOWCONTENT),doc=$(document);if(!that.trigger(OPEN)){if(that._closing&&wrapper.kendoStop(!0,!0),that._closing=!1,that.toFront(),options.autoFocus&&that.element.focus(),options.visible=!0,options.modal){if(overlay=that._overlay(!1),overlay.kendoStop(!0,!0),showOptions.duration&&kendo.effects.Fade){var overlayFx=kendo.fx(overlay).fadeIn();overlayFx.duration(showOptions.duration||0),overlayFx.endValue(.5),overlayFx.play()}else overlay.css("opacity",.5);overlay.show()}wrapper.is(VISIBLE)||(contentElement.css(OVERFLOW,HIDDEN),wrapper.show().kendoStop().kendoAnimate({effects:showOptions.effects,duration:showOptions.duration,complete:proxy(this._activate,this)}))}return options.isMaximized&&(that._documentScrollTop=doc.scrollTop(),that._documentScrollLeft=doc.scrollLeft(),$("html, body").css(OVERFLOW,HIDDEN)),that},_activate:function(){var scrollable=this.options.scrollable!==!1;this.options.autoFocus&&this.element.focus(),this.element.css(OVERFLOW,scrollable?"":"hidden"),this.trigger(ACTIVATE)},_removeOverlay:function(suppressAnimation){var modals=this._modals(),options=this.options,hideOverlay=options.modal&&!modals.length,overlay=options.modal?this._overlay(!0):$(undefined),hideOptions=this._animationOptions("close");if(hideOverlay)if(!suppressAnimation&&hideOptions.duration&&kendo.effects.Fade){var overlayFx=kendo.fx(overlay).fadeOut();overlayFx.duration(hideOptions.duration||0),overlayFx.startValue(.5),overlayFx.play()}else this._overlay(!1).remove();else modals.length&&this._object(modals.last())._overlay(!0)},_close:function(systemTriggered){var that=this,wrapper=that.wrapper,options=that.options,showOptions=this._animationOptions("open"),hideOptions=this._animationOptions("close"),doc=$(document);if(wrapper.is(VISIBLE)&&!that.trigger(CLOSE,{userTriggered:!systemTriggered})){if(that._closing)return;that._closing=!0,options.visible=!1,$(KWINDOW).each(function(i,element){var contentElement=$(element).children(KWINDOWCONTENT);element!=wrapper&&contentElement.find("> ."+KCONTENTFRAME).length>0&&contentElement.children(KOVERLAY).remove()}),this._removeOverlay(),wrapper.kendoStop().kendoAnimate({effects:hideOptions.effects||showOptions.effects,reverse:hideOptions.reverse===!0,duration:hideOptions.duration,complete:proxy(this._deactivate,this)})}that.options.isMaximized&&($("html, body").css(OVERFLOW,""),that._documentScrollTop&&that._documentScrollTop>0&&doc.scrollTop(that._documentScrollTop),that._documentScrollLeft&&that._documentScrollLeft>0&&doc.scrollLeft(that._documentScrollLeft))},_deactivate:function(){var that=this;if(that.wrapper.hide().css("opacity",""),that.trigger(DEACTIVATE),that.options.modal){var lastModal=that._object(that._modals().last());lastModal&&lastModal.toFront()}},close:function(){return this._close(!0),this},_actionable:function(element){return $(element).is(TITLEBAR_BUTTONS+","+TITLEBAR_BUTTONS+" .k-icon,:input,a")},_shouldFocus:function(target){var active=activeElement(),element=this.element;return!(!this.options.autoFocus||$(active).is(element)||this._actionable(target)||element.find(active).length&&element.find(target).length)},toFront:function(e){var that=this,wrapper=that.wrapper,currentWindow=wrapper[0],zIndex=+wrapper.css(ZINDEX),originalZIndex=zIndex,target=e&&e.target||null;if($(KWINDOW).each(function(i,element){var windowObject=$(element),zIndexNew=windowObject.css(ZINDEX),contentElement=windowObject.children(KWINDOWCONTENT);isNaN(zIndexNew)||(zIndex=Math.max(+zIndexNew,zIndex)),element!=currentWindow&&contentElement.find("> ."+KCONTENTFRAME).length>0&&contentElement.append(templates.overlay)}),(!wrapper[0].style.zIndex||zIndex>originalZIndex)&&wrapper.css(ZINDEX,zIndex+2),that.element.find("> .k-overlay").remove(),that._shouldFocus(target)){that.element.focus();var scrollTop=$(window).scrollTop(),windowTop=parseInt(wrapper.position().top,10);windowTop>0&&scrollTop>windowTop&&(scrollTop>0?$(window).scrollTop(windowTop):wrapper.css("top",scrollTop))}return wrapper=null,that},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var that=this,options=that.options,minHeight=options.minHeight,restoreOptions=that.restoreOptions,doc=$(document);return options.isMaximized||options.isMinimized?(minHeight&&minHeight!=1/0&&that.wrapper.css("min-height",minHeight),that.wrapper.css({position:options.pinned?"fixed":"absolute",left:restoreOptions.left,top:restoreOptions.top,width:restoreOptions.width,height:restoreOptions.height}).removeClass(MAXIMIZEDSTATE).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(MINIMIZE_MAXIMIZE).parent().show().end().end().find(PIN_UNPIN).parent().show(),that.options.width=restoreOptions.width,that.options.height=restoreOptions.height,$("html, body").css(OVERFLOW,""),this._documentScrollTop&&this._documentScrollTop>0&&doc.scrollTop(this._documentScrollTop),this._documentScrollLeft&&this._documentScrollLeft>0&&doc.scrollLeft(this._documentScrollLeft),options.isMaximized=options.isMinimized=!1,that.resize(),that):that},maximize:sizingAction("maximize",function(){var that=this,wrapper=that.wrapper,position=wrapper.position(),doc=$(document);extend(that.restoreOptions,{left:position.left,top:position.top}),wrapper.css({left:0,top:0,position:"fixed"}).addClass(MAXIMIZEDSTATE),this._documentScrollTop=doc.scrollTop(),this._documentScrollLeft=doc.scrollLeft(),$("html, body").css(OVERFLOW,HIDDEN),that.options.isMaximized=!0,that._onDocumentResize()}),minimize:sizingAction("minimize",function(){var that=this;that.wrapper.css({height:"",minHeight:""}),that.element.hide(),that.options.isMinimized=!0}),pin:function(force){var that=this,win=$(window),wrapper=that.wrapper,top=parseInt(wrapper.css("top"),10),left=parseInt(wrapper.css("left"),10);(force||!that.options.pinned&&!that.options.isMaximized)&&(wrapper.css({position:"fixed",top:top-win.scrollTop(),
left:left-win.scrollLeft()}),wrapper.children(KWINDOWTITLEBAR).find(KPIN).addClass("k-i-unpin").removeClass("k-i-pin"),that.options.pinned=!0)},unpin:function(){var that=this,win=$(window),wrapper=that.wrapper,top=parseInt(wrapper.css("top"),10),left=parseInt(wrapper.css("left"),10);that.options.pinned&&!that.options.isMaximized&&(wrapper.css({position:"",top:top+win.scrollTop(),left:left+win.scrollLeft()}),wrapper.children(KWINDOWTITLEBAR).find(KUNPIN).addClass("k-i-pin").removeClass("k-i-unpin"),that.options.pinned=!1)},_onDocumentResize:function(){var w,h,that=this,wrapper=that.wrapper,wnd=$(window),zoomLevel=kendo.support.zoomLevel();that.options.isMaximized&&(w=wnd.width()/zoomLevel,h=wnd.height()/zoomLevel-parseInt(wrapper.css("padding-top"),10),wrapper.css({width:w,height:h}),that.options.width=w,that.options.height=h,that.resize())},refresh:function(options){var iframe,showIframe,url,that=this,initOptions=that.options,element=$(that.element);return isPlainObject(options)||(options={url:options}),options=extend({},initOptions.content,options),showIframe=defined(initOptions.iframe)?initOptions.iframe:options.iframe,url=options.url,url?(defined(showIframe)||(showIframe=!isLocalUrl(url)),showIframe?(iframe=element.find("."+KCONTENTFRAME)[0],iframe?iframe.src=url||iframe.src:element.html(templates.contentFrame(extend({},initOptions,{content:options}))),element.find("."+KCONTENTFRAME).unbind("load"+NS).on("load"+NS,proxy(this._triggerRefresh,this))):that._ajaxRequest(options)):(options.template&&that.content(template(options.template)({})),that.trigger(REFRESH)),element.toggleClass("k-window-iframecontent",!!showIframe),that},_triggerRefresh:function(){this.trigger(REFRESH)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(REFRESHICON).removeClass(LOADING)},_ajaxError:function(xhr,status){this.trigger(ERROR,{status:status,xhr:xhr})},_ajaxSuccess:function(contentTemplate){return function(data){var html=data;contentTemplate&&(html=template(contentTemplate)(data||{})),this.content(html,data),this.element.prop("scrollTop",0),this.trigger(REFRESH)}},_showLoading:function(){this.wrapper.find(REFRESHICON).addClass(LOADING)},_ajaxRequest:function(options){this._loadingIconTimeout=setTimeout(proxy(this._showLoading,this),100),$.ajax(extend({type:"GET",dataType:"html",cache:!1,error:proxy(this._ajaxError,this),complete:proxy(this._ajaxComplete,this),success:proxy(this._ajaxSuccess(options.template),this)},options))},_destroy:function(){this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.wrapper.off(NS).children(KWINDOWCONTENT).off(NS).end().find(".k-resize-handle,.k-window-titlebar").off(NS),$(window).off("resize"+NS+this._marker),clearTimeout(this._loadingIconTimeout),Widget.fn.destroy.call(this),this.unbind(undefined),kendo.destroy(this.wrapper),this._removeOverlay(!0)},destroy:function(){this._destroy(),this.wrapper.empty().remove(),this.wrapper=this.appendTo=this.element=$()},_createWindow:function(){var iframeSrcAttributes,wrapper,contentHtml=this.element,options=this.options,isRtl=kendo.support.isRtl(contentHtml);options.scrollable===!1&&contentHtml.attr("style","overflow:hidden;"),wrapper=$(templates.wrapper(options)),iframeSrcAttributes=contentHtml.find("iframe:not(.k-content)").map(function(){var src=this.getAttribute("src");return this.src="",src}),wrapper.toggleClass("k-rtl",isRtl).appendTo(this.appendTo).append(contentHtml).find("iframe:not(.k-content)").each(function(index){this.src=iframeSrcAttributes[index]}),wrapper.find(".k-window-title").css(isRtl?"left":"right",wrapper.find(".k-window-actions").outerWidth()+10),contentHtml.css("visibility","").show(),contentHtml.find("[data-role=editor]").each(function(){var editor=$(this).data("kendoEditor");editor&&editor.refresh()}),wrapper=contentHtml=null}});templates={wrapper:template("<div class='k-widget k-window' />"),action:template("<a role='button' href='\\#' class='k-window-action k-link'><span role='presentation' class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:template("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions' /></div>"),overlay:"<div class='k-overlay' />",contentFrame:template("<iframe frameborder='0' title='#= title #' class='"+KCONTENTFRAME+"' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:template("<div class='k-resize-handle k-resize-#= data #'></div>")},WindowResizing.prototype={addOverlay:function(){this.owner.wrapper.append(templates.overlay)},removeOverlay:function(){this.owner.wrapper.find(KOVERLAY).remove()},dragstart:function(e){var that=this,wnd=that.owner,wrapper=wnd.wrapper;that.elementPadding=parseInt(wrapper.css("padding-top"),10),that.initialPosition=kendo.getOffset(wrapper,"position"),that.resizeDirection=e.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),that.initialSize={width:wrapper.width(),height:wrapper.height()},that.containerOffset=kendo.getOffset(wnd.appendTo,"position"),wrapper.children(KWINDOWRESIZEHANDLES).not(e.currentTarget).hide(),$(BODY).css(CURSOR,e.currentTarget.css(CURSOR))},drag:function(e){var newWidth,newHeight,windowBottom,windowRight,that=this,wnd=that.owner,wrapper=wnd.wrapper,options=wnd.options,direction=that.resizeDirection,containerOffset=that.containerOffset,initialPosition=that.initialPosition,initialSize=that.initialSize,x=Math.max(e.x.location,containerOffset.left),y=Math.max(e.y.location,containerOffset.top);direction.indexOf("e")>=0?(newWidth=x-initialPosition.left,wrapper.width(constrain(newWidth,options.minWidth,options.maxWidth))):direction.indexOf("w")>=0&&(windowRight=initialPosition.left+initialSize.width,newWidth=constrain(windowRight-x,options.minWidth,options.maxWidth),wrapper.css({left:windowRight-newWidth-containerOffset.left,width:newWidth})),direction.indexOf("s")>=0?(newHeight=y-initialPosition.top-that.elementPadding,wrapper.height(constrain(newHeight,options.minHeight,options.maxHeight))):direction.indexOf("n")>=0&&(windowBottom=initialPosition.top+initialSize.height,newHeight=constrain(windowBottom-y,options.minHeight,options.maxHeight),wrapper.css({top:windowBottom-newHeight-containerOffset.top,height:newHeight})),newWidth&&(wnd.options.width=newWidth+"px"),newHeight&&(wnd.options.height=newHeight+"px"),wnd.resize()},dragend:function(e){var that=this,wnd=that.owner,wrapper=wnd.wrapper;return wrapper.children(KWINDOWRESIZEHANDLES).not(e.currentTarget).show(),$(BODY).css(CURSOR,""),wnd.touchScroller&&wnd.touchScroller.reset(),27==e.keyCode&&wrapper.css(that.initialPosition).css(that.initialSize),wnd.trigger(RESIZEEND),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},WindowDragging.prototype={dragstart:function(e){var wnd=this.owner,element=wnd.element,actions=element.find(".k-window-actions"),containerOffset=kendo.getOffset(wnd.appendTo);wnd.trigger(DRAGSTART),wnd.initialWindowPosition=kendo.getOffset(wnd.wrapper,"position"),wnd.startPosition={left:e.x.client-wnd.initialWindowPosition.left,top:e.y.client-wnd.initialWindowPosition.top},actions.length>0?wnd.minLeftPosition=actions.outerWidth()+parseInt(actions.css("right"),10)-element.outerWidth():wnd.minLeftPosition=20-element.outerWidth(),wnd.minLeftPosition-=containerOffset.left,wnd.minTopPosition=-containerOffset.top,wnd.wrapper.append(templates.overlay).children(KWINDOWRESIZEHANDLES).hide(),$(BODY).css(CURSOR,e.currentTarget.css(CURSOR))},drag:function(e){var wnd=this.owner,position=wnd.options.position,newTop=Math.max(e.y.client-wnd.startPosition.top,wnd.minTopPosition),newLeft=Math.max(e.x.client-wnd.startPosition.left,wnd.minLeftPosition),coordinates={left:newLeft,top:newTop};$(wnd.wrapper).css(coordinates),position.top=newTop,position.left=newLeft},_finishDrag:function(){var wnd=this.owner;wnd.wrapper.children(KWINDOWRESIZEHANDLES).toggle(!wnd.options.isMinimized).end().find(KOVERLAY).remove(),$(BODY).css(CURSOR,"")},dragcancel:function(e){this._finishDrag(),e.currentTarget.closest(KWINDOW).css(this.owner.initialWindowPosition)},dragend:function(){return this._finishDrag(),this.owner.trigger(DRAGEND),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},kendo.ui.plugin(Window)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function findChangedItems(selected,changed){var dataItem,i,j,changedLength=changed.length,result=[];for(i=0;i<selected.length;i++)for(dataItem=selected[i],j=0;changedLength>j;j++)dataItem===changed[j]&&result.push({index:i,item:dataItem});return result}function removeFiltersForField(expression,field){var filters,found=!1;return expression.filters&&(filters=$.grep(expression.filters,function(filter){return found=removeFiltersForField(filter,field),filter.filters?filter.filters.length:filter.field!=field}),found||expression.filters.length===filters.length||(found=!0),expression.filters=filters),found}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,keys=kendo.keys,support=kendo.support,htmlEncode=kendo.htmlEncode,activeElement=kendo._activeElement,ObservableArray=kendo.data.ObservableArray,ID="id",CHANGE="change",FOCUSED="k-state-focused",HOVER="k-state-hover",LOADING="k-loading",OPEN="open",CLOSE="close",SELECT="select",SELECTED="selected",REQUESTSTART="requestStart",REQUESTEND="requestEnd",WIDTH="width",extend=$.extend,proxy=$.proxy,isArray=$.isArray,browser=support.browser,isIE8=browser.msie&&browser.version<9,quotRegExp=/"/g,alternativeNames={ComboBox:"DropDownList",DropDownList:"ComboBox"},List=kendo.ui.DataBoundWidget.extend({init:function(element,options){var id,that=this,ns=that.ns;Widget.fn.init.call(that,element,options),element=that.element,options=that.options,that._isSelect=element.is(SELECT),that._isSelect&&that.element[0].length&&(options.dataSource||(options.dataTextField=options.dataTextField||"text",options.dataValueField=options.dataValueField||"value")),that.ul=$('<ul unselectable="on" class="k-list k-reset"/>').attr({tabIndex:-1,"aria-hidden":!0}),that.list=$("<div class='k-list-container'/>").append(that.ul).on("mousedown"+ns,proxy(that._listMousedown,that)),id=element.attr(ID),id&&(that.list.attr(ID,id+"-list"),that.ul.attr(ID,id+"_listbox")),that._header(),that._accessors(),that._initValue()},options:{valuePrimitive:!1,headerTemplate:""},setOptions:function(options){Widget.fn.setOptions.call(this,options),options&&options.enable!==undefined&&(options.enabled=options.enable)},focus:function(){this._focused.focus()},readonly:function(readonly){this._editable({readonly:readonly===undefined?!0:readonly,disable:!1})},enable:function(enable){this._editable({readonly:!1,disable:!(enable=enable===undefined?!0:enable)})},_listOptions:function(options){var currentOptions=this.options;return options=options||{},options={height:options.height||currentOptions.height,dataValueField:options.dataValueField||currentOptions.dataValueField,dataTextField:options.dataTextField||currentOptions.dataTextField,groupTemplate:options.groupTemplate||currentOptions.groupTemplate,fixedGroupTemplate:options.fixedGroupTemplate||currentOptions.fixedGroupTemplate,template:options.template||currentOptions.template},options.template||(options.template="#:"+kendo.expr(options.dataTextField,"data")+"#"),options},_initList:function(){var that=this,options=that.options,virtual=options.virtual,hasVirtual=!!virtual,value=options.value,listBoundHandler=proxy(that._listBound,that),listOptions={autoBind:!1,selectable:!0,dataSource:that.dataSource,click:proxy(that._click,that),change:proxy(that._listChange,that),activate:proxy(that._activateItem,that),deactivate:proxy(that._deactivateItem,that),dataBinding:function(){that.trigger("dataBinding"),that._angularItems("cleanup")},dataBound:listBoundHandler,listBound:listBoundHandler,selectedItemChange:proxy(that._listChange,that)};listOptions=$.extend(that._listOptions(),listOptions,"object"==typeof virtual?virtual:{}),hasVirtual?that.listView=new kendo.ui.VirtualList(that.ul,listOptions):that.listView=new kendo.ui.StaticList(that.ul,listOptions),value!==undefined&&that.listView.value(value).done(function(){var text=options.text;!that.listView.filter()&&that.input&&(-1===that.selectedIndex?((text===undefined||null===text)&&(text=value),that._accessor(value),that.input.val(text),that._placeholder()):-1===that._oldIndex&&(that._oldIndex=that.selectedIndex))})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(filter,force){var that=this,options=that.options,dataSource=that.dataSource,expression=extend({},dataSource.filter()||{}),removed=removeFiltersForField(expression,options.dataTextField);(filter||removed)&&that.trigger("filtering",{filter:filter})||(expression={filters:expression.filters||[],logic:"and"},filter&&expression.filters.push(filter),force?dataSource.read({filter:expression}):dataSource.filter(expression))},_header:function(){var header,that=this,template=that.options.headerTemplate;$.isFunction(template)&&(template=template({})),template&&(that.list.prepend(template),header=that.ul.prev(),that.header=header[0]?header:null,that.header&&that.angular("compile",function(){return{elements:that.header}}))},_initValue:function(){var that=this,value=that.options.value;null!==value?that.element.val(value):(value=that._accessor(),that.options.value=value),that._old=value},_ignoreCase:function(){var field,that=this,model=that.dataSource.reader.model;model&&model.fields&&(field=model.fields[that.options.dataTextField],field&&field.type&&"string"!==field.type&&(that.options.ignoreCase=!1))},_focus:function(candidate){return this.listView.focus(candidate)},current:function(candidate){return this._focus(candidate)},items:function(){return this.ul[0].children},destroy:function(){var that=this,ns=that.ns;Widget.fn.destroy.call(that),that._unbindDataSource(),that.listView.destroy(),that.list.off(ns),that.popup.destroy(),that._form&&that._form.off("reset",that._resetHandler)},dataItem:function(index){var that=this;if(index===undefined)return that.listView.selectedDataItems()[0];if("number"!=typeof index){if(that.options.virtual)return that.dataSource.getByUid($(index).data("uid"));index=$(that.items()).index(index)}return that.dataSource.flatView()[index]},_activateItem:function(){var current=this.listView.focus();current&&this._focused.add(this.filterInput).attr("aria-activedescendant",current.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr("aria-activedescendant")},_accessors:function(){var that=this,element=that.element,options=that.options,getter=kendo.getter,textField=element.attr(kendo.attr("text-field")),valueField=element.attr(kendo.attr("value-field"));!options.dataTextField&&textField&&(options.dataTextField=textField),!options.dataValueField&&valueField&&(options.dataValueField=valueField),that._text=getter(options.dataTextField),that._value=getter(options.dataValueField)},_aria:function(id){var that=this,options=that.options,element=that._focused.add(that.filterInput);options.suggest!==undefined&&element.attr("aria-autocomplete",options.suggest?"both":"list"),id=id?id+" "+that.ul[0].id:that.ul[0].id,element.attr("aria-owns",id),that.ul.attr("aria-live",options.filter&&"none"!==options.filter?"polite":"off")},_blur:function(){var that=this;that._change(),that.close()},_change:function(){var trigger,that=this,index=that.selectedIndex,optionValue=that.options.value,value=that.value();that._isSelect&&!that.listView.isBound()&&optionValue&&(value=optionValue),value!==that._old?trigger=!0:index!==undefined&&index!==that._oldIndex&&(trigger=!0),trigger&&(that._old=value,that._oldIndex=index,that._typing||that.element.trigger(CHANGE),that.trigger(CHANGE)),that.typing=!1},_data:function(){return this.dataSource.view()},_enable:function(){var that=this,options=that.options,disabled=that.element.is("[disabled]");options.enable!==undefined&&(options.enabled=options.enable),!options.enabled||disabled?that.enable(!1):that.readonly(that.element.is("[readonly]"))},_dataValue:function(dataItem){var value=this._value(dataItem);return value===undefined&&(value=this._text(dataItem)),value},_offsetHeight:function(){var offsetHeight=0,siblings=this.listView.content.prevAll(":visible");return siblings.each(function(){var element=$(this);offsetHeight+=element.hasClass("k-list-filter")?element.children().outerHeight():element.outerHeight()}),offsetHeight},_height:function(length){var offsetTop,popups,that=this,list=that.list,height=that.options.height,visible=that.popup.visible();return length&&(popups=list.add(list.parent(".k-animation-container")).show(),height=that.listView.content[0].scrollHeight>height?height:"auto",popups.height(height),"auto"!==height&&(offsetTop=that._offsetHeight(),offsetTop&&(height-=offsetTop)),that.listView.content.height(height),visible||popups.hide()),height},_adjustListWidth:function(){var computedStyle,computedWidth,list=this.list,width=list[0].style.width,wrapper=this.wrapper;if(list.data(WIDTH)||!width)return computedStyle=window.getComputedStyle?window.getComputedStyle(wrapper[0],null):0,computedWidth=computedStyle?parseFloat(computedStyle.width):wrapper.outerWidth(),computedStyle&&browser.msie&&(computedWidth+=parseFloat(computedStyle.paddingLeft)+parseFloat(computedStyle.paddingRight)+parseFloat(computedStyle.borderLeftWidth)+parseFloat(computedStyle.borderRightWidth)),width="border-box"!==list.css("box-sizing")?computedWidth-(list.outerWidth()-list.width()):computedWidth,list.css({fontFamily:wrapper.css("font-family"),width:width}).data(WIDTH,width),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(OPEN)?e.preventDefault():(this._focused.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger(CLOSE)?e.preventDefault():(this._focused.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_focusItem:function(){var listView=this.listView,focusedItem=listView.focus(),index=listView.select();index=index[index.length-1],index===undefined&&this.options.highlightFirst&&!focusedItem&&(index=0),index!==undefined?listView.focus(index):listView.scrollToIndex(0)},_calculateGroupPadding:function(height){var li=this.ul.children(".k-first:first"),groupHeader=this.listView.content.prev(".k-group-header"),padding=0;groupHeader[0]&&"none"!==groupHeader[0].style.display&&("auto"!==height&&(padding=kendo.support.scrollbar()),padding+=parseFloat(li.css("border-right-width"),10)+parseFloat(li.children(".k-group").css("padding-right"),10),groupHeader.css("padding-right",padding))},_firstOpen:function(){var height=this._height(this.dataSource.flatView().length);this._calculateGroupPadding(height)},_popup:function(){var that=this;that.popup=new ui.Popup(that.list,extend({},that.options.popup,{anchor:that.wrapper,open:proxy(that._openHandler,that),close:proxy(that._closeHandler,that),animation:that.options.animation,isRtl:support.isRtl(that.wrapper)})),that.options.virtual||that.popup.one(OPEN,proxy(that._firstOpen,that))},_makeUnselectable:function(){isIE8&&this.list.find("*").not(".k-textbox").attr("unselectable","on")},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_toggle:function(open,preventFocus){var that=this,touchEnabled=support.mobileOS&&(support.touch||support.MSPointers||support.pointers);open=open!==undefined?open:!that.popup.visible(),preventFocus||touchEnabled||that._focused[0]===activeElement()||(that._prevent=!0,that._focused.focus(),that._prevent=!1),that[open?OPEN:CLOSE]()},_triggerCascade:function(){var that=this;that._cascadeTriggered&&that._old===that.value()&&that._oldIndex===that.selectedIndex||(that._cascadeTriggered=!0,that.trigger("cascade",{userTriggered:that._userTriggered}))},_unbindDataSource:function(){var that=this;that.dataSource.unbind(REQUESTSTART,that._requestStartHandler).unbind(REQUESTEND,that._requestEndHandler).unbind("error",that._errorHandler)}});extend(List,{inArray:function(node,parentNode){var idx,length,siblings=parentNode.children;if(!node||node.parentNode!==parentNode)return-1;for(idx=0,length=siblings.length;length>idx;idx++)if(node===siblings[idx])return idx;return-1}}),kendo.ui.List=List,ui.Select=List.extend({init:function(element,options){List.fn.init.call(this,element,options),this._initial=this.element.val()},setDataSource:function(dataSource){var parent,that=this;that.options.dataSource=dataSource,that._dataSource(),that.listView.setDataSource(that.dataSource),that.options.autoBind&&that.dataSource.fetch(),parent=that._parentWidget(),parent&&that._cascadeSelect(parent)},close:function(){this.popup.close()},select:function(candidate){var that=this;return candidate===undefined?that.selectedIndex:(that._select(candidate),that._old=that._accessor(),that._oldIndex=that.selectedIndex,void 0)},search:function(word){word="string"==typeof word?word:this.text();var that=this,length=word.length,options=that.options,ignoreCase=options.ignoreCase,filter=options.filter,field=options.dataTextField;clearTimeout(that._typingTimeout),(!length||length>=options.minLength)&&(that._state="filter",that.listView.filter(!0),"none"===filter?that._filter(word):(that._open=!0,that._filterSource({value:ignoreCase?word.toLowerCase():word,field:field,operator:filter,ignoreCase:ignoreCase})))},_accessor:function(value,idx){return this[this._isSelect?"_accessorSelect":"_accessorInput"](value,idx)},_accessorInput:function(value){var element=this.element[0];return value===undefined?element.value:(null===value&&(value=""),void(element.value=value))},_accessorSelect:function(value,idx){var option,element=this.element[0],selectedIndex=element.selectedIndex;return value===undefined?(selectedIndex>-1&&(option=element.options[selectedIndex]),option&&(value=option.value),value||""):(selectedIndex>-1&&element.options[selectedIndex].removeAttribute(SELECTED),idx===undefined&&(idx=-1),null!==value&&""!==value&&-1==idx?this._custom(value):(value?element.value=value:element.selectedIndex=idx,element.selectedIndex>-1&&(option=element.options[element.selectedIndex]),option&&option.setAttribute(SELECTED,SELECTED)),void 0)},_custom:function(value){var that=this,element=that.element,custom=that._customOption;custom||(custom=$("<option/>"),that._customOption=custom,element.append(custom)),custom.text(value),custom[0].setAttribute(SELECTED,SELECTED),custom[0].selected=!0},_hideBusy:function(){var that=this;clearTimeout(that._busy),that._arrow.removeClass(LOADING),that._focused.attr("aria-busy",!1),that._busy=null},_showBusy:function(){var that=this;that._request=!0,that._busy||(that._busy=setTimeout(function(){that._arrow&&(that._focused.attr("aria-busy",!0),that._arrow.addClass(LOADING))},100))},_requestEnd:function(){this._request=!1,this._hideBusy()},_dataSource:function(){var idx,that=this,element=that.element,options=that.options,dataSource=options.dataSource||{};dataSource=$.isArray(dataSource)?{data:dataSource}:dataSource,that._isSelect&&(idx=element[0].selectedIndex,idx>-1&&(options.index=idx),dataSource.select=element,dataSource.fields=[{field:options.dataTextField},{field:options.dataValueField}]),that.dataSource?that._unbindDataSource():(that._requestStartHandler=proxy(that._showBusy,that),that._requestEndHandler=proxy(that._requestEnd,that),that._errorHandler=proxy(that._hideBusy,that)),that.dataSource=kendo.data.DataSource.create(dataSource).bind(REQUESTSTART,that._requestStartHandler).bind(REQUESTEND,that._requestEndHandler).bind("error",that._errorHandler)},_firstItem:function(){this.listView.focusFirst()},_lastItem:function(){this.listView.focusLast()},_nextItem:function(){this.listView.focusNext()},_prevItem:function(){this.listView.focusPrev()},_move:function(e){var dataItem,pressed,current,that=this,key=e.keyCode,down=key===keys.DOWN;if(key===keys.UP||down){if(e.altKey)that.toggle(down);else{if(!that.listView.isBound())return that._fetch||(that.dataSource.one(CHANGE,function(){that._fetch=!1,that._move(e)}),that._fetch=!0,that._filterSource()),e.preventDefault(),!0;if(current=that._focus(),that._fetch||current&&!current.hasClass("k-state-selected")||(down?(that._nextItem(),that._focus()||that._lastItem()):(that._prevItem(),that._focus()||that._firstItem())),that.trigger(SELECT,{item:that.listView.focus()}))return void that._focus(current);that._select(that._focus(),!0),that.popup.visible()||that._blur()}e.preventDefault(),pressed=!0}else if(key===keys.ENTER||key===keys.TAB){that.popup.visible()&&e.preventDefault(),current=that._focus(),dataItem=that.dataItem(),that.popup.visible()||dataItem&&that.text()===that._text(dataItem)||(current=null);var activeFilter=that.filterInput&&that.filterInput[0]===activeElement();if(current){if(that.trigger(SELECT,{item:current}))return;that._select(current)}else that.input&&(that._accessor(that.input.val()),that.listView.value(that.input.val()));that._focusElement&&that._focusElement(that.wrapper),activeFilter&&key===keys.TAB?that.wrapper.focusout():that._blur(),that.close(),pressed=!0}else key===keys.ESC&&(that.popup.visible()&&e.preventDefault(),that.close(),pressed=!0);return pressed},_fetchData:function(){var that=this,hasItems=!!that.dataSource.view().length;that._request||that.options.cascadeFrom||that.listView.isBound()||that._fetch||hasItems||(that._fetch=!0,that.dataSource.fetch().done(function(){that._fetch=!1}))},_options:function(data,optionLabel,value){var option,dataItem,dataText,dataValue,that=this,element=that.element,length=data.length,options="",idx=0;for(optionLabel&&(options=optionLabel);length>idx;idx++)option="<option",dataItem=data[idx],dataText=that._text(dataItem),dataValue=that._value(dataItem),dataValue!==undefined&&(dataValue+="",-1!==dataValue.indexOf('"')&&(dataValue=dataValue.replace(quotRegExp,"&quot;")),option+=' value="'+dataValue+'"'),option+=">",dataText!==undefined&&(option+=htmlEncode(dataText)),option+="</option>",options+=option;element.html(options),value!==undefined&&(element[0].value=value,element[0].value&&!value&&(element[0].selectedIndex=-1))},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){setTimeout(function(){that.value(that._initial)})},that._form=form.on("reset",that._resetHandler))},_parentWidget:function(){var name=this.options.name,parentElement=$("#"+this.options.cascadeFrom),parent=parentElement.data("kendo"+name);return parent||(parent=parentElement.data("kendo"+alternativeNames[name])),parent},_cascade:function(){var parent,that=this,options=that.options,cascade=options.cascadeFrom;if(cascade){if(parent=that._parentWidget(),!parent)return;options.autoBind=!1,parent.first("cascade",function(e){that._userTriggered=e.userTriggered,that.listView.isBound()&&that._clearSelection(parent,!0),that._cascadeSelect(parent)}),parent.listView.isBound()?that._cascadeSelect(parent):parent.value()||that.enable(!1)}},_cascadeChange:function(parent){var that=this,value=that._accessor();that._userTriggered?that._clearSelection(parent,!0):value?(value!==that.listView.value()[0]&&that.value(value),that.dataSource.view()[0]&&-1!==that.selectedIndex||that._clearSelection(parent,!0)):that.dataSource.flatView().length&&that.select(that.options.index),that.enable(),that._triggerCascade(),that._userTriggered=!1},_cascadeSelect:function(parent){var expressions,filters,that=this,dataItem=parent.dataItem(),filterValue=dataItem?parent._value(dataItem):null,valueField=that.options.cascadeFromField||parent.options.dataValueField;if(filterValue||0===filterValue){expressions=that.dataSource.filter()||{},removeFiltersForField(expressions,valueField),filters=expressions.filters||[],filters.push({field:valueField,operator:"eq",value:filterValue});var handler=function(){that.unbind("dataBound",handler),that._cascadeChange(parent)};that.first("dataBound",handler),that.dataSource.filter(filters)}else that.enable(!1),that._clearSelection(parent),that._triggerCascade(),that._userTriggered=!1}});var STATIC_LIST_NS=".StaticList",StaticList=kendo.ui.DataBoundWidget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),this.element.attr("role","listbox").on("click"+STATIC_LIST_NS,"li",proxy(this._click,this)).on("mouseenter"+STATIC_LIST_NS,"li",function(){$(this).addClass(HOVER)}).on("mouseleave"+STATIC_LIST_NS,"li",function(){$(this).removeClass(HOVER)}),this.content=this.element.wrap("<div unselectable='on'></div>").parent().css({overflow:"auto",position:"relative"}),this.header=this.content.before('<div class="k-group-header" style="display:none"></div>').prev(),this._bound=!1,this._optionID=kendo.guid(),this._selectedIndices=[],this._view=[],this._dataItems=[],this._values=[];var value=this.options.value;value&&(this._values=$.isArray(value)?value.slice(0):[value]),this._getter(),this._templates(),this.setDataSource(this.options.dataSource),this._onScroll=proxy(function(){var that=this;clearTimeout(that._scrollId),that._scrollId=setTimeout(function(){that._renderHeader()},50)},this)},options:{name:"StaticList",dataValueField:null,valuePrimitive:!1,selectable:!0,template:null,groupTemplate:null,fixedGroupTemplate:null},events:["click","change","activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(source){var value,that=this,dataSource=source||{};dataSource=$.isArray(dataSource)?{data:dataSource}:dataSource,dataSource=kendo.data.DataSource.create(dataSource),that.dataSource?(that.dataSource.unbind(CHANGE,that._refreshHandler),value=that.value(),that.value([]),that._bound=!1,that.value(value)):that._refreshHandler=proxy(that.refresh,that),that.dataSource=dataSource.bind(CHANGE,that._refreshHandler),that._fixedHeader()},setOptions:function(options){Widget.fn.setOptions.call(this,options),this._getter(),this._templates(),this._render()},destroy:function(){this.element.off(STATIC_LIST_NS),this._refreshHandler&&this.dataSource.unbind(CHANGE,this._refreshHandler),clearTimeout(this._scrollId),Widget.fn.destroy.call(this)},scrollToIndex:function(index){var item=this.element[0].children[index];item&&this.scroll(item)},scroll:function(item){if(item){item[0]&&(item=item[0]);var content=this.content[0],itemOffsetTop=item.offsetTop,itemOffsetHeight=item.offsetHeight,contentScrollTop=content.scrollTop,contentOffsetHeight=content.clientHeight,bottomDistance=itemOffsetTop+itemOffsetHeight;contentScrollTop>itemOffsetTop?contentScrollTop=itemOffsetTop:bottomDistance>contentScrollTop+contentOffsetHeight&&(contentScrollTop=bottomDistance-contentOffsetHeight),content.scrollTop=contentScrollTop}},selectedDataItems:function(dataItems){var getter=this._valueGetter;return dataItems===undefined?this._dataItems.slice():(this._dataItems=dataItems,void(this._values=$.map(dataItems,function(dataItem){return getter(dataItem)})))},focusNext:function(){var current=this.focus();current=current?current.next():0,this.focus(current)},focusPrev:function(){var current=this.focus();current=current?current.prev():this.element[0].children.length-1,this.focus(current)},focusFirst:function(){this.focus(this.element[0].children[0])},focusLast:function(){this.focus(this.element[0].children[this.element[0].children.length-1])},focus:function(candidate){var hasCandidate,that=this,id=that._optionID;return candidate===undefined?that._current:(candidate=that._get(candidate),candidate=candidate[candidate.length-1],candidate=$(this.element[0].children[candidate]),that._current&&(that._current.removeClass(FOCUSED).removeAttr("aria-selected").removeAttr(ID),that.trigger("deactivate")),hasCandidate=!!candidate[0],hasCandidate&&(candidate.addClass(FOCUSED),that.scroll(candidate),candidate.attr("id",id)),that._current=hasCandidate?candidate:null,void that.trigger("activate"))},focusIndex:function(){return this.focus()?this.focus().index():undefined},filter:function(filter){return filter===undefined?this._filtered:void(this._filtered=filter);
},skipUpdate:function(skipUpdate){this._skipUpdate=skipUpdate},select:function(indices){var result,that=this,selectable=that.options.selectable,singleSelection="multiple"!==selectable&&selectable!==!1,selectedIndices=that._selectedIndices,added=[],removed=[];if(indices===undefined)return selectedIndices.slice();if(indices=that._get(indices),1===indices.length&&-1===indices[0]&&(indices=[]),!that._filtered||singleSelection||!that._deselectFiltered(indices)){if(singleSelection&&!that._filtered&&-1!==$.inArray(indices[indices.length-1],selectedIndices))return void(that._dataItems.length&&that._view.length&&(that._dataItems=[that._view[selectedIndices[0]].item]));result=that._deselect(indices),removed=result.removed,indices=result.indices,indices.length&&(singleSelection&&(indices=[indices[indices.length-1]]),added=that._select(indices)),(added.length||removed.length)&&(that._valueComparer=null,that.trigger("change",{added:added,removed:removed}))}},removeAt:function(position){return this._selectedIndices.splice(position,1),this._values.splice(position,1),this._valueComparer=null,{position:position,dataItem:this._dataItems.splice(position,1)[0]}},setValue:function(value){value=$.isArray(value)||value instanceof ObservableArray?value.slice(0):[value],this._values=value,this._valueComparer=null},value:function(value){var indices,that=this,deferred=that._valueDeferred;return value===undefined?that._values.slice():(that.setValue(value),deferred&&"resolved"!==deferred.state()||(that._valueDeferred=deferred=$.Deferred()),that.isBound()&&(indices=that._valueIndices(that._values),"multiple"===that.options.selectable&&that.select(-1),that.select(indices),deferred.resolve()),that._skipUpdate=!1,deferred)},items:function(){return this.element.children(".k-item")},_click:function(e){e.isDefaultPrevented()||this.trigger("click",{item:$(e.currentTarget)})||this.select(e.currentTarget)},_valueExpr:function(type,values){var value,body,comparer,that=this,idx=0,normalized=[];if(!that._valueComparer||that._valueType!==type){for(that._valueType=type;idx<values.length;idx++)value=values[idx],value!==undefined&&""!==value&&null!==value&&("boolean"===type?value=Boolean(value):"number"===type?value=Number(value):"string"===type&&(value=value.toString())),normalized.push(value);body="for (var idx = 0; idx < "+normalized.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;",comparer=new Function(["current","values"],body),that._valueComparer=function(current){return comparer(current,normalized)}}return that._valueComparer},_dataItemPosition:function(dataItem,values){var value=this._valueGetter(dataItem),valueExpr=this._valueExpr(typeof value,values);return valueExpr(value)},_getter:function(){this._valueGetter=kendo.getter(this.options.dataValueField)},_deselect:function(indices){var j,index,selectedIndex,that=this,children=that.element[0].children,selectable=that.options.selectable,selectedIndices=that._selectedIndices,dataItems=that._dataItems,values=that._values,removed=[],i=0,removedIndices=0;if(indices=indices.slice(),selectable!==!0&&indices.length){if("multiple"===selectable)for(;i<indices.length;i++)if(index=indices[i],$(children[index]).hasClass("k-state-selected"))for(j=0;j<selectedIndices.length;j++)if(selectedIndex=selectedIndices[j],selectedIndex===index){$(children[selectedIndex]).removeClass("k-state-selected"),removed.push({position:j+removedIndices,dataItem:dataItems.splice(j,1)[0]}),selectedIndices.splice(j,1),indices.splice(i,1),values.splice(j,1),removedIndices+=1,i-=1,j-=1;break}}else{for(;i<selectedIndices.length;i++)$(children[selectedIndices[i]]).removeClass("k-state-selected"),removed.push({position:i,dataItem:dataItems[i]});that._values=[],that._dataItems=[],that._selectedIndices=[]}return{indices:indices,removed:removed}},_deselectFiltered:function(indices){for(var dataItem,index,position,children=this.element[0].children,removed=[],idx=0;idx<indices.length;idx++)index=indices[idx],dataItem=this._view[index].item,position=this._dataItemPosition(dataItem,this._values),position>-1&&(removed.push(this.removeAt(position)),$(children[index]).removeClass("k-state-selected"));return removed.length?(this.trigger("change",{added:[],removed:removed}),!0):!1},_select:function(indices){var dataItem,index,that=this,children=that.element[0].children,data=that._view,added=[],idx=0;for(-1!==indices[indices.length-1]&&that.focus(indices);idx<indices.length;idx++)index=indices[idx],dataItem=data[index],-1!==index&&dataItem&&(dataItem=dataItem.item,that._selectedIndices.push(index),that._dataItems.push(dataItem),that._values.push(that._valueGetter(dataItem)),$(children[index]).addClass("k-state-selected").attr("aria-selected",!0),added.push({dataItem:dataItem}));return added},_get:function(candidate){return"number"==typeof candidate?candidate=[candidate]:isArray(candidate)||(candidate=$(candidate).data("offset-index"),candidate===undefined&&(candidate=-1),candidate=[candidate]),candidate},_template:function(){var that=this,options=that.options,template=options.template;return template?(template=kendo.template(template),template=function(data){return'<li tabindex="-1" role="option" unselectable="on" class="k-item">'+template(data)+"</li>"}):template=kendo.template('<li tabindex="-1" role="option" unselectable="on" class="k-item">${'+kendo.expr(options.dataTextField,"data")+"}</li>",{useWithBlock:!1}),template},_templates:function(){var template,templates={template:this.options.template,groupTemplate:this.options.groupTemplate,fixedGroupTemplate:this.options.fixedGroupTemplate};for(var key in templates)template=templates[key],template&&"function"!=typeof template&&(templates[key]=kendo.template(template));this.templates=templates},_normalizeIndices:function(indices){for(var newIndices=[],idx=0;idx<indices.length;idx++)indices[idx]!==undefined&&newIndices.push(indices[idx]);return newIndices},_valueIndices:function(values,indices){var index,data=this._view,idx=0;if(indices=indices?indices.slice():[],!values.length)return[];for(;idx<data.length;idx++)index=this._dataItemPosition(data[idx].item,values),-1!==index&&(indices[index]=idx);return this._normalizeIndices(indices)},_firstVisibleItem:function(){for(var element=this.element[0],content=this.content[0],scrollTop=content.scrollTop,itemHeight=$(element.children[0]).height(),itemIndex=Math.floor(scrollTop/itemHeight)||0,item=element.children[itemIndex]||element.lastChild,forward=item.offsetTop<scrollTop;item;)if(forward){if(item.offsetTop+itemHeight>scrollTop||!item.nextSibling)break;item=item.nextSibling}else{if(item.offsetTop<=scrollTop||!item.previousSibling)break;item=item.previousSibling}return this._view[$(item).data("offset-index")]},_fixedHeader:function(){this.isGrouped()&&this.templates.fixedGroupTemplate?(this.header.show(),this.content.scroll(this._onScroll)):(this.header.hide(),this.content.off("scroll",this._onScroll))},_renderHeader:function(){var template=this.templates.fixedGroupTemplate;if(template){var visibleItem=this._firstVisibleItem();visibleItem&&this.header.html(template(visibleItem.group))}},_renderItem:function(context){var item='<li tabindex="-1" role="option" unselectable="on" class="k-item',dataItem=context.item,notFirstItem=0!==context.index,selected=context.selected;return notFirstItem&&context.newGroup&&(item+=" k-first"),selected&&(item+=" k-state-selected"),item+='"'+(selected?' aria-selected="true"':"")+' data-offset-index="'+context.index+'">',item+=this.templates.template(dataItem),notFirstItem&&context.newGroup&&(item+='<div class="k-group">'+this.templates.groupTemplate(context.group)+"</div>"),item+"</li>"},_render:function(){var context,group,newGroup,j,html="",i=0,idx=0,dataContext=[],view=this.dataSource.view(),values=this.value(),isGrouped=this.isGrouped();if(isGrouped)for(i=0;i<view.length;i++)for(group=view[i],newGroup=!0,j=0;j<group.items.length;j++)context={selected:this._selected(group.items[j],values),item:group.items[j],group:group.value,newGroup:newGroup,index:idx},dataContext[idx]=context,idx+=1,html+=this._renderItem(context),newGroup=!1;else for(i=0;i<view.length;i++)context={selected:this._selected(view[i],values),item:view[i],index:i},dataContext[i]=context,html+=this._renderItem(context);this._view=dataContext,this.element[0].innerHTML=html,isGrouped&&dataContext.length&&this._renderHeader()},_selected:function(dataItem,values){var select=!this._filtered||"multiple"===this.options.selectable;return select&&-1!==this._dataItemPosition(dataItem,values)},refresh:function(e){var changedItems,that=this,action=e&&e.action;that.trigger("dataBinding"),that._fixedHeader(),that._render(),that._bound=!0,"itemchange"===action?(changedItems=findChangedItems(that._dataItems,e.items),changedItems.length&&that.trigger("selectedItemChange",{items:changedItems})):that._filtered||that._skipUpdate?(that.focus(0),that._skipUpdate&&(that._skipUpdate=!1,that._selectedIndices=that._valueIndices(that._values,that._selectedIndices))):that.options.skipUpdateOnBind||action&&"add"!==action||that.value(that._values),that._valueDeferred&&that._valueDeferred.resolve(),that.trigger("dataBound")},isBound:function(){return this._bound},isGrouped:function(){return(this.dataSource.group()||[]).length}});ui.plugin(StaticList)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function parseInteger(value){return parseInt(value,10)}function parseCSS(element,property){return parseInteger(element.css(property))}function keys(obj){var acc=[];for(var propertyName in obj)acc.push(propertyName);return acc}function strip3DTransforms(properties){for(var key in properties)-1!=transformProps.indexOf(key)&&-1==transform2d.indexOf(key)&&delete properties[key];return properties}function normalizeCSS(element,properties){var lowerKey,key,value,isTransformed,transformation=[],cssValues={};for(key in properties)lowerKey=key.toLowerCase(),isTransformed=transforms&&-1!=transformProps.indexOf(lowerKey),!support.hasHW3D&&isTransformed&&-1==transform2d.indexOf(lowerKey)?delete properties[key]:(value=properties[key],isTransformed?transformation.push(key+"("+value+")"):cssValues[key]=value);return transformation.length&&(cssValues[TRANSFORM]=transformation.join(" ")),cssValues}function animationProperty(element,property){if(transforms){var transform=element.css(TRANSFORM);if(transform==NONE)return"scale"==property?1:0;var match=transform.match(new RegExp(property+"\\s*\\(([\\d\\w\\.]+)")),computed=0;return match?computed=parseInteger(match[1]):(match=transform.match(matrix3dRegExp)||[0,0,0,0,0],property=property.toLowerCase(),translateXRegExp.test(property)?computed=parseFloat(match[3]/match[2]):"translatey"==property?computed=parseFloat(match[4]/match[2]):"scale"==property?computed=parseFloat(match[2]):"rotate"==property&&(computed=parseFloat(Math.atan2(match[2],match[1])))),computed}return parseFloat(element.css(property))}function capitalize(word){return word.charAt(0).toUpperCase()+word.substring(1)}function createEffect(name,definition){var effectClass=Effect.extend(definition),directions=effectClass.prototype.directions;fx[capitalize(name)]=effectClass,fx.Element.prototype[name]=function(direction,opt1,opt2,opt3){return new effectClass(this.element,direction,opt1,opt2,opt3)},each(directions,function(idx,theDirection){fx.Element.prototype[name+capitalize(theDirection)]=function(opt1,opt2,opt3){return new effectClass(this.element,theDirection,opt1,opt2,opt3)}})}function createToggleEffect(name,property,defaultStart,defaultEnd){createEffect(name,{directions:IN_OUT,startValue:function(value){return this._startValue=value,this},endValue:function(value){return this._endValue=value,this},shouldHide:function(){return this._shouldHide},prepare:function(start,end){var startValue,endValue,that=this,out="out"===this._direction,startDataValue=that.element.data(property),startDataValueIsSet=!(isNaN(startDataValue)||startDataValue==defaultStart);startValue=startDataValueIsSet?startDataValue:"undefined"!=typeof this._startValue?this._startValue:out?defaultStart:defaultEnd,endValue="undefined"!=typeof this._endValue?this._endValue:out?defaultEnd:defaultStart,this._reverse?(start[property]=endValue,end[property]=startValue):(start[property]=startValue,end[property]=endValue),that._shouldHide=end[property]===defaultEnd}})}function clipInHalf(container,direction){var vertical=kendo.directions[direction].vertical,size=container[vertical?HEIGHT:WIDTH]()/2+"px";return CLIPS[direction].replace("$size",size)}var kendo=window.kendo,fx=kendo.effects,each=$.each,extend=$.extend,proxy=$.proxy,support=kendo.support,browser=support.browser,transforms=support.transforms,transitions=support.transitions,scaleProperties={scale:0,scalex:0,scaley:0,scale3d:0},translateProperties={translate:0,translatex:0,translatey:0,translate3d:0},hasZoom="undefined"!=typeof document.documentElement.style.zoom&&!transforms,matrix3dRegExp=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,cssParamsRegExp=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,translateXRegExp=/translatex?$/i,oldEffectsRegExp=/(zoom|fade|expand)(\w+)/,singleEffectRegExp=/(zoom|fade|expand)/,unitRegExp=/[xy]$/i,transformProps=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],transform2d=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],transform2units={rotate:"deg",scale:"",skew:"px",translate:"px"},cssPrefix=transforms.css,round=Math.round,BLANK="",PX="px",NONE="none",AUTO="auto",WIDTH="width",HEIGHT="height",HIDDEN="hidden",ORIGIN="origin",ABORT_ID="abortId",OVERFLOW="overflow",TRANSLATE="translate",POSITION="position",COMPLETE_CALLBACK="completeCallback",TRANSITION=cssPrefix+"transition",TRANSFORM=cssPrefix+"transform",BACKFACE=cssPrefix+"backface-visibility",PERSPECTIVE=cssPrefix+"perspective",DEFAULT_PERSPECTIVE="1500px",TRANSFORM_PERSPECTIVE="perspective("+DEFAULT_PERSPECTIVE+")",directions={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};if(kendo.directions=directions,extend($.fn,{kendoStop:function(clearQueue,gotoEnd){return transitions?fx.stopQueue(this,clearQueue||!1,gotoEnd||!1):this.stop(clearQueue,gotoEnd)}}),transforms&&!transitions){each(transform2d,function(idx,value){$.fn[value]=function(val){if("undefined"==typeof val)return animationProperty(this,value);var that=$(this)[0],transformValue=value+"("+val+transform2units[value.replace(unitRegExp,"")]+")";return-1==that.style.cssText.indexOf(TRANSFORM)?$(this).css(TRANSFORM,transformValue):that.style.cssText=that.style.cssText.replace(new RegExp(value+"\\(.*?\\)","i"),transformValue),this},$.fx.step[value]=function(fx){$(fx.elem)[value](fx.now)}});var curProxy=$.fx.prototype.cur;$.fx.prototype.cur=function(){return-1!=transform2d.indexOf(this.prop)?parseFloat($(this.elem)[this.prop]()):curProxy.apply(this,arguments)}}kendo.toggleClass=function(element,classes,options,add){return classes&&(classes=classes.split(" "),transitions&&(options=extend({exclusive:"all",duration:400,ease:"ease-out"},options),element.css(TRANSITION,options.exclusive+" "+options.duration+"ms "+options.ease),setTimeout(function(){element.css(TRANSITION,"").css(HEIGHT)},options.duration)),each(classes,function(idx,value){element.toggleClass(value,add)})),element},kendo.parseEffects=function(input,mirror){var effects={};return"string"==typeof input?each(input.split(" "),function(idx,value){var redirectedEffect=!singleEffectRegExp.test(value),resolved=value.replace(oldEffectsRegExp,function(match,$1,$2){return $1+":"+$2.toLowerCase()}),effect=resolved.split(":"),direction=effect[1],effectBody={};effect.length>1&&(effectBody.direction=mirror&&redirectedEffect?directions[direction].reverse:direction),effects[effect[0]]=effectBody}):each(input,function(idx){var direction=this.direction;direction&&mirror&&!singleEffectRegExp.test(idx)&&(this.direction=directions[direction].reverse),effects[idx]=this}),effects},transitions&&extend(fx,{transition:function(element,properties,options){var css,timeoutID,delay=0,oldKeys=element.data("keys")||[];options=extend({duration:200,ease:"ease-out",complete:null,exclusive:"all"},options);var stopTransitionCalled=!1,stopTransition=function(){stopTransitionCalled||(stopTransitionCalled=!0,timeoutID&&(clearTimeout(timeoutID),timeoutID=null),element.removeData(ABORT_ID).dequeue().css(TRANSITION,"").css(TRANSITION),options.complete.call(element))};options.duration=$.fx?$.fx.speeds[options.duration]||options.duration:options.duration,css=normalizeCSS(element,properties),$.merge(oldKeys,keys(css)),element.data("keys",$.unique(oldKeys)).height(),element.css(TRANSITION,options.exclusive+" "+options.duration+"ms "+options.ease).css(TRANSITION),element.css(css).css(TRANSFORM),transitions.event&&(element.one(transitions.event,stopTransition),0!==options.duration&&(delay=500)),timeoutID=setTimeout(stopTransition,options.duration+delay),element.data(ABORT_ID,timeoutID),element.data(COMPLETE_CALLBACK,stopTransition)},stopQueue:function(element,clearQueue,gotoEnd){var cssValues,taskKeys=element.data("keys"),retainPosition=!gotoEnd&&taskKeys,completeCallback=element.data(COMPLETE_CALLBACK);return retainPosition&&(cssValues=kendo.getComputedStyles(element[0],taskKeys)),completeCallback&&completeCallback(),retainPosition&&element.css(cssValues),element.removeData("keys").stop(clearQueue)}});var EffectSet=kendo.Class.extend({init:function(element,options){var that=this;that.element=element,that.effects=[],that.options=options,that.restore=[]},run:function(effects){var effect,idx,jdx,target,children,childrenLength,that=this,length=effects.length,element=that.element,options=that.options,deferred=$.Deferred(),start={},end={};for(that.effects=effects,deferred.then($.proxy(that,"complete")),element.data("animating",!0),idx=0;length>idx;idx++)for(effect=effects[idx],effect.setReverse(options.reverse),effect.setOptions(options),that.addRestoreProperties(effect.restore),effect.prepare(start,end),children=effect.children(),jdx=0,childrenLength=children.length;childrenLength>jdx;jdx++)children[jdx].duration(options.duration).run();for(var effectName in options.effects)extend(end,options.effects[effectName].properties);for(element.is(":visible")||extend(start,{display:element.data("olddisplay")||"block"}),transforms&&!options.reset&&(target=element.data("targetTransform"),target&&(start=extend(target,start))),start=normalizeCSS(element,start),transforms&&!transitions&&(start=strip3DTransforms(start)),element.css(start).css(TRANSFORM),idx=0;length>idx;idx++)effects[idx].setup();return options.init&&options.init(),element.data("targetTransform",end),fx.animate(element,end,extend({},options,{complete:deferred.resolve})),deferred.promise()},stop:function(){$(this.element).kendoStop(!0,!0)},addRestoreProperties:function(restore){for(var value,element=this.element,i=0,length=restore.length;length>i;i++)value=restore[i],this.restore.push(value),element.data(value)||element.data(value,element.css(value))},restoreCallback:function(){for(var element=this.element,i=0,length=this.restore.length;length>i;i++){var value=this.restore[i];element.css(value,element.data(value))}},complete:function(){var that=this,idx=0,element=that.element,options=that.options,effects=that.effects,length=effects.length;for(element.removeData("animating").dequeue(),options.hide&&element.data("olddisplay",element.css("display")).hide(),this.restoreCallback(),hasZoom&&!transforms&&setTimeout($.proxy(this,"restoreCallback"),0);length>idx;idx++)effects[idx].teardown();options.completeCallback&&options.completeCallback(element)}});fx.promise=function(element,options){var effectClass,effect,effects=[],effectSet=new EffectSet(element,options),parsedEffects=kendo.parseEffects(options.effects);options.effects=parsedEffects;for(var effectName in parsedEffects)effectClass=fx[capitalize(effectName)],effectClass&&(effect=new effectClass(element,parsedEffects[effectName].direction),effects.push(effect));effects[0]?effectSet.run(effects):(element.is(":visible")||element.css({display:element.data("olddisplay")||"block"}).css("display"),options.init&&options.init(),element.dequeue(),effectSet.complete())},extend(fx,{animate:function(elements,properties,options){var useTransition=options.transition!==!1;delete options.transition,transitions&&"transition"in fx&&useTransition?fx.transition(elements,properties,options):transforms?elements.animate(strip3DTransforms(properties),{queue:!1,show:!1,hide:!1,duration:options.duration,complete:options.complete}):elements.each(function(){var element=$(this),multiple={};each(transformProps,function(idx,value){var params,currentValue=properties?properties[value]+" ":null;if(currentValue){var single=properties;if(value in scaleProperties&&properties[value]!==undefined)params=currentValue.match(cssParamsRegExp),transforms&&extend(single,{scale:+params[0]});else if(value in translateProperties&&properties[value]!==undefined){var position=element.css(POSITION),isFixed="absolute"==position||"fixed"==position;element.data(TRANSLATE)||(isFixed?element.data(TRANSLATE,{top:parseCSS(element,"top")||0,left:parseCSS(element,"left")||0,bottom:parseCSS(element,"bottom"),right:parseCSS(element,"right")}):element.data(TRANSLATE,{top:parseCSS(element,"marginTop")||0,left:parseCSS(element,"marginLeft")||0}));var originalPosition=element.data(TRANSLATE);if(params=currentValue.match(cssParamsRegExp)){var dX=value==TRANSLATE+"y"?0:+params[1],dY=value==TRANSLATE+"y"?+params[1]:+params[2];isFixed?(isNaN(originalPosition.right)?isNaN(dX)||extend(single,{left:originalPosition.left+dX}):isNaN(dX)||extend(single,{right:originalPosition.right-dX}),isNaN(originalPosition.bottom)?isNaN(dY)||extend(single,{top:originalPosition.top+dY}):isNaN(dY)||extend(single,{bottom:originalPosition.bottom-dY})):(isNaN(dX)||extend(single,{marginLeft:originalPosition.left+dX}),isNaN(dY)||extend(single,{marginTop:originalPosition.top+dY}))}}!transforms&&"scale"!=value&&value in single&&delete single[value],single&&extend(multiple,single)}}),browser.msie&&delete multiple.scale,element.animate(multiple,{queue:!1,show:!1,hide:!1,duration:options.duration,complete:options.complete})})}}),fx.animatedPromise=fx.promise;var Effect=kendo.Class.extend({init:function(element,direction){var that=this;that.element=element,that._direction=direction,that.options={},that._additionalEffects=[],that.restore||(that.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(additional){return this._additionalEffects.push(additional),this},direction:function(value){return this._direction=value,this},duration:function(duration){return this._duration=duration,this},compositeRun:function(){var that=this,effectSet=new EffectSet(that.element,{reverse:that._reverse,duration:that._duration}),effects=that._additionalEffects.concat([that]);return effectSet.run(effects)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var value,target,that=this,element=that.element,idx=0,restore=that.restore,length=restore.length,deferred=$.Deferred(),start={},end={},children=that.children(),childrenLength=children.length;for(deferred.then($.proxy(that,"_complete")),element.data("animating",!0),idx=0;length>idx;idx++)value=restore[idx],element.data(value)||element.data(value,element.css(value));for(idx=0;childrenLength>idx;idx++)children[idx].duration(that._duration).run();return that.prepare(start,end),element.is(":visible")||extend(start,{display:element.data("olddisplay")||"block"}),transforms&&(target=element.data("targetTransform"),target&&(start=extend(target,start))),start=normalizeCSS(element,start),transforms&&!transitions&&(start=strip3DTransforms(start)),element.css(start).css(TRANSFORM),that.setup(),element.data("targetTransform",end),fx.animate(element,end,{duration:that._duration,complete:deferred.resolve}),deferred.promise()},stop:function(){var idx=0,children=this.children(),childrenLength=children.length;for(idx=0;childrenLength>idx;idx++)children[idx].stop();return $(this.element).kendoStop(!0,!0),this},restoreCallback:function(){for(var element=this.element,i=0,length=this.restore.length;length>i;i++){var value=this.restore[i];element.css(value,element.data(value))}},_complete:function(){var that=this,element=that.element;element.removeData("animating").dequeue(),that.restoreCallback(),that.shouldHide()&&element.data("olddisplay",element.css("display")).hide(),hasZoom&&!transforms&&setTimeout($.proxy(that,"restoreCallback"),0),that.teardown()},setOptions:function(options){extend(!0,this.options,options)},children:function(){return[]},shouldHide:$.noop,setup:$.noop,prepare:$.noop,teardown:$.noop,directions:[],setReverse:function(reverse){return this._reverse=reverse,this}}),FOUR_DIRECTIONS=["left","right","up","down"],IN_OUT=["in","out"];createEffect("slideIn",{directions:FOUR_DIRECTIONS,divisor:function(value){return this.options.divisor=value,this},prepare:function(start,end){var tmp,that=this,element=that.element,direction=directions[that._direction],offset=-direction.modifier*(direction.vertical?element.outerHeight():element.outerWidth()),startValue=offset/(that.options&&that.options.divisor||1)+PX,endValue="0px";that._reverse&&(tmp=start,start=end,end=tmp),transforms?(start[direction.transition]=startValue,end[direction.transition]=endValue):(start[direction.property]=startValue,end[direction.property]=endValue)}}),createEffect("tile",{directions:FOUR_DIRECTIONS,init:function(element,direction,previous){Effect.prototype.init.call(this,element,direction),this.options={previous:previous}},previousDivisor:function(value){return this.options.previousDivisor=value,this},children:function(){var that=this,reverse=that._reverse,previous=that.options.previous,divisor=that.options.previousDivisor||1,dir=that._direction,children=[kendo.fx(that.element).slideIn(dir).setReverse(reverse)];return previous&&children.push(kendo.fx(previous).slideIn(directions[dir].reverse).divisor(divisor).setReverse(!reverse)),children}}),createToggleEffect("fade","opacity",1,0),createToggleEffect("zoom","scale",1,.01),createEffect("slideMargin",{prepare:function(start,end){var margin,that=this,element=that.element,options=that.options,origin=element.data(ORIGIN),offset=options.offset,reverse=that._reverse;reverse||null!==origin||element.data(ORIGIN,parseFloat(element.css("margin-"+options.axis))),margin=element.data(ORIGIN)||0,end["margin-"+options.axis]=reverse?margin:margin+offset}}),createEffect("slideTo",{prepare:function(start,end){var that=this,element=that.element,options=that.options,offset=options.offset.split(","),reverse=that._reverse;transforms?(end.translatex=reverse?0:offset[0],end.translatey=reverse?0:offset[1]):(end.left=reverse?0:offset[0],end.top=reverse?0:offset[1]),element.css("left")}}),createEffect("expand",{directions:["horizontal","vertical"],restore:[OVERFLOW],prepare:function(start,end){var that=this,element=that.element,options=that.options,reverse=that._reverse,property="vertical"===that._direction?HEIGHT:WIDTH,setLength=element[0].style[property],oldLength=element.data(property),length=parseFloat(oldLength||setLength),realLength=round(element.css(property,AUTO)[property]());start.overflow=HIDDEN,length=options&&options.reset?realLength||length:length||realLength,end[property]=(reverse?0:length)+PX,start[property]=(reverse?length:0)+PX,oldLength===undefined&&element.data(property,setLength)},shouldHide:function(){return this._reverse},teardown:function(){var that=this,element=that.element,property="vertical"===that._direction?HEIGHT:WIDTH,length=element.data(property);(length==AUTO||length===BLANK)&&setTimeout(function(){element.css(property,AUTO).css(property)},0)}});var TRANSFER_START_STATE={position:"absolute",marginLeft:0,marginTop:0,scale:1};createEffect("transfer",{init:function(element,target){this.element=element,this.options={target:target},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(start,end){var that=this,element=that.element,outerBox=fx.box(element),innerBox=fx.box(that.options.target),currentScale=animationProperty(element,"scale"),scale=fx.fillScale(innerBox,outerBox),transformOrigin=fx.transformOrigin(innerBox,outerBox);extend(start,TRANSFER_START_STATE),end.scale=1,element.css(TRANSFORM,"scale(1)").css(TRANSFORM),element.css(TRANSFORM,"scale("+currentScale+")"),start.top=outerBox.top,start.left=outerBox.left,start.transformOrigin=transformOrigin.x+PX+" "+transformOrigin.y+PX,that._reverse?start.scale=scale:end.scale=scale}});var CLIPS={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},ROTATIONS={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};createEffect("turningPage",{directions:FOUR_DIRECTIONS,init:function(element,direction,container){Effect.prototype.init.call(this,element,direction),this._container=container},prepare:function(start,end){var that=this,reverse=that._reverse,direction=reverse?directions[that._direction].reverse:that._direction,rotation=ROTATIONS[direction];start.zIndex=1,that._clipInHalf&&(start.clip=clipInHalf(that._container,kendo.directions[direction].reverse)),start[BACKFACE]=HIDDEN,end[TRANSFORM]=TRANSFORM_PERSPECTIVE+(reverse?rotation.start:rotation.end),start[TRANSFORM]=TRANSFORM_PERSPECTIVE+(reverse?rotation.end:rotation.start)},setup:function(){this._container.append(this.element)},face:function(value){return this._face=value,this},shouldHide:function(){var that=this,reverse=that._reverse,face=that._face;return reverse&&!face||!reverse&&face},clipInHalf:function(value){return this._clipInHalf=value,this},temporary:function(){return this.element.addClass("temp-page"),this}}),createEffect("staticPage",{directions:FOUR_DIRECTIONS,init:function(element,direction,container){Effect.prototype.init.call(this,element,direction),this._container=container},restore:["clip"],prepare:function(start,end){var that=this,direction=that._reverse?directions[that._direction].reverse:that._direction;start.clip=clipInHalf(that._container,direction),start.opacity=.999,end.opacity=1},shouldHide:function(){var that=this,reverse=that._reverse,face=that._face;return reverse&&!face||!reverse&&face},face:function(value){return this._face=value,this}}),createEffect("pageturn",{directions:["horizontal","vertical"],init:function(element,direction,face,back){Effect.prototype.init.call(this,element,direction),this.options={},this.options.face=face,this.options.back=back},children:function(){var temp,that=this,options=that.options,direction="horizontal"===that._direction?"left":"top",reverseDirection=kendo.directions[direction].reverse,reverse=that._reverse,faceClone=options.face.clone(!0).removeAttr("id"),backClone=options.back.clone(!0).removeAttr("id"),element=that.element;return reverse&&(temp=direction,direction=reverseDirection,reverseDirection=temp),[kendo.fx(options.face).staticPage(direction,element).face(!0).setReverse(reverse),kendo.fx(options.back).staticPage(reverseDirection,element).setReverse(reverse),kendo.fx(faceClone).turningPage(direction,element).face(!0).clipInHalf(!0).temporary().setReverse(reverse),kendo.fx(backClone).turningPage(reverseDirection,element).clipInHalf(!0).temporary().setReverse(reverse)];
},prepare:function(start,end){start[PERSPECTIVE]=DEFAULT_PERSPECTIVE,start.transformStyle="preserve-3d",start.opacity=.999,end.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),createEffect("flip",{directions:["horizontal","vertical"],init:function(element,direction,face,back){Effect.prototype.init.call(this,element,direction),this.options={},this.options.face=face,this.options.back=back},children:function(){var temp,that=this,options=that.options,direction="horizontal"===that._direction?"left":"top",reverseDirection=kendo.directions[direction].reverse,reverse=that._reverse,element=that.element;return reverse&&(temp=direction,direction=reverseDirection,reverseDirection=temp),[kendo.fx(options.face).turningPage(direction,element).face(!0).setReverse(reverse),kendo.fx(options.back).turningPage(reverseDirection,element).setReverse(reverse)]},prepare:function(start){start[PERSPECTIVE]=DEFAULT_PERSPECTIVE,start.transformStyle="preserve-3d"}});var RESTORE_OVERFLOW=!support.mobileOS.android,IGNORE_TRANSITION_EVENT_SELECTOR=".km-touch-scrollbar, .km-actionsheet-wrapper";createEffect("replace",{_before:$.noop,_after:$.noop,init:function(element,previous,transitionClass){Effect.prototype.init.call(this,element),this._previous=$(previous),this._transitionClass=transitionClass},duration:function(){throw new Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(callback){return this._before=callback,this},afterTransition:function(callback){return this._after=callback,this},_both:function(){return $().add(this._element).add(this._previous)},_containerClass:function(){var direction=this._direction,containerClass="k-fx k-fx-start k-fx-"+this._transitionClass;return direction&&(containerClass+=" k-fx-"+direction),this._reverse&&(containerClass+=" k-fx-reverse"),containerClass},complete:function(e){if(!(!this.deferred||e&&$(e.target).is(IGNORE_TRANSITION_EVENT_SELECTOR))){var container=this.container;container.removeClass("k-fx-end").removeClass(this._containerClass()).off(transitions.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),RESTORE_OVERFLOW&&container.css(OVERFLOW,""),this.isAbsolute||this._both().css(POSITION,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var originalOverflow,that=this,element=that.element,previous=that._previous,container=element.parents().filter(previous.parents()).first(),both=that._both(),deferred=$.Deferred(),originalPosition=element.css(POSITION);return container.length||(container=element.parent()),this.container=container,this.deferred=deferred,this.isAbsolute="absolute"==originalPosition,this.isAbsolute||both.css(POSITION,"absolute"),RESTORE_OVERFLOW&&(originalOverflow=container.css(OVERFLOW),container.css(OVERFLOW,"hidden")),transitions?(element.addClass("k-fx-hidden"),container.addClass(this._containerClass()),this.completeProxy=$.proxy(this,"complete"),container.on(transitions.event,this.completeProxy),kendo.animationFrame(function(){element.removeClass("k-fx-hidden").addClass("k-fx-next"),previous.css("display","").addClass("k-fx-current"),that._before(previous,element),kendo.animationFrame(function(){container.removeClass("k-fx-start").addClass("k-fx-end"),that._after(previous,element)})})):this.complete(),deferred.promise()},stop:function(){this.complete()}});var Animation=kendo.Class.extend({init:function(){var that=this;that._tickProxy=proxy(that._tick,that),that._started=!1},tick:$.noop,done:$.noop,onEnd:$.noop,onCancel:$.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,kendo.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var that=this;that._started&&(that.tick(),that.done()?(that._started=!1,that.onEnd()):kendo.animationFrame(that._tickProxy))}}),Transition=Animation.extend({init:function(options){var that=this;extend(that,options),Animation.fn.init.call(that)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(options){var that=this,movable=that.movable;that.initial=movable[that.axis],that.delta=options.location-that.initial,that.duration="number"==typeof options.duration?options.duration:300,that.tick=that._easeProxy(options.ease),that.startDate=new Date,that.start()},_easeProxy:function(ease){var that=this;return function(){that.movable.moveAxis(that.axis,ease(that.timePassed(),that.initial,that.delta,that.duration))}}});extend(Transition,{easeOutExpo:function(t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeOutBack:function(t,b,c,d,s){return s=1.70158,c*((t=t/d-1)*t*((s+1)*t+s)+1)+b}}),fx.Animation=Animation,fx.Transition=Transition,fx.createEffect=createEffect,fx.box=function(element){element=$(element);var result=element.offset();return result.width=element.outerWidth(),result.height=element.outerHeight(),result},fx.transformOrigin=function(inner,outer){var x=(inner.left-outer.left)*outer.width/(outer.width-inner.width),y=(inner.top-outer.top)*outer.height/(outer.height-inner.height);return{x:isNaN(x)?0:x,y:isNaN(y)?0:y}},fx.fillScale=function(inner,outer){return Math.min(inner.width/outer.width,inner.height/outer.height)},fx.fitScale=function(inner,outer){return Math.max(inner.width/outer.width,inner.height/outer.height)}}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,mobile=kendo.mobile,fx=kendo.effects,ui=mobile.ui,proxy=$.proxy,extend=$.extend,Widget=ui.Widget,Class=kendo.Class,Movable=kendo.ui.Movable,Pane=kendo.ui.Pane,PaneDimensions=kendo.ui.PaneDimensions,Transition=fx.Transition,Animation=fx.Animation,abs=Math.abs,SNAPBACK_DURATION=500,SCROLLBAR_OPACITY=.7,FRICTION=.96,VELOCITY_MULTIPLIER=10,MAX_VELOCITY=55,OUT_OF_BOUNDS_FRICTION=.5,ANIMATED_SCROLLER_PRECISION=5,RELEASECLASS="km-scroller-release",REFRESHCLASS="km-scroller-refresh",PULL="pull",CHANGE="change",RESIZE="resize",SCROLL="scroll",MOUSE_WHEEL_ID=2,ZoomSnapBack=Animation.extend({init:function(options){var that=this;Animation.fn.init.call(that),extend(that,options),that.userEvents.bind("gestureend",proxy(that.start,that)),that.tapCapture.bind("press",proxy(that.cancel,that))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var movable=this.movable;movable.scaleWith(1.1),this.dimensions.rescale(movable.scale)},onEnd:function(){var movable=this.movable;movable.scaleTo(this.dimensions.minScale),this.dimensions.rescale(movable.scale)}}),DragInertia=Animation.extend({init:function(options){var that=this;Animation.fn.init.call(that),extend(that,options,{transition:new Transition({axis:options.axis,movable:options.movable,onEnd:function(){that._end()}})}),that.tapCapture.bind("press",function(){that.cancel()}),that.userEvents.bind("end",proxy(that.start,that)),that.userEvents.bind("gestureend",proxy(that.start,that)),that.userEvents.bind("tap",proxy(that.onEnd,that))},onCancel:function(){this.transition.cancel()},freeze:function(location){var that=this;that.cancel(),that._moveTo(location)},onEnd:function(){var that=this;that.paneAxis.outOfBounds()?that._snapBack():that._end()},done:function(){return abs(this.velocity)<1},start:function(e){var velocity,that=this;that.dimension.enabled&&(that.paneAxis.outOfBounds()?that._snapBack():(velocity=e.touch.id===MOUSE_WHEEL_ID?0:e.touch[that.axis].velocity,that.velocity=Math.max(Math.min(velocity*that.velocityMultiplier,MAX_VELOCITY),-MAX_VELOCITY),that.tapCapture.captureNext(),Animation.fn.start.call(that)))},tick:function(){var that=this,dimension=that.dimension,friction=that.paneAxis.outOfBounds()?OUT_OF_BOUNDS_FRICTION:that.friction,delta=that.velocity*=friction,location=that.movable[that.axis]+delta;!that.elastic&&dimension.outOfBounds(location)&&(location=Math.max(Math.min(location,dimension.max),dimension.min),that.velocity=0),that.movable.moveAxis(that.axis,location)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var that=this,dimension=that.dimension,snapBack=that.movable[that.axis]>dimension.max?dimension.max:dimension.min;that._moveTo(snapBack)},_moveTo:function(location){this.transition.moveTo({location:location,duration:SNAPBACK_DURATION,ease:Transition.easeOutExpo})}}),AnimatedScroller=Animation.extend({init:function(options){var that=this;kendo.effects.Animation.fn.init.call(this),extend(that,options,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return abs(this.offset.y)<ANIMATED_SCROLLER_PRECISION&&abs(this.offset.x)<ANIMATED_SCROLLER_PRECISION},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(from,to){this.offset={},this.origin=from,this.destination=to},setCallback:function(callback){callback&&kendo.isFunction(callback)?this.callback=callback:callback=undefined},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),ScrollBar=Class.extend({init:function(options){var that=this,horizontal="x"===options.axis,element=$('<div class="km-touch-scrollbar km-'+(horizontal?"horizontal":"vertical")+'-scrollbar" />');extend(that,options,{element:element,elementSize:0,movable:new Movable(element),scrollMovable:options.movable,alwaysVisible:options.alwaysVisible,size:horizontal?"width":"height"}),that.scrollMovable.bind(CHANGE,proxy(that.refresh,that)),that.container.append(element),options.alwaysVisible&&that.show()},refresh:function(){var that=this,axis=that.axis,dimension=that.dimension,paneSize=dimension.size,scrollMovable=that.scrollMovable,sizeRatio=paneSize/dimension.total,position=Math.round(-scrollMovable[axis]*sizeRatio),size=Math.round(paneSize*sizeRatio);sizeRatio>=1?this.element.css("display","none"):this.element.css("display",""),position+size>paneSize?size=paneSize-position:0>position&&(size+=position,position=0),that.elementSize!=size&&(that.element.css(that.size,size+"px"),that.elementSize=size),that.movable.moveAxis(axis,position)},show:function(){this.element.css({opacity:SCROLLBAR_OPACITY,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})}}),Scroller=Widget.extend({init:function(element,options){var that=this;if(Widget.fn.init.call(that,element,options),element=that.element,that._native=that.options.useNative&&kendo.support.hasNativeScrolling,that._native)return element.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),void extend(that,{scrollElement:element,fixedContainer:element.children().first()});element.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var inner=element.children().eq(1),tapCapture=new kendo.TapCapture(element),movable=new Movable(inner),dimensions=new PaneDimensions({element:inner,container:element,forcedEnabled:that.options.zoom}),avoidScrolling=this.options.avoidScrolling,userEvents=new kendo.UserEvents(element,{allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:that.options.zoom,start:function(e){dimensions.refresh();var velocityX=abs(e.x.velocity),velocityY=abs(e.y.velocity),horizontalSwipe=2*velocityX>=velocityY,originatedFromFixedContainer=$.contains(that.fixedContainer[0],e.event.target),verticalSwipe=2*velocityY>=velocityX;!originatedFromFixedContainer&&!avoidScrolling(e)&&that.enabled&&(dimensions.x.enabled&&horizontalSwipe||dimensions.y.enabled&&verticalSwipe)?userEvents.capture():userEvents.cancel()}}),pane=new Pane({movable:movable,dimensions:dimensions,userEvents:userEvents,elastic:that.options.elastic}),zoomSnapBack=new ZoomSnapBack({movable:movable,dimensions:dimensions,userEvents:userEvents,tapCapture:tapCapture}),animatedScroller=new AnimatedScroller({moveTo:function(coordinates){that.scrollTo(coordinates.x,coordinates.y)}});movable.bind(CHANGE,function(){that.scrollTop=-movable.y,that.scrollLeft=-movable.x,that.trigger(SCROLL,{scrollTop:that.scrollTop,scrollLeft:that.scrollLeft})}),that.options.mousewheelScrolling&&element.on("DOMMouseScroll mousewheel",proxy(this,"_wheelScroll")),extend(that,{movable:movable,dimensions:dimensions,zoomSnapBack:zoomSnapBack,animatedScroller:animatedScroller,userEvents:userEvents,pane:pane,tapCapture:tapCapture,pulled:!1,enabled:!0,scrollElement:inner,scrollTop:0,scrollLeft:0,fixedContainer:element.children().first()}),that._initAxis("x"),that._initAxis("y"),that._wheelEnd=function(){that._wheel=!1,that.userEvents.end(0,that._wheelY)},dimensions.refresh(),that.options.pullToRefresh&&that._initPullToRefresh()},_wheelScroll:function(e){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var delta=kendo.wheelDeltaY(e);delta&&(this._wheelY+=delta,this.userEvents.move(0,this._wheelY)),e.preventDefault()},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(min,max){this.dimensions.y.virtualSize(min,max)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:[PULL,SCROLL,RESIZE],_resize:function(){this._native||this.contentResized()},setOptions:function(options){var that=this;Widget.fn.setOptions.call(that,options),options.pullToRefresh&&that._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var dimensions=this.dimensions;dimensions.refresh(),this._scale(dimensions.fitScale),this.movable.moveTo(dimensions.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(x,y){this._native?(this.scrollElement.scrollLeft(abs(x)),this.scrollElement.scrollTop(abs(y))):(this.dimensions.refresh(),this.movable.moveTo({x:x,y:y}))},animatedScrollTo:function(x,y,callback){var from,to;this._native?this.scrollTo(x,y):(from={x:this.movable.x,y:this.movable.y},to={x:x,y:y},this.animatedScroller.setCoordinates(from,to),this.animatedScroller.setCallback(callback),this.animatedScroller.start())},pullHandled:function(){var that=this;that.refreshHint.removeClass(REFRESHCLASS),that.hintContainer.html(that.pullTemplate({})),that.yinertia.onEnd(),that.xinertia.onEnd(),that.userEvents.cancel()},destroy:function(){Widget.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(scale){this.dimensions.rescale(scale),this.movable.scaleTo(scale)},_initPullToRefresh:function(){var that=this;that.dimensions.y.forceEnabled(),that.pullTemplate=kendo.template(that.options.messages.pullTemplate),that.releaseTemplate=kendo.template(that.options.messages.releaseTemplate),that.refreshTemplate=kendo.template(that.options.messages.refreshTemplate),that.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+that.pullTemplate({})+"</span></span>"),that.refreshHint=that.scrollElement.children().first(),that.hintContainer=that.refreshHint.children(".km-template"),that.pane.y.bind("change",proxy(that._paneChange,that)),that.userEvents.bind("end",proxy(that._dragEnd,that))},_dragEnd:function(){var that=this;that.pulled&&(that.pulled=!1,that.refreshHint.removeClass(RELEASECLASS).addClass(REFRESHCLASS),that.hintContainer.html(that.refreshTemplate({})),that.yinertia.freeze(that.options.pullOffset/2),that.trigger("pull"))},_paneChange:function(){var that=this;that.movable.y/OUT_OF_BOUNDS_FRICTION>that.options.pullOffset?that.pulled||(that.pulled=!0,that.refreshHint.removeClass(REFRESHCLASS).addClass(RELEASECLASS),that.hintContainer.html(that.releaseTemplate({}))):that.pulled&&(that.pulled=!1,that.refreshHint.removeClass(RELEASECLASS),that.hintContainer.html(that.pullTemplate({})))},_initAxis:function(axis){var that=this,movable=that.movable,dimension=that.dimensions[axis],tapCapture=that.tapCapture,paneAxis=that.pane[axis],scrollBar=new ScrollBar({axis:axis,movable:movable,dimension:dimension,container:that.element,alwaysVisible:that.options.visibleScrollHints});dimension.bind(CHANGE,function(){scrollBar.refresh()}),paneAxis.bind(CHANGE,function(){scrollBar.show()}),that[axis+"inertia"]=new DragInertia({axis:axis,paneAxis:paneAxis,movable:movable,tapCapture:tapCapture,userEvents:that.userEvents,dimension:dimension,elastic:that.options.elastic,friction:that.options.friction||FRICTION,velocityMultiplier:that.options.velocityMultiplier||VELOCITY_MULTIPLIER,end:function(){scrollBar.hide(),that.trigger("scrollEnd",{axis:axis,scrollTop:that.scrollTop,scrollLeft:that.scrollLeft})}})}});ui.plugin(Scroller)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function assign(instance,fields,value){for(var field,idx=0,lastIndex=fields.length-1;lastIndex>idx;++idx)field=fields[idx],field in instance||(instance[field]={}),instance=instance[field];instance[fields[lastIndex]]=value}var kendo=window.kendo,ui=kendo.ui,Select=ui.Select,support=kendo.support,activeElement=kendo._activeElement,ObservableObject=kendo.data.ObservableObject,keys=kendo.keys,ns=".kendoDropDownList",DISABLED="disabled",READONLY="readonly",CHANGE="change",FOCUSED="k-state-focused",DEFAULT="k-state-default",STATEDISABLED="k-state-disabled",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,TABINDEX="tabindex",STATE_FILTER="filter",STATE_ACCEPT="accept",proxy=$.proxy,DropDownList=Select.extend({init:function(element,options){var optionLabel,text,disabled,that=this,index=options&&options.index;that.ns=ns,options=$.isArray(options)?{dataSource:options}:options,Select.fn.init.call(that,element,options),options=that.options,element=that.element.on("focus"+ns,proxy(that._focusHandler,that)),that._focusInputHandler=$.proxy(that._focusInput,that),that._inputTemplate(),that._reset(),that._prev="",that._word="",that.optionLabel=$(),that._wrapper(),that._tabindex(),that.wrapper.data(TABINDEX,that.wrapper.attr(TABINDEX)),that._span(),that._popup(),that._mobile(),that._dataSource(),that._ignoreCase(),that._filterHeader(),that._aria(),that._enable(),that._oldIndex=that.selectedIndex=-1,index!==undefined&&(options.index=index),that._initialIndex=options.index,that._optionLabel(),that._initList(),that._cascade(),options.autoBind?that.dataSource.fetch():-1===that.selectedIndex&&(text=options.text||"",text||(optionLabel=options.optionLabel,optionLabel&&0===options.index?text=optionLabel:that._isSelect&&(text=element.children(":selected").text())),that._textAccessor(text)),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),that.listView.bind("click",function(e){e.preventDefault()}),kendo.notify(that)},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1,virtual:!1,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",CHANGE,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(options){Select.fn.setOptions.call(this,options),this.listView.setOptions(this._listOptions(options)),this._optionLabel(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria(),!this.value()&&this.optionLabel[0]&&this.select(0)},destroy:function(){var that=this;that.wrapper.off(ns),that.element.off(ns),that._inputWrapper.off(ns),that._arrow.off(),that._arrow=null,that.optionLabel.off(),Select.fn.destroy.call(that)},open:function(){var that=this;that.popup.visible()||(that.listView.isBound()&&that._state!==STATE_ACCEPT?that._allowOpening()&&(that.popup.one("activate",that._focusInputHandler),that.popup.open(),that._focusItem()):(that._open=!0,that._state="rebind",that.filterInput&&(that.filterInput.val(""),that._prev=""),that._filterSource()))},_focusInput:function(){this._focusElement(this.filterInput)},_allowOpening:function(){return this.optionLabel[0]||this.filterInput||this.dataSource.view().length},toggle:function(toggle){this._toggle(toggle,!0)},current:function(candidate){var current;return candidate===undefined?(current=this.listView.focus(),!current&&0===this.selectedIndex&&this.optionLabel[0]?this.optionLabel:current):void this._focus(candidate)},dataItem:function(index){var that=this,dataItem=null,hasOptionLabel=!!that.optionLabel[0],optionLabel=that.options.optionLabel;if(index===undefined)dataItem=that.listView.selectedDataItems()[0];else{if("number"!=typeof index){if(that.options.virtual)return that.dataSource.getByUid($(index).data("uid"));index=index.hasClass("k-list-optionlabel")?-1:$(that.items()).index(index)}else hasOptionLabel&&(index-=1);dataItem=that.dataSource.flatView()[index]}return!dataItem&&hasOptionLabel&&(dataItem=$.isPlainObject(optionLabel)?new ObservableObject(optionLabel):that._assignInstance(that._optionLabelText(),"")),dataItem},refresh:function(){this.listView.refresh()},text:function(text){var dataItem,loweredText,that=this,ignoreCase=that.options.ignoreCase;return text=null===text?"":text,text===undefined?that._textAccessor():("string"==typeof text&&(loweredText=ignoreCase?text.toLowerCase():text,that._select(function(data){return data=that._text(data),ignoreCase&&(data=(data+"").toLowerCase()),data===loweredText}),dataItem=that.dataItem(),dataItem&&(text=dataItem)),void that._textAccessor(text))},value:function(value){var that=this,dataSource=that.dataSource;return value===undefined?(value=that._accessor()||that.listView.value()[0],value===undefined||null===value?"":value):(value&&(that._initialIndex=null),that._request&&that.options.cascadeFrom&&that.listView.isBound()?(that._valueSetter&&dataSource.unbind(CHANGE,that._valueSetter),that._valueSetter=proxy(function(){that.value(value)},that),void dataSource.one(CHANGE,that._valueSetter)):(that.listView.value(value).done(function(){-1===that.selectedIndex&&that.text()&&(that.text(""),that._accessor("",-1)),that._old=that._accessor(),that._oldIndex=that.selectedIndex}),void that._fetchData()))},_optionLabel:function(){var that=this,options=that.options,optionLabel=options.optionLabel,template=options.optionLabelTemplate;return optionLabel?(template||(template="#:",template+="string"==typeof optionLabel?"data":kendo.expr(options.dataTextField,"data"),template+="#"),"function"!=typeof template&&(template=kendo.template(template)),that.optionLabelTemplate=template,that.optionLabel[0]||(that.optionLabel=$('<div class="k-list-optionlabel"></div>').prependTo(that.list)),that.optionLabel.html(template(optionLabel)).off().click(proxy(that._click,that)).on(HOVEREVENTS,that._toggleHover),void that.angular("compile",function(){return{elements:that.optionLabel}})):(that.optionLabel.off().remove(),void(that.optionLabel=$()))},_optionLabelText:function(){var optionLabel=this.options.optionLabel;return"string"==typeof optionLabel?optionLabel:this._text(optionLabel)},_listBound:function(){var dataItem,height,value,that=this,initialIndex=that._initialIndex,optionLabel=that.options.optionLabel,filtered=that._state===STATE_FILTER,data=that.dataSource.flatView(),length=data.length;that._angularItems("compile"),that._presetValue=!1,that.options.virtual||(height=that._height(filtered?length||1:length),that._calculateGroupPadding(height)),that.popup.position(),that._isSelect&&(value=that.value(),length?optionLabel&&(optionLabel=that._option("",that._optionLabelText())):value&&(optionLabel=that._option(value,that.text())),that._options(data,optionLabel,value)),that._makeUnselectable(),filtered||(that._open&&that.toggle(that._allowOpening()),that._open=!1,that._fetch||(length?(!that.listView.value().length&&initialIndex>-1&&null!==initialIndex&&that.select(initialIndex),that._initialIndex=null,dataItem=that.listView.selectedDataItems()[0],dataItem&&that.text()!==that._text(dataItem)&&that._selectValue(dataItem)):that._textAccessor()!==that._optionLabelText()&&(that.listView.value(""),that._selectValue(null),that._oldIndex=that.selectedIndex))),that._hideBusy(),that.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),(this._presetValue||this._old&&-1===this._oldIndex)&&(this._oldIndex=this.selectedIndex)},_focusHandler:function(){this.wrapper.focus()},_focusinHandler:function(){this._inputWrapper.addClass(FOCUSED),this._prevent=!1},_focusoutHandler:function(){var that=this,filtered=that._state===STATE_FILTER,isIFrame=window.self!==window.top,focusedItem=that._focus();that._prevent||(clearTimeout(that._typingTimeout),filtered&&focusedItem&&!that.trigger("select",{item:focusedItem})&&that._select(focusedItem,!that.dataSource.view().length),support.mobileOS.ios&&isIFrame?that._change():that._blur(),that._inputWrapper.removeClass(FOCUSED),that._prevent=!0,that._open=!1,that.element.blur())},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this.popup.unbind("activate",this._focusInputHandler),this._focused=this.wrapper,this._toggle()},_editable:function(options){var that=this,element=that.element,disable=options.disable,readonly=options.readonly,wrapper=that.wrapper.add(that.filterInput).off(ns),dropDownWrapper=that._inputWrapper.off(HOVEREVENTS);readonly||disable?disable?(wrapper.removeAttr(TABINDEX),dropDownWrapper.addClass(STATEDISABLED).removeClass(DEFAULT)):(dropDownWrapper.addClass(DEFAULT).removeClass(STATEDISABLED),wrapper.on("focusin"+ns,proxy(that._focusinHandler,that)).on("focusout"+ns,proxy(that._focusoutHandler,that))):(element.removeAttr(DISABLED).removeAttr(READONLY),dropDownWrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),wrapper.attr(TABINDEX,wrapper.data(TABINDEX)).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1).on("keydown"+ns,proxy(that._keydown,that)).on("focusin"+ns,proxy(that._focusinHandler,that)).on("focusout"+ns,proxy(that._focusoutHandler,that)).on("mousedown"+ns,proxy(that._wrapperMousedown,that)),that.wrapper.on("click"+ns,proxy(that._wrapperClick,that)),that.filterInput||wrapper.on("keypress"+ns,proxy(that._keypress,that))),element.attr(DISABLED,disable).attr(READONLY,readonly),wrapper.attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)},_option:function(value,text){return'<option value="'+value+'">'+text+"</option>"},_keydown:function(e){var isInputActive,handled,that=this,key=e.keyCode,altKey=e.altKey,isPopupVisible=that.popup.visible();if(that.filterInput&&(isInputActive=that.filterInput[0]===activeElement()),key===keys.LEFT?(key=keys.UP,handled=!0):key===keys.RIGHT&&(key=keys.DOWN,handled=!0),!handled||!isInputActive){if(e.keyCode=key,altKey&&key===keys.UP&&that._focusElement(that.wrapper),key===keys.ENTER&&that._typingTimeout&&that.filterInput&&isPopupVisible)return void e.preventDefault();handled=that._move(e),handled||(isPopupVisible&&that.filterInput||(key===keys.HOME?(handled=!0,that._firstItem()):key===keys.END&&(handled=!0,that._lastItem()),handled&&(that._select(that._focus()),e.preventDefault())),altKey||handled||!that.filterInput||that._search())}},_matchText:function(text,index){var that=this,ignoreCase=that.options.ignoreCase,found=!1;return text+="",ignoreCase&&(text=text.toLowerCase()),0===text.indexOf(that._word)&&(that.optionLabel[0]&&(index+=1),that._select(index),that.popup.visible()||that._change(),found=!0),found},_selectNext:function(index){for(var text,that=this,startIndex=index,data=that.dataSource.flatView(),length=data.length;length>index;index++)if(text=that._text(data[index]),text&&that._matchText(text,index)&&(1!==that._word.length||startIndex!==that.selectedIndex))return!0;if(startIndex>0&&length>startIndex)for(index=0;startIndex>=index;index++)if(text=that._text(data[index]),text&&that._matchText(text,index))return!0;return!1},_keypress:function(e){var that=this;if(0!==e.which&&e.keyCode!==kendo.keys.ENTER){var character=String.fromCharCode(e.charCode||e.keyCode),index=that.selectedIndex,length=that._word.length;that.options.ignoreCase&&(character=character.toLowerCase())," "===character&&e.preventDefault(),length||(that._word=character),that._last===character&&1>=length&&index>-1&&that._selectNext(index)||(length&&(that._word+=character),that._last=character,that._search())}},_popupOpen:function(){var popup=this.popup;popup.wrapper=kendo.wrap(popup.element),popup.element.closest(".km-root")[0]&&(popup.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){Select.fn._popup.call(this),this.popup.one("open",proxy(this._popupOpen,this))},_click:function(e){var item=e.item||$(e.currentTarget);return this.trigger("select",{item:item})?void this.close():(this._userTriggered=!0,this._select(item),this._focusElement(this.wrapper),void this._blur())},_focusElement:function(element){var active=activeElement(),wrapper=this.wrapper,filterInput=this.filterInput,compareElement=element===filterInput?wrapper:filterInput,touchEnabled=support.mobileOS&&(support.touch||support.MSPointers||support.pointers);filterInput&&filterInput[0]===element[0]&&touchEnabled||filterInput&&compareElement[0]===active&&(this._prevent=!0,this._focused=element.focus())},_filter:function(word){if(word){var that=this,ignoreCase=that.options.ignoreCase;ignoreCase&&(word=word.toLowerCase()),that._select(function(dataItem){var text=that._text(dataItem);return text!==undefined?(text+="",ignoreCase&&(text=text.toLowerCase()),0===text.indexOf(word)):void 0})}},_search:function(){var that=this,dataSource=that.dataSource,index=that.selectedIndex;if(clearTimeout(that._typingTimeout),"none"!==that.options.filter)that._typingTimeout=setTimeout(function(){var value=that.filterInput.val();that._prev!==value&&(that._prev=value,that.search(value)),that._typingTimeout=null},that.options.delay);else{if(that._typingTimeout=setTimeout(function(){that._word=""},that.options.delay),-1===index&&(index=0),!that.ul[0].firstChild)return void dataSource.fetch().done(function(){dataSource.data()[0]&&index>-1&&that._selectNext(index)});that._selectNext(index)}},_get:function(candidate){var data,found,idx,isFunction="function"==typeof candidate,jQueryCandidate=isFunction?$():$(candidate);if(this.optionLabel[0]&&("number"==typeof candidate?candidate>-1&&(candidate-=1):jQueryCandidate.hasClass("k-list-optionlabel")&&(candidate=-1)),isFunction){for(data=this.dataSource.flatView(),idx=0;idx<data.length;idx++)if(candidate(data[idx])){candidate=idx,found=!0;break}found||(candidate=-1)}return candidate},_firstItem:function(){this.optionLabel[0]?this._focus(this.optionLabel):this.listView.focusFirst()},_lastItem:function(){this.optionLabel.removeClass("k-state-focused"),this.listView.focusLast()},_nextItem:function(){this.optionLabel.hasClass("k-state-focused")?(this.optionLabel.removeClass("k-state-focused"),this.listView.focusFirst()):this.listView.focusNext();
},_prevItem:function(){this.optionLabel.hasClass("k-state-focused")||(this.listView.focusPrev(),this.listView.focus()||this.optionLabel.addClass("k-state-focused"))},_focusItem:function(){var listView=this.listView,focusedItem=listView.focus(),index=listView.select();index=index[index.length-1],index===undefined&&this.options.highlightFirst&&!focusedItem&&(index=0),index!==undefined?listView.focus(index):this.options.optionLabel?(this._focus(this.optionLabel),this._select(this.optionLabel)):listView.scrollToIndex(0)},_focus:function(candidate){var listView=this.listView,optionLabel=this.optionLabel;return candidate===undefined?(candidate=listView.focus(),!candidate&&optionLabel.hasClass("k-state-focused")&&(candidate=optionLabel),candidate):(optionLabel.removeClass("k-state-focused"),candidate=this._get(candidate),listView.focus(candidate),void(-1===candidate&&optionLabel.addClass("k-state-focused")))},_select:function(candidate,keepState){var that=this;candidate=that._get(candidate),that.listView.select(candidate),keepState||that._state!==STATE_FILTER||(that.listView.filter(!1),that._state=STATE_ACCEPT),-1===candidate&&that._selectValue(null)},_selectValue:function(dataItem){var that=this,optionLabel=that.options.optionLabel,labelElement=that.optionLabel,idx=that.listView.select(),value="",text="";idx=idx[idx.length-1],idx===undefined&&(idx=-1),labelElement.removeClass("k-state-focused k-state-selected"),dataItem?(text=dataItem,value=that._dataValue(dataItem),optionLabel&&(idx+=1)):optionLabel&&(that._focus(labelElement.addClass("k-state-selected")),text=that._optionLabelText(),value="string"==typeof optionLabel?"":that._value(optionLabel),idx=0),that.selectedIndex=idx,null===value&&(value=""),that._textAccessor(text),that._accessor(value,idx),that._triggerCascade()},_mobile:function(){var that=this,popup=that.popup,mobileOS=support.mobileOS,root=popup.element.parents(".km-root").eq(0);root.length&&mobileOS&&(popup.options.animation.open.effects=mobileOS.android||mobileOS.meego?"fadeIn":mobileOS.ios||mobileOS.wp?"slideIn:up":popup.options.animation.open.effects)},_filterHeader:function(){var icon,options=this.options,filterEnalbed="none"!==options.filter;this.filterInput&&(this.filterInput.off(ns).parent().remove(),this.filterInput=null),filterEnalbed&&(icon='<span unselectable="on" class="k-icon k-i-search">select</span>',this.filterInput=$('<input class="k-textbox"/>').attr({role:"listbox","aria-haspopup":!0,"aria-expanded":!1}),this.list.prepend($('<span class="k-list-filter" />').append(this.filterInput.add(icon))))},_span:function(){var span,that=this,wrapper=that.wrapper,SELECTOR="span.k-input";span=wrapper.find(SELECTOR),span[0]||(wrapper.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(that.element),span=wrapper.find(SELECTOR)),that.span=span,that._inputWrapper=$(wrapper[0].firstChild),that._arrow=wrapper.find(".k-icon")},_wrapper:function(){var wrapper,that=this,element=that.element,DOMelement=element[0];wrapper=element.parent(),wrapper.is("span.k-widget")||(wrapper=element.wrap("<span />").parent(),wrapper[0].style.cssText=DOMelement.style.cssText,wrapper[0].title=DOMelement.title),element.hide(),that._focused=that.wrapper=wrapper.addClass("k-widget k-dropdown k-header").addClass(DOMelement.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})},_clearSelection:function(parent){this.select(parent.value()?0:-1)},_inputTemplate:function(){var that=this,template=that.options.valueTemplate;template=template?kendo.template(template):$.proxy(kendo.template("#:this._text(data)#",{useWithBlock:!1}),that),that.valueTemplate=template},_textAccessor:function(text){var dataItem=null,template=this.valueTemplate,options=this.options,optionLabel=options.optionLabel,span=this.span;if(text===undefined)return span.text();$.isPlainObject(text)||text instanceof ObservableObject?dataItem=text:optionLabel&&this._optionLabelText()===text&&(dataItem=optionLabel,template=this.optionLabelTemplate),dataItem||(dataItem=this._assignInstance(text,this._accessor()));var getElements=function(){return{elements:span.get(),data:[{dataItem:dataItem}]}};this.angular("cleanup",getElements),span.html(template(dataItem)),this.angular("compile",getElements)},_preselect:function(value,text){value||text||(text=this._optionLabelText()),this._accessor(value),this._textAccessor(text),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(value),this._initialIndex=null,this._presetValue=!0},_assignInstance:function(text,value){var dataTextField=this.options.dataTextField,dataItem={};return dataTextField?(assign(dataItem,dataTextField.split("."),text),assign(dataItem,this.options.dataValueField.split("."),value),dataItem=new ObservableObject(dataItem)):dataItem=text,dataItem}});ui.plugin(DropDownList)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function removeFiltersForField(expression,field){expression.filters&&(expression.filters=$.grep(expression.filters,function(filter){return removeFiltersForField(filter,field),filter.filters?filter.filters.length:filter.field!=field}))}function convertItems(items){var idx,length,item,value,text,result;if(items&&items.length)for(result=[],idx=0,length=items.length;length>idx;idx++)item=items[idx],text=item.text||item.value||item,value=null==item.value?item.text||item:item.value,result[idx]={text:text,value:value};return result}function clearFilter(filters,field){return $.grep(filters,function(expr){return expr.filters?(expr.filters=$.grep(expr.filters,function(nested){return nested.field!=field}),expr.filters.length):expr.field!=field})}function filterValuesForField(expression,field){expression.filters&&(expression.filters=$.grep(expression.filters,function(filter){return filterValuesForField(filter,field),filter.filters?filter.filters.length:filter.field==field&&"eq"==filter.operator}))}function flatFilterValues(expression){return"and"==expression.logic&&expression.filters.length>1?[]:expression.filters?$.map(expression.filters,function(filter){return flatFilterValues(filter)}):null!==expression.value&&expression.value!==undefined?[expression.value]:[]}function distinct(items,field){for(var getter=kendo.getter(field,!0),result=[],index=0,seen={};index<items.length;){var item=items[index++],text=getter(item);text===undefined||null===text||seen.hasOwnProperty(text)||(result.push(item),seen[text]=!0)}return result}function removeDuplicates(dataSelector,dataTextField){return function(e){var items=dataSelector(e);return distinct(items,dataTextField)}}var kendo=window.kendo,ui=kendo.ui,proxy=$.proxy,POPUP="kendoPopup",INIT="init",REFRESH="refresh",CHANGE="change",NS=".kendoFilterMenu",EQ="Is equal to",NEQ="Is not equal to",roles={number:"numerictextbox",date:"datepicker"},mobileRoles={string:"text",number:"number",date:"date"},isFunction=kendo.isFunction,Widget=ui.Widget,booleanTemplate='<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',defaultTemplate='<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div><button type="submit" class="k-button k-primary">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div></div>',defaultMobileTemplate='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[0].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[0].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#if(extra){#</ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="and" />#=messages.and#</label></li><li class="k-item"><label class="k-label"><input type="radio" name="logic" class="k-check" data-#=ns#bind="checked: logic" value="or" />#=messages.or#</label></li></ul><ul class="k-filter-help-text"><li><span class="k-link"></span><li class="k-item"><label class="k-label">#=messages.operator#<select data-#=ns#bind="value: filters[1].operator">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></label></li><li class="k-item"><label class="k-label">#=messages.value##if(values){#<select data-#=ns#bind="value:filters[1].value"><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input data-#=ns#bind="value:filters[1].value" class="k-textbox" type="#=inputType#" #=useRole ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}#</label></li>#}#</ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></div></form></div>',booleanMobileTemplate='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><button class="k-button k-cancel">#=messages.cancel#</button>#=title#<button type="submit" class="k-button k-submit">#=messages.filter#</button></div><form class="k-filter-menu k-mobile-list"><ul class="k-filter-help-text"><li><span class="k-link">#=messages.info#</span><ul><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label></li><li class="k-item"><label class="k-label"><input class="k-check" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label></li></ul></li><li class="k-button-container"><button type="reset" class="k-button">#=messages.clear#</button></li></ul></form></div>',FilterMenu=Widget.extend({init:function(element,options){var operators,initial,link,field,that=this,type="string";Widget.fn.init.call(that,element,options),operators=that.operators=options.operators||{},element=that.element,options=that.options,options.appendToElement||(link=element.addClass("k-with-icon k-filterable").find(".k-grid-filter"),link[0]||(link=element.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),link.attr("tabindex",-1).on("click"+NS,proxy(that._click,that))),that.link=link||$(),that.dataSource=DataSource.create(options.dataSource),that.field=options.field||element.attr(kendo.attr("field")),that.model=that.dataSource.reader.model,that._parse=function(value){return value+""},that.model&&that.model.fields&&(field=that.model.fields[that.field],field&&(type=field.type||"string",field.parse&&(that._parse=proxy(field.parse,field)))),options.values&&(type="enums"),that.type=type,operators=operators[type]||options.operators[type];for(initial in operators)break;that._defaultFilter=function(){return{field:that.field,operator:initial||"eq",value:""}},that._refreshHandler=proxy(that.refresh,that),that.dataSource.bind(CHANGE,that._refreshHandler),options.appendToElement?that._init():that.refresh()},_init:function(){var role,that=this,ui=that.options.ui,setUI=isFunction(ui);that.pane=that.options.pane,that.pane&&(that._isMobile=!0),setUI||(role=ui||roles[that.type]),that._isMobile?that._createMobileForm(role):that._createForm(role),that.form.on("submit"+NS,proxy(that._submit,that)).on("reset"+NS,proxy(that._reset,that)),setUI&&that.form.find(".k-textbox").removeClass("k-textbox").each(function(){ui($(this))}),that.form.find("["+kendo.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+kendo.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+kendo.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+kendo.attr("role")+"=datepicker]").removeClass("k-textbox"),that.refresh(),that.trigger(INIT,{field:that.field,container:that.form}),kendo.cycleForm(that.form)},_createForm:function(role){var that=this,options=that.options,operators=that.operators||{},type=that.type;operators=operators[type]||options.operators[type],that.form=$('<form class="k-filter-menu"/>').html(kendo.template("boolean"===type?booleanTemplate:defaultTemplate)({field:that.field,format:options.format,ns:kendo.ns,messages:options.messages,extra:options.extra,operators:operators,type:type,role:role,values:convertItems(options.values)})),options.appendToElement?(that.element.append(that.form),that.popup=that.element.closest(".k-popup").data(POPUP)):that.popup=that.form[POPUP]({anchor:that.link,open:proxy(that._open,that),activate:proxy(that._activate,that),close:function(){that.options.closeCallback&&that.options.closeCallback(that.element)}}).data(POPUP),that.form.on("keydown"+NS,proxy(that._keydown,that))},_createMobileForm:function(role){var that=this,options=that.options,operators=that.operators||{},type=that.type;operators=operators[type]||options.operators[type],that.form=$("<div />").html(kendo.template("boolean"===type?booleanMobileTemplate:defaultMobileTemplate)({field:that.field,title:options.title||that.field,format:options.format,ns:kendo.ns,messages:options.messages,extra:options.extra,operators:operators,type:type,role:role,useRole:!kendo.support.input.date&&"date"===type||"number"===type,inputType:mobileRoles[type],values:convertItems(options.values)})),that.view=that.pane.append(that.form.html()),that.form=that.view.element.find("form"),that.view.element.on("click",".k-submit",function(e){that.form.submit(),e.preventDefault()}).on("click",".k-cancel",function(e){that._closeForm(),e.preventDefault()})},refresh:function(){var that=this,expression=that.dataSource.filter()||{filters:[],logic:"and"};that.filterModel=kendo.observable({logic:"and",filters:[that._defaultFilter(),that._defaultFilter()]}),that.form&&kendo.bind(that.form.children().first(),that.filterModel),that._bind(expression)?that.link.addClass("k-state-active"):that.link.removeClass("k-state-active")},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.form&&(kendo.unbind(that.form),kendo.destroy(that.form),that.form.unbind(NS),that.popup&&(that.popup.destroy(),that.popup=null),that.form=null),that.view&&(that.view.purge(),that.view=null),that.link.unbind(NS),that._refreshHandler&&(that.dataSource.unbind(CHANGE,that._refreshHandler),that.dataSource=null),that.element=that.link=that._refreshHandler=that.filterModel=null},_bind:function(expression){var idx,length,currentFilter,filter,that=this,filters=expression.filters,found=!1,current=0,filterModel=that.filterModel;for(idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],filter.field==that.field?(filterModel.set("logic",expression.logic),currentFilter=filterModel.filters[current],currentFilter||(filterModel.filters.push({field:that.field}),currentFilter=filterModel.filters[current]),currentFilter.set("value",that._parse(filter.value)),currentFilter.set("operator",filter.operator),current++,found=!0):filter.filters&&(found=found||that._bind(filter));return found},_stripFilters:function(filters){return $.grep(filters,function(filter){return""!==filter.value&&null!=filter.value})},_merge:function(expression){var filter,idx,length,that=this,logic=expression.logic||"and",filters=this._stripFilters(expression.filters),result=that.dataSource.filter()||{filters:[],logic:"and"};for(removeFiltersForField(result,that.field),idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],filter.value=that._parse(filter.value);return filters.length&&(result.filters.length?(expression.filters=filters,"and"!==result.logic&&(result.filters=[{logic:result.logic,filters:result.filters}],result.logic="and"),result.filters.push(filters.length>1?expression:filters[0])):(result.filters=filters,result.logic=logic)),result},filter:function(expression){expression=this._merge(expression),expression.filters.length&&this.dataSource.filter(expression)},clear:function(){var that=this,expression=that.dataSource.filter()||{filters:[]};expression.filters=$.grep(expression.filters,function(filter){return filter.filters?(filter.filters=clearFilter(filter.filters,that.field),filter.filters.length):filter.field!=that.field}),expression.filters.length||(expression=null),that.dataSource.filter(expression)},_submit:function(e){e.preventDefault(),e.stopPropagation(),this.filter(this.filterModel.toJSON()),this._closeForm()},_reset:function(){this.clear(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var popup;$(".k-filter-menu").not(this.form).each(function(){popup=$(this).data(POPUP),popup&&popup.close()})},_activate:function(){this.form.find(":kendoFocusable:first").focus()},_keydown:function(e){e.keyCode==kendo.keys.ESC&&this.popup.close()},events:[INIT],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:EQ,neq:NEQ,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:EQ,neq:NEQ,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:EQ,neq:NEQ,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:EQ,neq:NEQ}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",cancel:"Cancel"},animations:{left:"slide",right:"slide:right"}}}),multiCheckNS=".kendoFilterMultiCheck",DataSource=kendo.data.DataSource,FilterMultiCheck=Widget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),options=this.options,this.element=$(element);var field=this.field=this.options.field||this.element.attr(kendo.attr("field")),checkSource=options.checkSource;this._foreignKeyValues()?(this.checkSource=DataSource.create(options.values),this.checkSource.fetch()):options.forceUnique?(checkSource=options.dataSource.options,delete checkSource.pageSize,this.checkSource=DataSource.create(checkSource),this.checkSource.reader.data=removeDuplicates(this.checkSource.reader.data,this.field)):this.checkSource=DataSource.create(checkSource),this.dataSource=options.dataSource,this.model=this.dataSource.reader.model,this._parse=function(value){return value+""},this.model&&this.model.fields&&(field=this.model.fields[this.field],field&&(field.parse&&(this._parse=proxy(field.parse,field)),this.type=field.type||"string")),options.appendToElement?this._init():this._createLink(),this._refreshHandler=proxy(this.refresh,this),this.dataSource.bind(CHANGE,this._refreshHandler)},_createLink:function(){var element=this.element,link=element.addClass("k-with-icon k-filterable").find(".k-grid-filter");link[0]||(link=element.prepend('<a class="k-grid-filter" href="#"><span class="k-icon k-filter"/></a>').find(".k-grid-filter")),this._link=link.attr("tabindex",-1).on("click"+NS,proxy(this._click,this))},_init:function(){var that=this,forceUnique=this.options.forceUnique,options=this.options;this.pane=options.pane,this.pane&&(this._isMobile=!0),this._createForm(),this._foreignKeyValues()?this.refresh():forceUnique&&!this.checkSource.options.serverPaging&&this.dataSource.data().length?(this.checkSource.data(distinct(this.dataSource.data(),this.field)),this.refresh()):(this._attachProgress(),this.checkSource.fetch(function(){that.refresh.call(that)})),this.options.forceUnique||(this.checkChangeHandler=function(){that.container.empty(),that.refresh()},this.checkSource.bind(CHANGE,this.checkChangeHandler)),this.form.on("keydown"+multiCheckNS,proxy(this._keydown,this)).on("submit"+multiCheckNS,proxy(this._filter,this)).on("reset"+multiCheckNS,proxy(this._reset,this)),this.trigger(INIT,{field:this.field,container:this.form})},_attachProgress:function(){var that=this;this._progressHandler=function(){ui.progress(that.container,!0)},this._progressHideHandler=function(){ui.progress(that.container,!1)},this.checkSource.bind("progress",this._progressHandler).bind("change",this._progressHideHandler)},_createForm:function(){var options=this.options,html="<ul class='k-reset k-multicheck-wrap'></ul><button type='submit' class='k-button k-primary'>"+options.messages.filter+"</button>";if(html+="<button type='reset' class='k-button'>"+options.messages.clear+"</button>",this.form=$('<form class="k-filter-menu"/>').html(html),this.container=this.form.find(".k-multicheck-wrap"),this._isMobile){this.view=this.pane.append(this.form.addClass("k-mobile-list").wrap("<div/>").parent().html());var element=this.view.element;this.form=element.find("form"),this.container=element.find(".k-multicheck-wrap");var that=this;element.on("click",".k-primary",function(e){that.form.submit(),e.preventDefault()}).on("click","[type=reset]",function(e){that._reset(),e.preventDefault()})}else options.appendToElement?(this.popup=this.element.closest(".k-popup").data(POPUP),this.element.append(this.form)):this.popup=this.form.kendoPopup({anchor:this._link}).data(POPUP)},createCheckAllItem:function(){var options=this.options,template=kendo.template(options.itemTemplate({field:"all",mobile:this._isMobile})),checkAllContainer=$(template({all:options.messages.checkAll}));this.container.prepend(checkAllContainer),this.checkBoxAll=checkAllContainer.find(":checkbox").eq(0).addClass("k-check-all"),this.checkAllHandler=proxy(this.checkAll,this),this.checkBoxAll.on(CHANGE+multiCheckNS,this.checkAllHandler)},updateCheckAllState:function(){if(this.checkBoxAll){var state=this.container.find(":checkbox:not(.k-check-all)").length==this.container.find(":checked:not(.k-check-all)").length;this.checkBoxAll.prop("checked",state)}},refresh:function(e){var forceUnique=this.options.forceUnique,dataSource=this.dataSource,filters=this.getFilterArray();this._link&&this._link.toggleClass("k-state-active",0!==filters.length),this.form&&(e&&forceUnique&&e.sender===dataSource&&!dataSource.options.serverPaging&&("itemchange"==e.action||"add"==e.action||"remove"==e.action||dataSource.options.autoSync&&"sync"===e.action)&&!this._foreignKeyValues()&&(this.checkSource.data(distinct(this.dataSource.data(),this.field)),this.container.empty()),this.container.is(":empty")&&this.createCheckBoxes(),this.checkValues(filters),this.trigger(REFRESH))},getFilterArray:function(){var expression=$.extend(!0,{},{filters:[],logic:"and"},this.dataSource.filter());filterValuesForField(expression,this.field);var flatValues=flatFilterValues(expression);return flatValues},createCheckBoxes:function(){var data,options=this.options,templateOptions={field:this.field,format:options.format,mobile:this._isMobile,type:this.type};this.options.forceUnique?this._foreignKeyValues()?(data=this.checkSource.data(),templateOptions.valueField="value",templateOptions.field="text"):data=this.checkSource.data():data=this.checkSource.view();var template=kendo.template(options.itemTemplate(templateOptions)),itemsHtml=kendo.render(template,data);options.checkAll&&(this.createCheckAllItem(),this.container.on(CHANGE+multiCheckNS,":checkbox",proxy(this.updateCheckAllState,this))),this.container.append(itemsHtml)},checkAll:function(){var state=this.checkBoxAll.is(":checked");this.container.find(":checkbox").prop("checked",state)},checkValues:function(values){var that=this;$($.grep(this.container.find(":checkbox").prop("checked",!1),function(ele){var found=!1;if(!$(ele).is(".k-check-all"))for(var checkBoxVal=that._parse($(ele).val()),i=0;i<values.length;i++)if(found="date"==that.type?values[i].getTime()==checkBoxVal.getTime():values[i]==checkBoxVal)return found})).prop("checked",!0),this.updateCheckAllState()},_filter:function(e){e.preventDefault(),e.stopPropagation();var expression={logic:"or"},that=this;expression.filters=$.map(this.form.find(":checkbox:checked:not(.k-check-all)"),function(item){return{value:$(item).val(),operator:"eq",field:that.field}}),expression=this._merge(expression),expression.filters.length&&this.dataSource.filter(expression),this._closeForm()},_stripFilters:function(filters){return $.grep(filters,function(filter){return null!=filter.value})},_foreignKeyValues:function(){var options=this.options;return options.values&&!options.checkSource},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.form&&(kendo.unbind(that.form),kendo.destroy(that.form),that.form.unbind(multiCheckNS),that.popup&&(that.popup.destroy(),that.popup=null),that.form=null,that.container&&(that.container.unbind(multiCheckNS),that.container=null),that.checkBoxAll&&that.checkBoxAll.unbind(multiCheckNS)),that.view&&(that.view.purge(),that.view=null),that._link&&that._link.unbind(NS),that._refreshHandler&&(that.dataSource.unbind(CHANGE,that._refreshHandler),that.dataSource=null),that.checkChangeHandler&&that.checkSource.unbind(CHANGE,that.checkChangeHandler),that._progressHandler&&that.checkSource.unbind("progress",that._progressHandler),that._progressHideHandler&&that.checkSource.unbind("change",that._progressHideHandler),that.element=that.checkSource=that.container=that.checkBoxAll=that._link=that._refreshHandler=that.checkAllHandler=null},options:{name:"FilterMultiCheck",itemTemplate:function(options){var field=options.field,format=options.format,valueField=options.valueField,mobile=options.mobile,valueFormat="";return valueField===undefined&&(valueField=field),"date"==options.type&&(valueFormat=":yyyy-MM-ddTHH:mm:sszzz"),"<li class='k-item'><label class='k-label'><input type='checkbox' class='"+(mobile?"k-check":"")+"'  value='#:kendo.format('{0"+valueFormat+"}',"+valueField+")#'/>#:kendo.format('"+(format?format:"{0}")+"', "+field+")#</label></li>"},checkAll:!0,appendToElement:!1,messages:{checkAll:"Select All",clear:"Clear",filter:"Filter"},forceUnique:!0,animations:{left:"slide",right:"slide:right"}},events:[INIT,REFRESH]});$.extend(FilterMultiCheck.fn,{_click:FilterMenu.fn._click,_keydown:FilterMenu.fn._keydown,_reset:FilterMenu.fn._reset,_closeForm:FilterMenu.fn._closeForm,clear:FilterMenu.fn.clear,_merge:FilterMenu.fn._merge}),ui.plugin(FilterMenu),ui.plugin(FilterMultiCheck)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function getEffectDirection(direction,root){return direction=direction.split(" ")[!root+0]||direction,direction.replace("top","up").replace("bottom","down")}function parseDirection(direction,root,isRtl){direction=direction.split(" ")[!root+0]||direction;var output={origin:["bottom",isRtl?"right":"left"],position:["top",isRtl?"right":"left"]},horizontal=/left|right/.test(direction);return horizontal?(output.origin=["top",direction],output.position[1]=kendo.directions[direction].reverse):(output.origin[0]=direction,output.position[0]=kendo.directions[direction].reverse),output.origin=output.origin.join(" "),output.position=output.position.join(" "),output}function contains(parent,child){try{return $.contains(parent,child)}catch(e){return!1}}function updateItemClasses(item){item=$(item),item.addClass("k-item").children(IMG).addClass(IMAGE),item.children("a").addClass(LINK).children(IMG).addClass(IMAGE),item.filter(":not([disabled])").addClass(DEFAULTSTATE),item.filter(".k-separator:empty").append("&nbsp;"),item.filter("li[disabled]").addClass(DISABLEDSTATE).removeAttr("disabled").attr("aria-disabled",!0),item.filter("[role]").length||item.attr("role","menuitem"),item.children("."+LINK).length||item.contents().filter(function(){return!(this.nodeName.match(excludedNodesRegExp)||3==this.nodeType&&!$.trim(this.nodeValue))}).wrapAll("<span class='"+LINK+"'/>"),updateArrow(item),updateFirstLast(item)}function updateArrow(item){item=$(item),item.find("> .k-link > [class*=k-i-arrow]:not(.k-sprite)").remove(),item.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var item=$(this),parent=item.parent().parent();item.append("<span class='k-icon "+(parent.hasClass(MENU+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function updateFirstLast(item){item=$(item),item.filter(".k-first:not(:first-child)").removeClass(FIRST),item.filter(".k-last:not(:last-child)").removeClass(LAST),item.filter(":first-child").addClass(FIRST),item.filter(":last-child").addClass(LAST)}var kendo=window.kendo,ui=kendo.ui,activeElement=kendo._activeElement,touch=kendo.support.touch&&kendo.support.mobileOS,MOUSEDOWN="mousedown",CLICK="click",extend=$.extend,proxy=$.proxy,each=$.each,template=kendo.template,keys=kendo.keys,Widget=ui.Widget,excludedNodesRegExp=/^(ul|a|div)$/i,NS=".kendoMenu",IMG="img",OPEN="open",MENU="k-menu",LINK="k-link",LAST="k-last",CLOSE="close",TIMER="timer",FIRST="k-first",IMAGE="k-image",SELECT="select",ZINDEX="zIndex",ACTIVATE="activate",DEACTIVATE="deactivate",POINTERDOWN="touchstart"+NS+" MSPointerDown"+NS+" pointerdown"+NS,pointers=kendo.support.pointers,msPointers=kendo.support.msPointers,allPointers=msPointers||pointers,MOUSEENTER=pointers?"pointerover":msPointers?"MSPointerOver":"mouseenter",MOUSELEAVE=pointers?"pointerout":msPointers?"MSPointerOut":"mouseleave",mobile=touch||allPointers,DOCUMENT_ELEMENT=$(document.documentElement),KENDOPOPUP="kendoPopup",DEFAULTSTATE="k-state-default",HOVERSTATE="k-state-hover",FOCUSEDSTATE="k-state-focused",DISABLEDSTATE="k-state-disabled",menuSelector=".k-menu",groupSelector=".k-menu-group",popupSelector=groupSelector+",.k-animation-container",allItemsSelector=":not(.k-list) > .k-item",disabledSelector=".k-item.k-state-disabled",itemSelector=".k-item:not(.k-state-disabled)",linkSelector=".k-item:not(.k-state-disabled) > .k-link",exclusionSelector=":not(.k-item.k-separator)",nextSelector=exclusionSelector+":eq(0)",lastSelector=exclusionSelector+":last",templateSelector="> div:not(.k-animation-container,.k-list-container)",touchPointerTypes={
2:1,touch:1},templates={content:template("<div class='k-content #= groupCssClass() #' tabindex='-1'>#= content(item) #</div>"),group:template("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:template("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:template("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),image:template("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:template("<span class='#= arrowClass(item, group) #'></span>"),sprite:template("<span class='k-sprite #= spriteCssClass #'></span>"),empty:template("")},rendering={wrapperCssClass:function(group,item){var result="k-item",index=item.index;return result+=item.enabled===!1?" k-state-disabled":" k-state-default",group.firstLevel&&0===index&&(result+=" k-first"),index==group.length-1&&(result+=" k-last"),item.cssClass&&(result+=" "+item.cssClass),result},textClass:function(){return LINK},textAttributes:function(item){return item.url?" href='"+item.url+"'":""},arrowClass:function(item,group){var result="k-icon";return result+=group.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(item){return item.encoded===!1?item.text:kendo.htmlEncode(item.text)},tag:function(item){return item.url?"a":"span"},groupAttributes:function(group){return group.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group"},content:function(item){return item.content?item.content:"&nbsp;"}},Menu=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),element=that.wrapper=that.element,options=that.options,that._initData(options),that._updateClasses(),that._animations(options),that.nextItemZIndex=100,that._tabindex(),that._focusProxy=proxy(that._focusHandler,that),element.on(POINTERDOWN,itemSelector,that._focusProxy).on(CLICK+NS,disabledSelector,!1).on(CLICK+NS,itemSelector,proxy(that._click,that)).on("keydown"+NS,proxy(that._keydown,that)).on("focus"+NS,proxy(that._focus,that)).on("focus"+NS,".k-content",proxy(that._focus,that)).on(POINTERDOWN+" "+MOUSEDOWN+NS,".k-content",proxy(that._preventClose,that)).on("blur"+NS,proxy(that._removeHoverItem,that)).on("blur"+NS,"[tabindex]",proxy(that._checkActiveElement,that)).on(MOUSEENTER+NS,itemSelector,proxy(that._mouseenter,that)).on(MOUSELEAVE+NS,itemSelector,proxy(that._mouseleave,that)).on(MOUSEENTER+NS+" "+MOUSELEAVE+NS+" "+MOUSEDOWN+NS+" "+CLICK+NS,linkSelector,proxy(that._toggleHover,that)),options.openOnClick&&(that.clicked=!1,that._documentClickHandler=proxy(that._documentClick,that),$(document).click(that._documentClickHandler)),element.attr("role","menubar"),element[0].id&&(that._ariaId=kendo.format("{0}_mn_active",element[0].id)),kendo.notify(that)},events:[OPEN,CLOSE,ACTIVATE,DEACTIVATE,SELECT],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,popupCollision:undefined},_initData:function(options){var that=this;options.dataSource&&(that.angular("cleanup",function(){return{elements:that.element.children()}}),that.element.empty(),that.append(options.dataSource,that.element),that.angular("compile",function(){return{elements:that.element.children()}}))},setOptions:function(options){var animation=this.options.animation;this._animations(options),options.animation=extend(!0,animation,options.animation),"dataSource"in options&&this._initData(options),this._updateClasses(),Widget.fn.setOptions.call(this,options)},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.element.off(NS),that._documentClickHandler&&$(document).unbind("click",that._documentClickHandler),kendo.destroy(that.element)},enable:function(element,enable){return this._toggleDisabled(element,enable!==!1),this},disable:function(element){return this._toggleDisabled(element,!1),this},append:function(item,referenceItem){referenceItem=this.element.find(referenceItem);var inserted=this._insert(item,referenceItem,referenceItem.length?referenceItem.find("> .k-menu-group, > .k-animation-container > .k-menu-group"):null);return each(inserted.items,function(){inserted.group.append(this),updateArrow(this)}),updateArrow(referenceItem),updateFirstLast(inserted.group.find(".k-first, .k-last").add(inserted.items)),this},insertBefore:function(item,referenceItem){referenceItem=this.element.find(referenceItem);var inserted=this._insert(item,referenceItem,referenceItem.parent());return each(inserted.items,function(){referenceItem.before(this),updateArrow(this),updateFirstLast(this)}),updateFirstLast(referenceItem),this},insertAfter:function(item,referenceItem){referenceItem=this.element.find(referenceItem);var inserted=this._insert(item,referenceItem,referenceItem.parent());return each(inserted.items,function(){referenceItem.after(this),updateArrow(this),updateFirstLast(this)}),updateFirstLast(referenceItem),this},_insert:function(item,referenceItem,parent){var items,groups,that=this;referenceItem&&referenceItem.length||(parent=that.element);var plain=$.isPlainObject(item),groupData={firstLevel:parent.hasClass(MENU),horizontal:parent.hasClass(MENU+"-horizontal"),expanded:!0,length:parent.children().length};return referenceItem&&!parent.length&&(parent=$(Menu.renderGroup({group:groupData})).appendTo(referenceItem)),plain||$.isArray(item)?items=$($.map(plain?[item]:item,function(value,idx){return"string"==typeof value?$(value).get():$(Menu.renderItem({group:groupData,item:extend(value,{index:idx})})).get()})):(items="string"==typeof item&&"<"!=item.charAt(0)?that.element.find(item):$(item),groups=items.find("> ul").addClass("k-menu-group").attr("role","menu"),items=items.filter("li"),items.add(groups.find("> li")).each(function(){updateItemClasses(this)})),{items:items,group:parent}},remove:function(element){element=this.element.find(element);var that=this,parent=element.parentsUntil(that.element,allItemsSelector),group=element.parent("ul:not(.k-menu)");if(element.remove(),group&&!group.children(allItemsSelector).length){var container=group.parent(".k-animation-container");container.length?container.remove():group.remove()}return parent.length&&(parent=parent.eq(0),updateArrow(parent),updateFirstLast(parent)),that},open:function(element){var that=this,options=that.options,horizontal="horizontal"==options.orientation,direction=options.direction,isRtl=kendo.support.isRtl(that.wrapper);return element=that.element.find(element),/^(top|bottom|default)$/.test(direction)&&(direction=isRtl?horizontal?(direction+" left").replace("default","bottom"):"left":horizontal?(direction+" right").replace("default","bottom"):"right"),element.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var popup=$(this).data("kendoPopup");popup&&popup.close()}),element.each(function(){var li=$(this);clearTimeout(li.data(TIMER)),li.data(TIMER,setTimeout(function(){var popup,ul=li.find(".k-menu-group:first:hidden");if(ul[0]&&that._triggerEvent({item:li[0],type:OPEN})===!1){if(!ul.find(".k-menu-group")[0]&&ul.children(".k-item").length>1){var windowHeight=$(window).height(),setScrolling=function(){ul.css({maxHeight:windowHeight-(ul.outerHeight()-ul.height())-kendo.getShadows(ul).bottom,overflow:"auto"})};kendo.support.browser.msie&&kendo.support.browser.version<=7?setTimeout(setScrolling,0):setScrolling()}else ul.css({maxHeight:"",overflow:""});li.data(ZINDEX,li.css(ZINDEX)),li.css(ZINDEX,that.nextItemZIndex++),popup=ul.data(KENDOPOPUP);var root=li.parent().hasClass(MENU),parentHorizontal=root&&horizontal,directions=parseDirection(direction,root,isRtl),effects=options.animation.open.effects,openEffects=effects!==undefined?effects:"slideIn:"+getEffectDirection(direction,root);popup?(popup=ul.data(KENDOPOPUP),popup.options.origin=directions.origin,popup.options.position=directions.position,popup.options.animation.open.effects=openEffects):popup=ul.kendoPopup({activate:function(){that._triggerEvent({item:this.wrapper.parent(),type:ACTIVATE})},deactivate:function(e){e.sender.element.removeData("targetTransform").css({opacity:""}),that._triggerEvent({item:this.wrapper.parent(),type:DEACTIVATE})},origin:directions.origin,position:directions.position,collision:options.popupCollision!==undefined?options.popupCollision:parentHorizontal?"fit":"fit flip",anchor:li,appendTo:li,animation:{open:extend(!0,{effects:openEffects},options.animation.open),close:options.animation.close},close:function(e){var li=e.sender.wrapper.parent();that._triggerEvent({item:li[0],type:CLOSE})?e.preventDefault():(li.css(ZINDEX,li.data(ZINDEX)),li.removeData(ZINDEX),touch&&(li.removeClass(HOVERSTATE),that._removeHoverItem()))}}).data(KENDOPOPUP),ul.removeAttr("aria-hidden"),popup.open()}},that.options.hoverDelay))}),that},close:function(items,dontClearClose){var that=this,element=that.element;return items=element.find(items),items.length||(items=element.find(">.k-item")),items.each(function(){var li=$(this);!dontClearClose&&that._isRootItem(li)&&(that.clicked=!1),clearTimeout(li.data(TIMER)),li.data(TIMER,setTimeout(function(){var popup=li.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):first:visible").data(KENDOPOPUP);popup&&(popup.close(),popup.element.attr("aria-hidden",!0))},that.options.hoverDelay))}),that},_toggleDisabled:function(items,enable){this.element.find(items).each(function(){$(this).toggleClass(DEFAULTSTATE,enable).toggleClass(DISABLEDSTATE,!enable).attr("aria-disabled",!enable)})},_toggleHover:function(e){var target=$(kendo.eventTarget(e)||e.target).closest(allItemsSelector),isEnter=e.type==MOUSEENTER||-1!==MOUSEDOWN.indexOf(e.type);target.parents("li."+DISABLEDSTATE).length||target.toggleClass(HOVERSTATE,isEnter||"mousedown"==e.type||"click"==e.type),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(e){var that=this,hoverItem=$(e?e.currentTarget:this._hoverItem()),target=that._findRootParent(hoverItem)[0];this._closurePrevented||setTimeout(function(){(!document.hasFocus()||!contains(target,kendo._activeElement())&&e&&!contains(target,e.currentTarget))&&that.close(target)},0),this._closurePrevented=!1},_removeHoverItem:function(){var oldHoverItem=this._hoverItem();oldHoverItem&&oldHoverItem.hasClass(FOCUSEDSTATE)&&(oldHoverItem.removeClass(FOCUSEDSTATE),this._oldHoverItem=null)},_updateClasses:function(){var items,element=this.element,nonContentGroupsSelector=".k-menu-init div ul";element.removeClass("k-menu-horizontal k-menu-vertical"),element.addClass("k-widget k-reset k-header k-menu-init "+MENU).addClass(MENU+"-"+this.options.orientation),element.find("li > ul").filter(function(){return!kendo.support.matchesSelector.call(this,nonContentGroupsSelector)}).addClass("k-group k-menu-group").attr("role","menu").attr("aria-hidden",element.is(":visible")).end().find("li > div").addClass("k-content").attr("tabindex","-1"),items=element.find("> li,.k-menu-group > li"),element.removeClass("k-menu-init"),items.each(function(){updateItemClasses(this)})},_mouseenter:function(e){var that=this,element=$(e.currentTarget),hasChildren=element.children(".k-animation-container").length||element.children(groupSelector).length;e.delegateTarget==element.parents(menuSelector)[0]&&(that.options.openOnClick&&!that.clicked||touch||(pointers||msPointers)&&e.originalEvent.pointerType in touchPointerTypes&&that._isRootItem(element.closest(allItemsSelector))||!contains(e.currentTarget,e.relatedTarget)&&hasChildren&&that.open(element),(that.options.openOnClick&&that.clicked||mobile)&&element.siblings().each(proxy(function(_,sibling){that.close(sibling,!0)},that)))},_mouseleave:function(e){var that=this,element=$(e.currentTarget),hasChildren=element.children(".k-animation-container").length||element.children(groupSelector).length;return element.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?void e.stopImmediatePropagation():void(that.options.openOnClick||touch||(pointers||msPointers)&&e.originalEvent.pointerType in touchPointerTypes||contains(e.currentTarget,e.relatedTarget||e.target)||!hasChildren||contains(e.currentTarget,kendo._activeElement())||that.close(element))},_click:function(e){var openHandle,childGroup,childGroupVisible,that=this,options=that.options,target=$(kendo.eventTarget(e)),nodeName=target[0]?target[0].nodeName.toUpperCase():"",formNode="INPUT"==nodeName||"SELECT"==nodeName||"BUTTON"==nodeName||"LABEL"==nodeName,link=target.closest("."+LINK),element=target.closest(allItemsSelector),href=link.attr("href"),targetHref=target.attr("href"),sampleHref=$("<a href='#' />").attr("href"),isLink=!!href&&href!==sampleHref,isLocalLink=isLink&&!!href.match(/^#/),isTargetLink=!!targetHref&&targetHref!==sampleHref,shouldCloseTheRootItem=options.openOnClick&&childGroupVisible&&that._isRootItem(element);if(!target.closest(templateSelector,element[0]).length){if(element.hasClass(DISABLEDSTATE))return void e.preventDefault();if(e.handled||!that._triggerEvent({item:element[0],type:SELECT})||formNode||e.preventDefault(),e.handled=!0,childGroup=element.children(popupSelector),childGroupVisible=childGroup.is(":visible"),options.closeOnClick&&(!isLink||isLocalLink)&&(!childGroup.length||shouldCloseTheRootItem))return element.removeClass(HOVERSTATE).css("height"),that._oldHoverItem=that._findRootParent(element),that.close(link.parentsUntil(that.element,allItemsSelector)),that.clicked=!1,void(-1!="MSPointerUp".indexOf(e.type)&&e.preventDefault());isLink&&e.enterKey&&link[0].click(),(that._isRootItem(element)&&options.openOnClick||kendo.support.touch||(pointers||msPointers)&&that._isRootItem(element.closest(allItemsSelector)))&&(isLink||formNode||isTargetLink||e.preventDefault(),that.clicked=!0,openHandle=childGroup.is(":visible")?CLOSE:OPEN,(options.closeOnClick||openHandle!=CLOSE)&&that[openHandle](element))}},_documentClick:function(e){contains(this.element[0],e.target)||(this.clicked=!1)},_focus:function(e){var that=this,target=e.target,hoverItem=that._hoverItem(),active=activeElement();return target==that.wrapper[0]||$(target).is(":kendoFocusable")?void(active===e.currentTarget&&(hoverItem.length?that._moveHover([],hoverItem):that._oldHoverItem||that._moveHover([],that.wrapper.children().first()))):(e.stopPropagation(),$(target).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(FOCUSEDSTATE),void that.wrapper.focus())},_keydown:function(e){var target,belongsToVertical,hasChildren,that=this,key=e.keyCode,hoverItem=that._oldHoverItem,isRtl=kendo.support.isRtl(that.wrapper);if(e.target==e.currentTarget||key==keys.ESC){if(hoverItem||(hoverItem=that._oldHoverItem=that._hoverItem()),belongsToVertical=that._itemBelongsToVertival(hoverItem),hasChildren=that._itemHasChildren(hoverItem),key==keys.RIGHT)target=that[isRtl?"_itemLeft":"_itemRight"](hoverItem,belongsToVertical,hasChildren);else if(key==keys.LEFT)target=that[isRtl?"_itemRight":"_itemLeft"](hoverItem,belongsToVertical,hasChildren);else if(key==keys.DOWN)target=that._itemDown(hoverItem,belongsToVertical,hasChildren);else if(key==keys.UP)target=that._itemUp(hoverItem,belongsToVertical,hasChildren);else if(key==keys.ESC)target=that._itemEsc(hoverItem,belongsToVertical);else if(key==keys.ENTER||key==keys.SPACEBAR)target=hoverItem.children(".k-link"),target.length>0&&(that._click({target:target[0],preventDefault:function(){},enterKey:!0}),that._moveHover(hoverItem,that._findRootParent(hoverItem)));else if(key==keys.TAB)return target=that._findRootParent(hoverItem),that._moveHover(hoverItem,target),void that._checkActiveElement();target&&target[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-state-hover,.k-item.k-state-focused").filter(":visible")},_itemBelongsToVertival:function(item){var menuIsVertical=this.wrapper.hasClass("k-menu-vertical");return item.length?item.parent().hasClass("k-menu-group")||menuIsVertical:menuIsVertical},_itemHasChildren:function(item){return item.length?item.children("ul.k-menu-group, div.k-animation-container").length>0:!1},_moveHover:function(item,nextItem){var that=this,id=that._ariaId;item.length&&nextItem.length&&item.removeClass(FOCUSEDSTATE),nextItem.length&&(nextItem[0].id&&(id=nextItem[0].id),nextItem.addClass(FOCUSEDSTATE),that._oldHoverItem=nextItem,id&&(that.element.removeAttr("aria-activedescendant"),$("#"+id).removeAttr("id"),nextItem.attr("id",id),that.element.attr("aria-activedescendant",id)))},_findRootParent:function(item){return this._isRootItem(item)?item:item.parentsUntil(menuSelector,"li.k-item").last()},_isRootItem:function(item){return item.parent().hasClass(MENU)},_itemRight:function(item,belongsToVertical,hasChildren){var nextItem,parentItem,that=this;if(!item.hasClass(DISABLEDSTATE))return belongsToVertical?hasChildren?(that.open(item),nextItem=item.find(".k-menu-group").children().first()):"horizontal"==that.options.orientation&&(parentItem=that._findRootParent(item),that.close(parentItem),nextItem=parentItem.nextAll(nextSelector)):(nextItem=item.nextAll(nextSelector),nextItem.length||(nextItem=item.prevAll(lastSelector))),nextItem&&!nextItem.length?nextItem=that.wrapper.children(".k-item").first():nextItem||(nextItem=[]),that._moveHover(item,nextItem),nextItem},_itemLeft:function(item,belongsToVertical){var nextItem,that=this;return belongsToVertical?(nextItem=item.parent().closest(".k-item"),that.close(nextItem),that._isRootItem(nextItem)&&"horizontal"==that.options.orientation&&(nextItem=nextItem.prevAll(nextSelector))):(nextItem=item.prevAll(nextSelector),nextItem.length||(nextItem=item.nextAll(lastSelector))),nextItem.length||(nextItem=that.wrapper.children(".k-item").last()),that._moveHover(item,nextItem),nextItem},_itemDown:function(item,belongsToVertical,hasChildren){var nextItem,that=this;if(belongsToVertical)nextItem=item.nextAll(nextSelector);else{if(!hasChildren||item.hasClass(DISABLEDSTATE))return;that.open(item),nextItem=item.find(".k-menu-group").children().first()}return!nextItem.length&&item.length?nextItem=item.parent().children().first():item.length||(nextItem=that.wrapper.children(".k-item").first()),that._moveHover(item,nextItem),nextItem},_itemUp:function(item,belongsToVertical){var nextItem,that=this;if(belongsToVertical)return nextItem=item.prevAll(nextSelector),!nextItem.length&&item.length?nextItem=item.parent().children().last():item.length||(nextItem=that.wrapper.children(".k-item").last()),that._moveHover(item,nextItem),nextItem},_itemEsc:function(item,belongsToVertical){var nextItem,that=this;return belongsToVertical?(nextItem=item.parent().closest(".k-item"),that.close(nextItem),that._moveHover(item,nextItem),nextItem):item},_triggerEvent:function(e){var that=this;return that.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(e){var that=this,item=$(kendo.eventTarget(e)).closest(allItemsSelector);setTimeout(function(){that._moveHover([],item),item.children(".k-content")[0]&&item.parent().closest(".k-item").removeClass(FOCUSEDSTATE)},200)},_animations:function(options){options&&"animation"in options&&!options.animation&&(options.animation={open:{effects:{}},close:{hide:!0,effects:{}}})}});extend(Menu,{renderItem:function(options){options=extend({menu:{},group:{}},options);var empty=templates.empty,item=options.item;return templates.item(extend(options,{image:item.imageUrl?templates.image:empty,sprite:item.spriteCssClass?templates.sprite:empty,itemWrapper:templates.itemWrapper,renderContent:Menu.renderContent,arrow:item.items||item.content?templates.arrow:empty,subGroup:Menu.renderGroup},rendering))},renderGroup:function(options){return templates.group(extend({renderItems:function(options){for(var html="",i=0,items=options.items,len=items?items.length:0,group=extend({length:len},options.group);len>i;i++)html+=Menu.renderItem(extend(options,{group:group,item:extend({index:i},items[i])}));return html}},options,rendering))},renderContent:function(options){return templates.content(extend(options,rendering))}});var ContextMenu=Menu.extend({init:function(element,options){var that=this;Menu.fn.init.call(that,element,options),that.target=$(that.options.target),that._popup(),that._wire()},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,target:"body"},events:[OPEN,CLOSE,ACTIVATE,DEACTIVATE,SELECT],setOptions:function(options){var that=this;Menu.fn.setOptions.call(that,options),that.target.off(that.showOn+NS,that._showProxy),that.userEvents&&that.userEvents.destroy(),that.target=$(that.options.target),options.orientation&&that.popup.wrapper[0]&&that.popup.element.unwrap(),that._wire(),Menu.fn.setOptions.call(this,options)},destroy:function(){var that=this;that.target.off(that.options.showOn+NS),DOCUMENT_ELEMENT.off(kendo.support.mousedown+NS,that._closeProxy),that.userEvents&&that.userEvents.destroy(),Menu.fn.destroy.call(that)},open:function(x,y){var that=this;return x=$(x)[0],contains(that.element[0],$(x)[0])?Menu.fn.open.call(that,x):that._triggerEvent({item:that.element,type:OPEN})===!1&&(that.popup.visible()&&that.options.filter&&(that.popup.close(!0),that.popup.element.kendoStop(!0)),y!==undefined?(that.popup.wrapper.hide(),that.popup.open(x,y)):(that.popup.options.anchor=(x?x:that.popup.anchor)||that.target,that.popup.element.kendoStop(!0),that.popup.open()),DOCUMENT_ELEMENT.off(that.popup.downEvent,that.popup._mousedownProxy),DOCUMENT_ELEMENT.on(kendo.support.mousedown+NS,that._closeProxy)),that},close:function(){var that=this;contains(that.element[0],$(arguments[0])[0])?Menu.fn.close.call(that,arguments[0]):that.popup.visible()&&that._triggerEvent({item:that.element,type:CLOSE})===!1&&(that.popup.close(),DOCUMENT_ELEMENT.off(kendo.support.mousedown+NS,that._closeProxy),that.unbind(SELECT,that._closeTimeoutProxy))},_showHandler:function(e){var offset,ev=e,that=this,options=that.options;e.event&&(ev=e.event,ev.pageX=e.x.location,ev.pageY=e.y.location),contains(that.element[0],e.relatedTarget||e.target)||(that._eventOrigin=ev,ev.preventDefault(),ev.stopImmediatePropagation(),that.element.find("."+FOCUSEDSTATE).removeClass(FOCUSEDSTATE),(options.filter&&kendo.support.matchesSelector.call(ev.currentTarget,options.filter)||!options.filter)&&(options.alignToAnchor?(that.popup.options.anchor=ev.currentTarget,that.open(ev.currentTarget)):(that.popup.options.anchor=ev.currentTarget,that._targetChild?(offset=that.target.offset(),that.open(ev.pageX-offset.left,ev.pageY-offset.top)):that.open(ev.pageX,ev.pageY))))},_closeHandler:function(e){var that=this,target=$(e.relatedTarget||e.target),sameTarget=target.closest(that.target.selector)[0]==that.target[0],children=target.closest(itemSelector).children(popupSelector),containment=contains(that.element[0],target[0]);that._eventOrigin=e;var normalClick=3!==e.which;that.popup.visible()&&(normalClick&&sameTarget||!sameTarget)&&(that.options.closeOnClick&&!children[0]&&containment||!containment)&&(containment?(this.unbind(SELECT,this._closeTimeoutProxy),that.bind(SELECT,that._closeTimeoutProxy)):that.close())},_wire:function(){var that=this,options=that.options,target=that.target;that._showProxy=proxy(that._showHandler,that),that._closeProxy=proxy(that._closeHandler,that),that._closeTimeoutProxy=proxy(that.close,that),target[0]&&(kendo.support.mobileOS&&"contextmenu"==options.showOn?(that.userEvents=new kendo.UserEvents(target,{filter:options.filter,allowSelection:!1}),target.on(options.showOn+NS,!1),that.userEvents.bind("hold",that._showProxy)):options.filter?target.on(options.showOn+NS,options.filter,that._showProxy):target.on(options.showOn+NS,that._showProxy))},_triggerEvent:function(e){var that=this,anchor=$(that.popup.options.anchor)[0],origin=that._eventOrigin;return that._eventOrigin=undefined,that.trigger(e.type,extend({type:e.type,item:e.item||this.element[0],target:anchor},origin?{event:origin}:{}))},_popup:function(){var that=this;that._triggerProxy=proxy(that._triggerEvent,that),that.popup=that.element.addClass("k-context-menu").kendoPopup({anchor:that.target||"body",copyAnchorStyles:that.options.copyAnchorStyles,collision:that.options.popupCollision||"fit",animation:that.options.animation,activate:that._triggerProxy,deactivate:that._triggerProxy}).data("kendoPopup"),that._targetChild=contains(that.target[0],that.popup.element[0])}});ui.plugin(Menu),ui.plugin(ContextMenu)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function trim(text){return $.trim(text).replace(/&nbsp;/gi,"")}function toHash(arr,key){var idx,len,current,result={};for(idx=0,len=arr.length;len>idx;idx++)current=arr[idx],result[current[key]]=current;return result}function leafColumns(columns){for(var result=[],idx=0;idx<columns.length;idx++)columns[idx].columns?result=result.concat(leafColumns(columns[idx].columns)):result.push(columns[idx]);return result}var kendo=window.kendo,ui=kendo.ui,proxy=$.proxy,extend=$.extend,grep=$.grep,map=$.map,inArray=$.inArray,ACTIVE="k-state-selected",ASC="asc",DESC="desc",CHANGE="change",INIT="init",SELECT="select",POPUP="kendoPopup",FILTERMENU="kendoFilterMenu",MENU="kendoMenu",NS=".kendoColumnMenu",Widget=ui.Widget,ColumnMenu=Widget.extend({init:function(element,options){var link,that=this;Widget.fn.init.call(that,element,options),element=that.element,options=that.options,that.owner=options.owner,that.dataSource=options.dataSource,that.field=element.attr(kendo.attr("field")),that.title=element.attr(kendo.attr("title")),link=element.find(".k-header-column-menu"),link[0]||(link=element.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),that.link=link.attr("tabindex",-1).on("click"+NS,proxy(that._click,that)),that.wrapper=$('<div class="k-column-menu"/>'),that._refreshHandler=proxy(that.refresh,that),that.dataSource.bind(CHANGE,that._refreshHandler)},_init:function(){var that=this;that.pane=that.options.pane,that.pane&&(that._isMobile=!0),that._isMobile?that._createMobileMenu():that._createMenu(),that._angularItems("compile"),that._sort(),that._columns(),that._filter(),that._lockColumns(),that.trigger(INIT,{field:that.field,container:that.wrapper})},events:[INIT],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns",done:"Done",settings:"Column Settings",lock:"Lock",unlock:"Unlock"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"}},_createMenu:function(){var that=this,options=that.options;that.wrapper.html(kendo.template(template)({ns:kendo.ns,messages:options.messages,sortable:options.sortable,filterable:options.filterable,columns:that._ownerColumns(),showColumns:options.columns,lockedColumns:options.lockedColumns})),that.popup=that.wrapper[POPUP]({anchor:that.link,open:proxy(that._open,that),activate:proxy(that._activate,that),close:function(){that.options.closeCallback&&that.options.closeCallback(that.element)}}).data(POPUP),that.menu=that.wrapper.children()[MENU]({orientation:"vertical",closeOnClick:!1}).data(MENU)},_createMobileMenu:function(){var that=this,options=that.options,html=kendo.template(mobileTemplate)({ns:kendo.ns,field:that.field,title:that.title||that.field,messages:options.messages,sortable:options.sortable,filterable:options.filterable,columns:that._ownerColumns(),showColumns:options.columns,lockedColumns:options.lockedColumns});that.view=that.pane.append(html),that.wrapper=that.view.element.find(".k-column-menu"),that.menu=new MobileMenu(that.wrapper.children(),{pane:that.pane}),that.view.element.on("click",".k-done",function(e){that.close(),e.preventDefault()}),that.options.lockedColumns&&that.view.bind("show",function(){that._updateLockedColumns()})},_angularItems:function(action){var that=this;that.angular(action,function(){var items=that.wrapper.find(".k-columns-item input["+kendo.attr("field")+"]").map(function(){return $(this).closest("li")}),data=map(that._ownerColumns(),function(col){return{column:col._originalObject}});return{elements:items,data:data}})},destroy:function(){var that=this;that._angularItems("cleanup"),Widget.fn.destroy.call(that),that.filterMenu&&that.filterMenu.destroy(),that._refreshHandler&&that.dataSource.unbind(CHANGE,that._refreshHandler),that.options.columns&&that.owner&&(that._updateColumnsMenuHandler&&(that.owner.unbind("columnShow",that._updateColumnsMenuHandler),that.owner.unbind("columnHide",that._updateColumnsMenuHandler)),that._updateColumnsLockedStateHandler&&(that.owner.unbind("columnLock",that._updateColumnsLockedStateHandler),that.owner.unbind("columnUnlock",that._updateColumnsLockedStateHandler))),that.menu&&(that.menu.element.off(NS),that.menu.destroy()),that.wrapper.off(NS),that.popup&&that.popup.destroy(),that.view&&that.view.purge(),that.link.off(NS),that.owner=null,that.wrapper=null,that.element=null},close:function(){this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+NS))},_click:function(e){e.preventDefault(),e.stopPropagation();var options=this.options;options.filter&&this.element.is(!options.filter)||(this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_open:function(){var that=this;$(".k-column-menu").not(that.wrapper).each(function(){$(this).data(POPUP).close()}),that.popup.element.on("keydown"+NS,function(e){e.keyCode==kendo.keys.ESC&&that.close()}),that.options.lockedColumns&&that._updateLockedColumns()},_activate:function(){this.menu.element.focus()},_ownerColumns:function(){var columns=leafColumns(this.owner.columns),menuColumns=grep(columns,function(col){var result=!0,title=trim(col.title||"");return(col.menu===!1||!col.field&&!title.length)&&(result=!1),result});return map(menuColumns,function(col){return{originalField:col.field,field:col.field||col.title,title:col.title||col.field,hidden:col.hidden,index:inArray(col,columns),locked:!!col.locked,_originalObject:col}})},_sort:function(){var that=this;that.options.sortable&&(that.refresh(),that.menu.bind(SELECT,function(e){var dir,item=$(e.item);item.hasClass("k-sort-asc")?dir=ASC:item.hasClass("k-sort-desc")&&(dir=DESC),dir&&(item.parent().find(".k-sort-"+(dir==ASC?DESC:ASC)).removeClass(ACTIVE),that._sortDataSource(item,dir),that.close())}))},_sortDataSource:function(item,dir){var idx,length,that=this,sortable=that.options.sortable,compare=null===sortable.compare?undefined:sortable.compare,dataSource=that.dataSource,sort=dataSource.sort()||[];if(item.hasClass(ACTIVE)&&sortable&&sortable.allowUnsort!==!1?(item.removeClass(ACTIVE),dir=undefined):item.addClass(ACTIVE),"multiple"===sortable.mode){for(idx=0,length=sort.length;length>idx;idx++)if(sort[idx].field===that.field){sort.splice(idx,1);break}sort.push({field:that.field,dir:dir,compare:compare})}else sort=[{field:that.field,dir:dir,compare:compare}];dataSource.sort(sort)},_columns:function(){var that=this;that.options.columns&&(that._updateColumnsMenu(),that._updateColumnsMenuHandler=proxy(that._updateColumnsMenu,that),that.owner.bind(["columnHide","columnShow"],that._updateColumnsMenuHandler),that._updateColumnsLockedStateHandler=proxy(that._updateColumnsLockedState,that),that.owner.bind(["columnUnlock","columnLock"],that._updateColumnsLockedStateHandler),that.menu.bind(SELECT,function(e){var input,column,field,item=$(e.item),columns=leafColumns(that.owner.columns);that._isMobile&&e.preventDefault(),item.parent().closest("li.k-columns-item")[0]&&(input=item.find(":checkbox"),input.attr("disabled")||(field=input.attr(kendo.attr("field")),
column=grep(columns,function(column){return column.field==field||column.title==field})[0],column.hidden===!0?that.owner.showColumn(column):that.owner.hideColumn(column)))}))},_updateColumnsMenu:function(){var idx,length,current,checked,locked,fieldAttr=kendo.attr("field"),lockedAttr=kendo.attr("locked"),visible=grep(this._ownerColumns(),function(field){return!field.hidden}),visibleDataFields=grep(visible,function(field){return field.originalField}),lockedCount=grep(visibleDataFields,function(col){return col.locked===!0}).length,nonLockedCount=grep(visibleDataFields,function(col){return col.locked!==!0}).length;visible=map(visible,function(col){return col.field});var checkboxes=this.wrapper.find(".k-columns-item input["+fieldAttr+"]").prop("disabled",!1).prop("checked",!1);for(idx=0,length=checkboxes.length;length>idx;idx++)current=checkboxes.eq(idx),locked="true"===current.attr(lockedAttr),checked=!1,inArray(current.attr(fieldAttr),visible)>-1&&(checked=!0,current.prop("checked",checked)),checked&&(1==lockedCount&&locked&&current.prop("disabled",!0),1!=nonLockedCount||locked||current.prop("disabled",!0))},_updateColumnsLockedState:function(){var idx,length,current,column,fieldAttr=kendo.attr("field"),lockedAttr=kendo.attr("locked"),columns=toHash(this._ownerColumns(),"field"),checkboxes=this.wrapper.find(".k-columns-item input[type=checkbox]");for(idx=0,length=checkboxes.length;length>idx;idx++)current=checkboxes.eq(idx),column=columns[current.attr(fieldAttr)],column&&current.attr(lockedAttr,column.locked);this._updateColumnsMenu()},_filter:function(){var that=this,widget=FILTERMENU,options=that.options;options.filterable!==!1&&(options.filterable.multi&&(widget="kendoFilterMultiCheck",options.filterable.dataSource&&(options.filterable.checkSource=options.filterable.dataSource,delete options.filterable.dataSource)),that.filterMenu=that.wrapper.find(".k-filterable")[widget](extend(!0,{},{appendToElement:!0,dataSource:options.dataSource,values:options.values,field:that.field,title:that.title},options.filterable)).data(widget),that._isMobile&&that.menu.bind(SELECT,function(e){var item=$(e.item);item.hasClass("k-filter-item")&&that.pane.navigate(that.filterMenu.view,that.options.animations.left)}))},_lockColumns:function(){var that=this;that.menu.bind(SELECT,function(e){var item=$(e.item);item.hasClass("k-lock")?(that.owner.lockColumn(that.field),that.close()):item.hasClass("k-unlock")&&(that.owner.unlockColumn(that.field),that.close())})},_updateLockedColumns:function(){var field=this.field,columns=this.owner.columns,column=grep(columns,function(column){return column.field==field||column.title==field})[0];if(column){var locked=column.locked===!0,length=grep(columns,function(column){return!column.hidden&&(column.locked&&locked||!column.locked&&!locked)}).length,lockItem=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),unlockItem=this.wrapper.find(".k-unlock").removeClass("k-state-disabled");(locked||1==length)&&lockItem.addClass("k-state-disabled"),locked&&1!=length||unlockItem.addClass("k-state-disabled"),this._updateColumnsLockedState()}},refresh:function(){var descriptor,idx,length,that=this,sort=that.options.dataSource.sort()||[],field=that.field;for(that.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(ACTIVE),idx=0,length=sort.length;length>idx;idx++)descriptor=sort[idx],field==descriptor.field&&that.wrapper.find(".k-sort-"+descriptor.dir).addClass(ACTIVE);that.link[that._filterExist(that.dataSource.filter())?"addClass":"removeClass"]("k-state-active")},_filterExist:function(filters){var filter,found=!1;if(filters){filters=filters.filters;for(var idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],filter.field==this.field?found=!0:filter.filters&&(found=found||this._filterExist(filter));return found}}}),template='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li><input type="checkbox" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</li>#}#</ul></li>#if(filterable || lockedColumns){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(lockedColumns){#<li class="k-separator"></li>#}##}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}#</ul>',mobileTemplate='<div data-#=ns#role="view" data-#=ns#init-widgets="false" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header">${messages.settings}<button class="k-button k-done">#=messages.done#</button></div><div class="k-column-menu k-mobile-list"><ul><li><span class="k-link">${title}</span><ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#}##if(lockedColumns){#<li class="k-item k-lock"><span class="k-link"><span class="k-sprite k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-unlock"><span class="k-link"><span class="k-sprite k-i-unlock"></span>${messages.unlock}</span></li>#}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link k-filterable"><span class="k-sprite k-filter"></span>${messages.filter}</span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-link">${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {#<li class="k-item"><label class="k-label"><input type="checkbox" class="k-check" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#"/>#=columns[idx].title#</label></li>#}#</ul></li>#}#</ul></div></div>',MobileMenu=Widget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),this.element.on("click"+NS,"li.k-item:not(.k-separator):not(.k-state-disabled)","_click")},events:[SELECT],_click:function(e){$(e.target).is("[type=checkbox]")||e.preventDefault(),this.trigger(SELECT,{item:e.currentTarget})},close:function(){this.options.pane.navigate("")},destroy:function(){Widget.fn.destroy.call(this),this.element.off(NS)}});ui.plugin(ColumnMenu)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function dropCueOffsetTop(element){return element.position().top+3}var kendo=window.kendo,Widget=kendo.ui.Widget,proxy=$.proxy,isRtl=!1,NS=".kendoGroupable",CHANGE="change",indicatorTmpl=kendo.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),hint=function(target){return $('<div class="k-header k-drag-clue" />').css({width:target.width(),paddingLeft:target.css("paddingLeft"),paddingRight:target.css("paddingRight"),lineHeight:target.height()+"px",paddingTop:target.css("paddingTop"),paddingBottom:target.css("paddingBottom")}).html(target.attr(kendo.attr("title"))||target.attr(kendo.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},dropCue=$('<div class="k-grouping-dropclue"/>'),Groupable=Widget.extend({init:function(element,options){var draggable,horizontalCuePosition,that=this,group=kendo.guid(),intializePositions=proxy(that._intializePositions,that),dropCuePositions=that._dropCuePositions=[];Widget.fn.init.call(that,element,options),isRtl=kendo.support.isRtl(element),horizontalCuePosition=isRtl?"right":"left",that.draggable=draggable=that.options.draggable||new kendo.ui.Draggable(that.element,{filter:that.options.draggableElements,hint:hint,group:group}),that.groupContainer=$(that.options.groupContainer,that.element).kendoDropTarget({group:draggable.options.group,dragenter:function(e){that._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),dropCue.css("top",dropCueOffsetTop(that.groupContainer)).css(horizontalCuePosition,0).appendTo(that.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),dropCue.remove()},drop:function(e){var position,targetElement=e.draggable.currentTarget,field=targetElement.attr(kendo.attr("field")),title=targetElement.attr(kendo.attr("title")),sourceIndicator=that.indicator(field),dropCuePositions=that._dropCuePositions,lastCuePosition=dropCuePositions[dropCuePositions.length-1];(targetElement.hasClass("k-group-indicator")||that._canDrag(targetElement))&&(lastCuePosition?(position=that._dropCuePosition(kendo.getOffset(dropCue).left+parseInt(lastCuePosition.element.css("marginLeft"),10)*(isRtl?-1:1)+parseInt(lastCuePosition.element.css("marginRight"),10)),position&&that._canDrop($(sourceIndicator),position.element,position.left)&&(position.before?position.element.before(sourceIndicator||that.buildIndicator(field,title)):position.element.after(sourceIndicator||that.buildIndicator(field,title)),that._change())):(that.groupContainer.append(that.buildIndicator(field,title)),that._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:hint,group:draggable.options.group,dragcancel:proxy(that._dragCancel,that),dragstart:function(e){var element=e.currentTarget,marginLeft=parseInt(element.css("marginLeft"),10),elementPosition=element.position(),left=isRtl?elementPosition.left-marginLeft:elementPosition.left+element.outerWidth();intializePositions(),dropCue.css({top:dropCueOffsetTop(that.groupContainer),left:left}).appendTo(that.groupContainer),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){that._dragEnd(this)},drag:proxy(that._drag,that)}).on("click"+NS,".k-button",function(e){e.preventDefault(),that._removeIndicator($(this).parent())}).on("click"+NS,".k-link",function(e){var current=$(this).parent(),newIndicator=that.buildIndicator(current.attr(kendo.attr("field")),current.attr(kendo.attr("title")),"asc"==current.attr(kendo.attr("dir"))?"desc":"asc");current.before(newIndicator).remove(),that._change(),e.preventDefault()}),draggable.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){that._dragEnd(this)},dragcancel:proxy(that._dragCancel,that),dragstart:function(e){var element,marginRight,left;return that.options.allowDrag||that._canDrag(e.currentTarget)?(intializePositions(),void(dropCuePositions.length?(element=dropCuePositions[dropCuePositions.length-1].element,marginRight=parseInt(element.css("marginRight"),10),left=element.position().left+element.outerWidth()+marginRight):left=0)):void e.preventDefault()},drag:proxy(that._drag,that)}),that.dataSource=that.options.dataSource,that.dataSource&&that._refreshHandler?that.dataSource.unbind(CHANGE,that._refreshHandler):that._refreshHandler=proxy(that.refresh,that),that.dataSource&&(that.dataSource.bind("change",that._refreshHandler),that.refresh())},refresh:function(){var that=this,dataSource=that.dataSource;that.groupContainer&&that.groupContainer.empty().append($.map(dataSource.group()||[],function(item){var fieldName=item.field,attr=kendo.attr("field"),element=that.element.find(that.options.filter).filter(function(){return $(this).attr(attr)===fieldName});return that.buildIndicator(item.field,element.attr(kendo.attr("title")),item.dir)}).join("")),that._invalidateGroupContainer()},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.groupContainer.off(NS),that.groupContainer.data("kendoDropTarget")&&that.groupContainer.data("kendoDropTarget").destroy(),that.groupContainer.data("kendoDraggable")&&that.groupContainer.data("kendoDraggable").destroy(),that.options.draggable||that.draggable.destroy(),that.dataSource&&that._refreshHandler&&(that.dataSource.unbind("change",that._refreshHandler),that._refreshHandler=null),that.groupContainer=that.element=that.draggable=null},options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(field){var indicators=$(".k-group-indicator",this.groupContainer);return $.grep(indicators,function(item){return $(item).attr(kendo.attr("field"))===field})[0]},buildIndicator:function(field,title,dir){return indicatorTmpl({field:field.replace(/"/g,"'"),dir:dir,title:title,ns:kendo.ns})},descriptors:function(){var aggregates,names,field,idx,length,that=this,indicators=$(".k-group-indicator",that.groupContainer);return aggregates=that.element.find(that.options.filter).map(function(){var cell=$(this),aggregate=cell.attr(kendo.attr("aggregates")),member=cell.attr(kendo.attr("field"));if(aggregate&&""!==aggregate)for(names=aggregate.split(","),aggregate=[],idx=0,length=names.length;length>idx;idx++)aggregate.push({field:member,aggregate:names[idx]});return aggregate}).toArray(),$.map(indicators,function(item){return item=$(item),field=item.attr(kendo.attr("field")),{field:field,dir:item.attr(kendo.attr("dir")),aggregates:aggregates||[]}})},_removeIndicator:function(indicator){var that=this;indicator.remove(),that._invalidateGroupContainer(),that._change()},_change:function(){var that=this;that.dataSource&&that.dataSource.group(that.descriptors())},_dropCuePosition:function(position){var dropCuePositions=this._dropCuePositions;if(dropCue.is(":visible")&&0!==dropCuePositions.length){position=Math.ceil(position);var lastCuePosition=dropCuePositions[dropCuePositions.length-1],left=lastCuePosition.left,right=lastCuePosition.right,marginLeft=parseInt(lastCuePosition.element.css("marginLeft"),10),marginRight=parseInt(lastCuePosition.element.css("marginRight"),10);return position>=right&&!isRtl||left>position&&isRtl?position={left:lastCuePosition.element.position().left+(isRtl?-marginLeft:lastCuePosition.element.outerWidth()+marginRight),element:lastCuePosition.element,before:!1}:(position=$.grep(dropCuePositions,function(item){return item.left<=position&&position<=item.right||isRtl&&position>item.right})[0],position&&(position={left:isRtl?position.element.position().left+position.element.outerWidth()+marginRight:position.element.position().left-marginLeft,element:position.element,before:!0})),position}},_drag:function(event){var position=this._dropCuePosition(event.x.location);position&&dropCue.css({left:position.left,right:"auto"})},_canDrag:function(element){var field=element.attr(kendo.attr("field"));return"false"!=element.attr(kendo.attr("groupable"))&&field&&(element.hasClass("k-group-indicator")||!this.indicator(field))},_canDrop:function(source,target,position){var next=source.next(),result=source[0]!==target[0]&&(!next[0]||target[0]!==next[0]||!isRtl&&position>next.position().left||isRtl&&position<next.position().left);return result},_dragEnd:function(draggable){var that=this,field=draggable.currentTarget.attr(kendo.attr("field")),sourceIndicator=that.indicator(field);draggable!==that.options.draggable&&!draggable.dropped&&sourceIndicator&&that._removeIndicator($(sourceIndicator)),that._dragCancel()},_dragCancel:function(){dropCue.remove(),this._dropCuePositions=[]},_intializePositions:function(){var left,that=this,indicators=$(".k-group-indicator",that.groupContainer);that._dropCuePositions=$.map(indicators,function(item){return item=$(item),left=kendo.getOffset(item).left,{left:parseInt(left,10),right:parseInt(left+item.outerWidth(),10),element:item}})},_invalidateGroupContainer:function(){var groupContainer=this.groupContainer;groupContainer&&groupContainer.is(":empty")&&groupContainer.html(this.options.messages.empty)}});kendo.ui.plugin(Groupable)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function button(template,idx,text,numeric,title){return template({idx:idx,text:text,ns:kendo.ns,numeric:numeric,title:title||""})}function icon(className,text,wrapClassName){return iconTemplate({className:className.substring(1),text:text,wrapClassName:wrapClassName||""})}function update(element,selector,page,disabled){element.find(selector).parent().attr(kendo.attr("page"),page).attr("tabindex",-1).toggleClass("k-state-disabled",disabled)}function first(element,page){update(element,FIRST,1,1>=page)}function prev(element,page){update(element,PREV,Math.max(1,page-1),1>=page)}function next(element,page,totalPages){update(element,NEXT,Math.min(totalPages,page+1),page>=totalPages)}function last(element,page,totalPages){update(element,LAST,totalPages,page>=totalPages)}var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,proxy=$.proxy,FIRST=".k-i-seek-w",LAST=".k-i-seek-e",PREV=".k-i-arrow-w",NEXT=".k-i-arrow-e",CHANGE="change",NS=".kendoPager",CLICK="click",KEYDOWN="keydown",DISABLED="disabled",iconTemplate=kendo.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),Pager=Widget.extend({init:function(element,options){var page,totalPages,that=this;if(Widget.fn.init.call(that,element,options),options=that.options,that.dataSource=kendo.data.DataSource.create(options.dataSource),that.linkTemplate=kendo.template(that.options.linkTemplate),that.selectTemplate=kendo.template(that.options.selectTemplate),that.currentPageTemplate=kendo.template(that.options.currentPageTemplate),page=that.page(),totalPages=that.totalPages(),that._refreshHandler=proxy(that.refresh,that),that.dataSource.bind(CHANGE,that._refreshHandler),options.previousNext&&(that.element.find(FIRST).length||(that.element.append(icon(FIRST,options.messages.first,"k-pager-first")),first(that.element,page,totalPages)),that.element.find(PREV).length||(that.element.append(icon(PREV,options.messages.previous)),prev(that.element,page,totalPages))),options.numeric&&(that.list=that.element.find(".k-pager-numbers"),that.list.length||(that.list=$('<ul class="k-pager-numbers k-reset" />').appendTo(that.element))),options.input&&(that.element.find(".k-pager-input").length||that.element.append('<span class="k-pager-input k-label">'+options.messages.page+'<input class="k-textbox">'+kendo.format(options.messages.of,totalPages)+"</span>"),that.element.on(KEYDOWN+NS,".k-pager-input input",proxy(that._keydown,that))),options.previousNext&&(that.element.find(NEXT).length||(that.element.append(icon(NEXT,options.messages.next)),next(that.element,page,totalPages)),that.element.find(LAST).length||(that.element.append(icon(LAST,options.messages.last,"k-pager-last")),last(that.element,page,totalPages))),options.pageSizes){if(!that.element.find(".k-pager-sizes").length){var pageSizes=options.pageSizes.length?options.pageSizes:["all",5,10,20],pageItems=$.map(pageSizes,function(size){return size.toLowerCase&&"all"===size.toLowerCase()?"<option value='all'>"+options.messages.allPages+"</option>":"<option>"+size+"</option>"});$('<span class="k-pager-sizes k-label"><select/>'+options.messages.itemsPerPage+"</span>").appendTo(that.element).find("select").html(pageItems.join("")).end().appendTo(that.element)}that.element.find(".k-pager-sizes select").val(that.pageSize()),kendo.ui.DropDownList&&that.element.find(".k-pager-sizes select").show().kendoDropDownList(),that.element.on(CHANGE+NS,".k-pager-sizes select",proxy(that._change,that))}options.refresh&&(that.element.find(".k-pager-refresh").length||that.element.append('<a href="#" class="k-pager-refresh k-link" title="'+options.messages.refresh+'"><span class="k-icon k-i-refresh">'+options.messages.refresh+"</span></a>"),that.element.on(CLICK+NS,".k-pager-refresh",proxy(that._refreshClick,that))),options.info&&(that.element.find(".k-pager-info").length||that.element.append('<span class="k-pager-info k-label" />')),that.element.on(CLICK+NS,"a",proxy(that._click,that)).addClass("k-pager-wrap k-widget k-floatwrap"),that.element.on(CLICK+NS,".k-current-page",proxy(that._toggleActive,that)),options.autoBind&&that.refresh(),kendo.notify(that)},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.element.off(NS),that.dataSource.unbind(CHANGE,that._refreshHandler),that._refreshHandler=null,kendo.destroy(that.element),that.element=that.list=null},events:[CHANGE],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',currentPageTemplate:'<li class="k-current-page"><span class="k-link k-pager-nav">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(dataSource){var that=this;that.dataSource.unbind(CHANGE,that._refreshHandler),that.dataSource=that.options.dataSource=dataSource,dataSource.bind(CHANGE,that._refreshHandler),that.options.autoBind&&dataSource.fetch()},refresh:function(e){var idx,end,reminder,that=this,start=1,page=that.page(),html="",options=that.options,pageSize=that.pageSize(),total=that.dataSource.total(),totalPages=that.totalPages(),linkTemplate=that.linkTemplate,buttonCount=options.buttonCount;if(!e||"itemchange"!=e.action){if(options.numeric){for(page>buttonCount&&(reminder=page%buttonCount,start=0===reminder?page-buttonCount+1:page-reminder+1),end=Math.min(start+buttonCount-1,totalPages),start>1&&(html+=button(linkTemplate,start-1,"...",!1,options.messages.morePages)),idx=start;end>=idx;idx++)html+=button(idx==page?that.selectTemplate:linkTemplate,idx,idx,!0);totalPages>end&&(html+=button(linkTemplate,idx,"...",!1,options.messages.morePages)),""===html&&(html=that.selectTemplate({text:0})),html=this.currentPageTemplate({text:page})+html,that.list.removeClass("k-state-expanded").html(html)}if(options.info&&(html=total>0?kendo.format(options.messages.display,(page-1)*pageSize+1,Math.min(page*pageSize,total),total):options.messages.empty,that.element.find(".k-pager-info").html(html)),options.input&&that.element.find(".k-pager-input").html(that.options.messages.page+'<input class="k-textbox">'+kendo.format(options.messages.of,totalPages)).find("input").val(page).attr(DISABLED,1>total).toggleClass("k-state-disabled",1>total),options.previousNext&&(first(that.element,page,totalPages),prev(that.element,page,totalPages),next(that.element,page,totalPages),last(that.element,page,totalPages)),options.pageSizes){var hasAll=that.element.find(".k-pager-sizes option[value='all']").length>0,selectAll=hasAll&&pageSize===this.dataSource.total(),text=pageSize;selectAll&&(pageSize="all",text=options.messages.allPages),that.element.find(".k-pager-sizes select").val(pageSize).filter("["+kendo.attr("role")+"=dropdownlist]").kendoDropDownList("value",pageSize).kendoDropDownList("text",text)}}},_keydown:function(e){if(e.keyCode===kendo.keys.ENTER){var input=this.element.find(".k-pager-input").find("input"),page=parseInt(input.val(),10);(isNaN(page)||1>page||page>this.totalPages())&&(page=this.page()),input.val(page),this.page(page)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var value=e.currentTarget.value,pageSize=parseInt(value,10),dataSource=this.dataSource;isNaN(pageSize)?"all"==(value+"").toLowerCase()&&dataSource.pageSize(dataSource.total()):dataSource.pageSize(pageSize)},_toggleActive:function(){this.list.toggleClass("k-state-expanded")},_click:function(e){var target=$(e.currentTarget);e.preventDefault(),target.is(".k-state-disabled")||this.page(target.attr(kendo.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(page){return page===undefined?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(page),void this.trigger(CHANGE,{index:page}))}});ui.plugin(Pager)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function collision(element,position){if(!element.is(":visible"))return!1;var elementPosition=kendo.getOffset(element),right=position.left+position.width,bottom=position.top+position.height;return elementPosition.right=elementPosition.left+element.outerWidth(),elementPosition.bottom=elementPosition.top+element.outerHeight(),!(elementPosition.left>right||elementPosition.right<position.left||elementPosition.top>bottom||elementPosition.bottom<position.top)}var kendo=window.kendo,Widget=kendo.ui.Widget,proxy=$.proxy,abs=Math.abs,ARIASELECTED="aria-selected",SELECTED="k-state-selected",ACTIVE="k-state-selecting",SELECTABLE="k-selectable",CHANGE="change",NS=".kendoSelectable",UNSELECTING="k-state-unselecting",INPUTSELECTOR="input,a,textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-expand,span.k-icon.k-i-collapse",msie=kendo.support.browser.msie,supportEventDelegation=!1;!function($){!function(){$('<div class="parent"><span /></div>').on("click",">*",function(){supportEventDelegation=!0}).find("span").click().end().off()}()}($);var Selectable=Widget.extend({init:function(element,options){var multiple,that=this;Widget.fn.init.call(that,element,options),that._marquee=$("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),that._lastActive=null,that.element.addClass(SELECTABLE),that.relatedTarget=that.options.relatedTarget,multiple=that.options.multiple,this.options.aria&&multiple&&that.element.attr("aria-multiselectable",!0),that.userEvents=new kendo.UserEvents(that.element,{global:!0,allowSelection:!0,filter:(supportEventDelegation?"":"."+SELECTABLE+" ")+that.options.filter,tap:proxy(that._tap,that)}),multiple&&that.userEvents.bind("start",proxy(that._start,that)).bind("move",proxy(that._move,that)).bind("end",proxy(that._end,that)).bind("select",proxy(that._select,that))},events:[CHANGE],options:{name:"Selectable",filter:">*",multiple:!1,relatedTarget:$.noop},_isElement:function(target){var idx,elements=this.element,length=elements.length,result=!1;for(target=target[0],idx=0;length>idx;idx++)if(elements[idx]===target){result=!0;break}return result},_tap:function(e){var selected,target=$(e.target),that=this,ctrlKey=e.event.ctrlKey||e.event.metaKey,multiple=that.options.multiple,shiftKey=multiple&&e.event.shiftKey,whichCode=e.event.which,buttonCode=e.event.button;!that._isElement(target.closest("."+SELECTABLE))||whichCode&&3==whichCode||buttonCode&&2==buttonCode||this._allowSelection(e.event.target)&&(selected=target.hasClass(SELECTED),multiple&&ctrlKey||that.clear(),target=target.add(that.relatedTarget(target)),shiftKey?that.selectRange(that._firstSelectee(),target):(selected&&ctrlKey?(that._unselect(target),that._notify(CHANGE)):that.value(target),that._lastActive=that._downTarget=target))},_start:function(e){var currentElement,that=this,target=$(e.target),selected=target.hasClass(SELECTED),ctrlKey=e.event.ctrlKey||e.event.metaKey;if(this._allowSelection(e.event.target)){if(that._downTarget=target,!that._isElement(target.closest("."+SELECTABLE)))return void that.userEvents.cancel();that.options.useAllItems?that._items=that.element.find(that.options.filter):(currentElement=target.closest(that.element),that._items=currentElement.find(that.options.filter)),e.sender.capture(),that._marquee.appendTo(document.body).css({left:e.x.client+1,top:e.y.client+1,width:0,height:0}),ctrlKey||that.clear(),target=target.add(that.relatedTarget(target)),selected&&(that._selectElement(target,!0),ctrlKey&&target.addClass(UNSELECTING))}},_move:function(e){var that=this,position={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:abs(e.x.initialDelta),height:abs(e.y.initialDelta)};that._marquee.css(position),that._invalidateSelectables(position,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(){var that=this;that._marquee.remove(),that._unselect(that.element.find(that.options.filter+"."+UNSELECTING)).removeClass(UNSELECTING);var target=that.element.find(that.options.filter+"."+ACTIVE);target=target.add(that.relatedTarget(target)),that.value(target),that._lastActive=that._downTarget,that._items=null},_invalidateSelectables:function(position,ctrlKey){var idx,length,related,toSelect,target=this._downTarget[0],items=this._items;for(idx=0,length=items.length;length>idx;idx++)toSelect=items.eq(idx),related=toSelect.add(this.relatedTarget(toSelect)),collision(toSelect,position)?toSelect.hasClass(SELECTED)?ctrlKey&&target!==toSelect[0]&&related.removeClass(SELECTED).addClass(UNSELECTING):toSelect.hasClass(ACTIVE)||toSelect.hasClass(UNSELECTING)||related.addClass(ACTIVE):toSelect.hasClass(ACTIVE)?related.removeClass(ACTIVE):ctrlKey&&toSelect.hasClass(UNSELECTING)&&related.removeClass(UNSELECTING).addClass(SELECTED)},value:function(val){var that=this,selectElement=proxy(that._selectElement,that);return val?(val.each(function(){selectElement(this)}),void that._notify(CHANGE)):that.element.find(that.options.filter+"."+SELECTED)},_firstSelectee:function(){var selected,that=this;return null!==that._lastActive?that._lastActive:(selected=that.value(),selected.length>0?selected[0]:that.element.find(that.options.filter)[0])},_selectElement:function(element,preventNotify){var toSelect=$(element),isPrevented=!preventNotify&&this._notify("select",{element:element});toSelect.removeClass(ACTIVE),isPrevented||(toSelect.addClass(SELECTED),this.options.aria&&toSelect.attr(ARIASELECTED,!0))},_notify:function(name,args){return args=args||{},this.trigger(name,args)},_unselect:function(element){return element.removeClass(SELECTED),this.options.aria&&element.attr(ARIASELECTED,!1),element},_select:function(e){this._allowSelection(e.event.target)&&(!msie||msie&&!$(kendo._activeElement()).is(INPUTSELECTOR))&&e.preventDefault()},_allowSelection:function(target){return $(target).is(INPUTSELECTOR)?(this.userEvents.cancel(),this._downTarget=null,!1):!0},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var items=this.element.find(this.options.filter+"."+SELECTED);this._unselect(items)},selectRange:function(start,end){var idx,tmp,items,that=this;for(that.clear(),that.element.length>1&&(items=that.options.continuousItems()),items&&items.length||(items=that.element.find(that.options.filter)),start=$.inArray($(start)[0],items),end=$.inArray($(end)[0],items),start>end&&(tmp=start,start=end,end=tmp),that.options.useAllItems||(end+=that.element.length-1),idx=start;end>=idx;idx++)that._selectElement(items[idx]);that._notify(CHANGE)},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.element.off(NS),that.userEvents.destroy(),that._marquee=that._lastActive=that.element=that.userEvents=null}});Selectable.parseOptions=function(selectable){var asLowerString="string"==typeof selectable&&selectable.toLowerCase();
return{multiple:asLowerString&&asLowerString.indexOf("multiple")>-1,cell:asLowerString&&asLowerString.indexOf("cell")>-1}},kendo.ui.plugin(Selectable)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function containsOrEqualTo(parent,child){try{return $.contains(parent,child)||parent==child}catch(e){return!1}}function defaultHint(element){return element.clone()}function defaultPlaceholder(element){return element.clone().removeAttr("id").css("visibility","hidden")}var kendo=window.kendo,Widget=kendo.ui.Widget,START="start",BEFORE_MOVE="beforeMove",MOVE="move",END="end",CHANGE="change",CANCEL="cancel",ACTION_SORT="sort",ACTION_REMOVE="remove",ACTION_RECEIVE="receive",DEFAULT_FILTER=">*",MISSING_INDEX=-1,Sortable=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),that.options.placeholder||(that.options.placeholder=defaultPlaceholder),that.options.hint||(that.options.hint=defaultHint),that.draggable=that._createDraggable()},events:[START,BEFORE_MOVE,MOVE,END,CHANGE,CANCEL],options:{name:"Sortable",hint:null,placeholder:null,filter:DEFAULT_FILTER,holdToDrag:!1,disabled:null,container:null,connectWith:null,handler:null,cursorOffset:null,axis:null,ignore:null,autoScroll:!1,cursor:"auto",moveOnDragEnter:!1},destroy:function(){this.draggable.destroy(),Widget.fn.destroy.call(this)},_createDraggable:function(){var that=this,element=that.element,options=that.options;return new kendo.ui.Draggable(element,{filter:options.filter,hint:kendo.isFunction(options.hint)?options.hint:$(options.hint),holdToDrag:options.holdToDrag,container:options.container?$(options.container):null,cursorOffset:options.cursorOffset,axis:options.axis,ignore:options.ignore,autoScroll:options.autoScroll,dragstart:$.proxy(that._dragstart,that),dragcancel:$.proxy(that._dragcancel,that),drag:$.proxy(that._drag,that),dragend:$.proxy(that._dragend,that)})},_dragstart:function(e){var draggedElement=this.draggedElement=e.currentTarget,disabled=this.options.disabled,handler=this.options.handler,_placeholder=this.options.placeholder,placeholder=this.placeholder=$(kendo.isFunction(_placeholder)?_placeholder.call(this,draggedElement):_placeholder);disabled&&draggedElement.is(disabled)?e.preventDefault():handler&&!$(e.initialTarget).is(handler)?e.preventDefault():this.trigger(START,{item:draggedElement,draggableEvent:e})?e.preventDefault():(draggedElement.css("display","none"),draggedElement.before(placeholder),this._setCursor())},_dragcancel:function(){this._cancel(),this.trigger(CANCEL,{item:this.draggedElement}),this._resetCursor()},_drag:function(e){var targetCenter,offsetDelta,direction,sibling,getSibling,draggedElement=this.draggedElement,target=this._findTarget(e),cursorOffset={left:e.x.location,top:e.y.location},axisDelta={x:e.x.delta,y:e.y.delta},axis=this.options.axis,moveOnDragEnter=this.options.moveOnDragEnter,eventData={item:draggedElement,list:this,draggableEvent:e};if("x"===axis||"y"===axis)return void this._movementByAxis(axis,cursorOffset,axisDelta[axis],eventData);if(target){if(targetCenter=this._getElementCenter(target.element),offsetDelta={left:Math.round(cursorOffset.left-targetCenter.left),top:Math.round(cursorOffset.top-targetCenter.top)},$.extend(eventData,{target:target.element}),target.appendToBottom)return void this._movePlaceholder(target,null,eventData);if(target.appendAfterHidden&&this._movePlaceholder(target,"next",eventData),this._isFloating(target.element)?axisDelta.x<0&&(moveOnDragEnter||offsetDelta.left<0)?direction="prev":axisDelta.x>0&&(moveOnDragEnter||offsetDelta.left>0)&&(direction="next"):axisDelta.y<0&&(moveOnDragEnter||offsetDelta.top<0)?direction="prev":axisDelta.y>0&&(moveOnDragEnter||offsetDelta.top>0)&&(direction="next"),direction){for(getSibling="prev"===direction?jQuery.fn.prev:jQuery.fn.next,sibling=getSibling.call(target.element);sibling.length&&!sibling.is(":visible");)sibling=getSibling.call(sibling);sibling[0]!=this.placeholder[0]&&this._movePlaceholder(target,direction,eventData)}}},_dragend:function(e){var connectedList,isDefaultPrevented,eventData,connectedListEventData,placeholder=this.placeholder,draggedElement=this.draggedElement,draggedIndex=this.indexOf(draggedElement),placeholderIndex=this.indexOf(placeholder),connectWith=this.options.connectWith;return this._resetCursor(),eventData={action:ACTION_SORT,item:draggedElement,oldIndex:draggedIndex,newIndex:placeholderIndex,draggableEvent:e},placeholderIndex>=0?isDefaultPrevented=this.trigger(END,eventData):(connectedList=placeholder.parents(connectWith).getKendoSortable(),eventData.action=ACTION_REMOVE,connectedListEventData=$.extend({},eventData,{action:ACTION_RECEIVE,oldIndex:MISSING_INDEX,newIndex:connectedList.indexOf(placeholder)}),isDefaultPrevented=!(!this.trigger(END,eventData)&&!connectedList.trigger(END,connectedListEventData))),isDefaultPrevented||placeholderIndex===draggedIndex?void this._cancel():(placeholder.replaceWith(draggedElement),draggedElement.show(),this.draggable.dropped=!0,eventData={action:this.indexOf(draggedElement)!=MISSING_INDEX?ACTION_SORT:ACTION_REMOVE,item:draggedElement,oldIndex:draggedIndex,newIndex:this.indexOf(draggedElement),draggableEvent:e},this.trigger(CHANGE,eventData),void(connectedList&&(connectedListEventData=$.extend({},eventData,{action:ACTION_RECEIVE,oldIndex:MISSING_INDEX,newIndex:connectedList.indexOf(draggedElement)}),connectedList.trigger(CHANGE,connectedListEventData))))},_findTarget:function(e){var items,node,element=this._findElementUnderCursor(e),connectWith=this.options.connectWith;return $.contains(this.element[0],element)?(items=this.items(),node=items.filter(element)[0]||items.has(element)[0],node?{element:$(node),sortable:this}:null):this.element[0]==element&&this._isEmpty()?{element:this.element,sortable:this,appendToBottom:!0}:this.element[0]==element&&this._isLastHidden()?(node=this.items().eq(0),{element:node,sortable:this,appendAfterHidden:!0}):connectWith?this._searchConnectedTargets(element,e):void 0},_findElementUnderCursor:function(e){var elementUnderCursor=kendo.elementUnderCursor(e),draggable=e.sender;return containsOrEqualTo(draggable.hint[0],elementUnderCursor)&&(draggable.hint.hide(),elementUnderCursor=kendo.elementUnderCursor(e),elementUnderCursor||(elementUnderCursor=kendo.elementUnderCursor(e)),draggable.hint.show()),elementUnderCursor},_searchConnectedTargets:function(element,e){for(var sortableInstance,items,node,connected=$(this.options.connectWith),i=0;i<connected.length;i++)if(sortableInstance=connected.eq(i).getKendoSortable(),$.contains(connected[i],element)){if(sortableInstance)return items=sortableInstance.items(),node=items.filter(element)[0]||items.has(element)[0],node?(sortableInstance.placeholder=this.placeholder,{element:$(node),sortable:sortableInstance}):null}else if(connected[i]==element){if(sortableInstance&&sortableInstance._isEmpty())return{element:connected.eq(i),sortable:sortableInstance,appendToBottom:!0};if(this._isCursorAfterLast(sortableInstance,e))return node=sortableInstance.items().last(),{element:node,sortable:sortableInstance}}},_isCursorAfterLast:function(sortable,e){var lastItemOffset,delta,lastItem=sortable.items().last(),cursorOffset={left:e.x.location,top:e.y.location};return lastItemOffset=kendo.getOffset(lastItem),lastItemOffset.top+=lastItem.outerHeight(),lastItemOffset.left+=lastItem.outerWidth(),delta=this._isFloating(lastItem)?lastItemOffset.left-cursorOffset.left:lastItemOffset.top-cursorOffset.top,0>delta?!0:!1},_movementByAxis:function(axis,cursorOffset,delta,eventData){var targetCenter,cursorPosition="x"===axis?cursorOffset.left:cursorOffset.top,target=0>delta?this.placeholder.prev():this.placeholder.next();target.length&&!target.is(":visible")&&(target=0>delta?target.prev():target.next()),$.extend(eventData,{target:target}),targetCenter=this._getElementCenter(target),targetCenter&&(targetCenter="x"===axis?targetCenter.left:targetCenter.top),target.length&&0>delta&&0>cursorPosition-targetCenter?this._movePlaceholder({element:target,sortable:this},"prev",eventData):target.length&&delta>0&&cursorPosition-targetCenter>0&&this._movePlaceholder({element:target,sortable:this},"next",eventData)},_movePlaceholder:function(target,direction,eventData){var placeholder=this.placeholder;target.sortable.trigger(BEFORE_MOVE,eventData)||(direction?"prev"===direction?target.element.before(placeholder):"next"===direction&&target.element.after(placeholder):target.element.append(placeholder),target.sortable.trigger(MOVE,eventData))},_setCursor:function(){var body,cursor=this.options.cursor;cursor&&"auto"!==cursor&&(body=$(document.body),this._originalCursorType=body.css("cursor"),body.css({cursor:cursor}),this._cursorStylesheet||(this._cursorStylesheet=$("<style>* { cursor: "+cursor+" !important; }</style>")),this._cursorStylesheet.appendTo(body))},_resetCursor:function(){this._originalCursorType&&($(document.body).css("cursor",this._originalCursorType),this._originalCursorType=null,this._cursorStylesheet.remove())},_getElementCenter:function(element){var center=element.length?kendo.getOffset(element):null;return center&&(center.top+=element.outerHeight()/2,center.left+=element.outerWidth()/2),center},_isFloating:function(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))},_cancel:function(){this.draggedElement.show(),this.placeholder.remove()},_items:function(){var items,filter=this.options.filter;return items=filter?this.element.find(filter):this.element.children()},indexOf:function(element){var items=this._items(),placeholder=this.placeholder,draggedElement=this.draggedElement;return placeholder&&element[0]==placeholder[0]?items.not(draggedElement).index(element):items.not(placeholder).index(element)},items:function(){var placeholder=this.placeholder,items=this._items();return placeholder&&(items=items.not(placeholder)),items},_isEmpty:function(){return!this.items().length},_isLastHidden:function(){return 1===this.items().length&&this.items().is(":hidden")}});kendo.ui.plugin(Sortable)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function toggleHintClass(hint,denied){hint=$(hint),denied?hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var kendo=window.kendo,getOffset=kendo.getOffset,Widget=kendo.ui.Widget,CHANGE="change",KREORDERABLE="k-reorderable",Reorderable=Widget.extend({init:function(element,options){var draggable,that=this,group=kendo.guid()+"-reorderable";Widget.fn.init.call(that,element,options),element=that.element.addClass(KREORDERABLE),options=that.options,that.draggable=draggable=options.draggable||new kendo.ui.Draggable(element,{group:group,autoScroll:!0,filter:options.filter,hint:options.hint}),that.reorderDropCue=$('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),element.find(draggable.options.filter).kendoDropTarget({group:draggable.options.group,dragenter:function(e){if(that._draggable){var offset,dropTarget=this.element,denied=!that._dropTargetAllowed(dropTarget)||that._isLastDraggable();if(toggleHintClass(e.draggable.hint,denied),!denied){offset=getOffset(dropTarget);var left=offset.left;options.inSameContainer&&!options.inSameContainer({source:dropTarget,target:that._draggable,sourceIndex:that._index(dropTarget),targetIndex:that._index(that._draggable)})?that._dropTarget=dropTarget:that._index(dropTarget)>that._index(that._draggable)&&(left+=dropTarget.outerWidth()),that.reorderDropCue.css({height:dropTarget.outerHeight(),top:offset.top,left:left}).appendTo(document.body)}}},dragleave:function(e){toggleHintClass(e.draggable.hint,!0),that.reorderDropCue.remove(),that._dropTarget=null},drop:function(){if(that._dropTarget=null,that._draggable){var dropTarget=this.element,draggable=that._draggable;that._dropTargetAllowed(dropTarget)&&!that._isLastDraggable()&&that.trigger(CHANGE,{element:that._draggable,target:dropTarget,oldIndex:that._index(draggable),newIndex:that._index(dropTarget),position:getOffset(that.reorderDropCue).left>getOffset(dropTarget).left?"after":"before"})}}}),draggable.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){that.reorderDropCue.remove(),that._draggable=null,that._elements=null},dragend:function(){that.reorderDropCue.remove(),that._draggable=null,that._elements=null},dragstart:function(e){that._draggable=e.currentTarget,that._elements=that.element.find(that.draggable.options.filter)},drag:function(e){if(that._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-denied")){var dropStartOffset=getOffset(that._dropTarget).left,width=that._dropTarget.outerWidth();that.reorderDropCue.css(e.pageX>dropStartOffset+width/2?{left:dropStartOffset+width}:{left:dropStartOffset})}}})},options:{name:"Reorderable",filter:"*"},events:[CHANGE],_isLastDraggable:function(){var item,inSameContainer=this.options.inSameContainer,draggable=this._draggable[0],elements=this._elements.get(),found=!1;if(!inSameContainer)return!1;for(;!found&&elements.length>0;)item=elements.pop(),found=draggable!==item&&inSameContainer({source:draggable,target:item,sourceIndex:this._index(draggable),targetIndex:this._index(item)});return!found},_dropTargetAllowed:function(dropTarget){var inSameContainer=this.options.inSameContainer,dragOverContainers=this.options.dragOverContainers,draggable=this._draggable;return draggable[0]===dropTarget[0]?!1:inSameContainer&&dragOverContainers?inSameContainer({source:draggable,target:dropTarget,sourceIndex:this._index(draggable),targetIndex:this._index(dropTarget)})?!0:dragOverContainers(this._index(draggable),this._index(dropTarget)):!0},_index:function(element){return this._elements.index(element)},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.element.find(that.draggable.options.filter).each(function(){var item=$(this);item.data("kendoDropTarget")&&item.data("kendoDropTarget").destroy()}),that.draggable&&(that.draggable.destroy(),that.draggable.element=that.draggable=null),that.elements=that.reorderDropCue=that._elements=that._draggable=null}});kendo.ui.plugin(Reorderable)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,proxy=$.proxy,isFunction=kendo.isFunction,extend=$.extend,HORIZONTAL="horizontal",VERTICAL="vertical",START="start",RESIZE="resize",RESIZEEND="resizeend",Resizable=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),that.orientation=that.options.orientation.toLowerCase()!=VERTICAL?HORIZONTAL:VERTICAL,that._positionMouse=that.orientation==HORIZONTAL?"x":"y",that._position=that.orientation==HORIZONTAL?"left":"top",that._sizingDom=that.orientation==HORIZONTAL?"outerWidth":"outerHeight",that.draggable=new ui.Draggable(element,{distance:1,filter:options.handle,drag:proxy(that._resize,that),dragcancel:proxy(that._cancel,that),dragstart:proxy(that._start,that),dragend:proxy(that._stop,that)}),that.userEvents=that.draggable.userEvents},events:[RESIZE,RESIZEEND,START],options:{name:"Resizable",orientation:HORIZONTAL},resize:function(){},_max:function(e){var that=this,hintSize=that.hint?that.hint[that._sizingDom]():0,size=that.options.max;return isFunction(size)?size(e):size!==undefined?that._initialElementPosition+size-hintSize:size},_min:function(e){var that=this,size=that.options.min;return isFunction(size)?size(e):size!==undefined?that._initialElementPosition+size:size},_start:function(e){var that=this,hint=that.options.hint,el=$(e.currentTarget);that._initialElementPosition=el.position()[that._position],that._initialMousePosition=e[that._positionMouse].startLocation,hint&&(that.hint=isFunction(hint)?$(hint(el)):hint,that.hint.css({position:"absolute"}).css(that._position,that._initialElementPosition).appendTo(that.element)),that.trigger(START,e),that._maxPosition=that._max(e),that._minPosition=that._min(e),$(document.body).css("cursor",el.css("cursor"))},_resize:function(e){var position,that=this,maxPosition=that._maxPosition,minPosition=that._minPosition,currentPosition=that._initialElementPosition+(e[that._positionMouse].location-that._initialMousePosition);position=minPosition!==undefined?Math.max(minPosition,currentPosition):currentPosition,that.position=position=maxPosition!==undefined?Math.min(maxPosition,position):position,that.hint&&that.hint.toggleClass(that.options.invalidClass||"",position==maxPosition||position==minPosition).css(that._position,position),that.resizing=!0,that.trigger(RESIZE,extend(e,{position:position}))},_stop:function(e){var that=this;that.hint&&that.hint.remove(),that.resizing=!1,that.trigger(RESIZEEND,extend(e,{position:that.position})),$(document.body).css("cursor","")},_cancel:function(e){var that=this;that.hint&&(that.position=undefined,that.hint.css(that._position,that._initialElementPosition),that._stop(e))},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.draggable&&that.draggable.destroy()},press:function(target){if(target){var position=target.position(),that=this;that.userEvents.press(position.left,position.top,target[0]),that.targetPosition=position,that.target=target}},move:function(delta){var that=this,orientation=that._position,position=that.targetPosition,current=that.position;current===undefined&&(current=position[orientation]),position[orientation]=current+delta,that.userEvents.move(position.left,position.top)},end:function(){this.userEvents.end(),this.target=this.position=undefined}});kendo.ui.plugin(Resizable)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function parseTransition(transition){if(!transition)return{};var matches=transition.match(transitionRegExp)||[];return{type:matches[1],direction:matches[3],reverse:"reverse"===matches[5]}}var kendo=window.kendo,Observable=kendo.Observable,SCRIPT="SCRIPT",INIT="init",SHOW="show",HIDE="hide",TRANSITION_START="transitionStart",TRANSITION_END="transitionEnd",ATTACH="attach",DETACH="detach",sizzleErrorRegExp=/unrecognized expression/,View=Observable.extend({init:function(content,options){var that=this;options=options||{},Observable.fn.init.call(that),that.content=content,that.id=kendo.guid(),that.tagName=options.tagName||"div",that.model=options.model,that._wrap=options.wrap!==!1,this._evalTemplate=options.evalTemplate||!1,that._fragments={},that.bind([INIT,SHOW,HIDE,TRANSITION_START,TRANSITION_END],options)},render:function(container){var that=this,notInitialized=!that.element;return notInitialized&&(that.element=that._createElement()),container&&$(container).append(that.element),notInitialized&&(kendo.bind(that.element,that.model),that.trigger(INIT)),container&&(that._eachFragment(ATTACH),that.trigger(SHOW)),that.element},clone:function(){return new ViewClone(this)},triggerBeforeShow:function(){return!0},triggerBeforeHide:function(){return!0},showStart:function(){this.element.css("display","")},showEnd:function(){},hideEnd:function(){this.hide()},beforeTransition:function(type){this.trigger(TRANSITION_START,{type:type})},afterTransition:function(type){this.trigger(TRANSITION_END,{type:type})},hide:function(){this._eachFragment(DETACH),this.element.detach(),this.trigger(HIDE)},destroy:function(){var element=this.element;element&&(kendo.unbind(element),kendo.destroy(element),element.remove())},fragments:function(fragments){$.extend(this._fragments,fragments)},_eachFragment:function(methodName){for(var placeholder in this._fragments)this._fragments[placeholder][methodName](this,placeholder)},_createElement:function(){var element,content,that=this,wrapper="<"+that.tagName+" />";try{content=$(document.getElementById(that.content)||that.content),content[0].tagName===SCRIPT&&(content=content.html())}catch(e){sizzleErrorRegExp.test(e.message)&&(content=that.content)}if("string"==typeof content)content=content.replace(/^\s+|\s+$/g,""),that._evalTemplate&&(content=kendo.template(content)(that.model||{})),element=$(wrapper).append(content),that._wrap||(element=element.contents());else{if(element=content,that._evalTemplate){var result=$(kendo.template($("<div />").append(element.clone(!0)).html())(that.model||{}));$.contains(document,element[0])&&element.replaceWith(result),element=result}that._wrap&&(element=element.wrapAll(wrapper).parent())}return element}}),ViewClone=kendo.Class.extend({init:function(view){$.extend(this,{element:view.element.clone(!0),transition:view.transition,id:view.id}),view.element.parent().append(this.element)},hideEnd:function(){this.element.remove()},beforeTransition:$.noop,afterTransition:$.noop}),Layout=View.extend({init:function(content,options){View.fn.init.call(this,content,options),this.containers={}},container:function(selector){var container=this.containers[selector];return container||(container=this._createContainer(selector),this.containers[selector]=container),container},showIn:function(selector,view,transition){this.container(selector).show(view,transition)},_createContainer:function(selector){var container,root=this.render(),element=root.find(selector);if(!element.length&&root.is(selector)){if(!root.is(selector))throw new Error("can't find a container with the specified "+selector+" selector");element=root}return container=new ViewContainer(element),container.bind("accepted",function(e){e.view.render(element)}),container}}),Fragment=View.extend({attach:function(view,placeholder){view.element.find(placeholder).replaceWith(this.render())},detach:function(){}}),transitionRegExp=/^(\w+)(:(\w+))?( (\w+))?$/,ViewContainer=Observable.extend({init:function(container){Observable.fn.init.call(this),this.container=container,this.history=[],this.view=null,this.running=!1},after:function(){this.running=!1,this.trigger("complete",{view:this.view}),this.trigger("after")},end:function(){this.view.showEnd(),this.previous.hideEnd(),this.after()},show:function(view,transition,locationID){if(!view.triggerBeforeShow()||this.view&&!this.view.triggerBeforeHide())return this.trigger("after"),!1;locationID=locationID||view.id;var that=this,current=view===that.view?view.clone():that.view,history=that.history,previousEntry=history[history.length-2]||{},back=previousEntry.id===locationID,theTransition=transition||(back?history[history.length-1].transition:view.transition),transitionData=parseTransition(theTransition);return that.running&&that.effect.stop(),"none"===theTransition&&(theTransition=null),that.trigger("accepted",{view:view}),that.view=view,that.previous=current,that.running=!0,back?history.pop():history.push({id:locationID,transition:theTransition}),current?(theTransition&&kendo.effects.enabled?(view.element.addClass("k-fx-hidden"),view.showStart(),back&&!transition&&(transitionData.reverse=!transitionData.reverse),that.effect=kendo.fx(view.element).replace(current.element,transitionData.type).beforeTransition(function(){view.beforeTransition("show"),current.beforeTransition("hide")}).afterTransition(function(){view.afterTransition("show"),current.afterTransition("hide")}).direction(transitionData.direction).setReverse(transitionData.reverse),that.effect.run().then(function(){that.end()})):(view.showStart(),that.end()),!0):(view.showStart(),view.showEnd(),that.after(),!0)}});kendo.ViewContainer=ViewContainer,kendo.Fragment=Fragment,kendo.Layout=Layout,kendo.View=View,kendo.ViewClone=ViewClone}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function initPopOvers(element){var idx,length,popovers=element.find(roleSelector("popover")),roles=ui.roles;for(idx=0,length=popovers.length;length>idx;idx++)kendo.initWidget(popovers[idx],{},roles)}function preventScrollIfNotInput(e){kendo.triggeredByInput(e)||e.preventDefault()}function initWidgets(collection){collection.each(function(){kendo.initWidget($(this),{},ui.roles)})}var kendo=window.kendo,mobile=kendo.mobile,ui=mobile.ui,attr=kendo.attr,Widget=ui.Widget,ViewClone=kendo.ViewClone,INIT="init",UI_OVERLAY='<div style="height: 100%; width: 100%; position: absolute; top: 0; left: 0; z-index: 20000; display: none" />',BEFORE_SHOW="beforeShow",SHOW="show",AFTER_SHOW="afterShow",BEFORE_HIDE="beforeHide",TRANSITION_END="transitionEnd",TRANSITION_START="transitionStart",HIDE="hide",DESTROY="destroy",attrValue=kendo.attrValue,roleSelector=kendo.roleSelector,directiveSelector=kendo.directiveSelector,compileMobileDirective=kendo.compileMobileDirective,View=Widget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),this.params={},$.extend(this,options),this.transition=this.transition||this.defaultTransition,this._id(),this.options.$angular?this._overlay():(this._layout(),this._overlay(),this._scroller(),this._model())},events:[INIT,BEFORE_SHOW,SHOW,AFTER_SHOW,BEFORE_HIDE,HIDE,DESTROY,TRANSITION_START,TRANSITION_END],options:{name:"View",title:"",layout:null,getLayout:$.noop,reload:!1,transition:"",defaultTransition:"",useNativeScrolling:!1,stretch:!1,zoom:!1,model:null,modelScope:window,scroller:{},initWidgets:!0},enable:function(enable){"undefined"==typeof enable&&(enable=!0),enable?this.overlay.hide():this.overlay.show()},destroy:function(){this.layout&&this.layout.detach(this),this.trigger(DESTROY),Widget.fn.destroy.call(this),this.scroller&&this.scroller.destroy(),this.options.$angular&&this.element.scope().$destroy(),kendo.destroy(this.element)},purge:function(){this.destroy(),this.element.remove()},triggerBeforeShow:function(){return this.trigger(BEFORE_SHOW,{view:this})?!1:!0},triggerBeforeHide:function(){return this.trigger(BEFORE_HIDE,{view:this})?!1:!0},showStart:function(){var element=this.element;element.css("display",""),this.inited?this._invokeNgController():(this.inited=!0,this.trigger(INIT,{view:this})),this.layout&&this.layout.attach(this),this._padIfNativeScrolling(),this.trigger(SHOW,{view:this}),kendo.resize(element)},showEnd:function(){this.trigger(AFTER_SHOW,{view:this}),this._padIfNativeScrolling()},hideEnd:function(){var that=this;that.element.hide(),that.trigger(HIDE,{view:that}),that.layout&&that.layout.trigger(HIDE,{view:that,layout:that.layout})},beforeTransition:function(type){this.trigger(TRANSITION_START,{type:type})},afterTransition:function(type){this.trigger(TRANSITION_END,{type:type})},_padIfNativeScrolling:function(){if(mobile.appLevelNativeScrolling()){var isAndroid=kendo.support.mobileOS&&kendo.support.mobileOS.android,skin=mobile.application.skin()||"",isAndroidForced=mobile.application.os.android||skin.indexOf("android")>-1,hasPlatformIndependentSkin="flat"===skin||skin.indexOf("material")>-1,topContainer=!isAndroid&&!isAndroidForced||hasPlatformIndependentSkin?"header":"footer",bottomContainer=!isAndroid&&!isAndroidForced||hasPlatformIndependentSkin?"footer":"header";this.content.css({paddingTop:this[topContainer].height(),paddingBottom:this[bottomContainer].height()})}},contentElement:function(){var that=this;return that.options.stretch?that.content:that.scrollerContent},clone:function(){return new ViewClone(this)},_scroller:function(){var that=this;mobile.appLevelNativeScrolling()||(that.options.stretch?that.content.addClass("km-stretched-view"):(that.content.kendoMobileScroller($.extend(that.options.scroller,{zoom:that.options.zoom,useNative:that.options.useNativeScrolling})),that.scroller=that.content.data("kendoMobileScroller"),that.scrollerContent=that.scroller.scrollElement),kendo.support.kineticScrollNeeded&&($(that.element).on("touchmove",".km-header",preventScrollIfNotInput),that.options.useNativeScrolling||that.options.stretch||$(that.element).on("touchmove",".km-content",preventScrollIfNotInput)))},_model:function(){var that=this,element=that.element,model=that.options.model;"string"==typeof model&&(model=kendo.getter(model)(that.options.modelScope)),that.model=model,initPopOvers(element),that.element.css("display",""),that.options.initWidgets&&(model?kendo.bind(element,model,ui,kendo.ui,kendo.dataviz.ui):mobile.init(element.children())),that.element.css("display","none")},_id:function(){var element=this.element,idAttrValue=element.attr("id")||"";this.id=attrValue(element,"url")||"#"+idAttrValue,"#"==this.id&&(this.id=kendo.guid(),element.attr("id",this.id))},_layout:function(){var contentSelector=roleSelector("content"),element=this.element;element.addClass("km-view"),this.header=element.children(roleSelector("header")).addClass("km-header"),this.footer=element.children(roleSelector("footer")).addClass("km-footer"),element.children(contentSelector)[0]||element.wrapInner("<div "+attr("role")+'="content"></div>'),this.content=element.children(roleSelector("content")).addClass("km-content"),this.element.prepend(this.header).append(this.footer),this.layout=this.options.getLayout(this.layout),this.layout&&this.layout.setup(this)},_overlay:function(){this.overlay=$(UI_OVERLAY).appendTo(this.element)},_invokeNgController:function(){var controller,scope;if(this.options.$angular&&(controller=this.element.controller(),scope=this.options.$angular[0],controller)){var callback=$.proxy(this,"_callController",controller,scope);/^\$(digest|apply)$/.test(scope.$$phase)?callback():scope.$apply(callback)}},_callController:function(controller,scope){this.element.injector().invoke(controller.constructor,controller,{$scope:scope})}}),Layout=Widget.extend({init:function(element,options){Widget.fn.init.call(this,element,options),element=this.element,this.header=element.children(this._locate("header")).addClass("km-header"),this.footer=element.children(this._locate("footer")).addClass("km-footer"),this.elements=this.header.add(this.footer),initPopOvers(element),this.options.$angular||kendo.mobile.init(this.element.children()),this.element.detach(),this.trigger(INIT,{layout:this})},_locate:function(selectors){return this.options.$angular?directiveSelector(selectors):roleSelector(selectors)},options:{name:"Layout",id:null,platform:null},events:[INIT,SHOW,HIDE],setup:function(view){view.header[0]||(view.header=this.header),view.footer[0]||(view.footer=this.footer)},detach:function(view){var that=this;view.header===that.header&&that.header[0]&&view.element.prepend(that.header.detach()[0].cloneNode(!0)),view.footer===that.footer&&that.footer.length&&view.element.append(that.footer.detach()[0].cloneNode(!0))},attach:function(view){var that=this,previousView=that.currentView;previousView&&that.detach(previousView),view.header===that.header&&(that.header.detach(),view.element.children(roleSelector("header")).remove(),view.element.prepend(that.header)),view.footer===that.footer&&(that.footer.detach(),view.element.children(roleSelector("footer")).remove(),view.element.append(that.footer)),that.trigger(SHOW,{layout:that,view:view}),that.currentView=view}}),Observable=kendo.Observable,bodyRegExp=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,LOAD_START="loadStart",LOAD_COMPLETE="loadComplete",SHOW_START="showStart",SAME_VIEW_REQUESTED="sameViewRequested",VIEW_SHOW="viewShow",VIEW_TYPE_DETERMINED="viewTypeDetermined",AFTER="after",ViewEngine=Observable.extend({init:function(options){var views,errorMessage,container,collection,that=this;if(Observable.fn.init.call(that),$.extend(that,options),that.sandbox=$("<div />"),container=that.container,views=that._hideViews(container),that.rootView=views.first(),!that.rootView[0]&&options.rootNeeded)throw errorMessage=container[0]==kendo.mobile.application.element[0]?'Your kendo mobile application element does not contain any direct child elements with data-role="view" attribute set. Make sure that you instantiate the mobile application using the correct container.':'Your pane element does not contain any direct child elements with data-role="view" attribute set.',new Error(errorMessage);that.layouts={},that.viewContainer=new kendo.ViewContainer(that.container),that.viewContainer.bind("accepted",function(e){e.view.params=that.params}),that.viewContainer.bind("complete",function(e){that.trigger(VIEW_SHOW,{view:e.view})}),that.viewContainer.bind(AFTER,function(){that.trigger(AFTER)}),this.getLayoutProxy=$.proxy(this,"_getLayout"),
that._setupLayouts(container),collection=container.children(that._locate("modalview drawer")),that.$angular?(that.$angular[0].viewOptions={defaultTransition:that.transition,loader:that.loader,container:that.container,getLayout:that.getLayoutProxy},collection.each(function(idx,element){compileMobileDirective($(element),options.$angular[0])})):initWidgets(collection),this.bind(this.events,options)},events:[SHOW_START,AFTER,VIEW_SHOW,LOAD_START,LOAD_COMPLETE,SAME_VIEW_REQUESTED,VIEW_TYPE_DETERMINED],destroy:function(){kendo.destroy(this.container);for(var id in this.layouts)this.layouts[id].destroy()},view:function(){return this.viewContainer.view},showView:function(url,transition,params){if(url=url.replace(new RegExp("^"+this.remoteViewURLPrefix),""),""===url&&this.remoteViewURLPrefix&&(url="/"),url.replace(/^#/,"")===this.url)return this.trigger(SAME_VIEW_REQUESTED),!1;this.trigger(SHOW_START);var that=this,showClosure=function(view){return that.viewContainer.show(view,transition,url)},element=that._findViewElement(url),view=kendo.widgetInstance(element);return that.url=url.replace(/^#/,""),that.params=params,view&&view.reload&&(view.purge(),element=[]),this.trigger(VIEW_TYPE_DETERMINED,{remote:0===element.length,url:url}),element[0]?(view||(view=that._createView(element)),showClosure(view)):(this.serverNavigation?location.href=url:that._loadView(url,showClosure),!0)},append:function(html,url){var views,modalViews,view,sandbox=this.sandbox,urlPath=(url||"").split("?")[0],container=this.container;return bodyRegExp.test(html)&&(html=RegExp.$1),sandbox[0].innerHTML=html,container.append(sandbox.children("script, style")),views=this._hideViews(sandbox),view=views.first(),view.length||(views=view=sandbox.wrapInner("<div data-role=view />").children()),urlPath&&view.hide().attr(attr("url"),urlPath),this._setupLayouts(sandbox),modalViews=sandbox.children(this._locate("modalview drawer")),container.append(sandbox.children(this._locate("layout modalview drawer")).add(views)),initWidgets(modalViews),this._createView(view)},_locate:function(selectors){return this.$angular?directiveSelector(selectors):roleSelector(selectors)},_findViewElement:function(url){var element,urlPath=url.split("?")[0];return urlPath?(element=this.container.children("["+attr("url")+"='"+urlPath+"']"),element[0]||-1!==urlPath.indexOf("/")||(element=this.container.children("#"===urlPath.charAt(0)?urlPath:"#"+urlPath)),element):this.rootView},_createView:function(element){return this.$angular?compileMobileDirective(element,this.$angular[0]):kendo.initWidget(element,{defaultTransition:this.transition,loader:this.loader,container:this.container,getLayout:this.getLayoutProxy,modelScope:this.modelScope,reload:attrValue(element,"reload")},ui.roles)},_getLayout:function(name){return""===name?null:name?this.layouts[name]:this.layouts[this.layout]},_loadView:function(url,callback){this._xhr&&this._xhr.abort(),this.trigger(LOAD_START),this._xhr=$.get(kendo.absoluteURL(url,this.remoteViewURLPrefix),"html").always($.proxy(this,"_xhrComplete",callback,url))},_xhrComplete:function(callback,url,response){var success=!0;if("object"==typeof response&&0===response.status){if(!(response.responseText&&response.responseText.length>0))return;success=!0,response=response.responseText}this.trigger(LOAD_COMPLETE),success&&callback(this.append(response,url))},_hideViews:function(container){return container.children(this._locate("view splitview")).hide()},_setupLayouts:function(element){var layout,that=this;element.children(that._locate("layout")).each(function(){layout=that.$angular?compileMobileDirective($(this),that.$angular[0]):kendo.initWidget($(this),{},ui.roles);var platform=layout.options.platform;platform&&platform!==mobile.application.os.name?layout.destroy():that.layouts[layout.options.id]=layout})}});kendo.mobile.ViewEngine=ViewEngine,ui.plugin(View),ui.plugin(Layout)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,ui=kendo.mobile.ui,Widget=ui.Widget,CAPTURE_EVENTS=$.map(kendo.eventMap,function(value){return value}).join(" ").split(" "),Loader=Widget.extend({init:function(container,options){var that=this,element=$('<div class="km-loader"><span class="km-loading km-spin"></span><span class="km-loading-left"></span><span class="km-loading-right"></span></div>');Widget.fn.init.call(that,element,options),that.container=container,that.captureEvents=!1,that._attachCapture(),element.append(that.options.loading).hide().appendTo(container)},options:{name:"Loader",loading:"<h1>Loading...</h1>",timeout:100},show:function(){var that=this;clearTimeout(that._loading),that.options.loading!==!1&&(that.captureEvents=!0,that._loading=setTimeout(function(){that.element.show()},that.options.timeout))},hide:function(){this.captureEvents=!1,clearTimeout(this._loading),this.element.hide()},changeMessage:function(message){this.options.loading=message,this.element.find(">h1").html(message)},transition:function(){this.captureEvents=!0,this.container.css("pointer-events","none")},transitionDone:function(){this.captureEvents=!1,this.container.css("pointer-events","")},_attachCapture:function(){function capture(e){that.captureEvents&&e.preventDefault()}var that=this;that.captureEvents=!1;for(var i=0;i<CAPTURE_EVENTS.length;i++)that.container[0].addEventListener(CAPTURE_EVENTS[i],capture,!0)}});ui.plugin(Loader)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,mobile=kendo.mobile,roleSelector=kendo.roleSelector,ui=mobile.ui,Widget=ui.Widget,ViewEngine=mobile.ViewEngine,View=ui.View,Loader=mobile.ui.Loader,EXTERNAL="external",HREF="href",DUMMY_HREF="#!",NAVIGATE="navigate",VIEW_SHOW="viewShow",SAME_VIEW_REQUESTED="sameViewRequested",OS=kendo.support.mobileOS,SKIP_TRANSITION_ON_BACK_BUTTON=OS.ios&&!OS.appMode&&OS.flatVersion>=700,WIDGET_RELS=/popover|actionsheet|modalview|drawer/,BACK="#:back",attrValue=kendo.attrValue,Pane=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),options=that.options,element=that.element,element.addClass("km-pane"),that.options.collapsible&&element.addClass("km-collapsible-pane"),this.history=[],this.historyCallback=function(url,params,backButtonPressed){var transition=that.transition;return that.transition=null,SKIP_TRANSITION_ON_BACK_BUTTON&&backButtonPressed&&(transition="none"),that.viewEngine.showView(url,transition,params)},this._historyNavigate=function(url){if(url===BACK){if(1===that.history.length)return;that.history.pop(),url=that.history[that.history.length-1]}else that.history.push(url);that.historyCallback(url,kendo.parseQueryStringParams(url))},this._historyReplace=function(url){var params=kendo.parseQueryStringParams(url);that.history[that.history.length-1]=url,that.historyCallback(url,params)},that.loader=new Loader(element,{loading:that.options.loading}),that.viewEngine=new ViewEngine({container:element,transition:options.transition,modelScope:options.modelScope,rootNeeded:!options.initial,serverNavigation:options.serverNavigation,remoteViewURLPrefix:options.root||"",layout:options.layout,$angular:options.$angular,loader:that.loader,showStart:function(){that.loader.transition(),that.closeActiveDialogs()},after:function(){that.loader.transitionDone()},viewShow:function(e){that.trigger(VIEW_SHOW,e)},loadStart:function(){that.loader.show()},loadComplete:function(){that.loader.hide()},sameViewRequested:function(){that.trigger(SAME_VIEW_REQUESTED)},viewTypeDetermined:function(e){e.remote&&that.options.serverNavigation||that.trigger(NAVIGATE,{url:e.url})}}),this._setPortraitWidth(),kendo.onResize(function(){that._setPortraitWidth()}),that._setupAppLinks()},closeActiveDialogs:function(){var dialogs=this.element.find(roleSelector("actionsheet popover modalview")).filter(":visible");dialogs.each(function(){kendo.widgetInstance($(this),ui).close()})},navigateToInitial:function(){var initial=this.options.initial;return initial&&this.navigate(initial),initial},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window,loading:"<h1>Loading...</h1>"},events:[NAVIGATE,VIEW_SHOW,SAME_VIEW_REQUESTED],append:function(html){return this.viewEngine.append(html)},destroy:function(){Widget.fn.destroy.call(this),this.viewEngine.destroy(),this.userEvents.destroy()},navigate:function(url,transition){url instanceof View&&(url=url.id),this.transition=transition,this._historyNavigate(url)},replace:function(url,transition){url instanceof View&&(url=url.id),this.transition=transition,this._historyReplace(url)},bindToRouter:function(router){var that=this,history=this.history,viewEngine=this.viewEngine;router.bind("init",function(e){var url=e.url,attrUrl=router.pushState?url:"/";viewEngine.rootView.attr(kendo.attr("url"),attrUrl);var length=history.length;"/"===url&&length&&(router.navigate(history[length-1],!0),e.preventDefault())}),router.bind("routeMissing",function(e){that.historyCallback(e.url,e.params,e.backButtonPressed)||e.preventDefault()}),router.bind("same",function(){that.trigger(SAME_VIEW_REQUESTED)}),that._historyNavigate=function(url){router.navigate(url)},that._historyReplace=function(url){router.replace(url)}},hideLoading:function(){this.loader.hide()},showLoading:function(){this.loader.show()},changeLoadingMessage:function(message){this.loader.changeMessage(message)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var width,portraitWidth=this.options.portraitWidth;portraitWidth&&(width=kendo.mobile.application.element.is(".km-vertical")?portraitWidth:"auto",this.element.css("width",width))},_setupAppLinks:function(){var that=this,linkRoles="tab",pressedButtonSelector="[data-"+kendo.ns+"navigate-on-press]",buttonSelectors=$.map(["button","backbutton","detailbutton","listview-link"],function(role){return roleSelector(role)+":not("+pressedButtonSelector+")"}).join(",");this.element.handler(this).on("down",roleSelector(linkRoles)+","+pressedButtonSelector,"_mouseup").on("click",roleSelector(linkRoles)+","+buttonSelectors+","+pressedButtonSelector,"_appLinkClick"),this.userEvents=new kendo.UserEvents(this.element,{filter:buttonSelectors,tap:function(e){e.event.currentTarget=e.touch.currentTarget,that._mouseup(e.event)}}),this.element.css("-ms-touch-action","")},_appLinkClick:function(e){var href=$(e.currentTarget).attr("href"),remote=href&&"#"!==href[0]&&this.options.serverNavigation;remote||attrValue($(e.currentTarget),"rel")==EXTERNAL||e.preventDefault()},_mouseup:function(e){if(!(e.which>1||e.isDefaultPrevented())){var pane=this,link=$(e.currentTarget),transition=attrValue(link,"transition"),rel=attrValue(link,"rel")||"",target=attrValue(link,"target"),href=link.attr(HREF),delayedTouchEnd=SKIP_TRANSITION_ON_BACK_BUTTON&&0===link[0].offsetHeight,remote=href&&"#"!==href[0]&&this.options.serverNavigation;delayedTouchEnd||remote||rel===EXTERNAL||"undefined"==typeof href||href===DUMMY_HREF||(link.attr(HREF,DUMMY_HREF),setTimeout(function(){link.attr(HREF,href)}),rel.match(WIDGET_RELS)?(kendo.widgetInstance($(href),ui).openFor(link),("actionsheet"===rel||"drawer"===rel)&&e.stopPropagation()):("_top"===target?pane=mobile.application.pane:target&&(pane=$("#"+target).data("kendoMobilePane")),pane.navigate(href,transition)),e.preventDefault())}}});Pane.wrap=function(element){element.is(roleSelector("view"))||(element=element.wrap("<div data-"+kendo.ns+'role="view" data-stretch="true"></div>').parent());var paneContainer=element.wrap('<div class="km-pane-wrapper"><div></div></div>').parent(),pane=new Pane(paneContainer);return pane.navigate(""),pane},ui.plugin(Pane)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,mobile=kendo.mobile,ui=mobile.ui,HIDE="hide",OPEN="open",CLOSE="close",WRAPPER='<div class="km-popup-wrapper" />',ARROW='<div class="km-popup-arrow" />',OVERLAY='<div class="km-popup-overlay" />',DIRECTION_CLASSES="km-up km-down km-left km-right",Widget=ui.Widget,DIRECTIONS={down:{origin:"bottom center",position:"top center"},up:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"}},ANIMATION={animation:{open:{effects:"fade:in",duration:0},close:{effects:"fade:out",duration:400}}},DIMENSIONS={horizontal:{offset:"top",size:"height"},vertical:{offset:"left",size:"width"}},REVERSE={up:"down",down:"up",left:"right",right:"left"},Popup=Widget.extend({init:function(element,options){var popupOptions,axis,that=this,containerPopup=element.closest(".km-modalview-wrapper"),viewport=element.closest(".km-root").children(".km-pane").first(),container=containerPopup[0]?containerPopup:viewport;options.viewport?viewport=options.viewport:viewport[0]||(viewport=window),options.container?container=options.container:container[0]||(container=document.body),popupOptions={viewport:viewport,copyAnchorStyles:!1,autosize:!0,open:function(){that.overlay.show()},activate:$.proxy(that._activate,that),deactivate:function(){that.overlay.hide(),that._apiCall||that.trigger(HIDE),that._apiCall=!1}},Widget.fn.init.call(that,element,options),element=that.element,options=that.options,element.wrap(WRAPPER).addClass("km-popup").show(),axis=that.options.direction.match(/left|right/)?"horizontal":"vertical",that.dimensions=DIMENSIONS[axis],that.wrapper=element.parent().css({width:options.width,height:options.height}).addClass("km-popup-wrapper km-"+options.direction).hide(),that.arrow=$(ARROW).prependTo(that.wrapper).hide(),that.overlay=$(OVERLAY).appendTo(container).hide(),popupOptions.appendTo=that.overlay,options.className&&that.overlay.addClass(options.className),that.popup=new kendo.ui.Popup(that.wrapper,$.extend(!0,popupOptions,ANIMATION,DIRECTIONS[options.direction]))},options:{name:"Popup",width:240,height:"",direction:"down",container:null,viewport:null},events:[HIDE],show:function(target){this.popup.options.anchor=$(target),this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){Widget.fn.destroy.call(this),this.popup.destroy(),this.overlay.remove()},target:function(){return this.popup.options.anchor},_activate:function(){var that=this,direction=that.options.direction,dimensions=that.dimensions,offset=dimensions.offset,popup=that.popup,anchor=popup.options.anchor,anchorOffset=$(anchor).offset(),elementOffset=$(popup.element).offset(),cssClass=popup.flipped?REVERSE[direction]:direction,min=2*that.arrow[dimensions.size](),max=that.element[dimensions.size]()-that.arrow[dimensions.size](),size=$(anchor)[dimensions.size](),offsetAmount=anchorOffset[offset]-elementOffset[offset]+size/2;min>offsetAmount&&(offsetAmount=min),offsetAmount>max&&(offsetAmount=max),that.wrapper.removeClass(DIRECTION_CLASSES).addClass("km-"+cssClass),that.arrow.css(offset,offsetAmount).show()}}),PopOver=Widget.extend({init:function(element,options){var popupOptions,that=this;that.initialOpen=!1,Widget.fn.init.call(that,element,options),popupOptions=$.extend({className:"km-popover-root",hide:function(){that.trigger(CLOSE)}},this.options.popup),that.popup=new Popup(that.element,popupOptions),that.popup.overlay.on("move",function(e){e.target==that.popup.overlay[0]&&e.preventDefault()}),that.pane=new ui.Pane(that.element,$.extend(this.options.pane,{$angular:this.options.$angular})),kendo.notify(that,ui)},options:{name:"PopOver",popup:{},pane:{}},events:[OPEN,CLOSE],open:function(target){this.popup.show(target),this.initialOpen?this.pane.view()._invokeNgController():(this.pane.navigateToInitial()||this.pane.navigate(""),this.popup.popup._position(),this.initialOpen=!0)},openFor:function(target){this.open(target),this.trigger(OPEN,{target:this.popup.target()})},close:function(){this.popup.hide()},destroy:function(){Widget.fn.destroy.call(this),this.pane.destroy(),this.popup.destroy(),kendo.destroy(this.element)}});ui.plugin(Popup),ui.plugin(PopOver)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,ui=kendo.mobile.ui,Popup=kendo.ui.Popup,SHIM='<div class="km-shim"/>',HIDE="hide",Widget=ui.Widget,Shim=Widget.extend({init:function(element,options){var that=this,app=kendo.mobile.application,os=kendo.support.mobileOS,osname=app?app.os.name:os?os.name:"ios",ioswp="ios"===osname||"wp"===osname||(app?app.os.skin:!1),bb="blackberry"===osname,align=options.align||(ioswp?"bottom center":bb?"center right":"center center"),position=options.position||(ioswp?"bottom center":bb?"center right":"center center"),effect=options.effect||(ioswp?"slideIn:up":bb?"slideIn:left":"fade:in"),shim=$(SHIM).handler(that).hide();Widget.fn.init.call(that,element,options),that.shim=shim,element=that.element,options=that.options,options.className&&that.shim.addClass(options.className),options.modal||that.shim.on("down","_hide"),(app?app.element:$(document.body)).append(shim),that.popup=new Popup(that.element,{anchor:shim,modal:!0,appendTo:shim,origin:align,position:position,animation:{open:{effects:effect,duration:options.duration},close:{duration:options.duration}},close:function(e){var prevented=!1;that._apiCall||(prevented=that.trigger(HIDE)),prevented&&e.preventDefault(),that._apiCall=!1},deactivate:function(){shim.hide()},open:function(){shim.show()}}),kendo.notify(that)},events:[HIDE],options:{name:"Shim",modal:!1,align:undefined,position:undefined,effect:undefined,duration:200},show:function(){this.popup.open()},hide:function(){this._apiCall=!0,this.popup.close()},destroy:function(){Widget.fn.destroy.call(this),this.shim.kendoDestroy(),this.popup.destroy(),this.shim.remove()},_hide:function(e){e&&$.contains(this.shim.children().children(".k-popup")[0],e.target)||this.popup.close()}});ui.plugin(Shim)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,support=kendo.support,ui=kendo.mobile.ui,Shim=ui.Shim,Popup=ui.Popup,Widget=ui.Widget,OPEN="open",CLOSE="close",COMMAND="command",BUTTONS="li>a",CONTEXT_DATA="actionsheetContext",WRAP='<div class="km-actionsheet-wrapper" />',cancelTemplate=kendo.template('<li class="km-actionsheet-cancel"><a href="\\#">#:cancel#</a></li>'),ActionSheet=Widget.extend({init:function(element,options){var ShimClass,tablet,type,that=this,os=support.mobileOS;Widget.fn.init.call(that,element,options),options=that.options,type=options.type,element=that.element,tablet="auto"===type?os&&os.tablet:"tablet"===type,ShimClass=tablet?Popup:Shim,options.cancelTemplate&&(cancelTemplate=kendo.template(options.cancelTemplate)),element.addClass("km-actionsheet").append(cancelTemplate({cancel:that.options.cancel})).wrap(WRAP).on("up",BUTTONS,"_click").on("click",BUTTONS,kendo.preventDefault),that.view().bind("destroy",function(){that.destroy()}),that.wrapper=element.parent().addClass(type?" km-actionsheet-"+type:""),that.shim=new ShimClass(that.wrapper,$.extend({modal:os.ios&&os.majorVersion<7,className:"km-actionsheet-root"},that.options.popup)),that._closeProxy=$.proxy(that,"_close"),that._shimHideProxy=$.proxy(that,"_shimHide"),that.shim.bind("hide",that._shimHideProxy),tablet&&kendo.onResize(that._closeProxy),kendo.notify(that,ui)},events:[OPEN,CLOSE,COMMAND],options:{name:"ActionSheet",cancel:"Cancel",type:"auto",popup:{height:"auto"}},open:function(target,context){var that=this;that.target=$(target),that.context=context,that.shim.show(target)},close:function(){this.context=this.target=null,this.shim.hide()},openFor:function(target){var that=this,context=target.data(CONTEXT_DATA);that.open(target,context),that.trigger(OPEN,{target:target,context:context})},destroy:function(){Widget.fn.destroy.call(this),kendo.unbindResize(this._closeProxy),this.shim.destroy()},_click:function(e){if(!e.isDefaultPrevented()){var currentTarget=$(e.currentTarget),action=currentTarget.data("action");if(action){var actionData={target:this.target,context:this.context},$angular=this.options.$angular;$angular?this.element.injector().get("$parse")(action)($angular[0])(actionData):kendo.getter(action)(window)(actionData)}this.trigger(COMMAND,{target:this.target,context:this.context,currentTarget:currentTarget}),e.preventDefault(),this._close()}},_shimHide:function(e){this.trigger(CLOSE)?e.preventDefault():this.context=this.target=null},_close:function(e){this.trigger(CLOSE)?e.preventDefault():this.close()}});ui.plugin(ActionSheet)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,kendo){function numChar(colIndex){var letter=Math.floor(colIndex/26)-1;return(letter>=0?numChar(letter):"")+String.fromCharCode(65+colIndex%26)}function ref(rowIndex,colIndex){return numChar(colIndex)+(rowIndex+1)}function $ref(rowIndex,colIndex){return numChar(colIndex)+"$"+(rowIndex+1)}function filterRowIndex(options){var frozenRows=options.frozenRows||(options.freezePane||{}).rowSplit||1;return frozenRows-1}function toWidth(px){return(px/7*100+.5)/100}function toHeight(px){return.75*px}function convertColor(color){return color.length<6&&(color=color.replace(/(\w)/g,function($0,$1){return $1+$1})),color=color.substring(1).toUpperCase(),color.length<8&&(color="FF"+color),color}var RELS='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',CORE=kendo.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>${creator}</dc:creator><cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${created}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${modified}</dcterms:modified></cp:coreProperties>'),APP=kendo.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>${sheets.length}</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="${sheets.length}" baseType="lpstr"># for (var idx = 0; idx < sheets.length; idx++) { ## if (sheets[idx].options.title) { #<vt:lpstr>${sheets[idx].options.title}</vt:lpstr># } else { #<vt:lpstr>Sheet${idx+1}</vt:lpstr># } ## } #</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>14.0300</AppVersion></Properties>'),CONTENT_TYPES=kendo.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="xml" ContentType="application/xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/># for (var idx = 1; idx <= count; idx++) { #<Override PartName="/xl/worksheets/sheet${idx}.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /># } #<Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /></Types>'),WORKBOOK=kendo.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" /><workbookPr defaultThemeVersion="124226" /><bookViews><workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" /></bookViews><sheets># for (var idx = 0; idx < sheets.length; idx++) { ## var options = sheets[idx].options; ## var name = options.name || options.title ## if (name) { #<sheet name="${name}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } else { #<sheet name="Sheet${idx+1}" sheetId="${idx+1}" r:id="rId${idx+1}" /># } ## } #</sheets># if (definedNames.length) { #<definedNames> # for (var di = 0; di < definedNames.length; di++) { #<definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="${definedNames[di].localSheetId}">${definedNames[di].name}!$${definedNames[di].from}:$${definedNames[di].to}</definedName> # } #</definedNames># } #<calcPr calcId="145621" /></workbook>'),WORKSHEET=kendo.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac"><dimension ref="A1" /><sheetViews><sheetView #if(index==0) {# tabSelected="1" #}# workbookViewId="0"># if (frozenRows || frozenColumns) { #<pane state="frozen"# if (frozenColumns) { # xSplit="${frozenColumns}"# } ## if (frozenRows) { # ySplit="${frozenRows}"# } # topLeftCell="${String.fromCharCode(65 + (frozenColumns || 0))}${(frozenRows || 0)+1}"/># } #</sheetView></sheetViews><sheetFormatPr x14ac:dyDescent="0.25" defaultRowHeight="#= defaults.rowHeight ? defaults.rowHeight * 0.75 : 15 #" # if (defaults.columnWidth) { # defaultColWidth="#= kendo.ooxml.toWidth(defaults.columnWidth) #" # } # /># if (columns && columns.length > 0) { #<cols># for (var ci = 0; ci < columns.length; ci++) { ## var column = columns[ci]; ## var columnIndex = typeof column.index === "number" ? column.index + 1 : (ci + 1); ## if (column.width) { #<col min="${columnIndex}" max="${columnIndex}" customWidth="1"# if (column.autoWidth) { # width="${((column.width*7+5)/7*256)/256}" bestFit="1"# } else { # width="#= kendo.ooxml.toWidth(column.width) #" # } #/># } ## } #</cols># } #<sheetData># for (var ri = 0; ri < data.length; ri++) { ## var row = data[ri]; ## var rowIndex = typeof row.index === "number" ? row.index + 1 : (ri + 1); #<row r="${rowIndex}" x14ac:dyDescent="0.25" # if (row.height) { # ht="#= kendo.ooxml.toHeight(row.height) #" customHeight="1" # } # ># for (var ci = 0; ci < row.data.length; ci++) { ## var cell = row.data[ci];#<c r="#=cell.ref#"# if (cell.style) { # s="#=cell.style#" # } ## if (cell.type) { # t="#=cell.type#"# } #># if (cell.formula != null) { #<f>${cell.formula}</f># } ## if (cell.value != null) { #<v>${cell.value}</v># } #</c># } #</row># } #</sheetData># if (filter) { #<autoFilter ref="${filter.from}:${filter.to}"/># } ## if (mergeCells.length) { #<mergeCells count="${mergeCells.length}"># for (var ci = 0; ci < mergeCells.length; ci++) { #<mergeCell ref="${mergeCells[ci]}"/># } #</mergeCells># } #<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" /></worksheet>'),WORKBOOK_RELS=kendo.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"># for (var idx = 1; idx <= count; idx++) { #<Relationship Id="rId${idx}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet${idx}.xml" /># } #<Relationship Id="rId${count+1}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" /><Relationship Id="rId${count+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" /></Relationships>'),SHARED_STRINGS=kendo.template('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${count}" uniqueCount="${uniqueCount}"># for (var index in indexes) { #<si><t>${index.substring(1)}</t></si># } #</sst>'),STYLES=kendo.template('<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="${formats.length}"># for (var fi = 0; fi < formats.length; fi++) { ## var format = formats[fi]; #<numFmt formatCode="${format.format}" numFmtId="${165+fi}" /># } #</numFmts><fonts count="${fonts.length+1}" x14ac:knownFonts="1"><font><sz val="11" /><color theme="1" /><name val="Calibri" /><family val="2" /><scheme val="minor" /></font># for (var fi = 0; fi < fonts.length; fi++) { ## var font = fonts[fi]; #<font># if (font.fontSize) { #<sz val="${font.fontSize}" /># } else { #<sz val="11" /># } ## if (font.bold) { #<b/># } ## if (font.italic) { #<i/># } ## if (font.underline) { #<u/># } ## if (font.color) { #<color rgb="${font.color}" /># } else { #<color theme="1" /># } ## if (font.fontFamily) { #<name val="${font.fontFamily}" /><family val="2" /># } else { #<name val="Calibri" /><family val="2" /><scheme val="minor" /># } #</font># } #</fonts><fills count="${fills.length+1}"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill># for (var fi = 0; fi < fills.length; fi++) { ## var fill = fills[fi]; ## if (fill.background) { #<fill><patternFill patternType="solid"><fgColor rgb="${fill.background}"/></patternFill></fill># } ## } #</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf borderId="0" fillId="0" fontId="0" /></cellStyleXfs><cellXfs count="${styles.length+1}"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/># for (var si = 0; si < styles.length; si++) { ## var style = styles[si]; #<xf xfId="0"# if (style.fontId) { # fontId="${style.fontId}" applyFont="1"# } ## if (style.fillId) { # fillId="${style.fillId}" applyFill="1"# } ## if (style.numFmtId) { # numFmtId="${style.numFmtId}" applyNumberFormat="1"# } ## if (style.textAlign || style.verticalAlign || style.wrap) { # applyAlignment="1"# } #># if (style.textAlign || style.verticalAlign || style.wrap) { #<alignment# if (style.textAlign) { # horizontal="${style.textAlign}"# } ## if (style.verticalAlign) { # vertical="${style.verticalAlign}"# } ## if (style.wrap) { # wrapText="1"# } #/># } #</xf># } #</cellXfs><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" /></styleSheet>'),DATE_EPOCH=kendo.timezone.remove(new Date(1900,0,0),"Etc/UTC"),Worksheet=kendo.Class.extend({init:function(options,sharedStrings,styles){this.options=options,this._strings=sharedStrings,this._styles=styles},toXML:function(index){this._mergeCells=this.options.mergedCells||[],this._rowsByIndex=[];for(var rows=this.options.rows||[],i=0;i<rows.length;i++){var ri=rows[i].index;"number"!=typeof ri&&(ri=i),
rows[i].index=ri,this._rowsByIndex[ri]=rows[i]}var data=[];for(i=0;i<rows.length;i++)data.push(this._row(rows[i],i));data.sort(function(a,b){return a.index-b.index});var filter=this.options.filter;filter&&(filter={from:ref(filterRowIndex(this.options),filter.from),to:ref(filterRowIndex(this.options),filter.to)});var freezePane=this.options.freezePane||{};return WORKSHEET({frozenColumns:this.options.frozenColumns||freezePane.colSplit,frozenRows:this.options.frozenRows||freezePane.rowSplit,columns:this.options.columns,defaults:this.options.defaults||{},data:data,index:index,mergeCells:this._mergeCells,filter:filter})},_row:function(row){var data=[],offset=0,sheet=this,cellRefs={};return $.each(row.cells,function(i,cell){if(cell){var cellIndex;"number"==typeof cell.index?(cellIndex=cell.index,offset=cellIndex-i):cellIndex=i+offset,cell.colSpan&&(offset+=cell.colSpan-1);var items=sheet._cell(cell,row.index,cellIndex);$.each(items,function(i,cellData){cellRefs[cellData.ref]||(cellRefs[cellData.ref]=!0,data.push(cellData))})}}),{data:data,height:row.height,index:row.index}},_lookupString:function(value){var key="$"+value,index=this._strings.indexes[key];return void 0!==index?value=index:(value=this._strings.indexes[key]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,value},_lookupStyle:function(style){var json=kendo.stringify(style);if("{}"==json)return 0;var index=$.inArray(json,this._styles);return 0>index&&(index=this._styles.push(json)-1),index+1},_cell:function(data,rowIndex,cellIndex){if(!data)return[];var value=data.value,style={bold:data.bold,color:data.color,background:data.background,italic:data.italic,underline:data.underline,fontFamily:data.fontFamily||data.fontName,fontSize:data.fontSize,format:data.format,textAlign:data.textAlign||data.hAlign,verticalAlign:data.verticalAlign||data.vAlign,wrap:data.wrap},columns=this.options.columns||[],column=columns[cellIndex];column&&column.autoWidth&&(column.width=Math.max(column.width||0,(""+value).length));var type=typeof value;"string"===type?(value=this._lookupString(value),type="s"):"number"===type?type="n":"boolean"===type?(type="b",value=+value):value&&value.getTime?(type=null,value=(kendo.timezone.remove(value,"Etc/UTC")-DATE_EPOCH)/kendo.date.MS_PER_DAY+1,style.format||(style.format="mm-dd-yy")):(type=null,value=null),style=this._lookupStyle(style);var cells=[],cellRef=ref(rowIndex,cellIndex);cells.push({value:value,formula:data.formula,type:type,style:style,ref:cellRef});var ci,colSpan=data.colSpan||1,rowSpan=data.rowSpan||1;if(colSpan>1||rowSpan>1){this._mergeCells.push(cellRef+":"+ref(rowIndex+rowSpan-1,cellIndex+colSpan-1));for(var ri=rowIndex+1;rowIndex+rowSpan>ri;ri++)for(this._rowsByIndex[ri]||(this._rowsByIndex[ri]={index:ri,cells:[]}),ci=cellIndex;cellIndex+colSpan>ci;ci++)this._rowsByIndex[ri].cells.splice(ci,0,{});for(ci=cellIndex+1;cellIndex+colSpan>ci;ci++)cells.push({ref:ref(rowIndex,ci)})}return cells}}),defaultFormats={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70},Workbook=kendo.Class.extend({init:function(options){this.options=options||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._sheets=$.map(this.options.sheets||[],$.proxy(function(options){return options.defaults=this.options,new Worksheet(options,this._strings,this._styles)},this))},toDataURL:function(){if("undefined"==typeof JSZip)throw new Error("JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.");var zip=new JSZip,docProps=zip.folder("docProps");docProps.file("core.xml",CORE({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()}));var sheetCount=this._sheets.length;docProps.file("app.xml",APP({sheets:this._sheets}));var rels=zip.folder("_rels");rels.file(".rels",RELS);var xl=zip.folder("xl"),xlRels=xl.folder("_rels");xlRels.file("workbook.xml.rels",WORKBOOK_RELS({count:sheetCount})),xl.file("workbook.xml",WORKBOOK({sheets:this._sheets,definedNames:$.map(this._sheets,function(sheet,index){var options=sheet.options,filter=options.filter;return filter&&"undefined"!=typeof filter.from&&"undefined"!=typeof filter.to?{localSheetId:index,name:options.name||options.title||"Sheet"+(index+1),from:$ref(filterRowIndex(options),filter.from),to:$ref(filterRowIndex(options),filter.to)}:void 0})}));for(var worksheets=xl.folder("worksheets"),idx=0;sheetCount>idx;idx++)worksheets.file(kendo.format("sheet{0}.xml",idx+1),this._sheets[idx].toXML(idx));var styles=$.map(this._styles,$.parseJSON),hasFont=function(style){return style.underline||style.bold||style.italic||style.color||style.fontFamily||style.fontSize},fonts=$.map(styles,function(style){return style.color&&(style.color=convertColor(style.color)),hasFont(style)?style:void 0}),formats=$.map(styles,function(style){return style.format&&void 0===defaultFormats[style.format]?style:void 0}),fills=$.map(styles,function(style){return style.background?(style.background=convertColor(style.background),style):void 0});return xl.file("styles.xml",STYLES({fonts:fonts,fills:fills,formats:formats,styles:$.map(styles,function(style){var result={};return hasFont(style)&&(result.fontId=$.inArray(style,fonts)+1),style.background&&(result.fillId=$.inArray(style,fills)+2),result.textAlign=style.textAlign,result.verticalAlign=style.verticalAlign,result.wrap=style.wrap,style.format&&(void 0!==defaultFormats[style.format]?result.numFmtId=defaultFormats[style.format]:result.numFmtId=165+$.inArray(style,formats)),result})})),xl.file("sharedStrings.xml",SHARED_STRINGS(this._strings)),zip.file("[Content_Types].xml",CONTENT_TYPES({count:sheetCount})),"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+zip.generate({compression:"DEFLATE"})}});kendo.ooxml={Workbook:Workbook,Worksheet:Worksheet,toWidth:toWidth,toHeight:toHeight}}(kendo.jQuery,kendo)}()}(),function(){!function(){!function($,kendo){kendo.ExcelExporter=kendo.Class.extend({init:function(options){options.columns=this._trimColumns(options.columns||[]),this.allColumns=$.map(this._leafColumns(options.columns||[]),this._prepareColumn),this.columns=$.grep(this.allColumns,function(column){return!column.hidden}),this.options=options;var dataSource=options.dataSource;if(dataSource instanceof kendo.data.DataSource){this.dataSource=new dataSource.constructor($.extend({},dataSource.options,{page:options.allPages?0:dataSource.page(),filter:dataSource.filter(),pageSize:options.allPages?dataSource.total():dataSource.pageSize(),sort:dataSource.sort(),group:dataSource.group(),aggregate:dataSource.aggregate()}));var data=dataSource.data();if(data.length>0){this.dataSource._data=data;var transport=this.dataSource.transport;dataSource._isServerGrouped()&&transport.options.data&&(transport.options.data=null)}}else this.dataSource=kendo.data.DataSource.create(dataSource)},_trimColumns:function(columns){var that=this;return $.grep(columns,function(column){var result=!!column.field;return!result&&column.columns&&(result=that._trimColumns(column.columns).length>0),result})},_leafColumns:function(columns){for(var result=[],idx=0;idx<columns.length;idx++)columns[idx].columns?result=result.concat(this._leafColumns(columns[idx].columns)):result.push(columns[idx]);return result},workbook:function(){return $.Deferred($.proxy(function(d){this.dataSource.fetch().then($.proxy(function(){var workbook={sheets:[{columns:this._columns(),rows:this._rows(),freezePane:this._freezePane(),filter:this._filter()}]};d.resolve(workbook,this.dataSource.view())},this))},this)).promise()},_prepareColumn:function(column){if(column.field){var value=function(dataItem){return dataItem.get(column.field)},values=null;return column.values&&(values={},$.each(column.values,function(){values[this.value]=this.text}),value=function(dataItem){return values[dataItem.get(column.field)]}),$.extend({},column,{value:value,values:values,groupHeaderTemplate:kendo.template(column.groupHeaderTemplate||"#= title #: #= value #"),groupFooterTemplate:column.groupFooterTemplate?kendo.template(column.groupFooterTemplate):null,footerTemplate:column.footerTemplate?kendo.template(column.footerTemplate):null})}},_filter:function(){if(!this.options.filterable)return null;var depth=this._depth();return{from:depth,to:depth+this.columns.length-1}},_dataRow:function(dataItem,level,depth){this._hierarchical()&&(level=this.dataSource.level(dataItem)+1);for(var cells=[],li=0;level>li;li++)cells[li]={background:"#dfdfdf",color:"#333"};if(depth&&dataItem.items){var column=$.grep(this.allColumns,function(column){return column.field==dataItem.field})[0],title=column&&column.title?column.title:dataItem.field,template=column?column.groupHeaderTemplate:null,value=title+": "+dataItem.value,group=$.extend({title:title,field:dataItem.field,value:column&&column.values?column.values[dataItem.value]:dataItem.value,aggregates:dataItem.aggregates},dataItem.aggregates[dataItem.field]);template&&(value=template(group)),cells.push({value:value,background:"#dfdfdf",color:"#333",colSpan:this.columns.length+depth-level});var rows=this._dataRows(dataItem.items,level+1);return rows.unshift({type:"group-header",cells:cells}),rows.concat(this._footer(dataItem))}for(var dataCells=[],ci=0;ci<this.columns.length;ci++)dataCells[ci]=this._cell(dataItem,this.columns[ci]);return this._hierarchical()&&(dataCells[0].colSpan=depth-level+1),[{type:"data",cells:cells.concat(dataCells)}]},_dataRows:function(dataItems,level){for(var depth=this._depth(),rows=[],i=0;i<dataItems.length;i++)rows.push.apply(rows,this._dataRow(dataItems[i],level,depth));return rows},_footer:function(dataItem){var rows=[],footer=!1,cells=$.map(this.columns,$.proxy(function(column){return column.groupFooterTemplate?(footer=!0,{background:"#dfdfdf",color:"#333",value:column.groupFooterTemplate($.extend({},this.dataSource.aggregates(),dataItem.aggregates,dataItem.aggregates[column.field]))}):{background:"#dfdfdf",color:"#333"}},this));return footer&&rows.push({type:"group-footer",cells:$.map(new Array(this.dataSource.group().length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(cells)}),rows},_isColumnVisible:function(column){return this._visibleColumns([column]).length>0&&(column.field||column.columns)},_visibleColumns:function(columns){var that=this;return $.grep(columns,function(column){var result=!column.hidden;return result&&column.columns&&(result=that._visibleColumns(column.columns).length>0),result})},_headerRow:function(row,groups){var headers=$.map(row.cells,function(cell){return{background:"#7a7a7a",color:"#fff",value:cell.title,colSpan:cell.colSpan>1?cell.colSpan:1,rowSpan:row.rowSpan>1&&!cell.colSpan?row.rowSpan:1}});return this._hierarchical()&&(headers[0].colSpan=this._depth()+1),{type:"header",cells:$.map(new Array(groups.length),function(){return{background:"#7a7a7a",color:"#fff"}}).concat(headers)}},_prependHeaderRows:function(rows){var groups=this.dataSource.group(),headerRows=[{rowSpan:1,cells:[],index:0}];this._prepareHeaderRows(headerRows,this.options.columns);for(var idx=headerRows.length-1;idx>=0;idx--)rows.unshift(this._headerRow(headerRows[idx],groups))},_prepareHeaderRows:function(rows,columns,parentCell,parentRow){for(var column,cell,row=parentRow||rows[rows.length-1],childRow=rows[row.index+1],totalColSpan=0,idx=0;idx<columns.length;idx++)column=columns[idx],this._isColumnVisible(column)&&(cell={title:column.title||column.field,colSpan:0},row.cells.push(cell),column.columns&&column.columns.length&&(childRow||(childRow={rowSpan:0,cells:[],index:rows.length},rows.push(childRow)),cell.colSpan=this._trimColumns(this._visibleColumns(column.columns)).length,this._prepareHeaderRows(rows,column.columns,cell,childRow),totalColSpan+=cell.colSpan-1,row.rowSpan=rows.length-row.index));parentCell&&(parentCell.colSpan+=totalColSpan)},_rows:function(){var groups=this.dataSource.group(),rows=this._dataRows(this.dataSource.view(),0);if(this.columns.length){this._prependHeaderRows(rows);var footer=!1,cells=$.map(this.columns,$.proxy(function(column){if(column.footerTemplate){footer=!0;var aggregates=this.dataSource.aggregates();return{background:"#dfdfdf",color:"#333",value:column.footerTemplate($.extend({},aggregates,aggregates[column.field]))}}return{background:"#dfdfdf",color:"#333"}},this));footer&&rows.push({type:"footer",cells:$.map(new Array(groups.length),function(){return{background:"#dfdfdf",color:"#333"}}).concat(cells)})}return rows},_headerDepth:function(columns){for(var result=1,max=0,idx=0;idx<columns.length;idx++)if(columns[idx].columns){var temp=this._headerDepth(columns[idx].columns);temp>max&&(max=temp)}return result+max},_freezePane:function(){var columns=this._visibleColumns(this.options.columns||[]),colSplit=this._visibleColumns(this._trimColumns(this._leafColumns($.grep(columns,function(column){return column.locked})))).length;return{rowSplit:this._headerDepth(columns),colSplit:colSplit?colSplit+this.dataSource.group().length:0}},_cell:function(dataItem,column){return{value:column.value(dataItem)}},_hierarchical:function(){return this.options.hierarchy&&this.dataSource.level},_depth:function(){var view,i,level,dataSource=this.dataSource,depth=0;if(this._hierarchical()){for(view=dataSource.view(),i=0;i<view.length;i++)level=dataSource.level(view[i]),level>depth&&(depth=level);depth++}else depth=dataSource.group().length;return depth},_columns:function(){var depth=this._depth(),columns=$.map(new Array(depth),function(){return{width:20}});return columns.concat($.map(this.columns,function(column){return{width:parseInt(column.width,10),autoWidth:column.width?!1:!0}}))}}),kendo.ExcelMixin={extend:function(proto){proto.events.push("excelExport"),proto.options.excel=$.extend(proto.options.excel,this.options),proto.saveAsExcel=this.saveAsExcel},options:{proxyURL:"",allPages:!1,filterable:!1,fileName:"Export.xlsx"},saveAsExcel:function(){var excel=this.options.excel||{},exporter=new kendo.ExcelExporter({columns:this.columns,dataSource:this.dataSource,allPages:excel.allPages,filterable:excel.filterable,hierarchy:excel.hierarchy});exporter.workbook().then($.proxy(function(book,data){if(!this.trigger("excelExport",{workbook:book,data:data})){var workbook=new kendo.ooxml.Workbook(book);kendo.saveAs({dataURI:workbook.toDataURL(),fileName:book.fileName||excel.fileName,proxyURL:excel.proxyURL,forceProxy:excel.forceProxy})}},this))}}}(kendo.jQuery,kendo)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,ui=kendo.ui,Widget=ui.Widget,HORIZONTAL="horizontal",VERTICAL="vertical",DEFAULTMIN=0,DEFAULTMAX=100,DEFAULTVALUE=0,DEFAULTCHUNKCOUNT=5,KPROGRESSBAR="k-progressbar",KPROGRESSBARREVERSE="k-progressbar-reverse",KPROGRESSBARINDETERMINATE="k-progressbar-indeterminate",KPROGRESSBARCOMPLETE="k-complete",KPROGRESSWRAPPER="k-state-selected",KPROGRESSSTATUS="k-progress-status",KCOMPLETEDCHUNK="k-state-selected",KUPCOMINGCHUNK="k-state-default",KSTATEDISABLED="k-state-disabled",PROGRESSTYPE={VALUE:"value",PERCENT:"percent",CHUNK:"chunk"},CHANGE="change",COMPLETE="complete",BOOLEAN="boolean",math=Math,extend=$.extend,proxy=$.proxy,HUNDREDPERCENT=100,DEFAULTANIMATIONDURATION=400,PRECISION=3,templates={progressStatus:"<span class='k-progress-status-wrap'><span class='k-progress-status'></span></span>"},ProgressBar=Widget.extend({init:function(element,options){var that=this;Widget.fn.init.call(this,element,options),options=that.options,that._progressProperty=options.orientation===HORIZONTAL?"width":"height",that._fields(),options.value=that._validateValue(options.value),that._validateType(options.type),that._wrapper(),that._progressAnimation(),options.value!==options.min&&options.value!==!1&&that._updateProgress()},setOptions:function(options){var that=this;Widget.fn.setOptions.call(that,options),options.hasOwnProperty("reverse")&&that.wrapper.toggleClass("k-progressbar-reverse",options.reverse),options.hasOwnProperty("enable")&&that.enable(options.enable),that._progressAnimation(),that._validateValue(),that._updateProgress()},events:[CHANGE,COMPLETE],options:{name:"ProgressBar",orientation:HORIZONTAL,reverse:!1,min:DEFAULTMIN,max:DEFAULTMAX,value:DEFAULTVALUE,enable:!0,type:PROGRESSTYPE.VALUE,chunkCount:DEFAULTCHUNKCOUNT,showStatus:!0,animation:{}},_fields:function(){var that=this;that._isStarted=!1,that.progressWrapper=that.progressStatus=$()},_validateType:function(currentType){var isValid=!1;if($.each(PROGRESSTYPE,function(k,type){return type===currentType?(isValid=!0,!1):void 0}),!isValid)throw new Error(kendo.format("Invalid ProgressBar type '{0}'",currentType))},_wrapper:function(){var initialStatusValue,that=this,container=that.wrapper=that.element,options=that.options,orientation=options.orientation;container.addClass("k-widget "+KPROGRESSBAR),container.addClass(KPROGRESSBAR+"-"+(orientation===HORIZONTAL?HORIZONTAL:VERTICAL)),options.enable===!1&&container.addClass(KSTATEDISABLED),options.reverse&&container.addClass(KPROGRESSBARREVERSE),options.value===!1&&container.addClass(KPROGRESSBARINDETERMINATE),options.type===PROGRESSTYPE.CHUNK?that._addChunkProgressWrapper():options.showStatus&&(that.progressStatus=that.wrapper.prepend(templates.progressStatus).find("."+KPROGRESSSTATUS),initialStatusValue=options.value!==!1?options.value:options.min,that.progressStatus.text(options.type===PROGRESSTYPE.VALUE?initialStatusValue:that._calculatePercentage(initialStatusValue).toFixed()+"%"))},value:function(value){return this._value(value)},_value:function(value){var validated,that=this,options=that.options;return value===undefined?options.value:void(typeof value!==BOOLEAN?(value=that._roundValue(value),isNaN(value)||(validated=that._validateValue(value),validated!==options.value&&(that.wrapper.removeClass(KPROGRESSBARINDETERMINATE),options.value=validated,that._isStarted=!0,that._updateProgress()))):value||(that.wrapper.addClass(KPROGRESSBARINDETERMINATE),options.value=!1))},_roundValue:function(value){value=parseFloat(value);var power=math.pow(10,PRECISION);return math.floor(value*power)/power},_validateValue:function(value){var that=this,options=that.options;if(value!==!1){if(value<=options.min||value===!0)return options.min;if(value>=options.max)return options.max}else if(value===!1)return!1;return isNaN(that._roundValue(value))?options.min:value},_updateProgress:function(){var that=this,options=that.options,percentage=that._calculatePercentage();options.type===PROGRESSTYPE.CHUNK?(that._updateChunks(percentage),that._onProgressUpdateAlways(options.value)):that._updateProgressWrapper(percentage)},_updateChunks:function(percentage){var completedChunks,that=this,options=that.options,chunkCount=options.chunkCount,percentagesPerChunk=parseInt(HUNDREDPERCENT/chunkCount*100,10)/100,percentageParsed=parseInt(100*percentage,10)/100,completedChunksCount=math.floor(percentageParsed/percentagesPerChunk);completedChunks=that.wrapper.find(options.orientation===HORIZONTAL&&!options.reverse||options.orientation===VERTICAL&&options.reverse?"li.k-item:lt("+completedChunksCount+")":"li.k-item:gt(-"+(completedChunksCount+1)+")"),that.wrapper.find("."+KCOMPLETEDCHUNK).removeClass(KCOMPLETEDCHUNK).addClass(KUPCOMINGCHUNK),completedChunks.removeClass(KUPCOMINGCHUNK).addClass(KCOMPLETEDCHUNK)},_updateProgressWrapper:function(percentage){var that=this,options=that.options,progressWrapper=that.wrapper.find("."+KPROGRESSWRAPPER),animationDuration=that._isStarted?that._animation.duration:0,animationCssOptions={};0===progressWrapper.length&&that._addRegularProgressWrapper(),animationCssOptions[that._progressProperty]=percentage+"%",that.progressWrapper.animate(animationCssOptions,{duration:animationDuration,start:proxy(that._onProgressAnimateStart,that),progress:proxy(that._onProgressAnimate,that),complete:proxy(that._onProgressAnimateComplete,that,options.value),always:proxy(that._onProgressUpdateAlways,that,options.value)})},_onProgressAnimateStart:function(){this.progressWrapper.show()},_onProgressAnimate:function(e){var progressStatusWrapSize,that=this,options=that.options,progressInPercent=parseFloat(e.elem.style[that._progressProperty],10);options.showStatus&&(progressStatusWrapSize=1e4/parseFloat(that.progressWrapper[0].style[that._progressProperty]),that.progressWrapper.find(".k-progress-status-wrap").css(that._progressProperty,progressStatusWrapSize+"%")),options.type!==PROGRESSTYPE.CHUNK&&98>=progressInPercent&&that.progressWrapper.removeClass(KPROGRESSBARCOMPLETE)},_onProgressAnimateComplete:function(currentValue){var progressValue,that=this,options=that.options,progressWrapperSize=parseFloat(that.progressWrapper[0].style[that._progressProperty]);options.type!==PROGRESSTYPE.CHUNK&&progressWrapperSize>98&&that.progressWrapper.addClass(KPROGRESSBARCOMPLETE),options.showStatus&&(progressValue=options.type===PROGRESSTYPE.VALUE?currentValue:options.type==PROGRESSTYPE.PERCENT?that._calculatePercentage(currentValue).toFixed()+"%":math.floor(that._calculatePercentage(currentValue))+"%",that.progressStatus.text(progressValue)),currentValue===options.min&&that.progressWrapper.hide()},_onProgressUpdateAlways:function(currentValue){var that=this,options=that.options;that._isStarted&&that.trigger(CHANGE,{value:currentValue}),currentValue===options.max&&that._isStarted&&that.trigger(COMPLETE,{value:options.max})},enable:function(enable){var that=this,options=that.options;options.enable="undefined"==typeof enable?!0:enable,that.wrapper.toggleClass(KSTATEDISABLED,!options.enable)},destroy:function(){var that=this;Widget.fn.destroy.call(that)},_addChunkProgressWrapper:function(){var that=this,options=that.options,container=that.wrapper,chunkSize=HUNDREDPERCENT/options.chunkCount,html="";options.chunkCount<=1&&(options.chunkCount=1),html+="<ul class='k-reset'>";for(var i=options.chunkCount-1;i>=0;i--)html+="<li class='k-item k-state-default'></li>";html+="</ul>",container.append(html).find(".k-item").css(that._progressProperty,chunkSize+"%").first().addClass("k-first").end().last().addClass("k-last"),that._normalizeChunkSize()},_normalizeChunkSize:function(){var that=this,options=that.options,lastChunk=that.wrapper.find(".k-item:last"),currentSize=parseFloat(lastChunk[0].style[that._progressProperty]),difference=HUNDREDPERCENT-options.chunkCount*currentSize;difference>0&&lastChunk.css(that._progressProperty,currentSize+difference+"%")},_addRegularProgressWrapper:function(){var that=this;that.progressWrapper=$("<div class='"+KPROGRESSWRAPPER+"'></div>").appendTo(that.wrapper),that.options.showStatus&&(that.progressWrapper.append(templates.progressStatus),that.progressStatus=that.wrapper.find("."+KPROGRESSSTATUS))},_calculateChunkSize:function(){var that=this,chunkCount=that.options.chunkCount,chunkContainer=that.wrapper.find("ul.k-reset");return(parseInt(chunkContainer.css(that._progressProperty),10)-(chunkCount-1))/chunkCount},_calculatePercentage:function(currentValue){var that=this,options=that.options,value=currentValue!==undefined?currentValue:options.value,min=options.min,max=options.max;return that._onePercent=math.abs((max-min)/100),math.abs((value-min)/that._onePercent)},_progressAnimation:function(){var that=this,options=that.options,animation=options.animation;animation===!1?that._animation={duration:0}:that._animation=extend({duration:DEFAULTANIMATIONDURATION},options.animation)}});kendo.ui.plugin(ProgressBar)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,parseFloat,parseInt){function parseColor(color,nothrow){var m,ret;if(null==color||"none"==color)return null;if(color instanceof _Color)return color;if(color=color.toLowerCase(),m=namedColorRegexp.exec(color))return color="transparent"==m[1]?new _RGB(1,1,1,0):parseColor(Color.namedColors[m[1]],nothrow),color.match=[m[1]],color;if((m=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(color))?ret=new _Bytes(parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16),1):(m=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(color))?ret=new _Bytes(parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16),1):(m=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(color))?ret=new _Bytes(parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3],10),1):(m=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(color))?ret=new _Bytes(parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3],10),parseFloat(m[4])):(m=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(color))?ret=new _RGB(parseFloat(m[1])/100,parseFloat(m[2])/100,parseFloat(m[3])/100,1):(m=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(color))&&(ret=new _RGB(parseFloat(m[1])/100,parseFloat(m[2])/100,parseFloat(m[3])/100,parseFloat(m[4]))),ret)ret.match=m;else if(!nothrow)throw new Error("Cannot parse color: "+color);return ret}function hex(n,width,pad){for(pad||(pad="0"),n=n.toString(16);width>n.length;)n="0"+n;return n}var Color=function(value){var re,processor,parts,i,channels,color=this,formats=Color.formats;if(1===arguments.length)for(value=color.resolveColor(value),i=0;i<formats.length;i++)re=formats[i].re,processor=formats[i].process,parts=re.exec(value),parts&&(channels=processor(parts),color.r=channels[0],color.g=channels[1],color.b=channels[2]);else color.r=arguments[0],color.g=arguments[1],color.b=arguments[2];color.r=color.normalizeByte(color.r),color.g=color.normalizeByte(color.g),color.b=color.normalizeByte(color.b)};Color.prototype={toHex:function(){var color=this,pad=color.padDigit,r=color.r.toString(16),g=color.g.toString(16),b=color.b.toString(16);return"#"+pad(r)+pad(g)+pad(b)},resolveColor:function(value){return value=value||"black","#"==value.charAt(0)&&(value=value.substr(1,6)),value=value.replace(/ /g,""),value=value.toLowerCase(),value=Color.namedColors[value]||value},normalizeByte:function(value){return 0>value||isNaN(value)?0:value>255?255:value},padDigit:function(value){return 1===value.length?"0"+value:value},brightness:function(value){var color=this,round=Math.round;return color.r=round(color.normalizeByte(color.r*value)),color.g=round(color.normalizeByte(color.g*value)),color.b=round(color.normalizeByte(color.b*value)),color},percBrightness:function(){var color=this;return Math.sqrt(.241*color.r*color.r+.691*color.g*color.g+.068*color.b*color.b)}},Color.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(parts){return[parseInt(parts[1],10),parseInt(parts[2],10),parseInt(parts[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(parts){return[parseInt(parts[1],16),parseInt(parts[2],16),parseInt(parts[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(parts){return[parseInt(parts[1]+parts[1],16),parseInt(parts[2]+parts[2],16),parseInt(parts[3]+parts[3],16)]}}],Color.namedColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};var namedColorRegexp=["transparent"];for(var i in Color.namedColors)Color.namedColors.hasOwnProperty(i)&&namedColorRegexp.push(i);namedColorRegexp=new RegExp("^("+namedColorRegexp.join("|")+")(\\W|$)","i");var _Color=kendo.Class.extend({toHSV:function(){return this},toRGB:function(){return this},toHex:function(){return this.toBytes().toHex()},toBytes:function(){return this},toCss:function(){return"#"+this.toHex()},toCssRgba:function(){var rgb=this.toBytes();return"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", "+parseFloat((+this.a).toFixed(3))+")"},toDisplay:function(){return kendo.support.browser.msie&&kendo.support.browser.version<9?this.toCss():this.toCssRgba()},equals:function(c){return c===this||null!==c&&this.toCssRgba()==parseColor(c).toCssRgba()},diff:function(c2){if(null==c2)return NaN;var c1=this.toBytes();return c2=c2.toBytes(),Math.sqrt(Math.pow(.3*(c1.r-c2.r),2)+Math.pow(.59*(c1.g-c2.g),2)+Math.pow(.11*(c1.b-c2.b),2))},clone:function(){var c=this.toBytes();return c===this&&(c=new _Bytes(c.r,c.g,c.b,c.a)),c}}),_RGB=_Color.extend({init:function(r,g,b,a){this.r=r,this.g=g,this.b=b,this.a=a},toHSV:function(){var min,max,delta,h,s,v,r=this.r,g=this.g,b=this.b;return min=Math.min(r,g,b),max=Math.max(r,g,b),v=max,delta=max-min,0===delta?new _HSV(0,0,v,this.a):(0!==max?(s=delta/max,h=r==max?(g-b)/delta:g==max?2+(b-r)/delta:4+(r-g)/delta,h*=60,0>h&&(h+=360)):(s=0,h=-1),new _HSV(h,s,v,this.a))},toBytes:function(){return new _Bytes(255*this.r,255*this.g,255*this.b,this.a)}}),_Bytes=_RGB.extend({init:function(r,g,b,a){this.r=Math.round(r),this.g=Math.round(g),this.b=Math.round(b),this.a=a},toRGB:function(){return new _RGB(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHex:function(){return hex(this.r,2)+hex(this.g,2)+hex(this.b,2)},toBytes:function(){return this}}),_HSV=_Color.extend({init:function(h,s,v,a){this.h=h,this.s=s,this.v=v,this.a=a},toRGB:function(){var i,r,g,b,f,p,q,t,h=this.h,s=this.s,v=this.v;
if(0===s)r=g=b=v;else switch(h/=60,i=Math.floor(h),f=h-i,p=v*(1-s),q=v*(1-s*f),t=v*(1-s*(1-f)),i){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;default:r=v,g=p,b=q}return new _RGB(r,g,b,this.a)},toBytes:function(){return this.toRGB().toBytes()}});Color.fromBytes=function(r,g,b,a){return new _Bytes(r,g,b,null!=a?a:1)},Color.fromRGB=function(r,g,b,a){return new _RGB(r,g,b,null!=a?a:1)},Color.fromHSV=function(h,s,v,a){return new _HSV(h,s,v,null!=a?a:1)},kendo.Color=Color,kendo.parseColor=parseColor}(window.kendo.jQuery,parseFloat,parseInt)}()}(),function(){!function(){!function(){function defined(value){return typeof value!==UNDEFINED}function round(value,precision){var power=pow(precision);return math.round(value*power)/power}function pow(p){return p?math.pow(10,p):1}function limitValue(value,min,max){return math.max(math.min(value,max),min)}function rad(degrees){return degrees*DEG_TO_RAD}function deg(radians){return radians/DEG_TO_RAD}function isNumber(val){return"number"==typeof val&&!isNaN(val)}function valueOrDefault(value,defaultValue){return defined(value)?value:defaultValue}function sqr(value){return value*value}function objectKey(object){var parts=[];for(var key in object)parts.push(key+object[key]);return parts.sort().join("")}function hashKey(str){for(var hash=2166136261,i=0;i<str.length;++i)hash+=(hash<<1)+(hash<<4)+(hash<<7)+(hash<<8)+(hash<<24),hash^=str.charCodeAt(i);return hash>>>0}function hashObject(object){return hashKey(objectKey(object))}function arrayLimits(arr){var i,length=arr.length,min=MAX_NUM,max=MIN_NUM;for(i=0;length>i;i++)max=math.max(max,arr[i]),min=math.min(min,arr[i]);return{min:min,max:max}}function arrayMin(arr){return arrayLimits(arr).min}function arrayMax(arr){return arrayLimits(arr).max}function sparseArrayMin(arr){return sparseArrayLimits(arr).min}function sparseArrayMax(arr){return sparseArrayLimits(arr).max}function sparseArrayLimits(arr){for(var min=MAX_NUM,max=MIN_NUM,i=0,length=arr.length;length>i;i++){var n=arr[i];null!==n&&isFinite(n)&&(min=math.min(min,n),max=math.max(max,n))}return{min:min===MAX_NUM?void 0:min,max:max===MIN_NUM?void 0:max}}function last(array){return array?array[array.length-1]:void 0}function append(first,second){return first.push.apply(first,second),first}function renderTemplate(text){return kendo.template(text,{useWithBlock:!1,paramName:"d"})}function renderAttr(name,value){return defined(value)&&null!==value?" "+name+"='"+value+"' ":""}function renderAllAttr(attrs){for(var output="",i=0;i<attrs.length;i++)output+=renderAttr(attrs[i][0],attrs[i][1]);return output}function renderStyle(attrs){for(var output="",i=0;i<attrs.length;i++){var value=attrs[i][1];defined(value)&&(output+=attrs[i][0]+":"+value+";")}return""!==output?output:void 0}function renderSize(size){return"string"!=typeof size&&(size+="px"),size}function renderPos(pos){var result=[];if(pos)for(var parts=kendo.toHyphens(pos).split("-"),i=0;i<parts.length;i++)result.push("k-pos-"+parts[i]);return result.join(" ")}function isTransparent(color){return""===color||null===color||"none"===color||"transparent"===color||!defined(color)}function arabicToRoman(n){for(var literals={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"},values=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],roman="";n>0;)n<values[0]?values.shift():(roman+=literals[values[0]],n-=values[0]);return roman}function romanToArabic(r){r=r.toLowerCase();for(var digits={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3},value=0,prev=0,i=0;i<r.length;++i){var v=digits[r.charAt(i)];if(!v)return null;value+=v,v>prev&&(value-=2*prev),prev=v}return value}function memoize(f){var cache=Object.create(null);return function(){for(var id="",i=arguments.length;--i>=0;)id+=":"+arguments[i];return id in cache?cache[id]:f.apply(this,arguments)}}var math=Math,kendo=window.kendo,deepExtend=kendo.deepExtend,DEG_TO_RAD=math.PI/180,MAX_NUM=Number.MAX_VALUE,MIN_NUM=-Number.MAX_VALUE,UNDEFINED="undefined",now=Date.now;now||(now=function(){return(new Date).getTime()}),deepExtend(kendo,{util:{MAX_NUM:MAX_NUM,MIN_NUM:MIN_NUM,append:append,arrayLimits:arrayLimits,arrayMin:arrayMin,arrayMax:arrayMax,defined:defined,deg:deg,hashKey:hashKey,hashObject:hashObject,isNumber:isNumber,isTransparent:isTransparent,last:last,limitValue:limitValue,now:now,objectKey:objectKey,round:round,rad:rad,renderAttr:renderAttr,renderAllAttr:renderAllAttr,renderPos:renderPos,renderSize:renderSize,renderStyle:renderStyle,renderTemplate:renderTemplate,sparseArrayLimits:sparseArrayLimits,sparseArrayMin:sparseArrayMin,sparseArrayMax:sparseArrayMax,sqr:sqr,valueOrDefault:valueOrDefault,romanToArabic:romanToArabic,arabicToRoman:arabicToRoman,memoize:memoize}}),kendo.drawing.util=kendo.util,kendo.dataviz.util=kendo.util}()}(),function(){!function($){function measureText(text,style,measureBox){return TextMetrics.current.measure(text,style,measureBox)}var doc=document,kendo=window.kendo,Class=kendo.Class,util=kendo.util,defined=util.defined,LRUCache=Class.extend({init:function(size){this._size=size,this._length=0,this._map={}},put:function(key,value){var lru=this,map=lru._map,entry={key:key,value:value};map[key]=entry,lru._head?(lru._tail.newer=entry,entry.older=lru._tail,lru._tail=entry):lru._head=lru._tail=entry,lru._length>=lru._size?(map[lru._head.key]=null,lru._head=lru._head.newer,lru._head.older=null):lru._length++},get:function(key){var lru=this,entry=lru._map[key];return entry?(entry===lru._head&&entry!==lru._tail&&(lru._head=entry.newer,lru._head.older=null),entry!==lru._tail&&(entry.older&&(entry.older.newer=entry.newer,entry.newer.older=entry.older),entry.older=lru._tail,entry.newer=null,lru._tail.newer=entry,lru._tail=entry),entry.value):void 0}}),defaultMeasureBox=$("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;' />")[0],TextMetrics=Class.extend({init:function(options){this._cache=new LRUCache(1e3),this._initOptions(options)},options:{baselineMarkerSize:1},measure:function(text,style,box){var styleKey=util.objectKey(style),cacheKey=util.hashKey(text+styleKey),cachedResult=this._cache.get(cacheKey);if(cachedResult)return cachedResult;var size={width:0,height:0,baseline:0},measureBox=box?box:defaultMeasureBox,baselineMarker=this._baselineMarker().cloneNode(!1);for(var key in style){var value=style[key];defined(value)&&(measureBox.style[key]=value)}return $(measureBox).text(text),measureBox.appendChild(baselineMarker),doc.body.appendChild(measureBox),(text+"").length&&(size.width=measureBox.offsetWidth-this.options.baselineMarkerSize,size.height=measureBox.offsetHeight,size.baseline=baselineMarker.offsetTop+this.options.baselineMarkerSize),size.width>0&&size.height>0&&this._cache.put(cacheKey,size),measureBox.parentNode.removeChild(measureBox),size},_baselineMarker:function(){return $("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;' />")[0]}});TextMetrics.current=new TextMetrics,kendo.util.TextMetrics=TextMetrics,kendo.util.LRUCache=LRUCache,kendo.util.measureText=measureText}(window.kendo.jQuery)}(),function(){!function(){function encodeBase64(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=encodeUTF8(input);i<input.length;)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+KEY_STR.charAt(enc1)+KEY_STR.charAt(enc2)+KEY_STR.charAt(enc3)+KEY_STR.charAt(enc4);return output}function encodeUTF8(input){for(var output="",i=0;i<input.length;i++){var c=input.charCodeAt(i);128>c?output+=fromCharCode(c):2048>c?(output+=fromCharCode(192|c>>>6),output+=fromCharCode(128|63&c)):65536>c&&(output+=fromCharCode(224|c>>>12),output+=fromCharCode(128|c>>>6&63),output+=fromCharCode(128|63&c))}return output}var kendo=window.kendo,deepExtend=kendo.deepExtend,fromCharCode=String.fromCharCode,KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";deepExtend(kendo.util,{encodeBase64:encodeBase64,encodeUTF8:encodeUTF8})}()}(),function(){!function($){var math=Math,kendo=window.kendo,deepExtend=kendo.deepExtend,inArray=$.inArray,ObserversMixin={observers:function(){return this._observers=this._observers||[],this._observers},addObserver:function(element){return this._observers?this._observers.push(element):this._observers=[element],this},removeObserver:function(element){var observers=this.observers(),index=inArray(element,observers);return-1!=index&&observers.splice(index,1),this},trigger:function(methodName,event){var observer,idx,observers=this._observers;if(observers&&!this._suspended)for(idx=0;idx<observers.length;idx++)observer=observers[idx],observer[methodName]&&observer[methodName](event);return this},optionsChange:function(e){this.trigger("optionsChange",e)},geometryChange:function(e){this.trigger("geometryChange",e)},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=math.max((this._suspended||0)-1,0),this},_observerField:function(field,value){this[field]&&this[field].removeObserver(this),this[field]=value,value.addObserver(this)}};deepExtend(kendo,{mixins:{ObserversMixin:ObserversMixin}})}(window.kendo.jQuery)}(),function(){!function($){function transform(matrix){return null===matrix?null:matrix instanceof Transformation?matrix:new Transformation(matrix)}function toMatrix(value){return value&&kendo.isFunction(value.matrix)?value.matrix():value}function ellipseExtremeAngles(center,rx,ry,matrix){var extremeX=0,extremeY=0;return matrix&&(extremeX=math.atan2(matrix.c*ry,matrix.a*rx),0!==matrix.b&&(extremeY=math.atan2(matrix.d*ry,matrix.b*rx))),{x:extremeX,y:extremeY}}function bboxStartAngle(angle,start){for(;start>angle;)angle+=90;return angle}function defineAccessors(fn,fields){for(var i=0;i<fields.length;i++){var name=fields[i],capitalized=name.charAt(0).toUpperCase()+name.substring(1,name.length);fn["set"+capitalized]=setAccessor(name),fn["get"+capitalized]=getAccessor(name)}}function setAccessor(field){return function(value){return this[field]!==value&&(this[field]=value,this.geometryChange()),this}}function getAccessor(field){return function(){return this[field]}}function elipseAngle(start,end,swipe){start>end&&(end+=360);var alpha=math.abs(end-start);return swipe||(alpha=360-alpha),alpha}function calculateAngle(cx,cy,rx,ry,x,y){var cos=round((x-cx)/rx,3),sin=round((y-cy)/ry,3);return round(deg(math.atan2(sin,cos)))}function normalizeArcParameters(x1,y1,x2,y2,rx,ry,largeArc,swipe){var cx,cy,cx1,cy1,a,b,c,sqrt;if(y1!==y2){var x21=x2-x1,y21=y2-y1,rx2=pow(rx,2),ry2=pow(ry,2),k=(ry2*x21*(x1+x2)+rx2*y21*(y1+y2))/(2*rx2*y21),yk2=k-y2,l=-(x21*ry2)/(rx2*y21);a=1/rx2+pow(l,2)/ry2,b=2*(l*yk2/ry2-x2/rx2),c=pow(x2,2)/rx2+pow(yk2,2)/ry2-1,sqrt=math.sqrt(pow(b,2)-4*a*c),cx=(-b-sqrt)/(2*a),cy=k+l*cx,cx1=(-b+sqrt)/(2*a),cy1=k+l*cx1}else{if(x1===x2)return!1;b=-2*y2,c=pow((x2-x1)*ry/(2*rx),2)+pow(y2,2)-pow(ry,2),sqrt=math.sqrt(pow(b,2)-4*c),cx=cx1=(x1+x2)/2,cy=(-b-sqrt)/2,cy1=(-b+sqrt)/2}var start=calculateAngle(cx,cy,rx,ry,x1,y1),end=calculateAngle(cx,cy,rx,ry,x2,y2),alpha=elipseAngle(start,end,swipe);return(largeArc&&180>=alpha||!largeArc&&alpha>180)&&(cx=cx1,cy=cy1,start=calculateAngle(cx,cy,rx,ry,x1,y1),end=calculateAngle(cx,cy,rx,ry,x2,y2)),{center:new Point(cx,cy),startAngle:start,endAngle:end}}var math=Math,pow=math.pow,kendo=($.inArray,window.kendo),Class=kendo.Class,deepExtend=kendo.deepExtend,ObserversMixin=kendo.mixins.ObserversMixin,util=kendo.util,defined=util.defined,rad=util.rad,deg=util.deg,round=util.round,PI_DIV_2=math.PI/2,MIN_NUM=util.MIN_NUM,MAX_NUM=util.MAX_NUM,Point=Class.extend({init:function(x,y){this.x=x||0,this.y=y||0},equals:function(other){return other&&other.x===this.x&&other.y===this.y},clone:function(){return new Point(this.x,this.y)},rotate:function(angle,origin){return this.transform(transform().rotate(angle,origin))},translate:function(x,y){return this.x+=x,this.y+=y,this.geometryChange(),this},translateWith:function(point){return this.translate(point.x,point.y)},move:function(x,y){return this.x=this.y=0,this.translate(x,y)},scale:function(scaleX,scaleY){return defined(scaleY)||(scaleY=scaleX),this.x*=scaleX,this.y*=scaleY,this.geometryChange(),this},scaleCopy:function(scaleX,scaleY){return this.clone().scale(scaleX,scaleY)},transform:function(transformation){var mx=toMatrix(transformation),x=this.x,y=this.y;return this.x=mx.a*x+mx.c*y+mx.e,this.y=mx.b*x+mx.d*y+mx.f,this.geometryChange(),this},transformCopy:function(transformation){var point=this.clone();return transformation&&point.transform(transformation),point},distanceTo:function(point){var dx=this.x-point.x,dy=this.y-point.y;return math.sqrt(dx*dx+dy*dy)},round:function(digits){return this.x=round(this.x,digits),this.y=round(this.y,digits),this.geometryChange(),this},toArray:function(digits){var doRound=defined(digits),x=doRound?round(this.x,digits):this.x,y=doRound?round(this.y,digits):this.y;return[x,y]}});defineAccessors(Point.fn,["x","y"]),deepExtend(Point.fn,ObserversMixin),Point.fn.toString=function(digits,separator){var x=this.x,y=this.y;return defined(digits)&&(x=round(x,digits),y=round(y,digits)),separator=separator||" ",x+separator+y},Point.create=function(arg0,arg1){return defined(arg0)?arg0 instanceof Point?arg0:1===arguments.length&&2===arg0.length?new Point(arg0[0],arg0[1]):new Point(arg0,arg1):void 0},Point.min=function(){for(var minX=util.MAX_NUM,minY=util.MAX_NUM,i=0;i<arguments.length;i++){var pt=arguments[i];minX=math.min(pt.x,minX),minY=math.min(pt.y,minY)}return new Point(minX,minY)},Point.max=function(p0,p1){for(var maxX=util.MIN_NUM,maxY=util.MIN_NUM,i=0;i<arguments.length;i++){var pt=arguments[i];maxX=math.max(pt.x,maxX),maxY=math.max(pt.y,maxY)}return new Point(maxX,maxY)},Point.minPoint=function(){return new Point(MIN_NUM,MIN_NUM)},Point.maxPoint=function(){return new Point(MAX_NUM,MAX_NUM)},Point.ZERO=new Point(0,0);var Size=Class.extend({init:function(width,height){this.width=width||0,this.height=height||0},equals:function(other){return other&&other.width===this.width&&other.height===this.height},clone:function(){return new Size(this.width,this.height)},toArray:function(digits){var doRound=defined(digits),width=doRound?round(this.width,digits):this.width,height=doRound?round(this.height,digits):this.height;return[width,height]}});defineAccessors(Size.fn,["width","height"]),deepExtend(Size.fn,ObserversMixin),Size.create=function(arg0,arg1){return defined(arg0)?arg0 instanceof Size?arg0:1===arguments.length&&2===arg0.length?new Size(arg0[0],arg0[1]):new Size(arg0,arg1):void 0},Size.ZERO=new Size(0,0);var Rect=Class.extend({init:function(origin,size){this.setOrigin(origin||new Point),this.setSize(size||new Size)},clone:function(){return new Rect(this.origin.clone(),this.size.clone())},equals:function(other){return other&&other.origin.equals(this.origin)&&other.size.equals(this.size)},setOrigin:function(value){return this._observerField("origin",Point.create(value)),this.geometryChange(),this},getOrigin:function(){return this.origin},setSize:function(value){return this._observerField("size",Size.create(value)),this.geometryChange(),this},getSize:function(){return this.size},width:function(){return this.size.width},height:function(){return this.size.height},topLeft:function(){return this.origin.clone()},bottomRight:function(){return this.origin.clone().translate(this.width(),this.height())},topRight:function(){return this.origin.clone().translate(this.width(),0)},bottomLeft:function(){return this.origin.clone().translate(0,this.height())},center:function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},bbox:function(matrix){var tl=this.topLeft().transformCopy(matrix),tr=this.topRight().transformCopy(matrix),br=this.bottomRight().transformCopy(matrix),bl=this.bottomLeft().transformCopy(matrix);return Rect.fromPoints(tl,tr,br,bl)},transformCopy:function(m){return Rect.fromPoints(this.topLeft().transform(m),this.bottomRight().transform(m))}});deepExtend(Rect.fn,ObserversMixin),Rect.fromPoints=function(){var topLeft=Point.min.apply(this,arguments),bottomRight=Point.max.apply(this,arguments),size=new Size(bottomRight.x-topLeft.x,bottomRight.y-topLeft.y);return new Rect(topLeft,size)},Rect.union=function(a,b){return Rect.fromPoints(Point.min(a.topLeft(),b.topLeft()),Point.max(a.bottomRight(),b.bottomRight()))},Rect.intersect=function(a,b){return a={left:a.topLeft().x,top:a.topLeft().y,right:a.bottomRight().x,bottom:a.bottomRight().y},b={left:b.topLeft().x,top:b.topLeft().y,right:b.bottomRight().x,bottom:b.bottomRight().y},a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom?Rect.fromPoints(new Point(math.max(a.left,b.left),math.max(a.top,b.top)),new Point(math.min(a.right,b.right),math.min(a.bottom,b.bottom))):void 0};var Circle=Class.extend({init:function(center,radius){this.setCenter(center||new Point),this.setRadius(radius||0)},setCenter:function(value){return this._observerField("center",Point.create(value)),this.geometryChange(),this},getCenter:function(){return this.center},equals:function(other){return other&&other.center.equals(this.center)&&other.radius===this.radius},clone:function(){return new Circle(this.center.clone(),this.radius)},pointAt:function(angle){return this._pointAt(rad(angle))},bbox:function(matrix){for(var minPoint=Point.maxPoint(),maxPoint=Point.minPoint(),extremeAngles=ellipseExtremeAngles(this.center,this.radius,this.radius,matrix),i=0;4>i;i++){var currentPointX=this._pointAt(extremeAngles.x+i*PI_DIV_2).transformCopy(matrix),currentPointY=this._pointAt(extremeAngles.y+i*PI_DIV_2).transformCopy(matrix),currentPoint=new Point(currentPointX.x,currentPointY.y);minPoint=Point.min(minPoint,currentPoint),maxPoint=Point.max(maxPoint,currentPoint)}return Rect.fromPoints(minPoint,maxPoint)},_pointAt:function(angle){var c=this.center,r=this.radius;return new Point(c.x-r*math.cos(angle),c.y-r*math.sin(angle))}});defineAccessors(Circle.fn,["radius"]),deepExtend(Circle.fn,ObserversMixin);var Arc=Class.extend({init:function(center,options){this.setCenter(center||new Point),options=options||{},this.radiusX=options.radiusX,this.radiusY=options.radiusY||options.radiusX,this.startAngle=options.startAngle,this.endAngle=options.endAngle,this.anticlockwise=options.anticlockwise||!1},clone:function(){return new Arc(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},setCenter:function(value){return this._observerField("center",Point.create(value)),this.geometryChange(),this},getCenter:function(){return this.center},MAX_INTERVAL:45,pointAt:function(angle){var center=this.center,radian=rad(angle);return new Point(center.x+this.radiusX*math.cos(radian),center.y+this.radiusY*math.sin(radian))},curvePoints:function(){for(var startAngle=this.startAngle,dir=(this.endAngle,this.anticlockwise?-1:1),curvePoints=[this.pointAt(startAngle)],currentAngle=startAngle,interval=this._arcInterval(),intervalAngle=interval.endAngle-interval.startAngle,subIntervalsCount=math.ceil(intervalAngle/this.MAX_INTERVAL),subIntervalAngle=intervalAngle/subIntervalsCount,i=1;subIntervalsCount>=i;i++){var nextAngle=currentAngle+dir*subIntervalAngle,points=this._intervalCurvePoints(currentAngle,nextAngle);curvePoints.push(points.cp1,points.cp2,points.p2),currentAngle=nextAngle}return curvePoints},bbox:function(matrix){for(var arc=this,interval=arc._arcInterval(),startAngle=interval.startAngle,endAngle=interval.endAngle,extremeAngles=ellipseExtremeAngles(this.center,this.radiusX,this.radiusY,matrix),extremeX=deg(extremeAngles.x),extremeY=deg(extremeAngles.y),currentPoint=arc.pointAt(startAngle).transformCopy(matrix),endPoint=arc.pointAt(endAngle).transformCopy(matrix),minPoint=Point.min(currentPoint,endPoint),maxPoint=Point.max(currentPoint,endPoint),currentAngleX=bboxStartAngle(extremeX,startAngle),currentAngleY=bboxStartAngle(extremeY,startAngle);endAngle>currentAngleX||endAngle>currentAngleY;){var currentPointX;endAngle>currentAngleX&&(currentPointX=arc.pointAt(currentAngleX).transformCopy(matrix),currentAngleX+=90);var currentPointY;endAngle>currentAngleY&&(currentPointY=arc.pointAt(currentAngleY).transformCopy(matrix),currentAngleY+=90),currentPoint=new Point(currentPointX.x,currentPointY.y),minPoint=Point.min(minPoint,currentPoint),maxPoint=Point.max(maxPoint,currentPoint)}return Rect.fromPoints(minPoint,maxPoint)},_arcInterval:function(){var startAngle=this.startAngle,endAngle=this.endAngle,anticlockwise=this.anticlockwise;if(anticlockwise){var oldStart=startAngle;startAngle=endAngle,endAngle=oldStart}return(startAngle>endAngle||anticlockwise&&startAngle===endAngle)&&(endAngle+=360),{startAngle:startAngle,endAngle:endAngle}},_intervalCurvePoints:function(startAngle,endAngle){var arc=this,p1=arc.pointAt(startAngle),p2=arc.pointAt(endAngle),p1Derivative=arc._derivativeAt(startAngle),p2Derivative=arc._derivativeAt(endAngle),t=(rad(endAngle)-rad(startAngle))/3,cp1=new Point(p1.x+t*p1Derivative.x,p1.y+t*p1Derivative.y),cp2=new Point(p2.x-t*p2Derivative.x,p2.y-t*p2Derivative.y);return{p1:p1,cp1:cp1,cp2:cp2,p2:p2}},_derivativeAt:function(angle){var arc=this,radian=rad(angle);return new Point(-arc.radiusX*math.sin(radian),arc.radiusY*math.cos(radian))}});defineAccessors(Arc.fn,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),deepExtend(Arc.fn,ObserversMixin),Arc.fromPoints=function(start,end,rx,ry,largeArc,swipe){var arcParameters=normalizeArcParameters(start.x,start.y,end.x,end.y,rx,ry,largeArc,swipe);return new Arc(arcParameters.center,{startAngle:arcParameters.startAngle,endAngle:arcParameters.endAngle,radiusX:rx,radiusY:ry,anticlockwise:0===swipe})};var Matrix=Class.extend({init:function(a,b,c,d,e,f){this.a=a||0,this.b=b||0,this.c=c||0,this.d=d||0,this.e=e||0,this.f=f||0},multiplyCopy:function(m){return new Matrix(this.a*m.a+this.c*m.b,this.b*m.a+this.d*m.b,this.a*m.c+this.c*m.d,this.b*m.c+this.d*m.d,this.a*m.e+this.c*m.f+this.e,this.b*m.e+this.d*m.f+this.f)},invert:function(){var a=this.a,b=this.b,d=this.c,e=this.d,g=this.e,h=this.f,det=a*e-b*d;return 0===det?null:new Matrix(e/det,-b/det,-d/det,a/det,(d*h-e*g)/det,(b*g-a*h)/det)},clone:function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},equals:function(other){return other?this.a===other.a&&this.b===other.b&&this.c===other.c&&this.d===other.d&&this.e===other.e&&this.f===other.f:!1},round:function(precision){return this.a=round(this.a,precision),this.b=round(this.b,precision),this.c=round(this.c,precision),this.d=round(this.d,precision),this.e=round(this.e,precision),this.f=round(this.f,precision),this},toArray:function(precision){var arr=[this.a,this.b,this.c,this.d,this.e,this.f];if(defined(precision))for(var i=0;i<arr.length;i++)arr[i]=round(arr[i],precision);return arr}});Matrix.fn.toString=function(precision,separator){return this.toArray(precision).join(separator||",")},Matrix.translate=function(x,y){return new Matrix(1,0,0,1,x,y)},Matrix.unit=function(){return new Matrix(1,0,0,1,0,0)},Matrix.rotate=function(angle,x,y){var m=new Matrix;return m.a=math.cos(rad(angle)),m.b=math.sin(rad(angle)),m.c=-m.b,m.d=m.a,m.e=x-x*m.a+y*m.b||0,m.f=y-y*m.a-x*m.b||0,m},Matrix.scale=function(scaleX,scaleY){return new Matrix(scaleX,0,0,scaleY,0,0)},Matrix.IDENTITY=Matrix.unit();var Transformation=Class.extend({init:function(matrix){this._matrix=matrix||Matrix.unit()},clone:function(){return new Transformation(this._matrix.clone())},equals:function(other){return other&&other._matrix.equals(this._matrix)},_optionsChange:function(){this.optionsChange({field:"transform",value:this})},translate:function(x,y){return this._matrix=this._matrix.multiplyCopy(Matrix.translate(x,y)),this._optionsChange(),this},scale:function(scaleX,scaleY,origin){return defined(scaleY)||(scaleY=scaleX),origin&&(origin=Point.create(origin),this._matrix=this._matrix.multiplyCopy(Matrix.translate(origin.x,origin.y))),this._matrix=this._matrix.multiplyCopy(Matrix.scale(scaleX,scaleY)),origin&&(this._matrix=this._matrix.multiplyCopy(Matrix.translate(-origin.x,-origin.y))),this._optionsChange(),this},rotate:function(angle,origin){return origin=Point.create(origin)||Point.ZERO,this._matrix=this._matrix.multiplyCopy(Matrix.rotate(angle,origin.x,origin.y)),this._optionsChange(),this},multiply:function(transformation){var matrix=toMatrix(transformation);return this._matrix=this._matrix.multiplyCopy(matrix),this._optionsChange(),this},matrix:function(){return this._matrix}});deepExtend(Transformation.fn,ObserversMixin),deepExtend(kendo,{geometry:{Arc:Arc,Circle:Circle,Matrix:Matrix,Point:Point,Rect:Rect,Size:Size,Transformation:Transformation,transform:transform,toMatrix:toMatrix}}),kendo.dataviz.geometry=kendo.geometry}(window.kendo.jQuery)}(),function(){!function($){var noop=$.noop,toString=Object.prototype.toString,kendo=window.kendo,Class=kendo.Class,Widget=kendo.ui.Widget,deepExtend=kendo.deepExtend,util=kendo.util,defined=util.defined,Surface=Widget.extend({init:function(element,options){this.options=deepExtend({},this.options,options),Widget.fn.init.call(this,element,this.options),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._visual=new kendo.drawing.Group,this.options.width&&this.element.css("width",this.options.width),this.options.height&&this.element.css("height",this.options.height)},options:{name:"Surface"},events:["click","mouseenter","mouseleave","resize"],draw:function(element){this._visual.children.push(element)},clear:function(){this._visual.children=[]},destroy:function(){this._visual=null,Widget.fn.destroy.call(this)},exportVisual:function(){return this._visual},getSize:function(){return{width:this.element.width(),height:this.element.height()}},setSize:function(size){this.element.css({width:size.width,height:size.height}),this._size=size,this._resize()},eventTarget:function(e){for(var node,domNode=$(e.touch?e.touch.initialTouch:e.target);!node&&domNode.length>0&&(node=domNode[0]._kendoNode,!domNode.is(this.element)&&0!==domNode.length);)domNode=domNode.parent();return node?node.srcElement:void 0},_resize:noop,_handler:function(event){var surface=this;return function(e){var node=surface.eventTarget(e);node&&surface.trigger(event,{element:node,originalEvent:e})}}});kendo.ui.plugin(Surface),Surface.create=function(element,options){return SurfaceFactory.current.create(element,options)};var BaseNode=Class.extend({init:function(srcElement){this.childNodes=[],this.parent=null,srcElement&&(this.srcElement=srcElement,this.observe())},destroy:function(){this.srcElement&&this.srcElement.removeObserver(this);for(var children=this.childNodes,i=0;i<children.length;i++)this.childNodes[i].destroy();this.parent=null},load:noop,observe:function(){this.srcElement&&this.srcElement.addObserver(this)},append:function(node){this.childNodes.push(node),node.parent=this},insertAt:function(node,pos){this.childNodes.splice(pos,0,node),node.parent=this},remove:function(index,count){for(var end=index+count,i=index;end>i;i++)this.childNodes[i].removeSelf();this.childNodes.splice(index,count)},removeSelf:function(){this.clear(),this.destroy()},clear:function(){this.remove(0,this.childNodes.length)},invalidate:function(){this.parent&&this.parent.invalidate()},geometryChange:function(){this.invalidate()},optionsChange:function(){this.invalidate()},childrenChange:function(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}}),OptionsStore=Class.extend({init:function(options,prefix){var field,member;this.prefix=prefix||"";for(field in options)member=options[field],member=this._wrap(member,field),this[field]=member},get:function(field){return kendo.getter(field,!0)(this)},set:function(field,value){var current=kendo.getter(field,!0)(this);if(current!==value){var composite=this._set(field,this._wrap(value,field));composite||this.optionsChange({field:this.prefix+field,value:value})}},_set:function(field,value){var composite=field.indexOf(".")>=0;if(composite)for(var obj,parts=field.split("."),path="";parts.length>1;){if(path+=parts.shift(),obj=kendo.getter(path,!0)(this),obj||(obj=new OptionsStore({},path+"."),obj.addObserver(this),this[path]=obj),obj instanceof OptionsStore)return obj.set(parts.join("."),value),composite;path+="."}return this._clear(field),kendo.setter(field)(this,value),composite},_clear:function(field){var current=kendo.getter(field,!0)(this);current&&current.removeObserver&&current.removeObserver(this)},_wrap:function(object,field){var type=toString.call(object);return null!==object&&defined(object)&&"[object Object]"===type&&(object instanceof OptionsStore||object instanceof Class||(object=new OptionsStore(object,this.prefix+field+".")),object.addObserver(this)),object}});deepExtend(OptionsStore.fn,kendo.mixins.ObserversMixin);var SurfaceFactory=function(){this._items=[]};SurfaceFactory.prototype={register:function(name,type,order){var items=this._items,first=items[0],entry={name:name,type:type,order:order};!first||order<first.order?items.unshift(entry):items.push(entry)},create:function(element,options){var items=this._items,match=items[0];if(options&&options.type)for(var preferred=options.type.toLowerCase(),i=0;i<items.length;i++)if(items[i].name===preferred){match=items[i];break}return match?new match.type(element,options):void kendo.logToConsole("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG, VML and Canvas. User agent: "+navigator.userAgent+"\n- The Kendo UI scripts are not fully loaded")}},SurfaceFactory.current=new SurfaceFactory,deepExtend(kendo,{drawing:{DASH_ARRAYS:{dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},Color:kendo.Color,BaseNode:BaseNode,OptionsStore:OptionsStore,Surface:Surface,SurfaceFactory:SurfaceFactory}}),kendo.dataviz.drawing=kendo.drawing}(window.kendo.jQuery)}(),function(){!function(){var kendo=window.kendo,deepExtend=kendo.deepExtend,defined=kendo.util.defined,GRADIENT="gradient",Paintable={extend:function(proto){proto.fill=this.fill,proto.stroke=this.stroke},fill:function(color,opacity){var options=this.options;if(defined(color)){if(color&&color.nodeType!=GRADIENT){var newFill={color:color};defined(opacity)&&(newFill.opacity=opacity),options.set("fill",newFill)}else options.set("fill",color);return this}return options.get("fill")},stroke:function(color,width,opacity){return defined(color)?(this.options.set("stroke.color",color),defined(width)&&this.options.set("stroke.width",width),defined(opacity)&&this.options.set("stroke.opacity",opacity),this):this.options.get("stroke")}},Traversable={extend:function(proto,childrenField){proto.traverse=function(callback){for(var children=this[childrenField],i=0;i<children.length;i++){var child=children[i];child.traverse?child.traverse(callback):callback(child)}return this}}};deepExtend(kendo.drawing,{mixins:{Paintable:Paintable,Traversable:Traversable}})}()}(),function(){!function($){function elementsBoundingBox(elements,applyTransform,transformation){for(var boundingBox,i=0;i<elements.length;i++){var element=elements[i];if(element.visible()){var elementBoundingBox=applyTransform?element.bbox(transformation):element.rawBBox();elementBoundingBox&&(boundingBox=boundingBox?g.Rect.union(boundingBox,elementBoundingBox):elementBoundingBox);
}}return boundingBox}function elementsClippedBoundingBox(elements,transformation){for(var boundingBox,i=0;i<elements.length;i++){var element=elements[i];if(element.visible()){var elementBoundingBox=element.clippedBBox(transformation);elementBoundingBox&&(boundingBox=boundingBox?g.Rect.union(boundingBox,elementBoundingBox):elementBoundingBox)}}return boundingBox}function expandRect(rect,value){rect.origin.x-=value,rect.origin.y-=value,rect.size.width+=2*value,rect.size.height+=2*value}function defineGeometryAccessors(fn,names){for(var i=0;i<names.length;i++)fn[names[i]]=geometryAccessor(names[i])}function geometryAccessor(name){var fieldName="_"+name;return function(value){return defined(value)?(this._observerField(fieldName,value),this.geometryChange(),this):this[fieldName]}}function definePointAccessors(fn,names){for(var i=0;i<names.length;i++)fn[names[i]]=pointAccessor(names[i])}function pointAccessor(name){var fieldName="_"+name;return function(value){return defined(value)?(this._observerField(fieldName,Point.create(value)),this.geometryChange(),this):this[fieldName]}}function defineOptionsAccessors(fn,names){for(var i=0;i<names.length;i++)fn[names[i]]=optionsAccessor(names[i])}function optionsAccessor(name){return function(value){return defined(value)?(this.options.set(name,value),this):this.options.get(name)}}function generateDefinitionId(){return"kdef"+defId++}function align(elements,rect,alignment){alignElements(elements,rect,alignment,"x","width")}function vAlign(elements,rect,alignment){alignElements(elements,rect,alignment,"y","height")}function stack(elements){stackElements(getStackElements(elements),"x","y","width")}function vStack(elements){stackElements(getStackElements(elements),"y","x","height")}function wrap(elements,rect){return wrapElements(elements,rect,"x","y","width")}function vWrap(elements,rect){return wrapElements(elements,rect,"y","x","height")}function wrapElements(elements,rect,axis,otherAxis,sizeField){var startElement,elementIdx,stack,idx,result=[],stacks=getStacks(elements,rect,sizeField),origin=rect.origin.clone();for(idx=0;idx<stacks.length;idx++)for(stack=stacks[idx],startElement=stack[0],origin[otherAxis]=startElement.bbox.origin[otherAxis],translateToPoint(origin,startElement.bbox,startElement.element),startElement.bbox.origin[axis]=origin[axis],stackElements(stack,axis,otherAxis,sizeField),result.push([]),elementIdx=0;elementIdx<stack.length;elementIdx++)result[idx].push(stack[elementIdx].element);return result}function fit(element,rect){var bbox=element.clippedBBox(),elementSize=bbox.size,rectSize=rect.size;if(rectSize.width<elementSize.width||rectSize.height<elementSize.height){var scale=math.min(rectSize.width/elementSize.width,rectSize.height/elementSize.height),transform=element.transform()||g.transform();transform.scale(scale,scale),element.transform(transform)}}function getStacks(elements,rect,sizeField){for(var element,size,bbox,maxSize=rect.size[sizeField],stackSize=0,stacks=[],stack=[],addElementToStack=function(){stack.push({element:element,bbox:bbox})},idx=0;idx<elements.length;idx++)element=elements[idx],bbox=element.clippedBBox(),bbox&&(size=bbox.size[sizeField],stackSize+size>maxSize?stack.length?(stacks.push(stack),stack=[],addElementToStack(),stackSize=size):(addElementToStack(),stacks.push(stack),stack=[],stackSize=0):(addElementToStack(),stackSize+=size));return stack.length&&stacks.push(stack),stacks}function getStackElements(elements){for(var element,bbox,stackElements=[],idx=0;idx<elements.length;idx++)element=elements[idx],bbox=element.clippedBBox(),bbox&&stackElements.push({element:element,bbox:bbox});return stackElements}function stackElements(elements,stackAxis,otherAxis,sizeField){if(elements.length>1)for(var element,bbox,previousBBox=elements[0].bbox,origin=new Point,idx=1;idx<elements.length;idx++)element=elements[idx].element,bbox=elements[idx].bbox,origin[stackAxis]=previousBBox.origin[stackAxis]+previousBBox.size[sizeField],origin[otherAxis]=bbox.origin[otherAxis],translateToPoint(origin,bbox,element),bbox.origin[stackAxis]=origin[stackAxis],previousBBox=bbox}function alignElements(elements,rect,alignment,axis,sizeField){var bbox,point;alignment=alignment||"start";for(var idx=0;idx<elements.length;idx++)bbox=elements[idx].clippedBBox(),bbox&&(point=bbox.origin.clone(),point[axis]=alignStart(bbox.size[sizeField],rect,alignment,axis,sizeField),translateToPoint(point,bbox,elements[idx]))}function alignStart(size,rect,align,axis,sizeField){var start;return start=align==START?rect.origin[axis]:align==END?rect.origin[axis]+rect.size[sizeField]-size:rect.origin[axis]+(rect.size[sizeField]-size)/2}function translate(x,y,element){var transofrm=element.transform()||g.transform(),matrix=transofrm.matrix();matrix.e+=x,matrix.f+=y,element.transform(transofrm)}function translateToPoint(point,bbox,element){translate(point.x-bbox.origin.x,point.y-bbox.origin.y,element)}var kendo=window.kendo,Class=kendo.Class,deepExtend=kendo.deepExtend,g=kendo.geometry,Point=g.Point,Size=g.Size,Matrix=g.Matrix,toMatrix=g.toMatrix,drawing=kendo.drawing,OptionsStore=drawing.OptionsStore,math=Math,pow=math.pow,util=kendo.util,append=util.append,arrayLimits=util.arrayLimits,defined=util.defined,last=util.last,valueOrDefault=util.valueOrDefault,ObserversMixin=kendo.mixins.ObserversMixin,inArray=$.inArray,push=[].push,pop=[].pop,splice=[].splice,shift=[].shift,slice=[].slice,unshift=[].unshift,defId=1,START="start",END="end",HORIZONTAL="horizontal",Element=Class.extend({nodeType:"Element",init:function(options){this._initOptions(options)},_initOptions:function(options){options=options||{};var transform=options.transform,clip=options.clip;transform&&(options.transform=g.transform(transform)),clip&&!clip.id&&(clip.id=generateDefinitionId()),this.options=new OptionsStore(options),this.options.addObserver(this)},transform:function(transform){return defined(transform)?void this.options.set("transform",g.transform(transform)):this.options.get("transform")},parentTransform:function(){for(var transformation,parentMatrix,element=this;element.parent;)element=element.parent,transformation=element.transform(),transformation&&(parentMatrix=transformation.matrix().multiplyCopy(parentMatrix||Matrix.unit()));return parentMatrix?g.transform(parentMatrix):void 0},currentTransform:function(parentTransform){var parentMatrix,combinedMatrix,elementTransform=this.transform(),elementMatrix=toMatrix(elementTransform);return defined(parentTransform)||(parentTransform=this.parentTransform()),parentMatrix=toMatrix(parentTransform),combinedMatrix=elementMatrix&&parentMatrix?parentMatrix.multiplyCopy(elementMatrix):elementMatrix||parentMatrix,combinedMatrix?g.transform(combinedMatrix):void 0},visible:function(visible){return defined(visible)?(this.options.set("visible",visible),this):this.options.get("visible")!==!1},clip:function(clip){var options=this.options;return defined(clip)?(clip&&!clip.id&&(clip.id=generateDefinitionId()),options.set("clip",clip),this):options.get("clip")},opacity:function(value){return defined(value)?(this.options.set("opacity",value),this):valueOrDefault(this.options.get("opacity"),1)},clippedBBox:function(transformation){var box=this._clippedBBox(transformation);if(box){var clip=this.clip();return clip?g.Rect.intersect(box,clip.bbox(transformation)):box}},_clippedBBox:function(transformation){return this.bbox(transformation)}});deepExtend(Element.fn,ObserversMixin);var ElementsArray=Class.extend({init:function(array){array=array||[],this.length=0,this._splice(0,array.length,array)},elements:function(elements){return elements?(this._splice(0,this.length,elements),this._change(),this):this.slice(0)},push:function(){var elements=arguments,result=push.apply(this,elements);return this._add(elements),result},slice:slice,pop:function(){var length=this.length,result=pop.apply(this);return length&&this._remove([result]),result},splice:function(index,howMany){var elements=slice.call(arguments,2),result=this._splice(index,howMany,elements);return this._change(),result},shift:function(){var length=this.length,result=shift.apply(this);return length&&this._remove([result]),result},unshift:function(){var elements=arguments,result=unshift.apply(this,elements);return this._add(elements),result},indexOf:function(element){var idx,length,that=this;for(idx=0,length=that.length;length>idx;idx++)if(that[idx]===element)return idx;return-1},_splice:function(index,howMany,elements){var result=splice.apply(this,[index,howMany].concat(elements));return this._clearObserver(result),this._setObserver(elements),result},_add:function(elements){this._setObserver(elements),this._change()},_remove:function(elements){this._clearObserver(elements),this._change()},_setObserver:function(elements){for(var idx=0;idx<elements.length;idx++)elements[idx].addObserver(this)},_clearObserver:function(elements){for(var idx=0;idx<elements.length;idx++)elements[idx].removeObserver(this)},_change:function(){}});deepExtend(ElementsArray.fn,ObserversMixin);var Group=Element.extend({nodeType:"Group",init:function(options){Element.fn.init.call(this,options),this.children=[]},childrenChange:function(action,items,index){this.trigger("childrenChange",{action:action,items:items,index:index})},append:function(){return append(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},insert:function(index,element){return this.children.splice(index,0,element),element.parent=this,this.childrenChange("add",[element],index),this},insertAt:function(element,index){return this.insert(index,element)},remove:function(element){var index=inArray(element,this.children);return index>=0&&(this.children.splice(index,1),element.parent=null,this.childrenChange("remove",[element],index)),this},removeAt:function(index){if(index>=0&&index<this.children.length){var element=this.children[index];this.children.splice(index,1),element.parent=null,this.childrenChange("remove",[element],index)}return this},clear:function(){var items=this.children;return this.children=[],this._reparent(items,null),this.childrenChange("remove",items,0),this},bbox:function(transformation){return elementsBoundingBox(this.children,!0,this.currentTransform(transformation))},rawBBox:function(){return elementsBoundingBox(this.children,!1)},_clippedBBox:function(transformation){return elementsClippedBoundingBox(this.children,this.currentTransform(transformation))},currentTransform:function(transformation){return Element.fn.currentTransform.call(this,transformation)||null},_reparent:function(elements,newParent){for(var i=0;i<elements.length;i++){var child=elements[i],parent=child.parent;parent&&parent!=this&&parent.remove&&parent.remove(child),child.parent=newParent}}});drawing.mixins.Traversable.extend(Group.fn,"children");var Text=Element.extend({nodeType:"Text",init:function(content,position,options){Element.fn.init.call(this,options),this.content(content),this.position(position||new g.Point),this.options.font||(this.options.font="12px sans-serif"),defined(this.options.fill)||this.fill("#000")},content:function(value){return defined(value)?(this.options.set("content",value),this):this.options.get("content")},measure:function(){var metrics=util.measureText(this.content(),{font:this.options.get("font")});return metrics},rect:function(){var size=this.measure(),pos=this.position().clone();return new g.Rect(pos,[size.width,size.height])},bbox:function(transformation){var combinedMatrix=toMatrix(this.currentTransform(transformation));return this.rect().bbox(combinedMatrix)},rawBBox:function(){return this.rect().bbox()}});drawing.mixins.Paintable.extend(Text.fn),definePointAccessors(Text.fn,["position"]);var Circle=Element.extend({nodeType:"Circle",init:function(geometry,options){Element.fn.init.call(this,options),this.geometry(geometry||new g.Circle),defined(this.options.stroke)||this.stroke("#000")},bbox:function(transformation){var combinedMatrix=toMatrix(this.currentTransform(transformation)),rect=this._geometry.bbox(combinedMatrix),strokeWidth=this.options.get("stroke.width");return strokeWidth&&expandRect(rect,strokeWidth/2),rect},rawBBox:function(){return this._geometry.bbox()}});drawing.mixins.Paintable.extend(Circle.fn),defineGeometryAccessors(Circle.fn,["geometry"]);var Arc=Element.extend({nodeType:"Arc",init:function(geometry,options){Element.fn.init.call(this,options),this.geometry(geometry||new g.Arc),defined(this.options.stroke)||this.stroke("#000")},bbox:function(transformation){var combinedMatrix=toMatrix(this.currentTransform(transformation)),rect=this.geometry().bbox(combinedMatrix),strokeWidth=this.options.get("stroke.width");return strokeWidth&&expandRect(rect,strokeWidth/2),rect},rawBBox:function(){return this.geometry().bbox()},toPath:function(){var path=new Path,curvePoints=this.geometry().curvePoints();if(curvePoints.length>0){path.moveTo(curvePoints[0].x,curvePoints[0].y);for(var i=1;i<curvePoints.length;i+=3)path.curveTo(curvePoints[i],curvePoints[i+1],curvePoints[i+2])}return path}});drawing.mixins.Paintable.extend(Arc.fn),defineGeometryAccessors(Arc.fn,["geometry"]);var GeometryElementsArray=ElementsArray.extend({_change:function(){this.geometryChange()}}),Segment=Class.extend({init:function(anchor,controlIn,controlOut){this.anchor(anchor||new Point),this.controlIn(controlIn),this.controlOut(controlOut)},bboxTo:function(toSegment,matrix){var rect,segmentAnchor=this.anchor().transformCopy(matrix),toSegmentAnchor=toSegment.anchor().transformCopy(matrix);return rect=this.controlOut()&&toSegment.controlIn()?this._curveBoundingBox(segmentAnchor,this.controlOut().transformCopy(matrix),toSegment.controlIn().transformCopy(matrix),toSegmentAnchor):this._lineBoundingBox(segmentAnchor,toSegmentAnchor)},_lineBoundingBox:function(p1,p2){return g.Rect.fromPoints(p1,p2)},_curveBoundingBox:function(p1,cp1,cp2,p2){var points=[p1,cp1,cp2,p2],extremesX=this._curveExtremesFor(points,"x"),extremesY=this._curveExtremesFor(points,"y"),xLimits=arrayLimits([extremesX.min,extremesX.max,p1.x,p2.x]),yLimits=arrayLimits([extremesY.min,extremesY.max,p1.y,p2.y]);return g.Rect.fromPoints(new Point(xLimits.min,yLimits.min),new Point(xLimits.max,yLimits.max))},_curveExtremesFor:function(points,field){var extremes=this._curveExtremes(points[0][field],points[1][field],points[2][field],points[3][field]);return{min:this._calculateCurveAt(extremes.min,field,points),max:this._calculateCurveAt(extremes.max,field,points)}},_calculateCurveAt:function(t,field,points){var t1=1-t;return pow(t1,3)*points[0][field]+3*pow(t1,2)*t*points[1][field]+3*pow(t,2)*t1*points[2][field]+pow(t,3)*points[3][field]},_curveExtremes:function(x1,x2,x3,x4){var a=x1-3*x2+3*x3-x4,b=-2*(x1-2*x2+x3),c=x1-x2,sqrt=math.sqrt(b*b-4*a*c),t1=0,t2=1;0===a?0!==b&&(t1=t2=-c/b):isNaN(sqrt)||(t1=(-b+sqrt)/(2*a),t2=(-b-sqrt)/(2*a));var min=math.max(math.min(t1,t2),0);(0>min||min>1)&&(min=0);var max=math.min(math.max(t1,t2),1);return(max>1||0>max)&&(max=1),{min:min,max:max}}});definePointAccessors(Segment.fn,["anchor","controlIn","controlOut"]),deepExtend(Segment.fn,ObserversMixin);var Path=Element.extend({nodeType:"Path",init:function(options){Element.fn.init.call(this,options),this.segments=new GeometryElementsArray,this.segments.addObserver(this),defined(this.options.stroke)||(this.stroke("#000"),defined(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))},moveTo:function(x,y){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(x,y),this},lineTo:function(x,y){var point=defined(y)?new Point(x,y):x,segment=new Segment(point);return this.segments.push(segment),this},curveTo:function(controlOut,controlIn,point){if(this.segments.length>0){var lastSegment=last(this.segments),segment=new Segment(point,controlIn);this.suspend(),lastSegment.controlOut(controlOut),this.resume(),this.segments.push(segment)}return this},arc:function(startAngle,endAngle,radiusX,radiusY,anticlockwise){if(this.segments.length>0){var lastSegment=last(this.segments),anchor=lastSegment.anchor(),start=util.rad(startAngle),center=new Point(anchor.x-radiusX*math.cos(start),anchor.y-radiusY*math.sin(start)),arc=new g.Arc(center,{startAngle:startAngle,endAngle:endAngle,radiusX:radiusX,radiusY:radiusY,anticlockwise:anticlockwise});this._addArcSegments(arc)}return this},arcTo:function(end,rx,ry,largeArc,swipe){if(this.segments.length>0){var lastSegment=last(this.segments),anchor=lastSegment.anchor(),arc=g.Arc.fromPoints(anchor,end,rx,ry,largeArc,swipe);this._addArcSegments(arc)}return this},_addArcSegments:function(arc){this.suspend();for(var curvePoints=arc.curvePoints(),i=1;i<curvePoints.length;i+=3)this.curveTo(curvePoints[i],curvePoints[i+1],curvePoints[i+2]);this.resume(),this.geometryChange()},close:function(){return this.options.closed=!0,this.geometryChange(),this},bbox:function(transformation){var combinedMatrix=toMatrix(this.currentTransform(transformation)),boundingBox=this._bbox(combinedMatrix),strokeWidth=this.options.get("stroke.width");return strokeWidth&&expandRect(boundingBox,strokeWidth/2),boundingBox},rawBBox:function(){return this._bbox()},_bbox:function(matrix){var boundingBox,segments=this.segments,length=segments.length;if(1===length){var anchor=segments[0].anchor().transformCopy(matrix);boundingBox=new g.Rect(anchor,Size.ZERO)}else if(length>0)for(var i=1;length>i;i++){var segmentBox=segments[i-1].bboxTo(segments[i],matrix);boundingBox=boundingBox?g.Rect.union(boundingBox,segmentBox):segmentBox}return boundingBox}});drawing.mixins.Paintable.extend(Path.fn),Path.fromRect=function(rect,options){return new Path(options).moveTo(rect.topLeft()).lineTo(rect.topRight()).lineTo(rect.bottomRight()).lineTo(rect.bottomLeft()).close()},Path.fromPoints=function(points,options){if(points){for(var path=new Path(options),i=0;i<points.length;i++){var pt=Point.create(points[i]);pt&&(0===i?path.moveTo(pt):path.lineTo(pt))}return path}},Path.fromArc=function(arc,options){var path=new Path(options),startAngle=arc.startAngle,start=arc.pointAt(startAngle);return path.moveTo(start.x,start.y),path.arc(startAngle,arc.endAngle,arc.radiusX,arc.radiusY,arc.anticlockwise),path};var MultiPath=Element.extend({nodeType:"MultiPath",init:function(options){Element.fn.init.call(this,options),this.paths=new GeometryElementsArray,this.paths.addObserver(this),defined(this.options.stroke)||this.stroke("#000")},moveTo:function(x,y){var path=new Path;return path.moveTo(x,y),this.paths.push(path),this},lineTo:function(x,y){return this.paths.length>0&&last(this.paths).lineTo(x,y),this},curveTo:function(controlOut,controlIn,point){return this.paths.length>0&&last(this.paths).curveTo(controlOut,controlIn,point),this},arc:function(startAngle,endAngle,radiusX,radiusY,anticlockwise){return this.paths.length>0&&last(this.paths).arc(startAngle,endAngle,radiusX,radiusY,anticlockwise),this},arcTo:function(end,rx,ry,largeArc,swipe){return this.paths.length>0&&last(this.paths).arcTo(end,rx,ry,largeArc,swipe),this},close:function(){return this.paths.length>0&&last(this.paths).close(),this},bbox:function(transformation){return elementsBoundingBox(this.paths,!0,this.currentTransform(transformation))},rawBBox:function(){return elementsBoundingBox(this.paths,!1)},_clippedBBox:function(transformation){return elementsClippedBoundingBox(this.paths,this.currentTransform(transformation))}});drawing.mixins.Paintable.extend(MultiPath.fn);var Image=Element.extend({nodeType:"Image",init:function(src,rect,options){Element.fn.init.call(this,options),this.src(src),this.rect(rect||new g.Rect)},src:function(value){return defined(value)?(this.options.set("src",value),this):this.options.get("src")},bbox:function(transformation){var combinedMatrix=toMatrix(this.currentTransform(transformation));return this._rect.bbox(combinedMatrix)},rawBBox:function(){return this._rect.bbox()}});defineGeometryAccessors(Image.fn,["rect"]);var GradientStop=Class.extend({init:function(offset,color,opacity){this.options=new OptionsStore({offset:offset,color:color,opacity:defined(opacity)?opacity:1}),this.options.addObserver(this)}});defineOptionsAccessors(GradientStop.fn,["offset","color","opacity"]),deepExtend(GradientStop.fn,ObserversMixin),GradientStop.create=function(arg){if(defined(arg)){var stop;return stop=arg instanceof GradientStop?arg:arg.length>1?new GradientStop(arg[0],arg[1],arg[2]):new GradientStop(arg.offset,arg.color,arg.opacity)}};var StopsArray=ElementsArray.extend({_change:function(){this.optionsChange({field:"stops"})}}),Gradient=Class.extend({nodeType:"gradient",init:function(options){this.stops=new StopsArray(this._createStops(options.stops)),this.stops.addObserver(this),this._userSpace=options.userSpace,this.id=generateDefinitionId()},userSpace:function(value){return defined(value)?(this._userSpace=value,this.optionsChange(),this):this._userSpace},_createStops:function(stops){var idx,result=[];for(stops=stops||[],idx=0;idx<stops.length;idx++)result.push(GradientStop.create(stops[idx]));return result},addStop:function(offset,color,opacity){this.stops.push(new GradientStop(offset,color,opacity))},removeStop:function(stop){var index=this.stops.indexOf(stop);index>=0&&this.stops.splice(index,1)}});deepExtend(Gradient.fn,ObserversMixin,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}});var LinearGradient=Gradient.extend({init:function(options){options=options||{},Gradient.fn.init.call(this,options),this.start(options.start||new Point),this.end(options.end||new Point(1,0))}});definePointAccessors(LinearGradient.fn,["start","end"]);var RadialGradient=Gradient.extend({init:function(options){options=options||{},Gradient.fn.init.call(this,options),this.center(options.center||new Point),this._radius=defined(options.radius)?options.radius:1,this._fallbackFill=options.fallbackFill},radius:function(value){return defined(value)?(this._radius=value,this.geometryChange(),this):this._radius},fallbackFill:function(value){return defined(value)?(this._fallbackFill=value,this.optionsChange(),this):this._fallbackFill}});definePointAccessors(RadialGradient.fn,["center"]);var Rect=Element.extend({nodeType:"Rect",init:function(geometry,options){Element.fn.init.call(this,options),this.geometry(geometry||new g.Rect),defined(this.options.stroke)||this.stroke("#000")},bbox:function(transformation){var combinedMatrix=toMatrix(this.currentTransform(transformation)),rect=this._geometry.bbox(combinedMatrix),strokeWidth=this.options.get("stroke.width");return strokeWidth&&expandRect(rect,strokeWidth/2),rect},rawBBox:function(){return this._geometry.bbox()}});drawing.mixins.Paintable.extend(Rect.fn),defineGeometryAccessors(Rect.fn,["geometry"]);var Layout=Group.extend({init:function(rect,options){Group.fn.init.call(this,kendo.deepExtend({},this._defaults,options)),this._rect=rect,this._fieldMap={}},_defaults:{alignContent:START,justifyContent:START,alignItems:START,spacing:0,orientation:HORIZONTAL,lineSpacing:0,wrap:!0},rect:function(value){return value?(this._rect=value,this):this._rect},_initMap:function(){var options=this.options,fieldMap=this._fieldMap;options.orientation==HORIZONTAL?(fieldMap.sizeField="width",fieldMap.groupsSizeField="height",fieldMap.groupAxis="x",fieldMap.groupsAxis="y"):(fieldMap.sizeField="height",fieldMap.groupsSizeField="width",fieldMap.groupAxis="y",fieldMap.groupsAxis="x")},reflow:function(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var elementStart,bbox,element,group,groupBox,options=this.options,fieldMap=this._fieldMap,rect=this._rect,groupOptions=this._initGroups(),groups=groupOptions.groups,groupsSize=groupOptions.groupsSize,sizeField=fieldMap.sizeField,groupsSizeField=fieldMap.groupsSizeField,groupAxis=fieldMap.groupAxis,groupsAxis=fieldMap.groupsAxis,groupStart=alignStart(groupsSize,rect,options.alignContent,groupsAxis,groupsSizeField),groupOrigin=new Point,elementOrigin=new Point,size=new g.Size,groupIdx=0;groupIdx<groups.length;groupIdx++){group=groups[groupIdx],groupOrigin[groupAxis]=elementStart=alignStart(group.size,rect,options.justifyContent,groupAxis,sizeField),groupOrigin[groupsAxis]=groupStart,size[sizeField]=group.size,size[groupsSizeField]=group.lineSize,groupBox=new g.Rect(groupOrigin,size);for(var idx=0;idx<group.bboxes.length;idx++)element=group.elements[idx],bbox=group.bboxes[idx],elementOrigin[groupAxis]=elementStart,elementOrigin[groupsAxis]=alignStart(bbox.size[groupsSizeField],groupBox,options.alignItems,groupsAxis,groupsSizeField),translateToPoint(elementOrigin,bbox,element),elementStart+=bbox.size[sizeField]+options.spacing;groupStart+=group.lineSize+options.lineSpacing}if(!options.wrap&&group.size>rect.size[sizeField]){var scale=rect.size[sizeField]/groupBox.size[sizeField],scaledStart=groupBox.topLeft().scale(scale,scale),scaledSize=groupBox.size[groupsSizeField]*scale,newStart=alignStart(scaledSize,rect,options.alignContent,groupsAxis,groupsSizeField),transform=g.transform();"x"===groupAxis?transform.translate(rect.origin.x-scaledStart.x,newStart-scaledStart.y):transform.translate(newStart-scaledStart.x,rect.origin.y-scaledStart.y),transform.scale(scale,scale),this.transform(transform)}}},_initGroups:function(){for(var bbox,element,options=this.options,children=this.children,lineSpacing=options.lineSpacing,sizeField=this._fieldMap.sizeField,groupsSize=-lineSpacing,groups=[],group=this._newGroup(),addGroup=function(){groups.push(group),groupsSize+=group.lineSize+lineSpacing},idx=0;idx<children.length;idx++)element=children[idx],bbox=children[idx].clippedBBox(),element.visible()&&bbox&&(options.wrap&&group.size+bbox.size[sizeField]+options.spacing>this._rect.size[sizeField]?0===group.bboxes.length?(this._addToGroup(group,bbox,element),addGroup(),group=this._newGroup()):(addGroup(),group=this._newGroup(),this._addToGroup(group,bbox,element)):this._addToGroup(group,bbox,element));return group.bboxes.length&&addGroup(),{groups:groups,groupsSize:groupsSize}},_addToGroup:function(group,bbox,element){group.size+=bbox.size[this._fieldMap.sizeField]+this.options.spacing,group.lineSize=Math.max(bbox.size[this._fieldMap.groupsSizeField],group.lineSize),group.bboxes.push(bbox),group.elements.push(element)},_newGroup:function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}});deepExtend(drawing,{align:align,Arc:Arc,Circle:Circle,Element:Element,ElementsArray:ElementsArray,fit:fit,Gradient:Gradient,GradientStop:GradientStop,Group:Group,Image:Image,Layout:Layout,LinearGradient:LinearGradient,MultiPath:MultiPath,Path:Path,RadialGradient:RadialGradient,Rect:Rect,Segment:Segment,stack:stack,Text:Text,vAlign:vAlign,vStack:vStack,vWrap:vWrap,wrap:wrap})}(window.kendo.jQuery)}(),function(){!function($){function parseParameters(str){var parameters=[];return str.replace(SPLIT_REGEX,function(match,number){parameters.push(parseFloat(number))}),parameters}function toLineParamaters(parameters,isVertical,value){for(var insertPosition=isVertical?0:1,i=0;i<parameters.length;i+=2)parameters.splice(i+insertPosition,0,value)}function reflectionPoint(point,center){return point&&center?center.scaleCopy(2).translate(-point.x,-point.y):void 0}function quadraticToCubicControlPoints(position,controlPoint,endPoint){var third=1/3;return controlPoint=controlPoint.clone().scale(2/3),{controlOut:controlPoint.clone().translateWith(position.scaleCopy(third)),controlIn:controlPoint.translateWith(endPoint.scaleCopy(third))}}var kendo=window.kendo,drawing=kendo.drawing,geometry=kendo.geometry,Class=kendo.Class,Point=geometry.Point,deepExtend=kendo.deepExtend,trim=$.trim,util=kendo.util,last=util.last,SEGMENT_REGEX=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,SPLIT_REGEX=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g,MOVE="m",CLOSE="z",PathParser=Class.extend({parse:function(str,options){var previousCommand,multiPath=new drawing.MultiPath(options),position=new Point;return str.replace(SEGMENT_REGEX,function(match,element,params,closePath){var command=element.toLowerCase(),isRelative=command===element,parameters=parseParameters(trim(params));if(command===MOVE&&(isRelative?(position.x+=parameters[0],position.y+=parameters[1]):(position.x=parameters[0],position.y=parameters[1]),multiPath.moveTo(position.x,position.y),parameters.length>2&&(command="l",parameters.splice(0,2))),ShapeMap[command])ShapeMap[command](multiPath,{parameters:parameters,position:position,isRelative:isRelative,previousCommand:previousCommand}),closePath&&closePath.toLowerCase()===CLOSE&&multiPath.close();else if(command!==MOVE)throw new Error("Error while parsing SVG path. Unsupported command: "+command);previousCommand=command}),multiPath}}),ShapeMap={l:function(path,options){for(var parameters=options.parameters,position=options.position,i=0;i<parameters.length;i+=2){var point=new Point(parameters[i],parameters[i+1]);options.isRelative&&point.translateWith(position),path.lineTo(point.x,point.y),position.x=point.x,position.y=point.y}},c:function(path,options){for(var controlOut,controlIn,point,parameters=options.parameters,position=options.position,i=0;i<parameters.length;i+=6)controlOut=new Point(parameters[i],parameters[i+1]),controlIn=new Point(parameters[i+2],parameters[i+3]),point=new Point(parameters[i+4],parameters[i+5]),options.isRelative&&(controlIn.translateWith(position),controlOut.translateWith(position),point.translateWith(position)),path.curveTo(controlOut,controlIn,point),position.x=point.x,position.y=point.y},v:function(path,options){var value=options.isRelative?0:options.position.x;toLineParamaters(options.parameters,!0,value),this.l(path,options)},h:function(path,options){var value=options.isRelative?0:options.position.y;toLineParamaters(options.parameters,!1,value),this.l(path,options)},a:function(path,options){for(var parameters=options.parameters,position=options.position,i=0;i<parameters.length;i+=7){var radiusX=parameters[i],radiusY=parameters[i+1],largeArc=parameters[i+3],swipe=parameters[i+4],endPoint=new Point(parameters[i+5],parameters[i+6]);options.isRelative&&endPoint.translateWith(position),path.arcTo(endPoint,radiusX,radiusY,largeArc,swipe),position.x=endPoint.x,position.y=endPoint.y}},s:function(path,options){var controlOut,endPoint,controlIn,lastControlIn,parameters=options.parameters,position=options.position,previousCommand=options.previousCommand;("s"==previousCommand||"c"==previousCommand)&&(lastControlIn=last(last(path.paths).segments).controlIn());for(var i=0;i<parameters.length;i+=4)controlIn=new Point(parameters[i],parameters[i+1]),endPoint=new Point(parameters[i+2],parameters[i+3]),options.isRelative&&(controlIn.translateWith(position),endPoint.translateWith(position)),controlOut=lastControlIn?reflectionPoint(lastControlIn,position):position.clone(),lastControlIn=controlIn,path.curveTo(controlOut,controlIn,endPoint),position.x=endPoint.x,position.y=endPoint.y},q:function(path,options){for(var cubicControlPoints,endPoint,controlPoint,parameters=options.parameters,position=options.position,i=0;i<parameters.length;i+=4)controlPoint=new Point(parameters[i],parameters[i+1]),endPoint=new Point(parameters[i+2],parameters[i+3]),options.isRelative&&(controlPoint.translateWith(position),endPoint.translateWith(position)),cubicControlPoints=quadraticToCubicControlPoints(position,controlPoint,endPoint),path.curveTo(cubicControlPoints.controlOut,cubicControlPoints.controlIn,endPoint),position.x=endPoint.x,position.y=endPoint.y},t:function(path,options){var cubicControlPoints,controlPoint,endPoint,parameters=options.parameters,position=options.position,previousCommand=options.previousCommand;if("q"==previousCommand||"t"==previousCommand){var lastSegment=last(last(path.paths).segments);controlPoint=lastSegment.controlIn().clone().translateWith(position.scaleCopy(-1/3)).scale(1.5)}for(var i=0;i<parameters.length;i+=2)endPoint=new Point(parameters[i],parameters[i+1]),options.isRelative&&endPoint.translateWith(position),controlPoint=controlPoint?reflectionPoint(controlPoint,position):position.clone(),
cubicControlPoints=quadraticToCubicControlPoints(position,controlPoint,endPoint),path.curveTo(cubicControlPoints.controlOut,cubicControlPoints.controlIn,endPoint),position.x=endPoint.x,position.y=endPoint.y}};PathParser.current=new PathParser,drawing.Path.parse=function(str,options){return PathParser.current.parse(str,options)},deepExtend(drawing,{PathParser:PathParser})}(window.kendo.jQuery)}(),function(){!function($){function alignToScreen(element){var ctm;try{ctm=element.getScreenCTM?element.getScreenCTM():null}catch(e){}if(ctm){var left=-ctm.e%1,top=-ctm.f%1,style=element.style;(0!==left||0!==top)&&(style.left=left+"px",style.top=top+"px")}}function baseUrl(){var base=document.getElementsByTagName("base")[0],url="",href=document.location.href,hashIndex=href.indexOf("#");return base&&!kendo.support.browser.msie&&(-1!==hashIndex&&(href=href.substring(0,hashIndex)),url=href),url}function refUrl(id){return"url("+baseUrl()+"#"+id+")"}function exportGroup(group){var root=new RootNode({encodeText:!0}),bbox=group.clippedBBox();if(bbox){var origin=bbox.getOrigin(),exportRoot=new d.Group;exportRoot.transform(g.transform().translate(-origin.x,-origin.y)),exportRoot.children.push(group),group=exportRoot}root.load([group]);var svg="<?xml version='1.0' ?><svg xmlns='"+SVG_NS+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+root.render()+"</svg>";return root.destroy(),svg}function exportSVG(group,options){var svg=exportGroup(group);return options&&options.raw||(svg="data:image/svg+xml;base64,"+util.encodeBase64(svg)),$.Deferred().resolve(svg).promise()}function isDefinition(type,value){return"clip"==type||"fill"==type&&(!value||value.nodeType==GRADIENT)}function decodeEntities(text){if(!text||!text.indexOf||text.indexOf("&")<0)return text;var element=decodeEntities._element;return element.innerHTML=text,element.textContent||element.innerText}var doc=document,kendo=window.kendo,deepExtend=kendo.deepExtend,g=kendo.geometry,d=kendo.drawing,BaseNode=d.BaseNode,util=kendo.util,defined=util.defined,isTransparent=util.isTransparent,renderAttr=util.renderAttr,renderAllAttr=util.renderAllAttr,renderTemplate=util.renderTemplate,inArray=$.inArray,BUTT="butt",DASH_ARRAYS=d.DASH_ARRAYS,GRADIENT="gradient",NONE="none",NS=".kendo",SOLID="solid",SPACE=" ",SVG_NS="http://www.w3.org/2000/svg",TRANSFORM="transform",UNDEFINED="undefined",Surface=d.Surface.extend({init:function(element,options){d.Surface.fn.init.call(this,element,options),this._root=new RootNode(this.options),renderSVG(this.element[0],this._template(this)),this._rootElement=this.element[0].firstElementChild,alignToScreen(this._rootElement),this._root.attachTo(this._rootElement),this.element.on("click"+NS,this._click),this.element.on("mouseover"+NS,this._mouseenter),this.element.on("mouseout"+NS,this._mouseleave),this.resize()},type:"svg",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,this.element.off(NS)),d.Surface.fn.destroy.call(this)},translate:function(offset){var viewBox=kendo.format("{0} {1} {2} {3}",Math.round(offset.x),Math.round(offset.y),this._size.width,this._size.height);this._offset=offset,this._rootElement.setAttribute("viewBox",viewBox)},draw:function(element){d.Surface.fn.draw.call(this,element),this._root.load([element])},clear:function(){d.Surface.fn.clear.call(this),this._root.clear()},svg:function(){return"<?xml version='1.0' ?>"+this._template(this)},exportVisual:function(){var visual=this._visual,offset=this._offset;if(offset){var wrap=new d.Group;wrap.children.push(visual),wrap.transform(g.transform().translate(-offset.x,-offset.y)),visual=wrap}return visual},_resize:function(){this._offset&&this.translate(this._offset)},_template:renderTemplate("<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='"+SVG_NS+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>#= d._root.render() #</svg>")}),Node=BaseNode.extend({init:function(srcElement){BaseNode.fn.init.call(this,srcElement),this.definitions={}},destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),BaseNode.fn.destroy.call(this)},load:function(elements,pos){var childNode,srcElement,children,i,node=this,element=node.element;for(i=0;i<elements.length;i++)srcElement=elements[i],children=srcElement.children,childNode=new nodeMap[srcElement.nodeType](srcElement),defined(pos)?node.insertAt(childNode,pos):node.append(childNode),childNode.createDefinitions(),children&&children.length>0&&childNode.load(children),element&&childNode.attachTo(element,pos)},root:function(){for(var root=this;root.parent;)root=root.parent;return root},attachTo:function(domElement,pos){var container=doc.createElement("div");renderSVG(container,"<svg xmlns='"+SVG_NS+"' version='1.1'>"+this.render()+"</svg>");var element=container.firstChild.firstChild;element&&(defined(pos)?domElement.insertBefore(element,domElement.childNodes[pos]||null):domElement.appendChild(element),this.setElement(element))},setElement:function(element){var childElement,i,nodes=this.childNodes;for(this.element&&(this.element._kendoNode=null),this.element=element,this.element._kendoNode=this,i=0;i<nodes.length;i++)childElement=element.childNodes[i],nodes[i].setElement(childElement)},clear:function(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");for(var children=this.childNodes,i=0;i<children.length;i++)children[i].destroy();this.childNodes=[]},removeSelf:function(){if(this.element){var parentNode=this.element.parentNode;parentNode&&parentNode.removeChild(this.element),this.element=null}BaseNode.fn.removeSelf.call(this)},template:renderTemplate("#= d.renderChildren() #"),render:function(){return this.template(this)},renderChildren:function(){var i,nodes=this.childNodes,output="";for(i=0;i<nodes.length;i++)output+=nodes[i].render();return output},optionsChange:function(e){var field=e.field,value=e.value;"visible"===field?this.css("display",value?"":NONE):DefinitionMap[field]&&isDefinition(field,value)?this.updateDefinition(field,value):"opacity"===field&&this.attr("opacity",value),BaseNode.fn.optionsChange.call(this,e)},attr:function(name,value){this.element&&this.element.setAttribute(name,value)},allAttr:function(attrs){for(var i=0;i<attrs.length;i++)this.attr(attrs[i][0],attrs[i][1])},css:function(name,value){this.element&&(this.element.style[name]=value)},allCss:function(styles){for(var i=0;i<styles.length;i++)this.css(styles[i][0],styles[i][1])},removeAttr:function(name){this.element&&this.element.removeAttribute(name)},mapTransform:function(transform){var attrs=[];return transform&&attrs.push([TRANSFORM,"matrix("+transform.matrix().toString(6)+")"]),attrs},renderTransform:function(){return renderAllAttr(this.mapTransform(this.srcElement.transform()))},transformChange:function(value){value?this.allAttr(this.mapTransform(value)):this.removeAttr(TRANSFORM)},mapStyle:function(){var options=this.srcElement.options,style=[["cursor",options.cursor]];return options.visible===!1&&style.push(["display",NONE]),style},renderStyle:function(){return renderAttr("style",util.renderStyle(this.mapStyle()))},renderOpacity:function(){return renderAttr("opacity",this.srcElement.options.opacity)},createDefinitions:function(){var definition,field,options,hasDefinitions,srcElement=this.srcElement,definitions=this.definitions;if(srcElement){options=srcElement.options;for(field in DefinitionMap)definition=options.get(field),definition&&isDefinition(field,definition)&&(definitions[field]=definition,hasDefinitions=!0);hasDefinitions&&this.definitionChange({action:"add",definitions:definitions})}},definitionChange:function(e){this.parent&&this.parent.definitionChange(e)},updateDefinition:function(type,value){var definitions=this.definitions,current=definitions[type],attr=DefinitionMap[type],definition={};current&&(definition[type]=current,this.definitionChange({action:"remove",definitions:definition}),delete definitions[type]),value?(definition[type]=value,this.definitionChange({action:"add",definitions:definition}),definitions[type]=value,this.attr(attr,refUrl(value.id))):current&&this.removeAttr(attr)},clearDefinitions:function(){var field,definitions=this.definitions;for(field in definitions){this.definitionChange({action:"remove",definitions:definitions}),this.definitions={};break}},renderDefinitions:function(){return renderAllAttr(this.mapDefinitions())},mapDefinitions:function(){var field,definitions=this.definitions,attrs=[];for(field in definitions)attrs.push([DefinitionMap[field],refUrl(definitions[field].id)]);return attrs}}),RootNode=Node.extend({init:function(options){Node.fn.init.call(this),this.options=options,this.defs=new DefinitionNode},attachTo:function(domElement){this.element=domElement,this.defs.attachTo(domElement.firstElementChild)},clear:function(){BaseNode.fn.clear.call(this)},template:renderTemplate("#=d.defs.render()##= d.renderChildren() #"),definitionChange:function(e){this.defs.definitionChange(e)}}),DefinitionNode=Node.extend({init:function(){Node.fn.init.call(this),this.definitionMap={}},attachTo:function(domElement){this.element=domElement},template:renderTemplate("<defs>#= d.renderChildren()#</defs>"),definitionChange:function(e){var definitions=e.definitions,action=e.action;"add"==action?this.addDefinitions(definitions):"remove"==action&&this.removeDefinitions(definitions)},createDefinition:function(type,item){var nodeType;return"clip"==type?nodeType=ClipNode:"fill"==type&&(item instanceof d.LinearGradient?nodeType=LinearGradientNode:item instanceof d.RadialGradient&&(nodeType=RadialGradientNode)),new nodeType(item)},addDefinitions:function(definitions){for(var field in definitions)this.addDefinition(field,definitions[field])},addDefinition:function(type,srcElement){var node,mapItem,definitionMap=this.definitionMap,id=srcElement.id,element=this.element;mapItem=definitionMap[id],mapItem?mapItem.count++:(node=this.createDefinition(type,srcElement),definitionMap[id]={element:node,count:1},this.append(node),element&&node.attachTo(this.element))},removeDefinitions:function(definitions){for(var field in definitions)this.removeDefinition(definitions[field])},removeDefinition:function(srcElement){var mapItem,definitionMap=this.definitionMap,id=srcElement.id;mapItem=definitionMap[id],mapItem&&(mapItem.count--,0===mapItem.count&&(this.remove(inArray(mapItem.element,this.childNodes),1),delete definitionMap[id]))}}),ClipNode=Node.extend({init:function(srcElement){Node.fn.init.call(this),this.srcElement=srcElement,this.id=srcElement.id,this.load([srcElement])},template:renderTemplate("<clipPath id='#=d.id#'>#= d.renderChildren()#</clipPath>")}),GroupNode=Node.extend({template:renderTemplate("<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>"),optionsChange:function(e){e.field==TRANSFORM&&this.transformChange(e.value),Node.fn.optionsChange.call(this,e)}}),PathNode=Node.extend({geometryChange:function(){this.attr("d",this.renderData()),this.invalidate()},optionsChange:function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case TRANSFORM:this.transformChange(e.value);break;default:var name=this.attributeMap[e.field];name&&this.attr(name,e.value)}Node.fn.optionsChange.call(this,e)},attributeMap:{"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},content:function(){this.element&&(this.element.textContent=this.srcElement.content())},renderData:function(){return this.printPath(this.srcElement)},printPath:function(path){var segments=path.segments,length=segments.length;if(length>0){var output,segmentType,currentType,i,parts=[];for(i=1;length>i;i++)segmentType=this.segmentType(segments[i-1],segments[i]),segmentType!==currentType&&(currentType=segmentType,parts.push(segmentType)),parts.push("L"===segmentType?this.printPoints(segments[i].anchor()):this.printPoints(segments[i-1].controlOut(),segments[i].controlIn(),segments[i].anchor()));return output="M"+this.printPoints(segments[0].anchor())+SPACE+parts.join(SPACE),path.options.closed&&(output+="Z"),output}},printPoints:function(){var i,points=arguments,length=points.length,result=[];for(i=0;length>i;i++)result.push(points[i].toString(3));return result.join(SPACE)},segmentType:function(segmentStart,segmentEnd){return segmentStart.controlOut()&&segmentEnd.controlIn()?"C":"L"},mapStroke:function(stroke){var attrs=[];return stroke&&!isTransparent(stroke.color)?(attrs.push(["stroke",stroke.color]),attrs.push(["stroke-width",stroke.width]),attrs.push(["stroke-linecap",this.renderLinecap(stroke)]),attrs.push(["stroke-linejoin",stroke.lineJoin]),defined(stroke.opacity)&&attrs.push(["stroke-opacity",stroke.opacity]),defined(stroke.dashType)&&attrs.push(["stroke-dasharray",this.renderDashType(stroke)])):attrs.push(["stroke",NONE]),attrs},renderStroke:function(){return renderAllAttr(this.mapStroke(this.srcElement.options.stroke))},renderDashType:function(stroke){var width=stroke.width||1,dashType=stroke.dashType;if(dashType&&dashType!=SOLID){var i,dashArray=DASH_ARRAYS[dashType.toLowerCase()],result=[];for(i=0;i<dashArray.length;i++)result.push(dashArray[i]*width);return result.join(" ")}},renderLinecap:function(stroke){var dashType=stroke.dashType,lineCap=stroke.lineCap;return dashType&&dashType!=SOLID?BUTT:lineCap},mapFill:function(fill){var attrs=[];return fill&&fill.nodeType==GRADIENT||(fill&&!isTransparent(fill.color)?(attrs.push(["fill",fill.color]),defined(fill.opacity)&&attrs.push(["fill-opacity",fill.opacity])):attrs.push(["fill",NONE])),attrs},renderFill:function(){return renderAllAttr(this.mapFill(this.srcElement.options.fill))},template:renderTemplate("<path #= d.renderStyle() # #= d.renderOpacity() # #= kendo.util.renderAttr('d', d.renderData()) # #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() #></path>")}),ArcNode=PathNode.extend({renderData:function(){return this.printPath(this.srcElement.toPath())}}),MultiPathNode=PathNode.extend({renderData:function(){var paths=this.srcElement.paths;if(paths.length>0){var i,result=[];for(i=0;i<paths.length;i++)result.push(this.printPath(paths[i]));return result.join(" ")}}}),CircleNode=PathNode.extend({geometryChange:function(){var center=this.center();this.attr("cx",center.x),this.attr("cy",center.y),this.attr("r",this.radius()),this.invalidate()},center:function(){return this.srcElement.geometry().center},radius:function(){return this.srcElement.geometry().radius},template:renderTemplate("<circle #= d.renderStyle() # #= d.renderOpacity() # cx='#= d.center().x #' cy='#= d.center().y #' r='#= d.radius() #' #= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # ></circle>")}),TextNode=PathNode.extend({geometryChange:function(){var pos=this.pos();this.attr("x",pos.x),this.attr("y",pos.y),this.invalidate()},optionsChange:function(e){"font"===e.field?(this.attr("style",util.renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&PathNode.fn.content.call(this,this.srcElement.content()),PathNode.fn.optionsChange.call(this,e)},mapStyle:function(){var style=PathNode.fn.mapStyle.call(this),font=this.srcElement.options.font;return style.push(["font",kendo.htmlEncode(font)]),style},pos:function(){var pos=this.srcElement.position(),size=this.srcElement.measure();return pos.clone().setY(pos.y+size.baseline)},content:function(){var content=this.srcElement.content(),options=this.root().options;return options&&options.encodeText&&(content=decodeEntities(content),content=kendo.htmlEncode(content)),content},template:renderTemplate("<text #= d.renderStyle() # #= d.renderOpacity() # x='#= this.pos().x #' y='#= this.pos().y #' #= d.renderStroke() # #= d.renderTransform() # #= d.renderDefinitions() # #= d.renderFill() #>#= d.content() #</text>")}),ImageNode=PathNode.extend({geometryChange:function(){this.allAttr(this.mapPosition()),this.invalidate()},optionsChange:function(e){"src"===e.field&&this.allAttr(this.mapSource()),PathNode.fn.optionsChange.call(this,e)},mapPosition:function(){var rect=this.srcElement.rect(),tl=rect.topLeft();return[["x",tl.x],["y",tl.y],["width",rect.width()+"px"],["height",rect.height()+"px"]]},renderPosition:function(){return renderAllAttr(this.mapPosition())},mapSource:function(){var src=kendo.htmlEncode(this.srcElement.src());return[["xlink:href",src]]},renderSource:function(){return renderAllAttr(this.mapSource())},template:renderTemplate("<image preserveAspectRatio='none' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # #= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#></image>")}),GradientStopNode=Node.extend({template:renderTemplate("<stop #=d.renderOffset()# #=d.renderStyle()# />"),renderOffset:function(){return renderAttr("offset",this.srcElement.offset())},mapStyle:function(){var srcElement=this.srcElement;return[["stop-color",srcElement.color()],["stop-opacity",srcElement.opacity()]]},optionsChange:function(e){"offset"==e.field?this.attr(e.field,e.value):("color"==e.field||"opacity"==e.field)&&this.css("stop-"+e.field,e.value)}}),GradientNode=Node.extend({init:function(srcElement){Node.fn.init.call(this,srcElement),this.id=srcElement.id,this.loadStops()},loadStops:function(){var stopNode,idx,srcElement=this.srcElement,stops=srcElement.stops,element=this.element;for(idx=0;idx<stops.length;idx++)stopNode=new GradientStopNode(stops[idx]),this.append(stopNode),element&&stopNode.attachTo(element)},optionsChange:function(e){"gradient.stops"==e.field?(BaseNode.fn.clear.call(this),this.loadStops()):e.field==GRADIENT&&this.allAttr(this.mapCoordinates())},renderCoordinates:function(){return renderAllAttr(this.mapCoordinates())},mapSpace:function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}),LinearGradientNode=GradientNode.extend({template:renderTemplate("<linearGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</linearGradient>"),mapCoordinates:function(){var srcElement=this.srcElement,start=srcElement.start(),end=srcElement.end(),attrs=[["x1",start.x],["y1",start.y],["x2",end.x],["y2",end.y],this.mapSpace()];return attrs}}),RadialGradientNode=GradientNode.extend({template:renderTemplate("<radialGradient id='#=d.id#' #=d.renderCoordinates()#>#= d.renderChildren()#</radialGradient>"),mapCoordinates:function(){var srcElement=this.srcElement,center=srcElement.center(),radius=srcElement.radius(),attrs=[["cx",center.x],["cy",center.y],["r",radius],this.mapSpace()];return attrs}}),RectNode=PathNode.extend({geometryChange:function(){var geometry=this.srcElement.geometry();this.attr("x",geometry.origin.x),this.attr("y",geometry.origin.y),this.attr("width",geometry.size.width),this.attr("height",geometry.size.height),this.invalidate()},size:function(){return this.srcElement.geometry().size},origin:function(){return this.srcElement.geometry().origin},template:renderTemplate("<rect #= d.renderStyle() # #= d.renderOpacity() # x='#= d.origin().x #' y='#= d.origin().y #' width='#= d.size().width #' height='#= d.size().height #'#= d.renderStroke() # #= d.renderFill() # #= d.renderDefinitions() # #= d.renderTransform() # />")}),nodeMap={Group:GroupNode,Text:TextNode,Path:PathNode,MultiPath:MultiPathNode,Circle:CircleNode,Arc:ArcNode,Image:ImageNode,Rect:RectNode},renderSVG=function(container,svg){container.innerHTML=svg};!function(){var testFragment="<svg xmlns='"+SVG_NS+"'></svg>",testContainer=doc.createElement("div"),hasParser=typeof DOMParser!=UNDEFINED;testContainer.innerHTML=testFragment,hasParser&&testContainer.firstChild.namespaceURI!=SVG_NS&&(renderSVG=function(container,svg){var parser=new DOMParser,chartDoc=parser.parseFromString(svg,"text/xml"),importedDoc=doc.adoptNode(chartDoc.documentElement);container.innerHTML="",container.appendChild(importedDoc)})}(),decodeEntities._element=document.createElement("span");var DefinitionMap={clip:"clip-path",fill:"fill"};kendo.support.svg=function(){return doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),kendo.support.svg&&d.SurfaceFactory.current.register("svg",Surface,10),deepExtend(d,{exportSVG:exportSVG,svg:{ArcNode:ArcNode,CircleNode:CircleNode,ClipNode:ClipNode,DefinitionNode:DefinitionNode,GradientStopNode:GradientStopNode,GroupNode:GroupNode,ImageNode:ImageNode,LinearGradientNode:LinearGradientNode,MultiPathNode:MultiPathNode,Node:Node,PathNode:PathNode,RadialGradientNode:RadialGradientNode,RectNode:RectNode,RootNode:RootNode,Surface:Surface,TextNode:TextNode,_exportGroup:exportGroup}})}(window.kendo.jQuery)}(),function(){!function($){function exportImage(group,options){var defaults={width:"800px",height:"600px",cors:"Anonymous"},bbox=group.clippedBBox();if(bbox){var origin=bbox.getOrigin(),exportRoot=new d.Group;exportRoot.transform(g.transform().translate(-origin.x,-origin.y)),exportRoot.children.push(group),group=exportRoot;var size=bbox.getSize();defaults.width=size.width+"px",defaults.height=size.height+"px"}options=deepExtend(defaults,options);var container=$("<div />").css({display:"none",width:options.width,height:options.height}).appendTo(document.body),surface=new Surface(container,options);surface.draw(group);var promise=surface.image();return promise.always(function(){surface.destroy(),container.remove()}),promise}function addGradientStops(gradient,stops){var color,stop,idx;for(idx=0;idx<stops.length;idx++)stop=stops[idx],color=kendo.parseColor(stop.color()),color.a*=stop.opacity(),gradient.addColorStop(stop.offset(),color.toCssRgba())}var doc=document,kendo=window.kendo,deepExtend=kendo.deepExtend,util=kendo.util,defined=util.defined,isTransparent=util.isTransparent,renderTemplate=util.renderTemplate,valueOrDefault=util.valueOrDefault,g=kendo.geometry,d=kendo.drawing,BaseNode=d.BaseNode,BUTT="butt",DASH_ARRAYS=d.DASH_ARRAYS,FRAME_DELAY=1e3/60,SOLID="solid",Surface=d.Surface.extend({init:function(element,options){d.Surface.fn.init.call(this,element,options),this.element[0].innerHTML=this._template(this);var canvas=this.element[0].firstElementChild;canvas.width=$(element).width(),canvas.height=$(element).height(),this._rootElement=canvas,this._root=new RootNode(canvas)},destroy:function(){d.Surface.fn.destroy.call(this),this._root&&(this._root.destroy(),this._root=null)},type:"canvas",draw:function(element){d.Surface.fn.draw.call(this,element),this._root.load([element],void 0,this.options.cors)},clear:function(){d.Surface.fn.clear.call(this),this._root.clear()},image:function(){var root=this._root,rootElement=this._rootElement,loadingStates=[];root.traverse(function(childNode){childNode.loading&&loadingStates.push(childNode.loading)});var defer=$.Deferred();return $.when.apply($,loadingStates).done(function(){root._invalidate();try{var data=rootElement.toDataURL();defer.resolve(data)}catch(e){defer.reject(e)}}).fail(function(e){defer.reject(e)}),defer.promise()},_resize:function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.invalidate()},_template:renderTemplate("<canvas style='width: 100%; height: 100%;'></canvas>")}),Node=BaseNode.extend({init:function(srcElement){BaseNode.fn.init.call(this,srcElement),srcElement&&this.initClip()},initClip:function(){var clip=this.srcElement.clip();clip&&(this.clip=clip,clip.addObserver(this))},clear:function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),BaseNode.fn.clear.call(this)},clearClip:function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},setClip:function(ctx){this.clip&&(ctx.beginPath(),PathNode.fn.renderPoints(ctx,this.clip),ctx.clip())},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip()),BaseNode.fn.optionsChange.call(this,e)},setTransform:function(ctx){if(this.srcElement){var transform=this.srcElement.transform();transform&&ctx.transform.apply(ctx,transform.matrix().toArray(6))}},load:function(elements,pos,cors){var childNode,srcElement,children,i,node=this;for(i=0;i<elements.length;i++)srcElement=elements[i],children=srcElement.children,childNode=new nodeMap[srcElement.nodeType](srcElement,cors),children&&children.length>0&&childNode.load(children,pos,cors),defined(pos)?node.insertAt(childNode,pos):node.append(childNode);node.invalidate()},setOpacity:function(ctx){if(this.srcElement){var opacity=this.srcElement.opacity();defined(opacity)&&this.globalAlpha(ctx,opacity)}},globalAlpha:function(ctx,value){value&&ctx.globalAlpha&&(value*=ctx.globalAlpha),ctx.globalAlpha=value},visible:function(){var src=this.srcElement;return!src||src&&src.options.visible!==!1}}),GroupNode=Node.extend({renderTo:function(ctx){if(this.visible()){ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.setOpacity(ctx);for(var childNodes=this.childNodes,i=0;i<childNodes.length;i++){var child=childNodes[i];child.visible()&&child.renderTo(ctx)}ctx.restore()}}});d.mixins.Traversable.extend(GroupNode.fn,"childNodes");var RootNode=GroupNode.extend({init:function(canvas){GroupNode.fn.init.call(this),this.canvas=canvas,this.ctx=canvas.getContext("2d");var invalidateHandler=$.proxy(this._invalidate,this);this.invalidate=kendo.throttle(function(){kendo.animationFrame(invalidateHandler)},FRAME_DELAY)},destroy:function(){GroupNode.fn.destroy.call(this),this.canvas=null,this.ctx=null},_invalidate:function(){this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}});d.mixins.Traversable.extend(RootNode.fn,"childNodes");var PathNode=Node.extend({renderTo:function(ctx){ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.setOpacity(ctx),ctx.beginPath(),this.renderPoints(ctx,this.srcElement),this.setLineDash(ctx),this.setLineCap(ctx),this.setLineJoin(ctx),this.setFill(ctx),this.setStroke(ctx),ctx.restore()},setFill:function(ctx){var fill=this.srcElement.options.fill,hasFill=!1;return fill&&("gradient"==fill.nodeType?(this.setGradientFill(ctx,fill),hasFill=!0):isTransparent(fill.color)||(ctx.fillStyle=fill.color,ctx.save(),this.globalAlpha(ctx,fill.opacity),ctx.fill(),ctx.restore(),hasFill=!0)),hasFill},setGradientFill:function(ctx,fill){var gradient,bbox=this.srcElement.rawBBox();if(fill instanceof d.LinearGradient){var start=fill.start(),end=fill.end();gradient=ctx.createLinearGradient(start.x,start.y,end.x,end.y)}else if(fill instanceof d.RadialGradient){var center=fill.center();gradient=ctx.createRadialGradient(center.x,center.y,0,center.x,center.y,fill.radius())}addGradientStops(gradient,fill.stops),ctx.save(),fill.userSpace()||ctx.transform(bbox.width(),0,0,bbox.height(),bbox.origin.x,bbox.origin.y),ctx.fillStyle=gradient,ctx.fill(),ctx.restore()},setStroke:function(ctx){var stroke=this.srcElement.options.stroke;return stroke&&!isTransparent(stroke.color)&&stroke.width>0?(ctx.strokeStyle=stroke.color,ctx.lineWidth=valueOrDefault(stroke.width,1),ctx.save(),this.globalAlpha(ctx,stroke.opacity),ctx.stroke(),ctx.restore(),!0):void 0},dashType:function(){var stroke=this.srcElement.options.stroke;return stroke&&stroke.dashType?stroke.dashType.toLowerCase():void 0},setLineDash:function(ctx){var dashType=this.dashType();if(dashType&&dashType!=SOLID){var dashArray=DASH_ARRAYS[dashType];ctx.setLineDash?ctx.setLineDash(dashArray):(ctx.mozDash=dashArray,ctx.webkitLineDash=dashArray)}},setLineCap:function(ctx){var dashType=this.dashType(),stroke=this.srcElement.options.stroke;dashType&&dashType!==SOLID?ctx.lineCap=BUTT:stroke&&stroke.lineCap&&(ctx.lineCap=stroke.lineCap)},setLineJoin:function(ctx){var stroke=this.srcElement.options.stroke;stroke&&stroke.lineJoin&&(ctx.lineJoin=stroke.lineJoin)},renderPoints:function(ctx,path){var segments=path.segments;if(0!==segments.length){var seg=segments[0],anchor=seg.anchor();ctx.moveTo(anchor.x,anchor.y);for(var i=1;i<segments.length;i++){seg=segments[i],anchor=seg.anchor();var prevSeg=segments[i-1],prevOut=prevSeg.controlOut(),controlIn=seg.controlIn();prevOut&&controlIn?ctx.bezierCurveTo(prevOut.x,prevOut.y,controlIn.x,controlIn.y,anchor.x,anchor.y):ctx.lineTo(anchor.x,anchor.y)}path.options.closed&&ctx.closePath()}}}),MultiPathNode=PathNode.extend({renderPoints:function(ctx){for(var paths=this.srcElement.paths,i=0;i<paths.length;i++)PathNode.fn.renderPoints(ctx,paths[i])}}),CircleNode=PathNode.extend({renderPoints:function(ctx){var geometry=this.srcElement.geometry(),c=geometry.center,r=geometry.radius;ctx.arc(c.x,c.y,r,0,2*Math.PI)}}),ArcNode=PathNode.extend({renderPoints:function(ctx){var path=this.srcElement.toPath();PathNode.fn.renderPoints.call(this,ctx,path)}}),TextNode=PathNode.extend({renderTo:function(ctx){var text=this.srcElement,pos=text.position(),size=text.measure();ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.setOpacity(ctx),ctx.beginPath(),ctx.font=text.options.font,this.setFill(ctx)&&ctx.fillText(text.content(),pos.x,pos.y+size.baseline),this.setStroke(ctx)&&(this.setLineDash(ctx),ctx.strokeText(text.content(),pos.x,pos.y+size.baseline)),ctx.restore()}}),ImageNode=PathNode.extend({init:function(srcElement,cors){PathNode.fn.init.call(this,srcElement),this.onLoad=$.proxy(this.onLoad,this),this.onError=$.proxy(this.onError,this),this.loading=$.Deferred();var img=this.img=new Image;cors&&!/^data:/i.test(srcElement.src())&&(img.crossOrigin=cors),img.src=srcElement.src(),img.complete?this.onLoad():(img.onload=this.onLoad,img.onerror=this.onError)},renderTo:function(ctx){"resolved"===this.loading.state()&&(ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.drawImage(ctx),ctx.restore())},optionsChange:function(e){"src"===e.field?(this.loading=$.Deferred(),this.img.src=this.srcElement.src()):PathNode.fn.optionsChange.call(this,e)},onLoad:function(){this.loading.resolve(),this.invalidate()},onError:function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},drawImage:function(ctx){var rect=this.srcElement.rect(),tl=rect.topLeft();ctx.drawImage(this.img,tl.x,tl.y,rect.width(),rect.height())}}),RectNode=PathNode.extend({renderPoints:function(ctx){var geometry=this.srcElement.geometry(),origin=geometry.origin,size=geometry.size;ctx.rect(origin.x,origin.y,size.width,size.height)}}),nodeMap={Group:GroupNode,Text:TextNode,Path:PathNode,MultiPath:MultiPathNode,Circle:CircleNode,Arc:ArcNode,Image:ImageNode,Rect:RectNode};kendo.support.canvas=function(){return!!doc.createElement("canvas").getContext}(),kendo.support.canvas&&d.SurfaceFactory.current.register("canvas",Surface,20),deepExtend(kendo.drawing,{exportImage:exportImage,canvas:{ArcNode:ArcNode,CircleNode:CircleNode,GroupNode:GroupNode,ImageNode:ImageNode,MultiPathNode:MultiPathNode,Node:Node,PathNode:PathNode,RectNode:RectNode,RootNode:RootNode,Surface:Surface,TextNode:TextNode}})}(window.kendo.jQuery)}(),function(){!function($){function enableVML(){if(doc.namespaces&&!doc.namespaces.kvml){doc.namespaces.add("kvml","urn:schemas-microsoft-com:vml");var stylesheet=doc.styleSheets.length>30?doc.styleSheets[0]:doc.createStyleSheet();stylesheet.addRule(".kvml","behavior:url(#default#VML)")}}function createElementVML(type){var element=doc.createElement("kvml:"+type);return element.className="kvml",element}function printPoints(points){for(var length=points.length,result=[],i=0;length>i;i++)result.push(points[i].scaleCopy(COORDINATE_MULTIPLE).toString(0,","));return result.join(" ")}function printPath(path,open){var segments=path.segments,length=segments.length;if(length>0){var output,type,currentType,i,parts=[];for(i=1;length>i;i++)type=segmentType(segments[i-1],segments[i]),type!==currentType&&(currentType=type,parts.push(type)),parts.push("l"===type?printPoints([segments[i].anchor()]):printPoints([segments[i-1].controlOut(),segments[i].controlIn(),segments[i].anchor()]));return output="m "+printPoints([segments[0].anchor()])+" "+parts.join(" "),
path.options.closed&&(output+=" x"),open!==!0&&(output+=" e"),output}}function segmentType(segmentStart,segmentEnd){return segmentStart.controlOut()&&segmentEnd.controlIn()?"c":"l"}function fillField(field){return 0===field.indexOf("fill")||0===field.indexOf(GRADIENT)}function stopColor(baseColor,stop,baseOpacity){var color,opacity=baseOpacity*valueOrDefault(stop.opacity(),1);return color=baseColor?blendColors(baseColor,stop.color(),opacity):blendColors(stop.color(),"#fff",1-opacity)}function blendColors(base,overlay,alpha){var baseColor=new Color(base),overlayColor=new Color(overlay),r=blendChannel(baseColor.r,overlayColor.r,alpha),g=blendChannel(baseColor.g,overlayColor.g,alpha),b=blendChannel(baseColor.b,overlayColor.b,alpha);return new Color(r,g,b).toHex()}function blendChannel(a,b,alpha){return math.round(alpha*b+(1-alpha)*a)}var doc=document,math=Math,atan2=math.atan2,ceil=math.ceil,sqrt=math.sqrt,kendo=window.kendo,deepExtend=kendo.deepExtend,noop=$.noop,d=kendo.drawing,BaseNode=d.BaseNode,g=kendo.geometry,toMatrix=g.toMatrix,Color=kendo.Color,util=kendo.util,isTransparent=util.isTransparent,defined=util.defined,deg=util.deg,round=util.round,valueOrDefault=util.valueOrDefault,NONE="none",NS=".kendo",COORDINATE_MULTIPLE=100,COORDINATE_SIZE=COORDINATE_MULTIPLE*COORDINATE_MULTIPLE,GRADIENT="gradient",TRANSFORM_PRECISION=4,Surface=d.Surface.extend({init:function(element,options){d.Surface.fn.init.call(this,element,options),enableVML(),this.element.empty(),this._root=new RootNode,this._root.attachTo(this.element[0]),this.element.on("click"+NS,this._click),this.element.on("mouseover"+NS,this._mouseenter),this.element.on("mouseout"+NS,this._mouseleave)},type:"vml",destroy:function(){this._root&&(this._root.destroy(),this._root=null,this.element.off(NS)),d.Surface.fn.destroy.call(this)},draw:function(element){d.Surface.fn.draw.call(this,element),this._root.load([element],void 0,null)},clear:function(){d.Surface.fn.clear.call(this),this._root.clear()}}),Node=BaseNode.extend({init:function(srcElement){BaseNode.fn.init.call(this,srcElement),this.createElement(),this.attachReference()},observe:noop,destroy:function(){this.element&&(this.element._kendoNode=null,this.element=null),BaseNode.fn.destroy.call(this)},clear:function(){this.element&&(this.element.innerHTML="");for(var children=this.childNodes,i=0;i<children.length;i++)children[i].destroy();this.childNodes=[]},removeSelf:function(){this.element&&(this.element.parentNode.removeChild(this.element),this.element=null),BaseNode.fn.removeSelf.call(this)},createElement:function(){this.element=doc.createElement("div")},attachReference:function(){this.element._kendoNode=this},load:function(elements,pos,transform,opacity){opacity=valueOrDefault(opacity,1),this.srcElement&&(opacity*=valueOrDefault(this.srcElement.options.opacity,1));for(var i=0;i<elements.length;i++){var srcElement=elements[i],children=srcElement.children,combinedTransform=srcElement.currentTransform(transform),currentOpacity=opacity*valueOrDefault(srcElement.options.opacity,1),childNode=new nodeMap[srcElement.nodeType](srcElement,combinedTransform,currentOpacity);children&&children.length>0&&childNode.load(children,pos,combinedTransform,opacity),defined(pos)?this.insertAt(childNode,pos):this.append(childNode),childNode.attachTo(this.element,pos)}},attachTo:function(domElement,pos){defined(pos)?domElement.insertBefore(this.element,domElement.children[pos]||null):domElement.appendChild(this.element)},optionsChange:function(e){"visible"==e.field&&this.css("display",e.value!==!1?"":NONE)},setStyle:function(){this.allCss(this.mapStyle())},mapStyle:function(){var style=[];return this.srcElement&&this.srcElement.options.visible===!1&&style.push(["display",NONE]),style},mapOpacityTo:function(attrs,multiplier){var opacity=valueOrDefault(this.opacity,1);opacity*=valueOrDefault(multiplier,1),attrs.push(["opacity",opacity])},attr:function(name,value){this.element&&(this.element[name]=value)},allAttr:function(attrs){for(var i=0;i<attrs.length;i++)this.attr(attrs[i][0],attrs[i][1])},css:function(name,value){this.element&&(this.element.style[name]=value)},allCss:function(styles){for(var i=0;i<styles.length;i++)this.css(styles[i][0],styles[i][1])}}),RootNode=Node.extend({createElement:function(){Node.fn.createElement.call(this),this.allCss([["width","100%"],["height","100%"],["position","relative"],["visibility","visible"]])},attachReference:noop}),ClipObserver=kendo.Class.extend({init:function(srcElement,observer){this.srcElement=srcElement,this.observer=observer,srcElement.addObserver(this)},geometryChange:function(){this.observer.optionsChange({field:"clip",value:this.srcElement})},clear:function(){this.srcElement.removeObserver(this)}}),ObserverNode=Node.extend({init:function(srcElement){Node.fn.init.call(this,srcElement),srcElement&&this.initClip()},observe:function(){BaseNode.fn.observe.call(this)},mapStyle:function(){var style=Node.fn.mapStyle.call(this);return this.srcElement&&this.srcElement.clip()&&style.push(["clip",this.clipRect()]),style},optionsChange:function(e){"clip"==e.field&&(this.clearClip(),this.initClip(),this.setClip()),Node.fn.optionsChange.call(this,e)},clear:function(){this.clearClip(),Node.fn.clear.call(this)},initClip:function(){this.srcElement.clip()&&(this.clip=new ClipObserver(this.srcElement.clip(),this),this.clip.observer=this)},clearClip:function(){this.clip&&(this.clip.clear(),this.clip=null,this.css("clip",this.clipRect()))},setClip:function(){this.clip&&this.css("clip",this.clipRect())},clipRect:function(){var clipRect=EMPTY_CLIP,clip=this.srcElement.clip();if(clip){var bbox=this.clipBBox(clip),topLeft=bbox.topLeft(),bottomRight=bbox.bottomRight();clipRect=kendo.format("rect({0}px {1}px {2}px {3}px)",topLeft.y,bottomRight.x,bottomRight.y,topLeft.x)}return clipRect},clipBBox:function(clip){var topLeft=this.srcElement.rawBBox().topLeft(),clipBBox=clip.rawBBox();return clipBBox.origin.translate(-topLeft.x,-topLeft.y),clipBBox}}),GroupNode=ObserverNode.extend({createElement:function(){Node.fn.createElement.call(this),this.setStyle()},attachTo:function(domElement,pos){this.css("display",NONE),Node.fn.attachTo.call(this,domElement,pos),this.srcElement.options.visible!==!1&&this.css("display","")},_attachTo:function(domElement){var frag=document.createDocumentFragment();frag.appendChild(this.element),domElement.appendChild(frag)},mapStyle:function(){var style=ObserverNode.fn.mapStyle.call(this);return style.push(["position","absolute"]),style.push(["white-space","nowrap"]),style},optionsChange:function(e){"transform"===e.field&&this.refreshTransform(),"opacity"===e.field&&this.refreshOpacity(),ObserverNode.fn.optionsChange.call(this,e)},refreshTransform:function(transform){var i,currentTransform=this.srcElement.currentTransform(transform),children=this.childNodes,length=children.length;for(this.setClip(),i=0;length>i;i++)children[i].refreshTransform(currentTransform)},currentOpacity:function(){var opacity=valueOrDefault(this.srcElement.options.opacity,1);return this.parent&&this.parent.currentOpacity&&(opacity*=this.parent.currentOpacity()),opacity},refreshOpacity:function(){var i,children=this.childNodes,length=children.length,opacity=this.currentOpacity();for(i=0;length>i;i++)children[i].refreshOpacity(opacity)},initClip:function(){if(ObserverNode.fn.initClip.call(this),this.clip){var bbox=this.clip.srcElement.bbox(this.srcElement.currentTransform());bbox&&(this.css("width",bbox.width()+bbox.origin.x),this.css("height",bbox.height()+bbox.origin.y))}},clipBBox:function(clip){return clip.bbox(this.srcElement.currentTransform())},clearClip:function(){ObserverNode.fn.clearClip.call(this)}}),StrokeNode=Node.extend({init:function(srcElement,opacity){this.opacity=opacity,Node.fn.init.call(this,srcElement)},createElement:function(){this.element=createElementVML("stroke"),this.setOpacity()},optionsChange:function(e){0===e.field.indexOf("stroke")&&this.setStroke()},refreshOpacity:function(opacity){this.opacity=opacity,this.setStroke()},setStroke:function(){this.allAttr(this.mapStroke())},setOpacity:function(){this.setStroke()},mapStroke:function(){var stroke=this.srcElement.options.stroke,attrs=[];if(stroke&&!isTransparent(stroke.color)&&0!==stroke.width){if(attrs.push(["on","true"]),attrs.push(["color",stroke.color]),attrs.push(["weight",(stroke.width||1)+"px"]),this.mapOpacityTo(attrs,stroke.opacity),defined(stroke.dashType)&&attrs.push(["dashstyle",stroke.dashType]),defined(stroke.lineJoin)&&attrs.push(["joinstyle",stroke.lineJoin]),defined(stroke.lineCap)){var lineCap=stroke.lineCap.toLowerCase();"butt"===lineCap&&(lineCap="butt"===lineCap?"flat":lineCap),attrs.push(["endcap",lineCap])}}else attrs.push(["on","false"]);return attrs}}),FillNode=Node.extend({init:function(srcElement,transform,opacity){this.opacity=opacity,Node.fn.init.call(this,srcElement)},createElement:function(){this.element=createElementVML("fill"),this.setFill()},optionsChange:function(e){fillField(e.field)&&this.setFill()},refreshOpacity:function(opacity){this.opacity=opacity,this.setOpacity()},setFill:function(){this.allAttr(this.mapFill())},setOpacity:function(){this.setFill()},attr:function(name,value){var element=this.element;if(element){for(var fields=name.split(".");fields.length>1;)element=element[fields.shift()];element[fields[0]]=value}},mapFill:function(){var fill=this.srcElement.fill(),attrs=[["on","false"]];return fill&&(fill.nodeType==GRADIENT?attrs=this.mapGradient(fill):isTransparent(fill.color)||(attrs=this.mapFillColor(fill))),attrs},mapFillColor:function(fill){var attrs=[["on","true"],["color",fill.color]];return this.mapOpacityTo(attrs,fill.opacity),attrs},mapGradient:function(fill){var attrs,options=this.srcElement.options,fallbackFill=options.fallbackFill||fill.fallbackFill&&fill.fallbackFill();return attrs=fill instanceof d.LinearGradient?this.mapLinearGradient(fill):fill instanceof d.RadialGradient&&fill.supportVML?this.mapRadialGradient(fill):fallbackFill?this.mapFillColor(fallbackFill):[["on","false"]]},mapLinearGradient:function(fill){var start=fill.start(),end=fill.end(),angle=util.deg(atan2(end.y-start.y,end.x-start.x)),attrs=[["on","true"],["type",GRADIENT],["focus",0],["method","none"],["angle",270-angle]];return this.addColors(attrs),attrs},mapRadialGradient:function(fill){var bbox=this.srcElement.rawBBox(),center=fill.center(),focusx=(center.x-bbox.origin.x)/bbox.width(),focusy=(center.y-bbox.origin.y)/bbox.height(),attrs=[["on","true"],["type","gradienttitle"],["focus","100%"],["focusposition",focusx+" "+focusy],["method","none"]];return this.addColors(attrs),attrs},addColors:function(attrs){for(var stop,options=this.srcElement.options,opacity=valueOrDefault(this.opacity,1),stopColors=[],stops=options.fill.stops,baseColor=options.baseColor,colorsField=this.element.colors?"colors.value":"colors",color=stopColor(baseColor,stops[0],opacity),color2=stopColor(baseColor,stops[stops.length-1],opacity),idx=0;idx<stops.length;idx++)stop=stops[idx],stopColors.push(math.round(100*stop.offset())+"% "+stopColor(baseColor,stop,opacity));attrs.push([colorsField,stopColors.join(",")],["color",color],["color2",color2])}}),TransformNode=Node.extend({init:function(srcElement,transform){this.transform=transform,Node.fn.init.call(this,srcElement)},createElement:function(){this.element=createElementVML("skew"),this.setTransform()},optionsChange:function(e){"transform"===e.field&&this.refresh(this.srcElement.currentTransform())},refresh:function(transform){this.transform=transform,this.setTransform()},transformOrigin:function(){return"-0.5,-0.5"},setTransform:function(){this.allAttr(this.mapTransform())},mapTransform:function(){var transform=this.transform,attrs=[],matrix=toMatrix(transform);return matrix?(matrix.round(TRANSFORM_PRECISION),attrs.push(["on","true"],["matrix",[matrix.a,matrix.c,matrix.b,matrix.d,0,0].join(",")],["offset",matrix.e+"px,"+matrix.f+"px"],["origin",this.transformOrigin()])):attrs.push(["on","false"]),attrs}}),ShapeNode=ObserverNode.extend({init:function(srcElement,transform,opacity){this.fill=this.createFillNode(srcElement,transform,opacity),this.stroke=new StrokeNode(srcElement,opacity),this.transform=this.createTransformNode(srcElement,transform),ObserverNode.fn.init.call(this,srcElement)},attachTo:function(domElement,pos){this.fill.attachTo(this.element),this.stroke.attachTo(this.element),this.transform.attachTo(this.element),Node.fn.attachTo.call(this,domElement,pos)},createFillNode:function(srcElement,transform,opacity){return new FillNode(srcElement,transform,opacity)},createTransformNode:function(srcElement,transform){return new TransformNode(srcElement,transform)},createElement:function(){this.element=createElementVML("shape"),this.setCoordsize(),this.setStyle()},optionsChange:function(e){fillField(e.field)?this.fill.optionsChange(e):0===e.field.indexOf("stroke")?this.stroke.optionsChange(e):"transform"===e.field?this.transform.optionsChange(e):"opacity"===e.field&&(this.fill.setOpacity(),this.stroke.setOpacity()),ObserverNode.fn.optionsChange.call(this,e)},refreshTransform:function(transform){this.transform.refresh(this.srcElement.currentTransform(transform))},refreshOpacity:function(opacity){opacity*=valueOrDefault(this.srcElement.options.opacity,1),this.fill.refreshOpacity(opacity),this.stroke.refreshOpacity(opacity)},mapStyle:function(width,height){var styles=ObserverNode.fn.mapStyle.call(this);width&&height||(width=height=COORDINATE_MULTIPLE),styles.push(["position","absolute"],["width",width+"px"],["height",height+"px"]);var cursor=this.srcElement.options.cursor;return cursor&&styles.push(["cursor",cursor]),styles},setCoordsize:function(){this.allAttr([["coordorigin","0 0"],["coordsize",COORDINATE_SIZE+" "+COORDINATE_SIZE]])}}),PathDataNode=Node.extend({createElement:function(){this.element=createElementVML("path"),this.setPathData()},geometryChange:function(){this.setPathData()},setPathData:function(){this.attr("v",this.renderData())},renderData:function(){return printPath(this.srcElement)}}),PathNode=ShapeNode.extend({init:function(srcElement,transform,opacity){this.pathData=this.createDataNode(srcElement),ShapeNode.fn.init.call(this,srcElement,transform,opacity)},attachTo:function(domElement,pos){this.pathData.attachTo(this.element),ShapeNode.fn.attachTo.call(this,domElement,pos)},createDataNode:function(srcElement){return new PathDataNode(srcElement)},geometryChange:function(){this.pathData.geometryChange(),ShapeNode.fn.geometryChange.call(this)}}),MultiPathDataNode=PathDataNode.extend({renderData:function(){var paths=this.srcElement.paths;if(paths.length>0){var i,open,result=[];for(i=0;i<paths.length;i++)open=i<paths.length-1,result.push(printPath(paths[i],open));return result.join(" ")}}}),MultiPathNode=PathNode.extend({createDataNode:function(srcElement){return new MultiPathDataNode(srcElement)}}),CircleTransformNode=TransformNode.extend({transformOrigin:function(){var boundingBox=this.srcElement.geometry().bbox(),center=boundingBox.center(),originX=-ceil(center.x)/ceil(boundingBox.width()),originY=-ceil(center.y)/ceil(boundingBox.height());return originX+","+originY}}),CircleNode=ShapeNode.extend({createElement:function(){this.element=createElementVML("oval"),this.setStyle()},createTransformNode:function(srcElement,transform){return new CircleTransformNode(srcElement,transform)},geometryChange:function(){ShapeNode.fn.geometryChange.call(this),this.setStyle(),this.refreshTransform()},mapStyle:function(){var geometry=this.srcElement.geometry(),radius=geometry.radius,center=geometry.center,diameter=ceil(2*radius),styles=ShapeNode.fn.mapStyle.call(this,diameter,diameter);return styles.push(["left",ceil(center.x-radius)+"px"],["top",ceil(center.y-radius)+"px"]),styles}}),ArcDataNode=PathDataNode.extend({renderData:function(){return printPath(this.srcElement.toPath())}}),ArcNode=PathNode.extend({createDataNode:function(srcElement){return new ArcDataNode(srcElement)}}),TextPathDataNode=PathDataNode.extend({createElement:function(){PathDataNode.fn.createElement.call(this),this.attr("textpathok",!0)},renderData:function(){var rect=this.srcElement.rect(),center=rect.center();return"m "+printPoints([new g.Point(rect.topLeft().x,center.y)])+" l "+printPoints([new g.Point(rect.bottomRight().x,center.y)])}}),TextPathNode=Node.extend({createElement:function(){this.element=createElementVML("textpath"),this.attr("on",!0),this.attr("fitpath",!1),this.setStyle(),this.setString()},optionsChange:function(e){"content"===e.field?this.setString():this.setStyle(),Node.fn.optionsChange.call(this,e)},mapStyle:function(){return[["font",this.srcElement.options.font]]},setString:function(){this.attr("string",this.srcElement.content())}}),TextNode=PathNode.extend({init:function(srcElement,transform,opacity){this.path=new TextPathNode(srcElement),PathNode.fn.init.call(this,srcElement,transform,opacity)},createDataNode:function(srcElement){return new TextPathDataNode(srcElement)},attachTo:function(domElement,pos){this.path.attachTo(this.element),PathNode.fn.attachTo.call(this,domElement,pos)},optionsChange:function(e){("font"===e.field||"content"===e.field)&&(this.path.optionsChange(e),this.pathData.geometryChange(e)),PathNode.fn.optionsChange.call(this,e)}}),ImagePathDataNode=PathDataNode.extend({renderData:function(){var rect=this.srcElement.rect(),path=(new d.Path).moveTo(rect.topLeft()).lineTo(rect.topRight()).lineTo(rect.bottomRight()).lineTo(rect.bottomLeft()).close();return printPath(path)}}),ImageFillNode=TransformNode.extend({init:function(srcElement,transform,opacity){this.opacity=opacity,TransformNode.fn.init.call(this,srcElement,transform)},createElement:function(){this.element=createElementVML("fill"),this.attr("type","frame"),this.attr("rotate",!0),this.setOpacity(),this.setSrc(),this.setTransform()},optionsChange:function(e){"src"===e.field&&this.setSrc(),TransformNode.fn.optionsChange.call(this,e)},geometryChange:function(){this.refresh()},refreshOpacity:function(opacity){this.opacity=opacity,this.setOpacity()},setOpacity:function(){var attrs=[];this.mapOpacityTo(attrs,this.srcElement.options.opacity),this.allAttr(attrs)},setSrc:function(){this.attr("src",this.srcElement.src())},mapTransform:function(){var x,y,img=this.srcElement,rawbbox=img.rawBBox(),rawcenter=rawbbox.center(),fillOrigin=COORDINATE_MULTIPLE/2,fillSize=COORDINATE_MULTIPLE,width=rawbbox.width()/fillSize,height=rawbbox.height()/fillSize,angle=0,transform=this.transform;if(transform){var matrix=toMatrix(transform),sx=sqrt(matrix.a*matrix.a+matrix.b*matrix.b),sy=sqrt(matrix.c*matrix.c+matrix.d*matrix.d);width*=sx,height*=sy;var ax=deg(atan2(matrix.b,matrix.d)),ay=deg(atan2(-matrix.c,matrix.a));if(angle=(ax+ay)/2,0!==angle){var center=img.bbox().center();x=(center.x-fillOrigin)/fillSize,y=(center.y-fillOrigin)/fillSize}else x=(rawcenter.x*sx+matrix.e-fillOrigin)/fillSize,y=(rawcenter.y*sy+matrix.f-fillOrigin)/fillSize}else x=(rawcenter.x-fillOrigin)/fillSize,y=(rawcenter.y-fillOrigin)/fillSize;return width=round(width,TRANSFORM_PRECISION),height=round(height,TRANSFORM_PRECISION),x=round(x,TRANSFORM_PRECISION),y=round(y,TRANSFORM_PRECISION),angle=round(angle,TRANSFORM_PRECISION),[["size",width+","+height],["position",x+","+y],["angle",angle]]}}),ImageNode=PathNode.extend({createFillNode:function(srcElement,transform,opacity){return new ImageFillNode(srcElement,transform,opacity)},createDataNode:function(srcElement){return new ImagePathDataNode(srcElement)},optionsChange:function(e){("src"===e.field||"transform"===e.field)&&this.fill.optionsChange(e),PathNode.fn.optionsChange.call(this,e)},geometryChange:function(){this.fill.geometryChange(),PathNode.fn.geometryChange.call(this)},refreshTransform:function(transform){PathNode.fn.refreshTransform.call(this,transform),this.fill.refresh(this.srcElement.currentTransform(transform))}}),RectDataNode=PathDataNode.extend({renderData:function(){var rect=this.srcElement.geometry(),parts=["m",printPoints([rect.topLeft()]),"l",printPoints([rect.topRight(),rect.bottomRight(),rect.bottomLeft()]),"x e"];return parts.join(" ")}}),RectNode=PathNode.extend({createDataNode:function(srcElement){return new RectDataNode(srcElement)}}),nodeMap={Group:GroupNode,Text:TextNode,Path:PathNode,MultiPath:MultiPathNode,Circle:CircleNode,Arc:ArcNode,Image:ImageNode,Rect:RectNode};kendo.support.vml=function(){var browser=kendo.support.browser;return browser.msie&&browser.version<9}();var EMPTY_CLIP="inherit";kendo.support.browser.msie&&kendo.support.browser.version<8&&(EMPTY_CLIP="rect(auto auto auto auto)"),kendo.support.vml&&d.SurfaceFactory.current.register("vml",Surface,30),deepExtend(d,{vml:{ArcDataNode:ArcDataNode,ArcNode:ArcNode,CircleTransformNode:CircleTransformNode,CircleNode:CircleNode,FillNode:FillNode,GroupNode:GroupNode,ImageNode:ImageNode,ImageFillNode:ImageFillNode,ImagePathDataNode:ImagePathDataNode,MultiPathDataNode:MultiPathDataNode,MultiPathNode:MultiPathNode,Node:Node,PathDataNode:PathDataNode,PathNode:PathNode,RectDataNode:RectDataNode,RectNode:RectNode,RootNode:RootNode,StrokeNode:StrokeNode,Surface:Surface,TextNode:TextNode,TextPathNode:TextPathNode,TextPathDataNode:TextPathDataNode,TransformNode:TransformNode}})}(window.kendo.jQuery)}(),function(){!function($,parseFloat,Math){"use strict";function drawDOM(element,options){function doOne(element){var group=new drawing.Group,pos=element.getBoundingClientRect();return setTransform(group,[1,0,0,1,-pos.left,-pos.top]),nodeInfo._clipbox=!1,nodeInfo._matrix=geo.Matrix.unit(),nodeInfo._stackingContext={element:element,group:group},options.avoidLinks===!0?nodeInfo._avoidLinks="a":nodeInfo._avoidLinks=options.avoidLinks,$(element).addClass("k-pdf-export"),renderElement(element,group),$(element).removeClass("k-pdf-export"),group}function makeTemplate(template){return null!=template?("string"==typeof template&&(template=kendo.template(template.replace(/^\s+|\s+$/g,""))),"function"==typeof template?function(data){var el=template(data);return el?$(el)[0]:void 0}:function(){return $(template).clone()[0]}):void 0}function cloneNodes(el){var clone=el.cloneNode(!1);if(1==el.nodeType){var i,$el=$(el),$clone=$(clone),data=$el.data();for(i in data)$clone.data(i,data[i]);if(/^canvas$/i.test(el.tagName))clone.getContext("2d").drawImage(el,0,0);else for(i=el.firstChild;i;i=i.nextSibling)clone.appendChild(cloneNodes(i))}return clone}function handlePageBreaks(callback,element,forceBreak,pageWidth,pageHeight,margin,options){function doPageBreak(){function next(){setTimeout(function(){callback({pages:pages,container:container})},10)}("-"!=forceBreak||pageHeight)&&splitElement(copy);var page=makePage();if(copy.parentNode.insertBefore(page,copy),page.appendChild(copy),template){var count=pages.length;pages.forEach(function(page,i){var el=template({element:page,pageNum:i+1,totalPages:pages.length});el&&(page.appendChild(el),cacheImages(el,function(){0===--count&&next()}))})}else next()}function splitElement(element){var style=getComputedStyle(element),bottomPadding=parseFloat(getPropertyValue(style,"padding-bottom")),bottomBorder=parseFloat(getPropertyValue(style,"border-bottom-width")),saveAdjust=adjust;adjust+=bottomPadding+bottomBorder;for(var isFirst=!0,el=element.firstChild;el;el=el.nextSibling)if(1==el.nodeType){isFirst=!1;var jqel=$(el);if(jqel.is(forceBreak)){breakAtElement(el);continue}if(!pageHeight){splitElement(el);continue}if(!/^(?:static|relative)$/.test(getPropertyValue(getComputedStyle(el),"position")))continue;var fall=fallsOnMargin(el);1==fall?breakAtElement(el):fall&&(jqel.data("kendoChart")||/^(?:img|tr|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(el.tagName))?breakAtElement(el):splitElement(el)}else 3==el.nodeType&&pageHeight&&(splitText(el,isFirst),isFirst=!1);adjust=saveAdjust}function firstInParent(el){var p=el.parentNode,first=p.firstChild;if(el===first)return!0;if(el===p.children[0]){if(7==first.nodeType||8==first.nodeType)return!0;if(3==first.nodeType)return!/\S/.test(first.data)}return!1}function breakAtElement(el){if(1==el.nodeType&&el!==copy&&firstInParent(el))return breakAtElement(el.parentNode);var colgroup=$(el).closest("table").find("colgroup"),page=makePage(),range=doc.createRange();range.setStartBefore(copy),range.setEndBefore(el),page.appendChild(range.extractContents()),copy.parentNode.insertBefore(page,copy),colgroup[0]&&colgroup.clone().prependTo($(el).closest("table"))}function makePage(){var page=doc.createElement("KENDO-PDF-PAGE");return $(page).css({display:"block",boxSizing:"content-box",width:pageWidth||"auto",padding:margin.top+"px "+margin.right+"px "+margin.bottom+"px "+margin.left+"px",position:"relative",height:pageHeight||"auto",overflow:pageHeight||pageWidth?"hidden":"visible",clear:"both"}),options&&options.pageClassName&&(page.className=options.pageClassName),pages.push(page),page}function fallsOnMargin(thing){var box=thing.getBoundingClientRect();if(0===box.width||0===box.height)return 0;var top=copy.getBoundingClientRect().top,available=pageHeight-adjust;return box.height>available?3:box.top-top>available?1:box.bottom-top>available?2:0}function splitText(node,isFirst){if(/\S/.test(node.data)){var len=node.data.length,range=doc.createRange();range.selectNodeContents(node);var fall=fallsOnMargin(range);if(fall){var nextnode=node;if(1==fall)breakAtElement(isFirst?node.parentNode:node);else if(function findEOP(min,pos,max){return range.setEnd(node,pos),min==pos||pos==max?pos:fallsOnMargin(range)?findEOP(min,min+pos>>1,pos):findEOP(pos,pos+max>>1,max)}(0,len>>1,len),!/\S/.test(range.toString())&&isFirst)breakAtElement(node.parentNode);else{nextnode=node.splitText(range.endOffset);var page=makePage();range.setStartBefore(copy),page.appendChild(range.extractContents()),copy.parentNode.insertBefore(page,copy)}splitText(nextnode)}}}var template=makeTemplate(options.template),doc=element.ownerDocument,pages=[],copy=cloneNodes(element),container=doc.createElement("KENDO-PDF-DOCUMENT"),adjust=0;$(copy).find("tfoot").each(function(){this.parentNode.appendChild(this)}),$(copy).find("ol").each(function(){$(this).children().each(function(index){this.setAttribute("kendo-split-index",index)})}),$(container).css({display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"}),pageWidth&&($(container).css({width:pageWidth,paddingLeft:margin.left,paddingRight:margin.right}),$(copy).css({overflow:"hidden"})),container.appendChild(copy),element.parentNode.insertBefore(container,element),options.beforePageBreak?setTimeout(function(){options.beforePageBreak(container,doPageBreak)},15):setTimeout(doPageBreak,15)}options||(options={});var defer=$.Deferred();if(element=$(element)[0],!element)return defer.reject("No element to export");if("function"!=typeof window.getComputedStyle)throw new Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.");return kendo.pdf&&kendo.pdf.defineFont(getFontFaces(element.ownerDocument)),cacheImages(element,function(){var forceBreak=options&&options.forcePageBreak,hasPaperSize=options&&options.paperSize&&"auto"!=options.paperSize,paperOptions=hasPaperSize&&kendo.pdf.getPaperOptions(function(key,def){return key in options?options[key]:def}),pageWidth=hasPaperSize&&paperOptions.paperSize[0],pageHeight=hasPaperSize&&paperOptions.paperSize[1],margin=options.margin&&paperOptions.margin;if(forceBreak||pageHeight){margin||(margin={left:0,top:0,right:0,bottom:0});var group=new drawing.Group({pdf:{multiPage:!0,paperSize:hasPaperSize?paperOptions.paperSize:"auto"}});handlePageBreaks(function(x){if(options.progress){var canceled=!1,pageNum=0;!function next(){pageNum<x.pages.length?(group.append(doOne(x.pages[pageNum])),options.progress({pageNum:++pageNum,totalPages:x.pages.length,cancel:function(){canceled=!0}}),canceled?x.container.parentNode.removeChild(x.container):setTimeout(next)):(x.container.parentNode.removeChild(x.container),defer.resolve(group))}()}else x.pages.forEach(function(page){group.append(doOne(page))}),x.container.parentNode.removeChild(x.container),defer.resolve(group)},element,forceBreak,pageWidth?pageWidth-margin.left-margin.right:null,pageHeight?pageHeight-margin.top-margin.bottom:null,margin,options)}else defer.resolve(doOne(element))}),defer.promise()}function getFontFaces(doc){function doStylesheet(ss){if(ss){var rules=null;try{rules=ss.cssRules}catch(ex){}rules&&addRules(ss,rules)}}function findFonts(rule){var src=getPropertyValue(rule.style,"src");if(src)return splitProperty(src).reduce(function(a,el){var font=getFontURL(el);return font&&a.push(font),a},[]);var font=getFontURL(rule.cssText);return font?[font]:[]}function addRules(styleSheet,rules){for(var i=0;i<rules.length;++i){var r=rules[i];switch(r.type){case 3:doStylesheet(r.styleSheet);break;case 5:var style=r.style,family=splitProperty(getPropertyValue(style,"font-family")),bold=/^(400|bold)$/i.test(getPropertyValue(style,"font-weight")),italic="italic"==getPropertyValue(style,"font-style"),src=findFonts(r);src.length>0&&addRule(styleSheet,family,bold,italic,src[0])}}}function addRule(styleSheet,names,bold,italic,url){/^data:/i.test(url)||/^[^\/:]+:\/\//.test(url)||/^\//.test(url)||(url=String(styleSheet.href).replace(/[^\/]*$/,"")+url),names.forEach(function(name){name=name.replace(/^(['"]?)(.*?)\1$/,"$2"),bold&&(name+="|bold"),italic&&(name+="|italic"),result[name]=url})}null==doc&&(doc=document);for(var result={},i=0;i<doc.styleSheets.length;++i)doStylesheet(doc.styleSheets[i]);return result}function hasOwnProperty(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function getCounter(name){return name="_counter_"+name,nodeInfo[name]}function getAllCounters(name){var values=[],p=nodeInfo;for(name="_counter_"+name;p;)hasOwnProperty(p,name)&&values.push(p[name]),p=Object.getPrototypeOf(p);return values.reverse()}function incCounter(name,inc){var p=nodeInfo;for(name="_counter_"+name;p&&!hasOwnProperty(p,name);)p=Object.getPrototypeOf(p);p||(p=nodeInfo._root),p[name]=(p[name]||0)+(null==inc?1:inc)}function resetCounter(name,val){name="_counter_"+name,nodeInfo[name]=null==val?0:val}function doCounters(a,f,def){for(var i=0;i<a.length;){var name=a[i++],val=parseFloat(a[i]);isNaN(val)?f(name,def):(f(name,val),++i)}}function parseColor(str,css){var color=kendo.parseColor(str);return color&&(color=color.toRGB(),css?color=color.toCssRgba():0===color.a&&(color=null)),color}function cacheImages(element,callback){function add(url){IMAGE_CACHE[url]||(IMAGE_CACHE[url]=!0,urls.push(url))}function next(){--count<=0&&callback()}var urls=[];!function dive(element){/^img$/i.test(element.tagName)&&add(element.src),parseBackgroundImage(getPropertyValue(getComputedStyle(element),"background-image")).forEach(function(bg){"url"==bg.type&&add(bg.url)}),element.children&&slice.call(element.children).forEach(dive)}(element);var count=urls.length;0===count&&next(),urls.forEach(function(url){var img=IMAGE_CACHE[url]=new Image;/^data:/i.test(url)||(img.crossOrigin="Anonymous"),img.src=url,img.complete?next():(img.onload=next,img.onerror=function(){IMAGE_CACHE[url]=null,next()})})}function alphaNumeral(n){var result="";do{var r=n%26;result=String.fromCharCode(97+r)+result,n=Math.floor(n/26)}while(n>0);return result}function pushNodeInfo(element,style,group){nodeInfo=Object.create(nodeInfo),nodeInfo[element.tagName.toLowerCase()]={element:element,style:style};var decoration=getPropertyValue(style,"text-decoration");if(decoration&&"none"!=decoration){var color=getPropertyValue(style,"color");decoration.split(/\s+/g).forEach(function(name){nodeInfo[name]||(nodeInfo[name]=color)})}createsStackingContext(style)&&(nodeInfo._stackingContext={element:element,group:group})}function popNodeInfo(){nodeInfo=Object.getPrototypeOf(nodeInfo)}function updateClipbox(path){if(null!=nodeInfo._clipbox){var box=path.bbox(nodeInfo._matrix);nodeInfo._clipbox?nodeInfo._clipbox=geo.Rect.intersect(nodeInfo._clipbox,box):nodeInfo._clipbox=box}}function emptyClipbox(){
var cb=nodeInfo._clipbox;return null==cb?!0:cb?0===cb.width()||0===cb.height():void 0}function createsStackingContext(style){function prop(name){return getPropertyValue(style,name)}return"none"!=prop("transform")||"static"!=prop("position")&&"auto"!=prop("z-index")||prop("opacity")<1?!0:void 0}function getComputedStyle(element,pseudoElt){return window.getComputedStyle(element,pseudoElt||null)}function getPropertyValue(style,prop){return style.getPropertyValue(prop)||browser.webkit&&style.getPropertyValue("-webkit-"+prop)||browser.mozilla&&style.getPropertyValue("-moz-"+prop)||browser.opera&&style.getPropertyValue("-o-"+prop)||browser.msie&&style.getPropertyValue("-ms-"+prop)}function pleaseSetPropertyValue(style,prop,value,important){style.setProperty(prop,value,important),browser.webkit?style.setProperty("-webkit-"+prop,value,important):browser.mozilla?style.setProperty("-moz-"+prop,value,important):browser.opera?style.setProperty("-o-"+prop,value,important):browser.msie&&(style.setProperty("-ms-"+prop,value,important),prop="ms"+prop.replace(/(^|-)([a-z])/g,function(s,p1,p2){return p1+p2.toUpperCase()}),style[prop]=value)}function actuallyGetRangeBoundingRect(range){if(browser.msie||browser.chrome){var a=range.getClientRects();if(2==a.length&&a[1].width<=1)return a[0];if(3==a.length&&a[0].width<=1&&a[2].width<=1)return a[1]}return range.getBoundingClientRect()}function getBorder(style,side){return side="border-"+side,{width:parseFloat(getPropertyValue(style,side+"-width")),style:getPropertyValue(style,side+"-style"),color:parseColor(getPropertyValue(style,side+"-color"),!0)}}function saveStyle(element,func){var prev=element.style.cssText,result=func();return element.style.cssText=prev,result}function getBorderRadius(style,side){var r=getPropertyValue(style,"border-"+side+"-radius").split(/\s+/g).map(parseFloat);return 1==r.length&&r.push(r[0]),sanitizeRadius({x:r[0],y:r[1]})}function getContentBox(element){var box=element.getBoundingClientRect();return box=innerBox(box,"border-*-width",element),box=innerBox(box,"padding-*",element)}function innerBox(box,prop,element){var style,wt,wr,wb,wl;return"string"==typeof prop?(style=getComputedStyle(element),wt=parseFloat(getPropertyValue(style,prop.replace("*","top"))),wr=parseFloat(getPropertyValue(style,prop.replace("*","right"))),wb=parseFloat(getPropertyValue(style,prop.replace("*","bottom"))),wl=parseFloat(getPropertyValue(style,prop.replace("*","left")))):"number"==typeof prop&&(wt=wr=wb=wl=prop),{top:box.top+wt,right:box.right-wr,bottom:box.bottom-wb,left:box.left+wl,width:box.right-box.left-wr-wl,height:box.bottom-box.top-wb-wt}}function getTransform(style){var transform=getPropertyValue(style,"transform");if("none"==transform)return null;var matrix=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(transform);if(matrix){var origin=getPropertyValue(style,"transform-origin");return matrix=matrix[1].split(/\s*,\s*/g).map(parseFloat),origin=origin.split(/\s+/g).map(parseFloat),{matrix:matrix,origin:origin}}}function radiansToDegrees(radians){return 180*radians/Math.PI%360}function parseAngle(angle){var num=parseFloat(angle);return/grad$/.test(angle)?Math.PI*num/200:/rad$/.test(angle)?num:/turn$/.test(angle)?Math.PI*num*2:/deg$/.test(angle)?Math.PI*num/180:void 0}function setTransform(shape,m){return m=new geo.Matrix(m[0],m[1],m[2],m[3],m[4],m[5]),shape.transform(m),m}function setClipping(shape,clipPath){shape.clip(clipPath)}function addArcToPath(path,x,y,options){for(var points=new geo.Arc([x,y],options).curvePoints(),i=1;i<points.length;)path.curveTo(points[i++],points[i++],points[i++])}function sanitizeRadius(r){return(r.x<=0||r.y<=0)&&(r.x=r.y=0),r}function adjustBorderRadiusForBox(box,rTL,rTR,rBR,rBL){var tl_x=Math.max(0,rTL.x),tl_y=Math.max(0,rTL.y),tr_x=Math.max(0,rTR.x),tr_y=Math.max(0,rTR.y),br_x=Math.max(0,rBR.x),br_y=Math.max(0,rBR.y),bl_x=Math.max(0,rBL.x),bl_y=Math.max(0,rBL.y),f=Math.min(box.width/(tl_x+tr_x),box.height/(tr_y+br_y),box.width/(br_x+bl_x),box.height/(bl_y+tl_y));return 1>f&&(tl_x*=f,tl_y*=f,tr_x*=f,tr_y*=f,br_x*=f,br_y*=f,bl_x*=f,bl_y*=f),{tl:{x:tl_x,y:tl_y},tr:{x:tr_x,y:tr_y},br:{x:br_x,y:br_y},bl:{x:bl_x,y:bl_y}}}function elementRoundBox(element,box,type){var style=getComputedStyle(element),rTL=getBorderRadius(style,"top-left"),rTR=getBorderRadius(style,"top-right"),rBL=getBorderRadius(style,"bottom-left"),rBR=getBorderRadius(style,"bottom-right");if("padding"==type||"content"==type){var bt=getBorder(style,"top"),br=getBorder(style,"right"),bb=getBorder(style,"bottom"),bl=getBorder(style,"left");if(rTL.x-=bl.width,rTL.y-=bt.width,rTR.x-=br.width,rTR.y-=bt.width,rBR.x-=br.width,rBR.y-=bb.width,rBL.x-=bl.width,rBL.y-=bb.width,"content"==type){var pt=parseFloat(getPropertyValue(style,"padding-top")),pr=parseFloat(getPropertyValue(style,"padding-right")),pb=parseFloat(getPropertyValue(style,"padding-bottom")),pl=parseFloat(getPropertyValue(style,"padding-left"));rTL.x-=pl,rTL.y-=pt,rTR.x-=pr,rTR.y-=pt,rBR.x-=pr,rBR.y-=pb,rBL.x-=pl,rBL.y-=pb}}return"number"==typeof type&&(rTL.x-=type,rTL.y-=type,rTR.x-=type,rTR.y-=type,rBR.x-=type,rBR.y-=type,rBL.x-=type,rBL.y-=type),roundBox(box,rTL,rTR,rBR,rBL)}function roundBox(box,rTL0,rTR0,rBR0,rBL0){var tmp=adjustBorderRadiusForBox(box,rTL0,rTR0,rBR0,rBL0),rTL=tmp.tl,rTR=tmp.tr,rBR=tmp.br,rBL=tmp.bl,path=new drawing.Path({fill:null,stroke:null});return path.moveTo(box.left,box.top+rTL.y),rTL.x&&addArcToPath(path,box.left+rTL.x,box.top+rTL.y,{startAngle:-180,endAngle:-90,radiusX:rTL.x,radiusY:rTL.y}),path.lineTo(box.right-rTR.x,box.top),rTR.x&&addArcToPath(path,box.right-rTR.x,box.top+rTR.y,{startAngle:-90,endAngle:0,radiusX:rTR.x,radiusY:rTR.y}),path.lineTo(box.right,box.bottom-rBR.y),rBR.x&&addArcToPath(path,box.right-rBR.x,box.bottom-rBR.y,{startAngle:0,endAngle:90,radiusX:rBR.x,radiusY:rBR.y}),path.lineTo(box.left+rBL.x,box.bottom),rBL.x&&addArcToPath(path,box.left+rBL.x,box.bottom-rBL.y,{startAngle:90,endAngle:180,radiusX:rBL.x,radiusY:rBL.y}),path.close()}function formatCounter(val,style){var str=parseFloat(val)+"";switch(style){case"decimal-leading-zero":return str.length<2&&(str="0"+str),str;case"lower-roman":return romanNumeral(val).toLowerCase();case"upper-roman":return romanNumeral(val).toUpperCase();case"lower-latin":case"lower-alpha":return alphaNumeral(val-1);case"upper-latin":case"upper-alpha":return alphaNumeral(val-1).toUpperCase();default:return str}}function evalPseudoElementContent(element,content){function displayCounter(name,style,separator){return separator?(separator=separator.replace(/^\s*(["'])(.*)\1\s*$/,"$2"),getAllCounters(name).map(function(val){return formatCounter(val,style)}).join(separator)):formatCounter(getCounter(name)||0,style)}var m,a=splitProperty(content,/^\s+/),result=[];return a.forEach(function(el){var tmp;(m=/^\s*(["'])(.*)\1\s*$/.exec(el))?result.push(m[2].replace(/\\([0-9a-f]{4})/gi,function(s,p){return String.fromCharCode(parseInt(p,16))})):(m=/^\s*counter\((.*?)\)\s*$/.exec(el))?(tmp=splitProperty(m[1]),result.push(displayCounter(tmp[0],tmp[1]))):(m=/^\s*counters\((.*?)\)\s*$/.exec(el))?(tmp=splitProperty(m[1]),result.push(displayCounter(tmp[0],tmp[2],tmp[1]))):result.push((m=/^\s*attr\((.*?)\)\s*$/.exec(el))?element.getAttribute(m[1])||"":el)}),result.join("")}function getCssText(style){if(style.cssText)return style.cssText;for(var result=[],i=0;i<style.length;++i)result.push(style[i]+": "+getPropertyValue(style,style[i]));return result.join(";\n")}function _renderWithPseudoElements(element,group){function pseudo(kind,place){var style=getComputedStyle(element,kind);if(style.content&&"normal"!=style.content&&"none"!=style.content&&"0px"!=style.width){var psel=element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);psel.style.cssText=getCssText(style),psel.textContent=evalPseudoElementContent(element,style.content),element.insertBefore(psel,place),":before"!=kind||/absolute|fixed/.test(getPropertyValue(psel.style,"position"))||(psel.style.marginLeft=parseFloat(getPropertyValue(psel.style,"margin-left"))-psel.offsetWidth+"px"),fake.push(psel)}}if(element.tagName==KENDO_PSEUDO_ELEMENT)return void _renderElement(element,group);var fake=[];pseudo(":before",element.firstChild),pseudo(":after",null),_renderElement(element,group),fake.forEach(function(el){element.removeChild(el)})}function _renderElement(element,group){function adjustBoxes(boxes){if(/^td$/i.test(element.tagName)){var table=nodeInfo.table;if(table&&"collapse"==getPropertyValue(table.style,"border-collapse")){var tableBorderLeft=getBorder(table.style,"left").width,tableBorderTop=getBorder(table.style,"top").width;if(0===tableBorderLeft&&0===tableBorderTop)return boxes;var tableBox=table.element.getBoundingClientRect(),firstCell=table.element.rows[0].cells[0],firstCellBox=firstCell.getBoundingClientRect();if(firstCellBox.top==tableBox.top||firstCellBox.left==tableBox.left)return slice.call(boxes).map(function(box){return{left:box.left+tableBorderLeft,top:box.top+tableBorderTop,right:box.right+tableBorderLeft,bottom:box.bottom+tableBorderTop,height:box.height,width:box.width}})}}return boxes}function drawEdge(color,len,Wtop,Wleft,Wright,rl,rr,transform){function drawRoundCorner(Wright,r,transform){var angle=Math.PI/2*Wright/(Wright+Wtop),ri={x:r.x-Wright,y:r.y-Wtop},path=new drawing.Path({fill:{color:color},stroke:null}).moveTo(0,0);setTransform(path,transform),addArcToPath(path,0,r.y,{startAngle:-90,endAngle:-radiansToDegrees(angle),radiusX:r.x,radiusY:r.y}),ri.x>0&&ri.y>0?(path.lineTo(ri.x*Math.cos(angle),r.y-ri.y*Math.sin(angle)),addArcToPath(path,0,r.y,{startAngle:-radiansToDegrees(angle),endAngle:-90,radiusX:ri.x,radiusY:ri.y,anticlockwise:!0})):ri.x>0?path.lineTo(ri.x,Wtop).lineTo(0,Wtop):path.lineTo(ri.x,Wtop).lineTo(ri.x,0),edge.append(path.close())}if(!(0>=Wtop)){var path,edge=new drawing.Group;setTransform(edge,transform),group.append(edge),sanitizeRadius(rl),sanitizeRadius(rr),path=new drawing.Path({fill:{color:color},stroke:null}),edge.append(path),path.moveTo(rl.x?Math.max(rl.x,Wleft):0,0).lineTo(len-(rr.x?Math.max(rr.x,Wright):0),0).lineTo(len-Math.max(rr.x,Wright),Wtop).lineTo(Math.max(rl.x,Wleft),Wtop).close(),rl.x&&drawRoundCorner(Wleft,rl,[-1,0,0,1,rl.x,0]),rr.x&&drawRoundCorner(Wright,rr,[1,0,0,1,len-rr.x,0])}}function drawBackground(box){var background=new drawing.Group;if(setClipping(background,roundBox(box,rTL0,rTR0,rBR0,rBL0)),group.append(background),"A"==element.tagName&&element.href&&!/^#?$/.test($(element).attr("href"))&&(nodeInfo._avoidLinks&&$(element).is(nodeInfo._avoidLinks)||(background._pdfLink={url:element.href,top:box.top,right:box.right,bottom:box.bottom,left:box.left})),backgroundColor){var path=new drawing.Path({fill:{color:backgroundColor.toCssRgba()},stroke:null});path.moveTo(box.left,box.top).lineTo(box.right,box.top).lineTo(box.right,box.bottom).lineTo(box.left,box.bottom).close(),background.append(path)}for(var i=backgroundImage.length;--i>=0;)drawOneBackground(background,box,backgroundImage[i],backgroundRepeat[i%backgroundRepeat.length],backgroundPosition[i%backgroundPosition.length],backgroundOrigin[i%backgroundOrigin.length],backgroundSize[i%backgroundSize.length])}function drawOneBackground(group,box,background,backgroundRepeat,backgroundPosition,backgroundOrigin,backgroundSize){function drawBackgroundImage(group,box,img_width,img_height,renderBG){function rewX(){for(;rect.origin.x>box.left;)rect.origin.x-=img_width}function rewY(){for(;rect.origin.y>box.top;)rect.origin.y-=img_height}function repeatX(){for(;rect.origin.x<box.right;)renderBG(group,rect.clone()),rect.origin.x+=img_width}var aspect_ratio=img_width/img_height,orgBox=box;if("content-box"==backgroundOrigin?(orgBox=innerBox(orgBox,"border-*-width",element),orgBox=innerBox(orgBox,"padding-*",element)):"padding-box"==backgroundOrigin&&(orgBox=innerBox(orgBox,"border-*-width",element)),!/^\s*auto(\s+auto)?\s*$/.test(backgroundSize)){var size=backgroundSize.split(/\s+/g);img_width=/%$/.test(size[0])?orgBox.width*parseFloat(size[0])/100:parseFloat(size[0]),img_height=1==size.length||"auto"==size[1]?img_width/aspect_ratio:/%$/.test(size[1])?orgBox.height*parseFloat(size[1])/100:parseFloat(size[1])}var pos=(backgroundPosition+"").split(/\s+/);1==pos.length&&(pos[1]="50%"),/%$/.test(pos[0])?pos[0]=parseFloat(pos[0])/100*(orgBox.width-img_width):pos[0]=parseFloat(pos[0]),/%$/.test(pos[1])?pos[1]=parseFloat(pos[1])/100*(orgBox.height-img_height):pos[1]=parseFloat(pos[1]);var rect=new geo.Rect([orgBox.left+pos[0],orgBox.top+pos[1]],[img_width,img_height]);if("no-repeat"==backgroundRepeat)renderBG(group,rect);else if("repeat-x"==backgroundRepeat)rewX(),repeatX();else if("repeat-y"==backgroundRepeat)for(rewY();rect.origin.y<box.bottom;)renderBG(group,rect.clone()),rect.origin.y+=img_height;else if("repeat"==backgroundRepeat){rewX(),rewY();for(var origin=rect.origin.clone();rect.origin.y<box.bottom;)rect.origin.x=origin.x,repeatX(),rect.origin.y+=img_height}}if(background&&"none"!=background)if("url"==background.type){if(/^url\(\"data:image\/svg/i.test(background.url))return;var img=IMAGE_CACHE[background.url];img&&img.width>0&&img.height>0&&drawBackgroundImage(group,box,img.width,img.height,function(group,rect){group.append(new drawing.Image(background.url,rect))})}else{if("linear"!=background.type)return;drawBackgroundImage(group,box,box.width,box.height,gradientRenderer(background))}}function drawBullet(){function _drawBullet(f){saveStyle(element,function(){element.style.position="relative";var bullet=element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);bullet.style.position="absolute",bullet.style.boxSizing="border-box","outside"==listStylePosition?(bullet.style.width="6em",bullet.style.left="-6.8em",bullet.style.textAlign="right"):bullet.style.left="0px",f(bullet),element.insertBefore(bullet,element.firstChild),renderElement(bullet,group),element.removeChild(bullet)})}function elementIndex(f){var a=element.parentNode.children,k=element.getAttribute("kendo-split-index");if(null!=k)return f(0|k,a.length);for(var i=0;i<a.length;++i)if(a[i]===element)return f(i,a.length)}var listStyleType=getPropertyValue(style,"list-style-type");if("none"!=listStyleType){var listStylePosition=getPropertyValue(style,"list-style-position");switch(listStyleType){case"circle":case"disc":case"square":_drawBullet(function(bullet){bullet.style.fontSize="60%",bullet.style.lineHeight="200%",bullet.style.paddingRight="0.5em",bullet.style.fontFamily="DejaVu Serif",bullet.innerHTML={disc:"●",circle:"◯",square:"■"}[listStyleType]});break;case"decimal":case"decimal-leading-zero":_drawBullet(function(bullet){elementIndex(function(idx){++idx,"decimal-leading-zero"==listStyleType&&(idx+"").length<2&&(idx="0"+idx),bullet.innerHTML=idx+"."})});break;case"lower-roman":case"upper-roman":_drawBullet(function(bullet){elementIndex(function(idx){idx=romanNumeral(idx+1),"upper-roman"==listStyleType&&(idx=idx.toUpperCase()),bullet.innerHTML=idx+"."})});break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":_drawBullet(function(bullet){elementIndex(function(idx){idx=alphaNumeral(idx),/^upper/i.test(listStyleType)&&(idx=idx.toUpperCase()),bullet.innerHTML=idx+"."})})}}}function drawOneBox(box,isFirst,isLast){function inv(p){return{x:p.y,y:p.x}}if(0!==box.width&&0!==box.height){drawBackground(box);var shouldDrawLeft=left.width>0&&(isFirst&&"ltr"==dir||isLast&&"rtl"==dir),shouldDrawRight=right.width>0&&(isLast&&"ltr"==dir||isFirst&&"rtl"==dir);if(0!==top.width||0!==left.width||0!==right.width||0!==bottom.width){if(top.color==right.color&&top.color==bottom.color&&top.color==left.color&&top.width==right.width&&top.width==bottom.width&&top.width==left.width&&shouldDrawLeft&&shouldDrawRight){box=innerBox(box,top.width/2);var path=elementRoundBox(element,box,top.width/2);return path.options.stroke={color:top.color,width:top.width},void group.append(path)}if(0===rTL0.x&&0===rTR0.x&&0===rBR0.x&&0===rBL0.x&&top.width<2&&left.width<2&&right.width<2&&bottom.width<2)return top.width>0&&group.append(new drawing.Path({stroke:{width:top.width,color:top.color}}).moveTo(box.left,box.top+top.width/2).lineTo(box.right,box.top+top.width/2)),bottom.width>0&&group.append(new drawing.Path({stroke:{width:bottom.width,color:bottom.color}}).moveTo(box.left,box.bottom-bottom.width/2).lineTo(box.right,box.bottom-bottom.width/2)),shouldDrawLeft&&group.append(new drawing.Path({stroke:{width:left.width,color:left.color}}).moveTo(box.left+left.width/2,box.top).lineTo(box.left+left.width/2,box.bottom)),void(shouldDrawRight&&group.append(new drawing.Path({stroke:{width:right.width,color:right.color}}).moveTo(box.right-right.width/2,box.top).lineTo(box.right-right.width/2,box.bottom)));var tmp=adjustBorderRadiusForBox(box,rTL0,rTR0,rBR0,rBL0),rTL=tmp.tl,rTR=tmp.tr,rBR=tmp.br,rBL=tmp.bl;drawEdge(top.color,box.width,top.width,left.width,right.width,rTL,rTR,[1,0,0,1,box.left,box.top]),drawEdge(bottom.color,box.width,bottom.width,right.width,left.width,rBR,rBL,[-1,0,0,-1,box.right,box.bottom]),drawEdge(left.color,box.height,left.width,bottom.width,top.width,inv(rBL),inv(rTL),[0,-1,1,0,box.left,box.bottom]),drawEdge(right.color,box.height,right.width,top.width,bottom.width,inv(rTR),inv(rBR),[0,1,-1,0,box.right,box.top])}}}var style=getComputedStyle(element),top=getBorder(style,"top"),right=getBorder(style,"right"),bottom=getBorder(style,"bottom"),left=getBorder(style,"left"),rTL0=getBorderRadius(style,"top-left"),rTR0=getBorderRadius(style,"top-right"),rBL0=getBorderRadius(style,"bottom-left"),rBR0=getBorderRadius(style,"bottom-right"),dir=getPropertyValue(style,"direction"),backgroundColor=getPropertyValue(style,"background-color");backgroundColor=parseColor(backgroundColor);var backgroundImage=parseBackgroundImage(getPropertyValue(style,"background-image")),backgroundRepeat=splitProperty(getPropertyValue(style,"background-repeat")),backgroundPosition=splitProperty(getPropertyValue(style,"background-position")),backgroundOrigin=splitProperty(getPropertyValue(style,"background-origin")),backgroundSize=splitProperty(getPropertyValue(style,"background-size"));browser.msie&&browser.version<10&&(backgroundPosition=splitProperty(element.currentStyle.backgroundPosition));var innerbox=innerBox(element.getBoundingClientRect(),"border-*-width",element);!function(){var clip=getPropertyValue(style,"clip"),m=/^\s*rect\((.*)\)\s*$/.exec(clip);if(m){var a=m[1].split(/[ ,]+/g),top="auto"==a[0]?innerbox.top:parseFloat(a[0])+innerbox.top,right="auto"==a[1]?innerbox.right:parseFloat(a[1])+innerbox.left,bottom="auto"==a[2]?innerbox.bottom:parseFloat(a[2])+innerbox.top,left="auto"==a[3]?innerbox.left:parseFloat(a[3])+innerbox.left,tmp=new drawing.Group,clipPath=(new drawing.Path).moveTo(left,top).lineTo(right,top).lineTo(right,bottom).lineTo(left,bottom).close();setClipping(tmp,clipPath),group.append(tmp),group=tmp,updateClipbox(clipPath)}}();var boxes,i,cells,display=getPropertyValue(style,"display");if("table-row"==display)for(boxes=[],i=0,cells=element.children;i<cells.length;++i)boxes.push(cells[i].getBoundingClientRect());else boxes=element.getClientRects(),1==boxes.length&&(boxes=[element.getBoundingClientRect()]);for(boxes=adjustBoxes(boxes),i=0;i<boxes.length;++i)drawOneBox(boxes[i],0===i,i==boxes.length-1);return boxes.length>0&&"list-item"==display&&drawBullet(boxes[0]),function(){function clipit(){var clipPath=elementRoundBox(element,innerbox,"padding"),tmp=new drawing.Group;setClipping(tmp,clipPath),group.append(tmp),group=tmp,updateClipbox(clipPath)}isFormField(element)?clipit():/^(hidden|auto|scroll)/.test(getPropertyValue(style,"overflow"))?clipit():/^(hidden|auto|scroll)/.test(getPropertyValue(style,"overflow-x"))?clipit():/^(hidden|auto|scroll)/.test(getPropertyValue(style,"overflow-y"))&&clipit()}(),maybeRenderWidget(element,group)||renderContents(element,group),group}function gradientRenderer(gradient){return function(group,rect){var width=rect.width(),height=rect.height();switch(gradient.type){case"linear":var angle=null!=gradient.angle?gradient.angle:Math.PI;switch(gradient.to){case"top":angle=0;break;case"left":angle=-Math.PI/2;break;case"bottom":angle=Math.PI;break;case"right":angle=Math.PI/2;break;case"top left":case"left top":angle=-Math.atan2(height,width);break;case"top right":case"right top":angle=Math.atan2(height,width);break;case"bottom left":case"left bottom":angle=Math.PI+Math.atan2(height,width);break;case"bottom right":case"right bottom":angle=Math.PI-Math.atan2(height,width)}gradient.reverse&&(angle-=Math.PI),angle%=2*Math.PI,0>angle&&(angle+=2*Math.PI);var pxlen=Math.abs(width*Math.sin(angle))+Math.abs(height*Math.cos(angle)),scaledAngle=Math.atan(width*Math.tan(angle)/height),sin=Math.sin(scaledAngle),cos=Math.cos(scaledAngle),len=Math.abs(sin)+Math.abs(cos),x=len/2*sin,y=len/2*cos;angle>Math.PI/2&&angle<=3*Math.PI/2&&(x=-x,y=-y);var implicit=[],right=0,stops=gradient.stops.map(function(s,i){var offset=s.percent;offset?offset=parseFloat(offset)/100:s.length?offset=parseFloat(s.length)/pxlen:0===i?offset=0:i==gradient.stops.length-1&&(offset=1);var stop={color:s.color.toCssRgba(),offset:offset};return null!=offset?(right=offset,implicit.forEach(function(s,i){var stop=s.stop;stop.offset=s.left+(right-s.left)*(i+1)/(implicit.length+1)}),implicit=[]):implicit.push({left:right,stop:stop}),stop}),start=[.5-x,.5+y],end=[.5+x,.5-y];group.append(drawing.Path.fromRect(rect).stroke(null).fill(new drawing.LinearGradient({start:start,end:end,stops:stops,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}}function maybeRenderWidget(element,group){if(element.getAttribute(kendo.attr("role"))){var widget=kendo.widgetInstance($(element));if(widget&&(widget.exportDOMVisual||widget.exportVisual)){var visual;if(visual=widget.exportDOMVisual?widget.exportDOMVisual():widget.exportVisual(),!visual)return!1;var wrap=new drawing.Group;wrap.children.push(visual);var bbox=element.getBoundingClientRect();return wrap.transform(geo.transform().translate(bbox.left,bbox.top)),group.append(wrap),!0}}}function renderImage(element,url,group){var box=getContentBox(element),rect=new geo.Rect([box.left,box.top],[box.width,box.height]),image=new drawing.Image(url,rect);setClipping(image,elementRoundBox(element,box,"content")),group.append(image)}function zIndexSort(a,b){var sa=getComputedStyle(a),sb=getComputedStyle(b),za=parseFloat(getPropertyValue(sa,"z-index")),zb=parseFloat(getPropertyValue(sb,"z-index")),pa=getPropertyValue(sa,"position"),pb=getPropertyValue(sb,"position");return isNaN(za)&&isNaN(zb)?/static|absolute/.test(pa)&&/static|absolute/.test(pb)?0:"static"==pa?-1:"static"==pb?1:0:isNaN(za)?0===zb?0:zb>0?-1:1:isNaN(zb)?0===za?0:za>0?1:-1:parseFloat(za)-parseFloat(zb)}function isFormField(element){return/^(?:textarea|select|input)$/i.test(element.tagName)}function getSelectedOption(element){return element.selectedOptions&&element.selectedOptions.length>0?element.selectedOptions[0]:element.options[element.selectedIndex]}function renderCheckbox(element,group){var style=getComputedStyle(element),color=getPropertyValue(style,"color"),box=element.getBoundingClientRect();"checkbox"==element.type?(group.append(drawing.Path.fromRect(new geo.Rect([box.left+1,box.top+1],[box.width-2,box.height-2])).stroke(color,1)),element.checked&&group.append((new drawing.Path).stroke(color,1.2).moveTo(box.left+.22*box.width,box.top+.55*box.height).lineTo(box.left+.45*box.width,box.top+.75*box.height).lineTo(box.left+.78*box.width,box.top+.22*box.width))):(group.append(new drawing.Circle(new geo.Circle([(box.left+box.right)/2,(box.top+box.bottom)/2],Math.min(box.width-2,box.height-2)/2)).stroke(color,1)),element.checked&&group.append(new drawing.Circle(new geo.Circle([(box.left+box.right)/2,(box.top+box.bottom)/2],Math.min(box.width-8,box.height-8)/2)).fill(color).stroke(null)))}function renderFormField(element,group){var tag=element.tagName.toLowerCase();if("input"==tag&&("checkbox"==element.type||"radio"==element.type))return renderCheckbox(element,group);var option,p=element.parentNode,doc=element.ownerDocument,el=doc.createElement(KENDO_PSEUDO_ELEMENT);if(el.style.cssText=getCssText(getComputedStyle(element)),el.style.display="inline-block","input"==tag&&(el.style.whiteSpace="pre"),("select"==tag||"textarea"==tag)&&(el.style.overflow="auto"),"select"==tag)if(element.multiple)for(var i=0;i<element.options.length;++i)option=doc.createElement(KENDO_PSEUDO_ELEMENT),option.style.cssText=getCssText(getComputedStyle(element.options[i])),option.style.display="block",option.textContent=element.options[i].textContent,el.appendChild(option);else option=getSelectedOption(element),option&&(el.textContent=option.textContent);else el.textContent=element.value;p.insertBefore(el,element),el.scrollLeft=element.scrollLeft,el.scrollTop=element.scrollTop,renderContents(el,group),p.removeChild(el)}function renderContents(element,group){switch(nodeInfo._stackingContext.element===element&&(nodeInfo._stackingContext.group=group),element.tagName.toLowerCase()){case"img":renderImage(element,element.src,group);break;case"canvas":try{renderImage(element,element.toDataURL("image/png"),group)}catch(ex){}break;case"textarea":case"input":case"select":renderFormField(element,group);break;default:for(var blocks=[],floats=[],inline=[],positioned=[],i=element.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 3:/\S/.test(i.data)&&renderText(element,i,group);break;case 1:var style=getComputedStyle(i),display=getPropertyValue(style,"display"),floating=getPropertyValue(style,"float"),position=getPropertyValue(style,"position");"static"!=position?positioned.push(i):"inline"!=display?"none"!=floating?floats.push(i):blocks.push(i):inline.push(i)}blocks.sort(zIndexSort).forEach(function(el){renderElement(el,group)}),floats.sort(zIndexSort).forEach(function(el){renderElement(el,group)}),inline.sort(zIndexSort).forEach(function(el){renderElement(el,group)}),positioned.sort(zIndexSort).forEach(function(el){renderElement(el,group)})}}function renderText(element,node,group){function doChunk(){var box,origStart=start,pos=text.substr(start).search(/\S/);if(start+=pos,0>pos||start>=end)return!0;range.setStart(node,start),range.setEnd(node,start+1),box=range.getBoundingClientRect();var found=!1;if(isJustified&&(pos=text.substr(start).search(/\s/),pos>=0)){range.setEnd(node,start+pos);var r=range.getBoundingClientRect();r.bottom==box.bottom&&(box=r,found=!0,start+=pos)}if(!found){if(pos=function findEOL(min,eol,max){range.setEnd(node,eol);var r=actuallyGetRangeBoundingRect(range);return r.bottom!=box.bottom&&eol>min?findEOL(min,min+eol>>1,eol):r.right!=box.right?(box=r,max>eol?findEOL(eol,eol+max>>1,max):eol):eol}(start,Math.min(end,start+estimateLineLength),end),pos==start)return!0;if(start=pos,pos=range.toString().search(/\s+$/),0===pos)return;pos>0&&(range.setEnd(node,range.startOffset+pos),box=range.getBoundingClientRect())}browser.msie&&(box=range.getClientRects()[0]);var str=range.toString();if(/^(?:pre|pre-wrap)$/i.test(whiteSpace)){if(/\t/.test(str)){var cc=0;for(pos=origStart;pos<range.startOffset;++pos){var code=text.charCodeAt(pos);9==code?cc+=8-cc%8:10==code||13==code?cc=0:cc++}for(;(pos=str.search("	"))>=0;){var indent="        ".substr(0,8-(cc+pos)%8);str=str.substr(0,pos)+indent+str.substr(pos+1)}}}else str=str.replace(/\s+/g," ");drawText(str,box)}function drawText(str,box){if(browser.msie&&!isNaN(lineHeight)){var size=kendo.util.measureText(str,{font:font}),top=(box.top+box.bottom-size.height)/2;box={top:top,right:box.right,bottom:top+size.height,left:box.left,height:size.height,width:box.right-box.left}}var text=new TextRect(str,new geo.Rect([box.left,box.top],[box.width,box.height]),{font:font,fill:{color:color}});group.append(text),decorate(box)}function decorate(box){function line(color,ypos){if(color){var width=fontSize/12,path=new drawing.Path({stroke:{width:width,color:color}});ypos-=width,path.moveTo(box.left,ypos).lineTo(box.right,ypos),group.append(path)}}line(nodeInfo.underline,box.bottom),line(nodeInfo["line-through"],box.bottom-box.height/2.7),line(nodeInfo.overline,box.top)}if(!emptyClipbox()){var style=getComputedStyle(element);if(!(parseFloat(getPropertyValue(style,"text-indent"))<-500)){var text=node.data,start=0,end=text.search(/\S\s*$/)+1;if(end){var fontSize=getPropertyValue(style,"font-size"),lineHeight=getPropertyValue(style,"line-height"),font=[getPropertyValue(style,"font-style"),getPropertyValue(style,"font-variant"),getPropertyValue(style,"font-weight"),fontSize,getPropertyValue(style,"font-family")].join(" ");if(fontSize=parseFloat(fontSize),lineHeight=parseFloat(lineHeight),0!==fontSize){var color=getPropertyValue(style,"color"),range=element.ownerDocument.createRange(),align=getPropertyValue(style,"text-align"),isJustified="justify"==align,whiteSpace=getPropertyValue(style,"white-space"),estimateLineLength=element.getBoundingClientRect().width/fontSize*5;for(0===estimateLineLength&&(estimateLineLength=500);!doChunk(););}}}}}function groupInStackingContext(element,group,zIndex){var main;"auto"!=zIndex?(main=nodeInfo._stackingContext.group,zIndex=parseFloat(zIndex)):(main=group,zIndex=0);for(var a=main.children,i=0;i<a.length&&!(null!=a[i]._dom_zIndex&&a[i]._dom_zIndex>zIndex);++i);var tmp=new drawing.Group;if(main.insertAt(tmp,i),tmp._dom_zIndex=zIndex,main!==group&&nodeInfo._clipbox){var m=nodeInfo._matrix.invert(),r=nodeInfo._clipbox.transformCopy(m);setClipping(tmp,drawing.Path.fromRect(r))}return tmp}function renderElement(element,container){var style=getComputedStyle(element),counterReset=getPropertyValue(style,"counter-reset");counterReset&&doCounters(splitProperty(counterReset,/^\s+/),resetCounter,0);var counterIncrement=getPropertyValue(style,"counter-increment");if(counterIncrement&&doCounters(splitProperty(counterIncrement,/^\s+/),incCounter,1),!/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(element.tagName)&&null!=nodeInfo._clipbox){var opacity=parseFloat(getPropertyValue(style,"opacity")),visibility=getPropertyValue(style,"visibility"),display=getPropertyValue(style,"display");if(0!==opacity&&"hidden"!=visibility&&"none"!=display){var group,tr=getTransform(style),zIndex=getPropertyValue(style,"z-index");(tr||1>opacity)&&"auto"==zIndex&&(zIndex=0),group=groupInStackingContext(element,container,zIndex),1>opacity&&group.opacity(opacity*group.opacity()),pushNodeInfo(element,style,group),tr?saveStyle(element,function(){pleaseSetPropertyValue(element.style,"transform","none","important"),pleaseSetPropertyValue(element.style,"transition","none","important"),"static"==getPropertyValue(style,"position")&&pleaseSetPropertyValue(element.style,"position","relative","important");var bbox=element.getBoundingClientRect(),x=bbox.left+tr.origin[0],y=bbox.top+tr.origin[1],m=[1,0,0,1,-x,-y];m=mmul(m,tr.matrix),m=mmul(m,[1,0,0,1,x,y]),m=setTransform(group,m),nodeInfo._matrix=nodeInfo._matrix.multiplyCopy(m),_renderWithPseudoElements(element,group)}):_renderWithPseudoElements(element,group),popNodeInfo()}}}function mmul(a,b){var a1=a[0],b1=a[1],c1=a[2],d1=a[3],e1=a[4],f1=a[5],a2=b[0],b2=b[1],c2=b[2],d2=b[3],e2=b[4],f2=b[5];return[a1*a2+b1*c2,a1*b2+b1*d2,c1*a2+d1*c2,c1*b2+d1*d2,e1*a2+f1*c2+e2,e1*b2+f1*d2+f2]}var drawing=kendo.drawing,geo=kendo.geometry,slice=Array.prototype.slice,browser=kendo.support.browser,romanNumeral=kendo.util.arabicToRoman,KENDO_PSEUDO_ELEMENT="KENDO-PSEUDO-ELEMENT",IMAGE_CACHE={},nodeInfo={};nodeInfo._root=nodeInfo;var TextRect=drawing.Text.extend({nodeType:"Text",init:function(str,rect,options){drawing.Text.fn.init.call(this,str,rect.getOrigin(),options),this._pdfRect=rect},rect:function(){return this._pdfRect},rawBBox:function(){return this._pdfRect}});drawing.drawDOM=drawDOM,drawDOM.getFontFaces=getFontFaces;var parseBackgroundImage=function(){function parse(input){function skip_ws(){var m=tok_whitespace.exec(input);m&&(input=input.substr(m[1].length))}function read(token){skip_ws();var m=token.exec(input);return m?(input=input.substr(m[1].length),m[1]):void 0;
}function read_stop(){var length,percent,color=kendo.parseColor(input,!0);return color?(input=input.substr(color.match[0].length),color=color.toRGB(),(length=read(tok_length))||(percent=read(tok_percent)),{color:color,length:length,percent:percent}):void 0}function read_linear_gradient(propName){var angle,to1,to2,stops=[],reverse=!1;if(read(tok_popen)){if(angle=read(tok_angle),angle?(angle=parseAngle(angle),read(tok_comma)):(to1=read(tok_keyword),"to"==to1?to1=read(tok_keyword):to1&&/^-/.test(propName)&&(reverse=!0),to2=read(tok_keyword),read(tok_comma)),/-moz-/.test(propName)&&null==angle&&null==to1){var x=read(tok_percent),y=read(tok_percent);reverse=!0,"0%"==x?to1="left":"100%"==x&&(to1="right"),"0%"==y?to2="top":"100%"==y&&(to2="bottom"),read(tok_comma)}for(;input&&!read(tok_pclose);){var stop=read_stop();if(!stop)break;stops.push(stop),read(tok_comma)}return{type:"linear",angle:angle,to:to1&&to2?to1+" "+to2:to1?to1:to2?to2:null,stops:stops,reverse:reverse}}}function read_url(){if(read(tok_popen)){var url=read(tok_content);return url=url.replace(/^['"]+|["']+$/g,""),read(tok_pclose),{type:"url",url:url}}}var orig=input;if(hasOwnProperty(cache1,orig))return cache1[orig];var tok;return(tok=read(tok_linear_gradient))?tok=read_linear_gradient(tok):(tok=read(tok_url))&&(tok=read_url()),cache1[orig]=tok||{type:"none"}}var tok_linear_gradient=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,tok_percent=/^([-0-9.]+%)/,tok_length=/^([-0-9.]+px)/,tok_keyword=/^(left|right|top|bottom|to|center)\W/,tok_angle=/^([-0-9.]+(deg|grad|rad|turn))/,tok_whitespace=/^(\s+)/,tok_popen=/^(\()/,tok_pclose=/^(\))/,tok_comma=/^(,)/,tok_url=/^(url)\(/,tok_content=/^(.*?)\)/,cache1={},cache2={};return function(input){return hasOwnProperty(cache2,input)?cache2[input]:cache2[input]=splitProperty(input).map(parse)}}(),splitProperty=function(){var cache={};return function(input,separator){function looking_at(rx){return m=rx.exec(input.substr(pos))}function trim(str){return str.replace(/^\s+|\s+$/g,"")}separator||(separator=/^\s*,\s*/);var cacheKey=input+separator;if(hasOwnProperty(cache,cacheKey))return cache[cacheKey];for(var m,ret=[],last=0,pos=0,in_paren=0,in_string=!1;pos<input.length;)!in_string&&looking_at(/^[\(\[\{]/)?(in_paren++,pos++):!in_string&&looking_at(/^[\)\]\}]/)?(in_paren--,pos++):!in_string&&looking_at(/^[\"\']/)?(in_string=m[0],pos++):"'"==in_string&&looking_at(/^\\\'/)?pos+=2:'"'==in_string&&looking_at(/^\\\"/)?pos+=2:"'"==in_string&&looking_at(/^\'/)?(in_string=!1,pos++):'"'==in_string&&looking_at(/^\"/)?(in_string=!1,pos++):looking_at(separator)?(!in_string&&!in_paren&&pos>last&&(ret.push(trim(input.substring(last,pos))),last=pos+m[0].length),pos+=m[0].length):pos++;return pos>last&&ret.push(trim(input.substring(last,pos))),cache[cacheKey]=ret}}(),getFontURL=function(){var cache={};return function(el){var url=cache[el];if(!url){var m;(m=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(el))?url=cache[el]=m[2]:(m=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(el))&&(url=cache[el]=m[2])}return url}}()}(window.kendo.jQuery,parseFloat,Math)}(),function(){!function($){var noop=$.noop,kendo=window.kendo,Class=kendo.Class,util=kendo.util,animationFrame=kendo.animationFrame,deepExtend=kendo.deepExtend,Animation=Class.extend({init:function(element,options){var anim=this;anim.options=deepExtend({},anim.options,options),anim.element=element},options:{duration:500,easing:"swing"},setup:noop,step:noop,play:function(){var anim=this,options=anim.options,easing=$.easing[options.easing],duration=options.duration,delay=options.delay||0,start=util.now()+delay,finish=start+duration;0===duration?(anim.step(1),anim.abort()):setTimeout(function(){var loop=function(){if(!anim._stopped){var wallTime=util.now(),time=util.limitValue(wallTime-start,0,duration),pos=time/duration,easingPos=easing(pos,time,0,1,duration);anim.step(easingPos),finish>wallTime?animationFrame(loop):anim.abort()}};loop()},delay)},abort:function(){this._stopped=!0},destroy:function(){this.abort()}}),AnimationFactory=function(){this._items=[]};AnimationFactory.prototype={register:function(name,type){this._items.push({name:name,type:type})},create:function(element,options){var match,items=this._items;if(options&&options.type)for(var type=options.type.toLowerCase(),i=0;i<items.length;i++)if(items[i].name.toLowerCase()===type){match=items[i];break}return match?new match.type(element,options):void 0}},AnimationFactory.current=new AnimationFactory,Animation.create=function(type,element,options){return AnimationFactory.current.create(type,element,options)},deepExtend(kendo.drawing,{Animation:Animation,AnimationFactory:AnimationFactory})}(window.kendo.jQuery)}()}(),function(){!function(){!function(window,parseFloat,undefined){"use strict";function makeOutput(){function out(){for(var i=0;i<arguments.length;++i){var x=arguments[i];if(x===undefined)throw new Error("Cannot output undefined to PDF");if(x instanceof PDFValue)x.beforeRender(out),x.render(out);else if(isArray(x))renderArray(x,out);else if(isDate(x))renderDate(x,out);else if("number"==typeof x){if(isNaN(x))throw new Error("Cannot output NaN to PDF");var num=x.toFixed(7);num.indexOf(".")>=0&&(num=num.replace(/\.?0+$/,"")),"-0"==num&&(num="0"),output.writeString(num)}else/string|boolean/.test(typeof x)?output.writeString(x+""):"function"==typeof x.get?output.write(x.get()):"object"==typeof x&&(x?out(new PDFDictionary(x)):output.writeString("null"))}}var indentLevel=0,output=BinaryStream();return out.writeData=function(data){output.write(data)},out.withIndent=function(f){++indentLevel,f(out),--indentLevel},out.indent=function(){out(NL,pad("",2*indentLevel,"  ")),out.apply(null,arguments)},out.offset=function(){return output.offset()},out.toString=function(){throw new Error("FIX CALLER")},out.get=function(){return output.get()},out.stream=function(){return output},out}function wrapObject(value,id){var beforeRender=value.beforeRender,renderValue=value.render;value.beforeRender=function(){},value.render=function(out){out(id," 0 R")},value.renderFull=function(out){value._offset=out.offset(),out(id," 0 obj "),beforeRender.call(value,out),renderValue.call(value,out),out(" endobj")}}function getPaperOptions(getOption){var paperSize=getOption("paperSize",PAPER_SIZE.a4);if(!paperSize)return{};if("string"==typeof paperSize&&(paperSize=PAPER_SIZE[paperSize.toLowerCase()],null==paperSize))throw new Error("Unknown paper size");paperSize[0]=unitsToPoints(paperSize[0]),paperSize[1]=unitsToPoints(paperSize[1]),getOption("landscape",!1)&&(paperSize=[Math.max(paperSize[0],paperSize[1]),Math.min(paperSize[0],paperSize[1])]);var margin=getOption("margin");return margin&&("string"==typeof margin||"number"==typeof margin?(margin=unitsToPoints(margin,0),margin={left:margin,top:margin,right:margin,bottom:margin}):margin={left:unitsToPoints(margin.left,0),top:unitsToPoints(margin.top,0),right:unitsToPoints(margin.right,0),bottom:unitsToPoints(margin.bottom,0)},getOption("addMargin")&&(paperSize[0]+=margin.left+margin.right,paperSize[1]+=margin.top+margin.bottom)),{paperSize:paperSize,margin:margin}}function PDFDocument(options){function getOption(name,defval){return options&&null!=options[name]?options[name]:defval}var self=this,out=makeOutput(),objcount=0,objects=[];self.getOption=getOption,self.attach=function(value){return objects.indexOf(value)<0&&(wrapObject(value,++objcount),objects.push(value)),value},self.pages=[],self.FONTS={},self.IMAGES={},self.GRAD_COL_FUNCTIONS={},self.GRAD_OPC_FUNCTIONS={},self.GRAD_COL={},self.GRAD_OPC={};var catalog=self.attach(new PDFCatalog),pageTree=self.attach(new PDFPageTree);catalog.setPages(pageTree),self.addPage=function(options){var paperOptions=getPaperOptions(function(name,defval){return options&&null!=options[name]?options[name]:defval}),paperSize=paperOptions.paperSize,margin=paperOptions.margin,contentWidth=paperSize[0],contentHeight=paperSize[1];margin&&(contentWidth-=margin.left+margin.right,contentHeight-=margin.top+margin.bottom);var content=new PDFStream(makeOutput(),null,!0),props={Contents:self.attach(content),Parent:pageTree,MediaBox:[0,0,paperSize[0],paperSize[1]]},page=new PDFPage(self,props);return page._content=content,pageTree.addPage(self.attach(page)),page.transform(1,0,0,-1,0,paperSize[1]),margin&&(page.translate(margin.left,margin.top),page.rect(0,0,contentWidth,contentHeight),page.clip()),self.pages.push(page),page},self.render=function(){var i;for(out("%PDF-1.4",NL,"%ÂÁÚÏÎ",NL,NL),i=0;i<objects.length;++i)objects[i].renderFull(out),out(NL,NL);var xrefOffset=out.offset();for(out("xref",NL,0," ",objects.length+1,NL),out("0000000000 65535 f ",NL),i=0;i<objects.length;++i)out(zeropad(objects[i]._offset,10)," 00000 n ",NL);return out(NL),out("trailer",NL),out(new PDFDictionary({Size:objects.length+1,Root:catalog,Info:new PDFDictionary({Producer:new PDFString(getOption("producer","Kendo UI PDF Generator")),Title:new PDFString(getOption("title","")),Author:new PDFString(getOption("author","")),Subject:new PDFString(getOption("subject","")),Keywords:new PDFString(getOption("keywords","")),Creator:new PDFString(getOption("creator","Kendo UI PDF Generator")),CreationDate:getOption("date",new Date)})}),NL,NL),out("startxref",NL,xrefOffset,NL),out("%%EOF",NL),out.stream().offset(0)}}function loadBinary(url,cont){function error(){window.console&&(window.console.error?window.console.error("Cannot load URL: %s",url):window.console.log("Cannot load URL: %s",url)),cont(null)}var req=new XMLHttpRequest;req.open("GET",url,!0),HAS_TYPED_ARRAYS&&(req.responseType="arraybuffer"),req.onload=function(){200==req.status||304==req.status?cont(HAS_TYPED_ARRAYS?new Uint8Array(req.response):new VBArray(req.responseBody).toArray()):error()},req.onerror=error,req.send(null)}function loadFont(url,cont){var font=FONT_CACHE[url];font?cont(font):loadBinary(url,function(data){if(null==data)throw new Error("Cannot load font from "+url);var font=new kendo.pdf.TTFFont(data);FONT_CACHE[url]=font,cont(font)})}function loadImage(url,cont){function _load(url){img.src=url,img.complete&&!kendo.support.browser.msie?_onload():(img.onload=_onload,img.onerror=_onerror)}function _onerror(){cont(IMAGE_CACHE[url]="TAINTED")}function _onload(){if(blob&&/^image\/jpe?g$/i.test(blob.type)){var reader=new FileReader;return reader.onload=function(){img=new PDFJpegImage(img.width,img.height,BinaryStream(new Uint8Array(this.result))),URL.revokeObjectURL(bloburl),cont(IMAGE_CACHE[url]=img)},void reader.readAsArrayBuffer(blob)}var canvas=document.createElement("canvas");canvas.width=img.width,canvas.height=img.height;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);var imgdata;try{imgdata=ctx.getImageData(0,0,img.width,img.height)}catch(ex){return _onerror()}finally{bloburl&&URL.revokeObjectURL(bloburl)}for(var hasAlpha=!1,rgb=BinaryStream(),alpha=BinaryStream(),rawbytes=imgdata.data,i=0;i<rawbytes.length;){rgb.writeByte(rawbytes[i++]),rgb.writeByte(rawbytes[i++]),rgb.writeByte(rawbytes[i++]);var a=rawbytes[i++];255>a&&(hasAlpha=!0),alpha.writeByte(a)}if(hasAlpha)img=new PDFRawImage(img.width,img.height,rgb,alpha);else{var data=canvas.toDataURL("image/jpeg");data=data.substr(data.indexOf(";base64,")+8);var stream=BinaryStream();stream.writeBase64(data),stream.offset(0),img=new PDFJpegImage(img.width,img.height,stream)}cont(IMAGE_CACHE[url]=img)}var bloburl,blob,img=IMAGE_CACHE[url];if(img)cont(img);else if(img=new Image,/^data:/i.test(url)||(img.crossOrigin="Anonymous"),HAS_TYPED_ARRAYS&&!/^data:/i.test(url)){var xhr=new XMLHttpRequest;xhr.onload=function(){blob=xhr.response,bloburl=URL.createObjectURL(blob),_load(bloburl)},xhr.onerror=_onerror,xhr.open("GET",url,!0),xhr.responseType="blob",xhr.send()}else _load(url)}function manyLoader(loadOne){return function(urls,callback){var n=urls.length,i=n;if(0===n)return callback();for(;i-->0;)loadOne(urls[i],function(){0===--n&&callback()})}}function pad(str,len,ch){for(;str.length<len;)str=ch+str;return str}function zeropad(n,len){return pad(n+"",len,"0")}function hasOwnProperty(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function isDate(obj){return obj instanceof Date}function renderArray(a,out){out("["),a.length>0&&out.withIndent(function(){for(var i=0;i<a.length;++i)i>0&&i%8===0?out.indent(a[i]):out(" ",a[i])}),out(" ]")}function renderDate(date,out){out("(D:",zeropad(date.getUTCFullYear(),4),zeropad(date.getUTCMonth()+1,2),zeropad(date.getUTCDate(),2),zeropad(date.getUTCHours(),2),zeropad(date.getUTCMinutes(),2),zeropad(date.getUTCSeconds(),2),"Z)")}function mm2pt(mm){return mm*(72/25.4)}function cm2pt(cm){return mm2pt(10*cm)}function in2pt(inch){return 72*inch}function unitsToPoints(x,def){if("number"==typeof x)return x;if("string"==typeof x){var m;if(m=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(x)){var num=parseFloat(m[1]);if(!isNaN(num))return"pt"==m[2]?num:{mm:mm2pt,cm:cm2pt,"in":in2pt}[m[2]](num)}}if(null!=def)return def;throw new Error("Can't parse unit: "+x)}function PDFValue(){}function defclass(Ctor,proto,Base){Base||(Base=PDFValue),Ctor.prototype=new Base;for(var i in proto)hasOwnProperty(proto,i)&&(Ctor.prototype[i]=proto[i]);return Ctor}function _(name){return hasOwnProperty(PDFName_cache,name)?PDFName_cache[name]:PDFName_cache[name]=new PDFName(name)}function PDFJpegImage(width,height,data){this.asStream=function(){var stream=new PDFStream(data,{Type:_("XObject"),Subtype:_("Image"),Width:width,Height:height,BitsPerComponent:8,ColorSpace:_("DeviceRGB"),Filter:_("DCTDecode")});return stream._resourceName=_("I"+ ++RESOURCE_COUNTER),stream}}function PDFRawImage(width,height,rgb,alpha){this.asStream=function(pdf){var mask=new PDFStream(alpha,{Type:_("XObject"),Subtype:_("Image"),Width:width,Height:height,BitsPerComponent:8,ColorSpace:_("DeviceGray")},!0),stream=new PDFStream(rgb,{Type:_("XObject"),Subtype:_("Image"),Width:width,Height:height,BitsPerComponent:8,ColorSpace:_("DeviceRGB"),SMask:pdf.attach(mask)},!0);return stream._resourceName=_("I"+ ++RESOURCE_COUNTER),stream}}function makeHash(a){return a.map(function(x){return isArray(x)?makeHash(x):"number"==typeof x?(Math.round(1e3*x)/1e3).toFixed(3):x}).join(" ")}function cacheColorGradientFunction(pdf,r1,g1,b1,r2,g2,b2){var hash=makeHash([r1,g1,b1,r2,g2,b2]),func=pdf.GRAD_COL_FUNCTIONS[hash];return func||(func=pdf.GRAD_COL_FUNCTIONS[hash]=pdf.attach(new PDFDictionary({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[r1,g1,b1],C1:[r2,g2,b2]}))),func}function cacheOpacityGradientFunction(pdf,a1,a2){var hash=makeHash([a1,a2]),func=pdf.GRAD_OPC_FUNCTIONS[hash];return func||(func=pdf.GRAD_OPC_FUNCTIONS[hash]=pdf.attach(new PDFDictionary({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[a1],C1:[a2]}))),func}function makeGradientFunctions(pdf,stops){function assemble(funcs){return 1==funcs.length?funcs[0]:{FunctionType:3,Functions:funcs,Domain:[0,1],Bounds:offsets,Encode:encode}}var i,prev,cur,prevColor,curColor,hasAlpha=!1,opacities=[],colors=[],offsets=[],encode=[];for(i=1;i<stops.length;++i)prev=stops[i-1],cur=stops[i],prevColor=prev.color,curColor=cur.color,colors.push(cacheColorGradientFunction(pdf,prevColor.r,prevColor.g,prevColor.b,curColor.r,curColor.g,curColor.b)),(prevColor.a<1||curColor.a<1)&&(hasAlpha=!0),offsets.push(cur.offset),encode.push(0,1);if(hasAlpha)for(i=1;i<stops.length;++i)prev=stops[i-1],cur=stops[i],prevColor=prev.color,curColor=cur.color,opacities.push(cacheOpacityGradientFunction(pdf,prevColor.a,curColor.a));return offsets.pop(),{hasAlpha:hasAlpha,colors:assemble(colors),opacities:hasAlpha?assemble(opacities):null}}function cacheColorGradient(pdf,isRadial,stops,coords,funcs,box){var shading,hash;if(!box){var a=[isRadial].concat(coords);stops.forEach(function(x){a.push(x.offset,x.color.r,x.color.g,x.color.b)}),hash=makeHash(a),shading=pdf.GRAD_COL[hash]}return shading||(shading=new PDFDictionary({Type:_("Shading"),ShadingType:isRadial?3:2,ColorSpace:_("DeviceRGB"),Coords:coords,Domain:[0,1],Function:funcs,Extend:[!0,!0]}),pdf.attach(shading),shading._resourceName="S"+ ++RESOURCE_COUNTER,hash&&(pdf.GRAD_COL[hash]=shading)),shading}function cacheOpacityGradient(pdf,isRadial,stops,coords,funcs,box){var opacity,hash;if(!box){var a=[isRadial].concat(coords);stops.forEach(function(x){a.push(x.offset,x.color.a)}),hash=makeHash(a),opacity=pdf.GRAD_OPC[hash]}return opacity||(opacity=new PDFDictionary({Type:_("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:_("Mask"),S:_("Luminosity"),G:pdf.attach(new PDFStream("/a0 gs /s0 sh",{Type:_("XObject"),Subtype:_("Form"),FormType:1,BBox:box?[box.left,box.top+box.height,box.left+box.width,box.top]:[0,1,1,0],Group:{Type:_("Group"),S:_("Transparency"),CS:_("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:_("DeviceGray"),Coords:coords,Domain:[0,1],ShadingType:isRadial?3:2,Function:funcs,Extend:[!0,!0]}}}}))}}),pdf.attach(opacity),opacity._resourceName="O"+ ++RESOURCE_COUNTER,hash&&(pdf.GRAD_OPC[hash]=opacity)),opacity}function cacheGradient(pdf,gradient,box){var isRadial="radial"==gradient.type,funcs=makeGradientFunctions(pdf,gradient.stops),coords=isRadial?[gradient.start.x,gradient.start.y,gradient.start.r,gradient.end.x,gradient.end.y,gradient.end.r]:[gradient.start.x,gradient.start.y,gradient.end.x,gradient.end.y],shading=cacheColorGradient(pdf,isRadial,gradient.stops,coords,funcs.colors,gradient.userSpace&&box),opacity=funcs.hasAlpha?cacheOpacityGradient(pdf,isRadial,gradient.stops,coords,funcs.opacities,gradient.userSpace&&box):null;return{hasAlpha:funcs.hasAlpha,shading:shading,opacity:opacity}}function BinaryStream(data){function eof(){return offset>=length}function readByte(){return length>offset?data[offset++]:0}function writeByte(b){ensure(offset),data[offset++]=255&b,offset>length&&(length=offset)}function readShort(){return readByte()<<8|readByte()}function writeShort(w){writeByte(w>>8),writeByte(w)}function readShort_(){var w=readShort();return w>=32768?w-65536:w}function writeShort_(w){writeShort(0>w?w+65536:w)}function readLong(){return 65536*readShort()+readShort()}function writeLong(w){writeShort(w>>>16&65535),writeShort(65535&w)}function readLong_(){var w=readLong();return w>=2147483648?w-4294967296:w}function writeLong_(w){writeLong(0>w?w+4294967296:w)}function readFixed(){return readLong()/65536}function writeFixed(f){writeLong(Math.round(65536*f))}function readFixed_(){return readLong_()/65536}function writeFixed_(f){writeLong_(Math.round(65536*f))}function read(len){return times(len,readByte)}function readString(len){return String.fromCharCode.apply(String,read(len))}function writeString(str){for(var i=0;i<str.length;++i)writeByte(str.charCodeAt(i))}function times(n,reader){for(var ret=new Array(n),i=0;n>i;++i)ret[i]=reader();return ret}var offset=0,length=0;null==data?data=HAS_TYPED_ARRAYS?new Uint8Array(256):[]:length=data.length;var ensure=HAS_TYPED_ARRAYS?function(len){if(len>=data.length){var tmp=new Uint8Array(Math.max(len+256,2*data.length));tmp.set(data,0),data=tmp}}:function(){},get=HAS_TYPED_ARRAYS?function(){return new Uint8Array(data.buffer,0,length)}:function(){return data},write=HAS_TYPED_ARRAYS?function(bytes){if("string"==typeof bytes)return writeString(bytes);var len=bytes.length;ensure(offset+len),data.set(bytes,offset),offset+=len,offset>length&&(length=offset)}:function(bytes){if("string"==typeof bytes)return writeString(bytes);for(var i=0;i<bytes.length;++i)writeByte(bytes[i])},slice=HAS_TYPED_ARRAYS?function(start,length){if(data.buffer.slice)return new Uint8Array(data.buffer.slice(start,start+length));var x=new Uint8Array(length);return x.set(new Uint8Array(data.buffer,start,length)),x}:function(start,length){return data.slice(start,start+length)},stream={eof:eof,readByte:readByte,writeByte:writeByte,readShort:readShort,writeShort:writeShort,readLong:readLong,writeLong:writeLong,readFixed:readFixed,writeFixed:writeFixed,readShort_:readShort_,writeShort_:writeShort_,readLong_:readLong_,writeLong_:writeLong_,readFixed_:readFixed_,writeFixed_:writeFixed_,read:read,write:write,readString:readString,writeString:writeString,times:times,get:get,slice:slice,offset:function(pos){return null!=pos?(offset=pos,stream):offset},skip:function(nbytes){offset+=nbytes},toString:function(){throw new Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return length},saveExcursion:function(f){var pos=offset;try{return f()}finally{offset=pos}},writeBase64:function(base64){window.atob?writeString(window.atob(base64)):write(BASE64.decode(base64))},base64:function(){return BASE64.encode(get())}};return stream}function unquote(str){return str.replace(/^\s*(['"])(.*)\1\s*$/,"$2")}function parseFontDef(fontdef){var rx=/^\s*((normal|italic)\s+)?((normal|small-caps)\s+)?((normal|bold|\d+)\s+)?(([0-9.]+)(px|pt))(\/(([0-9.]+)(px|pt)|normal))?\s+(.*?)\s*$/i,m=rx.exec(fontdef);if(!m)return{fontSize:12,fontFamily:"sans-serif"};var fontSize=m[8]?parseInt(m[8],10):12;return{italic:m[2]&&"italic"==m[2].toLowerCase(),variant:m[4],bold:m[6]&&/bold|700/i.test(m[6]),fontSize:fontSize,lineHeight:m[12]?"normal"==m[12]?fontSize:parseInt(m[12],10):null,fontFamily:m[14].split(/\s*,\s*/g).map(unquote)}}function getFontURL(style){function mkFamily(name){return style.bold&&(name+="|bold"),style.italic&&(name+="|italic"),name.toLowerCase()}var name,url,fontFamily=style.fontFamily;if(fontFamily instanceof Array)for(var i=0;i<fontFamily.length&&(name=mkFamily(fontFamily[i]),!(url=FONT_MAPPINGS[name]));++i);else url=FONT_MAPPINGS[fontFamily.toLowerCase()];for(;"function"==typeof url;)url=url();return url||(url="Times-Roman"),url}function fontAlias(alias,name){alias=alias.toLowerCase(),FONT_MAPPINGS[alias]=function(){return FONT_MAPPINGS[name]},FONT_MAPPINGS[alias+"|bold"]=function(){return FONT_MAPPINGS[name+"|bold"]},FONT_MAPPINGS[alias+"|italic"]=function(){return FONT_MAPPINGS[name+"|italic"]},FONT_MAPPINGS[alias+"|bold|italic"]=function(){return FONT_MAPPINGS[name+"|bold|italic"]}}function defineFont(name,url){if(1==arguments.length)for(var i in name)hasOwnProperty(name,i)&&defineFont(i,name[i]);else switch(name=name.toLowerCase(),FONT_MAPPINGS[name]=url,name){case"dejavu sans":FONT_MAPPINGS["sans-serif"]=url;break;case"dejavu sans|bold":FONT_MAPPINGS["sans-serif|bold"]=url;break;case"dejavu sans|italic":FONT_MAPPINGS["sans-serif|italic"]=url;break;case"dejavu sans|bold|italic":FONT_MAPPINGS["sans-serif|bold|italic"]=url;break;case"dejavu serif":FONT_MAPPINGS.serif=url;break;case"dejavu serif|bold":FONT_MAPPINGS["serif|bold"]=url;break;case"dejavu serif|italic":FONT_MAPPINGS["serif|italic"]=url;break;case"dejavu serif|bold|italic":FONT_MAPPINGS["serif|bold|italic"]=url;break;case"dejavu mono":FONT_MAPPINGS.monospace=url;break;case"dejavu mono|bold":FONT_MAPPINGS["monospace|bold"]=url;break;case"dejavu mono|italic":FONT_MAPPINGS["monospace|italic"]=url;break;case"dejavu mono|bold|italic":FONT_MAPPINGS["monospace|bold|italic"]=url}}function mmul(a,b){var a1=a[0],b1=a[1],c1=a[2],d1=a[3],e1=a[4],f1=a[5],a2=b[0],b2=b[1],c2=b[2],d2=b[3],e2=b[4],f2=b[5];return[a1*a2+b1*c2,a1*b2+b1*d2,c1*a2+d1*c2,c1*b2+d1*d2,e1*a2+f1*c2+e2,e1*b2+f1*d2+f2]}function isIdentityMatrix(m){return 1===m[0]&&0===m[1]&&0===m[2]&&1===m[3]&&0===m[4]&&0===m[5]}var kendo=window.kendo,HAS_TYPED_ARRAYS=!!window.Uint8Array,NL="\n",RESOURCE_COUNTER=0,BASE64=function(){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(str){for(var input=str.replace(/[^A-Za-z0-9\+\/\=]/g,""),i=0,n=input.length,output=[];n>i;){var enc1=keyStr.indexOf(input.charAt(i++)),enc2=keyStr.indexOf(input.charAt(i++)),enc3=keyStr.indexOf(input.charAt(i++)),enc4=keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>>4,chr2=(15&enc2)<<4|enc3>>>2,chr3=(3&enc3)<<6|enc4;output.push(chr1),64!=enc3&&output.push(chr2),64!=enc4&&output.push(chr3)}return output},encode:function(bytes){for(var i=0,n=bytes.length,output="";n>i;){var chr1=bytes[i++],chr2=bytes[i++],chr3=bytes[i++],enc1=chr1>>>2,enc2=(3&chr1)<<4|chr2>>>4,enc3=(15&chr2)<<2|chr3>>>6,enc4=63&chr3;i-n==2?enc3=enc4=64:i-n==1&&(enc4=64),output+=keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4)}return output}}}(),PAPER_SIZE={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]},FONT_CACHE={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0},IMAGE_CACHE={},loadFonts=manyLoader(loadFont),loadImages=manyLoader(loadImage);PDFDocument.prototype={loadFonts:loadFonts,loadImages:loadImages,getFont:function(url){var font=this.FONTS[url];if(!font){if(font=FONT_CACHE[url],!font)throw new Error("Font "+url+" has not been loaded");font=this.attach(font===!0?new PDFStandardFont(url):new PDFFont(this,font)),this.FONTS[url]=font}return font},getImage:function(url){var img=this.IMAGES[url];if(!img){if(img=IMAGE_CACHE[url],!img)throw new Error("Image "+url+" has not been loaded");if("TAINTED"===img)return null;img=this.IMAGES[url]=this.attach(img.asStream(this))}return img},getOpacityGS:function(opacity,forStroke){var id=parseFloat(opacity).toFixed(3);opacity=parseFloat(id),id+=forStroke?"S":"F";var cache=this._opacityGSCache||(this._opacityGSCache={}),gs=cache[id];if(!gs){var props={Type:_("ExtGState")};forStroke?props.CA=opacity:props.ca=opacity,gs=this.attach(new PDFDictionary(props)),gs._resourceName=_("GS"+ ++RESOURCE_COUNTER),cache[id]=gs}return gs},dict:function(props){return new PDFDictionary(props)},name:function(str){return _(str)},stream:function(props,content){return new PDFStream(content,props)}};var isArray=Array.isArray||function(obj){return obj instanceof Array};PDFValue.prototype.beforeRender=function(){};var PDFString=defclass(function(value){this.value=value},{render:function(out){for(var txt="",esc=this.escape(),i=0;i<esc.length;++i)txt+=String.fromCharCode(255&esc.charCodeAt(i));out("(",txt,")")},escape:function(){return this.value.replace(/([\(\)\\])/g,"\\$1")},toString:function(){return this.value}}),PDFHexString=defclass(function(value){this.value=value},{render:function(out){out("<");for(var i=0;i<this.value.length;++i)out(zeropad(this.value.charCodeAt(i).toString(16),4));out(">")}},PDFString),PDFName=defclass(function(name){this.name=name},{render:function(out){out("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,function(c){return"#"+zeropad(c.charCodeAt(0).toString(16),2)})},toString:function(){return this.name}}),PDFName_cache={};PDFName.get=_;var PDFDictionary=defclass(function(props){this.props=props},{render:function(out){var props=this.props,empty=!0;out("<<"),out.withIndent(function(){for(var i in props)hasOwnProperty(props,i)&&!/^_/.test(i)&&(empty=!1,out.indent(_(i)," ",props[i]))}),empty||out.indent(),out(">>")}}),PDFStream=defclass(function(data,props,compress){if("string"==typeof data){var tmp=BinaryStream();tmp.write(data),data=tmp}this.data=data,this.props=props||{},this.compress=compress},{render:function(out){var data=this.data.get(),props=this.props;this.compress&&window.pako&&"function"==typeof window.pako.deflate&&(props.Filter?props.Filter instanceof Array||(props.Filter=[props.Filter]):props.Filter=[],props.Filter.unshift(_("FlateDecode")),data=window.pako.deflate(data)),props.Length=data.length,out(new PDFDictionary(props)," stream",NL),out.writeData(data),out(NL,"endstream")}}),PDFCatalog=defclass(function(props){props=this.props=props||{},props.Type=_("Catalog")},{setPages:function(pagesObj){this.props.Pages=pagesObj}},PDFDictionary),PDFPageTree=defclass(function(){this.props={Type:_("Pages"),Kids:[],Count:0}},{addPage:function(pageObj){this.props.Kids.push(pageObj),this.props.Count++}},PDFDictionary),PDFStandardFont=defclass(function(name){this.props={Type:_("Font"),Subtype:_("Type1"),BaseFont:_(name)},this._resourceName=_("F"+ ++RESOURCE_COUNTER)},{encodeText:function(str){return new PDFString(str+"")}},PDFDictionary),PDFFont=defclass(function(pdf,font,props){props=this.props=props||{},props.Type=_("Font"),props.Subtype=_("Type0"),props.Encoding=_("Identity-H"),this._pdf=pdf,this._font=font,this._sub=font.makeSubset(),this._resourceName=_("F"+ ++RESOURCE_COUNTER);var head=font.head;this.name=font.psName;var scale=this.scale=font.scale;this.bbox=[head.xMin*scale,head.yMin*scale,head.xMax*scale,head.yMax*scale],this.italicAngle=font.post.italicAngle,this.ascent=font.ascent*scale,this.descent=font.descent*scale,this.lineGap=font.lineGap*scale,this.capHeight=font.os2.capHeight||this.ascent,this.xHeight=font.os2.xHeight||0,this.stemV=0,this.familyClass=(font.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&this.familyClass<=7,this.isScript=10==this.familyClass,this.flags=(font.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32},{encodeText:function(text){return new PDFHexString(this._sub.encodeText(text+""))},getTextWidth:function(fontSize,text){for(var width=0,codeMap=this._font.cmap.getUnicodeEntry().codeMap,i=0;i<text.length;++i){var glyphId=codeMap[text.charCodeAt(i)];width+=this._font.widthOfGlyph(glyphId||0)}return width*fontSize/1e3},beforeRender:function(){var self=this,sub=self._sub,data=sub.render(),fontStream=new PDFStream(BinaryStream(data),{Length1:data.length},!0),descriptor=self._pdf.attach(new PDFDictionary({Type:_("FontDescriptor"),FontName:_(self._sub.psName),FontBBox:self.bbox,Flags:self.flags,StemV:self.stemV,ItalicAngle:self.italicAngle,Ascent:self.ascent,Descent:self.descent,CapHeight:self.capHeight,XHeight:self.xHeight,FontFile2:self._pdf.attach(fontStream)})),cmap=sub.ncid2ogid,firstChar=sub.firstChar,lastChar=sub.lastChar,charWidths=[];!function loop(i,chunk){if(lastChar>=i){var gid=cmap[i];null==gid?loop(i+1):(chunk||charWidths.push(i,chunk=[]),chunk.push(self._font.widthOfGlyph(gid)),loop(i+1,chunk))}}(firstChar);var descendant=new PDFDictionary({Type:_("Font"),Subtype:_("CIDFontType2"),BaseFont:_(self._sub.psName),CIDSystemInfo:new PDFDictionary({Registry:new PDFString("Adobe"),Ordering:new PDFString("Identity"),Supplement:0}),FontDescriptor:descriptor,FirstChar:firstChar,LastChar:lastChar,DW:Math.round(self._font.widthOfGlyph(0)),W:charWidths,CIDToGIDMap:self._pdf.attach(self._makeCidToGidMap())}),dict=self.props;dict.BaseFont=_(self._sub.psName),dict.DescendantFonts=[self._pdf.attach(descendant)];var unimap=new PDFToUnicodeCmap(firstChar,lastChar,sub.subset),unimapStream=new PDFStream(makeOutput(),null,!0);unimapStream.data(unimap),dict.ToUnicode=self._pdf.attach(unimapStream)},_makeCidToGidMap:function(){return new PDFStream(BinaryStream(this._sub.cidToGidMap()),null,!0)}},PDFDictionary),PDFToUnicodeCmap=defclass(function(firstChar,lastChar,map){this.firstChar=firstChar,this.lastChar=lastChar,this.map=map},{render:function(out){out.indent("/CIDInit /ProcSet findresource begin"),out.indent("12 dict begin"),out.indent("begincmap"),out.indent("/CIDSystemInfo <<"),out.indent("  /Registry (Adobe)"),out.indent("  /Ordering (UCS)"),out.indent("  /Supplement 0"),out.indent(">> def"),out.indent("/CMapName /Adobe-Identity-UCS def"),out.indent("/CMapType 2 def"),out.indent("1 begincodespacerange"),out.indent("  <0000><ffff>"),out.indent("endcodespacerange");var self=this;out.indent(self.lastChar-self.firstChar+1," beginbfchar"),
out.withIndent(function(){for(var code=self.firstChar;code<=self.lastChar;++code){var unicode=self.map[code];out.indent("<",zeropad(code.toString(16),4),">","<",zeropad(unicode.toString(16),4),">")}}),out.indent("endbfchar"),out.indent("endcmap"),out.indent("CMapName currentdict /CMap defineresource pop"),out.indent("end"),out.indent("end")}}),PDFPage=defclass(function(pdf,props){this._pdf=pdf,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._annotations=[],this._font=null,this._fontSize=null,this._contextStack=[],props=this.props=props||{},props.Type=_("Page"),props.ProcSet=[_("PDF"),_("Text"),_("ImageB"),_("ImageC"),_("ImageI")],props.Resources=new PDFDictionary({Font:new PDFDictionary(this._fontResources),ExtGState:new PDFDictionary(this._gsResources),XObject:new PDFDictionary(this._xResources),Pattern:new PDFDictionary(this._patResources),Shading:new PDFDictionary(this._shResources)}),props.Annots=this._annotations},{_out:function(){this._content.data.apply(null,arguments)},transform:function(a,b,c,d,e,f){isIdentityMatrix(arguments)||(this._matrix=mmul(arguments,this._matrix),this._out(a," ",b," ",c," ",d," ",e," ",f," cm"),this._out(NL))},translate:function(dx,dy){this.transform(1,0,0,1,dx,dy)},scale:function(sx,sy){this.transform(sx,0,0,sy,0,0)},rotate:function(angle){var cos=Math.cos(angle),sin=Math.sin(angle);this.transform(cos,sin,-sin,cos,0,0)},beginText:function(){this._textMode=!0,this._out("BT",NL)},endText:function(){this._textMode=!1,this._out("ET",NL)},_requireTextMode:function(){if(!this._textMode)throw new Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw new Error("No font selected; call page.setFont() first")},setFont:function(font,size){this._requireTextMode(),null==font?font=this._font:font instanceof PDFFont||(font=this._pdf.getFont(font)),null==size&&(size=this._fontSize),this._fontResources[font._resourceName]=font,this._font=font,this._fontSize=size,this._out(font._resourceName," ",size," Tf",NL)},setTextLeading:function(size){this._requireTextMode(),this._out(size," TL",NL)},setTextRenderingMode:function(mode){this._requireTextMode(),this._out(mode," Tr",NL)},showText:function(text,requestedWidth){if(this._requireFont(),text.length>1&&requestedWidth&&this._font instanceof PDFFont){var outputWidth=this._font.getTextWidth(this._fontSize,text),scale=requestedWidth/outputWidth*100;this._out(scale," Tz ")}this._out(this._font.encodeText(text)," Tj",NL)},showTextNL:function(text){this._requireFont(),this._out(this._font.encodeText(text)," '",NL)},addLink:function(uri,box){var ll=this._toPage({x:box.left,y:box.bottom}),ur=this._toPage({x:box.right,y:box.top});this._annotations.push(new PDFDictionary({Type:_("Annot"),Subtype:_("Link"),Rect:[ll.x,ll.y,ur.x,ur.y],Border:[0,0,0],A:new PDFDictionary({Type:_("Action"),S:_("URI"),URI:new PDFString(uri)})}))},setStrokeColor:function(r,g,b){this._out(r," ",g," ",b," RG",NL)},setOpacity:function(opacity){this.setFillOpacity(opacity),this.setStrokeOpacity(opacity),this._opacity*=opacity},setStrokeOpacity:function(opacity){if(1>opacity){var gs=this._pdf.getOpacityGS(this._opacity*opacity,!0);this._gsResources[gs._resourceName]=gs,this._out(gs._resourceName," gs",NL)}},setFillColor:function(r,g,b){this._out(r," ",g," ",b," rg",NL)},setFillOpacity:function(opacity){if(1>opacity){var gs=this._pdf.getOpacityGS(this._opacity*opacity,!1);this._gsResources[gs._resourceName]=gs,this._out(gs._resourceName," gs",NL)}},gradient:function(gradient,box){this.save(),this.rect(box.left,box.top,box.width,box.height),this.clip(),gradient.userSpace||this.transform(box.width,0,0,box.height,box.left,box.top);var oname,g=cacheGradient(this._pdf,gradient,box),sname=g.shading._resourceName;this._shResources[sname]=g.shading,g.hasAlpha&&(oname=g.opacity._resourceName,this._gsResources[oname]=g.opacity,this._out("/"+oname+" gs ")),this._out("/"+sname+" sh",NL),this.restore()},setDashPattern:function(dashArray,dashPhase){this._out(dashArray," ",dashPhase," d",NL)},setLineWidth:function(width){this._out(width," w",NL)},setLineCap:function(lineCap){this._out(lineCap," J",NL)},setLineJoin:function(lineJoin){this._out(lineJoin," j",NL)},setMitterLimit:function(mitterLimit){this._out(mitterLimit," M",NL)},save:function(){this._contextStack.push(this._context()),this._out("q",NL)},restore:function(){this._out("Q",NL),this._context(this._contextStack.pop())},moveTo:function(x,y){this._out(x," ",y," m",NL)},lineTo:function(x,y){this._out(x," ",y," l",NL)},bezier:function(x1,y1,x2,y2,x3,y3){this._out(x1," ",y1," ",x2," ",y2," ",x3," ",y3," c",NL)},bezier1:function(x1,y1,x3,y3){this._out(x1," ",y1," ",x3," ",y3," y",NL)},bezier2:function(x2,y2,x3,y3){this._out(x2," ",y2," ",x3," ",y3," v",NL)},close:function(){this._out("h",NL)},rect:function(x,y,w,h){this._out(x," ",y," ",w," ",h," re",NL)},ellipse:function(x,y,rx,ry){function _X(v){return x+v}function _Y(v){return y+v}var k=.5522847498307936;this.moveTo(_X(0),_Y(ry)),this.bezier(_X(rx*k),_Y(ry),_X(rx),_Y(ry*k),_X(rx),_Y(0)),this.bezier(_X(rx),_Y(-ry*k),_X(rx*k),_Y(-ry),_X(0),_Y(-ry)),this.bezier(_X(-rx*k),_Y(-ry),_X(-rx),_Y(-ry*k),_X(-rx),_Y(0)),this.bezier(_X(-rx),_Y(ry*k),_X(-rx*k),_Y(ry),_X(0),_Y(ry))},circle:function(x,y,r){this.ellipse(x,y,r,r)},stroke:function(){this._out("S",NL)},nop:function(){this._out("n",NL)},clip:function(){this._out("W n",NL)},clipStroke:function(){this._out("W S",NL)},closeStroke:function(){this._out("s",NL)},fill:function(){this._out("f",NL)},fillStroke:function(){this._out("B",NL)},drawImage:function(url){var img=this._pdf.getImage(url);img&&(this._xResources[img._resourceName]=img,this._out(img._resourceName," Do",NL))},comment:function(txt){var self=this;txt.split(/\r?\n/g).forEach(function(line){self._out("% ",line,NL)})},_context:function(val){return null==val?{opacity:this._opacity,matrix:this._matrix}:(this._opacity=val.opacity,void(this._matrix=val.matrix))},_toPage:function(p){var m=this._matrix,a=m[0],b=m[1],c=m[2],d=m[3],e=m[4],f=m[5];return{x:a*p.x+c*p.y+e,y:b*p.x+d*p.y+f}}},PDFDictionary),FONT_MAPPINGS={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"};fontAlias("Times New Roman","serif"),fontAlias("Courier New","monospace"),fontAlias("Arial","sans-serif"),fontAlias("Helvetica","sans-serif"),fontAlias("Verdana","sans-serif"),fontAlias("Tahoma","sans-serif"),fontAlias("Georgia","sans-serif"),fontAlias("Monaco","monospace"),fontAlias("Andale Mono","monospace"),kendo.pdf={Document:PDFDocument,BinaryStream:BinaryStream,defineFont:defineFont,parseFontDef:parseFontDef,getFontURL:getFontURL,loadFonts:loadFonts,loadImages:loadImages,getPaperOptions:getPaperOptions,TEXT_RENDERING_MODE:{fill:0,stroke:1,fillAndStroke:2,invisible:3,fillAndClip:4,strokeAndClip:5,fillStrokeClip:6,clip:7}}}(window,parseFloat)}(),function(){!function(window){"use strict";function hasOwnProperty(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function sortedKeys(obj){return Object.keys(obj).sort(function(a,b){return a-b}).map(parseFloat)}function Directory(data){this.raw=data,this.scalerType=data.readLong(),this.tableCount=data.readShort(),this.searchRange=data.readShort(),this.entrySelector=data.readShort(),this.rangeShift=data.readShort();for(var tables=this.tables={},i=0;i<this.tableCount;++i){var entry={tag:data.readString(4),checksum:data.readLong(),offset:data.readLong(),length:data.readLong()};tables[entry.tag]=entry}}function deftable(methods){function Ctor(file,def){this.definition=def,this.length=def.length,this.offset=def.offset,this.file=file,this.rawData=file.raw,this.parse(file.raw)}Ctor.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)};for(var i in methods)hasOwnProperty(methods,i)&&(Ctor[i]=Ctor.prototype[i]=methods[i]);return Ctor}function nextSubsetTag(){for(var ret="",n=subsetTag+"",i=0;i<n.length;++i)ret+=String.fromCharCode(n.charCodeAt(i)-48+65);return++subsetTag,ret}function Subfont(font){this.font=font,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=nextSubsetTag()+"+"+this.font.psName}function TTFFont(rawData,name){var self=this,data=self.contents=BinaryStream(rawData);if("ttcf"==data.readString(4)){if(!name)throw new Error("Must specify a name for TTC files");data.readLong();for(var numFonts=data.readLong(),i=0;numFonts>i;++i){var offset=data.readLong();if(data.saveExcursion(function(){data.offset(offset),self.parse()}),self.psName==name)return}throw new Error("Font "+name+" not found in collection")}data.offset(0),self.parse()}var PDF=window.kendo.pdf,BinaryStream=PDF.BinaryStream;Directory.prototype={readTable:function(name,Ctor){var def=this.tables[name];if(!def)throw new Error("Table "+name+" not found in directory");return this[name]=def.table=new Ctor(this,def)},render:function(tables){var tableCount=Object.keys(tables).length,maxpow2=Math.pow(2,Math.floor(Math.log(tableCount)/Math.LN2)),searchRange=16*maxpow2,entrySelector=Math.floor(Math.log(maxpow2)/Math.LN2),rangeShift=16*tableCount-searchRange,out=BinaryStream();out.writeLong(this.scalerType),out.writeShort(tableCount),out.writeShort(searchRange),out.writeShort(entrySelector),out.writeShort(rangeShift);var directoryLength=16*tableCount,offset=out.offset()+directoryLength,headOffset=null,tableData=BinaryStream();for(var tag in tables)if(hasOwnProperty(tables,tag)){var table=tables[tag];for(out.writeString(tag),out.writeLong(this.checksum(table)),out.writeLong(offset),out.writeLong(table.length),tableData.write(table),"head"==tag&&(headOffset=offset),offset+=table.length;offset%4;)tableData.writeByte(0),offset++}out.write(tableData.get());var sum=this.checksum(out.get()),adjustment=2981146554-sum;return out.offset(headOffset+8),out.writeLong(adjustment),out.get()},checksum:function(data){data=BinaryStream(data);for(var sum=0;!data.eof();)sum+=data.readLong();return 4294967295&sum}};var HeadTable=deftable({parse:function(data){data.offset(this.offset),this.version=data.readLong(),this.revision=data.readLong(),this.checkSumAdjustment=data.readLong(),this.magicNumber=data.readLong(),this.flags=data.readShort(),this.unitsPerEm=data.readShort(),this.created=data.read(8),this.modified=data.read(8),this.xMin=data.readShort_(),this.yMin=data.readShort_(),this.xMax=data.readShort_(),this.yMax=data.readShort_(),this.macStyle=data.readShort(),this.lowestRecPPEM=data.readShort(),this.fontDirectionHint=data.readShort_(),this.indexToLocFormat=data.readShort_(),this.glyphDataFormat=data.readShort_()},render:function(indexToLocFormat){var out=BinaryStream();return out.writeLong(this.version),out.writeLong(this.revision),out.writeLong(0),out.writeLong(this.magicNumber),out.writeShort(this.flags),out.writeShort(this.unitsPerEm),out.write(this.created),out.write(this.modified),out.writeShort_(this.xMin),out.writeShort_(this.yMin),out.writeShort_(this.xMax),out.writeShort_(this.yMax),out.writeShort(this.macStyle),out.writeShort(this.lowestRecPPEM),out.writeShort_(this.fontDirectionHint),out.writeShort_(indexToLocFormat),out.writeShort_(this.glyphDataFormat),out.get()}}),LocaTable=deftable({parse:function(data){data.offset(this.offset);var format=this.file.head.indexToLocFormat;0===format?this.offsets=data.times(this.length/2,function(){return 2*data.readShort()}):this.offsets=data.times(this.length/4,data.readLong)},offsetOf:function(id){return this.offsets[id]},lengthOf:function(id){return this.offsets[id+1]-this.offsets[id]},render:function(offsets){for(var out=BinaryStream(),needsLongFormat=offsets[offsets.length-1]>65535,i=0;i<offsets.length;++i)needsLongFormat?out.writeLong(offsets[i]):out.writeShort(offsets[i]/2);return{format:needsLongFormat?1:0,table:out.get()}}}),HheaTable=deftable({parse:function(data){data.offset(this.offset),this.version=data.readLong(),this.ascent=data.readShort_(),this.descent=data.readShort_(),this.lineGap=data.readShort_(),this.advanceWidthMax=data.readShort(),this.minLeftSideBearing=data.readShort_(),this.minRightSideBearing=data.readShort_(),this.xMaxExtent=data.readShort_(),this.caretSlopeRise=data.readShort_(),this.caretSlopeRun=data.readShort_(),this.caretOffset=data.readShort_(),data.skip(8),this.metricDataFormat=data.readShort_(),this.numOfLongHorMetrics=data.readShort()},render:function(ids){var out=BinaryStream();return out.writeLong(this.version),out.writeShort_(this.ascent),out.writeShort_(this.descent),out.writeShort_(this.lineGap),out.writeShort(this.advanceWidthMax),out.writeShort_(this.minLeftSideBearing),out.writeShort_(this.minRightSideBearing),out.writeShort_(this.xMaxExtent),out.writeShort_(this.caretSlopeRise),out.writeShort_(this.caretSlopeRun),out.writeShort_(this.caretOffset),out.write([0,0,0,0,0,0,0,0]),out.writeShort_(this.metricDataFormat),out.writeShort(ids.length),out.get()}}),MaxpTable=deftable({parse:function(data){data.offset(this.offset),this.version=data.readLong(),this.numGlyphs=data.readShort(),this.maxPoints=data.readShort(),this.maxContours=data.readShort(),this.maxComponentPoints=data.readShort(),this.maxComponentContours=data.readShort(),this.maxZones=data.readShort(),this.maxTwilightPoints=data.readShort(),this.maxStorage=data.readShort(),this.maxFunctionDefs=data.readShort(),this.maxInstructionDefs=data.readShort(),this.maxStackElements=data.readShort(),this.maxSizeOfInstructions=data.readShort(),this.maxComponentElements=data.readShort(),this.maxComponentDepth=data.readShort()},render:function(glyphIds){var out=BinaryStream();return out.writeLong(this.version),out.writeShort(glyphIds.length),out.writeShort(this.maxPoints),out.writeShort(this.maxContours),out.writeShort(this.maxComponentPoints),out.writeShort(this.maxComponentContours),out.writeShort(this.maxZones),out.writeShort(this.maxTwilightPoints),out.writeShort(this.maxStorage),out.writeShort(this.maxFunctionDefs),out.writeShort(this.maxInstructionDefs),out.writeShort(this.maxStackElements),out.writeShort(this.maxSizeOfInstructions),out.writeShort(this.maxComponentElements),out.writeShort(this.maxComponentDepth),out.get()}}),HmtxTable=deftable({parse:function(data){data.offset(this.offset);var dir=this.file,hhea=dir.hhea;this.metrics=data.times(hhea.numOfLongHorMetrics,function(){return{advance:data.readShort(),lsb:data.readShort_()}});var lsbCount=dir.maxp.numGlyphs-dir.hhea.numOfLongHorMetrics;this.leftSideBearings=data.times(lsbCount,data.readShort_)},forGlyph:function(id){var metrics=this.metrics,n=metrics.length;return n>id?metrics[id]:{advance:metrics[n-1].advance,lsb:this.leftSideBearings[id-n]}},render:function(glyphIds){for(var out=BinaryStream(),i=0;i<glyphIds.length;++i){var m=this.forGlyph(glyphIds[i]);out.writeShort(m.advance),out.writeShort_(m.lsb)}return out.get()}}),GlyfTable=function(){function SimpleGlyph(raw){this.raw=raw}function CompoundGlyph(data){this.raw=data;for(var ids=this.glyphIds=[],offsets=this.idOffsets=[];;){var flags=data.readShort();if(offsets.push(data.offset()),ids.push(data.readShort()),!(flags&MORE_COMPONENTS))break;data.skip(flags&ARG_1_AND_2_ARE_WORDS?4:2),flags&WE_HAVE_A_TWO_BY_TWO?data.skip(8):flags&WE_HAVE_AN_X_AND_Y_SCALE?data.skip(4):flags&WE_HAVE_A_SCALE&&data.skip(2)}}SimpleGlyph.prototype={compound:!1,render:function(){return this.raw.get()}};var ARG_1_AND_2_ARE_WORDS=1,WE_HAVE_A_SCALE=8,MORE_COMPONENTS=32,WE_HAVE_AN_X_AND_Y_SCALE=64,WE_HAVE_A_TWO_BY_TWO=128;return CompoundGlyph.prototype={compound:!0,render:function(old2new){for(var out=BinaryStream(this.raw.get()),i=0;i<this.glyphIds.length;++i){var id=this.glyphIds[i];out.offset(this.idOffsets[i]),out.writeShort(old2new[id])}return out.get()}},deftable({parse:function(){this.cache={}},glyphFor:function(id){var cache=this.cache;if(hasOwnProperty(cache,id))return cache[id];var loca=this.file.loca,length=loca.lengthOf(id);if(0===length)return cache[id]=null;var data=this.rawData,offset=this.offset+loca.offsetOf(id),raw=BinaryStream(data.slice(offset,length)),numberOfContours=raw.readShort_(),xMin=raw.readShort_(),yMin=raw.readShort_(),xMax=raw.readShort_(),yMax=raw.readShort_(),glyph=cache[id]=-1==numberOfContours?new CompoundGlyph(raw):new SimpleGlyph(raw);return glyph.numberOfContours=numberOfContours,glyph.xMin=xMin,glyph.yMin=yMin,glyph.xMax=xMax,glyph.yMax=yMax,glyph},render:function(glyphs,oldIds,old2new){for(var out=BinaryStream(),offsets=[],i=0;i<oldIds.length;++i){var id=oldIds[i],glyph=glyphs[id];offsets.push(out.offset()),glyph&&out.write(glyph.render(old2new))}return offsets.push(out.offset()),{table:out.get(),offsets:offsets}}})}(),NameTable=function(){function NameEntry(text,entry){this.text=text,this.length=text.length,this.platformID=entry.platformID,this.platformSpecificID=entry.platformSpecificID,this.languageID=entry.languageID,this.nameID=entry.nameID}return deftable({parse:function(data){data.offset(this.offset),data.readShort();for(var count=data.readShort(),stringOffset=this.offset+data.readShort(),nameRecords=data.times(count,function(){return{platformID:data.readShort(),platformSpecificID:data.readShort(),languageID:data.readShort(),nameID:data.readShort(),length:data.readShort(),offset:data.readShort()+stringOffset}}),strings=this.strings={},i=0;i<nameRecords.length;++i){var rec=nameRecords[i];data.offset(rec.offset);var text=data.readString(rec.length);strings[rec.nameID]||(strings[rec.nameID]=[]),strings[rec.nameID].push(new NameEntry(text,rec))}this.postscriptEntry=strings[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(psName){var strings=this.strings,strCount=0;for(var i in strings)hasOwnProperty(strings,i)&&(strCount+=strings[i].length);var out=BinaryStream(),strTable=BinaryStream();out.writeShort(0),out.writeShort(strCount),out.writeShort(6+12*strCount);for(i in strings)if(hasOwnProperty(strings,i))for(var list=6==i?[new NameEntry(psName,this.postscriptEntry)]:strings[i],j=0;j<list.length;++j){var str=list[j];out.writeShort(str.platformID),out.writeShort(str.platformSpecificID),out.writeShort(str.languageID),out.writeShort(str.nameID),out.writeShort(str.length),out.writeShort(strTable.offset()),strTable.writeString(str.text)}return out.write(strTable.get()),out.get()}})}(),PostTable=function(){var POSTSCRIPT_GLYPHS=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g);return deftable({parse:function(data){data.offset(this.offset),this.format=data.readLong(),this.italicAngle=data.readFixed_(),this.underlinePosition=data.readShort_(),this.underlineThickness=data.readShort_(),this.isFixedPitch=data.readLong(),this.minMemType42=data.readLong(),this.maxMemType42=data.readLong(),this.minMemType1=data.readLong(),this.maxMemType1=data.readLong();var numberOfGlyphs;switch(this.format){case 65536:case 196608:break;case 131072:numberOfGlyphs=data.readShort(),this.glyphNameIndex=data.times(numberOfGlyphs,data.readShort),this.names=[];for(var limit=this.offset+this.length;data.offset()<limit;)this.names.push(data.readString(data.readByte()));break;case 151552:numberOfGlyphs=data.readShort(),this.offsets=data.read(numberOfGlyphs);break;case 262144:this.map=data.times(this.file.maxp.numGlyphs,data.readShort)}},glyphFor:function(code){switch(this.format){case 65536:return POSTSCRIPT_GLYPHS[code]||".notdef";case 131072:var index=this.glyphNameIndex[code];return index<POSTSCRIPT_GLYPHS.length?POSTSCRIPT_GLYPHS[index]:this.names[index-POSTSCRIPT_GLYPHS.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[code]||65535}},render:function(mapping){if(196608==this.format)return this.raw();var out=BinaryStream(this.rawData.slice(this.offset,32));out.writeLong(131072),out.offset(32);for(var indexes=[],strings=[],i=0;i<mapping.length;++i){var id=mapping[i],post=this.glyphFor(id),index=POSTSCRIPT_GLYPHS.indexOf(post);index>=0?indexes.push(index):(indexes.push(POSTSCRIPT_GLYPHS.length+strings.length),strings.push(post))}for(out.writeShort(mapping.length),i=0;i<indexes.length;++i)out.writeShort(indexes[i]);for(i=0;i<strings.length;++i)out.writeByte(strings[i].length),out.writeString(strings[i]);return out.get()}})}(),CmapTable=function(){function CmapEntry(data,offset){var self=this;self.platformID=data.readShort(),self.platformSpecificID=data.readShort(),self.offset=offset+data.readLong(),data.saveExcursion(function(){switch(data.offset(self.offset),self.format=data.readShort(),self.length=data.readShort(),self.language=data.readShort(),self.isUnicode=3==self.platformID&&1==self.platformSpecificID&&4==self.format||0===self.platformID&&4==self.format,self.codeMap={},self.format){case 0:for(var i=0;256>i;++i)self.codeMap[i]=data.readByte();break;case 4:var segCount=data.readShort()/2;data.skip(6);var endCode=data.times(segCount,data.readShort);data.skip(2);var startCode=data.times(segCount,data.readShort),idDelta=data.times(segCount,data.readShort_),idRangeOffset=data.times(segCount,data.readShort),count=(self.length+self.offset-data.offset())/2,glyphIds=data.times(count,data.readShort);for(i=0;segCount>i;++i)for(var start=startCode[i],end=endCode[i],code=start;end>=code;++code){var glyphId;if(0===idRangeOffset[i])glyphId=code+idDelta[i];else{var index=idRangeOffset[i]/2-(segCount-i)+(code-start);glyphId=glyphIds[index]||0,0!==glyphId&&(glyphId+=idDelta[i])}self.codeMap[code]=65535&glyphId}}})}function renderCharmap(ncid2ogid,ogid2ngid){function new_gid(charcode){return ogid2ngid[ncid2ogid[charcode]]}for(var codes=sortedKeys(ncid2ogid),startCodes=[],endCodes=[],last=null,diff=null,i=0;i<codes.length;++i){var code=codes[i],gid=new_gid(code),delta=gid-code;(null==last||delta!==diff)&&(last&&endCodes.push(last),startCodes.push(code),diff=delta),last=code}last&&endCodes.push(last),endCodes.push(65535),startCodes.push(65535);var segCount=startCodes.length,segCountX2=2*segCount,searchRange=2*Math.pow(2,Math.floor(Math.log(segCount)/Math.LN2)),entrySelector=Math.log(searchRange/2)/Math.LN2,rangeShift=segCountX2-searchRange,deltas=[],rangeOffsets=[],glyphIds=[];for(i=0;segCount>i;++i){var startCode=startCodes[i],endCode=endCodes[i];if(65535==startCode){deltas.push(0),rangeOffsets.push(0);break}var startGlyph=new_gid(startCode);if(startCode-startGlyph>=32768){deltas.push(0),rangeOffsets.push(2*(glyphIds.length+segCount-i));for(var j=startCode;endCode>=j;++j)glyphIds.push(new_gid(j))}else deltas.push(startGlyph-startCode),rangeOffsets.push(0)}var out=BinaryStream();return out.writeShort(3),out.writeShort(1),out.writeLong(12),out.writeShort(4),out.writeShort(16+8*segCount+2*glyphIds.length),out.writeShort(0),out.writeShort(segCountX2),out.writeShort(searchRange),out.writeShort(entrySelector),out.writeShort(rangeShift),endCodes.forEach(out.writeShort),out.writeShort(0),startCodes.forEach(out.writeShort),deltas.forEach(out.writeShort_),rangeOffsets.forEach(out.writeShort),glyphIds.forEach(out.writeShort),out.get()}return deftable({parse:function(data){var self=this,offset=self.offset;data.offset(offset),self.version=data.readShort();var tableCount=data.readShort();self.unicodeEntry=null,self.tables=data.times(tableCount,function(){var entry=new CmapEntry(data,offset);return entry.isUnicode&&(self.unicodeEntry=entry),entry})},render:function(ncid2ogid,ogid2ngid){var out=BinaryStream();return out.writeShort(0),out.writeShort(1),out.write(renderCharmap(ncid2ogid,ogid2ngid)),out.get()},getUnicodeEntry:function(){if(!this.unicodeEntry)throw new Error("Font doesn't have an Unicode encoding");return this.unicodeEntry}})}(),OS2Table=deftable({parse:function(data){data.offset(this.offset),this.version=data.readShort(),this.averageCharWidth=data.readShort_(),this.weightClass=data.readShort(),this.widthClass=data.readShort(),this.type=data.readShort(),this.ySubscriptXSize=data.readShort_(),this.ySubscriptYSize=data.readShort_(),this.ySubscriptXOffset=data.readShort_(),this.ySubscriptYOffset=data.readShort_(),this.ySuperscriptXSize=data.readShort_(),this.ySuperscriptYSize=data.readShort_(),this.ySuperscriptXOffset=data.readShort_(),this.ySuperscriptYOffset=data.readShort_(),this.yStrikeoutSize=data.readShort_(),this.yStrikeoutPosition=data.readShort_(),this.familyClass=data.readShort_(),this.panose=data.times(10,data.readByte),this.charRange=data.times(4,data.readLong),this.vendorID=data.readString(4),this.selection=data.readShort(),this.firstCharIndex=data.readShort(),this.lastCharIndex=data.readShort(),this.version>0&&(this.ascent=data.readShort_(),this.descent=data.readShort_(),this.lineGap=data.readShort_(),this.winAscent=data.readShort(),this.winDescent=data.readShort(),this.codePageRange=data.times(2,data.readLong),this.version>1&&(this.xHeight=data.readShort(),this.capHeight=data.readShort(),this.defaultChar=data.readShort(),this.breakChar=data.readShort(),this.maxContext=data.readShort()))},render:function(){return this.raw()}}),subsetTag=1e5;Subfont.prototype={use:function(ch){var code;if("string"==typeof ch){for(var ret="",i=0;i<ch.length;++i)code=this.use(ch.charCodeAt(i)),ret+=String.fromCharCode(code);return ret}if(code=this.unicodes[ch],!code){code=this.next++,this.subset[code]=ch,this.unicodes[ch]=code;var old_gid=this.font.cmap.getUnicodeEntry().codeMap[ch];if(old_gid&&(this.ncid2ogid[code]=old_gid,null==this.ogid2ngid[old_gid])){var new_gid=this.nextGid++;this.ogid2ngid[old_gid]=new_gid,this.ngid2ogid[new_gid]=old_gid}}return code},encodeText:function(text){return this.use(text)},glyphIds:function(){return sortedKeys(this.ogid2ngid)},glyphsFor:function(glyphIds,result){result||(result={});for(var i=0;i<glyphIds.length;++i){var id=glyphIds[i];if(!result[id]){var glyph=result[id]=this.font.glyf.glyphFor(id);glyph&&glyph.compound&&this.glyphsFor(glyph.glyphIds,result)}}return result},render:function(){var glyphs=this.glyphsFor(this.glyphIds());for(var old_gid in glyphs)if(hasOwnProperty(glyphs,old_gid)&&(old_gid=parseInt(old_gid,10),null==this.ogid2ngid[old_gid])){var new_gid=this.nextGid++;this.ogid2ngid[old_gid]=new_gid,this.ngid2ogid[new_gid]=old_gid}var new_gid_ids=sortedKeys(this.ngid2ogid),old_gid_ids=new_gid_ids.map(function(id){return this.ngid2ogid[id]},this),font=this.font,glyf=font.glyf.render(glyphs,old_gid_ids,this.ogid2ngid),loca=font.loca.render(glyf.offsets);this.lastChar=this.next-1;var tables={cmap:CmapTable.render(this.ncid2ogid,this.ogid2ngid),glyf:glyf.table,loca:loca.table,hmtx:font.hmtx.render(old_gid_ids),hhea:font.hhea.render(old_gid_ids),maxp:font.maxp.render(old_gid_ids),post:font.post.render(old_gid_ids),name:font.name.render(this.psName),head:font.head.render(loca.format),"OS/2":font.os2.render()};return this.font.directory.render(tables)},cidToGidMap:function(){for(var out=BinaryStream(),len=0,cid=this.firstChar;cid<this.next;++cid){for(;cid>len;)out.writeShort(0),len++;var old_gid=this.ncid2ogid[cid];if(old_gid){var new_gid=this.ogid2ngid[old_gid];out.writeShort(new_gid)}else out.writeShort(0);len++}return out.get()}},TTFFont.prototype={parse:function(){var dir=this.directory=new Directory(this.contents);this.head=dir.readTable("head",HeadTable),this.loca=dir.readTable("loca",LocaTable),this.hhea=dir.readTable("hhea",HheaTable),this.maxp=dir.readTable("maxp",MaxpTable),this.hmtx=dir.readTable("hmtx",HmtxTable),this.glyf=dir.readTable("glyf",GlyfTable),this.name=dir.readTable("name",NameTable),this.post=dir.readTable("post",PostTable),this.cmap=dir.readTable("cmap",CmapTable),this.os2=dir.readTable("OS/2",OS2Table),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(glyph){return this.hmtx.forGlyph(glyph).advance*this.scale},makeSubset:function(){return new Subfont(this)}},PDF.TTFFont=TTFFont}(window)}(),function(){!function(kendo,$){"use strict";function render(group,callback){function getOption(name,defval,hash){return hash||(hash=options),hash.pdf&&null!=hash.pdf[name]?hash.pdf[name]:defval}function doIt(){function drawPage(group){var options=group.options,tmp=optimize(group),bbox=tmp.bbox;group=tmp.root;var paperSize=getOption("paperSize",getOption("paperSize","auto"),options),addMargin=!1;if("auto"==paperSize)if(bbox){var size=bbox.getSize();paperSize=[size.width,size.height],addMargin=!0;var origin=bbox.getOrigin();tmp=new drawing.Group,tmp.transform(new geo.Matrix(1,0,0,1,-origin.x,-origin.y)),tmp.append(group),group=tmp}else paperSize="A4";var page;page=pdf.addPage({paperSize:paperSize,margin:getOption("margin",getOption("margin"),options),addMargin:addMargin,landscape:getOption("landscape",getOption("landscape",!1),options)}),drawElement(group,page,pdf)}if(!(--count>0)){var pdf=new kendo.pdf.Document({producer:getOption("producer"),title:getOption("title"),author:getOption("author"),subject:getOption("subject"),keywords:getOption("keywords"),creator:getOption("creator"),date:getOption("date")});multiPage?group.children.forEach(drawPage):drawPage(group),callback(pdf.render(),pdf)}}var fonts=[],images=[],options=group.options,multiPage=getOption("multiPage");group.traverse(function(element){dispatch({Image:function(element){images.indexOf(element.src())<0&&images.push(element.src())},Text:function(element){var style=kendo.pdf.parseFontDef(element.options.font),url=kendo.pdf.getFontURL(style);fonts.indexOf(url)<0&&fonts.push(url)}},element)});var count=2;kendo.pdf.loadFonts(fonts,doIt),kendo.pdf.loadImages(images,doIt)}function toDataURL(group,callback){render(group,function(data){callback("data:application/pdf;base64,"+data.base64())})}function toBlob(group,callback){render(group,function(data){callback(new Blob([data.get()],{
type:"application/pdf"}))})}function saveAs(group,filename,proxy,callback){window.Blob&&!kendo.support.browser.safari?toBlob(group,function(blob){kendo.saveAs({dataURI:blob,fileName:filename}),callback&&callback(blob)}):toDataURL(group,function(dataURL){kendo.saveAs({dataURI:dataURL,fileName:filename,proxyURL:proxy}),callback&&callback(dataURL)})}function dispatch(handlers,element){var handler=handlers[element.nodeType];return handler?handler.call.apply(handler,arguments):element}function drawElement(element,page,pdf){element.options._pdfDebug&&page.comment("BEGIN: "+element.options._pdfDebug);var transform=element.transform(),opacity=element.opacity();if(page.save(),null!=opacity&&1>opacity&&page.setOpacity(opacity),setStrokeOptions(element,page,pdf),setFillOptions(element,page,pdf),setClipping(element,page,pdf),transform){var m=transform.matrix();page.transform(m.a,m.b,m.c,m.d,m.e,m.f)}dispatch({Path:drawPath,MultiPath:drawMultiPath,Circle:drawCircle,Arc:drawArc,Text:drawText,Image:drawImage,Group:drawGroup},element,page,pdf),page.restore(),element.options._pdfDebug&&page.comment("END: "+element.options._pdfDebug)}function setStrokeOptions(element,page){var stroke=element.stroke&&element.stroke();if(stroke){var color=stroke.color;if(color){if(color=parseColor(color),null==color)return;page.setStrokeColor(color.r,color.g,color.b),1!=color.a&&page.setStrokeOpacity(color.a)}var width=stroke.width;if(null!=width){if(0===width)return;page.setLineWidth(width)}var dashType=stroke.dashType;dashType&&page.setDashPattern(DASH_PATTERNS[dashType],0);var lineCap=stroke.lineCap;lineCap&&page.setLineCap(LINE_CAP[lineCap]);var lineJoin=stroke.lineJoin;lineJoin&&page.setLineJoin(LINE_JOIN[lineJoin]);var opacity=stroke.opacity;null!=opacity&&page.setStrokeOpacity(opacity)}}function setFillOptions(element,page){var fill=element.fill&&element.fill();if(fill&&!(fill instanceof drawing.Gradient)){var color=fill.color;if(color){if(color=parseColor(color),null==color)return;page.setFillColor(color.r,color.g,color.b),1!=color.a&&page.setFillOpacity(color.a)}var opacity=fill.opacity;null!=opacity&&page.setFillOpacity(opacity)}}function setClipping(element,page,pdf){var clip=element.clip();clip&&(_drawPath(clip,page,pdf),page.clip())}function shouldDraw(thing){return thing&&(thing instanceof drawing.Gradient||thing.color&&!/^(none|transparent)$/i.test(thing.color)&&(null==thing.width||thing.width>0)&&(null==thing.opacity||thing.opacity>0))}function maybeGradient(element,page,pdf,stroke){var fill=element.fill();if(fill instanceof drawing.Gradient){stroke?page.clipStroke():page.clip();var start,end,isRadial=fill instanceof drawing.RadialGradient;isRadial?(start={x:fill.center().x,y:fill.center().y,r:0},end={x:fill.center().x,y:fill.center().y,r:fill.radius()}):(start={x:fill.start().x,y:fill.start().y},end={x:fill.end().x,y:fill.end().y});var gradient={type:isRadial?"radial":"linear",start:start,end:end,userSpace:fill.userSpace(),stops:fill.stops.elements().map(function(stop){var offset=stop.offset();offset=/%$/.test(offset)?parseFloat(offset)/100:parseFloat(offset);var color=parseColor(stop.color());return color.a*=stop.opacity(),{offset:offset,color:color}})},box=element.rawBBox(),tl=box.topLeft(),size=box.getSize();return box={left:tl.x,top:tl.y,width:size.width,height:size.height},page.gradient(gradient,box),!0}}function maybeFillStroke(element,page,pdf){shouldDraw(element.fill())&&shouldDraw(element.stroke())?maybeGradient(element,page,pdf,!0)||page.fillStroke():shouldDraw(element.fill())?maybeGradient(element,page,pdf,!1)||page.fill():shouldDraw(element.stroke())?page.stroke():page.nop()}function maybeDrawRect(path,page){var segments=path.segments;if(4==segments.length&&path.options.closed){for(var a=[],i=0;i<segments.length;++i){if(segments[i].controlIn())return!1;a[i]=segments[i].anchor()}var isRect=a[0].y==a[1].y&&a[1].x==a[2].x&&a[2].y==a[3].y&&a[3].x==a[0].x||a[0].x==a[1].x&&a[1].y==a[2].y&&a[2].x==a[3].x&&a[3].y==a[0].y;if(isRect)return page.rect(a[0].x,a[0].y,a[2].x-a[0].x,a[2].y-a[0].y),!0}}function _drawPath(element,page,pdf){var segments=element.segments;if(0!==segments.length&&!maybeDrawRect(element,page,pdf)){for(var prev,i=0;i<segments.length;++i){var seg=segments[i],anchor=seg.anchor();if(prev){var prevOut=prev.controlOut(),controlIn=seg.controlIn();prevOut&&controlIn?page.bezier(prevOut.x,prevOut.y,controlIn.x,controlIn.y,anchor.x,anchor.y):page.lineTo(anchor.x,anchor.y)}else page.moveTo(anchor.x,anchor.y);prev=seg}element.options.closed&&page.close()}}function drawPath(element,page,pdf){_drawPath(element,page,pdf),maybeFillStroke(element,page,pdf)}function drawMultiPath(element,page,pdf){for(var paths=element.paths,i=0;i<paths.length;++i)_drawPath(paths[i],page,pdf);maybeFillStroke(element,page,pdf)}function drawCircle(element,page,pdf){var g=element.geometry();page.circle(g.center.x,g.center.y,g.radius),maybeFillStroke(element,page,pdf)}function drawArc(element,page,pdf){var points=element.geometry().curvePoints();page.moveTo(points[0].x,points[0].y);for(var i=1;i<points.length;)page.bezier(points[i].x,points[i++].y,points[i].x,points[i++].y,points[i].x,points[i++].y);maybeFillStroke(element,page,pdf)}function drawText(element,page){var mode,style=kendo.pdf.parseFontDef(element.options.font),pos=element._position;element.fill()&&element.stroke()?mode=TEXT_RENDERING_MODE.fillAndStroke:element.fill()?mode=TEXT_RENDERING_MODE.fill:element.stroke()&&(mode=TEXT_RENDERING_MODE.stroke),page.transform(1,0,0,-1,pos.x,pos.y+style.fontSize),page.beginText(),page.setFont(kendo.pdf.getFontURL(style),style.fontSize),page.setTextRenderingMode(mode),page.showText(element.content(),element._pdfRect?element._pdfRect.width():null),page.endText()}function drawGroup(element,page,pdf){element._pdfLink&&page.addLink(element._pdfLink.url,element._pdfLink);for(var children=element.children,i=0;i<children.length;++i)drawElement(children[i],page,pdf)}function drawImage(element,page){var url=element.src();if(url){var rect=element.rect(),tl=rect.getOrigin(),sz=rect.getSize();page.transform(sz.width,0,0,-sz.height,tl.x,tl.y+sz.height),page.drawImage(url)}}function exportPDF(group,options){var defer=$.Deferred();for(var i in options)group.options.set("pdf."+i,options[i]);return drawing.pdf.toDataURL(group,defer.resolve),defer.promise()}function parseColor(x){var color=kendo.parseColor(x,!0);return color?color.toRGB():null}function optimize(root){function change(newShape){return changed=!0,newShape}function visible(shape){return shape.visible()&&shape.opacity()>0&&(shouldDraw(shape.fill())||shouldDraw(shape.stroke()))}function optArray(a){for(var b=[],i=0;i<a.length;++i){var el=opt(a[i]);null!=el&&b.push(el)}return b}function withClipping(shape,f){var saveclipbox=clipbox,savematrix=matrix;shape.transform()&&(matrix=matrix.multiplyCopy(shape.transform().matrix()));var clip=shape.clip();clip&&(clip=clip.bbox(),clip&&(clip=clip.bbox(matrix),clipbox=clipbox?geo.Rect.intersect(clipbox,clip):clip));try{return f()}finally{clipbox=saveclipbox,matrix=savematrix}}function inClipbox(shape){if(null==clipbox)return!1;var box=shape.rawBBox().bbox(matrix);return clipbox&&box&&(box=geo.Rect.intersect(box,clipbox)),box}function opt(shape){return withClipping(shape,function(){if(!(shape instanceof drawing.Group||shape instanceof drawing.MultiPath)){var box=inClipbox(shape);if(!box)return change(null);currentBox=currentBox?geo.Rect.union(currentBox,box):box}return dispatch({Path:function(shape){return 0!==shape.segments.length&&visible(shape)?shape:change(null)},MultiPath:function(shape){if(!visible(shape))return change(null);var el=new drawing.MultiPath(shape.options);return el.paths=optArray(shape.paths),0===el.paths.length?change(null):el},Circle:function(shape){return visible(shape)?shape:change(null)},Arc:function(shape){return visible(shape)?shape:change(null)},Text:function(shape){return/\S/.test(shape.content())&&visible(shape)?shape:change(null)},Image:function(shape){return shape.visible()&&shape.opacity()>0?shape:change(null)},Group:function(shape){var el=new drawing.Group(shape.options);return el.children=optArray(shape.children),el._pdfLink=shape._pdfLink,shape===root||0!==el.children.length||shape._pdfLink?el:change(null)}},shape)})}var changed,clipbox=!1,matrix=geo.Matrix.unit(),currentBox=null;do changed=!1,root=opt(root);while(root&&changed);return{root:root,bbox:currentBox}}var drawing=kendo.drawing,geo=kendo.geometry,TEXT_RENDERING_MODE=kendo.pdf.TEXT_RENDERING_MODE,DASH_PATTERNS={dash:[4],dashDot:[4,2,1,2],dot:[1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2],solid:[]},LINE_CAP={butt:0,round:1,square:2},LINE_JOIN={miter:0,round:1,bevel:2};kendo.deepExtend(drawing,{exportPDF:exportPDF,pdf:{toDataURL:toDataURL,toBlob:toBlob,saveAs:saveAs,toStream:render}})}(window.kendo,window.kendo.jQuery)}(),function(){!function(kendo,$){kendo.PDFMixin={extend:function(proto){proto.events.push("pdfExport"),proto.options.pdf=this.options,proto.saveAsPDF=this.saveAsPDF,proto._drawPDF=this._drawPDF,proto._drawPDFShadow=this._drawPDFShadow},options:{fileName:"Export.pdf",proxyURL:"",paperSize:"auto",allPages:!1,landscape:!1,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},saveAsPDF:function(){var progress=new $.Deferred,promise=progress.promise(),args={promise:promise};if(!this.trigger("pdfExport",args)){var options=this.options.pdf;return options.multiPage=options.allPages,this._drawPDF(progress).then(function(root){return kendo.drawing.exportPDF(root,options)}).done(function(dataURI){kendo.saveAs({dataURI:dataURI,fileName:options.fileName,proxyURL:options.proxyURL,forceProxy:options.forceProxy,proxyTarget:options.proxyTarget}),progress.resolve()}).fail(function(err){progress.reject(err)}),promise}},_drawPDF:function(progress){var promise=new $.Deferred;return kendo.drawing.drawDOM(this.wrapper).done(function(group){var args={page:group,pageNumber:1,progress:1,totalPages:1};progress.notify(args),promise.resolve(args.page)}).fail(function(err){promise.reject(err)}),promise},_drawPDFShadow:function(settings,drawOptions){settings=settings||{};var wrapper=this.wrapper,shadow=$("<div class='k-pdf-export-shadow'>");settings.width&&shadow.css({width:settings.width,overflow:"visible"}),wrapper.before(shadow),shadow.append(settings.content||wrapper.clone(!0,!0));var defer=$.Deferred();return setTimeout(function(){var promise=kendo.drawing.drawDOM(shadow,drawOptions);promise.always(function(){shadow.remove()}).then(function(){defer.resolve.apply(defer,arguments)}).fail(function(){defer.reject.apply(defer,arguments)}).progress(function(){defer.progress.apply(defer,arguments)})},15),defer.promise()}}}(kendo,window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function groupCells(count){return new Array(count+1).join('<td class="k-group-cell">&nbsp;</td>')}function stringifyAttributes(attributes){var attr,result=" ";if(attributes){if(typeof attributes===STRING)return attributes;for(attr in attributes)result+=attr+'="'+attributes[attr]+'"'}return result}function cursor(context,value){$("th, th .k-grid-filter, th .k-link",context).add(document.body).css("cursor",value)}function reorder(selector,source,dest,before,count){var sourceIndex=source;source=$(),count=count||1;for(var idx=0;count>idx;idx++)source=source.add(selector.eq(sourceIndex+idx));"number"==typeof dest?source[before?"insertBefore":"insertAfter"](selector.eq(dest)):source.appendTo(dest)}function elements(lockedContent,content,filter){return $(lockedContent).add(content).find(filter)}function attachCustomCommandEvent(context,container,commands){var idx,length,command,commandName;for(commands=isArray(commands)?commands:[commands],idx=0,length=commands.length;length>idx;idx++)command=commands[idx],isPlainObject(command)&&command.click&&(commandName=command.name||command.text,container.on(CLICK+NS,"a.k-grid-"+(commandName||"").replace(/\s/g,""),{commandName:commandName},proxy(command.click,context)))}function normalizeColumns(columns,encoded,hide){return map(columns,function(column){column=typeof column===STRING?{field:column}:column;var hidden;(!isVisible(column)||hide)&&(column.attributes=addHiddenStyle(column.attributes),column.footerAttributes=addHiddenStyle(column.footerAttributes),column.headerAttributes=addHiddenStyle(column.headerAttributes),hidden=!0),column.columns&&(column.columns=normalizeColumns(column.columns,encoded,hidden));var uid=kendo.guid();return column.headerAttributes=extend({id:uid},column.headerAttributes),extend({encoded:encoded,hidden:hidden},column)})}function columnParent(column,columns){var parents=[];return columnParents(column,columns,parents),parents[parents.length-1]}function columnParents(column,columns,parents){parents=parents||[];for(var idx=0;idx<columns.length;idx++){if(column===columns[idx])return!0;if(columns[idx].columns){var inserted=parents.length;if(parents.push(columns[idx]),columnParents(column,columns[idx].columns,parents))return!0;parents.splice(inserted,parents.length-inserted)}}return!1}function setColumnVisibility(column,visible){var method=visible?removeHiddenStyle:addHiddenStyle;column.hidden=!visible,column.attributes=method(column.attributes),column.footerAttributes=method(column.footerAttributes),column.headerAttributes=method(column.headerAttributes)}function isCellVisible(){return"none"!==this.style.display}function isVisible(column){return visibleColumns([column]).length>0}function visibleColumns(columns){return grep(columns,function(column){var result=!column.hidden;return result&&column.columns&&(result=visibleColumns(column.columns).length>0),result})}function toJQuery(elements){return $(elements).map(function(){return this.toArray()})}function updateCellRowSpan(cell,columns,sourceLockedColumnsCount){var lockedColumnDepth=depth(lockedColumns(columns)),nonLockedColumnDepth=depth(nonLockedColumns(columns)),rowSpan=cell.rowSpan;sourceLockedColumnsCount?lockedColumnDepth>nonLockedColumnDepth?cell.rowSpan=rowSpan-(lockedColumnDepth-nonLockedColumnDepth)||1:cell.rowSpan=rowSpan+(nonLockedColumnDepth-lockedColumnDepth):lockedColumnDepth>nonLockedColumnDepth?cell.rowSpan=rowSpan+(lockedColumnDepth-nonLockedColumnDepth):cell.rowSpan=rowSpan-(nonLockedColumnDepth-lockedColumnDepth)||1}function moveCellsBetweenContainers(sources,target,leafs,columns,container,destination,groups){var sourcesDepth=depth(sources),targetDepth=depth([target]);if(sourcesDepth>targetDepth){var groupCells=new Array(groups+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),rows=destination.children(":not(.k-filter-row)");$(new Array(sourcesDepth-targetDepth+1).join("<tr>"+groupCells+"</tr>")).insertAfter(rows.last())}addRowSpanValue(destination,sourcesDepth-targetDepth),moveCells(leafs,columns,container,destination)}function updateCellIndex(thead,columns,offset){offset=offset||0;var position,cell,allColumns=columns;columns=leafColumns(columns);for(var cells={},rows=thead.find(">tr:not(.k-filter-row)"),filter=function(){var el=$(this);return!el.hasClass("k-group-cell")&&!el.hasClass("k-hierarchy-cell")},idx=0,length=columns.length;length>idx;idx++)position=columnPosition(columns[idx],allColumns),cells[position.row]||(cells[position.row]=rows.eq(position.row).find(".k-header").filter(filter)),cell=cells[position.row].eq(position.cell),cell.attr(kendo.attr("index"),offset+idx);return columns.length}function depth(columns){for(var result=1,max=0,idx=0;idx<columns.length;idx++)if(columns[idx].columns){var temp=depth(columns[idx].columns);temp>max&&(max=temp)}return result+max}function moveCells(leafs,columns,container,destination){var idx,sourcePosition=columnVisiblePosition(leafs[0],columns),ths=container.find(">tr:not(.k-filter-row):eq("+sourcePosition.row+")>th.k-header"),t=$(),sourceIndex=sourcePosition.cell;for(idx=0;idx<leafs.length;idx++)t=t.add(ths.eq(sourceIndex+idx));destination.find(">tr:not(.k-filter-row)").eq(sourcePosition.row).append(t);var children=[];for(idx=0;idx<leafs.length;idx++)leafs[idx].columns&&(children=children.concat(leafs[idx].columns));children.length&&moveCells(children,columns,container,destination)}function columnPosition(column,columns,row,cellCounts){var result,idx;for(row=row||0,cellCounts=cellCounts||{},cellCounts[row]=cellCounts[row]||0,idx=0;idx<columns.length;idx++){if(columns[idx]==column){result={cell:cellCounts[row],row:row};break}if(columns[idx].columns&&(result=columnPosition(column,columns[idx].columns,row+1,cellCounts)))break;cellCounts[row]++}return result}function findParentColumnWithChildren(columns,index,source,rtl){var target,locked=source.locked;do target=columns[index],index+=rtl?1:-1;while(target&&index>-1&&index<columns.length&&target!=source&&!target.columns&&target.locked==locked);return target}function findReorderTarget(columns,target,source,before){if(target.columns)return target=target.columns,target[before?0:target.length-1];var parentColumns,parent=columnParent(target,columns);parentColumns=parent?parent.columns:columns;var index=inArray(target,parentColumns);0===index&&before?index++:index!=parentColumns.length-1||before?(index>0||0===index&&!before)&&(index+=before?-1:1):index--;var sourceIndex=inArray(source,parentColumns);return target=findParentColumnWithChildren(parentColumns,index,source,sourceIndex>index),target&&target!=source&&target.columns?findReorderTarget(columns,target,source,before):null}function columnVisiblePosition(column,columns,row,cellCounts){var result,idx;for(row=row||0,cellCounts=cellCounts||{},cellCounts[row]=cellCounts[row]||0,idx=0;idx<columns.length;idx++){if(columns[idx]==column){result={cell:cellCounts[row],row:row};break}if(columns[idx].columns&&(result=columnVisiblePosition(column,columns[idx].columns,row+1,cellCounts)))break;columns[idx].hidden||cellCounts[row]++}return result}function flatColumnsInDomOrder(columns){var result=flatColumns(lockedColumns(columns));return result.concat(flatColumns(nonLockedColumns(columns)))}function flatColumns(columns){for(var result=[],children=[],idx=0;idx<columns.length;idx++)result.push(columns[idx]),columns[idx].columns&&(children=children.concat(columns[idx].columns));return children.length&&(result=result.concat(flatColumns(children))),result}function hiddenLeafColumnsCount(columns){for(var column,counter=0,idx=0;idx<columns.length;idx++)column=columns[idx],column.columns?counter+=hiddenLeafColumnsCount(column.columns):column.hidden&&counter++;return counter}function columnsWidth(cols){for(var colWidth,width=0,idx=0,length=cols.length;length>idx;idx++)colWidth=cols[idx].style.width,colWidth&&-1==colWidth.indexOf("%")&&(width+=parseInt(colWidth,10));return width}function removeRowSpanValue(container,count){for(var rowSpan,cells=container.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),idx=0;idx<cells.length;idx++)rowSpan=cells[idx].rowSpan,rowSpan>1&&(cells[idx].rowSpan=rowSpan-count||1)}function addRowSpanValue(container,count){for(var cells=container.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),idx=0;idx<cells.length;idx++)cells[idx].rowSpan+=count}function removeEmptyRows(container){for(var rows=container.find("tr:not(.k-filter-row)"),emptyRowsCount=rows.filter(function(){return!$(this).children().length}).remove().length,cells=rows.find("th:not(.k-group-cell,.k-hierarchy-cell)"),idx=0;idx<cells.length;idx++)cells[idx].rowSpan>1&&(cells[idx].rowSpan-=emptyRowsCount);return rows.length-emptyRowsCount}function mapColumnToCellRows(columns,cells,rows,rowIndex,offset){var idx,row,length,children=[];for(idx=0,length=columns.length;length>idx;idx++)row=rows[rowIndex]||[],row.push(cells.eq(offset+idx)),rows[rowIndex]=row,columns[idx].columns&&(children=children.concat(columns[idx].columns));children.length&&mapColumnToCellRows(children,cells,rows,rowIndex+1,offset+columns.length)}function lockedColumns(columns){return grep(columns,function(column){return column.locked})}function nonLockedColumns(columns){return grep(columns,function(column){return!column.locked})}function visibleNonLockedColumns(columns){return grep(columns,function(column){return!column.locked&&isVisible(column)})}function visibleLockedColumns(columns){return grep(columns,function(column){return column.locked&&isVisible(column)})}function visibleLeafColumns(columns){for(var result=[],idx=0;idx<columns.length;idx++)columns[idx].hidden||(columns[idx].columns?result=result.concat(visibleLeafColumns(columns[idx].columns)):result.push(columns[idx]));return result}function leafColumns(columns){for(var result=[],idx=0;idx<columns.length;idx++)columns[idx].columns?result=result.concat(leafColumns(columns[idx].columns)):result.push(columns[idx]);return result}function leafDataCells(container){var rows=container.find(">tr:not(.k-filter-row)"),filter=function(){var el=$(this);return!el.hasClass("k-group-cell")&&!el.hasClass("k-hierarchy-cell")},cells=$();rows.length>1&&(cells=rows.find("th").filter(filter).filter(function(){return this.rowSpan>1})),cells=cells.add(rows.last().find("th").filter(filter));var indexAttr=kendo.attr("index");return cells.sort(function(a,b){a=$(a),b=$(b);var indexA=a.attr(indexAttr),indexB=b.attr(indexAttr);return indexA===undefined&&(indexA=$(a).index()),indexB===undefined&&(indexB=$(b).index()),indexA=parseInt(indexA,10),indexB=parseInt(indexB,10),indexA>indexB?1:indexB>indexA?-1:0}),cells}function parentColumnsCells(cell){var container=cell.closest("table"),result=$().add(cell),row=cell.closest("tr"),headerRows=container.find("tr:not(.k-filter-row)"),level=headerRows.index(row);if(level>0){for(var parent=headerRows.eq(level-1),parentCellsWithChildren=parent.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!$(this).attr("rowspan")}),offset=0,index=row.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(cell),prevCells=cell.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),idx=0;idx<prevCells.length;idx++)offset+=prevCells[idx].colSpan||1;for(index+=Math.max(offset-1,0),offset=0,idx=0;idx<parentCellsWithChildren.length;idx++){var parentCell=parentCellsWithChildren.eq(idx);if(offset+=parentCell.attr("colSpan")?parentCell[0].colSpan:1,index>=idx&&offset>index){result=parentColumnsCells(parentCell).add(result);break}}}return result}function childColumnsCells(cell){var container=cell.closest("thead"),result=$().add(cell),row=cell.closest("tr"),headerRows=container.find("tr:not(.k-filter-row)"),level=headerRows.index(row)+cell[0].rowSpan,colSpanAttr=kendo.attr("colspan");if(level<=headerRows.length-1){var idx,child=row.next(),prevCells=cell.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");prevCells=prevCells.filter(function(){return!this.rowSpan||1===this.rowSpan});var offset=0;for(idx=0;idx<prevCells.length;idx++)offset+=parseInt(prevCells.eq(idx).attr(colSpanAttr),10)||1;var cells=child.find("th:not(.k-group-cell,.k-hierarchy-cell)"),colSpan=parseInt(cell.attr(colSpanAttr),10)||1;for(idx=0;colSpan>idx;){child=cells.eq(idx+offset),result=result.add(childColumnsCells(child));var value=parseInt(child.attr(colSpanAttr),10);value>1&&(colSpan-=value-1),idx++}}return result}function appendContent(tbody,table,html,empty){var placeholder,tmp=tbody;return empty&&tbody.empty(),tbodySupportsInnerHtml?tbody[0].innerHTML=html:(placeholder=document.createElement("div"),placeholder.innerHTML="<table><tbody>"+html+"</tbody></table>",tbody=placeholder.firstChild.firstChild,table[0].replaceChild(tbody,tmp[0]),tbody=$(tbody)),tbody}function addHiddenStyle(attr){attr=attr||{};var style=attr.style;return style?(style=style.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),style===attr.style&&(style=style.replace(/(.*)?/i,"display:none;$1"))):style="display:none",extend({},attr,{style:style})}function removeHiddenStyle(attr){attr=attr||{};var style=attr.style;return style&&(attr.style=style.replace(/(display\s*:\s*none\s*;?)*/gi,"")),attr}function normalizeCols(table,visibleColumns,hasDetails,groups){var width,colgroup=table.find(">colgroup"),cols=map(visibleColumns,function(column){return width=column.width,width&&0!==parseInt(width,10)?kendo.format('<col style="width:{0}"/>',typeof width===STRING?width:width+"px"):"<col />"});(hasDetails||colgroup.find(".k-hierarchy-col").length)&&cols.splice(0,0,'<col class="k-hierarchy-col" />'),colgroup.length&&colgroup.remove(),colgroup=$(new Array(groups+1).join('<col class="k-group-col">')+cols.join("")),colgroup.is("colgroup")||(colgroup=$("<colgroup/>").append(colgroup)),table.prepend(colgroup),browser.msie&&8==browser.version&&(table.css("display","inline-table"),window.setTimeout(function(){table.css("display","")},1))}function normalizeHeaderCells(container,columns){var idx,len,lastIndex=0,th=container.find("th:not(.k-group-cell)");for(idx=0,len=columns.length;len>idx;idx++)columns[idx].locked&&(th.eq(idx).insertBefore(th.eq(lastIndex)),th=container.find("th:not(.k-group-cell)"),lastIndex++)}function convertToObject(array){var item,idx,length,result={};for(idx=0,length=array.length;length>idx;idx++)item=array[idx],result[item.value]=item.text;return result}function formatGroupValue(value,format,columnValues,encoded){var isForeignKey=columnValues&&columnValues.length&&isPlainObject(columnValues[0])&&"value"in columnValues[0],groupValue=isForeignKey?convertToObject(columnValues)[value]:value;return groupValue=null!=groupValue?groupValue:"",format?kendo.format(format,groupValue):encoded===!1?groupValue:kendo.htmlEncode(groupValue)}function setCellVisibility(cells,index,visible){for(var state,pad=0,cell=cells[pad];cell;){if(state=visible?!0:"none"!==cell.style.display,state&&!nonDataCellsRegExp.test(cell.className)&&--index<0){cell.style.display=visible?"":"none";break}cell=cells[++pad]}}function hideColumnCells(rows,columnIndex){for(var cell,row,idx=0,length=rows.length;length>idx;idx+=1)row=rows.eq(idx),row.is(".k-grouping-row,.k-detail-row")?(cell=row.children(":not(.k-group-cell):first,.k-detail-cell").last(),cell.attr("colspan",parseInt(cell.attr("colspan"),10)-1)):(row.hasClass("k-grid-edit-row")&&(cell=row.children(".k-edit-container")[0])&&(cell=$(cell),cell.attr("colspan",parseInt(cell.attr("colspan"),10)-1),cell.find("col").eq(columnIndex).remove(),row=cell.find("tr:first")),setCellVisibility(row[0].cells,columnIndex,!1))}function groupRows(data){for(var item,result=[],idx=0;idx<data.length&&(item=data[idx],"field"in item&&"value"in item&&"items"in item);idx++)result.push(item),item.hasSubgroups&&(result=result.concat(groupRows(item.items)));return result}function groupFooters(data){for(var item,result=[],idx=0;idx<data.length&&(item=data[idx],"field"in item&&"value"in item&&"items"in item);idx++)item.hasSubgroups&&(result=result.concat(groupFooters(item.items))),result.push(item.aggregates);return result}function showColumnCells(rows,columnIndex){for(var cell,row,columns,idx=0,length=rows.length;length>idx;idx+=1)row=rows.eq(idx),row.is(".k-grouping-row,.k-detail-row")?(cell=row.children(":not(.k-group-cell):first,.k-detail-cell").last(),cell.attr("colspan",parseInt(cell.attr("colspan"),10)+1)):(row.hasClass("k-grid-edit-row")&&(cell=row.children(".k-edit-container")[0])&&(cell=$(cell),cell.attr("colspan",parseInt(cell.attr("colspan"),10)+1),normalizeCols(cell.find(">form>table"),visibleColumns(columns),!1,0),row=cell.find("tr:first")),setCellVisibility(row[0].cells,columnIndex,!0))}function updateColspan(toAdd,toRemove,num){num=num||1;var item,idx,length;for(idx=0,length=toAdd.length;length>idx;idx++)item=toAdd.eq(idx).children().last(),item.attr("colspan",parseInt(item.attr("colspan"),10)+num),item=toRemove.eq(idx).children().last(),item.attr("colspan",parseInt(item.attr("colspan"),10)-num)}function tableWidth(table){var idx,length,width=0,cols=table.find(">colgroup>col");for(idx=0,length=cols.length;length>idx;idx+=1)width+=parseInt(cols[idx].style.width,10);return width}function syncTableHeight(table1,table2){if(table1=table1[0],table2=table2[0],table1.rows.length!==table2.rows.length){var row,diff,lockedHeigth=table1.offsetHeight,tableHeigth=table2.offsetHeight;lockedHeigth>tableHeigth?(row=table2.rows[table2.rows.length-1],filterRowRegExp.test(row.className)&&(row=table2.rows[table2.rows.length-2]),diff=lockedHeigth-tableHeigth):(row=table1.rows[table1.rows.length-1],filterRowRegExp.test(row.className)&&(row=table1.rows[table1.rows.length-2]),diff=tableHeigth-lockedHeigth),row.style.height=row.offsetHeight+diff+"px"}}function adjustRowHeight(row1,row2){var height,offsetHeight1=row1.offsetHeight,offsetHeight2=row2.offsetHeight;offsetHeight1>offsetHeight2?height=offsetHeight1+"px":offsetHeight2>offsetHeight1&&(height=offsetHeight2+"px"),height&&(row1.style.height=row2.style.height=height)}function getCommand(commands,name){var idx,length,command;if(typeof commands===STRING&&commands===name)return commands;if(isPlainObject(commands)&&commands.name===name)return commands;if(isArray(commands))for(idx=0,length=commands.length;length>idx;idx++)if(command=commands[idx],typeof command===STRING&&command===name||command.name===name)return command;return null}function focusTable(table,direct){var msie=browser.msie;if(direct===!0){table=$(table);var scrollTop,scrollLeft,condition=!0;if(condition&&(scrollTop=table.parent().scrollTop(),scrollLeft=table.parent().scrollLeft()),msie)try{table[0].setActive()}catch(e){table[0].focus()}else table[0].focus();condition&&(table.parent().scrollTop(scrollTop),table.parent().scrollLeft(scrollLeft))}else $(table).one("focusin",function(e){e.preventDefault()}).focus()}function tableClick(e){var currentTarget=$(e.currentTarget),isHeader=currentTarget.is("th"),table=this.table.add(this.lockedTable),headerTable=this.thead.parent().add($(">table",this.lockedHeader)),isInput=$(e.target).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon"),currentTable=currentTarget.closest("table")[0];if(!kendo.support.touch)return isInput&&currentTarget.find(kendo.roleSelector("filtercell")).length?void this.current(currentTarget):void((currentTable===table[0]||currentTable===table[1]||currentTable===headerTable[0]||currentTable===headerTable[1])&&($(e.target).is("a.k-i-collapse, a.k-i-expand")||(this.options.navigatable&&this.current(currentTarget),(isHeader||!isInput)&&setTimeout(function(){isIE8&&$(kendo._activeElement()).hasClass("k-widget")||focusTable(currentTable,!0)}),isHeader&&e.preventDefault())))}function isInEdit(cell){return cell&&(cell.hasClass("k-edit-cell")||cell.parent().hasClass("k-grid-edit-row"))}function groupRowBuilder(colspan,level,text){return'<tr role="row" class="k-grouping-row">'+groupCells(level)+'<td colspan="'+colspan+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+text+"</p></td></tr>"}function groupRowLockedContentBuilder(colspan){return'<tr role="row" class="k-grouping-row"><td colspan="'+colspan+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var kendo=window.kendo,ui=kendo.ui,DataSource=kendo.data.DataSource,tbodySupportsInnerHtml=kendo.support.tbodyInnerHtml,activeElement=kendo._activeElement,Widget=ui.Widget,keys=kendo.keys,isPlainObject=$.isPlainObject,extend=$.extend,map=$.map,grep=$.grep,isArray=$.isArray,inArray=$.inArray,push=Array.prototype.push,proxy=$.proxy,isFunction=kendo.isFunction,isEmptyObject=$.isEmptyObject,math=Math,PROGRESS="progress",ERROR="error",DATA_CELL=":not(.k-group-cell):not(.k-hierarchy-cell):visible",SELECTION_CELL_SELECTOR="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",NAVROW="tr:not(.k-footer-template):visible",NAVCELL=":not(.k-group-cell):not(.k-hierarchy-cell):visible",FIRSTNAVITEM=NAVROW+":first>"+NAVCELL+":first",HEADERCELLS="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",NS=".kendoGrid",EDIT="edit",SAVE="save",REMOVE="remove",DETAILINIT="detailInit",FILTERMENUINIT="filterMenuInit",COLUMNMENUINIT="columnMenuInit",CHANGE="change",COLUMNHIDE="columnHide",COLUMNSHOW="columnShow",SAVECHANGES="saveChanges",DATABOUND="dataBound",DETAILEXPAND="detailExpand",DETAILCOLLAPSE="detailCollapse",FOCUSED="k-state-focused",SELECTED="k-state-selected",NORECORDSCLASS="k-grid-norecords",COLUMNRESIZE="columnResize",COLUMNREORDER="columnReorder",COLUMNLOCK="columnLock",COLUMNUNLOCK="columnUnlock",CLICK="click",HEIGHT="height",TABINDEX="tabIndex",FUNCTION="function",STRING="string",DELETECONFIRM="Are you sure you want to delete this record?",NORECORDS="No records available.",CONFIRMDELETE="Delete",CANCELDELETE="Cancel",formatRegExp=/(\}|\#)/gi,templateHashRegExp=/#/gi,whitespaceRegExp="[\\x20\\t\\r\\n\\f]",nonDataCellsRegExp=new RegExp("(^|"+whitespaceRegExp+")(k-group-cell|k-hierarchy-cell)("+whitespaceRegExp+"|$)"),filterRowRegExp=new RegExp("(^|"+whitespaceRegExp+")(k-filter-row)("+whitespaceRegExp+"|$)"),COMMANDBUTTONTMPL='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',isRtl=!1,browser=kendo.support.browser,isIE7=browser.msie&&7==browser.version,isIE8=browser.msie&&8==browser.version,VirtualScrollable=Widget.extend({
init:function(element,options){var that=this;Widget.fn.init.call(that,element,options),that._refreshHandler=proxy(that.refresh,that),that.setDataSource(options.dataSource),that.wrap()},setDataSource:function(dataSource){var that=this;that.dataSource&&that.dataSource.unbind(CHANGE,that._refreshHandler),that.dataSource=dataSource,that.dataSource.bind(CHANGE,that._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:$.noop,prefetch:!0},destroy:function(){var that=this;Widget.fn.destroy.call(that),that.dataSource.unbind(CHANGE,that._refreshHandler),that.wrapper.add(that.verticalScrollbar).off(NS),that.drag&&(that.drag.destroy(),that.drag=null),that.wrapper=that.element=that.verticalScrollbar=null,that._refreshHandler=null},wrap:function(){var wrapper,that=this,scrollbar=kendo.support.scrollbar()+1,element=that.element;element.css({width:"auto",overflow:"hidden"}).css(isRtl?"padding-left":"padding-right",scrollbar),that.content=element.children().first(),wrapper=that.wrapper=that.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+NS+" mousewheel"+NS,proxy(that._wheelScroll,that)),kendo.support.kineticScrollNeeded&&(that.drag=new kendo.UserEvents(that.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop()-e.y.delta),wrapper.scrollLeft(wrapper.scrollLeft()-e.x.delta),e.preventDefault()}})),that.verticalScrollbar=$('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:scrollbar}).appendTo(element).bind("scroll"+NS,proxy(that._scroll,that))},_wheelScroll:function(e){if(!e.ctrlKey){var scrollbar=this.verticalScrollbar,scrollTop=scrollbar.scrollTop(),delta=kendo.wheelDeltaY(e);!delta||delta>0&&0===scrollTop||0>delta&&scrollTop+scrollbar[0].clientHeight==scrollbar[0].scrollHeight||(e.preventDefault(),$(e.currentTarget).one("wheel"+NS,!1),this.verticalScrollbar.scrollTop(scrollTop+-delta))}},_scroll:function(e){var that=this,delayLoading=!that.options.prefetch,scrollTop=e.currentTarget.scrollTop,dataSource=that.dataSource,rowHeight=that.itemHeight,skip=dataSource.skip()||0,start=that._rangeStart||skip,height=that.element.innerHeight(),isScrollingUp=!!(that._scrollbarTop&&that._scrollbarTop>scrollTop),firstItemIndex=math.max(math.floor(scrollTop/rowHeight),0),lastItemIndex=math.max(firstItemIndex+math.floor(height/rowHeight),0);that._scrollTop=scrollTop-start*rowHeight,that._scrollbarTop=scrollTop,that._scrolling=delayLoading,that._fetch(firstItemIndex,lastItemIndex,isScrollingUp)||(that.wrapper[0].scrollTop=that._scrollTop),delayLoading&&(that._scrollingTimeout&&clearTimeout(that._scrollingTimeout),that._scrollingTimeout=setTimeout(function(){that._scrolling=!1,that._page(that._rangeStart,that.dataSource.take())},100))},itemIndex:function(rowIndex){var rangeStart=this._rangeStart||this.dataSource.skip()||0;return rangeStart+rowIndex},position:function(index){var result,rangeStart=this._rangeStart||this.dataSource.skip()||0,pageSize=this.dataSource.pageSize();return result=index>rangeStart?index-rangeStart+1:rangeStart-index-1,result>pageSize?pageSize:result},scrollIntoView:function(row){var container=this.wrapper[0],containerHeight=container.clientHeight,containerScroll=this._scrollTop||container.scrollTop,elementOffset=row[0].offsetTop,elementHeight=row[0].offsetHeight;containerScroll>elementOffset?this.verticalScrollbar[0].scrollTop-=containerHeight/2:elementOffset+elementHeight>=containerScroll+containerHeight&&(this.verticalScrollbar[0].scrollTop+=containerHeight/2)},_fetch:function(firstItemIndex,lastItemIndex,scrollingUp){var that=this,dataSource=that.dataSource,itemHeight=that.itemHeight,take=dataSource.take(),rangeStart=that._rangeStart||dataSource.skip()||0,currentSkip=math.floor(firstItemIndex/take)*take,fetching=!1,prefetchAt=.33;return rangeStart>firstItemIndex?(fetching=!0,rangeStart=math.max(0,lastItemIndex-take),that._scrollTop=(firstItemIndex-rangeStart)*itemHeight,that._page(rangeStart,take)):lastItemIndex>=rangeStart+take&&!scrollingUp?(fetching=!0,rangeStart=firstItemIndex,that._scrollTop=itemHeight,that._page(rangeStart,take)):!that._fetching&&that.options.prefetch&&(currentSkip+take-take*prefetchAt>firstItemIndex&&firstItemIndex>take&&dataSource.prefetch(currentSkip-take,take,$.noop),lastItemIndex>currentSkip+take*prefetchAt&&dataSource.prefetch(currentSkip+take,take,$.noop)),fetching},fetching:function(){return this._fetching},_page:function(skip,take){var that=this,delayLoading=!that.options.prefetch,dataSource=that.dataSource;clearTimeout(that._timeout),that._fetching=!0,that._rangeStart=skip,dataSource.inRange(skip,take)?dataSource.range(skip,take):(delayLoading||kendo.ui.progress(that.wrapper.parent(),!0),that._timeout=setTimeout(function(){that._scrolling||(delayLoading&&kendo.ui.progress(that.wrapper.parent(),!0),dataSource.range(skip,take))},100))},repaintScrollbar:function(){var totalHeight,idx,itemHeight,that=this,html="",maxHeight=25e4,dataSource=that.dataSource,scrollbar=kendo.support.kineticScrollNeeded?0:kendo.support.scrollbar(),wrapperElement=that.wrapper[0];itemHeight=that.itemHeight=that.options.itemHeight()||0;var addScrollBarHeight=wrapperElement.scrollWidth>wrapperElement.offsetWidth?scrollbar:0;for(totalHeight=dataSource.total()*itemHeight+addScrollBarHeight,idx=0;idx<math.floor(totalHeight/maxHeight);idx++)html+='<div style="width:1px;height:'+maxHeight+'px"></div>';totalHeight%maxHeight&&(html+='<div style="width:1px;height:'+totalHeight%maxHeight+'px"></div>'),that.verticalScrollbar.html(html),wrapperElement.scrollTop=that._scrollTop},refresh:function(){var that=this,dataSource=that.dataSource,rangeStart=that._rangeStart;kendo.ui.progress(that.wrapper.parent(),!1),clearTimeout(that._timeout),that.repaintScrollbar(),that.drag&&that.drag.cancel(),rangeStart&&!that._fetching&&(that._rangeStart=dataSource.skip(),1===dataSource.page()&&(that.verticalScrollbar[0].scrollTop=0)),that._fetching=!1}}),defaultCommands={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Grid=kendo.ui.DataBoundWidget.extend({init:function(element,options,events){var that=this;options=isArray(options)?{dataSource:options}:options,Widget.fn.init.call(that,element,options),events&&(that._events=events),isRtl=kendo.support.isRtl(element),that._element(),that._aria(),that._columns(that.options.columns),that._dataSource(),that._tbody(),that._pageable(),that._thead(),that._groupable(),that._toolbar(),that._setContentHeight(),that._templates(),that._navigatable(),that._selectable(),that._clipboard(),that._details(),that._editable(),that._attachCustomCommandsEvent(),that._minScreenSupport(),that.options.autoBind?that.dataSource.fetch():(that._group=that._groups()>0,that._footer()),that.lockedContent&&(that.wrapper.addClass("k-grid-lockedcolumns"),that._resizeHandler=function(){that.resize()},$(window).on("resize"+NS,that._resizeHandler)),kendo.notify(that)},events:[CHANGE,"dataBinding","cancel",DATABOUND,DETAILEXPAND,DETAILCOLLAPSE,DETAILINIT,FILTERMENUINIT,COLUMNMENUINIT,EDIT,SAVE,REMOVE,SAVECHANGES,COLUMNRESIZE,COLUMNREORDER,COLUMNSHOW,COLUMNHIDE,COLUMNLOCK,COLUMNUNLOCK],setDataSource:function(dataSource){var that=this,scrollable=that.options.scrollable;that.options.dataSource=dataSource,that._dataSource(),that._pageable(),that._thead(),scrollable&&(scrollable.virtual?that.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):that.content.scrollLeft(0)),that.options.groupable&&that._groupable(),that.virtualScrollable&&that.virtualScrollable.setDataSource(that.options.dataSource),that.options.navigatable&&that._navigatable(),that.options.selectable&&that._selectable(),that.options.autoBind&&dataSource.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:CANCELDELETE,confirmation:DELETECONFIRM,confirmDelete:CONFIRMDELETE},commands:{create:defaultCommands.create.text,cancel:defaultCommands.cancel.text,save:defaultCommands.save.text,destroy:defaultCommands.destroy.text,edit:defaultCommands.edit.text,update:defaultCommands.update.text,canceledit:defaultCommands.canceledit.text,excel:defaultCommands.excel.text,pdf:defaultCommands.pdf.text},noRecords:NORECORDS}},destroy:function(){var element,that=this;that._angularItems("cleanup"),that._destroyColumnAttachments(),Widget.fn.destroy.call(that),this._navigatableTables=null,that._resizeHandler&&$(window).off("resize"+NS,that._resizeHandler),that.pager&&that.pager.element&&that.pager.destroy(),that.pager=null,that.groupable&&that.groupable.element&&that.groupable.element.kendoGroupable("destroy"),that.groupable=null,that.options.reorderable&&that.wrapper.data("kendoReorderable").destroy(),that.selectable&&that.selectable.element&&(that.selectable.destroy(),that.clearArea(),that.copyHandler&&(that.wrapper.off("keydown",that.copyHandler),that.unbind(that.copyHandler)),that.updateClipBoardState&&(that.unbind(that.updateClipBoardState),that.updateClipBoardState=null),that.clearAreaHandler&&that.wrapper.off("keyup",that.clearAreaHandler)),that.selectable=null,that.resizable&&(that.resizable.destroy(),that._resizeUserEvents&&(that._resizeHandleDocumentClickHandler&&$(document).off("click",that._resizeHandleDocumentClickHandler),that._resizeUserEvents.destroy(),that._resizeUserEvents=null),that.resizable=null),that.virtualScrollable&&that.virtualScrollable.element&&that.virtualScrollable.destroy(),that.virtualScrollable=null,that._destroyEditable(),that.dataSource&&(that.dataSource.unbind(CHANGE,that._refreshHandler).unbind(PROGRESS,that._progressHandler).unbind(ERROR,that._errorHandler),that._refreshHandler=that._progressHandler=that._errorHandler=null),element=that.element.add(that.wrapper).add(that.table).add(that.thead).add(that.wrapper.find(">.k-grid-toolbar")),that.content&&(element=element.add(that.content).add(that.content.find(">.k-virtual-scrollable-wrap"))),that.lockedHeader&&that._removeLockedContainers(),that.pane&&that.pane.destroy(),that.minScreenResizeHandler&&$(window).off("resize",that.minScreenResizeHandler),that._draggableInstance&&that._draggableInstance.element&&that._draggableInstance.destroy(),that._draggableInstance=null,element.off(NS),kendo.destroy(that.wrapper),that.rowTemplate=that.altRowTemplate=that.lockedRowTemplate=that.lockedAltRowTemplate=that.detailTemplate=that.footerTemplate=that.groupFooterTemplate=that.lockedGroupFooterTemplate=that.noRecordsTemplate=null,that.scrollables=that.thead=that.tbody=that.element=that.table=that.content=that.footer=that.wrapper=that._groupableClickHandler=that._setContentWidthHandler=null},getOptions:function(){var options=this.options;options.dataSource=null;var result=extend(!0,{},this.options);result.columns=kendo.deepExtend([],this.columns);var dataSource=this.dataSource,initialData=dataSource.options.data&&dataSource._data;return dataSource.options.data=null,result.dataSource=$.extend(!0,{},dataSource.options),dataSource.options.data=initialData,result.dataSource.data=initialData,result.dataSource.page=dataSource.page(),result.dataSource.filter=dataSource.filter(),result.dataSource.pageSize=dataSource.pageSize(),result.dataSource.sort=dataSource.sort(),result.dataSource.group=dataSource.group(),result.dataSource.aggregate=dataSource.aggregate(),result.dataSource.transport&&(result.dataSource.transport.dataSource=null),result.$angular=undefined,result},setOptions:function(options){var currentOptions=this.getOptions();kendo.deepExtend(currentOptions,options),options.dataSource||(currentOptions.dataSource=this.dataSource);var wrapper=this.wrapper,events=this._events,element=this.element;if(this.destroy(),this.options=null,this._isMobile){var mobileWrapper=wrapper.closest(kendo.roleSelector("pane")).parent();mobileWrapper.after(wrapper),mobileWrapper.remove(),wrapper.removeClass("k-grid-mobile")}wrapper[0]!==element[0]&&(wrapper.before(element),wrapper.remove()),element.empty(),this.init(element,currentOptions,events),this._setEvents(currentOptions)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(container){return container.children().filter(function(){var tr=$(this);return!tr.hasClass("k-grouping-row")&&!tr.hasClass("k-detail-row")&&!tr.hasClass("k-group-footer")})},dataItems:function(){var dataItems=kendo.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var n=dataItems.length,tmp=new Array(2*n),i=n;--i>=0;)tmp[i]=tmp[i+n]=dataItems[i];dataItems=tmp}return dataItems},_destroyColumnAttachments:function(){var that=this;that.resizeHandle=null,that.thead&&(this.angular("cleanup",function(){return{elements:that.thead.get()}}),that.thead.add(that.lockedHeader).find("th").each(function(){var th=$(this),filterMenu=th.data("kendoFilterMenu"),sortable=th.data("kendoColumnSorter"),columnMenu=th.data("kendoColumnMenu");filterMenu&&filterMenu.destroy(),sortable&&sortable.destroy(),columnMenu&&columnMenu.destroy()}))},_attachCustomCommandsEvent:function(){var command,idx,length,that=this,columns=leafColumns(that.columns||[]);for(idx=0,length=columns.length;length>idx;idx++)command=columns[idx].command,command&&attachCustomCommandEvent(that,that.wrapper,command)},_aria:function(){var id=this.element.attr("id")||"aria";id&&(this._cellId=id+"_active_cell")},_element:function(){var that=this,table=that.element;table.is("table")||(table=that.options.scrollable?that.element.find("> .k-grid-content > table"):that.element.children("table"),table.length||(table=$("<table />").appendTo(that.element))),isIE7&&table.attr("cellspacing",0),that.table=table.attr("role",that._hasDetails()?"treegrid":"grid"),that._wrapper()},_createResizeHandle:function(container,th){var left,that=this,indicatorWidth=that.options.columnResizeHandleWidth,scrollable=that.options.scrollable,resizeHandle=that.resizeHandle,groups=this._groups();if(resizeHandle&&that.lockedContent&&resizeHandle.data("th")[0]!==th[0]&&(resizeHandle.off(NS).remove(),resizeHandle=null),resizeHandle||(resizeHandle=that.resizeHandle=$('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),container.append(resizeHandle)),isRtl){if(left=th.position().left,scrollable){var headerWrap=th.closest(".k-grid-header-wrap, .k-grid-header-locked"),ieCorrection=browser.msie?headerWrap.scrollLeft():0,webkitCorrection=browser.webkit?headerWrap[0].scrollWidth-headerWrap[0].offsetWidth-headerWrap.scrollLeft():0,firefoxCorrection=browser.mozilla?headerWrap[0].scrollWidth-headerWrap[0].offsetWidth-(headerWrap[0].scrollWidth-headerWrap[0].offsetWidth-headerWrap.scrollLeft()):0;left-=webkitCorrection-firefoxCorrection+ieCorrection}}else{left=th[0].offsetWidth;for(var cells=leafDataCells(th.closest("thead")).filter(":visible"),idx=0;idx<cells.length&&cells[idx]!=th[0];idx++)left+=cells[idx].offsetWidth;groups>0&&(left+=container.find(".k-group-cell:first").outerWidth()*groups),that._hasDetails()&&(left+=container.find(".k-hierarchy-cell:first").outerWidth())}resizeHandle.css({top:th.position().top,left:left-indicatorWidth,height:th.outerHeight(),width:3*indicatorWidth}).data("th",th).show(),resizeHandle.off("dblclick"+NS).on("dblclick"+NS,function(){that._autoFitLeafColumn(th.data("index"))})},_positionColumnResizeHandle:function(){var that=this,indicatorWidth=that.options.columnResizeHandleWidth,lockedHead=that.lockedHeader?that.lockedHeader.find("thead:first"):$();that.thead.add(lockedHead).on("mousemove"+NS,"th",function(e){var th=$(this);if(!th.hasClass("k-group-cell")&&!th.hasClass("k-hierarchy-cell")){var clientX=e.clientX,winScrollLeft=$(window).scrollLeft(),position=th.offset().left+(isRtl?0:this.offsetWidth);clientX+winScrollLeft>position-indicatorWidth&&position+indicatorWidth>clientX+winScrollLeft?that._createResizeHandle(th.closest("div"),th):that.resizeHandle?that.resizeHandle.hide():cursor(that.wrapper,"")}})},_resizeHandleDocumentClick:function(e){$(e.target).closest(".k-column-active").length||($(document).off(e),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(NS).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var that=this,lockedHead=that.lockedHeader?that.lockedHeader.find("thead:first"):$();that._resizeUserEvents=new kendo.UserEvents(lockedHead.add(that.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(e){var th=$(e.target);e.preventDefault(),th.addClass("k-column-active"),that._createResizeHandle(th.closest("div"),th),that._resizeHandleDocumentClickHandler||(that._resizeHandleDocumentClickHandler=proxy(that._resizeHandleDocumentClick,that)),$(document).on("click",that._resizeHandleDocumentClickHandler)}})},_resizable:function(){var container,columnStart,columnWidth,gridWidth,isLocked,col,th,that=this,options=that.options,isMobile=this._isMobile,scrollbar=kendo.support.mobileOS?0:kendo.support.scrollbar();options.resizable&&(container=options.scrollable?that.wrapper.find(".k-grid-header-wrap:first"):that.wrapper,isMobile?that._positionColumnResizeHandleTouch(container):that._positionColumnResizeHandle(container),that.resizable&&that.resizable.destroy(),that.resizable=new ui.Resizable(container.add(that.lockedHeader),{handle:(options.scrollable?"":">")+".k-resize-handle",hint:function(handle){return $('<div class="k-grid-resize-indicator" />').css({height:handle.data("th").outerHeight()+that.tbody.attr("clientHeight")})},start:function(e){th=$(e.currentTarget).data("th"),isMobile&&that._hideResizeHandle();var header=th.closest("table"),index=$.inArray(th[0],leafDataCells(th.closest("thead")).filter(":visible"));isLocked=header.parent().hasClass("k-grid-header-locked");var contentTable=isLocked?that.lockedTable:that.table,footer=that.footer||$();that.footer&&that.lockedContent&&(footer=that.footer.children(isLocked?".k-grid-footer-locked":".k-grid-footer-wrap")),cursor(that.wrapper,"col-resize"),col=options.scrollable?header.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+index+")").add(contentTable.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+index+")")).add(footer.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+index+")")):contentTable.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+index+")"),columnStart=e.x.location,columnWidth=th.outerWidth(),gridWidth=isLocked?contentTable.children("tbody").outerWidth():that.tbody.outerWidth(),browser.webkit&&that.wrapper.addClass("k-grid-column-resizing")},resize:function(e){var rtlMultiplier=isRtl?-1:1,currentWidth=columnWidth+e.x.location*rtlMultiplier-columnStart*rtlMultiplier;if(options.scrollable){var footer;isLocked&&that.lockedFooter?footer=that.lockedFooter.children("table"):that.footer&&(footer=that.footer.find(">.k-grid-footer-wrap>table")),footer&&footer[0]||(footer=$());var header=th.closest("table"),contentTable=isLocked?that.lockedTable:that.table,constrain=!1,totalWidth=that.wrapper.width()-scrollbar,width=currentWidth;isLocked&&gridWidth-columnWidth+width>totalWidth&&(width=columnWidth+(totalWidth-gridWidth-2*scrollbar),0>width&&(width=currentWidth),constrain=!0),width>10&&(col.css("width",width),gridWidth&&(width=constrain?totalWidth-2*scrollbar:gridWidth+e.x.location*rtlMultiplier-columnStart*rtlMultiplier,contentTable.add(header).add(footer).css("width",width),isLocked||(that._footerWidth=width)))}else currentWidth>10&&col.css("width",currentWidth)},resizeend:function(){var column,header,newWidth=th.outerWidth();if(cursor(that.wrapper,""),browser.webkit&&that.wrapper.removeClass("k-grid-column-resizing"),columnWidth!=newWidth){header=that.lockedHeader?that.lockedHeader.find("thead:first tr:first").add(that.thead.find("tr:first")):th.parent();var index=th.attr(kendo.attr("index"));index||(index=header.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(th)),column=leafColumns(that.columns)[index],column.width=newWidth,that.trigger(COLUMNRESIZE,{column:column,oldWidth:columnWidth,newWidth:newWidth}),that._applyLockedContainersWidth(),that._syncLockedContentHeight(),that._syncLockedHeaderHeight()}that._hideResizeHandle(),th=null}}))},_draggable:function(){var that=this;that.options.reorderable&&(that._draggableInstance&&that._draggableInstance.destroy(),that._draggableInstance=that.wrapper.kendoDraggable({group:kendo.guid(),autoScroll:!0,filter:that.content?".k-grid-header:first "+HEADERCELLS:"table:first>.k-grid-header "+HEADERCELLS,drag:function(){that._hideResizeHandle()},hint:function(target){return $('<div class="k-header k-drag-clue" />').css({width:target.width(),paddingLeft:target.css("paddingLeft"),paddingRight:target.css("paddingRight"),lineHeight:target.height()+"px",paddingTop:target.css("paddingTop"),paddingBottom:target.css("paddingBottom")}).html(target.attr(kendo.attr("title"))||target.attr(kendo.attr("field"))||target.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var that=this;if(that.options.reorderable){that.wrapper.data("kendoReorderable")&&that.wrapper.data("kendoReorderable").destroy();var targetParentContainerIndex=function(columns,sourceIndex,targetIndex){var column=columns[sourceIndex],target=columns[targetIndex],parent=columnParent(column,that.columns);return columns=parent?parent.columns:that.columns,inArray(target,columns)};that.wrapper.kendoReorderable({draggable:that._draggableInstance,dragOverContainers:function(sourceIndex,targetIndex){var columns=flatColumnsInDomOrder(that.columns);return columns[sourceIndex].lockable!==!1&&targetParentContainerIndex(columns,sourceIndex,targetIndex)>-1},inSameContainer:function(e){return $(e.source).parent()[0]===$(e.target).parent()[0]&&targetParentContainerIndex(flatColumnsInDomOrder(that.columns),e.sourceIndex,e.targetIndex)>-1},change:function(e){var columns=flatColumnsInDomOrder(that.columns),column=columns[e.oldIndex],newIndex=targetParentContainerIndex(columns,e.oldIndex,e.newIndex);that.trigger(COLUMNREORDER,{newIndex:newIndex,oldIndex:inArray(column,columns),column:column}),that.reorderColumn(newIndex,column,"before"===e.position)}})}},_reorderHeader:function(sources,target,before){for(var that=this,sourcePosition=columnPosition(sources[0],that.columns),destPosition=columnPosition(target,that.columns),leafs=[],idx=0;idx<sources.length;idx++)sources[idx].columns&&(leafs=leafs.concat(sources[idx].columns));var ths=elements(that.lockedHeader,that.thead,"tr:eq("+sourcePosition.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),sourceLockedColumns=lockedColumns(sources).length,targetLockedColumns=lockedColumns([target]).length;leafs.length?(sourceLockedColumns>0&&0===targetLockedColumns?moveCellsBetweenContainers(sources,target,leafs,that.columns,that.lockedHeader.find("thead"),that.thead,this._groups()):0===sourceLockedColumns&&targetLockedColumns>0&&moveCellsBetweenContainers(sources,target,leafs,that.columns,that.thead,that.lockedHeader.find("thead"),this._groups()),(target.columns||sourcePosition.cell-destPosition.cell>1||destPosition.cell-sourcePosition.cell>1)&&(target=findReorderTarget(that.columns,target,sources[0],before),target&&that._reorderHeader(leafs,target,before))):sourceLockedColumns!==targetLockedColumns&&updateCellRowSpan(ths[sourcePosition.cell],that.columns,sourceLockedColumns),reorder(ths,sourcePosition.cell,destPosition.cell,before,sources.length)},_reorderContent:function(sources,destination,before){var headerCol,footerCol,that=this,lockedRows=$(),source=sources[0],visibleSources=visibleColumns(sources),sourceIndex=inArray(source,leafColumns(that.columns)),destIndex=inArray(destination,leafColumns(that.columns)),colSourceIndex=inArray(source,visibleLeafColumns(that.columns)),colDest=inArray(destination,visibleLeafColumns(that.columns)),lockedCount=lockedColumns(that.columns).length,isLocked=!!destination.locked,footer=that.footer||that.wrapper.find(".k-grid-footer");headerCol=footerCol=colDest,destination.hidden&&(isLocked?(colDest=that.lockedTable.find("colgroup"),headerCol=that.lockedHeader.find("colgroup"),footerCol=$(that.lockedFooter).find(">table>colgroup")):(colDest=that.tbody.prev(),headerCol=that.thead.prev(),footerCol=footer.find(".k-grid-footer-wrap").find(">table>colgroup"))),that._hasFilterRow()&&reorder(that.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),sourceIndex,destIndex,before,sources.length),reorder(elements(that.lockedHeader,that.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),colSourceIndex,headerCol,before,visibleSources.length),that.options.scrollable&&reorder(elements(that.lockedTable,that.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),colSourceIndex,colDest,before,visibleSources.length),footer&&footer.length&&(reorder(elements(that.lockedFooter,footer.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),colSourceIndex,footerCol,before,visibleSources.length),reorder(footer.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),sourceIndex,destIndex,before,sources.length));var rows=that.tbody.children(":not(.k-grouping-row,.k-detail-row)");that.lockedTable&&(lockedCount>destIndex?sourceIndex>=lockedCount&&updateColspan(that.lockedTable.find(">tbody>tr.k-grouping-row"),that.table.find(">tbody>tr.k-grouping-row"),sources.length):lockedCount>sourceIndex&&updateColspan(that.table.find(">tbody>tr.k-grouping-row"),that.lockedTable.find(">tbody>tr.k-grouping-row"),sources.length),lockedRows=that.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var idx=0,length=rows.length;length>idx;idx+=1)reorder(elements(lockedRows[idx],rows[idx],">td:not(.k-group-cell,.k-hierarchy-cell)"),sourceIndex,destIndex,before,sources.length)},_autoFitLeafColumn:function(leafIndex){this.autoFitColumn(leafColumns(this.columns)[leafIndex])},autoFitColumn:function(column){var index,th,headerTable,isLocked,col,that=this,options=that.options,columns=that.columns,visibleLocked=that.lockedHeader?leafDataCells(that.lockedHeader.find(">table>thead")).filter(isCellVisible).length:0,notGroupOrHierarchyCol="col:not(.k-group-col):not(.k-hierarchy-col)",notGroupOrHierarchyVisibleCell="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(column="number"==typeof column?columns[column]:isPlainObject(column)?grep(flatColumns(columns),function(item){return item===column})[0]:grep(flatColumns(columns),function(item){return item.field===column})[0],column&&isVisible(column)){index=inArray(column,leafColumns(columns)),isLocked=column.locked,headerTable=isLocked?that.lockedHeader.children("table"):that.thead.parent(),th=headerTable.find("[data-index='"+index+"']");var contentTable=isLocked?that.lockedTable:that.table,footer=that.footer||$();that.footer&&that.lockedContent&&(footer=that.footer.children(isLocked?".k-grid-footer-locked":".k-grid-footer-wrap"));var footerTable=footer.find("table").first();that.lockedHeader&&!isLocked&&(index-=visibleLocked);for(var j=0;j<columns.length&&columns[j]!==column;j++)columns[j].hidden&&index--;col=options.scrollable?headerTable.find(notGroupOrHierarchyCol).eq(index).add(contentTable.children("colgroup").find(notGroupOrHierarchyCol).eq(index)).add(footerTable.find("colgroup").find(notGroupOrHierarchyCol).eq(index)):contentTable.children("colgroup").find(notGroupOrHierarchyCol).eq(index);var tables=headerTable.add(contentTable).add(footerTable),oldColumnWidth=th.outerWidth();col.width(""),tables.css("table-layout","fixed"),col.width("auto"),tables.addClass("k-autofitting"),tables.css("table-layout","");var newColumnWidth=Math.ceil(Math.max(th.outerWidth(),contentTable.find("tr:not(.k-grouping-row)").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index).outerWidth(),footerTable.find("tr").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index).outerWidth()))+1;if(col.width(newColumnWidth),column.width=newColumnWidth,options.scrollable){for(var colWidth,cols=headerTable.find("col"),totalWidth=0,idx=0,length=cols.length;length>idx;idx+=1){if(colWidth=cols[idx].style.width,!colWidth||-1!=colWidth.indexOf("%")){totalWidth=0;break}totalWidth+=parseInt(colWidth,10)}totalWidth&&tables.each(function(){this.style.width=totalWidth+"px"})}browser.msie&&8==browser.version&&(tables.css("display","inline-table"),setTimeout(function(){tables.css("display","table")},1)),tables.removeClass("k-autofitting"),that.trigger(COLUMNRESIZE,{column:column,oldWidth:oldColumnWidth,newWidth:newColumnWidth}),that._applyLockedContainersWidth(),that._syncLockedContentHeight(),that._syncLockedHeaderHeight()}},reorderColumn:function(destIndex,column,before){var lockChanged,that=this,parent=columnParent(column,that.columns),columns=parent?parent.columns:that.columns,sourceIndex=inArray(column,columns),destColumn=columns[destIndex],isLocked=!!destColumn.locked,lockedCount=lockedColumns(that.columns).length;if(sourceIndex!==destIndex&&!(!column.locked&&isLocked&&1==nonLockedColumns(that.columns).length||column.locked&&!isLocked&&1==lockedCount)){that._hideResizeHandle(),before===undefined&&(before=sourceIndex>destIndex);var sourceColumns=[column];that._reorderHeader(sourceColumns,destColumn,before),that.lockedHeader&&(removeEmptyRows(that.thead),removeEmptyRows(that.lockedHeader)),destColumn.columns&&(destColumn=leafColumns(destColumn.columns),destColumn=destColumn[before?0:destColumn.length-1]),column.columns&&(sourceColumns=leafColumns(column.columns)),that._reorderContent(sourceColumns,destColumn,before),lockChanged=!!column.locked,lockChanged=lockChanged!=isLocked,column.locked=isLocked,columns.splice(before?destIndex:destIndex+1,0,column),columns.splice(destIndex>sourceIndex?sourceIndex:sourceIndex+1,1),that._templates(),that._updateColumnCellIndex(),that._updateTablesWidth(),that._applyLockedContainersWidth(),that._syncLockedHeaderHeight(),that._syncLockedContentHeight(),that._updateFirstColumnClass(),lockChanged&&(isLocked?that.trigger(COLUMNLOCK,{column:column}):that.trigger(COLUMNUNLOCK,{column:column}))}},_updateColumnCellIndex:function(){var header,offset=0;this.lockedHeader&&(header=this.lockedHeader.find("thead"),offset=updateCellIndex(header,lockedColumns(this.columns))),updateCellIndex(this.thead,nonLockedColumns(this.columns),offset)},lockColumn:function(column){var columns=this.columns;if(column="number"==typeof column?columns[column]:grep(columns,function(item){return item.field===column})[0],column&&!column.locked&&!column.hidden){var index=lockedColumns(columns).length-1;this.reorderColumn(index,column,!1)}},unlockColumn:function(column){var columns=this.columns;if(column="number"==typeof column?columns[column]:grep(columns,function(item){return item.field===column})[0],column&&column.locked&&!column.hidden){var index=lockedColumns(columns).length;this.reorderColumn(index,column,!0)}},
cellIndex:function(td){var lockedColumnOffset=0;return this.lockedTable&&!$.contains(this.lockedTable[0],td[0])&&(lockedColumnOffset=leafColumns(lockedColumns(this.columns)).length),$(td).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(td)+lockedColumnOffset},_modelForContainer:function(container){container=$(container),container.is("tr")||"popup"===this._editMode()||(container=container.closest("tr"));var id=container.attr(kendo.attr("uid"));return this.dataSource.getByUid(id)},_editable:function(){var that=this,selectable=that.selectable&&that.selectable.options.multiple,editable=that.options.editable,handler=function(){var target=activeElement(),cell=that._editContainer;!cell||$.contains(cell[0],target)||cell[0]===target||$(target).closest(".k-animation-container").length||that.editable.end()&&that.closeCell()};if(editable){var mode=that._editMode();"incell"===mode?editable.update!==!1&&that.wrapper.on(CLICK+NS,"tr:not(.k-grouping-row) > td",function(e){var td=$(this),isLockedCell=that.lockedTable&&td.closest("table")[0]===that.lockedTable[0];td.hasClass("k-hierarchy-cell")||td.hasClass("k-detail-cell")||td.hasClass("k-group-cell")||td.hasClass("k-edit-cell")||td.has("a.k-grid-delete").length||td.has("button.k-grid-delete").length||td.closest("tbody")[0]!==that.tbody[0]&&!isLockedCell||$(e.target).is(":input")||(that.editable?that.editable.end()&&(selectable&&$(activeElement()).blur(),that.closeCell(),that.editCell(td)):that.editCell(td))}).on("focusin"+NS,function(){$.contains(this,activeElement())||(clearTimeout(that.timer),that.timer=null)}).on("focusout"+NS,function(){that.timer=setTimeout(handler,1)}):editable.update!==!1&&that.wrapper.on(CLICK+NS,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(e){e.preventDefault(),that.editRow($(this).closest("tr"))}),editable.destroy!==!1?that.wrapper.on(CLICK+NS,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(e){e.preventDefault(),e.stopPropagation(),that.removeRow($(this).closest("tr"))}):that.wrapper.on(CLICK+NS,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),that._confirmation()||e.preventDefault()})}},editCell:function(cell){cell=$(cell);var that=this,column=leafColumns(that.columns)[that.cellIndex(cell)],model=that._modelForContainer(cell);if(that.closeCell(),model&&(!model.editable||model.editable(column.field))&&!column.command&&column.field){that._attachModelChange(model),that._editContainer=cell,that.editable=cell.addClass("k-edit-cell").kendoEditable({fields:{field:column.field,format:column.format,editor:column.editor,values:column.values},model:model,target:that,change:function(e){that.trigger(SAVE,{values:e.values,container:cell,model:model})&&e.preventDefault()}}).data("kendoEditable");var tr=cell.parent().addClass("k-grid-edit-row");that.lockedContent&&adjustRowHeight(tr[0],that._relatedRow(tr).addClass("k-grid-edit-row")[0]),that.trigger(EDIT,{container:cell,model:model})}},_adjustLockedHorizontalScrollBar:function(){var table=this.table,content=table.parent(),scrollbar=table[0].offsetWidth>content[0].clientWidth?kendo.support.scrollbar():0;this.lockedContent.height(content.height()-scrollbar)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var lockedTable=this.lockedHeader.children("table"),table=this.thead.parent();this._adjustRowsHeight(lockedTable,table),syncTableHeight(lockedTable,table)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var that=this,destroy=function(){if(that.editable){var container=that.editView?that.editView.element:that._editContainer;container&&(container.off(CLICK+NS,"a.k-grid-cancel",that._editCancelClickHandler),container.off(CLICK+NS,"a.k-grid-update",that._editUpdateClickHandler)),that._detachModelChange(),that.editable.destroy(),that.editable=null,that._editContainer=null,that._destroyEditView()}};that.editable&&("popup"!==that._editMode()||that._isMobile?destroy():that._editContainer.data("kendoWindow").bind("deactivate",destroy).close()),that._actionSheet&&(that._actionSheet.destroy(),that._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(model){var that=this;that._modelChangeHandler=function(e){that._modelChange({field:e.field,model:this})},model.bind("change",that._modelChangeHandler)},_detachModelChange:function(){var that=this,container=that._editContainer,model=that._modelForContainer(container);model&&model.unbind(CHANGE,that._modelChangeHandler)},closeCell:function(isCancel){var id,column,tr,model,that=this,cell=that._editContainer;cell&&(id=cell.closest("tr").attr(kendo.attr("uid")),model=that.dataSource.getByUid(id),isCancel&&that.trigger("cancel",{container:cell,model:model})||(cell.removeClass("k-edit-cell"),column=leafColumns(that.columns)[that.cellIndex(cell)],tr=cell.parent().removeClass("k-grid-edit-row"),that._destroyEditable(),that._displayCell(cell,column,model),cell.hasClass("k-dirty-cell")&&$('<span class="k-dirty"/>').prependTo(cell),that.lockedContent&&adjustRowHeight(tr.css("height","")[0],that._relatedRow(tr).css("height","")[0])))},_displayCell:function(cell,column,dataItem){var that=this,state={storage:{},count:0},settings=extend({},kendo.Template,that.options.templateSettings),tmpl=kendo.template(that._cellTmpl(column,state),settings);state.count>0&&(tmpl=proxy(tmpl,state.storage)),cell.empty().html(tmpl(dataItem)),that.angular("compile",function(){return{elements:cell,data:[{dataItem:dataItem}]}})},removeRow:function(row){this._confirmation(row)&&this._removeRow(row)},_removeRow:function(row){var model,that=this,mode=that._editMode();"incell"!==mode&&that.cancelRow(),row=$(row),that.lockedContent&&(row=row.add(that._relatedRow(row))),row=row.hide(),model=that._modelForContainer(row),model&&!that.trigger(REMOVE,{row:row,model:model})?(that.dataSource.remove(model),("inline"===mode||"popup"===mode)&&that.dataSource.sync()):"incell"===mode&&that._destroyEditable()},_editMode:function(){var mode="incell",editable=this.options.editable;return editable!==!0&&(mode="string"==typeof editable?editable:editable.mode||mode),mode},editRow:function(row){var model,that=this;row instanceof kendo.data.ObservableObject?model=row:(row=$(row),model=that._modelForContainer(row));var container,mode=that._editMode();that.cancelRow(),model&&(row=that.tbody.children("["+kendo.attr("uid")+"="+model.uid+"]"),that._attachModelChange(model),"popup"===mode?that._createPopupEditor(model):"inline"===mode?that._createInlineEditor(row,model):"incell"===mode&&$(row).children(DATA_CELL).each(function(){var cell=$(this),column=leafColumns(that.columns)[cell.index()];return model=that._modelForContainer(cell),model&&(!model.editable||model.editable(column.field))&&column.field?(that.editCell(cell),!1):void 0}),container=that.editView?that.editView.element:that._editContainer,container&&(this._editCancelClickHandler||(this._editCancelClickHandler=proxy(this._editCancelClick,this)),container.on(CLICK+NS,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=proxy(this._editUpdateClick,this)),container.on(CLICK+NS,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(e){var that=this,navigatable=that.options.navigatable,model=that.editable.options.model,container=that.editView?that.editView.element:that._editContainer;if(e.preventDefault(),e.stopPropagation(),!that.trigger("cancel",{container:container,model:model})){var currentIndex=that.items().index($(that.current()).parent());that.cancelRow(),navigatable&&(that.current(that.items().eq(currentIndex).children().filter(NAVCELL).first()),focusTable(that.table,!0))}},_createPopupEditor:function(model){var column,command,idx,length,tmpl,updateText,cancelText,tempCommand,attr,that=this,html="<div "+kendo.attr("uid")+'="'+model.uid+'" class="k-popup-edit-form'+(that._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',fields=[],columns=leafColumns(that.columns),editable=that.options.editable,template=editable.template,options=isPlainObject(editable)?editable.window:{},settings=extend({},kendo.Template,that.options.templateSettings);if(options=options||{},template)for(typeof template===STRING&&(template=window.unescape(template)),html+=kendo.template(template,settings)(model),idx=0,length=columns.length;length>idx;idx++)column=columns[idx],column.command&&(tempCommand=getCommand(column.command,"edit"),tempCommand&&(command=tempCommand));else for(idx=0,length=columns.length;length>idx;idx++)if(column=columns[idx],column.command)column.command&&(tempCommand=getCommand(column.command,"edit"),tempCommand&&(command=tempCommand));else if(html+='<div class="k-edit-label"><label for="'+column.field+'">'+(column.title||column.field||"")+"</label></div>",model.editable&&!model.editable(column.field)||!column.field){var state={storage:{},count:0};tmpl=kendo.template(that._cellTmpl(column,state),settings),state.count>0&&(tmpl=proxy(tmpl,state.storage)),html+='<div class="k-edit-field">'+tmpl(model)+"</div>"}else fields.push({field:column.field,format:column.format,editor:column.editor,values:column.values}),html+="<div "+kendo.attr("container-for")+'="'+column.field+'" class="k-edit-field"></div>';command&&isPlainObject(command)&&(command.text&&isPlainObject(command.text)&&(updateText=command.text.update,cancelText=command.text.cancel),command.attr&&(attr=command.attr));var container;that._isMobile?(html+="</div></div>",that.editView=that.pane.append("<div data-"+kendo.ns+'role="view" data-'+kendo.ns+'use-native-scrolling="true" data-'+kendo.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+kendo.ns+'role="header" class="k-header">'+that._createButton({name:"update",text:updateText,attr:attr})+(options.title||"Edit")+that._createButton({name:"canceledit",text:cancelText,attr:attr})+"</div>"+html+"</div>"),container=that._editContainer=that.editView.element.find(".k-popup-edit-form")):(html+='<div class="k-edit-buttons k-state-default">',html+=that._createButton({name:"update",text:updateText,attr:attr})+that._createButton({name:"canceledit",text:cancelText,attr:attr}),html+="</div></div></div>",container=that._editContainer=$(html).appendTo(that.wrapper).eq(0).kendoWindow(extend({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(e){if(e.userTriggered){if(e.sender.element.focus(),that.trigger("cancel",{container:container,model:model}))return void e.preventDefault();var currentIndex=that.items().index($(that.current()).parent());that.cancelRow(),that.options.navigatable&&(that.current(that.items().eq(currentIndex).children().filter(NAVCELL).first()),focusTable(that.table,!0))}}},options))),that.editable=that._editContainer.kendoEditable({fields:fields,model:model,clearContainer:!1,target:that}).data("kendoEditable"),that._isMobile&&container.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){$(this).next().children("input").click()}),that._openPopUpEditor(),that.trigger(EDIT,{container:container,model:model})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(row,model){var column,cell,command,that=this,fields=[];that.lockedContent&&(row=row.add(that._relatedRow(row))),row.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(cell=$(this),column=leafColumns(that.columns)[that.cellIndex(cell)],column.command||!column.field||model.editable&&!model.editable(column.field)){if(column.command&&(command=getCommand(column.command,"edit"))){cell.empty();var updateText,cancelText,attr;isPlainObject(command)&&(command.text&&isPlainObject(command.text)&&(updateText=command.text.update,cancelText=command.text.cancel),command.attr&&(attr=command.attr)),$(that._createButton({name:"update",text:updateText,attr:attr})+that._createButton({name:"canceledit",text:cancelText,attr:attr})).appendTo(cell)}}else fields.push({field:column.field,format:column.format,editor:column.editor,values:column.values}),cell.attr(kendo.attr("container-for"),column.field),cell.empty()}),that._editContainer=row,that.editable=new kendo.ui.Editable(row.addClass("k-grid-edit-row"),{target:that,fields:fields,model:model,clearContainer:!1}),row.length>1&&(adjustRowHeight(row[0],row[1]),that._applyLockedContainersWidth()),that.trigger(EDIT,{container:row,model:model})},cancelRow:function(){var model,that=this,container=that._editContainer;container&&(model=that._modelForContainer(container),that._destroyEditable(),that.dataSource.cancelChanges(model),that._displayRow("popup"!==that._editMode()?container:that.tbody.find("["+kendo.attr("uid")+"="+model.uid+"]")))},saveRow:function(){var that=this,container=that._editContainer,model=that._modelForContainer(container),editable=that.editable;container&&editable&&editable.end()&&!that.trigger(SAVE,{container:container,model:model})&&that.dataSource.sync()},_displayRow:function(row){var related,newRow,nextRow,that=this,model=that._modelForContainer(row),isSelected=row.hasClass("k-state-selected"),isAlt=row.hasClass("k-alt");if(model){that.lockedContent&&(related=$((isAlt?that.lockedAltRowTemplate:that.lockedRowTemplate)(model)),that._relatedRow(row.last()).replaceWith(related)),that.angular("cleanup",function(){return{elements:row.get()}}),newRow=$((isAlt?that.altRowTemplate:that.rowTemplate)(model)),row.replaceWith(newRow);var angularElements=newRow,angularData=[{dataItem:model}];related&&related.length&&(angularElements=newRow.add(related),angularData.push({dataItem:model})),that.angular("compile",function(){return{elements:angularElements.get(),data:angularData}}),isSelected&&that.options.selectable&&that.select(newRow.add(related)),related&&adjustRowHeight(newRow[0],related[0]),nextRow=newRow.next(),nextRow.hasClass("k-detail-row")&&nextRow.is(":visible")&&newRow.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus")}},_showMessage:function(messages,row){var that=this;if(!that._isMobile)return window.confirm(messages.title);var template=kendo.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),html=$(template(messages)).appendTo(that.view.element),actionSheet=that._actionSheet=new kendo.mobile.ui.ActionSheet(html,{cancel:messages.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(e){var item=$(e.currentTarget).parent();item.hasClass("km-actionsheet-cancel")||that._removeRow(row)},popup:that._actionSheetPopupOptions});return actionSheet.open(row),!1},_confirmation:function(row){var that=this,editable=that.options.editable,confirmation=editable===!0||typeof editable===STRING?that.options.messages.editable.confirmation:editable.confirmation;return confirmation!==!1&&null!=confirmation?(typeof confirmation===FUNCTION&&(confirmation=confirmation(that._modelForContainer(row))),that._showMessage({confirmDelete:editable.confirmDelete||that.options.messages.editable.confirmDelete,cancelDelete:editable.cancelDelete||that.options.messages.editable.cancelDelete,title:confirmation===!0?that.options.messages.editable.confirmation:confirmation},row)):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var that=this;(that.editable&&that.editable.end()||!that.editable)&&!that.trigger(SAVECHANGES)&&that.dataSource.sync()},addRow:function(){var index,that=this,dataSource=that.dataSource,mode=that._editMode(),createAt=that.options.editable.createAt||"",pageSize=dataSource.pageSize(),view=dataSource.view()||[];if(that.editable&&that.editable.end()||!that.editable){"incell"!=mode&&that.cancelRow(),index=dataSource.indexOf(view[0]),"bottom"==createAt.toLowerCase()&&(index+=view.length,pageSize&&!dataSource.options.serverPaging&&pageSize<=view.length&&(index-=1)),0>index&&(index=dataSource.page()>dataSource.totalPages()?(dataSource.page()-1)*pageSize:0);var model=dataSource.insert(index,{}),id=model.uid,table=that.lockedContent?that.lockedTable:that.table,row=table.find("tr["+kendo.attr("uid")+"="+id+"]"),cell=row.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(that._firstEditableColumnIndex(row));"inline"===mode&&row.length?that.editRow(row):"popup"===mode?that.editRow(model):cell.length&&that.editCell(cell),"bottom"==createAt.toLowerCase()&&that.lockedContent&&(that.lockedContent[0].scrollTop=that.content[0].scrollTop=that.content[0].offsetHeight)}},_firstEditableColumnIndex:function(container){var column,idx,length,that=this,columns=leafColumns(that.columns),model=that._modelForContainer(container);for(idx=0,length=columns.length;length>idx;idx++)if(column=columns[idx],model&&(!model.editable||model.editable(column.field))&&!column.command&&column.field&&column.hidden!==!0)return idx;return-1},_toolbar:function(){var container,that=this,wrapper=that.wrapper,toolbar=that.options.toolbar,editable=that.options.editable;toolbar&&(container=that.wrapper.find(".k-grid-toolbar"),container.length||(isFunction(toolbar)||(toolbar=typeof toolbar===STRING?toolbar:that._toolbarTmpl(toolbar).replace(templateHashRegExp,"\\#"),toolbar=proxy(kendo.template(toolbar),that)),container=$('<div class="k-header k-grid-toolbar" />').html(toolbar({})).prependTo(wrapper),that.angular("compile",function(){return{elements:container.get()}})),editable&&editable.create!==!1&&container.on(CLICK+NS,".k-grid-add",function(e){e.preventDefault(),that.addRow()}).on(CLICK+NS,".k-grid-cancel-changes",function(e){e.preventDefault(),that.cancelChanges()}).on(CLICK+NS,".k-grid-save-changes",function(e){e.preventDefault(),that.saveChanges()}),container.on(CLICK+NS,".k-grid-excel",function(e){e.preventDefault(),that.saveAsExcel()}),container.on(CLICK+NS,".k-grid-pdf",function(e){e.preventDefault(),that.saveAsPDF()}))},_toolbarTmpl:function(commands){var idx,length,that=this,html="";if(isArray(commands))for(idx=0,length=commands.length;length>idx;idx++)html+=that._createButton(commands[idx]);return html},_createButton:function(command){var attributeClassMatch,template=command.template||COMMANDBUTTONTMPL,commandName=typeof command===STRING?command:command.name||command.text,className=defaultCommands[commandName]?defaultCommands[commandName].className:"k-grid-"+(commandName||"").replace(/\s/g,""),options={className:className,text:commandName,imageClass:"",attr:"",iconClass:""},messages=this.options.messages.commands;if(!(commandName||isPlainObject(command)&&command.template))throw new Error("Custom commands should have name specified");return isPlainObject(command)?(command=extend(!0,{},command),command.className&&inArray(options.className,command.className.split(" "))<0?command.className+=" "+options.className:command.className===undefined&&(command.className=options.className),"edit"===commandName&&isPlainObject(command.text)&&(command=extend(!0,{},command),command.text=command.text.edit),command.attr&&(isPlainObject(command.attr)&&(command.attr=stringifyAttributes(command.attr)),typeof command.attr===STRING&&(attributeClassMatch=command.attr.match(/class="(.+?)"/),attributeClassMatch&&inArray(attributeClassMatch[1],command.className.split(" "))<0&&(command.className+=" "+attributeClassMatch[1]))),options=extend(!0,options,defaultCommands[commandName],{text:messages[commandName]},command)):options=extend(!0,options,defaultCommands[commandName],{text:messages[commandName]}),kendo.template(template)(options)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var that=this;that._groupableClickHandler?that.table.add(that.lockedTable).off(CLICK+NS,that._groupableClickHandler):that._groupableClickHandler=function(e){var element=$(this),group=element.closest("tr");element.hasClass("k-i-collapse")?that.collapseGroup(group):that.expandGroup(group),e.preventDefault(),e.stopPropagation()},that._isLocked()?that.lockedTable.on(CLICK+NS,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",that._groupableClickHandler):that.table.on(CLICK+NS,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",that._groupableClickHandler),that._attachGroupable()},_attachGroupable:function(){var that=this,wrapper=that.wrapper,groupable=that.options.groupable,draggables=HEADERCELLS+"["+kendo.attr("field")+"]",filter=that.content?".k-grid-header:first "+draggables:"table:first>.k-grid-header "+draggables;groupable&&groupable.enabled!==!1&&(wrapper.has("div.k-grouping-header")[0]||$("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(wrapper),that.groupable&&that.groupable.destroy(),that.groupable=new ui.Groupable(wrapper,extend({},groupable,{draggable:that._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:that.dataSource,draggableElements:filter,filter:filter,allowDrag:that.options.reorderable})))},_continuousItems:function(filter,cell){if(this.lockedContent){for(var that=this,elements=that.table.add(that.lockedTable),lockedItems=$(filter,elements[0]),nonLockedItems=$(filter,elements[1]),columns=cell?lockedColumns(that.columns).length:1,nonLockedColumns=cell?that.columns.length-columns:1,result=[],idx=0;idx<lockedItems.length;idx+=columns)push.apply(result,lockedItems.slice(idx,idx+columns)),push.apply(result,nonLockedItems.splice(0,nonLockedColumns));return result}},_selectable:function(){var multi,cell,that=this,notString=[],isLocked=that._isLocked(),selectable=that.options.selectable;if(selectable){that.selectable&&that.selectable.destroy(),selectable=kendo.ui.Selectable.parseOptions(selectable),multi=selectable.multiple,cell=selectable.cell,that._hasDetails()&&(notString[notString.length]=".k-detail-row"),(that.options.groupable||that._hasFooters())&&(notString[notString.length]=".k-grouping-row,.k-group-footer"),notString=notString.join(","),""!==notString&&(notString=":not("+notString+")");var elements=that.table;isLocked&&(elements=elements.add(that.lockedTable));var filter=">"+(cell?SELECTION_CELL_SELECTOR:"tbody>tr"+notString);that.selectable=new kendo.ui.Selectable(elements,{filter:filter,aria:!0,multiple:multi,change:function(){that.trigger(CHANGE)},useAllItems:isLocked&&multi&&cell,relatedTarget:function(items){if(!cell&&isLocked){for(var related,result=$(),idx=0,length=items.length;length>idx;idx++)related=that._relatedRow(items[idx]),inArray(related[0],items)<0&&(result=result.add(related));return result}},continuousItems:function(){return that._continuousItems(filter,cell)}}),that.options.navigatable&&elements.on("keydown"+NS,function(e){var current=that.current(),target=e.target;if(e.keyCode===keys.SPACEBAR&&$.inArray(target,elements)>-1&&!current.is(".k-edit-cell,.k-header")&&current.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(e.preventDefault(),e.stopPropagation(),current=cell?current:current.parent(),isLocked&&!cell&&(current=current.add(that._relatedRow(current))),multi)if(e.ctrlKey){if(current.hasClass(SELECTED))return current.removeClass(SELECTED),void that.trigger(CHANGE)}else that.selectable.clear();else that.selectable.clear();that.selectable.value(current)}})}},_clipboard:function(){var options=this.options,selectable=options.selectable;if(selectable&&options.allowCopy){var grid=this;options.navigatable||grid.table.add(grid.lockedTable).attr("tabindex",0).on("mousedown"+NS+" keydown"+NS,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+NS,NAVROW+">"+NAVCELL,proxy(tableClick,grid)),grid.copyHandler=proxy(grid.copySelection,grid),grid.updateClipBoardState=function(){grid.areaClipBoard&&grid.areaClipBoard.val(grid.getTSV()).focus().select()},grid.bind("change",grid.updateClipBoardState),grid.wrapper.on("keydown",grid.copyHandler),grid.clearAreaHandler=proxy(grid.clearArea,grid),grid.wrapper.on("keyup",grid.clearAreaHandler)}},copySelection:function(e){e instanceof jQuery.Event&&!e.ctrlKey&&!e.metaKey||$(e.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=$("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var grid=this,selected=grid.select(),delimeter="	",allowCopy=grid.options.allowCopy,onlyVisible=!0;$.isPlainObject(allowCopy)&&allowCopy.delimeter&&(delimeter=allowCopy.delimeter);var text="";if(selected.length){selected.eq(0).is("tr")&&(selected=selected.find("td:not(.k-group-cell)")),onlyVisible&&selected.filter(":visible");var result=[],cellsOffset=this.columns.length,lockedCols=grid._isLocked()&&lockedColumns(grid.columns).length,inLockedArea=!0;$.each(selected,function(idx,cell){cell=$(cell);var tr=cell.closest("tr"),rowIndex=tr.index(),cellIndex=cell.index();onlyVisible&&(cellIndex-=cell.prevAll(":hidden").length),lockedCols&&inLockedArea&&(inLockedArea=$.contains(grid.lockedTable[0],cell[0])),grid._groups()&&inLockedArea&&(cellIndex-=grid._groups()),cellIndex=inLockedArea?cellIndex:cellIndex+lockedCols,cellsOffset>cellIndex&&(cellsOffset=cellIndex);var cellText=cell.text();result[rowIndex]||(result[rowIndex]=[]),result[rowIndex][cellIndex]=cellText});var rowsOffset=result.length;result=$.each(result,function(idx,val){val&&(result[idx]=val.slice(cellsOffset),rowsOffset>idx&&(rowsOffset=idx))}),$.each(result.slice(rowsOffset),function(idx,val){text+=val?val.join(delimeter)+"\r\n":"\r\n"})}return text},clearArea:function(e){this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]&&(this.options.navigatable?$(this.current()).closest("table").focus():this.table.focus()),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_minScreenSupport:function(){var any=this.hideMinScreenCols();any&&(this.minScreenResizeHandler=proxy(this.hideMinScreenCols,this),$(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){for(var cols=this.columns,any=!1,screenWidth=window.innerWidth>0?window.innerWidth:screen.width,i=0;i<cols.length;i++){var col=cols[i],minWidth=col.minScreenWidth;minWidth!==undefined&&null!==minWidth&&(any=!0,minWidth>screenWidth?this.hideColumn(col):this.showColumn(col))}return any},_relatedRow:function(row){var lockedTable=this.lockedTable;if(row=$(row),!lockedTable)return row;var table=row.closest(this.table.add(this.lockedTable)),index=table.find(">tbody>tr").index(row);return table=table[0]===this.table[0]?lockedTable:this.table,table.find(">tbody>tr").eq(index)},clearSelection:function(){var that=this;that.selectable.clear(),that.trigger(CHANGE)},select:function(items){var that=this,selectable=that.selectable;return items=$(items),items.length?(selectable.options.multiple||(selectable.clear(),items=items.first()),that._isLocked()&&(items=items.add(items.map(function(){return that._relatedRow(this)}))),void selectable.value(items)):selectable.value()},_updateCurrentAttr:function(current,next){var headerId=$(current).data("headerId");if($(current).removeClass(FOCUSED).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant"),headerId?(headerId=headerId.replace(this._cellId,""),$(current).attr("id",headerId)):$(current).removeAttr("id"),next.data("headerId",next.attr("id")).attr("id",this._cellId).addClass(FOCUSED).closest("table").attr("aria-activedescendant",this._cellId),next.closest("tr").hasClass("k-grouping-row")||next.hasClass("k-header"))next.attr("aria-describedby",this._cellId);else{var column=this.columns[this.cellIndex(next)];column&&(headerId=column.headerAttributes.id),next.attr("aria-describedby",headerId+" "+this._cellId)}this._current=next},_scrollCurrent:function(){var current=this._current,scrollable=this.options.scrollable;if(current&&scrollable){var row=current.parent(),tableContainer=row.closest("table").parent(),isInLockedContainer=tableContainer.is(".k-grid-content-locked,.k-grid-header-locked"),isInContent=tableContainer.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),scrollableContainer=$(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0];if(isInContent)if(scrollable.virtual){var rowIndex=Math.max(inArray(row[0],this._items(row.parent())),0);this._rowVirtualIndex=this.virtualScrollable.itemIndex(rowIndex),this.virtualScrollable.scrollIntoView(row)}else this._scrollTo(this._relatedRow(row)[0],scrollableContainer);this.lockedContent&&(this.lockedContent[0].scrollTop=scrollableContainer.scrollTop),isInLockedContainer||this._scrollTo(current[0],scrollableContainer)}},current:function(next){var current=this._current;return next=$(next),next.length&&(current&&current[0]===next[0]||(this._updateCurrentAttr(current,next),this._scrollCurrent())),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(FOCUSED),this._current=null)},_scrollTo:function(element,container){var elementToLowercase=element.tagName.toLowerCase(),isHorizontal="td"===elementToLowercase||"th"===elementToLowercase,elementOffset=element[isHorizontal?"offsetLeft":"offsetTop"],elementOffsetDir=element[isHorizontal?"offsetWidth":"offsetHeight"],containerScroll=container[isHorizontal?"scrollLeft":"scrollTop"],containerOffsetDir=container[isHorizontal?"clientWidth":"clientHeight"],bottomDistance=elementOffset+elementOffsetDir,result=0,ieCorrection=0,firefoxCorrection=0;if(isRtl&&isHorizontal){var table=$(element).closest("table")[0];browser.msie?ieCorrection=table.offsetLeft:browser.mozilla&&(firefoxCorrection=table.offsetLeft-kendo.support.scrollbar())}containerScroll=Math.abs(containerScroll+ieCorrection-firefoxCorrection),result=containerScroll>elementOffset?elementOffset:bottomDistance>containerScroll+containerOffsetDir?containerOffsetDir>=elementOffsetDir?bottomDistance-containerOffsetDir:elementOffset:containerScroll,result=Math.abs(result+ieCorrection)+firefoxCorrection,container[isHorizontal?"scrollLeft":"scrollTop"]=result},_navigatable:function(){var that=this;if(that.options.navigatable){var dataTables=that.table.add(that.lockedTable),headerTables=that.thead.parent().add($(">table",that.lockedHeader)),tables=dataTables;that.options.scrollable&&(tables=tables.add(headerTables),headerTables.attr(TABINDEX,-1)),this._navigatableTables=tables,tables.off("mousedown"+NS+" focus"+NS+" focusout"+NS+" keydown"+NS),headerTables.on("keydown"+NS,proxy(that._openHeaderMenu,that)).find("a.k-link").attr("tabIndex",-1),dataTables.attr(TABINDEX,math.max(dataTables.attr(TABINDEX)||0,0)).on("mousedown"+NS+" keydown"+NS,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),tables.on(kendo.support.touch?"touchstart"+NS:"mousedown"+NS,NAVROW+">"+NAVCELL,proxy(tableClick,that)).on("focus"+NS,proxy(that._tableFocus,that)).on("focusout"+NS,proxy(that._tableBlur,that)).on("keydown"+NS,proxy(that._tableKeyDown,that))}},_openHeaderMenu:function(e){e.altKey&&e.keyCode==keys.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(table){this._navigatableTables.attr(TABINDEX,-1),table.attr(TABINDEX,0)},_tableFocus:function(e){if(!kendo.support.touch){var current=this.current(),table=$(e.currentTarget);
current&&current.is(":visible")?current.addClass(FOCUSED):this.current(table.find(FIRSTNAVITEM)),this._setTabIndex(table)}},_tableBlur:function(){var current=this.current();current&&current.removeClass(FOCUSED)},_tableKeyDown:function(e){var current=this.current(),requestInProgress=this.virtualScrollable&&this.virtualScrollable.fetching(),target=$(e.target),canHandle=!e.isDefaultPrevented()&&!target.is(":button,a,:input,a>.k-icon");if(requestInProgress)return void e.preventDefault();if(current=current?current:$(this.lockedTable).add(this.table).find(FIRSTNAVITEM),current.length){var handled=!1;canHandle&&e.keyCode==keys.UP&&(handled=this._moveUp(current)),canHandle&&e.keyCode==keys.DOWN&&(handled=this._moveDown(current)),canHandle&&e.keyCode==(isRtl?keys.LEFT:keys.RIGHT)&&(handled=this._moveRight(current,e.altKey)),canHandle&&e.keyCode==(isRtl?keys.RIGHT:keys.LEFT)&&(handled=this._moveLeft(current,e.altKey)),canHandle&&e.keyCode==keys.PAGEDOWN&&(handled=this._handlePageDown()),canHandle&&e.keyCode==keys.PAGEUP&&(handled=this._handlePageUp()),(e.keyCode==keys.ENTER||e.keyCode==keys.F2)&&(handled=this._handleEnterKey(current,e.currentTarget,target)),e.keyCode==keys.ESC&&(handled=this._handleEscKey(current,e.currentTarget)),e.keyCode==keys.TAB&&(handled=this._handleTabKey(current,e.currentTarget,e.shiftKey)),handled&&(e.preventDefault(),e.stopPropagation())}},_moveLeft:function(current,altKey){var next,index,row=current.parent(),container=row.parent();return altKey?this.collapseRow(row):(index=container.find(NAVROW).index(row),next=this._prevHorizontalCell(container,current,index),next[0]||(container=this._horizontalContainer(container),next=this._prevHorizontalCell(container,current,index),next[0]!==current[0]&&focusTable(container.parent(),!0)),this.current(next)),!0},_moveRight:function(current,altKey){var next,index,row=current.parent(),container=row.parent();return altKey?this.expandRow(row):(index=container.find(NAVROW).index(row),next=this._nextHorizontalCell(container,current,index),next[0]||(container=this._horizontalContainer(container,!0),next=this._nextHorizontalCell(container,current,index),next[0]!==current[0]&&focusTable(container.parent(),!0)),this.current(next)),!0},_moveUp:function(current){var container=current.parent().parent(),next=this._prevVerticalCell(container,current);return next[0]||(container=this._verticalContainer(container,!0),next=this._prevVerticalCell(container,current),next[0]&&focusTable(container.parent(),!0)),this.current(next),!0},_moveDown:function(current){var container=current.parent().parent(),next=this._nextVerticalCell(container,current);return next[0]||(container=this._verticalContainer(container),next=this._nextVerticalCell(container,current),next[0]&&focusTable(container.parent(),!0)),this.current(next),!0},_handlePageDown:function(){return this.options.pageable?(this.dataSource.page(this.dataSource.page()+1),!0):!1},_handlePageUp:function(){return this.options.pageable?(this.dataSource.page(this.dataSource.page()-1),!0):!1},_handleTabKey:function(current,currentTable,shiftKey){var cell,isInCell=this.options.editable&&"incell"==this._editMode();return!isInCell||current.is("th")?!1:(cell=$(activeElement()).closest(".k-edit-cell"),cell[0]&&cell[0]!==current[0]&&(current=cell),cell=this._tabNext(current,currentTable,shiftKey),cell.length?(this._handleEditing(current,cell,cell.closest("table")),!0):!1)},_handleEscKey:function(current,currentTable){var active=activeElement(),isInCell="incell"==this._editMode();if(!isInEdit(current))return current.has(active).length?(focusTable(currentTable,!0),!0):!1;if(isInCell)this.closeCell(!0);else{var currentIndex=$(current).parent().index();active&&active.blur(),this.cancelRow(),currentIndex>=0&&this.current(this.items().eq(currentIndex).children(NAVCELL).first())}return browser.msie&&browser.version<9&&document.body.focus(),focusTable(currentTable,!0),!0},_toggleCurrent:function(current){var row=current.parent();return row.is(".k-master-row,.k-grouping-row")?(row.find(".k-icon:first").click(),!0):!1},_handleEnterKey:function(current,currentTable,target){var editable=this.options.editable,container=target.closest("[role=gridcell]");if(target.is("table")||$.contains(current[0],target[0])||(current=container),current.is("th"))return current.find(".k-link").click(),!0;if(!editable&&this._toggleCurrent(current))return!0;var focusable=current.find(":kendoFocusable:first");return focusable[0]&&!current.hasClass("k-edit-cell")&&current.hasClass("k-state-focused")?(focusable.focus(),!0):editable&&!target.is(":button,.k-button,textarea")?(container[0]||(container=current),this._handleEditing(container,!1,currentTable),!0):!1},_nextHorizontalCell:function(table,current,originalIndex){var cells=current.nextAll(DATA_CELL);if(!cells.length){var rows=table.find(NAVROW),rowIndex=rows.index(current.parent());if(-1==rowIndex){if(current.hasClass("k-header")){var headerRows=[];return mapColumnToCellRows([lockedColumns(this.columns)[0]],childColumnsCells(rows.eq(0).children().first()),headerRows,0,0),headerRows[originalIndex]?headerRows[originalIndex][0]:current}return current.parent().hasClass("k-filter-row")?rows.last().children(DATA_CELL).first():rows.eq(originalIndex).children(DATA_CELL).first()}}return cells.first()},_prevHorizontalCell:function(table,current,originalIndex){var cells=current.prevAll(DATA_CELL);if(!cells.length){var rows=table.find(NAVROW),rowIndex=rows.index(current.parent());if(-1==rowIndex){if(current.hasClass("k-header")){var headerRows=[],columns=lockedColumns(this.columns);return mapColumnToCellRows([columns[columns.length-1]],childColumnsCells(rows.eq(0).children().last()),headerRows,0,0),headerRows[originalIndex]?headerRows[originalIndex][0]:current}return current.parent().hasClass("k-filter-row")?rows.last().children(DATA_CELL).last():rows.eq(originalIndex).children(DATA_CELL).last()}}return cells.first()},_currentDataIndex:function(table,current){var index=current.attr("data-index");if(!index)return undefined;var lockedColumnsCount=lockedColumns(this.columns).length;return lockedColumnsCount&&!table.closest("div").hasClass("k-grid-content-locked")[0]?index-lockedColumnsCount:index},_prevVerticalCell:function(container,current){var cells,row=current.parent(),rows=container.children(NAVROW),rowIndex=rows.index(row),index=this._currentDataIndex(container,current);if(index||current.hasClass("k-header"))return cells=parentColumnsCells(current),cells.eq(cells.length-2);if(index=row.children(DATA_CELL).index(current),row.hasClass("k-filter-row"))return leafDataCells(container).eq(index);if(-1==rowIndex){if(row=container.find(".k-filter-row"),!row[0])return leafDataCells(container).eq(index)}else row=0===rowIndex?$():rows.eq(rowIndex-1);return cells=row.children(DATA_CELL),cells.eq(cells.length>index?index:0)},_nextVerticalCell:function(container,current){var cells,row=current.parent(),rows=container.children(NAVROW),rowIndex=rows.index(row),index=this._currentDataIndex(container,current);return-1!=rowIndex&&index===undefined&&current.hasClass("k-header")?childColumnsCells(current).eq(1):(index=index?parseInt(index,10):row.children(DATA_CELL).index(current),row=rows.eq(-1==rowIndex?0:rowIndex+current[0].rowSpan),cells=row.children(DATA_CELL),cells.eq(cells.length>index?index:0))},_verticalContainer:function(container,up){var table=container.parent(),length=this._navigatableTables.length,step=Math.floor(length/2),index=inArray(table[0],this._navigatableTables);return up&&(step*=-1),index+=step,(index>=0||length>index)&&(table=this._navigatableTables.eq(index)),table.find(up?"thead":"tbody")},_horizontalContainer:function(container,right){var length=this._navigatableTables.length;if(2>=length)return container;var table=container.parent(),index=inArray(table[0],this._navigatableTables);return index+=right?1:-1,!right||2!=index&&index!=length?!right&&(1==index||0>index)?container:this._navigatableTables.eq(index).find("thead, tbody"):container},_tabNext:function(current,currentTable,back){var switchRow=!0,next=back?current.prevAll(DATA_CELL+":first"):current.nextAll(":visible:first");return next.length||(next=current.parent(),this.lockedTable&&(switchRow=back&&currentTable==this.lockedTable[0]||!back&&currentTable==this.table[0],next=this._relatedRow(next)),switchRow&&(next=next[back?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),next=next.children(DATA_CELL+(back?":last":":first"))),next},_handleEditing:function(current,next,table){var focusable,isEdited,that=this,active=$(activeElement()),mode=that._editMode(),isIE=browser.msie,oldIE=isIE&&browser.version<9,editContainer=that._editContainer;if(table=$(table),isEdited="incell"==mode?current.hasClass("k-edit-cell"):current.parent().hasClass("k-grid-edit-row"),that.editable){if($.contains(editContainer[0],active[0])&&(browser.opera||oldIE?active.blur().change().triggerHandler("blur"):(active.blur(),isIE&&active.blur())),!that.editable)return void focusTable(table);if(!that.editable.end())return that.current("incell"==mode?editContainer:editContainer.children().filter(DATA_CELL).first()),focusable=editContainer.find(":kendoFocusable:first")[0],void(focusable&&focusable.focus());"incell"==mode?that.closeCell():(that.saveRow(),isEdited=!0)}next&&that.current(next),oldIE&&document.body.focus(),focusTable(table,!0),(!isEdited&&!next||next)&&("incell"==mode?that.editCell(that.current()):that.editRow(that.current().parent()))},_wrapper:function(){var that=this,table=that.table,height=that.options.height,wrapper=that.element;wrapper.is("div")||(wrapper=wrapper.wrap("<div/>").parent()),that.wrapper=wrapper.addClass("k-grid k-widget"),height&&(that.wrapper.css(HEIGHT,height),table.css(HEIGHT,"auto")),that._initMobile()},_initMobile:function(){var options=this.options,that=this;if(this._isMobile=options.mobile===!0&&kendo.support.mobileOS||"phone"===options.mobile||"tablet"===options.mobile,this._isMobile){var html=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+kendo.ns+'stretch="true" data-'+kendo.ns+'role="view" data-'+kendo.ns+'init-widgets="false"></div>').parent();this.pane=kendo.mobile.ui.Pane.wrap(html),this.view=this.pane.view(),this._actionSheetPopupOptions=$(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},options.height&&this.pane.element.parent().css(HEIGHT,options.height),this._editAnimation="slide",this.view.bind("show",function(){that._isLocked()&&(that._updateTablesWidth(),that._applyLockedContainersWidth(),that._syncLockedContentHeight(),that._syncLockedHeaderHeight(),that._syncLockedFooterHeight())})}},_tbody:function(){var tbody,that=this,table=that.table;tbody=table.find(">tbody"),tbody.length||(tbody=$("<tbody/>").appendTo(table)),that.tbody=tbody.attr("role","rowgroup")},_scrollable:function(){var header,table,that=this,options=that.options,scrollable=options.scrollable,hasVirtualScroll=scrollable!==!0&&scrollable.virtual&&!that.virtualScrollable,scrollbar=!kendo.support.kineticScrollNeeded||hasVirtualScroll?kendo.support.scrollbar():0;if(scrollable){header=that.wrapper.children(".k-grid-header"),header[0]||(header=$('<div class="k-grid-header" />').insertBefore(that.table)),header.css(isRtl?"padding-left":"padding-right",scrollable.virtual?scrollbar+1:scrollbar),table=$('<table role="grid" />'),isIE7&&table.attr("cellspacing",0),table.width(that.table[0].style.width),table.append(that.thead),header.empty().append($('<div class="k-grid-header-wrap k-auto-scrollable" />').append(table)),that.content=that.table.parent(),that.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(that.content=that.content.parent()),that.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(that.content=that.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),hasVirtualScroll&&(that.virtualScrollable=new VirtualScrollable(that.content,{dataSource:that.dataSource,itemHeight:function(){return that._averageRowHeight()}})),that.scrollables=header.children(".k-grid-header-wrap").add(that.content);var footer=that.wrapper.find(".k-grid-footer");if(footer.length&&(that.scrollables=that.scrollables.add(footer.children(".k-grid-footer-wrap"))),scrollable.virtual)that.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+NS).bind("scroll"+NS,function(){that.scrollables.scrollLeft(this.scrollLeft),that.lockedContent&&(that.lockedContent[0].scrollTop=this.scrollTop)});else{that.scrollables.unbind("scroll"+NS).bind("scroll"+NS,function(e){that.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft),that.lockedContent&&e.currentTarget==that.content[0]&&(that.lockedContent[0].scrollTop=this.scrollTop)});var touchScroller=that.content.data("kendoTouchScroller");touchScroller&&touchScroller.destroy(),touchScroller=kendo.touchScroller(that.content),touchScroller&&touchScroller.movable&&(that.touchScroller=touchScroller,touchScroller.movable.bind("change",function(e){that.scrollables.scrollLeft(-e.sender.x),that.lockedContent&&that.lockedContent.scrollTop(-e.sender.y)}),that.one(DATABOUND,function(e){e.sender.wrapper.addClass("k-grid-backface")}))}}},_renderNoRecordsContent:function(){var that=this;if(that.options.noRecords){var noRecordsElement=that.table.parent().children("."+NORECORDSCLASS);noRecordsElement.length&&noRecordsElement.remove(),that.dataSource&&that.dataSource.view().length||$(that.noRecordsTemplate({})).insertAfter(that.table)}},_setContentWidth:function(scrollLeft){var expander,that=this,hiddenDivClass="k-grid-content-expander",hiddenDiv='<div class="'+hiddenDivClass+'"></div>',resizable=that.resizable;that.options.scrollable&&that.wrapper.is(":visible")&&(expander=that.table.parent().children("."+hiddenDivClass),that._setContentWidthHandler=proxy(that._setContentWidth,that),that.dataSource&&that.dataSource.view().length?expander[0]&&(expander.remove(),resizable&&resizable.unbind("resize",that._setContentWidthHandler)):(expander[0]||(expander=$(hiddenDiv).appendTo(that.table.parent()),resizable&&resizable.bind("resize",that._setContentWidthHandler)),that.thead&&(expander.width(that.thead.width()),scrollLeft&&that.content.scrollLeft(scrollLeft))),that._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var footerWrap,headerTable=this.thead.parent(),headerWrap=headerTable.parent(),contentWidth=this.wrapper[0].clientWidth,groups=this._groups(),scrollbar=kendo.support.scrollbar(),cols=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),nonLockedCols=headerTable.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),width=columnsWidth(cols),nonLockedColsWidth=columnsWidth(nonLockedCols);groups>0&&(width+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*groups),width>=contentWidth&&(width=contentWidth-3*scrollbar),this.lockedHeader.add(this.lockedContent).width(width),headerWrap[0].style.width=headerWrap.parent().width()-width-2+"px",headerTable.add(this.table).width(nonLockedColsWidth),this.virtualScrollable&&(contentWidth-=scrollbar),this.content[0].style.width=contentWidth-width-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(width),footerWrap=this.footer.find(".k-grid-footer-wrap"),footerWrap[0].style.width=headerWrap[0].clientWidth+"px",footerWrap.children().first().width(nonLockedColsWidth))}},_setContentHeight:function(){var that=this,options=that.options,height=that.wrapper.innerHeight(),header=that.wrapper.children(".k-grid-header"),scrollbar=kendo.support.scrollbar();if(options.scrollable&&that.wrapper.is(":visible")){height-=header.outerHeight(),that.pager&&(height-=that.pager.element.outerHeight()),options.groupable&&(height-=that.wrapper.children(".k-grouping-header").outerHeight()),options.toolbar&&(height-=that.wrapper.children(".k-grid-toolbar").outerHeight()),that.footerTemplate&&(height-=that.wrapper.children(".k-grid-footer").outerHeight());var isGridHeightSet=function(el){var initialHeight,newHeight;return el[0].style.height?!0:(initialHeight=el.height(),el.height("auto"),newHeight=el.height(),initialHeight!=newHeight?(el.height(""),!0):(el.height(""),!1))};isGridHeightSet(that.wrapper)&&(height>2*scrollbar?(that.lockedContent&&(scrollbar=that.table[0].offsetWidth>that.table.parent()[0].clientWidth?scrollbar:0,that.lockedContent.height(height-scrollbar)),that.content.height(height)):that.content.height(2*scrollbar+1))}},_averageRowHeight:function(){var that=this,itemsCount=that._items(that.tbody).length,rowHeight=that._rowHeight;if(0===itemsCount)return rowHeight;that._rowHeight||(that._rowHeight=rowHeight=that.table.outerHeight()/itemsCount,that._sum=rowHeight,that._measures=1);var currentRowHeight=that.table.outerHeight()/itemsCount;return rowHeight!==currentRowHeight&&(that._measures++,that._sum+=currentRowHeight,that._rowHeight=that._sum/that._measures),rowHeight},_dataSource:function(){var pageable,that=this,options=that.options,dataSource=options.dataSource;dataSource=isArray(dataSource)?{data:dataSource}:dataSource,isPlainObject(dataSource)&&(extend(dataSource,{table:that.table,fields:that.columns}),pageable=options.pageable,isPlainObject(pageable)&&pageable.pageSize!==undefined&&(dataSource.pageSize=pageable.pageSize)),that.dataSource&&that._refreshHandler?that.dataSource.unbind(CHANGE,that._refreshHandler).unbind(PROGRESS,that._progressHandler).unbind(ERROR,that._errorHandler):(that._refreshHandler=proxy(that.refresh,that),that._progressHandler=proxy(that._requestStart,that),that._errorHandler=proxy(that._error,that)),that.dataSource=DataSource.create(dataSource).bind(CHANGE,that._refreshHandler).bind(PROGRESS,that._progressHandler).bind(ERROR,that._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(e){var relatedRow,cell,column,tmp,selectable,selectableRow,childCells,originalCells,length,that=this,tbody=that.tbody,model=e.model,row=that.tbody.find("tr["+kendo.attr("uid")+"="+model.uid+"]"),isAlt=row.hasClass("k-alt"),idx=that._items(tbody).index(row),isLocked=that.lockedContent;if(isLocked&&(relatedRow=that._relatedRow(row)),row.add(relatedRow).children(".k-edit-cell").length&&!that.options.rowTemplate)row.add(relatedRow).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){cell=$(this),column=leafColumns(that.columns)[that.cellIndex(cell)],column.field===e.field&&(cell.hasClass("k-edit-cell")?cell.addClass("k-dirty-cell"):(that._displayCell(cell,column,model),$('<span class="k-dirty"/>').prependTo(cell)))});else if(!row.hasClass("k-grid-edit-row")){selectableRow=$().add(row),isLocked&&(tmp=(isAlt?that.lockedAltRowTemplate:that.lockedRowTemplate)(model),selectableRow=selectableRow.add(relatedRow),relatedRow.replaceWith(tmp)),that.angular("cleanup",function(){return{elements:selectableRow.get()}}),tmp=(isAlt?that.altRowTemplate:that.rowTemplate)(model),row.replaceWith(tmp),tmp=that._items(tbody).eq(idx);var angularData=[{dataItem:model}];for(isLocked&&(row=row.add(relatedRow),relatedRow=that._relatedRow(tmp)[0],adjustRowHeight(tmp[0],relatedRow),tmp=tmp.add(relatedRow),angularData.push({dataItem:model})),that.angular("compile",function(){return{elements:tmp.get(),data:angularData}}),selectable=that.options.selectable,selectable&&row.hasClass("k-state-selected")&&that.select(tmp),originalCells=selectableRow.children(":not(.k-group-cell,.k-hierarchy-cell)"),childCells=tmp.children(":not(.k-group-cell,.k-hierarchy-cell)"),idx=0,length=that.columns.length;length>idx;idx++)column=that.columns[idx],cell=childCells.eq(idx),selectable&&originalCells.eq(idx).hasClass("k-state-selected")&&cell.addClass("k-state-selected"),column.field===e.field&&$('<span class="k-dirty"/>').prependTo(cell);that.trigger("itemChange",{item:tmp,data:model,ns:ui})}},_pageable:function(){var wrapper,that=this,pageable=that.options.pageable;pageable&&(wrapper=that.wrapper.children("div.k-grid-pager"),wrapper.length||(wrapper=$('<div class="k-pager-wrap k-grid-pager"/>').appendTo(that.wrapper)),that.pager&&that.pager.destroy(),"object"==typeof pageable&&pageable instanceof kendo.ui.Pager?that.pager=pageable:that.pager=new kendo.ui.Pager(wrapper,extend({},pageable,{dataSource:that.dataSource})))},_footer:function(){var footerWrap,that=this,aggregates=that.dataSource.aggregates(),html="",footerTemplate=that.footerTemplate,options=that.options,footer=that.footer||that.wrapper.find(".k-grid-footer");if(footerTemplate){if(html=$(that._wrapFooter(footerTemplate(aggregates))),footer.length){var tmp=html;that.angular("cleanup",function(){return{elements:footer.get()}}),footer.replaceWith(tmp),footer=that.footer=tmp}else footer=options.scrollable?that.footer=options.pageable?html.insertBefore(that.wrapper.children("div.k-grid-pager")):html.appendTo(that.wrapper):that.footer=html.insertBefore(that.tbody);that.angular("compile",function(){return{elements:footer.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:map(that.columns,function(col){return{column:col,aggregate:aggregates[col.field]}})}})}else footer&&!that.footer&&(that.footer=footer);if(footer.length&&(options.scrollable&&(footerWrap=footer.attr("tabindex",-1).children(".k-grid-footer-wrap"),that.scrollables=that.scrollables.filter(function(){return!$(this).is(".k-grid-footer-wrap")}).add(footerWrap)),that._footerWidth&&footer.find("table").css("width",that._footerWidth),footerWrap)){var offset=that.content.scrollLeft(),hasVirtualScroll=options.scrollable!==!0&&options.scrollable.virtual&&!that.virtualScrollable;hasVirtualScroll&&(offset=that.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),footerWrap.scrollLeft(offset)}that.lockedContent&&(that._appendLockedColumnFooter(),that._applyLockedContainersWidth(),that._syncLockedFooterHeight())},_wrapFooter:function(footerRow){var that=this,html="",scrollbar=kendo.support.mobileOS?0:kendo.support.scrollbar();return that.options.scrollable?(html=$('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(isIE7?' cellspacing="0"':"")+"><tbody>"+footerRow+"</tbody></table></div></div>"),that._appendCols(html.find("table")),html.css(isRtl?"padding-left":"padding-right",scrollbar),html):'<tfoot class="k-grid-footer">'+footerRow+"</tfoot>"},_columnMenu:function(){var menu,column,menuOptions,sortable,filterable,cells,that=this,columns=leafColumns(that.columns),options=that.options,columnMenu=options.columnMenu,hasMultiColumnHeaders=grep(that.columns,function(item){return item.columns!==undefined}).length>0,isMobile=this._isMobile,initCallback=function(e){that.trigger(COLUMNMENUINIT,{field:e.field,container:e.container})},closeCallback=function(element){focusTable(element.closest("table"),!0)},$angular=options.$angular;if(columnMenu){"boolean"==typeof columnMenu&&(columnMenu={}),cells=leafDataCells(that.thead);for(var idx=0,length=cells.length;length>idx;idx++){column=columns[idx];var cell=cells.eq(idx);column.command||!column.field&&!cell.attr("data-"+kendo.ns+"field")||(menu=cell.data("kendoColumnMenu"),menu&&menu.destroy(),sortable=column.sortable!==!1&&columnMenu.sortable!==!1&&options.sortable!==!1?extend({},options.sortable,{compare:(column.sortable||{}).compare}):!1,filterable=options.filterable&&column.filterable!==!1&&columnMenu.filterable!==!1?extend({pane:that.pane},options.filterable,column.filterable):!1,column.filterable&&column.filterable.dataSource&&(filterable.forceUnique=!1,filterable.checkSource=column.filterable.dataSource),filterable&&(filterable.format=column.format),menuOptions={dataSource:that.dataSource,values:column.values,columns:columnMenu.columns,sortable:sortable,filterable:filterable,messages:columnMenu.messages,owner:that,closeCallback:closeCallback,init:initCallback,pane:that.pane,filter:isMobile?":not(.k-column-active)":"",lockedColumns:!hasMultiColumnHeaders&&column.lockable!==!1&&lockedColumns(columns).length>0},$angular&&(menuOptions.$angular=$angular),cell.kendoColumnMenu(menuOptions))}}},_headerCells:function(){return this.thead.find("th").filter(function(){var th=$(this);return!th.hasClass("k-group-cell")&&!th.hasClass("k-hierarchy-cell")})},_filterable:function(){var filterMenu,cells,cell,that=this,columns=leafColumns(that.columns),filterInit=function(e){that.trigger(FILTERMENUINIT,{field:e.field,container:e.container})},closeCallback=function(element){focusTable(element.closest("table"),!0)},filterable=that.options.filterable;if(filterable&&typeof filterable.mode==STRING&&-1==filterable.mode.indexOf("menu")&&(filterable=!1),filterable&&!that.options.columnMenu){cells=leafDataCells(that.thead);for(var idx=0,length=cells.length;length>idx;idx++)if(cell=cells.eq(idx),columns[idx].filterable!==!1&&!columns[idx].command&&(columns[idx].field||cell.attr("data-"+kendo.ns+"field"))){filterMenu=cell.data("kendoFilterMenu"),filterMenu&&filterMenu.destroy(),filterMenu=cell.data("kendoFilterMultiCheck"),filterMenu&&filterMenu.destroy();var columnFilterable=columns[idx].filterable,options=extend({},filterable,columnFilterable,{dataSource:that.dataSource,values:columns[idx].values,format:columns[idx].format,closeCallback:closeCallback,title:columns[idx].title||columns[idx].field,init:filterInit,pane:that.pane});columnFilterable&&columnFilterable.messages&&(options.messages=extend(!0,{},filterable.messages,columnFilterable.messages)),columnFilterable&&columnFilterable.dataSource&&(options.forceUnique=!1,options.checkSource=columnFilterable.dataSource),columnFilterable&&columnFilterable.multi?cell.kendoFilterMultiCheck(options):cell.kendoFilterMenu(options)}}},_filterRow:function(){var that=this;if(that._hasFilterRow()){var settings,$angular=that.options.$angular,columns=leafColumns(that.columns),filterable=that.options.filterable,rowheader=that.thead.find(".k-filter-row");this._updateHeader(this.dataSource.group().length);for(var i=0;i<columns.length;i++){var suggestDataSource,col=columns[i],operators=that.options.filterable.operators,customDataSource=!1,th=$("<th/>"),field=col.field;if(col.hidden&&th.hide(),rowheader.append(th),field&&col.filterable!==!1){var cellOptions=col.filterable&&col.filterable.cell||{};suggestDataSource=that.options.dataSource,suggestDataSource instanceof DataSource&&(suggestDataSource=that.options.dataSource.options);var messages=extend(!0,{},filterable.messages);if(col.filterable&&extend(!0,messages,col.filterable.messages),cellOptions.enabled===!1){th.html("&nbsp;");continue}cellOptions.dataSource&&(suggestDataSource=cellOptions.dataSource,customDataSource=!0),col.filterable&&col.filterable.operators&&(operators=col.filterable.operators),settings={column:col,dataSource:that.dataSource,suggestDataSource:suggestDataSource,customDataSource:customDataSource,field:field,messages:messages,values:col.values,template:cellOptions.template,delay:cellOptions.delay,inputWidth:cellOptions.inputWidth,suggestionOperator:cellOptions.suggestionOperator,minLength:cellOptions.minLength,dataTextField:cellOptions.dataTextField,operator:cellOptions.operator,operators:operators,showOperators:cellOptions.showOperators},$angular&&(settings.$angular=$angular),$("<span/>").attr(kendo.attr("field"),field).appendTo(th).kendoFilterCell(settings)}else th.html("&nbsp;")}}},_sortable:function(){var column,sorterInstance,cell,that=this,columns=leafColumns(that.columns),sortable=that.options.sortable;if(sortable){for(var cells=leafDataCells(that.thead),idx=0,length=cells.length;length>idx;idx++)column=columns[idx],column.sortable!==!1&&!column.command&&column.field&&(cell=cells.eq(idx),sorterInstance=cell.data("kendoColumnSorter"),sorterInstance&&sorterInstance.destroy(),cell.attr("data-"+kendo.ns+"field",column.field).kendoColumnSorter(extend({},sortable,column.sortable,{dataSource:that.dataSource,aria:!0,filter:":not(.k-column-active)"})));cells=null}},_columns:function(columns){var encoded,lockedCols,that=this,table=that.table,cols=table.find("col"),dataSource=that.options.dataSource;if(columns=columns.length?columns:map(table.find("th"),function(th,idx){th=$(th);var sortable=th.attr(kendo.attr("sortable")),filterable=th.attr(kendo.attr("filterable")),type=th.attr(kendo.attr("type")),groupable=th.attr(kendo.attr("groupable")),field=th.attr(kendo.attr("field")),title=th.attr(kendo.attr("title")),menu=th.attr(kendo.attr("menu"));return field||(field=th.text().replace(/\s|[^A-z0-9]/g,"")),{field:field,type:type,title:title,sortable:"false"!==sortable,filterable:"false"!==filterable,groupable:"false"!==groupable,menu:menu,template:th.attr(kendo.attr("template")),width:cols.eq(idx).css("width")}}),encoded=!(that.table.find("tbody tr").length>0&&(!dataSource||!dataSource.transport)),that.options.scrollable){var initialColumns=columns;if(lockedCols=lockedColumns(columns),columns=nonLockedColumns(columns),lockedCols.length>0&&0===columns.length)throw new Error("There should be at least one non locked column");normalizeHeaderCells(that.element.find("tr:has(th):first"),initialColumns),columns=lockedCols.concat(columns)}that.columns=normalizeColumns(columns,encoded)},_groups:function(){var group=this.dataSource.group();return group?group.length:0},_tmpl:function(rowTemplate,columns,alt,skipGroupCells){var idx,template,column,type,that=this,settings=extend({},kendo.Template,that.options.templateSettings),length=columns.length,state={storage:{},count:0},hasDetails=that._hasDetails(),className=[],groups=that._groups();if(!rowTemplate){for(rowTemplate="<tr",alt&&className.push("k-alt"),hasDetails&&className.push("k-master-row"),className.length&&(rowTemplate+=' class="'+className.join(" ")+'"'),length&&(rowTemplate+=" "+kendo.attr("uid")+'="#='+kendo.expr("uid",settings.paramName)+'#"'),rowTemplate+=" role='row'>",groups>0&&!skipGroupCells&&(rowTemplate+=groupCells(groups)),hasDetails&&(rowTemplate+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),idx=0;length>idx;idx++)column=columns[idx],template=column.template,type=typeof template,rowTemplate+="<td"+stringifyAttributes(column.attributes)+" role='gridcell'>",rowTemplate+=that._cellTmpl(column,state),rowTemplate+="</td>";rowTemplate+="</tr>"}return rowTemplate=kendo.template(rowTemplate,settings),state.count>0?proxy(rowTemplate,state.storage):rowTemplate},_headerCellText:function(column){var that=this,settings=extend({},kendo.Template,that.options.templateSettings),template=column.headerTemplate,type=typeof template,text=column.title||column.field||"";return type===FUNCTION?text=kendo.template(template,settings)({}):type===STRING&&(text=template),text},_cellTmpl:function(column,state){var idx,length,that=this,settings=extend({},kendo.Template,that.options.templateSettings),template=column.template,paramName=settings.paramName,field=column.field,html="",format=column.format,type=typeof template,columnValues=column.values;if(column.command){if(isArray(column.command)){for(idx=0,length=column.command.length;length>idx;idx++)html+=that._createButton(column.command[idx]);return html.replace(templateHashRegExp,"\\#")}return that._createButton(column.command).replace(templateHashRegExp,"\\#")}return type===FUNCTION?(state.storage["tmpl"+state.count]=template,html+="#=this.tmpl"+state.count+"("+paramName+")#",state.count++):type===STRING?html+=template:columnValues&&columnValues.length&&isPlainObject(columnValues[0])&&"value"in columnValues[0]&&field?(html+="#var v ="+kendo.stringify(convertToObject(columnValues)).replace(templateHashRegExp,"\\#")+"#",html+="#var f = v[",settings.useWithBlock||(html+=paramName+"."),html+=field+"]#",html+="${f != null ? f : ''}"):(html+=column.encoded?"#:":"#=",format&&(html+='kendo.format("'+format.replace(formatRegExp,"\\$1")+'",'),field?(field=kendo.expr(field,paramName),html+=field+"==null?'':"+field):html+="''",format&&(html+=")"),html+="#"),html},_templates:function(){var that=this,options=that.options,dataSource=that.dataSource,groups=dataSource.group(),footer=that.footer||that.wrapper.find(".k-grid-footer"),aggregates=dataSource.aggregate(),columnLeafs=leafColumns(that.columns),columnsLocked=leafColumns(lockedColumns(that.columns)),columns=options.scrollable?leafColumns(nonLockedColumns(that.columns)):columnLeafs;
if(options.scrollable&&columnsLocked.length){if(options.rowTemplate||options.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");that.rowTemplate=that._tmpl(options.rowTemplate,columns,!1,!0),that.altRowTemplate=that._tmpl(options.altRowTemplate||options.rowTemplate,columns,!0,!0),that.lockedRowTemplate=that._tmpl(options.rowTemplate,columnsLocked),that.lockedAltRowTemplate=that._tmpl(options.altRowTemplate||options.rowTemplate,columnsLocked,!0)}else that.rowTemplate=that._tmpl(options.rowTemplate,columns),that.altRowTemplate=that._tmpl(options.altRowTemplate||options.rowTemplate,columns,!0);that._hasDetails()&&(that.detailTemplate=that._detailTmpl(options.detailTemplate||"")),(that._group&&!isEmptyObject(aggregates)||!isEmptyObject(aggregates)&&!footer.length||grep(columnLeafs,function(column){return column.footerTemplate}).length)&&(that.footerTemplate=that._footerTmpl(columnLeafs,aggregates,"footerTemplate","k-footer-template")),groups&&grep(columnLeafs,function(column){return column.groupFooterTemplate}).length&&(aggregates=$.map(groups,function(g){return g.aggregates}),that.groupFooterTemplate=that._footerTmpl(columns,aggregates,"groupFooterTemplate","k-group-footer",columnsLocked.length),options.scrollable&&columnsLocked.length&&(that.lockedGroupFooterTemplate=that._footerTmpl(columnsLocked,aggregates,"groupFooterTemplate","k-group-footer"))),that.options.noRecords&&(that.noRecordsTemplate=that._noRecordsTmpl())},_noRecordsTmpl:function(){var template,type,tmpl,wrapper='<div class="{0}">{1}</div>',defaultTemplate='<div class="k-grid-norecords-template"{1}>{0}</div>',scrollableNoGridHeightStyles=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",state={storage:{},count:0},settings=$.extend({},kendo.Template,this.options.templateSettings),paramName=settings.paramName,html="";return template=this.options.noRecords.template?this.options.noRecords.template:kendo.format(defaultTemplate,this.options.messages.noRecords,scrollableNoGridHeightStyles),type=typeof template,"function"===type?(state.storage["tmpl"+state.count]=template,html+="#=this.tmpl"+state.count+"("+paramName+")#",state.count++):"string"===type&&(html+=template),tmpl=kendo.template(kendo.format(wrapper,NORECORDSCLASS,html),settings),state.count>0&&(tmpl=$.proxy(tmpl,state.storage)),tmpl},_footerTmpl:function(columns,aggregates,templateName,rowClass,skipGroupCells){var idx,length,template,type,column,that=this,settings=extend({},kendo.Template,that.options.templateSettings),paramName=settings.paramName,html="",storage={},count=0,scope={},groups=that._groups(),fieldsMap=that.dataSource._emptyAggregates(aggregates);for(html+='<tr class="'+rowClass+'">',groups>0&&!skipGroupCells&&(html+=groupCells(groups)),that._hasDetails()&&(html+='<td class="k-hierarchy-cell">&nbsp;</td>'),idx=0,length=columns.length;length>idx;idx++)column=columns[idx],template=column[templateName],type=typeof template,html+="<td"+stringifyAttributes(column.footerAttributes)+">",template?(type!==FUNCTION&&(scope=fieldsMap[column.field]?extend({},settings,{paramName:paramName+"['"+column.field+"']"}):{},template=kendo.template(template,scope)),storage["tmpl"+count]=template,html+="#=this.tmpl"+count+"("+paramName+")#",count++):html+="&nbsp;",html+="</td>";return html+="</tr>",html=kendo.template(html,settings),count>0?proxy(html,storage):html},_detailTmpl:function(template){var that=this,html="",settings=extend({},kendo.Template,that.options.templateSettings),paramName=settings.paramName,templateFunctionStorage={},templateFunctionCount=0,groups=that._groups(),colspan=visibleColumns(leafColumns(that.columns)).length,type=typeof template;return html+='<tr class="k-detail-row">',groups>0&&(html+=groupCells(groups)),html+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(colspan?' colspan="'+colspan+'"':"")+">",type===FUNCTION?(templateFunctionStorage["tmpl"+templateFunctionCount]=template,html+="#=this.tmpl"+templateFunctionCount+"("+paramName+")#",templateFunctionCount++):html+=template,html+="</td></tr>",html=kendo.template(html,settings),templateFunctionCount>0?proxy(html,templateFunctionStorage):html},_hasDetails:function(){var that=this;return null!==that.options.detailTemplate||(that._events[DETAILINIT]||[]).length},_hasFilterRow:function(){var filterable=this.options.filterable,hasFiltering=filterable&&typeof filterable.mode==STRING&&-1!=filterable.mode.indexOf("row"),columns=this.columns,columnsWithoutFiltering=$.grep(columns,function(col){return col.filterable===!1});return columns.length&&columnsWithoutFiltering.length==columns.length&&(hasFiltering=!1),hasFiltering},_details:function(){var that=this;if(that.options.scrollable&&that._hasDetails()&&lockedColumns(that.columns).length)throw new Error("Having both detail template and locked columns is not supported");that.table.on(CLICK+NS,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(e){var detailRow,data,button=$(this),expanding=button.hasClass("k-plus"),masterRow=button.closest("tr.k-master-row"),detailTemplate=that.detailTemplate,hasDetails=that._hasDetails();return button.toggleClass("k-plus",!expanding).toggleClass("k-minus",expanding),detailRow=masterRow.next(),hasDetails&&!detailRow.hasClass("k-detail-row")&&(data=that.dataItem(masterRow),detailRow=$(detailTemplate(data)).addClass(masterRow.hasClass("k-alt")?"k-alt":"").insertAfter(masterRow),that.angular("compile",function(){return{elements:detailRow.get(),data:[{dataItem:data}]}}),that.trigger(DETAILINIT,{masterRow:masterRow,detailRow:detailRow,data:data,detailCell:detailRow.find(".k-detail-cell")})),that.trigger(expanding?DETAILEXPAND:DETAILCOLLAPSE,{masterRow:masterRow,detailRow:detailRow}),detailRow.toggle(expanding),that._current&&that._current.attr("aria-expanded",expanding),e.preventDefault(),!1})},dataItem:function(tr){if(tr=$(tr)[0],!tr)return null;var j,correctIdx,rows=this.tbody.children(),classesRegEx=/k-grouping-row|k-detail-row|k-group-footer/,idx=tr.sectionRowIndex;for(correctIdx=idx,j=0;idx>j;j++)classesRegEx.test(rows[j].className)&&correctIdx--;return this._data[correctIdx]},expandRow:function(tr){$(tr).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(tr){$(tr).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(columns,rowSpan){var idx,th,text,length,field,that=this,html="",leafs=leafColumns(that.columns);for(idx=0,length=columns.length;length>idx;idx++){th=columns[idx].column||columns[idx],text=that._headerCellText(th),field="";var index=inArray(th,leafs);th.command?(html+="<th"+stringifyAttributes(th.headerAttributes),rowSpan&&!columns[idx].colSpan&&(html+=" rowspan='"+rowSpan+"'"),index>-1&&(html+=kendo.attr("index")+"='"+index+"'"),html+=">"+text+"</th>"):(th.field&&(field=kendo.attr("field")+"='"+th.field+"' "),html+="<th role='columnheader' "+field,rowSpan&&!columns[idx].colSpan&&(html+=" rowspan='"+rowSpan+"'"),columns[idx].colSpan>1&&(html+='colspan="'+(columns[idx].colSpan-hiddenLeafColumnsCount(th.columns))+'" ',html+=kendo.attr("colspan")+"='"+columns[idx].colSpan+"'"),th.title&&(html+=kendo.attr("title")+'="'+th.title.replace('"',"&quot;").replace(/'/g,"'")+'" '),th.groupable!==undefined&&(html+=kendo.attr("groupable")+"='"+th.groupable+"' "),th.aggregates&&th.aggregates.length&&(html+=kendo.attr("aggregates")+"='"+th.aggregates+"'"),index>-1&&(html+=kendo.attr("index")+"='"+index+"'"),html+=stringifyAttributes(th.headerAttributes),html+=">"+text+"</th>")}return html},_appendLockedColumnContent:function(){var idx,length,container,colSpan,spanIdx,columns=this.columns,colgroup=this.table.find("colgroup"),cols=colgroup.find("col:not(.k-group-col,.k-hierarchy-col)"),lockedCols=$(),skipHiddenCount=0,colOffset=0;for(idx=0,length=columns.length;length>idx;idx++)if(columns[idx].locked)if(isVisible(columns[idx])){for(colSpan=1,columns[idx].columns&&(colSpan=leafColumns(columns[idx].columns).length-hiddenLeafColumnsCount(columns[idx].columns)),colSpan=colSpan||1,spanIdx=0;colSpan>spanIdx;spanIdx++)lockedCols=lockedCols.add(cols.eq(idx+colOffset+spanIdx-skipHiddenCount));colOffset+=colSpan-1}else skipHiddenCount++;container=$('<div class="k-grid-content-locked"><table'+(isIE7?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),colgroup.detach(),container.find("colgroup").append(lockedCols),colgroup.insertBefore(this.table.find("tbody")),this.lockedContent=container.insertBefore(this.content),this.lockedTable=container.children("table")},_appendLockedColumnFooter:function(){var idx,length,that=this,footer=that.footer,cells=footer.find(".k-footer-template>td"),cols=footer.find(".k-grid-footer-wrap>table>colgroup>col"),html=$('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),groups=that._groups(),lockedCells=$(),lockedCols=$();for(lockedCells=lockedCells.add(cells.filter(".k-group-cell")),idx=0,length=leafColumns(lockedColumns(that.columns)).length;length>idx;idx++)lockedCells=lockedCells.add(cells.eq(idx+groups));for(lockedCols=lockedCols.add(cols.filter(".k-group-col")),idx=0,length=leafColumns(visibleLockedColumns(that.columns)).length;length>idx;idx++)lockedCols=lockedCols.add(cols.eq(idx+groups));lockedCells.appendTo(html.find("tr")),lockedCols.appendTo(html.find("colgroup")),that.lockedFooter=html.prependTo(footer)},_appendLockedColumnHeader:function(container){var idx,html,length,colgroup,tr,trFilter,table,header,filtercellCells,cell,that=this,columns=this.columns,rows=[],skipHiddenCount=0,cols=$(),hasFilterRow=that._hasFilterRow(),filterCellOffset=0,filterCells=$(),leafColumnsCount=0,cells=$();colgroup=that.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),header=that.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),filtercellCells=that.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var colOffset=0;for(idx=0,length=columns.length;length>idx;idx++){if(columns[idx].locked){if(cell=header.eq(idx),leafColumnsCount=leafColumns(columns[idx].columns||[]).length,isVisible(columns[idx])){var colSpan;columns[idx].columns&&(colSpan=leafColumnsCount-hiddenLeafColumnsCount(columns[idx].columns)),colSpan=colSpan||1;for(var spanIdx=0;colSpan>spanIdx;spanIdx++)cols=cols.add(colgroup.eq(idx+colOffset+spanIdx-skipHiddenCount));colOffset+=colSpan-1}mapColumnToCellRows([columns[idx]],childColumnsCells(cell),rows,0,0),leafColumnsCount=leafColumnsCount||1;for(var j=0;leafColumnsCount>j;j++)filterCells=filterCells.add(filtercellCells.eq(filterCellOffset+j));filterCellOffset+=leafColumnsCount}columns[idx].columns&&(skipHiddenCount+=hiddenLeafColumnsCount(columns[idx].columns)),isVisible(columns[idx])||skipHiddenCount++}if(rows.length){for(html='<div class="k-grid-header-locked" style="width:1px"><table'+(isIE7?' cellspacing="0"':"")+"><colgroup/><thead>",html+=new Array(rows.length+1).join("<tr></tr>"),html+=(hasFilterRow?'<tr class="k-filter-row" />':"")+"</thead></table></div>",table=$(html),colgroup=table.find("colgroup"),colgroup.append(that.thead.prev().find("col.k-group-col").add(cols)),tr=table.find("thead tr:not(.k-filter-row)"),idx=0,length=rows.length;length>idx;idx++)cells=toJQuery(rows[idx]),tr.eq(idx).append(that.thead.find("tr:eq("+idx+") .k-group-cell").add(cells));var count=removeEmptyRows(this.thead);rows.length<count&&removeRowSpanValue(table,count-rows.length),trFilter=table.find(".k-filter-row"),trFilter.append(that.thead.find(".k-filter-row .k-group-cell").add(filterCells)),this.lockedHeader=table.prependTo(container),this.thead.find(".k-group-cell").remove(),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var elements=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);kendo.destroy(elements),elements.off(NS).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var idx,tr,that=this,columns=that.columns,hasDetails=that._hasDetails()&&columns.length,hasFilterRow=that._hasFilterRow(),html="",thead=that.table.find(">thead"),hasTHead=that.element.find("thead:first").length>0;if(thead.length||(thead=$("<thead/>").insertBefore(that.tbody)),that.lockedHeader&&that.thead?(tr=that.thead.find("tr:has(th):not(.k-filter-row)").html(""),tr.remove(),tr=$(),that._removeLockedContainers()):tr=that.element.find(hasTHead?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!tr.length&&(tr=thead.children().first(),!tr.length)){var rows=[{rowSpan:1,cells:[],index:0}];for(that._prepareColumns(rows,columns),idx=0;idx<rows.length;idx++)html+="<tr>",hasDetails&&(html+='<th class="k-hierarchy-cell">&nbsp;</th>'),html+=that._createHeaderCells(rows[idx].cells,rows[idx].rowSpan),html+="</tr>";tr=$(html)}if(hasFilterRow){var filterRow=$("<tr/>");filterRow.addClass("k-filter-row"),(hasDetails||tr.find(".k-hierarchy-cell").length)&&filterRow.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');var existingFilterRow=(that.thead||thead).find(".k-filter-row");existingFilterRow.length&&(kendo.destroy(existingFilterRow),existingFilterRow.remove()),thead.append(filterRow)}tr.children().length?hasDetails&&!tr.find(".k-hierarchy-cell")[0]&&tr.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(html="",hasDetails&&(html+='<th class="k-hierarchy-cell">&nbsp;</th>'),html+=that._createHeaderCells(columns),tr.html(html)),tr.attr("role","row").find("th").addClass("k-header"),that.options.scrollable||thead.addClass("k-grid-header"),tr.find("script").remove().end().prependTo(thead),that.thead&&that._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:thead.find("th").get()}}),this.angular("compile",function(){return{elements:thead.find("th").get(),data:map(columns,function(col){return{column:col}})}}),that.thead=thead.attr("role","rowgroup"),that._sortable(),that._filterable(),that._filterRow(),that._scrollable(),that._updateCols(),that._columnMenu(),this.options.scrollable&&lockedColumns(this.columns).length&&(that._appendLockedColumnHeader(that.thead.closest(".k-grid-header")),that._appendLockedColumnContent(),that.lockedContent.bind("DOMMouseScroll"+NS+" mousewheel"+NS,proxy(that._wheelScroll,that)),that._applyLockedContainersWidth()),that._updateColumnCellIndex(),that._updateFirstColumnClass(),that._resizable(),that._draggable(),that._reorderable(),that._updateHeader(that._groups()),that.groupable&&that._attachGroupable()},_updateFirstColumnClass:function(){var that=this,columns=that.columns||[],hasDetails=that._hasDetails()&&columns.length;if(!hasDetails&&!that._groups()){var rows=$(),tr=that.thead.find(">tr:not(.k-filter-row):not(:first)");columns=nonLockedColumns(columns),tr.length&&columns[0]&&!columns[0].columns&&(rows=rows.add(tr)),that._isLocked()&&(tr=that.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),columns=lockedColumns(that.columns),tr.length&&columns[0]&&!columns[0].columns&&(rows=rows.add(tr))),rows.each(function(){var ths=$(this).find("th");ths.removeClass("k-first"),ths.eq(0).addClass("k-first")})}},_prepareColumns:function(rows,columns,parentCell,parentRow){for(var row=parentRow||rows[rows.length-1],childRow=rows[row.index+1],totalColSpan=0,idx=0;idx<columns.length;idx++){var cell={column:columns[idx],colSpan:0};row.cells.push(cell),columns[idx].columns&&columns[idx].columns.length&&(childRow||(childRow={rowSpan:0,cells:[],index:rows.length},rows.push(childRow)),cell.colSpan=columns[idx].columns.length,this._prepareColumns(rows,columns[idx].columns,cell,childRow),totalColSpan+=cell.colSpan-1,row.rowSpan=rows.length-row.index)}parentCell&&(parentCell.colSpan+=totalColSpan)},_wheelScroll:function(e){if(!e.ctrlKey){var content=this.content;this.options.scrollable.virtual&&(content=this.virtualScrollable.verticalScrollbar);var scrollTop=content.scrollTop(),delta=kendo.wheelDeltaY(e);delta&&(e.preventDefault(),$(e.currentTarget).one("wheel"+NS,!1),content.scrollTop(scrollTop+-delta))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var table=this.thead.parent().add(this.table);this._isLocked()?normalizeCols(table,visibleLeafColumns(visibleNonLockedColumns(this.columns)),this._hasDetails(),0):normalizeCols(table,visibleLeafColumns(visibleColumns(this.columns)),this._hasDetails(),0)},_updateCols:function(table){table=table||this.thead.parent().add(this.table),this._appendCols(table,this._isLocked())},_updateLockedCols:function(table){this._isLocked()&&(table=table||this.lockedHeader.find("table").add(this.lockedTable),normalizeCols(table,visibleLeafColumns(visibleLockedColumns(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(table,locked){locked?normalizeCols(table,visibleLeafColumns(visibleNonLockedColumns(this.columns)),this._hasDetails(),0):normalizeCols(table,visibleLeafColumns(visibleColumns(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(schema){if(schema&&schema.toJSON){var field,encoded,that=this;schema=schema.toJSON(),encoded=!(that.table.find("tbody tr").length>0&&(!that.dataSource||!that.dataSource.transport));for(field in schema)that.columns.push({field:field,encoded:encoded,headerAttributes:{id:kendo.guid()}});that._thead(),that._templates()}},_rowsHtml:function(data,templates){var idx,length,that=this,html="",rowTemplate=templates.rowTemplate,altRowTemplate=templates.altRowTemplate;for(idx=0,length=data.length;length>idx;idx++)html+=idx%2?altRowTemplate(data[idx]):rowTemplate(data[idx]),that._data.push(data[idx]);return html},_groupRowHtml:function(group,colspan,level,groupHeaderBuilder,templates,skipColspan){var idx,length,that=this,html="",field=group.field,column=grep(leafColumns(that.columns),function(column){return column.field==field})[0]||{},template=column.groupHeaderTemplate,text=(column.title||field)+": "+formatGroupValue(group.value,column.format,column.values,column.encoded),footerDefaults=that._groupAggregatesDefaultObject||{},aggregates=extend({},footerDefaults,group.aggregates),data=extend({},{field:group.field,value:group.value,aggregates:aggregates},group.aggregates[group.field]),groupFooterTemplate=templates.groupFooterTemplate,groupItems=group.items;if(template&&(text=typeof template===FUNCTION?template(data):kendo.template(template)(data)),html+=groupHeaderBuilder(colspan,level,text),group.hasSubgroups)for(idx=0,length=groupItems.length;length>idx;idx++)html+=that._groupRowHtml(groupItems[idx],skipColspan?colspan:colspan-1,level+1,groupHeaderBuilder,templates,skipColspan);else html+=that._rowsHtml(groupItems,templates);return groupFooterTemplate&&(html+=groupFooterTemplate(aggregates)),html},collapseGroup:function(group){group=$(group);var level,offset,idx,length,tr,groupable=this.options.groupable,showFooter=groupable.showFooter,footerCount=showFooter?0:1,relatedGroup=$();for(this._isLocked()&&(group.closest("div").hasClass("k-grid-content-locked")?relatedGroup=this.tbody.children("tr:eq("+group.index()+")").nextAll("tr"):(relatedGroup=group.nextAll("tr"),group=this.lockedTable.find(">tbody>tr:eq("+group.index()+")"))),level=group.find(".k-group-cell").length,group.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),group.find("td[aria-expanded='true']:first").attr("aria-expanded",!1),group=group.nextAll("tr"),idx=0,length=group.length;length>idx&&(tr=group.eq(idx),offset=tr.find(".k-group-cell").length,tr.hasClass("k-grouping-row")?footerCount++:tr.hasClass("k-group-footer")&&footerCount--,!(level>=offset||tr.hasClass("k-group-footer")&&0>footerCount));idx++)tr.hide(),relatedGroup.eq(idx).hide()},expandGroup:function(group){group=$(group);var level,tr,offset,idx,length,that=this,showFooter=that.options.groupable.showFooter,relatedGroup=$(),footersVisibility=[],groupsCount=1;for(this._isLocked()&&(group.closest("div").hasClass("k-grid-content-locked")?relatedGroup=this.tbody.children("tr:eq("+group.index()+")").nextAll("tr"):(relatedGroup=group.nextAll("tr"),group=this.lockedTable.find(">tbody>tr:eq("+group.index()+")"))),level=group.find(".k-group-cell").length,group.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),group.find("td[aria-expanded='false']:first").attr("aria-expanded",!0),group=group.nextAll("tr"),idx=0,length=group.length;length>idx&&(tr=group.eq(idx),offset=tr.find(".k-group-cell").length,!(level>=offset));idx++)offset!=level+1||tr.hasClass("k-detail-row")||(tr.show(),relatedGroup.eq(idx).show(),tr.hasClass("k-grouping-row")&&tr.find(".k-icon").hasClass("k-i-collapse")&&that.expandGroup(tr),tr.hasClass("k-master-row")&&tr.find(".k-icon").hasClass("k-minus")&&(tr.next().show(),relatedGroup.eq(idx+1).show())),tr.hasClass("k-grouping-row")&&(showFooter&&footersVisibility.push(tr.is(":visible")),groupsCount++),tr.hasClass("k-group-footer")&&(showFooter&&tr.toggle(footersVisibility.pop()),1==groupsCount?(tr.show(),relatedGroup.eq(idx).show()):groupsCount--)},_updateHeader:function(groups){var that=this,container=that._isLocked()?that.lockedHeader.find("thead"):that.thead,filterCells=container.find("tr.k-filter-row").find("th.k-group-cell").length,length=container.find("tr:first").find("th.k-group-cell").length,rows=container.children("tr:not(:first)").filter(function(){return!$(this).children(":visible").length});groups>length?($(new Array(groups-length+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(container.children("tr:not(.k-filter-row)")),that.element.is(":visible")&&rows.find("th.k-group-cell").hide()):length>groups&&container.find("tr").each(function(){$(this).find("th.k-group-cell").filter(":eq("+groups+"),:gt("+groups+")").remove()}),groups>filterCells&&$(new Array(groups-filterCells+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(container.find(".k-filter-row"))},_firstDataItem:function(data,grouped){return data&&grouped&&(data=data.hasSubgroups?this._firstDataItem(data.items[0],grouped):data.items[0]),data},_updateTablesWidth:function(){var tables,that=this;that._isLocked()&&(tables=$(">.k-grid-footer>.k-grid-footer-wrap>table",that.wrapper).add(that.thead.parent()).add(that.table),that._footerWidth=tableWidth(tables.eq(0)),tables.width(that._footerWidth),tables=$(">.k-grid-footer>.k-grid-footer-locked>table",that.wrapper).add(that.lockedHeader.find(">table")).add(that.lockedTable),tables.width(tableWidth(tables.eq(0))))},hideColumn:function(column){var cell,tables,idx,cols,colWidth,position,headerCellIndex,length,columnIndex,that=this,width=0,footer=that.footer||that.wrapper.find(".k-grid-footer"),columns=that.columns,visibleLocked=that.lockedHeader?leafDataCells(that.lockedHeader.find(">table>thead")).filter(isCellVisible).length:0;if(column="number"==typeof column?columns[column]:isPlainObject(column)?grep(flatColumns(columns),function(item){return item===column})[0]:grep(flatColumns(columns),function(item){return item.field===column})[0],column&&isVisible(column)){if(column.columns&&column.columns.length){for(position=columnVisiblePosition(column,columns),setColumnVisibility(column,!1),setCellVisibility(elements($(">table>thead",that.lockedHeader),that.thead,">tr:eq("+position.row+")>th"),position.cell,!1),idx=0;idx<column.columns.length;idx++)this.hideColumn(column.columns[idx]);return void that.trigger(COLUMNHIDE,{column:column})}columnIndex=inArray(column,visibleColumns(leafColumns(columns))),setColumnVisibility(column,!1),that._setParentsVisibility(column,!1),that._templates(),that._updateCols(),that._updateLockedCols();var container=that.thead;if(headerCellIndex=columnIndex,that.lockedHeader&&visibleLocked>columnIndex?container=that.lockedHeader.find(">table>thead"):headerCellIndex-=visibleLocked,cell=leafDataCells(container).filter(isCellVisible).eq(headerCellIndex),cell[0].style.display="none",setCellVisibility(elements($(">table>thead",that.lockedHeader),that.thead,">tr.k-filter-row>th"),columnIndex,!1),footer[0]&&(that._updateCols(footer.find(">.k-grid-footer-wrap>table")),that._updateLockedCols(footer.find(">.k-grid-footer-locked>table")),setCellVisibility(footer.find(".k-footer-template>td"),columnIndex,!1)),that.lockedTable&&visibleLocked>columnIndex?hideColumnCells(that.lockedTable.find(">tbody>tr"),columnIndex):hideColumnCells(that.tbody.children(),columnIndex-visibleLocked),that.lockedTable)that._updateTablesWidth(),that._applyLockedContainersWidth(),that._syncLockedContentHeight(),that._syncLockedHeaderHeight(),that._syncLockedFooterHeight();else{for(cols=that.thead.prev().find("col"),idx=0,length=cols.length;length>idx;idx+=1){if(colWidth=cols[idx].style.width,!colWidth||-1!=colWidth.indexOf("%")){width=0;break}width+=parseInt(colWidth,10)}tables=$(">.k-grid-header table:first,>.k-grid-footer table:first",that.wrapper).add(that.table),that._footerWidth=null,width&&(tables.each(function(){this.style.width=width+"px"}),that._footerWidth=width),browser.msie&&8==browser.version&&(tables.css("display","inline-table"),setTimeout(function(){tables.css("display","table")},1))}that._updateFirstColumnClass(),that.trigger(COLUMNHIDE,{column:column})}},_setParentsVisibility:function(column,visible){var idx,parent,position,cell,colSpan,columns=this.columns,parents=[],predicate=visible?function(p){return visibleColumns(p.columns).length&&p.hidden}:function(p){return!visibleColumns(p.columns).length&&!p.hidden};if(columnParents(column,columns,parents)&&parents.length)for(idx=parents.length-1;idx>=0;idx--)parent=parents[idx],position=columnPosition(parent,columns),cell=elements($(">table>thead",this.lockedHeader),this.thead,">tr:eq("+position.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(position.cell),predicate(parent)&&(setColumnVisibility(parent,visible),cell[0].style.display=visible?"":"none"),cell.filter("["+kendo.attr("colspan")+"]").length&&(colSpan=parseInt(cell.attr(kendo.attr("colspan")),10),cell[0].colSpan=colSpan-hiddenLeafColumnsCount(parent.columns)||1)},showColumn:function(column){var idx,length,cell,tables,width,headerCellIndex,position,colWidth,cols,columnIndex,that=this,columns=that.columns,footer=that.footer||that.wrapper.find(".k-grid-footer"),lockedColumnsCount=that.lockedHeader?leafDataCells(that.lockedHeader.find(">table>thead")).length:0;if(column="number"==typeof column?columns[column]:isPlainObject(column)?grep(flatColumns(columns),function(item){return item===column})[0]:grep(flatColumns(columns),function(item){return item.field===column})[0],column&&!isVisible(column)){if(column.columns&&column.columns.length){for(position=columnPosition(column,columns),setColumnVisibility(column,!0),setCellVisibility(elements($(">table>thead",that.lockedHeader),that.thead,">tr:eq("+position.row+")>th"),position.cell,!0),idx=0;idx<column.columns.length;idx++)this.showColumn(column.columns[idx]);return void that.trigger(COLUMNSHOW,{column:column})}columnIndex=inArray(column,leafColumns(columns)),setColumnVisibility(column,!0),that._setParentsVisibility(column,!0),that._templates(),that._updateCols(),that._updateLockedCols();var container=that.thead;if(headerCellIndex=columnIndex,that.lockedHeader&&lockedColumnsCount>columnIndex?container=that.lockedHeader.find(">table>thead"):headerCellIndex-=lockedColumnsCount,cell=leafDataCells(container).eq(headerCellIndex),cell[0].style.display="",setCellVisibility(elements($(">table>thead",that.lockedHeader),that.thead,">tr.k-filter-row>th"),columnIndex,!0),footer[0]&&(that._updateCols(footer.find(">.k-grid-footer-wrap>table")),that._updateLockedCols(footer.find(">.k-grid-footer-locked>table")),setCellVisibility(footer.find(".k-footer-template>td"),columnIndex,!0)),that.lockedTable&&lockedColumnsCount>columnIndex?showColumnCells(that.lockedTable.find(">tbody>tr"),columnIndex):showColumnCells(that.tbody.children(),columnIndex-lockedColumnsCount),that.lockedTable)that._updateTablesWidth(),that._applyLockedContainersWidth(),that._syncLockedContentHeight(),that._syncLockedHeaderHeight();else if(tables=$(">.k-grid-header table:first,>.k-grid-footer table:first",that.wrapper).add(that.table),column.width){for(width=0,cols=that.thead.prev().find("col"),idx=0,length=cols.length;length>idx;idx+=1){if(colWidth=cols[idx].style.width,colWidth.indexOf("%")>-1){width=0;break}width+=parseInt(colWidth,10)}that._footerWidth=null,width&&(tables.each(function(){this.style.width=width+"px"}),that._footerWidth=width)}else tables.width("");that._updateFirstColumnClass(),that.trigger(COLUMNSHOW,{column:column})}},_progress:function(toggle){var element=this.element;this.lockedContent?element=this.wrapper:this.element.is("table")?element=this.element.parent():this.content&&this.content.length&&(element=this.content),kendo.ui.progress(element,toggle)},_resize:function(size,force){this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(force||this._rowHeight)&&(force&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var active=activeElement();return this.table[0]===active||$.contains(this.table[0],active)||this._isLocked()&&(this.lockedTable[0]===active||$.contains(this.lockedTable[0],active))},refresh:function(e){var currentIndex,that=this,data=that.dataSource.view(),navigatable=that.options.navigatable,current=$(that.current()),isCurrentInHeader=!1,groups=(that.dataSource.group()||[]).length,offsetLeft=that.content&&that.content.scrollLeft(),colspan=groups+visibleLeafColumns(visibleColumns(that.columns)).length;e&&"itemchange"===e.action&&that.editable||(e=e||{},that.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(that._angularItems("cleanup"),navigatable&&(that._isActiveInTable()||that._editContainer&&that._editContainer.data("kendoWindow"))&&(isCurrentInHeader=current.is("th"),currentIndex=Math.max(that.cellIndex(current),0)),that._destroyEditable(),that._progress(!1),that._hideResizeHandle(),that._data=[],that.columns.length||(that._autoColumns(that._firstDataItem(data[0],groups)),colspan=groups+that.columns.length),that._group=groups>0||that._group,that._group&&(that._templates(),that._updateCols(),that._updateLockedCols(),that._updateHeader(groups),that._group=groups>0),that._renderContent(data,colspan,groups),that._renderLockedContent(data,colspan,groups),that._footer(),that._renderNoRecordsContent(),that._setContentHeight(),that._setContentWidth(offsetLeft),that.lockedTable&&(that.options.scrollable.virtual?that.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):that.touchScroller?that.touchScroller.movable.trigger("change"):(that.wrapper.one("scroll",function(e){e.stopPropagation()}),that.content.trigger("scroll"))),that._restoreCurrent(currentIndex,isCurrentInHeader),that.touchScroller&&that.touchScroller.contentResized(),that.selectable&&that.selectable.resetTouchEvents(),that._angularItems("compile"),that.trigger(DATABOUND)))},_restoreCurrent:function(currentIndex,isCurrentInHeader){if(!(currentIndex===undefined||0>currentIndex)){if(this._removeCurrent(),isCurrentInHeader)this.current(this.thead.find("th:not(.k-group-cell)").eq(currentIndex));else{var rowIndex=0;this._rowVirtualIndex?rowIndex=this.virtualScrollable.position(this._rowVirtualIndex):currentIndex=0;var row=$();this.lockedTable&&(row=this.lockedTable.find(">tbody>tr").eq(rowIndex)),row=row.add(this.tbody.children().eq(rowIndex));var td=row.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(currentIndex);this.current(td)}this._current&&focusTable(this._current.closest("table")[0],!0)}},_angularItems:function(cmd){kendo.ui.DataBoundWidget.fn._angularItems.call(this,cmd),"cleanup"===cmd&&this._cleanupDetailItems(),this._angularGroupItems(cmd),this._angularGroupFooterItems(cmd)},_cleanupDetailItems:function(){var that=this;that._hasDetails()&&(that.angular("cleanup",function(){return{elements:that.tbody.children(".k-detail-row")}}),that.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(cmd){var that=this,container=that.tbody;that.lockedContent&&(container=that.lockedTable.find("tbody")),that._group&&that.angular(cmd,function(){return{elements:container.children(".k-grouping-row"),
data:$.map(groupRows(that.dataSource.view()),function(dataItem){return{dataItem:dataItem}})}})},_angularGroupFooterItems:function(cmd){var that=this,container=that.tbody;that.lockedContent&&(container=that.element),that._group&&that.groupFooterTemplate&&that.angular(cmd,function(){return{elements:container.find(".k-group-footer"),data:$.map(groupFooters(that.dataSource.view()),function(dataItem){return{dataItem:dataItem}})}})},_renderContent:function(data,colspan,groups){var idx,length,that=this,html="",isLocked=null!=that.lockedContent,templates={rowTemplate:that.rowTemplate,altRowTemplate:that.altRowTemplate,groupFooterTemplate:that.groupFooterTemplate};if(colspan=isLocked?colspan-visibleLeafColumns(visibleLockedColumns(that.columns)).length:colspan,groups>0)for(colspan=isLocked?colspan-groups:colspan,that.detailTemplate&&colspan++,that.groupFooterTemplate&&(that._groupAggregatesDefaultObject=that.dataSource.aggregates()),idx=0,length=data.length;length>idx;idx++)html+=that._groupRowHtml(data[idx],colspan,0,isLocked?groupRowLockedContentBuilder:groupRowBuilder,templates,isLocked);else html+=that._rowsHtml(data,templates);that.tbody=appendContent(that.tbody,that.table,html,this.options.$angular)},_renderLockedContent:function(data,colspan,groups){var idx,length,html="",templates={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){var table=this.lockedTable;if(groups>0)for(colspan-=visibleColumns(leafColumns(nonLockedColumns(this.columns))).length,idx=0,length=data.length;length>idx;idx++)html+=this._groupRowHtml(data[idx],colspan,0,groupRowBuilder,templates);else html=this._rowsHtml(data,templates);appendContent(table.children("tbody"),table,html,this.options.$angular),this._syncLockedContentHeight()}},_adjustRowsHeight:function(table1,table2){var idx,rows=table1[0].rows,length=rows.length,rows2=table2[0].rows,containers=table1.add(table2),containersLength=containers.length,heights=[];for(idx=0;length>idx&&rows2[idx];idx++){rows[idx].style.height&&(rows[idx].style.height=rows2[idx].style.height="");var offsetHeight1=rows[idx].offsetHeight,offsetHeight2=rows2[idx].offsetHeight,height=0;offsetHeight1>offsetHeight2?height=offsetHeight1:offsetHeight2>offsetHeight1&&(height=offsetHeight2),heights.push(height)}for(idx=0;containersLength>idx;idx++)containers[idx].style.display="none";for(idx=0;length>idx;idx++)heights[idx]&&(rows[idx].style.height=rows2[idx].style.height=heights[idx]+1+"px");for(idx=0;containersLength>idx;idx++)containers[idx].style.display=""}});kendo.ExcelMixin&&kendo.ExcelMixin.extend(Grid.prototype),kendo.PDFMixin&&(kendo.PDFMixin.extend(Grid.prototype),Grid.prototype._drawPDF=function(progress){function resolve(){allPages&&startingPage!==undefined?(dataSource.unbind("change",exportPage),dataSource.one("change",function(){result.resolve(doc)}),dataSource.page(startingPage)):result.resolve(doc)}function exportPage(){grid._drawPDFShadow({width:grid.wrapper.width()},{avoidLinks:grid.options.pdf.avoidLinks}).done(function(group){var pageNum=dataSource.page(),totalPages=allPages?dataSource.totalPages():1,args={page:group,pageNumber:pageNum,progress:pageNum/totalPages,totalPages:totalPages};progress.notify(args),doc.append(args.page),totalPages>pageNum?dataSource.page(pageNum+1):resolve()}).fail(function(err){result.reject(err)})}var result=new $.Deferred,grid=this,dataSource=grid.dataSource,allPages=grid.options.pdf.allPages;this._initPDFProgress(progress);var doc=new kendo.drawing.Group,startingPage=dataSource.page();return allPages?(dataSource.bind("change",exportPage),dataSource.page(1)):exportPage(),result.promise()},Grid.prototype._initPDFProgress=function(deferred){var loading=$("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");loading.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(loading);var pb=$("<div class='k-loading-pdf-progress'>").appendTo(loading).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");deferred.progress(function(e){pb.value(e.progress)}).always(function(){kendo.destroy(loading),loading.remove()})}),ui.plugin(Grid),ui.plugin(VirtualScrollable)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function indexOfWordAtCaret(caretIdx,text,separator){return separator?text.substring(0,caretIdx).split(separator).length-1:0}function wordAtCaret(caretIdx,text,separator){return text.split(separator)[indexOfWordAtCaret(caretIdx,text,separator)]}function replaceWordAtCaret(caretIdx,text,word,separator){var words=text.split(separator);return words.splice(indexOfWordAtCaret(caretIdx,text,separator),1,word),separator&&""!==words[words.length-1]&&words.push(""),words.join(separator)}var kendo=window.kendo,support=kendo.support,caret=kendo.caret,activeElement=kendo._activeElement,placeholderSupported=support.placeholder,ui=kendo.ui,List=ui.List,keys=kendo.keys,DataSource=kendo.data.DataSource,ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",DEFAULT="k-state-default",DISABLED="disabled",READONLY="readonly",FOCUSED="k-state-focused",SELECTED="k-state-selected",STATEDISABLED="k-state-disabled",HOVER="k-state-hover",ns=".kendoAutoComplete",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,proxy=$.proxy,AutoComplete=List.extend({init:function(element,options){var wrapper,disabled,that=this;that.ns=ns,options=$.isArray(options)?{dataSource:options}:options,List.fn.init.call(that,element,options),element=that.element,options=that.options,options.placeholder=options.placeholder||element.attr("placeholder"),placeholderSupported&&element.attr("placeholder",options.placeholder),that._wrapper(),that._loader(),that._dataSource(),that._ignoreCase(),element[0].type="text",wrapper=that.wrapper,that._popup(),element.addClass("k-input").on("keydown"+ns,proxy(that._keydown,that)).on("paste"+ns,proxy(that._search,that)).on("focus"+ns,function(){that._active=!0,that._prev=that._accessor(),that._placeholder(!1),wrapper.addClass(FOCUSED)}).on("focusout"+ns,function(){that._change(),that._placeholder(),that._active=!1,wrapper.removeClass(FOCUSED)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),that._enable(),that._old=that._accessor(),element[0].id&&element.attr("aria-owns",that.ul[0].id),that._aria(),that._placeholder(),that._initList(),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),that.listView.bind("click",function(e){e.preventDefault()}),that._resetFocusItemHandler=$.proxy(that._resetFocusItem,that),kendo.notify(that)},options:{name:"AutoComplete",enabled:!0,suggest:!1,template:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{},virtual:!1,value:null},_dataSource:function(){var that=this;that.dataSource&&that._refreshHandler?that._unbindDataSource():that._progressHandler=proxy(that._showBusy,that),that.dataSource=DataSource.create(that.options.dataSource).bind("progress",that._progressHandler)},setDataSource:function(dataSource){this.options.dataSource=dataSource,this._dataSource(),this.listView.setDataSource(this.dataSource)},events:["open","close","change","select","filtering","dataBinding","dataBound"],setOptions:function(options){var listOptions=this._listOptions(options);List.fn.setOptions.call(this,options),listOptions.dataValueField=listOptions.dataTextField,this.listView.setOptions(listOptions),this._accessors(),this._aria()},_editable:function(options){var that=this,element=that.element,wrapper=that.wrapper.off(ns),readonly=options.readonly,disable=options.disable;readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),element.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),element.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1))},close:function(){var that=this,current=that.listView.focus();current&&current.removeClass(SELECTED),that.popup.close()},destroy:function(){var that=this;that.element.off(ns),that.wrapper.off(ns),List.fn.destroy.call(that)},refresh:function(){this.listView.refresh()},select:function(li){this._select(li)},search:function(word){var length,that=this,options=that.options,ignoreCase=options.ignoreCase,separator=options.separator;word=word||that._accessor(),clearTimeout(that._typingTimeout),separator&&(word=wordAtCaret(caret(that.element)[0],word,separator)),length=word.length,(!length||length>=options.minLength)&&(that._open=!0,that.listView.filter(!0),that.listView.value([]),that._filterSource({value:ignoreCase?word.toLowerCase():word,operator:options.filter,field:options.dataTextField,ignoreCase:ignoreCase}))},suggest:function(word){var idx,that=this,key=that._last,value=that._accessor(),element=that.element[0],caretIdx=caret(element)[0],separator=that.options.separator,words=value.split(separator),wordIndex=indexOfWordAtCaret(caretIdx,value,separator),selectionEnd=caretIdx;return key==keys.BACKSPACE||key==keys.DELETE?void(that._last=undefined):(word=word||"","string"!=typeof word&&(word[0]&&(word=that.dataSource.view()[List.inArray(word[0],that.ul[0])]),word=word?that._text(word):""),0>=caretIdx&&(caretIdx=value.toLowerCase().indexOf(word.toLowerCase())+1),idx=value.substring(0,caretIdx).lastIndexOf(separator),idx=idx>-1?caretIdx-(idx+separator.length):caretIdx,value=words[wordIndex].substring(0,idx),word&&(word=word.toString(),idx=word.toLowerCase().indexOf(value.toLowerCase()),idx>-1&&(word=word.substring(idx+value.length),selectionEnd=caretIdx+word.length,value+=word),separator&&""!==words[words.length-1]&&words.push("")),words[wordIndex]=value,that._accessor(words.join(separator||"")),void(element===activeElement()&&caret(element,caretIdx,selectionEnd)))},value:function(value){return value===undefined?this._accessor():(this.listView.value(value),this._accessor(value),this._old=this._accessor(),void 0)},_click:function(e){var item=e.item,element=this.element;return this._active=!0,this.trigger("select",{item:item})?void this.close():(this._select(item),this._blur(),void caret(element,element.val().length))},_initList:function(){var that=this,virtual=that.options.virtual,hasVirtual=!!virtual,listBoundHandler=proxy(that._listBound,that),listOptions={autoBind:!1,selectable:!0,dataSource:that.dataSource,click:$.proxy(that._click,this),change:$.proxy(that._listChange,this),activate:proxy(that._activateItem,that),deactivate:proxy(that._deactivateItem,that),dataBinding:function(){that.trigger("dataBinding"),that._angularItems("cleanup")},dataBound:listBoundHandler,listBound:listBoundHandler,skipUpdateOnBind:!0};listOptions=$.extend(that._listOptions(),listOptions,"object"==typeof virtual?virtual:{}),listOptions.dataValueField=listOptions.dataTextField,hasVirtual?that.listView=new kendo.ui.VirtualList(that.ul,listOptions):that.listView=new kendo.ui.StaticList(that.ul,listOptions),that.listView.value(that.options.value)},_resetFocusItem:function(){var index=this.options.highlightFirst?0:-1;this.options.virtual&&this.listView.scrollTo(0),this.listView.focus(index)},_listBound:function(){var action,that=this,popup=that.popup,options=that.options,data=that.dataSource.flatView(),length=data.length,isActive=that.element[0]===activeElement();that._angularItems("compile"),that._calculateGroupPadding(that._height(length)),popup.position(),length&&options.suggest&&isActive&&that.suggest(data[0]),that._open&&(that._open=!1,action=length?"open":"close",that._typingTimeout&&!isActive&&(action="close"),length&&(options.virtual?that.popup.unbind("activate",that._resetFocusItemHandler).one("activate",that._resetFocusItemHandler):that._resetFocusItem()),popup[action](),that._typingTimeout=undefined),that.listView.filter(!1),that._touchScroller&&that._touchScroller.reset(),that._hideBusy(),that._makeUnselectable(),that.trigger("dataBound")},_listChange:function(){!this.listView.filter()&&this._active&&this._selectValue(this.listView.selectedDataItems()[0])},_selectValue:function(dataItem){var separator=this.options.separator,text="";dataItem&&(text=this._text(dataItem)),null===text&&(text=""),separator&&(text=replaceWordAtCaret(caret(this.element)[0],this._accessor(),text,separator)),this._prev=text,this._accessor(text),this._placeholder()},_accessor:function(value){var that=this,element=that.element[0];return value===undefined?(value=element.value,element.className.indexOf("k-readonly")>-1&&value===that.options.placeholder?"":value):(element.value=null===value?"":value,void that._placeholder())},_keydown:function(e){var that=this,key=e.keyCode,visible=that.popup.visible(),current=this.listView.focus();if(that._last=key,key===keys.DOWN)visible&&this._move(current?"focusNext":"focusFirst"),e.preventDefault();else if(key===keys.UP)visible&&this._move(current?"focusPrev":"focusLast"),e.preventDefault();else if(key===keys.ENTER||key===keys.TAB){if(key===keys.ENTER&&visible&&e.preventDefault(),visible&&current){if(that.trigger("select",{item:current}))return;this._select(current)}this._blur()}else key===keys.ESC?(visible&&e.preventDefault(),that.close()):(that._search(),that._typing=!0)},_move:function(action){this.listView[action](),this.options.suggest&&this.suggest(this.listView.focus())},_hideBusy:function(){var that=this;clearTimeout(that._busy),that._loading.hide(),that.element.attr("aria-busy",!1),that._busy=null},_showBusy:function(){var that=this;that._busy||(that._busy=setTimeout(function(){that.element.attr("aria-busy",!0),that._loading.show()},100))},_placeholder:function(show){if(!placeholderSupported){var value,that=this,element=that.element,placeholder=that.options.placeholder;if(placeholder){if(value=element.val(),show===undefined&&(show=!value),show||(placeholder=value!==placeholder?value:""),value===that._old&&!show)return;element.toggleClass("k-readonly",show).val(placeholder),placeholder||element[0]!==document.activeElement||caret(element[0],0,0)}}},_search:function(){var that=this;clearTimeout(that._typingTimeout),that._typingTimeout=setTimeout(function(){that._prev!==that._accessor()&&(that._prev=that._accessor(),that.search())},that.options.delay)},_select:function(candidate){this.listView.select(candidate)},_loader:function(){this._loading=$('<span class="k-icon k-loading" style="display:none"></span>').insertAfter(this.element)},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVER,"mouseenter"===e.type)},_wrapper:function(){var wrapper,that=this,element=that.element,DOMelement=element[0];wrapper=element.parent(),wrapper.is("span.k-widget")||(wrapper=element.wrap("<span />").parent()),wrapper.attr("tabindex",-1),wrapper.attr("role","presentation"),wrapper[0].style.cssText=DOMelement.style.cssText,element.css({width:"100%",height:DOMelement.style.height}),that._focused=that.element,that.wrapper=wrapper.addClass("k-widget k-autocomplete k-header").addClass(DOMelement.className)}});ui.plugin(AutoComplete)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){var kendo=window.kendo,ui=kendo.ui,List=ui.List,Select=ui.Select,caret=kendo.caret,support=kendo.support,placeholderSupported=support.placeholder,activeElement=kendo._activeElement,keys=kendo.keys,ns=".kendoComboBox",CLICK="click"+ns,MOUSEDOWN="mousedown"+ns,DISABLED="disabled",READONLY="readonly",CHANGE="change",DEFAULT="k-state-default",FOCUSED="k-state-focused",STATEDISABLED="k-state-disabled",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",STATE_FILTER="filter",STATE_ACCEPT="accept",STATE_REBIND="rebind",HOVEREVENTS="mouseenter"+ns+" mouseleave"+ns,proxy=$.proxy,ComboBox=Select.extend({init:function(element,options){var text,disabled,that=this;that.ns=ns,options=$.isArray(options)?{dataSource:options}:options,Select.fn.init.call(that,element,options),options=that.options,element=that.element.on("focus"+ns,proxy(that._focusHandler,that)),options.placeholder=options.placeholder||element.attr("placeholder"),that._reset(),that._wrapper(),that._input(),that._tabindex(that.input),that._popup(),that._dataSource(),that._ignoreCase(),that._enable(),that._oldIndex=that.selectedIndex=-1,that._aria(),that._initialIndex=options.index,that._initList(),that._cascade(),options.autoBind?that._filterSource():(text=options.text,!text&&that._isSelect&&(text=element.children(":selected").text()),text&&(that.input.val(text),that._prev=text)),text||that._placeholder(),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),kendo.notify(that)},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",ignoreCase:!0,animation:{},virtual:!1,template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:["open","close",CHANGE,"select","filtering","dataBinding","dataBound","cascade"],setOptions:function(options){Select.fn.setOptions.call(this,options),this.listView.setOptions(options),this._accessors(),this._aria()},destroy:function(){var that=this;that.input.off(ns),that.element.off(ns),that._inputWrapper.off(ns),that._arrow.parent().off(CLICK+" "+MOUSEDOWN),Select.fn.destroy.call(that)},_focusHandler:function(){this.input.focus()},_arrowClick:function(){this._toggle()},_inputFocus:function(){this._inputWrapper.addClass(FOCUSED),this._placeholder(!1)},_inputFocusout:function(){var that=this;that._inputWrapper.removeClass(FOCUSED),clearTimeout(that._typingTimeout),that._typingTimeout=null,that.options.text!==that.input.val()&&that.text(that.text()),that._placeholder(),that._blur(),that.element.blur()},_editable:function(options){var that=this,disable=options.disable,readonly=options.readonly,wrapper=that._inputWrapper.off(ns),input=that.element.add(that.input.off(ns)),arrow=that._arrow.parent().off(CLICK+" "+MOUSEDOWN);readonly||disable?(wrapper.addClass(disable?STATEDISABLED:DEFAULT).removeClass(disable?DEFAULT:STATEDISABLED),input.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.addClass(DEFAULT).removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover),input.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1),arrow.on(CLICK,proxy(that._arrowClick,that)).on(MOUSEDOWN,function(e){e.preventDefault()}),that.input.on("keydown"+ns,proxy(that._keydown,that)).on("focus"+ns,proxy(that._inputFocus,that)).on("focusout"+ns,proxy(that._inputFocusout,that)))},open:function(){var that=this,state=that._state;that.popup.visible()||(!that.listView.isBound()&&state!==STATE_FILTER||state===STATE_ACCEPT?(that._open=!0,that._state=STATE_REBIND,that.listView.filter(!1),that._filterSource()):(that.popup.open(),that._focusItem()))},_listBound:function(){var dataItem,that=this,options=that.options,initialIndex=that._initialIndex,filtered=that._state===STATE_FILTER,isActive=that.input[0]===activeElement(),listView=that.listView,focusedItem=listView.focus(),data=this.dataSource.flatView(),page=this.dataSource.page(),length=data.length;if(that._angularItems("compile"),that._presetValue=!1,options.virtual||that._calculateGroupPadding(that._height(length)),that.popup.position(),that._isSelect){var hasChild=that.element[0].children[0];that._state===STATE_REBIND&&(that._state="");var keepState=!0,custom=that._customOption;that._customOption=undefined,that._options(data,"",that.value()),custom&&custom[0].selected?that._custom(custom.val(),keepState):hasChild||that._custom("",keepState)}that._makeUnselectable(),filtered||that._fetch?filtered&&focusedItem&&focusedItem.removeClass("k-state-selected"):(listView.value().length||(null!==initialIndex&&initialIndex>-1?(that.select(initialIndex),focusedItem=listView.focus()):that._accessor()&&listView.value(that._accessor())),that._initialIndex=null,dataItem=that.listView.selectedDataItems()[0],dataItem&&that.text()&&that.text()!==that._text(dataItem)&&that._selectValue(dataItem)),!length||page!==undefined&&1!==page||(options.highlightFirst?focusedItem||listView.focusIndex()||listView.focus(0):listView.focus(-1),options.suggest&&isActive&&that.input.val()&&that.suggest(data[0])),that._open&&(that._open=!1,that._typingTimeout&&!isActive?that.popup.close():that.toggle(!!length),that._typingTimeout=null),that._touchScroller&&that._touchScroller.reset(),that._hideBusy(),that.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),this._presetValue&&(this._oldIndex=this.selectedIndex)},_get:function(candidate){var data,found,idx;if("function"==typeof candidate){for(data=this.dataSource.flatView(),idx=0;idx<data.length;idx++)if(candidate(data[idx])){candidate=idx,found=!0;break}found||(candidate=-1)}return candidate},_select:function(candidate,keepState){candidate=this._get(candidate),-1===candidate&&(this.input[0].value="",this._accessor("")),this.listView.select(candidate),keepState||this._state!==STATE_FILTER||(this.listView.filter(!1),this._state=STATE_ACCEPT)},_selectValue:function(dataItem){var idx=this.listView.select(),value="",text="";idx=idx[idx.length-1],idx===undefined&&(idx=-1),this.selectedIndex=idx,-1===idx?(value=text=this.input[0].value,this.listView.focus(-1)):(dataItem&&(value=this._dataValue(dataItem),text=this._text(dataItem)),null===value&&(value="")),this._prev=this.input[0].value=text,this._accessor(value!==undefined?value:text,idx),this._placeholder(),this._triggerCascade()},refresh:function(){this.listView.refresh()},suggest:function(word){var idx,that=this,element=that.input[0],value=that.text(),caretIdx=caret(element)[0],key=that._last;return key==keys.BACKSPACE||key==keys.DELETE?void(that._last=undefined):(word=word||"","string"!=typeof word&&(word[0]&&(word=that.dataSource.view()[List.inArray(word[0],that.ul[0])]),word=word?that._text(word):""),0>=caretIdx&&(caretIdx=value.toLowerCase().indexOf(word.toLowerCase())+1),word?(word=word.toString(),idx=word.toLowerCase().indexOf(value.toLowerCase()),idx>-1&&(value+=word.substring(idx+value.length))):value=value.substring(0,caretIdx),void(value.length===caretIdx&&word||(element.value=value,element===activeElement()&&caret(element,caretIdx,value.length))))},text:function(text){text=null===text?"":text;var dataItem,value,that=this,input=that.input[0],ignoreCase=that.options.ignoreCase,loweredText=text;if(text===undefined)return input.value;if(dataItem=that.dataItem(),that.options.autoBind!==!1||that.listView.isBound()){if(dataItem&&that._text(dataItem)===text&&(value=that._value(dataItem),null===value?value="":value+="",value===that._old))return void that._triggerCascade();ignoreCase&&(loweredText=loweredText.toLowerCase()),that._select(function(data){return data=that._text(data),ignoreCase&&(data=(data+"").toLowerCase()),data===loweredText}),that.selectedIndex<0&&(that._accessor(text),input.value=text,that._triggerCascade()),that._prev=input.value}},toggle:function(toggle){this._toggle(toggle,!0)},value:function(value){var that=this,options=that.options;return value===undefined?(value=that._accessor()||that.listView.value()[0],value===undefined||null===value?"":value):void((value!==options.value||that.input.val()!==options.text)&&(that._accessor(value),that.listView.value(value).done(function(){that._selectValue(that.listView.selectedDataItems()[0]),-1===that.selectedIndex&&(that._accessor(value),that.input.val(value),that._placeholder(!0)),that._old=that._accessor(),that._oldIndex=that.selectedIndex,that._prev=that.input.val(),that._state===STATE_FILTER&&(that._state=STATE_ACCEPT)}),that._fetchData()))},_click:function(e){var item=e.item;return this.trigger("select",{item:item})?void this.close():(this._userTriggered=!0,this._select(item),void this._blur())},_filter:function(word){var that=this,options=that.options,dataSource=that.dataSource,ignoreCase=options.ignoreCase,predicate=function(dataItem){var text=that._text(dataItem);return text!==undefined?(text+="",""!==text&&""===word?!1:(ignoreCase&&(text=text.toLowerCase()),0===text.indexOf(word))):void 0};if(ignoreCase&&(word=word.toLowerCase()),!that.ul[0].firstChild)return void dataSource.one(CHANGE,function(){dataSource.view()[0]&&that.search(word)}).fetch();this.listView.focus(this._get(predicate));var current=this.listView.focus();current&&(options.suggest&&that.suggest(current),this.open()),this.options.highlightFirst&&!word&&this.listView.focusFirst()},_input:function(){var input,that=this,element=that.element.removeClass("k-input")[0],accessKey=element.accessKey,wrapper=that.wrapper,SELECTOR="input.k-input",name=element.name||"";name&&(name='name="'+name+'_input" '),input=wrapper.find(SELECTOR),input[0]||(wrapper.append('<span tabindex="-1" unselectable="on" class="k-dropdown-wrap k-state-default"><input '+name+'class="k-input" type="text" autocomplete="off"/><span tabindex="-1" unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(that.element),input=wrapper.find(SELECTOR)),input[0].style.cssText=element.style.cssText,input[0].title=element.title,element.maxLength>-1&&(input[0].maxLength=element.maxLength),input.addClass(element.className).val(this.options.text||element.value).css({width:"100%",height:element.style.height}).attr({role:"combobox","aria-expanded":!1}).show(),placeholderSupported&&input.attr("placeholder",that.options.placeholder),accessKey&&(element.accessKey="",input[0].accessKey=accessKey),that._focused=that.input=input,that._inputWrapper=$(wrapper[0].firstChild),that._arrow=wrapper.find(".k-icon").attr({role:"button",tabIndex:-1}),element.id&&that._arrow.attr("aria-controls",that.ul[0].id)},_keydown:function(e){var that=this,key=e.keyCode;that._last=key,clearTimeout(that._typingTimeout),that._typingTimeout=null,key==keys.TAB||that._move(e)||that._search()},_placeholder:function(show){if(!placeholderSupported){var value,that=this,input=that.input,placeholder=that.options.placeholder;if(placeholder){if(value=that.value(),show===undefined&&(show=!value),input.toggleClass("k-readonly",show),!show){if(value)return;placeholder=""}input.val(placeholder),placeholder||input[0]!==activeElement()||caret(input[0],0,0)}}},_search:function(){var that=this;that._typingTimeout=setTimeout(function(){var value=that.text();that._prev!==value&&(that._prev=value,that.search(value)),that._typingTimeout=null},that.options.delay)},_wrapper:function(){var that=this,element=that.element,wrapper=element.parent();wrapper.is("span.k-widget")||(wrapper=element.hide().wrap("<span />").parent(),wrapper[0].style.cssText=element[0].style.cssText),that.wrapper=wrapper.addClass("k-widget k-combobox k-header").addClass(element[0].className).css("display","")},_clearSelection:function(parent,isFiltered){var that=this,hasValue=parent.value(),custom=hasValue&&-1===parent.selectedIndex;(isFiltered||!hasValue||custom)&&(that.options.value="",that.value(""))},_preselect:function(value,text){this.input.val(text),this._accessor(value),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(value),this._placeholder(),this._initialIndex=null,this._presetValue=!0}});ui.plugin(ComboBox)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function findFilterForField(filter,field){var filters=[];if($.isPlainObject(filter))if(filter.hasOwnProperty("filters"))filters=filter.filters;else if(filter.field==field)return filter;$.isArray(filter)&&(filters=filter);for(var i=0;i<filters.length;i++){var result=findFilterForField(filters[i],field);if(result)return result}}function removeFiltersForField(expression,field){expression.filters&&(expression.filters=$.grep(expression.filters,function(filter){return removeFiltersForField(filter,field),filter.filters?filter.filters.length:filter.field!=field}))}function removeDuplicates(dataSelector,dataTextField){var getter=kendo.getter(dataTextField,!0);return function(e){for(var items=dataSelector(e),result=[],index=0,seen={};index<items.length;){var item=items[index++],text=getter(item);seen.hasOwnProperty(text)||(result.push(item),seen[text]=!0)}return result}}var kendo=window.kendo,ui=kendo.ui,DataSource=kendo.data.DataSource,Widget=ui.Widget,CHANGE="change",BOOL="boolean",ENUM="enums",STRING="string",EQ="Is equal to",NEQ="Is not equal to",proxy=$.proxy,FilterCell=Widget.extend({init:function(element,options){element=$(element).addClass("k-filtercell");var dataSource,viewModel,first,type,wrapper=this.wrapper=$("<span/>").appendTo(element),that=this,passedOptions=options,operators=that.operators=options.operators||{},input=that.input=$("<input/>").attr(kendo.attr("bind"),"value: value").appendTo(wrapper);Widget.fn.init.call(that,element[0],options),options=that.options,dataSource=that.dataSource=options.dataSource,that.model=dataSource.reader.model,type=options.type=STRING;var fields=kendo.getter("reader.model.fields",!0)(dataSource)||{},target=fields[options.field];if(target&&target.type&&(type=options.type=target.type),options.values&&(options.type=type=ENUM),operators=operators[type]||options.operators[type],!passedOptions.operator)for(first in operators){options.operator=first;break}if(that._parse=function(value){return value+""},that.model&&that.model.fields){var field=that.model.fields[options.field];field&&field.parse&&(that._parse=proxy(field.parse,field))}that.viewModel=viewModel=kendo.observable({operator:options.operator,value:null,operatorVisible:function(){var val=this.get("value");return null!==val&&val!==undefined&&"undefined"!=val}}),viewModel.bind(CHANGE,proxy(that.updateDsFilter,that)),type==STRING&&that.initSuggestDataSource(options),null!==options.inputWidth&&input.width(options.inputWidth),that._setInputType(options,type),type!=BOOL&&options.showOperators!==!1?that._createOperatorDropDown(operators):wrapper.addClass("k-operator-hidden"),that._createClearIcon(),kendo.bind(this.wrapper,viewModel),type==STRING&&(options.template||that.setAutoCompleteSource()),type==ENUM&&that.setComboBoxSource(that.options.values),that._refreshUI(),that._refreshHandler=proxy(that._refreshUI,that),that.dataSource.bind(CHANGE,that._refreshHandler)},_setInputType:function(options,type){var that=this,input=that.input;if("function"==typeof options.template)options.template.call(that.viewModel,{element:that.input,dataSource:that.suggestDataSource}),that._angularItems("compile");else if(type==STRING)input.attr(kendo.attr("role"),"autocomplete").attr(kendo.attr("text-field"),options.dataTextField||options.field).attr(kendo.attr("filter"),options.suggestionOperator).attr(kendo.attr("delay"),options.delay).attr(kendo.attr("min-length"),options.minLength).attr(kendo.attr("value-primitive"),!0);else if("date"==type)input.attr(kendo.attr("role"),"datepicker");else if(type==BOOL){input.remove();var radioInput=$("<input type='radio'/>"),wrapper=that.wrapper,inputName=kendo.guid(),labelTrue=$("<label/>").text(options.messages.isTrue).append(radioInput);radioInput.attr(kendo.attr("bind"),"checked:value").attr("name",inputName).val("true");var labelFalse=labelTrue.clone().text(options.messages.isFalse);radioInput.clone().val("false").appendTo(labelFalse),wrapper.append([labelTrue,labelFalse])}else"number"==type?input.attr(kendo.attr("role"),"numerictextbox"):type==ENUM&&input.attr(kendo.attr("role"),"combobox").attr(kendo.attr("text-field"),"text").attr(kendo.attr("suggest"),!0).attr(kendo.attr("filter"),"contains").attr(kendo.attr("value-field"),"value").attr(kendo.attr("value-primitive"),!0)},_createOperatorDropDown:function(operators){var items=[];for(var prop in operators)items.push({text:operators[prop],value:prop});var dropdown=$('<input class="k-dropdown-operator" '+kendo.attr("bind")+'="value: operator"/>').appendTo(this.wrapper);
this.operatorDropDown=dropdown.kendoDropDownList({dataSource:items,dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),this.operatorDropDown.wrapper.find(".k-i-arrow-s").removeClass("k-i-arrow-s").addClass("k-filter")},initSuggestDataSource:function(options){var suggestDataSource=options.suggestDataSource;suggestDataSource instanceof DataSource||(!options.customDataSource&&suggestDataSource&&(suggestDataSource.group=undefined),suggestDataSource=this.suggestDataSource=DataSource.create(suggestDataSource)),options.customDataSource||(suggestDataSource._pageSize=undefined,suggestDataSource.reader.data=removeDuplicates(suggestDataSource.reader.data,this.options.field)),this.suggestDataSource=suggestDataSource},setAutoCompleteSource:function(){var autoComplete=this.input.data("kendoAutoComplete");autoComplete&&autoComplete.setDataSource(this.suggestDataSource)},setComboBoxSource:function(values){var dataSource=DataSource.create({data:values}),comboBox=this.input.data("kendoComboBox");comboBox&&comboBox.setDataSource(dataSource)},_refreshUI:function(){var that=this,filter=findFilterForField(that.dataSource.filter(),this.options.field)||{},viewModel=that.viewModel;that.manuallyUpdatingVM=!0,filter=$.extend(!0,{},filter),that.options.type==BOOL&&viewModel.value!==filter.value&&that.wrapper.find(":radio").prop("checked",!1),filter.operator&&viewModel.set("operator",filter.operator),viewModel.set("value",filter.value),that.manuallyUpdatingVM=!1},updateDsFilter:function(e){var that=this,model=that.viewModel;if(!(that.manuallyUpdatingVM||"operator"==e.field&&model.value===undefined)){var currentFilter=$.extend({},that.viewModel.toJSON(),{field:that.options.field}),expression={logic:"and",filters:[]};currentFilter.value!==undefined&&null!==currentFilter.value&&expression.filters.push(currentFilter);var mergeResult=that._merge(expression);that.dataSource.filter(mergeResult.filters.length?mergeResult:{})}},_merge:function(expression){var filter,idx,length,that=this,logic=expression.logic||"and",filters=expression.filters,result=that.dataSource.filter()||{filters:[],logic:"and"};for(removeFiltersForField(result,that.options.field),idx=0,length=filters.length;length>idx;idx++)filter=filters[idx],filter.value=that._parse(filter.value);return filters=$.grep(filters,function(filter){return""!==filter.value&&null!==filter.value}),filters.length&&(result.filters.length?(expression.filters=filters,"and"!==result.logic&&(result.filters=[{logic:result.logic,filters:result.filters}],result.logic="and"),result.filters.push(filters.length>1?expression:filters[0])):(result.filters=filters,result.logic=logic)),result},_createClearIcon:function(){var that=this;$("<button type='button' class='k-button k-button-icon'/>").attr(kendo.attr("bind"),"visible:operatorVisible").html("<span class='k-icon k-i-close'/>").click(proxy(that.clearFilter,that)).appendTo(that.wrapper)},clearFilter:function(){this.viewModel.set("value",null)},_angularItems:function(action){var elements=this.wrapper.closest("th").get(),column=this.options.column;this.angular(action,function(){return{elements:elements,data:[{column:column}]}})},destroy:function(){var that=this;that.filterModel=null,that.operatorDropDown=null,that._angularItems("cleanup"),that._refreshHandler&&(that.dataSource.bind(CHANGE,that._refreshHandler),that._refreshHandler=null),kendo.unbind(that.element),Widget.fn.destroy.call(that),kendo.destroy(that.element)},events:[CHANGE],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:undefined,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:EQ,neq:NEQ,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{eq:EQ,neq:NEQ,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:EQ,neq:NEQ,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:EQ,neq:NEQ}}}});ui.plugin(FilterCell)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function getSpacing(value,defaultSpacing){var spacing={top:0,right:0,bottom:0,left:0};return defaultSpacing=defaultSpacing||0,"number"==typeof value?spacing[TOP]=spacing[RIGHT]=spacing[BOTTOM]=spacing[LEFT]=value:(spacing[TOP]=value[TOP]||defaultSpacing,spacing[RIGHT]=value[RIGHT]||defaultSpacing,spacing[BOTTOM]=value[BOTTOM]||defaultSpacing,spacing[LEFT]=value[LEFT]||defaultSpacing),spacing}function createAxisTick(options,tickOptions){var tickX=options.tickX,tickY=options.tickY,position=options.position,tick=new draw.Path({stroke:{width:tickOptions.width,color:tickOptions.color}});return options.vertical?tick.moveTo(tickX,position).lineTo(tickX+tickOptions.size,position):tick.moveTo(position,tickY).lineTo(position,tickY+tickOptions.size),alignPathToPixel(tick),tick}function createAxisGridLine(options,gridLine){var lineStart=options.lineStart,lineEnd=options.lineEnd,position=options.position,line=new draw.Path({stroke:{width:gridLine.width,color:gridLine.color,dashType:gridLine.dashType}});return options.vertical?line.moveTo(lineStart,position).lineTo(lineEnd,position):line.moveTo(position,lineStart).lineTo(position,lineEnd),alignPathToPixel(line),line}function autoMajorUnit(min,max){var diff=round(max-min,DEFAULT_AUTO_MAJOR_UNIT_PRECISION-1);if(0===diff){if(0===max)return.1;diff=math.abs(max)}var scale=math.pow(10,math.floor(math.log(diff)/math.log(10))),relativeValue=round(diff/scale,DEFAULT_AUTO_MAJOR_UNIT_PRECISION),scaleMultiplier=1;return scaleMultiplier=1.904762>relativeValue?.2:4.761904>relativeValue?.5:9.523809>relativeValue?1:2,round(scale*scaleMultiplier,DEFAULT_AUTO_MAJOR_UNIT_PRECISION)}function rotatePoint(x,y,cx,cy,angle){var theta=angle*DEG_TO_RAD;return new Point2D(cx+(x-cx)*math.cos(theta)+(y-cy)*math.sin(theta),cy-(x-cx)*math.sin(theta)+(y-cy)*math.cos(theta))}function boxDiff(r,s){if(r.x1==s.x1&&r.y1==s.y1&&r.x2==s.x2&&r.y2==s.y2)return s;var a=math.min(r.x1,s.x1),b=math.max(r.x1,s.x1),c=math.min(r.x2,s.x2),d=math.max(r.x2,s.x2),e=math.min(r.y1,s.y1),f=math.max(r.y1,s.y1),g=math.min(r.y2,s.y2),h=math.max(r.y2,s.y2),result=[];return result[0]=Box2D(b,e,c,f),result[1]=Box2D(a,f,b,g),result[2]=Box2D(c,f,d,g),result[3]=Box2D(b,g,c,h),r.x1==a&&r.y1==e||s.x1==a&&s.y1==e?(result[4]=Box2D(a,e,b,f),result[5]=Box2D(c,g,d,h)):(result[4]=Box2D(c,e,d,f),result[5]=Box2D(a,g,b,h)),$.grep(result,function(box){return box.height()>0&&box.width()>0})[0]}function inArray(value,array){return-1!=indexOf(value,array)}function ceil(value,step){return round(math.ceil(value/step)*step,DEFAULT_PRECISION)}function floor(value,step){return round(math.floor(value/step)*step,DEFAULT_PRECISION)}function round(value,precision){var power=math.pow(10,precision||0);return math.round(value*power)/power}function log(y,x){return math.log(y)/math.log(x)}function remainderClose(value,divisor,ratio){var remainder=round(math.abs(value%divisor),DEFAULT_PRECISION),threshold=divisor*(1-ratio);return 0===remainder||remainder>threshold}function interpolateValue(start,end,progress){return round(start+(end-start)*progress,COORD_PRECISION)}function numericComparer(a,b){return a-b}function autoFormat(format,value){return format.match(FORMAT_REGEX)?kendo.format.apply(this,arguments):kendo.toString(value,format)}function clockwise(v1,v2){return-v1.x*v2.y+v1.y*v2.x<0}function dateComparer(a,b){return a&&b?a.getTime()-b.getTime():-1}function mwDelta(e){var origEvent=e.originalEvent,delta=0;return origEvent.wheelDelta&&(delta=-origEvent.wheelDelta/120,delta=delta>0?math.ceil(delta):math.floor(delta)),origEvent.detail&&(delta=round(origEvent.detail/3)),delta}function decodeEntities(text){if(!text||!text.indexOf||text.indexOf("&")<0)return text;var element=decodeEntities._element;return element.innerHTML=text,element.textContent||element.innerText}function alignPathToPixel(path){if(!kendo.support.vml)for(var i=0;i<path.segments.length;i++)path.segments[i].anchor().round(0).translate(.5,.5);return path}function innerRadialStops(options){var i,currentStop,stops=options.stops,usedSpace=options.innerRadius/options.radius*100,length=stops.length,currentStops=[];for(i=0;length>i;i++)currentStop=deepExtend({},stops[i]),currentStop.offset=(currentStop.offset*(100-usedSpace)+usedSpace)/100,currentStops.push(currentStop);return currentStops}function rectToBox(rect){var origin=rect.origin,bottomRight=rect.bottomRight();return new Box2D(origin.x,origin.y,bottomRight.x,bottomRight.y)}var kendo=window.kendo,util=kendo.util,append=util.append,defined=util.defined,last=util.last,valueOrDefault=util.valueOrDefault,dataviz=kendo.dataviz,geom=dataviz.geometry,draw=dataviz.drawing,measureText=draw.util.measureText,Class=kendo.Class,template=kendo.template,noop=$.noop,indexOf=$.inArray,isPlainObject=$.isPlainObject,trim=$.trim,math=Math,deepExtend=kendo.deepExtend,AXIS_LABEL_CLICK="axisLabelClick",BLACK="#000",BOTTOM="bottom",CENTER="center",COORD_PRECISION=3,CLIP="clip",CIRCLE="circle",CROSS="cross",DEFAULT_FONT="12px sans-serif",DEFAULT_HEIGHT=400,DEFAULT_ICON_SIZE=7,DEFAULT_PRECISION=6,DEFAULT_AUTO_MAJOR_UNIT_PRECISION=10,DEFAULT_WIDTH=600,DEG_TO_RAD=math.PI/180,FORMAT_REGEX=/\{\d+:?/,HEIGHT="height",COORDINATE_LIMIT=1e5,INITIAL_ANIMATION_DURATION=600,INSIDE="inside",LEFT="left",LINEAR="linear",MAX_VALUE=Number.MAX_VALUE,MIN_VALUE=-Number.MAX_VALUE,NONE="none",NOTE_CLICK="noteClick",NOTE_HOVER="noteHover",OUTSIDE="outside",RADIAL="radial",RIGHT="right",TOP="top",TRIANGLE="triangle",WIDTH="width",WHITE="#fff",X="x",Y="y",ZERO_THRESHOLD=.2,Point2D=function(x,y){var point=this;return point instanceof Point2D?(point.x=x||0,void(point.y=y||0)):new Point2D(x,y)};Point2D.fn=Point2D.prototype={clone:function(){var point=this;return new Point2D(point.x,point.y)},equals:function(point){return point&&point.x===this.x&&point.y===this.y},rotate:function(center,degrees){var point=this,theta=degrees*DEG_TO_RAD,cosT=math.cos(theta),sinT=math.sin(theta),cx=center.x,cy=center.y,x=point.x,y=point.y;return point.x=round(cx+(x-cx)*cosT+(y-cy)*sinT,COORD_PRECISION),point.y=round(cy+(y-cy)*cosT-(x-cx)*sinT,COORD_PRECISION),point},multiply:function(a){var point=this;return point.x*=a,point.y*=a,point},distanceTo:function(point){var dx=this.x-point.x,dy=this.y-point.y;return math.sqrt(dx*dx+dy*dy)}},Point2D.onCircle=function(c,a,r){return a*=DEG_TO_RAD,new Point2D(c.x-r*math.cos(a),c.y-r*math.sin(a))};var Box2D=function(x1,y1,x2,y2){var box=this;return box instanceof Box2D?(box.x1=x1||0,box.x2=x2||0,box.y1=y1||0,void(box.y2=y2||0)):new Box2D(x1,y1,x2,y2)};Box2D.fn=Box2D.prototype={width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},translate:function(dx,dy){var box=this;return box.x1+=dx,box.x2+=dx,box.y1+=dy,box.y2+=dy,box},move:function(x,y){var box=this,height=box.height(),width=box.width();return defined(x)&&(box.x1=x,box.x2=box.x1+width),defined(y)&&(box.y1=y,box.y2=box.y1+height),box},wrap:function(targetBox){var box=this;return box.x1=math.min(box.x1,targetBox.x1),box.y1=math.min(box.y1,targetBox.y1),box.x2=math.max(box.x2,targetBox.x2),box.y2=math.max(box.y2,targetBox.y2),box},wrapPoint:function(point){return this.wrap(new Box2D(point.x,point.y,point.x,point.y)),this},snapTo:function(targetBox,axis){var box=this;return axis!=X&&axis||(box.x1=targetBox.x1,box.x2=targetBox.x2),axis!=Y&&axis||(box.y1=targetBox.y1,box.y2=targetBox.y2),box},alignTo:function(targetBox,anchor){var box=this,height=box.height(),width=box.width(),axis=anchor==TOP||anchor==BOTTOM?Y:X,offset=axis==Y?height:width;if(anchor===CENTER){var targetCenter=targetBox.center(),center=box.center();box.x1+=targetCenter.x-center.x,box.y1+=targetCenter.y-center.y}else anchor===TOP||anchor===LEFT?box[axis+1]=targetBox[axis+1]-offset:box[axis+1]=targetBox[axis+2];return box.x2=box.x1+width,box.y2=box.y1+height,box},shrink:function(dw,dh){var box=this;return box.x2-=dw,box.y2-=dh,box},expand:function(dw,dh){return this.shrink(-dw,-dh),this},pad:function(padding){var box=this,spacing=getSpacing(padding);return box.x1-=spacing.left,box.x2+=spacing.right,box.y1-=spacing.top,box.y2+=spacing.bottom,box},unpad:function(padding){var box=this,spacing=getSpacing(padding);return spacing.left=-spacing.left,spacing.top=-spacing.top,spacing.right=-spacing.right,spacing.bottom=-spacing.bottom,box.pad(spacing)},clone:function(){var box=this;return new Box2D(box.x1,box.y1,box.x2,box.y2)},center:function(){var box=this;return new Point2D(box.x1+box.width()/2,box.y1+box.height()/2)},containsPoint:function(point){var box=this;return point.x>=box.x1&&point.x<=box.x2&&point.y>=box.y1&&point.y<=box.y2},points:function(){var box=this;return[new Point2D(box.x1,box.y1),new Point2D(box.x2,box.y1),new Point2D(box.x2,box.y2),new Point2D(box.x1,box.y2)]},getHash:function(){var box=this;return[box.x1,box.y1,box.x2,box.y2].join(",")},overlaps:function(box){return!(box.y2<this.y1||this.y2<box.y1||box.x2<this.x1||this.x2<box.x1)},rotate:function(rotation){var box=this,width=box.width(),height=box.height(),center=box.center(),cx=center.x,cy=center.y,r1=rotatePoint(0,0,cx,cy,rotation),r2=rotatePoint(width,0,cx,cy,rotation),r3=rotatePoint(width,height,cx,cy,rotation),r4=rotatePoint(0,height,cx,cy,rotation);return width=math.max(r1.x,r2.x,r3.x,r4.x)-math.min(r1.x,r2.x,r3.x,r4.x),height=math.max(r1.y,r2.y,r3.y,r4.y)-math.min(r1.y,r2.y,r3.y,r4.y),box.x2=box.x1+width,box.y2=box.y1+height,box},toRect:function(){return new geom.Rect([this.x1,this.y1],[this.width(),this.height()])},hasSize:function(){return 0!==this.width()&&0!==this.height()},align:function(targetBox,axis,alignment){var box=this,c1=axis+1,c2=axis+2,sizeFunc=axis===X?WIDTH:HEIGHT,size=box[sizeFunc]();inArray(alignment,[LEFT,TOP])?(box[c1]=targetBox[c1],box[c2]=box[c1]+size):inArray(alignment,[RIGHT,BOTTOM])?(box[c2]=targetBox[c2],box[c1]=box[c2]-size):alignment==CENTER&&(box[c1]=targetBox[c1]+(targetBox[sizeFunc]()-size)/2,box[c2]=box[c1]+size)}};var Ring=Class.extend({init:function(center,innerRadius,radius,startAngle,angle){var ring=this;ring.c=center,ring.ir=innerRadius,ring.r=radius,ring.startAngle=startAngle,ring.angle=angle},clone:function(){var r=this;return new Ring(r.c,r.ir,r.r,r.startAngle,r.angle)},middle:function(){return this.startAngle+this.angle/2},radius:function(newRadius,innerRadius){var that=this;return innerRadius?that.ir=newRadius:that.r=newRadius,that},point:function(angle,innerRadius){var ring=this,radianAngle=angle*DEG_TO_RAD,ax=math.cos(radianAngle),ay=math.sin(radianAngle),radius=innerRadius?ring.ir:ring.r,x=round(ring.c.x-ax*radius,COORD_PRECISION),y=round(ring.c.y-ay*radius,COORD_PRECISION);return new Point2D(x,y)},adjacentBox:function(distance,width,height){var sector=this.clone().expand(distance),midAndle=sector.middle(),midPoint=sector.point(midAndle),hw=width/2,hh=height/2,x=midPoint.x-hw,y=midPoint.y-hh,sa=math.sin(midAndle*DEG_TO_RAD),ca=math.cos(midAndle*DEG_TO_RAD);return math.abs(sa)<.9&&(x+=hw*-ca/math.abs(ca)),math.abs(ca)<.9&&(y+=hh*-sa/math.abs(sa)),new Box2D(x,y,x+width,y+height)},containsPoint:function(p){var ring=this,c=ring.c,ir=ring.ir,r=ring.r,startAngle=ring.startAngle,endAngle=ring.startAngle+ring.angle,dx=p.x-c.x,dy=p.y-c.y,vector=new Point2D(dx,dy),startPoint=ring.point(startAngle),startVector=new Point2D(startPoint.x-c.x,startPoint.y-c.y),endPoint=ring.point(endAngle),endVector=new Point2D(endPoint.x-c.x,endPoint.y-c.y),dist=round(dx*dx+dy*dy,COORD_PRECISION);return(startVector.equals(vector)||clockwise(startVector,vector))&&!clockwise(endVector,vector)&&dist>=ir*ir&&r*r>=dist},getBBox:function(){var angles,i,point,ring=this,box=new Box2D(MAX_VALUE,MAX_VALUE,MIN_VALUE,MIN_VALUE),sa=round(ring.startAngle%360),ea=round((sa+ring.angle)%360),innerRadius=ring.ir,allAngles=[0,90,180,270,sa,ea].sort(numericComparer),saIndex=indexOf(sa,allAngles),eaIndex=indexOf(ea,allAngles);for(angles=sa==ea?allAngles:eaIndex>saIndex?allAngles.slice(saIndex,eaIndex+1):[].concat(allAngles.slice(0,eaIndex+1),allAngles.slice(saIndex,allAngles.length)),i=0;i<angles.length;i++)point=ring.point(angles[i]),box.wrapPoint(point),box.wrapPoint(point,innerRadius);return innerRadius||box.wrapPoint(ring.c),box},expand:function(value){return this.r+=value,this}}),Sector=Ring.extend({init:function(center,radius,startAngle,angle){Ring.fn.init.call(this,center,0,radius,startAngle,angle)},expand:function(value){return Ring.fn.expand.call(this,value)},clone:function(){var sector=this;return new Sector(sector.c,sector.r,sector.startAngle,sector.angle)},radius:function(newRadius){return Ring.fn.radius.call(this,newRadius)},point:function(angle){return Ring.fn.point.call(this,angle)}}),ShapeBuilder=function(){};ShapeBuilder.fn=ShapeBuilder.prototype={createRing:function(sector,options){var startAngle=sector.startAngle+180,endAngle=sector.angle+startAngle,center=new geom.Point(sector.c.x,sector.c.y),radius=math.max(sector.r,0),innerRadius=math.max(sector.ir,0),arc=new geom.Arc(center,{startAngle:startAngle,endAngle:endAngle,radiusX:radius,radiusY:radius}),path=draw.Path.fromArc(arc,options).close();if(innerRadius){arc.radiusX=arc.radiusY=innerRadius;var innerEnd=arc.pointAt(endAngle);path.lineTo(innerEnd.x,innerEnd.y),path.arc(endAngle,startAngle,innerRadius,innerRadius,!0)}else path.lineTo(center.x,center.y);return path}},ShapeBuilder.current=new ShapeBuilder;var ChartElement=Class.extend({init:function(options){var element=this;element.children=[],element.options=deepExtend({},element.options,options)},reflow:function(targetBox){var box,i,currentChild,element=this,children=element.children;for(i=0;i<children.length;i++)currentChild=children[i],currentChild.reflow(targetBox),box=box?box.wrap(currentChild.box):currentChild.box.clone();element.box=box||targetBox},destroy:function(){var i,element=this,children=element.children;for(this.animation&&this.animation.destroy(),i=0;i<children.length;i++)children[i].destroy()},getRoot:function(){var parent=this.parent;return parent?parent.getRoot():null},getChart:function(){var root=this.getRoot();return root?root.chart:void 0},translateChildren:function(dx,dy){var i,element=this,children=element.children,childrenCount=children.length;for(i=0;childrenCount>i;i++)children[i].box.translate(dx,dy)},append:function(){append(this.children,arguments);for(var i=0;i<arguments.length;i++)arguments[i].parent=this},renderVisual:function(){this.options.visible!==!1&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},addVisual:function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},renderChildren:function(){for(var children=this.children,i=0;i<children.length;i++)children[i].renderVisual()},createVisual:function(){this.visual=new dataviz.drawing.Group({zIndex:this.options.zIndex,visible:valueOrDefault(this.options.visible,!0)})},createAnimation:function(){this.visual&&(this.animation=draw.Animation.create(this.visual,this.options.animation))},appendVisual:function(childVisual){childVisual.chartElement||(childVisual.chartElement=this),childVisual.options.noclip?this.clipRoot().visual.append(childVisual):defined(childVisual.options.zIndex)?this.stackRoot().stackVisual(childVisual):this.visual?this.visual.append(childVisual):this.parent.appendVisual(childVisual)},clipRoot:function(){return this.parent?this.parent.clipRoot():this},stackRoot:function(){return this.parent?this.parent.stackRoot():this},stackVisual:function(childVisual){for(var zIndex=childVisual.options.zIndex||0,visuals=this.visual.children,pos=0;pos<visuals.length;pos++){var sibling=visuals[pos],here=valueOrDefault(sibling.options.zIndex,0);if(here>zIndex)break}this.visual.insertAt(childVisual,pos)},traverse:function(callback){for(var children=this.children,i=0;i<children.length;i++){var child=children[i];callback(child),child.traverse&&child.traverse(callback)}},closest:function(match){for(var element=this,matched=!1;element&&!matched;)matched=match(element),matched||(element=element.parent);return matched?element:void 0},renderComplete:$.noop,hasHighlight:function(){var options=(this.options||{}).highlight;return!(!this.createHighlight||options&&options.visible===!1)},toggleHighlight:function(show){var that=this,highlight=that._highlight,options=(that.options||{}).highlight,customVisual=(options||{}).visual;if(!highlight){var highlightOptions={fill:{color:WHITE,opacity:.2},stroke:{color:WHITE,width:1,opacity:.2}};if(customVisual){if(highlight=that._highlight=customVisual($.extend(that.highlightVisualArgs(),{createVisual:function(){return that.createHighlight(highlightOptions)},sender:that.getChart(),series:that.series,dataItem:that.dataItem,category:that.category,value:that.value,percentage:that.percentage,runningTotal:that.runningTotal,total:that.total})),!highlight)return}else highlight=that._highlight=that.createHighlight(highlightOptions);highlight.options.zIndex=that.options.zIndex,that.appendVisual(highlight)}highlight.visible(show)},createGradientOverlay:function(element,options,gradientOptions){var overlay=new draw.Path(deepExtend({stroke:{color:NONE},fill:this.createGradient(gradientOptions),closed:element.options.closed},options));return overlay.segments.elements(element.segments.elements()),overlay},createGradient:function(options){return this.parent?this.parent.createGradient(options):void 0}}),RootElement=ChartElement.extend({init:function(options){var root=this;root.gradients={},ChartElement.fn.init.call(root,options)},options:{width:DEFAULT_WIDTH,height:DEFAULT_HEIGHT,background:WHITE,border:{color:BLACK,width:0},margin:getSpacing(5),zIndex:-2},reflow:function(){var root=this,options=root.options,children=root.children,currentBox=new Box2D(0,0,options.width,options.height);root.box=currentBox.unpad(options.margin);for(var i=0;i<children.length;i++)children[i].reflow(currentBox),currentBox=boxDiff(currentBox,children[i].box)||Box2D()},createVisual:function(){this.visual=new draw.Group,this.createBackground()},createBackground:function(){var options=this.options,border=options.border||{},box=this.box.clone().pad(options.margin).unpad(border.width),background=draw.Path.fromRect(box.toRect(),{stroke:{color:border.width?border.color:"",width:border.width,dashType:border.dashType},fill:{color:options.background,opacity:options.opacity},zIndex:-10});this.visual.append(background)},getRoot:function(){return this},createGradient:function(options){var drawingGradient,gradients=this.gradients,hashCode=util.objectKey(options),gradient=dataviz.Gradients[options.gradient];if(gradients[hashCode])drawingGradient=gradients[hashCode];else{var gradientOptions=deepExtend({},gradient,options);"linear"==gradient.type?drawingGradient=new draw.LinearGradient(gradientOptions):(options.innerRadius&&(gradientOptions.stops=innerRadialStops(gradientOptions)),drawingGradient=new draw.RadialGradient(gradientOptions),drawingGradient.supportVML=gradient.supportVML!==!1),gradients[hashCode]=drawingGradient}return drawingGradient}}),BoxElement=ChartElement.extend({options:{align:LEFT,vAlign:TOP,margin:{},padding:{},border:{color:BLACK,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0},reflow:function(targetBox){function reflowPaddingBox(){element.align(targetBox,X,options.align),element.align(targetBox,Y,options.vAlign),element.paddingBox=box.clone().unpad(margin).unpad(borderWidth)}var box,contentBox,i,item,element=this,options=element.options,width=options.width,height=options.height,hasSetSize=width&&height,shrinkToFit=options.shrinkToFit,margin=getSpacing(options.margin),padding=getSpacing(options.padding),borderWidth=options.border.width,children=element.children;for(contentBox=targetBox.clone(),hasSetSize&&(contentBox.x2=contentBox.x1+width,contentBox.y2=contentBox.y1+height),shrinkToFit&&contentBox.unpad(margin).unpad(borderWidth).unpad(padding),ChartElement.fn.reflow.call(element,contentBox),box=hasSetSize?element.box=Box2D(0,0,width,height):element.box,shrinkToFit&&hasSetSize?(reflowPaddingBox(),contentBox=element.contentBox=element.paddingBox.clone().unpad(padding)):(contentBox=element.contentBox=box.clone(),box.pad(padding).pad(borderWidth).pad(margin),reflowPaddingBox()),element.translateChildren(box.x1-contentBox.x1+margin.left+borderWidth+padding.left,box.y1-contentBox.y1+margin.top+borderWidth+padding.top),i=0;i<children.length;i++)item=children[i],item.reflow(item.box)},align:function(targetBox,axis,alignment){this.box.align(targetBox,axis,alignment)},hasBox:function(){var options=this.options;return options.border.width||options.background},createVisual:function(){ChartElement.fn.createVisual.call(this);var options=this.options;options.visible&&this.hasBox()&&this.visual.append(draw.Path.fromRect(this.paddingBox.toRect(),this.visualStyle()))},visualStyle:function(){var boxElement=this,options=boxElement.options,border=options.border||{};return{stroke:{width:border.width,color:border.color,opacity:valueOrDefault(border.opacity,options.opacity),dashType:border.dashType},fill:{color:options.background,opacity:options.opacity},cursor:options.cursor}}}),Text=ChartElement.extend({init:function(content,options){var text=this;ChartElement.fn.init.call(text,options),text.content=content,text.reflow(Box2D())},options:{font:DEFAULT_FONT,color:BLACK,align:LEFT,vAlign:""},reflow:function(targetBox){var size,text=this,options=text.options;size=options.size=measureText(text.content,{font:options.font}),text.baseline=size.baseline,text.box=Box2D(targetBox.x1,targetBox.y1,targetBox.x1+size.width,targetBox.y1+size.height)},createVisual:function(){var opt=this.options;this.visual=new draw.Text(this.content,this.box.toRect().topLeft(),{font:opt.font,fill:{color:opt.color,opacity:opt.opacity},cursor:opt.cursor})}}),FloatElement=ChartElement.extend({init:function(options){ChartElement.fn.init.call(this,options),this._initDirection()},_initDirection:function(){var options=this.options;options.vertical?(this.groupAxis=X,this.elementAxis=Y,this.groupSizeField=WIDTH,this.elementSizeField=HEIGHT,this.groupSpacing=options.spacing,this.elementSpacing=options.vSpacing):(this.groupAxis=Y,this.elementAxis=X,this.groupSizeField=HEIGHT,this.elementSizeField=WIDTH,this.groupSpacing=options.vSpacing,this.elementSpacing=options.spacing)},options:{vertical:!0,wrap:!0,vSpacing:0,spacing:0},reflow:function(targetBox){this.box=targetBox.clone(),this.reflowChildren()},reflowChildren:function(){var elementStart,groupElementStart,group,groupElements,groupElementsCount,idx,groupIdx,element,elementBox,elementSize,floatElement=this,box=floatElement.box,elementAxis=floatElement.elementAxis,groupAxis=floatElement.groupAxis,elementSizeField=floatElement.elementSizeField,groupSizeField=floatElement.groupSizeField,groupOptions=floatElement.groupOptions(),groups=groupOptions.groups,groupsCount=groups.length,groupsStart=box[groupAxis+1]+floatElement.alignStart(groupOptions.groupsSize,box[groupSizeField]()),groupStart=groupsStart;if(groupsCount){for(groupIdx=0;groupsCount>groupIdx;groupIdx++){for(group=groups[groupIdx],groupElements=group.groupElements,groupElementsCount=groupElements.length,elementStart=box[elementAxis+1],idx=0;groupElementsCount>idx;idx++)element=groupElements[idx],elementSize=floatElement.elementSize(element),groupElementStart=groupStart+floatElement.alignStart(elementSize[groupSizeField],group.groupSize),elementBox=Box2D(),elementBox[groupAxis+1]=groupElementStart,elementBox[groupAxis+2]=groupElementStart+elementSize[groupSizeField],elementBox[elementAxis+1]=elementStart,elementBox[elementAxis+2]=elementStart+elementSize[elementSizeField],element.reflow(elementBox),elementStart+=elementSize[elementSizeField]+floatElement.elementSpacing;groupStart+=group.groupSize+floatElement.groupSpacing}box[groupAxis+1]=groupsStart,box[groupAxis+2]=groupsStart+groupOptions.groupsSize,box[elementAxis+2]=box[elementAxis+1]+groupOptions.maxGroupElementsSize}},alignStart:function(size,maxSize){var start=0,align=this.options.align;return align==RIGHT||align==BOTTOM?start=maxSize-size:align==CENTER&&(start=(maxSize-size)/2),start},groupOptions:function(){var elementSize,element,floatElement=this,box=floatElement.box,children=floatElement.children,childrenCount=children.length,elementSizeField=this.elementSizeField,groupSizeField=this.groupSizeField,elementSpacing=this.elementSpacing,groupSpacing=this.groupSpacing,maxSize=round(box[elementSizeField]()),idx=0,groupSize=0,groupElementsSize=0,groupsSize=0,groups=[],groupElements=[],maxGroupElementsSize=0;for(idx=0;childrenCount>idx;idx++)element=children[idx],element.box||element.reflow(box),elementSize=this.elementSize(element),floatElement.options.wrap&&round(groupElementsSize+elementSpacing+elementSize[elementSizeField])>maxSize&&(groups.push({groupElements:groupElements,groupSize:groupSize,groupElementsSize:groupElementsSize}),maxGroupElementsSize=math.max(maxGroupElementsSize,groupElementsSize),groupsSize+=groupSpacing+groupSize,groupSize=0,groupElementsSize=0,groupElements=[]),groupSize=math.max(groupSize,elementSize[groupSizeField]),groupElementsSize>0&&(groupElementsSize+=elementSpacing),groupElementsSize+=elementSize[elementSizeField],groupElements.push(element);return groups.push({groupElements:groupElements,groupSize:groupSize,groupElementsSize:groupElementsSize}),maxGroupElementsSize=math.max(maxGroupElementsSize,groupElementsSize),groupsSize+=groupSize,{groups:groups,groupsSize:groupsSize,maxGroupElementsSize:maxGroupElementsSize}},elementSize:function(element){return{width:element.box.width(),height:element.box.height()}},createVisual:noop}),TextBox=BoxElement.extend({ROWS_SPLIT_REGEX:/\n|\\n/m,init:function(content,options){var textbox=this;textbox.content=content,BoxElement.fn.init.call(textbox,options),textbox._initContainer(),textbox.reflow(Box2D())},_initContainer:function(){var text,rowIdx,textbox=this,options=textbox.options,rows=(textbox.content+"").split(textbox.ROWS_SPLIT_REGEX),floatElement=new FloatElement({vertical:!0,align:options.align,wrap:!1}),textOptions=deepExtend({},options,{opacity:1,animation:null});for(textbox.container=floatElement,textbox.append(floatElement),rowIdx=0;rowIdx<rows.length;rowIdx++)text=new Text(trim(rows[rowIdx]),textOptions),floatElement.append(text)},reflow:function(targetBox){var options=this.options,visualFn=options.visual;if(this.container.options.align=options.align,visualFn&&!this._boxReflow){targetBox.hasSize()||(this._boxReflow=!0,this.reflow(targetBox),this._boxReflow=!1,targetBox=this.box),this.visual=visualFn(this.visualContext(targetBox));var visualBox=targetBox;this.visual&&(visualBox=rectToBox(this.visual.clippedBBox()||new geom.Rect),this.visual.options.zIndex=options.zIndex,this.visual.options.noclip=options.noclip),this.box=this.contentBox=this.paddingBox=visualBox}else if(BoxElement.fn.reflow.call(this,targetBox),options.rotation){var margin=getSpacing(options.margin),box=this.box.unpad(margin);this.targetBox=targetBox,this.normalBox=box.clone(),box=this.rotate(),box.translate(margin.left-margin.right,margin.top-margin.bottom),this.rotatedBox=box.clone(),box.pad(margin)}},createVisual:function(){var options=this.options;if(options.visible&&(this.visual=new dataviz.drawing.Group({transform:this.rotationTransform(),zIndex:options.zIndex,noclip:options.noclip}),this.hasBox())){var box=draw.Path.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(box)}},renderVisual:function(){this.options.visual?(this.addVisual(),this.createAnimation()):BoxElement.fn.renderVisual.call(this)},visualOptions:function(){var options=this.options;return{background:options.background,border:options.border,color:options.color,font:options.font,margin:options.margin,padding:options.padding,visible:options.visible
}},visualContext:function(targetBox){var textbox=this;return{text:textbox.content,rect:targetBox.toRect(),sender:this.getChart(),options:textbox.visualOptions(),createVisual:function(){return textbox._boxReflow=!0,textbox.reflow(targetBox),textbox._boxReflow=!1,textbox.getDefaultVisual()}}},getDefaultVisual:function(){this.createVisual(),this.renderChildren();var visual=this.visual;return delete this.visual,visual},rotate:function(){var options=this.options;return this.box.rotate(options.rotation),this.align(this.targetBox,X,options.align),this.align(this.targetBox,Y,options.vAlign),this.box},rotationTransform:function(){var rotation=this.options.rotation;if(!rotation)return null;var center=this.normalBox.center(),cx=center.x,cy=center.y,boxCenter=this.rotatedBox.center();return geom.transform().translate(boxCenter.x-cx,boxCenter.y-cy).rotate(rotation,[cx,cy])}}),Title=ChartElement.extend({init:function(options){var title=this;ChartElement.fn.init.call(title,options),options=title.options,title.append(new TextBox(options.text,deepExtend({},options,{vAlign:options.position})))},options:{color:BLACK,position:TOP,align:CENTER,margin:getSpacing(5),padding:getSpacing(5)},reflow:function(targetBox){var title=this;ChartElement.fn.reflow.call(title,targetBox),title.box.snapTo(targetBox,X)}});Title.buildTitle=function(options,parent,defaultOptions){var title;return"string"==typeof options&&(options={text:options}),options=deepExtend({visible:!0},defaultOptions,options),options&&options.visible&&options.text&&(title=new Title(options),parent.append(title)),title};var AxisLabel=TextBox.extend({init:function(value,text,index,dataItem,options){var label=this;label.text=text,label.value=value,label.index=index,label.dataItem=dataItem,TextBox.fn.init.call(label,text,options)},visualContext:function(targetBox){var context=TextBox.fn.visualContext.call(this,targetBox);return context.value=this.value,context.dataItem=this.dataItem,context.format=this.options.format,context.culture=this.options.culture,context},click:function(widget,e){var label=this;widget.trigger(AXIS_LABEL_CLICK,{element:$(e.target),value:label.value,text:label.text,index:label.index,dataItem:label.dataItem,axis:label.parent.options})},rotate:function(){if(this.options.alignRotation!=CENTER){var box=this.normalBox.toRect(),transform=this.rotationTransform();this.box=rectToBox(box.bbox(transform.matrix()))}else TextBox.fn.rotate.call(this);return this.box},rotationTransform:function(){var options=this.options,rotation=options.rotation;if(!rotation)return null;if(options.alignRotation==CENTER)return TextBox.fn.rotationTransform.call(this);var rotationMatrix=geom.transform().rotate(rotation).matrix(),box=this.normalBox.toRect(),rect=this.targetBox.toRect(),rotationOrigin=options.rotationOrigin||TOP,alignAxis=rotationOrigin==TOP||rotationOrigin==BOTTOM?X:Y,distanceAxis=rotationOrigin==TOP||rotationOrigin==BOTTOM?Y:X,axisAnchor=rotationOrigin==TOP||rotationOrigin==LEFT?rect.origin:rect.bottomRight(),topLeft=box.topLeft().transformCopy(rotationMatrix),topRight=box.topRight().transformCopy(rotationMatrix),bottomRight=box.bottomRight().transformCopy(rotationMatrix),bottomLeft=box.bottomLeft().transformCopy(rotationMatrix),rotatedBox=geom.Rect.fromPoints(topLeft,topRight,bottomRight,bottomLeft),translate={};translate[distanceAxis]=rect.origin[distanceAxis]-rotatedBox.origin[distanceAxis];var alignStart,alignEnd,distanceLeft=math.abs(topLeft[distanceAxis]+translate[distanceAxis]-axisAnchor[distanceAxis]),distanceRight=math.abs(topRight[distanceAxis]+translate[distanceAxis]-axisAnchor[distanceAxis]);round(distanceLeft,DEFAULT_PRECISION)===round(distanceRight,DEFAULT_PRECISION)?(alignStart=topLeft,alignEnd=topRight):distanceLeft>distanceRight?(alignStart=topRight,alignEnd=bottomRight):(alignStart=topLeft,alignEnd=bottomLeft);var alignCenter=alignStart[alignAxis]+(alignEnd[alignAxis]-alignStart[alignAxis])/2;return translate[alignAxis]=rect.center()[alignAxis]-alignCenter,geom.transform().translate(translate.x,translate.y).rotate(rotation)}}),Axis=ChartElement.extend({init:function(options){var axis=this;ChartElement.fn.init.call(axis,options),axis.options.visible||(axis.options=deepExtend({},axis.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),axis.options.minorTicks=deepExtend({},{color:axis.options.line.color,width:axis.options.line.width,visible:axis.options.minorTickType!=NONE},axis.options.minorTicks,{size:axis.options.minorTickSize,align:axis.options.minorTickType}),axis.options.majorTicks=deepExtend({},{color:axis.options.line.color,width:axis.options.line.width,visible:axis.options.majorTickType!=NONE},axis.options.majorTicks,{size:axis.options.majorTickSize,align:axis.options.majorTickType}),this.options._deferLabels||axis.createLabels(),axis.createTitle(),axis.createNotes()},options:{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:BLACK,visible:!0},title:{visible:!0,position:CENTER},majorTicks:{align:OUTSIDE,size:4,skip:0,step:1},minorTicks:{align:OUTSIDE,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:OUTSIDE,minorTickType:NONE,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:BLACK,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1},labelsRange:function(){return{min:this.options.labels.skip,max:this.labelsCount()}},createLabels:function(){var axis=this,options=axis.options,align=options.vertical?RIGHT:CENTER,labelOptions=deepExtend({},options.labels,{align:align,zIndex:options.zIndex}),step=math.max(1,labelOptions.step);if(axis.children=$.grep(axis.children,function(child){return!(child instanceof AxisLabel)}),axis.labels=[],labelOptions.visible){var label,i,range=axis.labelsRange(),rotation=labelOptions.rotation;for(isPlainObject(rotation)&&(labelOptions.alignRotation=rotation.align,labelOptions.rotation=rotation.angle),"auto"==labelOptions.rotation&&(labelOptions.rotation=0,options.autoRotateLabels=!0),i=range.min;i<range.max;i+=step)label=axis.createAxisLabel(i,labelOptions),label&&(axis.append(label),axis.labels.push(label))}},lineBox:function(){var axis=this,options=axis.options,box=axis.box,vertical=options.vertical,mirror=options.labels.mirror,axisX=mirror?box.x1:box.x2,axisY=mirror?box.y2:box.y1,lineWidth=options.line.width||0;return vertical?Box2D(axisX,box.y1,axisX,box.y2-lineWidth):Box2D(box.x1,axisY,box.x2-lineWidth,axisY)},createTitle:function(){var title,axis=this,options=axis.options,titleOptions=deepExtend({rotation:options.vertical?-90:0,text:"",zIndex:1,visualSize:!0},options.title);titleOptions.visible&&titleOptions.text&&(title=new TextBox(titleOptions.text,titleOptions),axis.append(title),axis.title=title)},createNotes:function(){var i,item,note,axis=this,options=axis.options,notes=options.notes,items=notes.data||[];for(axis.notes=[],i=0;i<items.length;i++)item=deepExtend({},notes,items[i]),item.value=axis.parseNoteValue(item.value),note=new Note(item.value,item.label.text,null,null,null,item),note.options.visible&&(defined(note.options.position)?options.vertical&&!inArray(note.options.position,[LEFT,RIGHT])?note.options.position=options.reverse?LEFT:RIGHT:options.vertical||inArray(note.options.position,[TOP,BOTTOM])||(note.options.position=options.reverse?BOTTOM:TOP):options.vertical?note.options.position=options.reverse?LEFT:RIGHT:note.options.position=options.reverse?BOTTOM:TOP,axis.append(note),axis.notes.push(note))},parseNoteValue:function(value){return value},renderVisual:function(){ChartElement.fn.renderVisual.call(this),this.createPlotBands()},createVisual:function(){ChartElement.fn.createVisual.call(this),this.createBackground(),this.createLine()},gridLinesVisual:function(){var gridLines=this._gridLines;return gridLines||(gridLines=this._gridLines=new draw.Group({zIndex:-2}),this.appendVisual(this._gridLines)),gridLines},createTicks:function(lineGroup){function render(tickPositions,tickOptions,skipUnit){var i,count=tickPositions.length;if(tickOptions.visible)for(i=tickOptions.skip;count>i;i+=tickOptions.step)defined(skipUnit)&&i%skipUnit===0||(tickLineOptions.tickX=mirror?lineBox.x2:lineBox.x2-tickOptions.size,tickLineOptions.tickY=mirror?lineBox.y1-tickOptions.size:lineBox.y1,tickLineOptions.position=tickPositions[i],lineGroup.append(createAxisTick(tickLineOptions,tickOptions)))}var axis=this,options=axis.options,lineBox=axis.lineBox(),mirror=options.labels.mirror,majorUnit=options.majorTicks.visible?options.majorUnit:0,tickLineOptions={vertical:options.vertical};render(axis.getMajorTickPositions(),options.majorTicks),render(axis.getMinorTickPositions(),options.minorTicks,majorUnit/options.minorUnit)},createLine:function(){var axis=this,options=axis.options,line=options.line,lineBox=axis.lineBox();if(line.width>0&&line.visible){var path=new draw.Path({stroke:{width:line.width,color:line.color,dashType:line.dashType}});path.moveTo(lineBox.x1,lineBox.y1).lineTo(lineBox.x2,lineBox.y2),options._alignLines&&alignPathToPixel(path);var group=this._lineGroup=new draw.Group;group.append(path),this.visual.append(group),this.createTicks(group)}},getActualTickSize:function(){var axis=this,options=axis.options,tickSize=0;return options.majorTicks.visible&&options.minorTicks.visible?tickSize=math.max(options.majorTicks.size,options.minorTicks.size):options.majorTicks.visible?tickSize=options.majorTicks.size:options.minorTicks.visible&&(tickSize=options.minorTicks.size),tickSize},createBackground:function(){var axis=this,options=axis.options,background=options.background,box=axis.box;background&&(axis._backgroundPath=draw.Path.fromRect(box.toRect(),{fill:{color:background},stroke:null}),this.visual.append(axis._backgroundPath))},createPlotBands:function(){var slotX,slotY,from,to,axis=this,options=axis.options,plotBands=options.plotBands||[],vertical=options.vertical,plotArea=axis.plotArea;if(0!==plotBands.length){var group=this._plotbandGroup=new draw.Group({zIndex:-1}),altAxis=$.grep(axis.pane.axes,function(a){return a.options.vertical!==axis.options.vertical})[0];$.each(plotBands,function(i,item){if(from=valueOrDefault(item.from,MIN_VALUE),to=valueOrDefault(item.to,MAX_VALUE),vertical?(slotX=(altAxis||plotArea.axisX).lineBox(),slotY=axis.getSlot(item.from,item.to,!0)):(slotX=axis.getSlot(item.from,item.to,!0),slotY=(altAxis||plotArea.axisY).lineBox()),0!==slotX.width()&&0!==slotY.height()){var bandRect=new geom.Rect([slotX.x1,slotY.y1],[slotX.width(),slotY.height()]),path=draw.Path.fromRect(bandRect,{fill:{color:item.color,opacity:item.opacity},stroke:null});group.append(path)}}),axis.appendVisual(group)}},createGridLines:function(altAxis){function render(tickPositions,gridLine,skipUnit){var i,count=tickPositions.length;if(gridLine.visible)for(i=gridLine.skip;count>i;i+=gridLine.step)pos=round(tickPositions[i]),inArray(pos,majorTicks)||i%skipUnit===0||axisLineVisible&&linePos===pos||(lineOptions.position=pos,container.append(createAxisGridLine(lineOptions,gridLine)),majorTicks.push(pos))}var pos,axis=this,options=axis.options,axisLineVisible=altAxis.options.line.visible,majorGridLines=options.majorGridLines,majorUnit=majorGridLines.visible?options.majorUnit:0,vertical=options.vertical,lineBox=altAxis.lineBox(),linePos=lineBox[vertical?"y1":"x1"],lineOptions={lineStart:lineBox[vertical?"x1":"y1"],lineEnd:lineBox[vertical?"x2":"y2"],vertical:vertical},majorTicks=[],container=this.gridLinesVisual();return render(axis.getMajorTickPositions(),options.majorGridLines),render(axis.getMinorTickPositions(),options.minorGridLines,majorUnit/options.minorUnit),container.children},reflow:function(box){var labelSize,i,axis=this,options=axis.options,vertical=options.vertical,labels=axis.labels,count=labels.length,title=axis.title,sizeFn=vertical?WIDTH:HEIGHT,titleSize=title?title.box[sizeFn]():0,space=axis.getActualTickSize()+options.margin+titleSize,maxLabelSize=0,rootBox=(this.getRoot()||{}).box||box,boxSize=rootBox[sizeFn]();for(i=0;count>i;i++)labelSize=labels[i].box[sizeFn](),boxSize>=labelSize+space&&(maxLabelSize=math.max(maxLabelSize,labelSize));vertical?axis.box=Box2D(box.x1,box.y1,box.x1+maxLabelSize+space,box.y2):axis.box=Box2D(box.x1,box.y1,box.x2,box.y1+maxLabelSize+space),axis.arrangeTitle(),axis.arrangeLabels(),axis.arrangeNotes()},getLabelsTickPositions:function(){return this.getMajorTickPositions()},labelTickIndex:function(label){return label.index},arrangeLabels:function(){var labelBox,labelY,i,axis=this,options=axis.options,labels=axis.labels,labelsBetweenTicks=!options.justified,vertical=options.vertical,lineBox=axis.lineBox(),mirror=options.labels.mirror,tickPositions=axis.getLabelsTickPositions(),labelOffset=axis.getActualTickSize()+options.margin;for(i=0;i<labels.length;i++){var firstTickPosition,nextTickPosition,middle,labelX,label=labels[i],tickIx=axis.labelTickIndex(label),labelSize=vertical?label.box.height():label.box.width(),labelPos=tickPositions[tickIx]-labelSize/2;vertical?(labelsBetweenTicks&&(firstTickPosition=tickPositions[tickIx],nextTickPosition=tickPositions[tickIx+1],middle=firstTickPosition+(nextTickPosition-firstTickPosition)/2,labelPos=middle-labelSize/2),labelX=lineBox.x2,mirror?(labelX+=labelOffset,label.options.rotationOrigin=LEFT):(labelX-=labelOffset+label.box.width(),label.options.rotationOrigin=RIGHT),labelBox=label.box.move(labelX,labelPos)):(labelsBetweenTicks?(firstTickPosition=tickPositions[tickIx],nextTickPosition=tickPositions[tickIx+1]):(firstTickPosition=labelPos,nextTickPosition=labelPos+labelSize),labelY=lineBox.y1,mirror?(labelY-=labelOffset+label.box.height(),label.options.rotationOrigin=BOTTOM):(labelY+=labelOffset,label.options.rotationOrigin=TOP),labelBox=Box2D(firstTickPosition,labelY,nextTickPosition,labelY+label.box.height())),label.reflow(labelBox)}},autoRotateLabels:function(){if(this.options.autoRotateLabels&&!this.options.vertical){var labelBox,angle,width,idx,tickPositions=this.getMajorTickPositions(),labels=this.labels;for(idx=0;idx<labels.length;idx++)if(width=tickPositions[idx+1]-tickPositions[idx],labelBox=labels[idx].box,labelBox.width()>width){if(labelBox.height()>width){angle=-90;break}angle=-45}if(angle){for(idx=0;idx<labels.length;idx++)labels[idx].options.rotation=angle,labels[idx].reflow(Box2D());return!0}}},arrangeTitle:function(){var axis=this,options=axis.options,mirror=options.labels.mirror,vertical=options.vertical,title=axis.title;title&&(vertical?(title.options.align=mirror?RIGHT:LEFT,title.options.vAlign=title.options.position):(title.options.align=title.options.position,title.options.vAlign=mirror?TOP:BOTTOM),title.reflow(axis.box))},arrangeNotes:function(){var i,item,slot,value,axis=this;for(i=0;i<axis.notes.length;i++)item=axis.notes[i],value=item.options.value,defined(value)?(axis.shouldRenderNote(value)?item.show():item.hide(),slot=axis.getSlot(value)):item.hide(),item.reflow(slot||axis.lineBox())},alignTo:function(secondAxis){var axis=this,lineBox=secondAxis.lineBox(),vertical=axis.options.vertical,pos=vertical?Y:X;axis.box.snapTo(lineBox,pos),vertical?axis.box.shrink(0,axis.lineBox().height()-lineBox.height()):axis.box.shrink(axis.lineBox().width()-lineBox.width(),0),axis.box[pos+1]-=axis.lineBox()[pos+1]-lineBox[pos+1],axis.box[pos+2]-=axis.lineBox()[pos+2]-lineBox[pos+2]},axisLabelText:function(value,dataItem,options){var text=value;if(options.template){var tmpl=template(options.template);text=tmpl({value:value,dataItem:dataItem,format:options.format,culture:options.culture})}else options.format&&(text=options.format.match(FORMAT_REGEX)?kendo.format(options.format,value):kendo.toString(value,options.format,options.culture));return text},slot:function(from,to){var slot=this.getSlot(from,to);return slot?slot.toRect():void 0},contentBox:function(){var box=this.box.clone(),labels=this.labels;return labels.length&&(labels[0].options.visible&&box.wrap(labels[0].box),last(labels).options.visible&&box.wrap(last(labels).box)),box},limitRange:function(from,to,min,max){var options=this.options,rangeSize=to-from;return min>from&&(!defined(options.min)||min<options.min)?(from=min,to=from+rangeSize):to>max&&(!defined(options.max)||options.max<max)&&(to=max,from=to-rangeSize),from>=min&&max>=to?{min:from,max:to}:void 0}}),Note=BoxElement.extend({init:function(value,text,dataItem,category,series,options){var note=this;BoxElement.fn.init.call(note,options),note.value=value,note.text=text,note.dataItem=dataItem,note.category=category,note.series=series,note.render()},options:{icon:{visible:!0,type:CIRCLE},label:{position:INSIDE,visible:!0,align:CENTER,vAlign:CENTER},line:{visible:!0},visible:!0,position:TOP,zIndex:2},hide:function(){this.options.visible=!1},show:function(){this.options.visible=!0},render:function(){var marker,width,height,noteTemplate,note=this,options=note.options,label=options.label,text=note.text,icon=options.icon,size=icon.size,box=Box2D();options.visible&&(defined(label)&&label.visible&&(label.template?(noteTemplate=template(label.template),text=noteTemplate({dataItem:note.dataItem,category:note.category,value:note.value,text:text,series:note.series})):label.format&&(text=autoFormat(label.format,text)),note.label=new TextBox(text,deepExtend({},label)),label.position!==INSIDE||defined(size)||(icon.type===CIRCLE?size=math.max(note.label.box.width(),note.label.box.height()):(width=note.label.box.width(),height=note.label.box.height()),box.wrap(note.label.box))),icon.width=width||size||DEFAULT_ICON_SIZE,icon.height=height||size||DEFAULT_ICON_SIZE,marker=new ShapeElement(deepExtend({},icon)),note.marker=marker,note.append(marker),note.label&&note.append(note.label),marker.reflow(Box2D()),note.wrapperBox=box.wrap(marker.box))},reflow:function(targetBox){var lineStart,box,contentBox,note=this,options=note.options,center=targetBox.center(),wrapperBox=note.wrapperBox,length=options.line.length,position=options.position,label=note.label,marker=note.marker;options.visible&&(inArray(position,[LEFT,RIGHT])?position===LEFT?(contentBox=wrapperBox.alignTo(targetBox,position).translate(-length,targetBox.center().y-wrapperBox.center().y),options.line.visible&&(lineStart=[targetBox.x1,center.y],note.linePoints=[lineStart,[contentBox.x2,center.y]],box=contentBox.clone().wrapPoint(lineStart))):(contentBox=wrapperBox.alignTo(targetBox,position).translate(length,targetBox.center().y-wrapperBox.center().y),options.line.visible&&(lineStart=[targetBox.x2,center.y],note.linePoints=[lineStart,[contentBox.x1,center.y]],box=contentBox.clone().wrapPoint(lineStart))):position===BOTTOM?(contentBox=wrapperBox.alignTo(targetBox,position).translate(targetBox.center().x-wrapperBox.center().x,length),options.line.visible&&(lineStart=[center.x,targetBox.y2],note.linePoints=[lineStart,[center.x,contentBox.y1]],box=contentBox.clone().wrapPoint(lineStart))):(contentBox=wrapperBox.alignTo(targetBox,position).translate(targetBox.center().x-wrapperBox.center().x,-length),options.line.visible&&(lineStart=[center.x,targetBox.y1],note.linePoints=[lineStart,[center.x,contentBox.y2]],box=contentBox.clone().wrapPoint(lineStart))),marker&&marker.reflow(contentBox),label&&(label.reflow(contentBox),marker&&(options.label.position===OUTSIDE&&label.box.alignTo(marker.box,position),label.reflow(label.box))),note.contentBox=contentBox,note.targetBox=targetBox,note.box=box||contentBox)},createVisual:function(){BoxElement.fn.createVisual.call(this),this.options.visible&&this.createLine()},renderVisual:function(){var that=this,options=that.options,customVisual=options.visual;options.visible&&customVisual?(that.visual=customVisual({dataItem:that.dataItem,category:that.category,value:that.value,text:that.text,sender:that.getChart(),series:that.series,rect:that.targetBox.toRect(),options:{background:options.background,border:options.background,icon:options.icon,label:options.label,line:options.line,position:options.position,visible:options.visible},createVisual:function(){that.createVisual(),that.renderChildren();var defaultVisual=that.visual;return delete that.visual,defaultVisual}}),that.addVisual()):BoxElement.fn.renderVisual.call(that)},createLine:function(){var options=this.options.line;if(this.linePoints){var path=draw.Path.fromPoints(this.linePoints,{stroke:{color:options.color,width:options.width,dashType:options.dashType}});alignPathToPixel(path),this.visual.append(path)}},click:function(widget,e){var args=this.eventArgs(e);widget.trigger(NOTE_CLICK,args)||e.preventDefault()},hover:function(widget,e){var args=this.eventArgs(e);widget.trigger(NOTE_HOVER,args)||e.preventDefault()},leave:function(widget){widget._unsetActivePoint()},eventArgs:function(e){var note=this,options=note.options;return{element:$(e.target),text:defined(options.label)?options.label.text:"",dataItem:note.dataItem,series:note.series,value:note.value,category:note.category}}}),ShapeElement=BoxElement.extend({init:function(options,pointData){this.pointData=pointData,BoxElement.fn.init.call(this,options)},options:{type:CIRCLE,align:CENTER,vAlign:CENTER},getElement:function(){var element,marker=this,options=marker.options,type=options.type,rotation=options.rotation,box=marker.paddingBox,center=box.center(),halfWidth=box.width()/2;if(options.visible&&marker.hasBox()){var style=marker.visualStyle();return type===CIRCLE?element=new draw.Circle(new geom.Circle([round(box.x1+halfWidth,COORD_PRECISION),round(box.y1+box.height()/2,COORD_PRECISION)],halfWidth),style):type===TRIANGLE?element=draw.Path.fromPoints([[box.x1+halfWidth,box.y1],[box.x1,box.y2],[box.x2,box.y2]],style).close():type===CROSS?(element=new draw.MultiPath(style),element.moveTo(box.x1,box.y1).lineTo(box.x2,box.y2),element.moveTo(box.x1,box.y2).lineTo(box.x2,box.y1)):element=draw.Path.fromRect(box.toRect(),style),rotation&&element.transform(geom.transform().rotate(-rotation,[center.x,center.y])),element.options.zIndex=this.options.zIndex,element}},createElement:function(){var visual,that=this,customVisual=that.options.visual,pointData=that.pointData||{};return visual=customVisual?customVisual({value:pointData.value,dataItem:pointData.dataItem,sender:that.getChart(),series:pointData.series,category:pointData.category,rect:that.paddingBox.toRect(),options:that.visualOptions(),createVisual:function(){return that.getElement()}}):that.getElement()},visualOptions:function(){var options=this.options;return{background:options.background,border:options.border,margin:options.margin,padding:options.padding,type:options.type,size:options.width,visible:options.visible}},createVisual:function(){this.visual=this.createElement()}}),NumericAxis=Axis.extend({init:function(seriesMin,seriesMax,options){var axis=this,defaultOptions=axis.initDefaults(seriesMin,seriesMax,options);Axis.fn.init.call(axis,defaultOptions)},startValue:function(){return 0},options:{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:BLACK},labels:{format:"#.####################"},zIndex:1},initDefaults:function(seriesMin,seriesMax,options){var userSetLimits,axis=this,narrowRange=options.narrowRange,autoMin=axis.autoAxisMin(seriesMin,seriesMax,narrowRange),autoMax=axis.autoAxisMax(seriesMin,seriesMax,narrowRange),majorUnit=autoMajorUnit(autoMin,autoMax),autoOptions={majorUnit:majorUnit};return options.roundToMajorUnit!==!1&&(0>autoMin&&remainderClose(autoMin,majorUnit,1/3)&&(autoMin-=majorUnit),autoMax>0&&remainderClose(autoMax,majorUnit,1/3)&&(autoMax+=majorUnit)),autoOptions.min=floor(autoMin,majorUnit),autoOptions.max=ceil(autoMax,majorUnit),this.totalMin=defined(options.min)?math.min(autoOptions.min,options.min):autoOptions.min,this.totalMax=defined(options.max)?math.max(autoOptions.max,options.max):autoOptions.max,this.totalMajorUnit=majorUnit,options&&(userSetLimits=defined(options.min)||defined(options.max),userSetLimits&&options.min===options.max&&(options.min>0?options.min=0:options.max=1),options.majorUnit?(autoOptions.min=floor(autoOptions.min,options.majorUnit),autoOptions.max=ceil(autoOptions.max,options.majorUnit)):userSetLimits&&(options=deepExtend(autoOptions,options),autoOptions.majorUnit=autoMajorUnit(options.min,options.max))),autoOptions.minorUnit=(options.majorUnit||autoOptions.majorUnit)/5,deepExtend(autoOptions,options)},range:function(){var options=this.options;return{min:options.min,max:options.max}},autoAxisMax:function(min,max,narrow){var axisMax,diff;if(!min&&!max)return 1;if(0>=min&&0>=max){if(max=min==max?0:max,diff=math.abs((max-min)/max),narrow===!1||!narrow&&diff>ZERO_THRESHOLD)return 0;axisMax=math.min(0,max-(min-max)/2)}else min=min==max?0:min,axisMax=max;return axisMax},autoAxisMin:function(min,max,narrow){var axisMin,diff;if(!min&&!max)return 0;if(min>=0&&max>=0){if(min=min==max?0:min,diff=(max-min)/max,narrow===!1||!narrow&&diff>ZERO_THRESHOLD)return 0;axisMin=math.max(0,min-(max-min)/2)}else max=min==max?0:max,axisMin=min;return axisMin},getDivisions:function(stepValue){if(0===stepValue)return 1;var options=this.options,range=options.max-options.min;return math.floor(round(range/stepValue,COORD_PRECISION))+1},getTickPositions:function(unit,skipUnit){var i,axis=this,options=axis.options,vertical=options.vertical,reverse=options.reverse,lineBox=axis.lineBox(),lineSize=vertical?lineBox.height():lineBox.width(),range=options.max-options.min,scale=lineSize/range,step=unit*scale,skipStep=0,divisions=axis.getDivisions(unit),dir=(vertical?-1:1)*(reverse?-1:1),startEdge=1===dir?1:2,pos=lineBox[(vertical?Y:X)+startEdge],positions=[];for(skipUnit&&(skipStep=skipUnit/unit),i=0;divisions>i;i++)i%skipStep!==0&&positions.push(round(pos,COORD_PRECISION)),pos+=step*dir;return positions},getMajorTickPositions:function(){var axis=this;return axis.getTickPositions(axis.options.majorUnit)},getMinorTickPositions:function(){var axis=this;return axis.getTickPositions(axis.options.minorUnit)},getSlot:function(a,b,limit){var p1,p2,axis=this,options=axis.options,reverse=options.reverse,vertical=options.vertical,valueAxis=vertical?Y:X,lineBox=axis.lineBox(),lineStart=lineBox[valueAxis+(reverse?2:1)],lineSize=vertical?lineBox.height():lineBox.width(),dir=reverse?-1:1,step=dir*(lineSize/(options.max-options.min)),slotBox=new Box2D(lineBox.x1,lineBox.y1,lineBox.x1,lineBox.y1);return defined(a)||(a=b||0),defined(b)||(b=a||0),limit&&(a=math.max(math.min(a,options.max),options.min),b=math.max(math.min(b,options.max),options.min)),vertical?(p1=options.max-math.max(a,b),p2=options.max-math.min(a,b)):(p1=math.min(a,b)-options.min,p2=math.max(a,b)-options.min),slotBox[valueAxis+1]=math.max(math.min(lineStart+step*(reverse?p2:p1),COORDINATE_LIMIT),-COORDINATE_LIMIT),slotBox[valueAxis+2]=math.max(math.min(lineStart+step*(reverse?p1:p2),COORDINATE_LIMIT),-COORDINATE_LIMIT),slotBox},getValue:function(point){var value,axis=this,options=axis.options,reverse=options.reverse,vertical=options.vertical,max=1*options.max,min=1*options.min,valueAxis=vertical?Y:X,lineBox=axis.lineBox(),lineStart=lineBox[valueAxis+(reverse?2:1)],lineSize=vertical?lineBox.height():lineBox.width(),dir=reverse?-1:1,offset=dir*(point[valueAxis]-lineStart),step=(max-min)/lineSize,valueOffset=offset*step;return 0>offset||offset>lineSize?null:(value=vertical?max-valueOffset:min+valueOffset,round(value,DEFAULT_PRECISION))},translateRange:function(delta){var axis=this,options=axis.options,lineBox=axis.lineBox(),vertical=options.vertical,reverse=options.reverse,size=vertical?lineBox.height():lineBox.width(),range=options.max-options.min,scale=size/range,offset=round(delta/scale,DEFAULT_PRECISION);return!vertical&&!reverse||vertical&&reverse||(offset=-offset),{min:options.min+offset,max:options.max+offset}},scaleRange:function(delta){var axis=this,options=axis.options,offset=-delta*options.majorUnit;return{min:options.min-offset,max:options.max+offset}},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(index,labelOptions){var axis=this,options=axis.options,value=round(options.min+index*options.majorUnit,DEFAULT_PRECISION),text=axis.axisLabelText(value,null,labelOptions);return new AxisLabel(value,text,index,null,labelOptions)},shouldRenderNote:function(value){var range=this.range();return range.min<=value&&value<=range.max},pan:function(delta){var range=this.translateRange(delta);return this.limitRange(range.min,range.max,this.totalMin,this.totalMax)},pointsRange:function(start,end){var startValue=this.getValue(start),endValue=this.getValue(end),min=math.min(startValue,endValue),max=math.max(startValue,endValue);return{min:min,max:max}},zoomRange:function(delta){var newRange=this.scaleRange(delta),totalMax=this.totalMax,totalMin=this.totalMin,min=util.limitValue(newRange.min,totalMin,totalMax),max=util.limitValue(newRange.max,totalMin,totalMax),optionsRange=this.options.max-this.options.min;return optionsRange<this.totalMajorUnit||max-min>=this.totalMajorUnit?{min:min,max:max}:void 0}}),LogarithmicAxis=Axis.extend({init:function(seriesMin,seriesMax,options){this.options=this._initOptions(seriesMin,seriesMax,options),Axis.fn.init.call(this,options)},startValue:function(){return this.options.min},options:{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:BLACK},zIndex:1},getSlot:function(a,b,limit){var p1,p2,axis=this,options=axis.options,reverse=options.reverse,vertical=options.vertical,valueAxis=vertical?Y:X,lineBox=axis.lineBox(),lineStart=lineBox[valueAxis+(reverse?2:1)],lineSize=vertical?lineBox.height():lineBox.width(),dir=reverse?-1:1,base=options.majorUnit,logMin=axis.logMin,logMax=axis.logMax,step=dir*(lineSize/(logMax-logMin)),slotBox=new Box2D(lineBox.x1,lineBox.y1,lineBox.x1,lineBox.y1);return defined(a)||(a=b||1),defined(b)||(b=a||1),0>=a||0>=b?void 0:(limit&&(a=math.max(math.min(a,options.max),options.min),b=math.max(math.min(b,options.max),options.min)),a=log(a,base),b=log(b,base),vertical?(p1=logMax-math.max(a,b),p2=logMax-math.min(a,b)):(p1=math.min(a,b)-logMin,p2=math.max(a,b)-logMin),slotBox[valueAxis+1]=lineStart+step*(reverse?p2:p1),slotBox[valueAxis+2]=lineStart+step*(reverse?p1:p2),slotBox)},getValue:function(point){var value,axis=this,options=axis.options,reverse=options.reverse,vertical=options.vertical,lineBox=axis.lineBox(),base=options.majorUnit,logMin=axis.logMin,logMax=axis.logMax,dir=vertical===reverse?1:-1,startEdge=1===dir?1:2,lineSize=vertical?lineBox.height():lineBox.width(),step=(logMax-logMin)/lineSize,valueAxis=vertical?Y:X,lineStart=lineBox[valueAxis+startEdge],offset=dir*(point[valueAxis]-lineStart),valueOffset=offset*step;return 0>offset||offset>lineSize?null:(value=logMin+valueOffset,round(math.pow(base,value),DEFAULT_PRECISION))},range:function(){var options=this.options;return{min:options.min,max:options.max}},scaleRange:function(delta){var axis=this,options=axis.options,base=options.majorUnit,offset=-delta;return{min:math.pow(base,axis.logMin-offset),max:math.pow(base,axis.logMax+offset)}},translateRange:function(delta){var axis=this,options=axis.options,base=options.majorUnit,lineBox=axis.lineBox(),vertical=options.vertical,reverse=options.reverse,size=vertical?lineBox.height():lineBox.width(),scale=size/(axis.logMax-axis.logMin),offset=round(delta/scale,DEFAULT_PRECISION);return!vertical&&!reverse||vertical&&reverse||(offset=-offset),{min:math.pow(base,axis.logMin+offset),max:math.pow(base,axis.logMax+offset)}},labelsCount:function(){var axis=this,floorMax=math.floor(axis.logMax),count=math.floor(floorMax-axis.logMin)+1;return count},getMajorTickPositions:function(){var axis=this,ticks=[];return axis.traverseMajorTicksPositions(function(position){ticks.push(position)},{step:1,skip:0}),ticks},createTicks:function(lineGroup){function render(tickPosition,tickOptions){tickLineOptions.tickX=mirror?lineBox.x2:lineBox.x2-tickOptions.size,tickLineOptions.tickY=mirror?lineBox.y1-tickOptions.size:lineBox.y1,tickLineOptions.position=tickPosition,lineGroup.append(createAxisTick(tickLineOptions,tickOptions))}var axis=this,ticks=[],options=axis.options,lineBox=axis.lineBox(),mirror=options.labels.mirror,majorTicks=options.majorTicks,minorTicks=options.minorTicks,tickLineOptions={
vertical:options.vertical};return majorTicks.visible&&axis.traverseMajorTicksPositions(render,majorTicks),minorTicks.visible&&axis.traverseMinorTicksPositions(render,minorTicks),ticks},createGridLines:function(altAxis){function render(tickPosition,gridLine){inArray(tickPosition,majorTicks)||(lineOptions.position=tickPosition,container.append(createAxisGridLine(lineOptions,gridLine)),majorTicks.push(tickPosition))}var axis=this,options=axis.options,majorGridLines=options.majorGridLines,minorGridLines=options.minorGridLines,vertical=options.vertical,lineBox=altAxis.lineBox(),lineOptions={lineStart:lineBox[vertical?"x1":"y1"],lineEnd:lineBox[vertical?"x2":"y2"],vertical:vertical},majorTicks=[],container=this.gridLinesVisual();return majorGridLines.visible&&axis.traverseMajorTicksPositions(render,majorGridLines),minorGridLines.visible&&axis.traverseMinorTicksPositions(render,minorGridLines),container.children},traverseMajorTicksPositions:function(callback,tickOptions){var power,position,axis=this,lineOptions=axis._lineOptions(),lineStart=lineOptions.lineStart,step=lineOptions.step,logMin=axis.logMin,logMax=axis.logMax;for(power=math.ceil(logMin)+tickOptions.skip;logMax>=power;power+=tickOptions.step)position=round(lineStart+step*(power-logMin),DEFAULT_PRECISION),callback(position,tickOptions)},traverseMinorTicksPositions:function(callback,tickOptions){var power,value,position,minorOptions,axis=this,options=axis.options,lineOptions=axis._lineOptions(),lineStart=lineOptions.lineStart,lineStep=lineOptions.step,base=options.majorUnit,logMin=axis.logMin,logMax=axis.logMax,start=math.floor(logMin),max=options.max,min=options.min,minorUnit=options.minorUnit;for(power=start;logMax>power;power++){minorOptions=axis._minorIntervalOptions(power);for(var idx=tickOptions.skip;minorUnit>idx&&(value=minorOptions.value+idx*minorOptions.minorStep,!(value>max));idx+=tickOptions.step)value>=min&&(position=round(lineStart+lineStep*(log(value,base)-logMin),DEFAULT_PRECISION),callback(position,tickOptions))}},createAxisLabel:function(index,labelOptions){var axis=this,options=axis.options,power=math.ceil(axis.logMin+index),value=Math.pow(options.majorUnit,power),text=axis.axisLabelText(value,null,labelOptions);return new AxisLabel(value,text,index,null,labelOptions)},shouldRenderNote:function(value){var range=this.range();return range.min<=value&&value<=range.max},_throwNegativeValuesError:function(){throw new Error("Non positive values cannot be used for a logarithmic axis")},_initOptions:function(seriesMin,seriesMax,options){var logMaxRemainder,axis=this,axisOptions=deepExtend({},axis.options,{min:seriesMin,max:seriesMax},options),min=axisOptions.min,max=axisOptions.max,base=axisOptions.majorUnit;return axisOptions.axisCrossingValue<=0&&axis._throwNegativeValuesError(),defined(options.max)?options.max<=0&&axis._throwNegativeValuesError():(logMaxRemainder=round(log(max,base),DEFAULT_PRECISION)%1,max=0>=max?base:0!==logMaxRemainder&&(.3>logMaxRemainder||logMaxRemainder>.9)?math.pow(base,log(max,base)+.2):math.pow(base,math.ceil(log(max,base)))),defined(options.min)?options.min<=0&&axis._throwNegativeValuesError():0>=min?min=1>=max?math.pow(base,-2):1:options.narrowRange||(min=math.pow(base,math.floor(log(min,base)))),axis.logMin=round(log(min,base),DEFAULT_PRECISION),axis.logMax=round(log(max,base),DEFAULT_PRECISION),axisOptions.max=max,axisOptions.min=min,axisOptions.minorUnit=options.minorUnit||round(base-1,DEFAULT_PRECISION),axisOptions},_minorIntervalOptions:function(power){var base=this.options.majorUnit,value=math.pow(base,power),nextValue=math.pow(base,power+1),difference=nextValue-value,minorStep=difference/this.options.minorUnit;return{value:value,minorStep:minorStep}},_lineOptions:function(){var axis=this,options=axis.options,reverse=options.reverse,vertical=options.vertical,valueAxis=vertical?Y:X,lineBox=axis.lineBox(),dir=vertical===reverse?1:-1,startEdge=1===dir?1:2,lineSize=vertical?lineBox.height():lineBox.width(),step=dir*(lineSize/(axis.logMax-axis.logMin)),lineStart=lineBox[valueAxis+startEdge];return{step:step,lineStart:lineStart,lineBox:lineBox}}});dataviz.Gradients={glass:{type:LINEAR,rotation:0,stops:[{offset:0,color:WHITE,opacity:0},{offset:.25,color:WHITE,opacity:.3},{offset:1,color:WHITE,opacity:0}]},sharpBevel:{type:RADIAL,stops:[{offset:0,color:WHITE,opacity:.55},{offset:.65,color:WHITE,opacity:0},{offset:.95,color:WHITE,opacity:.25}]},roundedBevel:{type:RADIAL,stops:[{offset:.33,color:WHITE,opacity:.06},{offset:.83,color:WHITE,opacity:.2},{offset:.95,color:WHITE,opacity:0}]},roundedGlass:{type:RADIAL,supportVML:!1,stops:[{offset:0,color:WHITE,opacity:0},{offset:.5,color:WHITE,opacity:.3},{offset:.99,color:WHITE,opacity:0}]},sharpGlass:{type:RADIAL,supportVML:!1,stops:[{offset:0,color:WHITE,opacity:.2},{offset:.15,color:WHITE,opacity:.15},{offset:.17,color:WHITE,opacity:.35},{offset:.85,color:WHITE,opacity:.05},{offset:.87,color:WHITE,opacity:.15},{offset:.99,color:WHITE,opacity:0}]}};var ExportMixin={extend:function(proto,skipLegacy){if(!proto.exportVisual)throw new Error("Mixin target has no exportVisual method defined.");proto.exportSVG=this.exportSVG,proto.exportImage=this.exportImage,proto.exportPDF=this.exportPDF,skipLegacy||(proto.svg=this.svg,proto.imageDataURL=this.imageDataURL)},exportSVG:function(options){return draw.exportSVG(this.exportVisual(),options)},exportImage:function(options){return draw.exportImage(this.exportVisual(),options)},exportPDF:function(options){return draw.exportPDF(this.exportVisual(),options)},svg:function(){if(draw.svg.Surface)return draw.svg._exportGroup(this.exportVisual());throw new Error("SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface")},imageDataURL:function(){if(!kendo.support.canvas)return null;if(draw.canvas.Surface){var container=$("<div />").css({display:"none",width:this.element.width(),height:this.element.height()}).appendTo(document.body),surface=new draw.canvas.Surface(container);surface.draw(this.exportVisual());var image=surface._rootElement.toDataURL();return surface.destroy(),container.remove(),image}throw new Error("Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface")}},CurveProcessor=function(closed){this.closed=closed};CurveProcessor.prototype=CurveProcessor.fn={WEIGHT:.333,EXTREMUM_ALLOWED_DEVIATION:.01,process:function(dataPoints){var p0,p1,p2,controlPoints,initialControlPoint,lastControlPoint,tangent,that=this,closed=that.closed,points=dataPoints.slice(0),length=points.length,segments=[];if(length>2&&(that.removeDuplicates(0,points),length=points.length),2>length||2==length&&points[0].equals(points[1]))return segments;for(p0=points[0],p1=points[1],p2=points[2],segments.push(new draw.Segment(p0));p0.equals(points[length-1]);)closed=!0,points.pop(),length--;if(2==length)return tangent=that.tangent(p0,p1,X,Y),last(segments).controlOut(that.firstControlPoint(tangent,p0,p1,X,Y)),segments.push(new draw.Segment(p1,that.secondControlPoint(tangent,p0,p1,X,Y))),segments;closed?(p0=points[length-1],p1=points[0],p2=points[1],controlPoints=that.controlPoints(p0,p1,p2),initialControlPoint=controlPoints[1],lastControlPoint=controlPoints[0]):(tangent=that.tangent(p0,p1,X,Y),initialControlPoint=that.firstControlPoint(tangent,p0,p1,X,Y));for(var cp0=initialControlPoint,idx=0;length-3>=idx;idx++)if(that.removeDuplicates(idx,points),length=points.length,length>=idx+3){p0=points[idx],p1=points[idx+1],p2=points[idx+2],controlPoints=that.controlPoints(p0,p1,p2),last(segments).controlOut(cp0),cp0=controlPoints[1];var cp1=controlPoints[0];segments.push(new draw.Segment(p1,cp1))}return closed?(p0=points[length-2],p1=points[length-1],p2=points[0],controlPoints=that.controlPoints(p0,p1,p2),last(segments).controlOut(cp0),segments.push(new draw.Segment(p1,controlPoints[0])),last(segments).controlOut(controlPoints[1]),segments.push(new draw.Segment(p2,lastControlPoint))):(tangent=that.tangent(p1,p2,X,Y),last(segments).controlOut(cp0),segments.push(new draw.Segment(p2,that.secondControlPoint(tangent,p1,p2,X,Y)))),segments},removeDuplicates:function(idx,points){for(;points[idx].equals(points[idx+1])||points[idx+1].equals(points[idx+2]);)points.splice(idx+1,1)},invertAxis:function(p0,p1,p2){var fn,y2,that=this,invertAxis=!1;return p0.x===p1.x?invertAxis=!0:p1.x===p2.x?(p1.y<p2.y&&p0.y<=p1.y||p2.y<p1.y&&p1.y<=p0.y)&&(invertAxis=!0):(fn=that.lineFunction(p0,p1),y2=that.calculateFunction(fn,p2.x),p0.y<=p1.y&&p2.y<=y2||p1.y<=p0.y&&p2.y>=y2||(invertAxis=!0)),invertAxis},isLine:function(p0,p1,p2){var that=this,fn=that.lineFunction(p0,p1),y2=that.calculateFunction(fn,p2.x);return p0.x==p1.x&&p1.x==p2.x||round(y2,1)===round(p2.y,1)},lineFunction:function(p1,p2){var a=(p2.y-p1.y)/(p2.x-p1.x),b=p1.y-a*p1.x;return[b,a]},controlPoints:function(p0,p1,p2){var tangent,monotonic,firstControlPoint,secondControlPoint,that=this,xField=X,yField=Y,restrict=!1,switchOrientation=!1,allowedDeviation=that.EXTREMUM_ALLOWED_DEVIATION;if(that.isLine(p0,p1,p2))tangent=that.tangent(p0,p1,X,Y);else if(monotonic={x:that.isMonotonicByField(p0,p1,p2,X),y:that.isMonotonicByField(p0,p1,p2,Y)},monotonic.x&&monotonic.y)tangent=that.tangent(p0,p2,X,Y),restrict=!0;else if(that.invertAxis(p0,p1,p2)&&(xField=Y,yField=X),monotonic[xField])tangent=0;else{var sign;sign=p2[yField]<p0[yField]&&p0[yField]<=p1[yField]||p0[yField]<p2[yField]&&p1[yField]<=p0[yField]?that.sign((p2[yField]-p0[yField])*(p1[xField]-p0[xField])):-that.sign((p2[xField]-p0[xField])*(p1[yField]-p0[yField])),tangent=allowedDeviation*sign,switchOrientation=!0}if(secondControlPoint=that.secondControlPoint(tangent,p0,p1,xField,yField),switchOrientation){var oldXField=xField;xField=yField,yField=oldXField}return firstControlPoint=that.firstControlPoint(tangent,p1,p2,xField,yField),restrict&&(that.restrictControlPoint(p0,p1,secondControlPoint,tangent),that.restrictControlPoint(p1,p2,firstControlPoint,tangent)),[secondControlPoint,firstControlPoint]},sign:function(x){return 0>=x?-1:1},restrictControlPoint:function(p1,p2,cp,tangent){p1.y<p2.y?p2.y<cp.y?(cp.x=p1.x+(p2.y-p1.y)/tangent,cp.y=p2.y):cp.y<p1.y&&(cp.x=p2.x-(p2.y-p1.y)/tangent,cp.y=p1.y):cp.y<p2.y?(cp.x=p1.x-(p1.y-p2.y)/tangent,cp.y=p2.y):p1.y<cp.y&&(cp.x=p2.x+(p1.y-p2.y)/tangent,cp.y=p1.y)},tangent:function(p0,p1,xField,yField){var tangent,x=p1[xField]-p0[xField],y=p1[yField]-p0[yField];return tangent=0===x?0:y/x},isMonotonicByField:function(p0,p1,p2,field){return p2[field]>p1[field]&&p1[field]>p0[field]||p2[field]<p1[field]&&p1[field]<p0[field]},firstControlPoint:function(tangent,p0,p3,xField,yField){var that=this,t1=p0[xField],t2=p3[xField],distance=(t2-t1)*that.WEIGHT;return that.point(t1+distance,p0[yField]+distance*tangent,xField,yField)},secondControlPoint:function(tangent,p0,p3,xField,yField){var that=this,t1=p0[xField],t2=p3[xField],distance=(t2-t1)*that.WEIGHT;return that.point(t2-distance,p3[yField]-distance*tangent,xField,yField)},point:function(xValue,yValue,xField,yField){var controlPoint=new geom.Point;return controlPoint[xField]=xValue,controlPoint[yField]=yValue,controlPoint},calculateFunction:function(fn,x){for(var result=0,length=fn.length,i=0;length>i;i++)result+=Math.pow(x,i)*fn[i];return result}},decodeEntities._element=document.createElement("span"),deepExtend(kendo.dataviz,{AXIS_LABEL_CLICK:AXIS_LABEL_CLICK,COORD_PRECISION:COORD_PRECISION,DEFAULT_PRECISION:DEFAULT_PRECISION,DEFAULT_WIDTH:DEFAULT_WIDTH,DEFAULT_HEIGHT:DEFAULT_HEIGHT,DEFAULT_FONT:DEFAULT_FONT,INITIAL_ANIMATION_DURATION:INITIAL_ANIMATION_DURATION,NOTE_CLICK:NOTE_CLICK,NOTE_HOVER:NOTE_HOVER,CLIP:CLIP,Axis:Axis,AxisLabel:AxisLabel,Box2D:Box2D,BoxElement:BoxElement,ChartElement:ChartElement,CurveProcessor:CurveProcessor,ExportMixin:ExportMixin,FloatElement:FloatElement,LogarithmicAxis:LogarithmicAxis,Note:Note,NumericAxis:NumericAxis,Point2D:Point2D,Ring:Ring,RootElement:RootElement,Sector:Sector,ShapeBuilder:ShapeBuilder,ShapeElement:ShapeElement,Text:Text,TextBox:TextBox,Title:Title,alignPathToPixel:alignPathToPixel,autoFormat:autoFormat,autoMajorUnit:autoMajorUnit,boxDiff:boxDiff,dateComparer:dateComparer,decodeEntities:decodeEntities,getSpacing:getSpacing,inArray:inArray,interpolateValue:interpolateValue,mwDelta:mwDelta,rectToBox:rectToBox,rotatePoint:rotatePoint,round:round,ceil:ceil,floor:floor})}(window.kendo.jQuery)}()}(),function(){!function(){!function($){function fuse(arr1,arr2){return $.map(arr1,function(item,index){return[[item,arr2[index]]]})}var kendo=window.kendo,ui=kendo.dataviz.ui,deepExtend=kendo.deepExtend,BAR_GAP=1.5,BAR_SPACING=.4,BLACK="#000",SANS="Arial,Helvetica,sans-serif",SANS11="11px "+SANS,SANS12="12px "+SANS,SANS16="16px "+SANS,WHITE="#fff",chartBaseTheme={title:{font:SANS16},legend:{labels:{font:SANS12}},seriesDefaults:{visible:!0,labels:{font:SANS11},donut:{margin:1},line:{width:2},vericalLine:{width:2},scatterLine:{width:1},area:{opacity:.4,markers:{visible:!1,size:6},highlight:{markers:{border:{color:"#fff",opacity:1,width:1}}},line:{opacity:1,width:0}},verticalArea:{opacity:.4,markers:{visible:!1,size:6},line:{opacity:1,width:0}},radarLine:{width:2,markers:{visible:!1}},radarArea:{opacity:.5,markers:{visible:!1,size:6},line:{opacity:1,width:0}},candlestick:{line:{width:1,color:BLACK},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:WHITE,highlight:{line:{width:2},border:{width:2,opacity:1}}},ohlc:{line:{width:1},gap:1,spacing:.3,highlight:{line:{width:3,opacity:1}}},bubble:{opacity:.6,border:{width:0},labels:{background:"transparent"}},bar:{gap:BAR_GAP,spacing:BAR_SPACING},column:{gap:BAR_GAP,spacing:BAR_SPACING},rangeColumn:{gap:BAR_GAP,spacing:BAR_SPACING},rangeBar:{gap:BAR_GAP,spacing:BAR_SPACING},waterfall:{gap:.5,spacing:BAR_SPACING,line:{width:1,color:BLACK}},horizontalWaterfall:{gap:.5,spacing:BAR_SPACING,line:{width:1,color:BLACK}},bullet:{gap:BAR_GAP,spacing:BAR_SPACING,target:{color:"#ff0000"}},verticalBullet:{gap:BAR_GAP,spacing:BAR_SPACING,target:{color:"#ff0000"}},boxPlot:{outliersField:"",meanField:"",whiskers:{width:1,color:BLACK},mean:{width:1,color:BLACK},median:{width:1,color:BLACK},border:{width:1,_brightness:.8},gap:1,spacing:.3,downColor:WHITE,highlight:{whiskers:{width:2},border:{width:2,opacity:1}}},funnel:{labels:{color:"",background:""}},notes:{icon:{border:{width:1}},label:{padding:3,font:SANS12},line:{length:10,width:1},visible:!0}},categoryAxis:{majorGridLines:{visible:!0}},axisDefaults:{labels:{font:SANS12},title:{font:SANS16,margin:5},crosshair:{tooltip:{font:SANS12}},notes:{icon:{size:7,border:{width:1}},label:{padding:3,font:SANS12},line:{length:10,width:1},visible:!0}},tooltip:{font:SANS12},navigator:{pane:{height:90,margin:{top:10}}}},gaugeBaseTheme={scale:{labels:{font:SANS12}}},diagramBaseTheme={shapeDefaults:{hover:{opacity:.2},stroke:{width:0}},editable:{resize:{handles:{width:7,height:7}}},selectable:{stroke:{width:1,dashType:"dot"}},connectionDefaults:{stroke:{width:2},selection:{handles:{width:8,height:8}},editable:{tools:["edit","delete"]}}},themes=ui.themes,registerTheme=ui.registerTheme=function(themeName,options){var result={};result.chart=deepExtend({},chartBaseTheme,options.chart),result.gauge=deepExtend({},gaugeBaseTheme,options.gauge),result.diagram=deepExtend({},diagramBaseTheme,options.diagram),result.treeMap=deepExtend({},options.treeMap);var defaults=result.chart.seriesDefaults;defaults.verticalLine=deepExtend({},defaults.line),defaults.verticalArea=deepExtend({},defaults.area),defaults.polarArea=deepExtend({},defaults.radarArea),defaults.polarLine=deepExtend({},defaults.radarLine),themes[themeName]=result};registerTheme("black",{chart:{title:{color:WHITE},legend:{labels:{color:WHITE},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:WHITE},errorBars:{color:WHITE},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:WHITE},line:{color:"#8e8e8e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#3d3d3d"}},scatter:{markers:{background:"#3d3d3d"}},scatterLine:{markers:{background:"#3d3d3d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},candlestick:{downColor:"#555",line:{color:WHITE},border:{_brightness:1.5,opacity:1},highlight:{border:{color:WHITE,opacity:.2}}},ohlc:{line:{color:WHITE}}},chartArea:{background:"#3d3d3d"},seriesColors:["#0081da","#3aafff","#99c900","#ffeb3d","#b20753","#ff4195"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:WHITE},majorGridLines:{color:"#545454"},minorGridLines:{color:"#454545"},title:{color:WHITE},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"#3b3b3b",border:{color:"#8e8e8e"}},label:{color:WHITE},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#0070e4"},scale:{rangePlaceholderColor:"#1d1d1d",labels:{color:WHITE},minorTicks:{color:WHITE},majorTicks:{color:WHITE},line:{color:WHITE}}},diagram:{shapeDefaults:{fill:{color:"#0066cc"},connectorDefaults:{fill:{color:WHITE},stroke:{color:"#384049"},hover:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}},content:{color:WHITE}},editable:{resize:{handles:{fill:{color:"#3d3d3d"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:WHITE}}}},rotate:{thumb:{stroke:{color:WHITE},fill:{color:WHITE}}}},selectable:{stroke:{color:WHITE}},connectionDefaults:{stroke:{color:WHITE},content:{color:WHITE},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0081da","#314b5c"],["#3aafff","#3c5464"],["#99c900","#4f5931"],["#ffeb3d","#64603d"],["#b20753","#543241"],["#ff4195","#643e4f"]]}}),registerTheme("blueopal",{chart:{title:{color:"#293135"},legend:{labels:{color:"#293135"},inactiveItems:{labels:{color:"#27A5BA"},markers:{color:"#27A5BA"}}},seriesDefaults:{labels:{color:BLACK,background:WHITE,opacity:.5},errorBars:{color:"#293135"},candlestick:{downColor:"#c4d0d5",line:{color:"#9aabb2"}},waterfall:{line:{color:"#9aabb2"}},horizontalWaterfall:{line:{color:"#9aabb2"}},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}},seriesColors:["#0069a5","#0098ee","#7bd2f6","#ffb800","#ff8517","#e34a00"],axisDefaults:{line:{color:"#9aabb2"},labels:{color:"#293135"},majorGridLines:{color:"#c4d0d5"},minorGridLines:{color:"#edf1f2"},title:{color:"#293135"},crosshair:{color:"#9aabb2"},notes:{icon:{background:"transparent",border:{color:"#9aabb2"}},label:{color:"#293135"},line:{color:"#9aabb2"}}}},gauge:{pointer:{color:"#005c83"},scale:{rangePlaceholderColor:"#daecf4",labels:{color:"#293135"},minorTicks:{color:"#293135"},majorTicks:{color:"#293135"},line:{color:"#293135"}}},diagram:{shapeDefaults:{fill:{color:"#7ec6e3"},connectorDefaults:{fill:{color:"#003f59"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#003f59"}}},content:{color:"#293135"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#003f59"},hover:{fill:{color:"#003f59"},stroke:{color:"#003f59"}}}},rotate:{thumb:{stroke:{color:"#003f59"},fill:{color:"#003f59"}}}},selectable:{stroke:{color:"#003f59"}},connectionDefaults:{stroke:{color:"#003f59"},content:{color:"#293135"},selection:{handles:{fill:{color:"#3d3d3d"},stroke:{color:"#efefef"}}}}},treeMap:{colors:[["#0069a5","#bad7e7"],["#0098ee","#b9e0f5"],["#7bd2f6","#ceeaf6"],["#ffb800","#e6e3c4"],["#ff8517","#e4d8c8"],["#e34a00","#ddccc2"]]}}),registerTheme("highcontrast",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#66465B"},markers:{color:"#66465B"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}},pie:{overlay:{gradient:"sharpGlass"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#2c232b"}},scatter:{markers:{background:"#2c232b"}},scatterLine:{markers:{background:"#2c232b"}},area:{opacity:.5},waterfall:{line:{color:"#ffffff"}},horizontalWaterfall:{line:{color:"#ffffff"}},candlestick:{downColor:"#664e62",line:{color:"#ffffff"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#ffffff",opacity:1}}},ohlc:{line:{color:"#ffffff"}}},chartArea:{background:"#2c232b"},seriesColors:["#a7008f","#ffb800","#3aafff","#99c900","#b20753","#ff4195"],axisDefaults:{line:{color:"#ffffff"},labels:{color:"#ffffff"},majorGridLines:{color:"#664e62"},minorGridLines:{color:"#4f394b"},title:{color:"#ffffff"},crosshair:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#ffffff"}},label:{color:"#ffffff"},line:{color:"#ffffff"}}}},gauge:{pointer:{color:"#a7008f"},scale:{rangePlaceholderColor:"#2c232b",labels:{color:"#ffffff"},minorTicks:{color:"#2c232b"},majorTicks:{color:"#664e62"},line:{color:"#ffffff"}}},diagram:{shapeDefaults:{fill:{color:"#a7018f"},connectorDefaults:{fill:{color:WHITE},stroke:{color:"#2c232b"},hover:{fill:{color:"#2c232b"},stroke:{color:WHITE}}},content:{color:WHITE}},editable:{resize:{handles:{fill:{color:"#2c232b"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:WHITE}}}},rotate:{thumb:{stroke:{color:WHITE},fill:{color:WHITE}}}},selectable:{stroke:{color:WHITE}},connectionDefaults:{stroke:{color:WHITE},content:{color:WHITE},selection:{handles:{fill:{color:"#2c232b"},stroke:{color:WHITE}}}}},treeMap:{colors:[["#a7008f","#451c3f"],["#ffb800","#564122"],["#3aafff","#2f3f55"],["#99c900","#424422"],["#b20753","#471d33"],["#ff4195","#562940"]]}}),registerTheme("default",{chart:{title:{color:"#8e8e8e"},legend:{labels:{color:"#232323"},inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}},seriesDefaults:{labels:{color:BLACK,background:WHITE,opacity:.5},errorBars:{color:"#232323"},candlestick:{downColor:"#dedede",line:{color:"#8d8d8d"}},waterfall:{line:{color:"#8e8e8e"}},horizontalWaterfall:{line:{color:"#8e8e8e"}},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}},seriesColors:["#ff6800","#a0a700","#ff8d00","#678900","#ffb53c","#396000"],axisDefaults:{line:{color:"#8e8e8e"},labels:{color:"#232323"},minorGridLines:{color:"#f0f0f0"},majorGridLines:{color:"#dfdfdf"},title:{color:"#232323"},crosshair:{color:"#8e8e8e"},notes:{icon:{background:"transparent",border:{color:"#8e8e8e"}},label:{color:"#232323"},line:{color:"#8e8e8e"}}}},gauge:{pointer:{color:"#ea7001"},scale:{rangePlaceholderColor:"#dedede",labels:{color:"#2e2e2e"},minorTicks:{color:"#2e2e2e"},majorTicks:{color:"#2e2e2e"},line:{color:"#2e2e2e"}}},diagram:{shapeDefaults:{fill:{color:"#e15613"},connectorDefaults:{fill:{color:"#282828"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#282828"}}},content:{color:"#2e2e2e"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#282828"},hover:{fill:{color:"#282828"},stroke:{color:"#282828"}}}},rotate:{thumb:{stroke:{color:"#282828"},fill:{color:"#282828"}}}},selectable:{stroke:{color:"#a7018f"}},connectionDefaults:{stroke:{color:"#282828"},content:{color:"#2e2e2e"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#282828"}}}}},treeMap:{colors:[["#ff6800","#edcfba"],["#a0a700","#dadcba"],["#ff8d00","#edd7ba"],["#678900","#cfd6ba"],["#ffb53c","#eddfc6"],["#396000","#c6ceba"]]}}),registerTheme("silver",{chart:{title:{color:"#4e5968"},legend:{labels:{color:"#4e5968"},inactiveItems:{labels:{color:"#B1BCC8"},markers:{color:"#B1BCC8"}}},seriesDefaults:{labels:{color:"#293135",background:"#eaeaec",opacity:.5},errorBars:{color:"#4e5968"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}},line:{markers:{background:"#eaeaec"}},scatter:{markers:{background:"#eaeaec"}},scatterLine:{markers:{background:"#eaeaec"}},pie:{connectors:{color:"#A6B1C0"}},donut:{connectors:{color:"#A6B1C0"}},waterfall:{line:{color:"#a6b1c0"}},horizontalWaterfall:{line:{color:"#a6b1c0"}},candlestick:{downColor:"#a6afbe"}},chartArea:{background:"#eaeaec"},seriesColors:["#007bc3","#76b800","#ffae00","#ef4c00","#a419b7","#430B62"],axisDefaults:{line:{color:"#a6b1c0"},labels:{color:"#4e5968"},majorGridLines:{color:"#dcdcdf"},minorGridLines:{color:"#eeeeef"},title:{color:"#4e5968"},crosshair:{color:"#a6b1c0"},notes:{icon:{background:"transparent",border:{color:"#4e5968"}},label:{color:"#4e5968"},line:{color:"#4e5968"}}}},gauge:{pointer:{color:"#0879c0"},scale:{rangePlaceholderColor:"#f3f3f4",labels:{color:"#515967"},minorTicks:{color:"#515967"},majorTicks:{color:"#515967"},line:{color:"#515967"}}},diagram:{shapeDefaults:{fill:{color:"#1c82c2"},connectorDefaults:{fill:{color:"#515967"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#282828"}}},content:{color:"#515967"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#515967"},hover:{fill:{color:"#515967"},stroke:{color:"#515967"}}}},rotate:{thumb:{stroke:{color:"#515967"},fill:{color:"#515967"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#515967"},content:{color:"#515967"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#515967"}}}}},treeMap:{colors:[["#007bc3","#c2dbea"],["#76b800","#dae7c3"],["#ffae00","#f5e5c3"],["#ef4c00","#f2d2c3"],["#a419b7","#e3c7e8"],["#430b62","#d0c5d7"]]}}),registerTheme("metro",{chart:{title:{color:"#777777"},legend:{labels:{color:"#777777"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:BLACK},errorBars:{color:"#777777"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},waterfall:{line:{color:"#c7c7c7"}},horizontalWaterfall:{line:{color:"#c7c7c7"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#8ebc00","#309b46","#25a0da","#ff6900","#e61e26","#d8e404","#16aba9","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#c7c7c7"},labels:{color:"#777777"},minorGridLines:{color:"#c7c7c7"},majorGridLines:{color:"#c7c7c7"},title:{color:"#777777"},crosshair:{color:"#c7c7c7"},notes:{icon:{background:"transparent",border:{color:"#777777"}},label:{color:"#777777"},line:{color:"#777777"}}}},gauge:{pointer:{color:"#8ebc00"},scale:{rangePlaceholderColor:"#e6e6e6",labels:{color:"#777"},minorTicks:{color:"#777"},majorTicks:{color:"#777"},line:{color:"#777"}}},diagram:{shapeDefaults:{fill:{color:"#8ebc00"},connectorDefaults:{fill:{color:BLACK},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:BLACK}}},content:{color:"#777"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:"#787878"},fill:{color:"#787878"}}}},selectable:{stroke:{color:"#515967"}},connectionDefaults:{stroke:{color:"#787878"},content:{color:"#777"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#787878"}}}}},treeMap:{colors:[["#8ebc00","#e8f2cc"],["#309b46","#d6ebda"],["#25a0da","#d3ecf8"],["#ff6900","#ffe1cc"],["#e61e26","#fad2d4"],["#d8e404","#f7facd"],["#16aba9","#d0eeee"],["#7e51a1","#e5dcec"],["#313131","#d6d6d6"],["#ed1691","#fbd0e9"]]}}),registerTheme("metroblack",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#797979"},markers:{color:"#797979"}}},seriesDefaults:{border:{_brightness:1},labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}},line:{markers:{background:"#0e0e0e"}},bubble:{opacity:.6},scatter:{markers:{background:"#0e0e0e"}},scatterLine:{markers:{background:"#0e0e0e"}},candlestick:{downColor:"#828282",line:{color:"#ffffff"}},waterfall:{line:{color:"#cecece"}},horizontalWaterfall:{line:{color:"#cecece"}},overlay:{gradient:"none"}},chartArea:{background:"#0e0e0e"},seriesColors:["#00aba9","#309b46","#8ebc00","#ff6900","#e61e26","#d8e404","#25a0da","#7e51a1","#313131","#ed1691"],axisDefaults:{line:{color:"#cecece"},labels:{color:"#ffffff"},minorGridLines:{color:"#2d2d2d"},majorGridLines:{color:"#333333"},title:{color:"#ffffff"},crosshair:{color:"#cecece"},notes:{icon:{background:"transparent",border:{color:"#cecece"}},label:{color:"#ffffff"},line:{color:"#cecece"}}}},gauge:{pointer:{color:"#00aba9"},scale:{rangePlaceholderColor:"#2d2d2d",labels:{color:"#ffffff"},minorTicks:{color:"#333333"},majorTicks:{color:"#cecece"},line:{color:"#cecece"}}},diagram:{shapeDefaults:{fill:{color:"#00aba9"},connectorDefaults:{fill:{color:WHITE},stroke:{color:"#0e0e0e"},hover:{fill:{color:"#0e0e0e"},stroke:{color:WHITE}}},content:{color:WHITE}},editable:{resize:{handles:{fill:{color:"#0e0e0e"},stroke:{color:"#787878"},hover:{fill:{color:"#787878"},stroke:{color:"#787878"}}}},rotate:{thumb:{stroke:{color:WHITE},fill:{color:WHITE}}}},selectable:{stroke:{color:"#787878"}},connectionDefaults:{stroke:{color:WHITE},content:{color:WHITE},selection:{handles:{fill:{color:"#0e0e0e"},stroke:{color:WHITE}}}}},treeMap:{colors:[["#00aba9","#0b2d2d"],["#309b46","#152a19"],["#8ebc00","#28310b"],["#ff6900","#3e200b"],["#e61e26","#391113"],["#d8e404","#36390c"],["#25a0da","#132b37"],["#7e51a1","#241b2b"],["#313131","#151515"],["#ed1691","#3b1028"]]}}),registerTheme("moonlight",{chart:{title:{color:"#ffffff"},legend:{labels:{color:"#ffffff"},inactiveItems:{labels:{color:"#A1A7AB"},markers:{color:"#A1A7AB"}}},seriesDefaults:{labels:{color:"#ffffff"},errorBars:{color:"#ffffff"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#212a33"}},bubble:{opacity:.6},scatter:{markers:{background:"#212a33"}},scatterLine:{markers:{background:"#212a33"}},area:{opacity:.3},candlestick:{downColor:"#757d87",line:{color:"#ea9d06"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:WHITE,opacity:.2}}},waterfall:{line:{color:"#8c909e"}},horizontalWaterfall:{line:{color:"#8c909e"}},ohlc:{line:{color:"#ea9d06"}}},chartArea:{background:"#212a33"},seriesColors:["#ffca08","#ff710f","#ed2e24","#ff9f03","#e13c02","#a00201"],axisDefaults:{line:{color:"#8c909e"},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},labels:{color:"#ffffff"},majorGridLines:{color:"#3e424d"},minorGridLines:{color:"#2f3640"},title:{color:"#ffffff"},crosshair:{color:"#8c909e"},notes:{icon:{background:"transparent",border:{color:"#8c909e"}},label:{color:"#ffffff"},line:{color:"#8c909e"}}}},gauge:{pointer:{color:"#f4af03"},scale:{rangePlaceholderColor:"#2f3640",labels:{color:WHITE},minorTicks:{color:"#8c909e"},majorTicks:{color:"#8c909e"},line:{color:"#8c909e"}}},diagram:{shapeDefaults:{fill:{color:"#f3ae03"},connectorDefaults:{fill:{color:WHITE},stroke:{color:"#414550"},hover:{fill:{color:"#414550"},stroke:{color:WHITE}}},content:{color:WHITE}},editable:{resize:{handles:{fill:{color:"#414550"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:WHITE}}}},rotate:{thumb:{stroke:{color:WHITE},fill:{color:WHITE}}}},selectable:{stroke:{color:WHITE}},connectionDefaults:{stroke:{color:WHITE},content:{color:WHITE},selection:{handles:{fill:{color:"#414550"},stroke:{color:WHITE}}}}},treeMap:{colors:[["#ffca08","#4e4b2b"],["#ff710f","#4e392d"],["#ed2e24","#4b2c31"],["#ff9f03","#4e422a"],["#e13c02","#482e2a"],["#a00201","#3b232a"]]}}),registerTheme("uniform",{chart:{title:{color:"#686868"},legend:{labels:{color:"#686868"},inactiveItems:{labels:{color:"#B6B6B6"},markers:{color:"#B6B6B6"}}},seriesDefaults:{labels:{color:"#686868"},errorBars:{color:"#686868"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}},pie:{overlay:{gradient:"sharpBevel"}},donut:{overlay:{gradient:"sharpGlass"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.3},candlestick:{downColor:"#cccccc",line:{color:"#cccccc"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#cccccc",opacity:.2}}},waterfall:{line:{color:"#9e9e9e"}},horizontalWaterfall:{
line:{color:"#9e9e9e"}},ohlc:{line:{color:"#cccccc"}}},chartArea:{background:"#ffffff"},seriesColors:["#527aa3","#6f91b3","#8ca7c2","#a8bdd1","#c5d3e0","#e2e9f0"],axisDefaults:{line:{color:"#9e9e9e"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},labels:{color:"#686868"},majorGridLines:{color:"#dadada"},minorGridLines:{color:"#e7e7e7"},title:{color:"#686868"},crosshair:{color:"#9e9e9e"},notes:{icon:{background:"transparent",border:{color:"#9e9e9e"}},label:{color:"#686868"},line:{color:"#9e9e9e"}}}},gauge:{pointer:{color:"#527aa3"},scale:{rangePlaceholderColor:"#e7e7e7",labels:{color:"#686868"},minorTicks:{color:"#aaaaaa"},majorTicks:{color:"#888888"},line:{color:"#9e9e9e"}}},diagram:{shapeDefaults:{fill:{color:"#d1d1d1"},connectorDefaults:{fill:{color:"#686868"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#686868"}}},content:{color:"#686868"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#686868"},hover:{fill:{color:"#686868"},stroke:{color:"#686868"}}}},rotate:{thumb:{stroke:{color:"#686868"},fill:{color:"#686868"}}}},selectable:{stroke:{color:"#686868"}},connectionDefaults:{stroke:{color:"#686868"},content:{color:"#686868"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#686868"}}}}},treeMap:{colors:[["#527aa3","#d0d8e1"],["#6f91b3","#d6dde4"],["#8ca7c2","#dce1e7"],["#a8bdd1","#e2e6ea"],["#c5d3e0","#e7eaed"],["#e2e9f0","#edeff0"]]}}),registerTheme("bootstrap",{chart:{title:{color:"#333333"},legend:{labels:{color:"#333333"},inactiveItems:{labels:{color:"#999999"},markers:{color:"#9A9A9A"}}},seriesDefaults:{labels:{color:"#333333"},overlay:{gradient:"none"},errorBars:{color:"#343434"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#333333"},line:{color:"#000000"}},pie:{overlay:{gradient:"none"}},donut:{overlay:{gradient:"none"}},line:{markers:{background:"#ffffff"}},bubble:{opacity:.6},scatter:{markers:{background:"#ffffff"}},scatterLine:{markers:{background:"#ffffff"}},area:{opacity:.8},candlestick:{downColor:"#d0d0d0",line:{color:"#333333"},border:{_brightness:1.5,opacity:1},highlight:{border:{color:"#b8b8b8",opacity:.2}}},waterfall:{line:{color:"#cccccc"}},horizontalWaterfall:{line:{color:"#cccccc"}},ohlc:{line:{color:"#333333"}}},chartArea:{background:"#ffffff"},seriesColors:["#428bca","#5bc0de","#5cb85c","#f2b661","#e67d4a","#da3b36"],axisDefaults:{line:{color:"#cccccc"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},labels:{color:"#333333"},majorGridLines:{color:"#cccccc"},minorGridLines:{color:"#ebebeb"},title:{color:"#333333"},crosshair:{color:"#000000"},notes:{icon:{background:"#000000",border:{color:"#000000"}},label:{color:"#ffffff"},line:{color:"#000000"}}}},gauge:{pointer:{color:"#428bca"},scale:{rangePlaceholderColor:"#cccccc",labels:{color:"#333333"},minorTicks:{color:"#ebebeb"},majorTicks:{color:"#cccccc"},line:{color:"#cccccc"}}},diagram:{shapeDefaults:{fill:{color:"#428bca"},connectorDefaults:{fill:{color:"#333333"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#333333"}}},content:{color:"#333333"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#333333"},hover:{fill:{color:"#333333"},stroke:{color:"#333333"}}}},rotate:{thumb:{stroke:{color:"#333333"},fill:{color:"#333333"}}}},selectable:{stroke:{color:"#333333"}},connectionDefaults:{stroke:{color:"#c4c4c4"},content:{color:"#333333"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#333333"}},stroke:{color:"#333333"}}}},treeMap:{colors:[["#428bca","#d1e0ec"],["#5bc0de","#d6eaf0"],["#5cb85c","#d6e9d6"],["#5cb85c","#f4e8d7"],["#e67d4a","#f2ddd3"],["#da3b36","#f0d0cf"]]}}),registerTheme("flat",{chart:{title:{color:"#4c5356"},legend:{labels:{color:"#4c5356"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#4c5356"},errorBars:{color:"#4c5356"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#cdcdcd"}},horizontalWaterfall:{line:{color:"#cdcdcd"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#10c4b2","#ff7663","#ffb74f","#a2df53","#1c9ec4","#ff63a5","#1cc47b"],axisDefaults:{line:{color:"#cdcdcd"},labels:{color:"#4c5356"},minorGridLines:{color:"#cdcdcd"},majorGridLines:{color:"#cdcdcd"},title:{color:"#4c5356"},crosshair:{color:"#cdcdcd"},notes:{icon:{background:"transparent",border:{color:"#cdcdcd"}},label:{color:"#4c5356"},line:{color:"#cdcdcd"}}}},gauge:{pointer:{color:"#10c4b2"},scale:{rangePlaceholderColor:"#cdcdcd",labels:{color:"#4c5356"},minorTicks:{color:"#4c5356"},majorTicks:{color:"#4c5356"},line:{color:"#4c5356"}}},diagram:{shapeDefaults:{fill:{color:"#10c4b2"},connectorDefaults:{fill:{color:"#363940"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#363940"}}},content:{color:"#4c5356"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#363940"},hover:{fill:{color:"#363940"},stroke:{color:"#363940"}}}},rotate:{thumb:{stroke:{color:"#363940"},fill:{color:"#363940"}}}},selectable:{stroke:{color:"#363940"}},connectionDefaults:{stroke:{color:"#cdcdcd"},content:{color:"#4c5356"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#363940"}},stroke:{color:"#363940"}}}},treeMap:{colors:[["#10c4b2","#cff3f0"],["#ff7663","#ffe4e0"],["#ffb74f","#fff1dc"],["#a2df53","#ecf9dd"],["#1c9ec4","#d2ecf3"],["#ff63a5","#ffe0ed"],["#1cc47b","#d2f3e5"]]}}),registerTheme("material",{chart:{title:{color:"#444444"},legend:{labels:{color:"#444444"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#444444"},errorBars:{color:"#444444"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#e5e5e5"}},horizontalWaterfall:{line:{color:"#e5e5e5"}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#e5e5e5"},labels:{color:"#444444"},minorGridLines:{color:"#e5e5e5"},majorGridLines:{color:"#e5e5e5"},title:{color:"#444444"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#444444"},line:{color:"#e5e5e5"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#e5e5e5",labels:{color:"#444444"},minorTicks:{color:"#444444"},majorTicks:{color:"#444444"},line:{color:"#444444"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#7f7f7f"}}},content:{color:"#444444"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#444444"},hover:{fill:{color:"#444444"},stroke:{color:"#444444"}}}},rotate:{thumb:{stroke:{color:"#444444"},fill:{color:"#444444"}}}},selectable:{stroke:{color:"#444444"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#444444"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#444444"}},stroke:{color:"#444444"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}}),registerTheme("materialblack",{chart:{title:{color:"#fff"},legend:{labels:{color:"#fff"},inactiveItems:{labels:{color:"#CBCBCB"},markers:{color:"#CBCBCB"}}},seriesDefaults:{labels:{color:"#fff"},errorBars:{color:"#fff"},notes:{icon:{background:"transparent",border:{color:"#e5e5e5"}},label:{color:"#fff"},line:{color:"#e5e5e5"}},candlestick:{downColor:"#c7c7c7",line:{color:"#787878"}},area:{opacity:.9},waterfall:{line:{color:"#4d4d4d"}},horizontalWaterfall:{line:{color:"#4d4d4d"}},overlay:{gradient:"none"},border:{_brightness:1}},chartArea:{background:"#1c1c1c"},seriesColors:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#ff9800","#ff5722"],axisDefaults:{line:{color:"#4d4d4d"},labels:{color:"#fff"},minorGridLines:{color:"#4d4d4d"},majorGridLines:{color:"#4d4d4d"},title:{color:"#fff"},crosshair:{color:"#7f7f7f"},notes:{icon:{background:"transparent",border:{color:"#4d4d4d"}},label:{color:"#fff"},line:{color:"#4d4d4d"}}}},gauge:{pointer:{color:"#3f51b5"},scale:{rangePlaceholderColor:"#4d4d4d",labels:{color:"#fff"},minorTicks:{color:"#fff"},majorTicks:{color:"#fff"},line:{color:"#fff"}}},diagram:{shapeDefaults:{fill:{color:"#3f51b5"},connectorDefaults:{fill:{color:"#7f7f7f"},stroke:{color:WHITE},hover:{fill:{color:WHITE},stroke:{color:"#7f7f7f"}}},content:{color:"#fff"}},editable:{resize:{handles:{fill:{color:WHITE},stroke:{color:"#fff"},hover:{fill:{color:"#fff"},stroke:{color:"#fff"}}}},rotate:{thumb:{stroke:{color:"#fff"},fill:{color:"#fff"}}}},selectable:{stroke:{color:"#fff"}},connectionDefaults:{stroke:{color:"#7f7f7f"},content:{color:"#fff"},selection:{handles:{fill:{color:WHITE},stroke:{color:"#fff"}},stroke:{color:"#fff"}}}},treeMap:{colors:[["#3f51b5","#cff3f0"],["#03a9f4","#e5f6fe"],["#4caf50","#edf7ed"],["#f9ce1d","#fefae8"],["#ff9800","#fff4e5"],["#ff5722","#ffeee8"]]}}),function(){function noteStyle(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:AXIS}}}var TEXT="#333333",INACTIVE="#7f7f7f",INACTIVE_SHAPE="#bdbdbd",AXIS="#c8c8c8",AXIS_MINOR="#dddddd",SERIES=["#008fd3","#99d101","#f39b02","#f05662","#c03c53","#acacac"],SERIES_LIGHT=["#cbe8f5","#eaf5cb","#fceacc","#fbdcdf","#f2d7dc","#eeeeee"],PRIMARY=SERIES[0],DIAGRAM_HOVER=WHITE;registerTheme("fiori",{chart:{title:{color:TEXT},legend:{labels:{color:TEXT},inactiveItems:{labels:{color:INACTIVE},markers:{color:INACTIVE}}},seriesDefaults:{labels:{color:TEXT},errorBars:{color:TEXT},notes:noteStyle(),candlestick:{downColor:AXIS,line:{color:INACTIVE_SHAPE}},area:{opacity:.8},waterfall:{line:{color:AXIS}},horizontalWaterfall:{line:{color:AXIS}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:SERIES,axisDefaults:{line:{color:AXIS},labels:{color:TEXT},minorGridLines:{color:AXIS_MINOR},majorGridLines:{color:AXIS},title:{color:TEXT},crosshair:{color:INACTIVE},notes:noteStyle()}},gauge:{pointer:{color:PRIMARY},scale:{rangePlaceholderColor:AXIS,labels:{color:TEXT},minorTicks:{color:TEXT},majorTicks:{color:TEXT},line:{color:TEXT}}},diagram:{shapeDefaults:{fill:{color:PRIMARY},connectorDefaults:{fill:{color:TEXT},stroke:{color:DIAGRAM_HOVER},hover:{fill:{color:DIAGRAM_HOVER},stroke:{color:TEXT}}},content:{color:TEXT}},editable:{resize:{handles:{fill:{color:DIAGRAM_HOVER},stroke:{color:INACTIVE_SHAPE},hover:{fill:{color:INACTIVE_SHAPE},stroke:{color:INACTIVE_SHAPE}}}},rotate:{thumb:{stroke:{color:INACTIVE_SHAPE},fill:{color:INACTIVE_SHAPE}}}},selectable:{stroke:{color:INACTIVE_SHAPE}},connectionDefaults:{stroke:{color:INACTIVE_SHAPE},content:{color:INACTIVE_SHAPE},selection:{handles:{fill:{color:DIAGRAM_HOVER},stroke:{color:INACTIVE_SHAPE}},stroke:{color:INACTIVE_SHAPE}}}},treeMap:{colors:fuse(SERIES,SERIES_LIGHT)}})}(),function(){function noteStyle(){return{icon:{background:"#00b0ff",border:{color:"#00b0ff"}},label:{color:"#ffffff"},line:{color:AXIS}}}var TEXT="#4e4e4e",INACTIVE="#7f7f7f",INACTIVE_SHAPE="#bdbdbd",AXIS="#c8c8c8",AXIS_MINOR="#e5e5e5",SERIES=["#0072c6","#5db2ff","#008a17","#82ba00","#ff8f32","#ac193d"],SERIES_LIGHT=["#cbe2f3","#deeffe","#cbe7d0","#e5f0cb","#fee8d5","#eed0d7"],PRIMARY=SERIES[0],DIAGRAM_HOVER=WHITE;registerTheme("office365",{chart:{title:{color:TEXT},legend:{labels:{color:TEXT},inactiveItems:{labels:{color:INACTIVE},markers:{color:INACTIVE}}},seriesDefaults:{labels:{color:TEXT},errorBars:{color:TEXT},notes:noteStyle(),candlestick:{downColor:AXIS,line:{color:INACTIVE_SHAPE}},area:{opacity:.8},waterfall:{line:{color:AXIS}},horizontalWaterfall:{line:{color:AXIS}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:SERIES,axisDefaults:{line:{color:AXIS},labels:{color:TEXT},minorGridLines:{color:AXIS_MINOR},majorGridLines:{color:AXIS},title:{color:TEXT},crosshair:{color:INACTIVE},notes:noteStyle()}},gauge:{pointer:{color:PRIMARY},scale:{rangePlaceholderColor:AXIS,labels:{color:TEXT},minorTicks:{color:TEXT},majorTicks:{color:TEXT},line:{color:TEXT}}},diagram:{shapeDefaults:{fill:{color:PRIMARY},connectorDefaults:{fill:{color:TEXT},stroke:{color:DIAGRAM_HOVER},hover:{fill:{color:DIAGRAM_HOVER},stroke:{color:TEXT}}},content:{color:TEXT}},editable:{resize:{handles:{fill:{color:DIAGRAM_HOVER},stroke:{color:INACTIVE_SHAPE},hover:{fill:{color:INACTIVE_SHAPE},stroke:{color:INACTIVE_SHAPE}}}},rotate:{thumb:{stroke:{color:INACTIVE_SHAPE},fill:{color:INACTIVE_SHAPE}}}},selectable:{stroke:{color:INACTIVE_SHAPE}},connectionDefaults:{stroke:{color:INACTIVE_SHAPE},content:{color:INACTIVE_SHAPE},selection:{handles:{fill:{color:DIAGRAM_HOVER},stroke:{color:INACTIVE_SHAPE}},stroke:{color:INACTIVE_SHAPE}}}},treeMap:{colors:fuse(SERIES,SERIES_LIGHT)}})}(),function(){function noteStyle(){return{icon:{background:"#007cc0",border:{color:"#007cc0"}},label:{color:"#ffffff"},line:{color:AXIS}}}var TEXT="#32364c",INACTIVE="#7f7f7f",INACTIVE_SHAPE="#bdbdbd",AXIS="#dfe0e1",AXIS_MINOR="#dfe0e1",SERIES=["#ff4350","#ff9ea5","#00acc1","#80deea","#ffbf46","#ffd78c"],SERIES_LIGHT=["#ffd9dc","#ffeced","#cceef3","#e6f8fb","#fff2da","#fff7e8"],PRIMARY=SERIES[0],DIAGRAM_HOVER=WHITE;registerTheme("nova",{chart:{title:{color:TEXT},legend:{labels:{color:TEXT},inactiveItems:{labels:{color:INACTIVE},markers:{color:INACTIVE}}},seriesDefaults:{labels:{color:TEXT},errorBars:{color:TEXT},notes:noteStyle(),candlestick:{downColor:AXIS,line:{color:INACTIVE_SHAPE}},area:{opacity:.8},waterfall:{line:{color:AXIS}},horizontalWaterfall:{line:{color:AXIS}},overlay:{gradient:"none"},border:{_brightness:1}},seriesColors:SERIES,axisDefaults:{line:{color:AXIS},labels:{color:TEXT},minorGridLines:{color:AXIS_MINOR},majorGridLines:{color:AXIS},title:{color:TEXT},crosshair:{color:TEXT},notes:noteStyle()}},gauge:{pointer:{color:PRIMARY},scale:{rangePlaceholderColor:AXIS,labels:{color:TEXT},minorTicks:{color:TEXT},majorTicks:{color:TEXT},line:{color:TEXT}}},diagram:{shapeDefaults:{fill:{color:PRIMARY},connectorDefaults:{fill:{color:TEXT},stroke:{color:DIAGRAM_HOVER},hover:{fill:{color:DIAGRAM_HOVER},stroke:{color:TEXT}}},content:{color:TEXT}},editable:{resize:{handles:{fill:{color:DIAGRAM_HOVER},stroke:{color:INACTIVE_SHAPE},hover:{fill:{color:INACTIVE_SHAPE},stroke:{color:INACTIVE_SHAPE}}}},rotate:{thumb:{stroke:{color:INACTIVE_SHAPE},fill:{color:INACTIVE_SHAPE}}}},selectable:{stroke:{color:INACTIVE_SHAPE}},connectionDefaults:{stroke:{color:INACTIVE_SHAPE},content:{color:INACTIVE_SHAPE},selection:{handles:{fill:{color:DIAGRAM_HOVER},stroke:{color:INACTIVE_SHAPE}},stroke:{color:INACTIVE_SHAPE}}}},treeMap:{colors:fuse(SERIES,SERIES_LIGHT)}})}()}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function returnSelf(){return this}function DefaultAggregates(){this._defaults={}}function intersection(a1,a2,b1,b2){var result,ua,ua_t=(b2.x-b1.x)*(a1.y-b1.y)-(b2.y-b1.y)*(a1.x-b1.x),u_b=(b2.y-b1.y)*(a2.x-a1.x)-(b2.x-b1.x)*(a2.y-a1.y);return 0!==u_b&&(ua=ua_t/u_b,result=new Point2D(a1.x+ua*(a2.x-a1.x),a1.y+ua*(a2.y-a1.y))),result}function applySeriesDefaults(options,themeOptions){var i,seriesType,series=options.series,seriesLength=series.length,seriesDefaults=options.seriesDefaults,commonDefaults=deepExtend({},options.seriesDefaults),themeSeriesDefaults=themeOptions?deepExtend({},themeOptions.seriesDefaults):{},commonThemeDefaults=deepExtend({},themeSeriesDefaults);for(cleanupNestedSeriesDefaults(commonDefaults),cleanupNestedSeriesDefaults(commonThemeDefaults),i=0;seriesLength>i;i++){seriesType=series[i].type||options.seriesDefaults.type;var baseOptions=deepExtend({data:[]},commonThemeDefaults,themeSeriesDefaults[seriesType],{tooltip:options.tooltip},commonDefaults,seriesDefaults[seriesType]);series[i]._defaults=baseOptions,series[i]=deepExtend({},baseOptions,series[i])}}function cleanupNestedSeriesDefaults(seriesDefaults){delete seriesDefaults.bar,delete seriesDefaults.column,delete seriesDefaults.rangeColumn,delete seriesDefaults.line,delete seriesDefaults.verticalLine,delete seriesDefaults.pie,delete seriesDefaults.donut,delete seriesDefaults.area,delete seriesDefaults.verticalArea,delete seriesDefaults.scatter,delete seriesDefaults.scatterLine,delete seriesDefaults.bubble,delete seriesDefaults.candlestick,delete seriesDefaults.ohlc,delete seriesDefaults.boxPlot,delete seriesDefaults.bullet,delete seriesDefaults.verticalBullet,delete seriesDefaults.polarArea,delete seriesDefaults.polarLine,delete seriesDefaults.radarArea,delete seriesDefaults.radarLine,delete seriesDefaults.waterfall}function applySeriesColors(options){var i,currentSeries,seriesColor,defaults,series=options.series,colors=options.seriesColors||[];for(i=0;i<series.length;i++)currentSeries=series[i],seriesColor=colors[i%colors.length],currentSeries.color=currentSeries.color||seriesColor,defaults=currentSeries._defaults,defaults&&(defaults.color=defaults.color||seriesColor)}function resolveAxisAliases(options){var alias;each([CATEGORY,VALUE,X,Y],function(){alias=this+"Axes",options[alias]&&(options[this+"Axis"]=options[alias],delete options[alias])})}function applyAxisDefaults(options,themeOptions){var themeAxisDefaults=(themeOptions||{}).axisDefaults||{};each([CATEGORY,VALUE,X,Y],function(){var axisName=this+"Axis",axes=[].concat(options[axisName]),axisDefaults=options.axisDefaults||{};axes=$.map(axes,function(axisOptions){var axisColor=(axisOptions||{}).color,result=deepExtend({},themeAxisDefaults,themeAxisDefaults[axisName],axisDefaults,axisDefaults[axisName],{line:{color:axisColor},labels:{color:axisColor},title:{color:axisColor}},axisOptions);return delete result[axisName],result}),options[axisName]=axes.length>1?axes:axes[0]})}function categoriesCount(series){var i,seriesCount=series.length,categories=0;for(i=0;seriesCount>i;i++)categories=math.max(categories,series[i].data.length);return categories}function sqr(value){return value*value}function getField(field,row){if(null===row)return row;var get=getter(field,!0);return get(row)}function getDateField(field,row){if(null===row)return row;var key="_date_"+field,value=row[key];return value||(value=toDate(getter(field,!0)(row)),row[key]=value),value}function toDate(value){var result,i;if(value instanceof Date)result=value;else if(typeof value===STRING)result=kendo.parseDate(value)||new Date(value);else if(value)if(isArray(value))for(result=[],i=0;i<value.length;i++)result.push(toDate(value[i]));else result=new Date(value);return result}function toTime(value){return isArray(value)?map(value,toTime):value?toDate(value).getTime():void 0}function addDuration(date,value,unit,weekStartDay){var hours,result=date;return date&&(date=toDate(date),hours=date.getHours(),unit===YEARS?(result=new Date(date.getFullYear()+value,0,1),kendo.date.adjustDST(result,0)):unit===MONTHS?(result=new Date(date.getFullYear(),date.getMonth()+value,1),kendo.date.adjustDST(result,hours)):unit===WEEKS?(result=addDuration(startOfWeek(date,weekStartDay),7*value,DAYS),kendo.date.adjustDST(result,hours)):unit===DAYS?(result=new Date(date.getFullYear(),date.getMonth(),date.getDate()+value),kendo.date.adjustDST(result,hours)):unit===HOURS?(result=new Date(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours()+value),value>0&&dateEquals(date,result)&&(result=addDuration(date,value+1,unit,weekStartDay))):unit===MINUTES?(result=new Date(date.getTime()+value*TIME_PER_MINUTE),result.getSeconds()>0&&result.setSeconds(0)):unit===SECONDS&&(result=new Date(date.getTime()+value*TIME_PER_SECOND)),result.getMilliseconds()>0&&result.setMilliseconds(0)),result}function startOfWeek(date,weekStartDay){var day=date.getDay(),daysToSubtract=0;if(!isNaN(day))for(weekStartDay=weekStartDay||0;day!==weekStartDay;)0===day?day=6:day--,daysToSubtract++;return addTicks(date,-daysToSubtract*TIME_PER_DAY)}function floorDate(date,unit,weekStartDay){return date=toDate(date),addDuration(date,0,unit,weekStartDay)}function ceilDate(date,unit,weekStartDay){return date=toDate(date),date&&floorDate(date,unit,weekStartDay).getTime()===date.getTime()?date:addDuration(date,1,unit,weekStartDay)}function dateDiff(a,b){var diff=a.getTime()-b,offsetDiff=a.getTimezoneOffset()-b.getTimezoneOffset();return diff-offsetDiff*TIME_PER_MINUTE}function addTicks(date,ticks){var tzOffsetBefore=date.getTimezoneOffset(),result=new Date(date.getTime()+ticks),tzOffsetDiff=result.getTimezoneOffset()-tzOffsetBefore;return new Date(result.getTime()+tzOffsetDiff*TIME_PER_MINUTE)}function duration(a,b,unit){var diff;return diff=unit===YEARS?b.getFullYear()-a.getFullYear():unit===MONTHS?12*duration(a,b,YEARS)+b.getMonth()-a.getMonth():math.floor(unit===DAYS?dateDiff(b,a)/TIME_PER_DAY:(b-a)/TIME_PER_UNIT[unit])}function singleItemOrArray(array){return 1===array.length?array[0]:array}function axisGroupBox(axes){var box,i,axisBox,length=axes.length;if(length>0)for(i=0;length>i;i++)axisBox=axes[i].contentBox(),box?box.wrap(axisBox):box=axisBox.clone();return box||Box2D()}function equalsIgnoreCase(a,b){return a&&b?a.toLowerCase()===b.toLowerCase():a===b}function dateEquals(a,b){return a&&b?toTime(a)===toTime(b):a===b}function appendIfNotNull(array,element){null!==element&&array.push(element)}function lteDateIndex(date,sortedDates){for(var i,currentDate,low=0,high=sortedDates.length-1;high>=low;)if(i=math.floor((low+high)/2),currentDate=sortedDates[i],date>currentDate)low=i+1;else{if(!(currentDate>date)){for(;dateEquals(sortedDates[i-1],date);)i--;return i}high=i-1}return sortedDates[i]<=date?i:i-1}function isNumber(val){return"number"==typeof val&&!isNaN(val)}function countNumbers(values){var i,num,length=values.length,count=0;for(i=0;length>i;i++)num=values[i],isNumber(num)&&count++;return count}function areNumbers(values){return countNumbers(values)===values.length}function axisRanges(axes){var i,axis,axisName,ranges={};for(i=0;i<axes.length;i++)axis=axes[i],axisName=axis.options.name,axisName&&(ranges[axisName]=axis.range());return ranges}function evalOptions(options,context,state,dryRun){var property,propValue,excluded,defaults,depth,needsEval=!1;if(state=state||{},excluded=state.excluded=state.excluded||[],defaults=state.defaults=state.defaults||{},depth=state.depth=state.depth||0,!(depth>MAX_EXPAND_DEPTH)){for(property in options)!inArray(property,state.excluded)&&options.hasOwnProperty(property)&&(propValue=options[property],isFn(propValue)?(needsEval=!0,dryRun||(options[property]=valueOrDefault(propValue(context),defaults[property]))):typeof propValue===OBJECT&&(state.defaults=defaults[property],state.depth++,needsEval=evalOptions(propValue,context,state,dryRun)||needsEval,state.depth--));return needsEval}}function groupSeries(series,data){var nameTemplate,groupIx,seriesClone,result=[],legacyTemplate=series.groupNameTemplate,dataLength=data.length;if(0===dataLength)return seriesClone=deepExtend({},series),seriesClone.visibleInLegend=!1,[seriesClone];for(defined(legacyTemplate)?(kendo.logToConsole("'groupNameTemplate' is obsolete and will be removed in future versions. Specify the group name template as 'series.name'"),legacyTemplate&&(nameTemplate=template(legacyTemplate))):(nameTemplate=template(series.name||""),0===nameTemplate._slotCount&&(nameTemplate=template(defined(series.name)?"#= group.value #: #= series.name #":"#= group.value #"))),groupIx=0;dataLength>groupIx;groupIx++)seriesClone=deepExtend({},series),isFn(seriesClone.color)||(seriesClone.color=undefined),seriesClone._groupIx=groupIx,result.push(seriesClone),nameTemplate&&(seriesClone.name=nameTemplate({series:seriesClone,group:data[groupIx]}));return result}function filterSeriesByType(series,types){var i,currentSeries,result=[];for(types=[].concat(types),i=0;i<series.length;i++)currentSeries=series[i],inArray(currentSeries.type,types)&&result.push(currentSeries);return result}function indexOf(item,arr){if(item instanceof Date){for(var i=0,length=arr.length;length>i;i++)if(dateEquals(arr[i],item))return i;return-1}return $.inArray(item,arr)}function sortDates(dates,comparer){comparer=comparer||dateComparer;for(var i=1,length=dates.length;length>i;i++)if(comparer(dates[i],dates[i-1])<0){dates.sort(comparer);break}return dates}function uniqueDates(srcDates,comparer){var i,dates=sortDates(srcDates,comparer),length=dates.length,result=length>0?[dates[0]]:[];for(comparer=comparer||dateComparer,i=1;length>i;i++)0!==comparer(dates[i],last(result))&&result.push(dates[i]);return result}function isDateAxis(axisOptions,sampleCategory){var type=axisOptions.type,dateCategory=sampleCategory instanceof Date;return!type&&dateCategory||equalsIgnoreCase(type,DATE)}function transpose(rows){var rowIx,row,colIx,colCount,result=[],rowCount=rows.length;for(rowIx=0;rowCount>rowIx;rowIx++)for(row=rows[rowIx],colCount=row.length,colIx=0;colCount>colIx;colIx++)result[colIx]=result[colIx]||[],result[colIx].push(row[colIx]);return result}function ensureTree(fieldName,target){if(fieldName.indexOf(".")>-1)for(var val,parts=fieldName.split("."),path="";parts.length>1;)path+=parts.shift(),val=kendo.getter(path)(target)||{},kendo.setter(path)(target,val),path+="."}function seriesTotal(series){for(var data=series.data,sum=0,i=0;i<data.length;i++){var pointData=SeriesBinder.current.bindPoint(series,i),value=pointData.valueFields.value;typeof value===STRING&&(value=parseFloat(value)),isNumber(value)&&pointData.fields.visible!==!1&&(sum+=math.abs(value))}return sum}function hasGradientOverlay(options){var overlay=options.overlay;return overlay&&overlay.gradient&&"none"!=overlay.gradient}function anyHasZIndex(elements){for(var idx=0;idx<elements.length;idx++)if(defined(elements[idx].zIndex))return!0}function preventDefault(){this._defaultPrevented=!0}function pointByCategoryName(points,name){if(points)for(var idx=0;idx<points.length;idx++)if(points[idx].category===name)return[points[idx]]}function hasValue(value){return defined(value)&&null!==value}function toChartAxisRanges(axisRanges){for(var axisRange,ranges={},idx=0;idx<axisRanges.length;idx++)axisRange=axisRanges[idx],axisRange.axis.options.name&&(ranges[axisRange.axis.options.name]={min:axisRange.range.min,max:axisRange.range.max});return ranges}function acceptKey(e,mouseKey){var key=(mouseKey||"").toLowerCase(),accept="none"==key&&!(e.ctrlKey||e.shiftKey||e.altKey)||e[key+"Key"];return accept}var each=$.each,isArray=$.isArray,isPlainObject=$.isPlainObject,map=$.map,math=Math,noop=$.noop,extend=$.extend,proxy=$.proxy,kendo=window.kendo,Class=kendo.Class,Observable=kendo.Observable,DataSource=kendo.data.DataSource,Widget=kendo.ui.Widget,deepExtend=kendo.deepExtend,getter=kendo.getter,isFn=kendo.isFunction,template=kendo.template,dataviz=kendo.dataviz,Axis=dataviz.Axis,AxisLabel=dataviz.AxisLabel,Box2D=dataviz.Box2D,BoxElement=dataviz.BoxElement,ChartElement=dataviz.ChartElement,Color=kendo.drawing.Color,CurveProcessor=dataviz.CurveProcessor,FloatElement=dataviz.FloatElement,Note=dataviz.Note,LogarithmicAxis=dataviz.LogarithmicAxis,NumericAxis=dataviz.NumericAxis,Point2D=dataviz.Point2D,RootElement=dataviz.RootElement,Ring=dataviz.Ring,ShapeElement=dataviz.ShapeElement,ShapeBuilder=dataviz.ShapeBuilder,TextBox=dataviz.TextBox,Title=dataviz.Title,alignPathToPixel=dataviz.alignPathToPixel,autoFormat=dataviz.autoFormat,dateComparer=dataviz.dateComparer,getSpacing=dataviz.getSpacing,inArray=dataviz.inArray,interpolate=dataviz.interpolateValue,mwDelta=dataviz.mwDelta,round=dataviz.round,util=kendo.util,append=util.append,defined=util.defined,last=util.last,limitValue=util.limitValue,sparseArrayLimits=util.sparseArrayLimits,sparseArrayMin=util.sparseArrayMin,sparseArrayMax=util.sparseArrayMax,renderTemplate=util.renderTemplate,valueOrDefault=util.valueOrDefault,geom=dataviz.geometry,draw=dataviz.drawing,NS=".kendoChart",ABOVE="above",AREA="area",AUTO="auto",FIT="fit",AXIS_LABEL_CLICK=dataviz.AXIS_LABEL_CLICK,BAR="bar",BAR_ALIGN_MIN_WIDTH=6,BAR_BORDER_BRIGHTNESS=.8,BELOW="below",BLACK="#000",BOTH="both",BOTTOM="bottom",BOX_PLOT="boxPlot",BUBBLE="bubble",BULLET="bullet",CANDLESTICK="candlestick",CATEGORY="category",CENTER="center",CHANGE="change",CIRCLE="circle",CONTEXTMENU_NS="contextmenu"+NS,CLIP=dataviz.CLIP,COLOR="color",COLUMN="column",COORD_PRECISION=dataviz.COORD_PRECISION,CROSS="cross",CSS_PREFIX="k-",CUSTOM="custom",DATABOUND="dataBound",DATE="date",DAYS="days",DEFAULT_FONT=dataviz.DEFAULT_FONT,DEFAULT_HEIGHT=dataviz.DEFAULT_HEIGHT,DEFAULT_PRECISION=dataviz.DEFAULT_PRECISION,DEFAULT_WIDTH=dataviz.DEFAULT_WIDTH,DEFAULT_ERROR_BAR_WIDTH=4,DONUT="donut",DONUT_SECTOR_ANIM_DELAY=50,DRAG="drag",DRAG_END="dragEnd",DRAG_START="dragStart",ERROR_LOW_FIELD="errorLow",ERROR_HIGH_FIELD="errorHigh",X_ERROR_LOW_FIELD="xErrorLow",X_ERROR_HIGH_FIELD="xErrorHigh",Y_ERROR_LOW_FIELD="yErrorLow",Y_ERROR_HIGH_FIELD="yErrorHigh",FADEIN="fadeIn",FIRST="first",FROM="from",FUNNEL="funnel",GLASS="glass",HORIZONTAL="horizontal",HORIZONTAL_WATERFALL="horizontalWaterfall",HOURS="hours",INITIAL_ANIMATION_DURATION=dataviz.INITIAL_ANIMATION_DURATION,INSIDE_BASE="insideBase",INSIDE_END="insideEnd",INTERPOLATE="interpolate",LEAVE="leave",LEFT="left",LEGEND_ITEM_CLICK="legendItemClick",LEGEND_ITEM_HOVER="legendItemHover",LINE="line",LINE_MARKER_SIZE=8,LINEAR="linear",LOGARITHMIC="log",MAX="max",MAX_EXPAND_DEPTH=5,MAX_VALUE=Number.MAX_VALUE,MIN="min",MIN_VALUE=-Number.MAX_VALUE,MINUTES="minutes",MONTHS="months",MOUSELEAVE_NS="mouseleave"+NS,MOUSEMOVE_TRACKING="mousemove.tracking",MOUSEOVER_NS="mouseover"+NS,MOUSEOUT_NS="mouseout"+NS,MOUSEMOVE_NS="mousemove"+NS,MOUSEMOVE_DELAY=20,MOUSEWHEEL_DELAY=150,MOUSEWHEEL_NS="DOMMouseScroll"+NS+" mousewheel"+NS,NOTE_CLICK=dataviz.NOTE_CLICK,NOTE_HOVER=dataviz.NOTE_HOVER,NOTE_TEXT="noteText",OBJECT="object",OHLC="ohlc",OUTSIDE_END="outsideEnd",PIE="pie",PIE_SECTOR_ANIM_DELAY=70,PLOT_AREA_CLICK="plotAreaClick",POINTER="pointer",RANGE_BAR="rangeBar",RANGE_COLUMN="rangeColumn",RENDER="render",RIGHT="right",ROUNDED_BEVEL="roundedBevel",ROUNDED_GLASS="roundedGlass",SCATTER="scatter",SCATTER_LINE="scatterLine",SECONDS="seconds",SELECT_START="selectStart",SELECT="select",SELECT_END="selectEnd",SERIES_CLICK="seriesClick",SERIES_HOVER="seriesHover",START_SCALE=.001,STEP="step",SMOOTH="smooth",STD_ERR="stderr",STD_DEV="stddev",STRING="string",SUMMARY_FIELD="summary",TIME_PER_SECOND=1e3,TIME_PER_MINUTE=60*TIME_PER_SECOND,TIME_PER_HOUR=60*TIME_PER_MINUTE,TIME_PER_DAY=24*TIME_PER_HOUR,TIME_PER_WEEK=7*TIME_PER_DAY,TIME_PER_MONTH=31*TIME_PER_DAY,TIME_PER_YEAR=365*TIME_PER_DAY,TIME_PER_UNIT={years:TIME_PER_YEAR,months:TIME_PER_MONTH,weeks:TIME_PER_WEEK,days:TIME_PER_DAY,hours:TIME_PER_HOUR,minutes:TIME_PER_MINUTE,seconds:TIME_PER_SECOND},TO="to",TOP="top",TOOLTIP_ANIMATION_DURATION=150,TOOLTIP_OFFSET=5,TOOLTIP_SHOW_DELAY=100,TOOLTIP_HIDE_DELAY=100,TOOLTIP_INVERSE="chart-tooltip-inverse",VALUE="value",VERTICAL_AREA="verticalArea",VERTICAL_BULLET="verticalBullet",VERTICAL_LINE="verticalLine",WATERFALL="waterfall",WEEKS="weeks",WHITE="#fff",X="x",Y="y",YEARS="years",ZERO="zero",ZOOM_ACCELERATION=3,ZOOM_START="zoomStart",ZOOM="zoom",ZOOM_END="zoomEnd",BASE_UNITS=[SECONDS,MINUTES,HOURS,DAYS,WEEKS,MONTHS,YEARS],EQUALLY_SPACED_SERIES=[BAR,COLUMN,OHLC,CANDLESTICK,BOX_PLOT,BULLET,RANGE_COLUMN,RANGE_BAR,WATERFALL,HORIZONTAL_WATERFALL],DateLabelFormats={seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Chart=Widget.extend({init:function(element,userOptions){var options,dataSource,chart=this;kendo.destroy(element),Widget.fn.init.call(chart,element),chart.element.addClass(CSS_PREFIX+this.options.name.toLowerCase()).css("position","relative"),userOptions&&(dataSource=userOptions.dataSource,userOptions.dataSource=undefined),options=deepExtend({},chart.options,userOptions),chart._originalOptions=deepExtend({},options),chart._initTheme(options),chart._initSurface(),chart.bind(chart.events,chart.options),chart.wrapper=chart.element,userOptions&&(userOptions.dataSource=dataSource),chart._initDataSource(userOptions),
kendo.notify(chart,dataviz.ui)},_initTheme:function(options){var i,chart=this,themes=dataviz.ui.themes||{},themeName=options.theme,theme=themes[themeName]||themes[themeName.toLowerCase()],themeOptions=themeName&&theme?theme.chart:{},seriesCopies=[],series=options.series||[];for(i=0;i<series.length;i++)seriesCopies.push($.extend({},series[i]));options.series=seriesCopies,resolveAxisAliases(options),chart._applyDefaults(options,themeOptions),null===options.seriesColors&&(options.seriesColors=undefined),chart.options=deepExtend({},themeOptions,options),applySeriesColors(chart.options)},_initDataSource:function(userOptions){var chart=this,dataSource=(userOptions||{}).dataSource;chart._dataChangeHandler=proxy(chart._onDataChanged,chart),chart.dataSource=DataSource.create(dataSource).bind(CHANGE,chart._dataChangeHandler),chart._bindCategories(),dataSource&&(chart._hasDataSource=!0),chart._redraw(),chart._attachEvents(),dataSource&&chart.options.autoBind&&chart.dataSource.fetch()},setDataSource:function(dataSource){var chart=this;chart.dataSource.unbind(CHANGE,chart._dataChangeHandler),chart.dataSource=dataSource=DataSource.create(dataSource),chart._hasDataSource=!0,chart._hasData=!1,dataSource.bind(CHANGE,chart._dataChangeHandler),chart.options.autoBind&&dataSource.fetch()},events:[DATABOUND,SERIES_CLICK,SERIES_HOVER,AXIS_LABEL_CLICK,LEGEND_ITEM_CLICK,LEGEND_ITEM_HOVER,PLOT_AREA_CLICK,DRAG_START,DRAG,DRAG_END,ZOOM_START,ZOOM,ZOOM_END,SELECT_START,SELECT,SELECT_END,NOTE_CLICK,NOTE_HOVER,RENDER],items:function(){return $()},options:{name:"Chart",renderAs:"",theme:"default",chartArea:{},legend:{visible:!0,labels:{}},categoryAxis:{},autoBind:!0,seriesDefaults:{type:COLUMN,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1},refresh:function(){var chart=this;chart._applyDefaults(chart.options),applySeriesColors(chart.options),chart._bindSeries(),chart._bindCategories(),chart.trigger(DATABOUND),chart._redraw()},getSize:function(){return kendo.dimensions(this.element)},_resize:function(){var t=this.options.transitions;this.options.transitions=!1,this._redraw(),this.options.transitions=t},redraw:function(paneName){var pane,plotArea,chart=this;chart._applyDefaults(chart.options),applySeriesColors(chart.options),paneName?(plotArea=chart._model._plotArea,pane=plotArea.findPane(paneName),plotArea.redraw(pane)):chart._redraw()},getAxis:function(name){for(var axes=this._plotArea.axes,idx=0;idx<axes.length;idx++)if(axes[idx].options.name===name)return new ChartAxis(axes[idx])},toggleHighlight:function(show,options){var seriesName,categoryName,points,plotArea=this._plotArea,highlight=this._highlight,firstSeries=(plotArea.srcSeries||plotArea.series||[])[0];if(isPlainObject(options)?(seriesName=options.series,categoryName=options.category):seriesName=categoryName=options,points=firstSeries.type===DONUT?pointByCategoryName(plotArea.pointsBySeriesName(seriesName),categoryName):firstSeries.type===PIE||firstSeries.type===FUNNEL?pointByCategoryName((plotArea.charts[0]||{}).points,categoryName):plotArea.pointsBySeriesName(seriesName))for(var idx=0;idx<points.length;idx++)highlight.togglePointHighlight(points[idx],show)},_initSurface:function(){var surface=this.surface,wrap=this._surfaceWrap(),chartArea=this.options.chartArea;chartArea.width&&wrap.css("width",chartArea.width),chartArea.height&&wrap.css("height",chartArea.height),surface&&surface.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(surface&&surface.destroy(),this.surface=draw.Surface.create(wrap,{type:this.options.renderAs}))},_surfaceWrap:function(){return this.element},_redraw:function(){var view,chart=this,model=chart._getModel();chart._destroyView(),chart._model=model,chart._plotArea=model._plotArea,model.renderVisual(),this.options.transitions!==!1&&model.traverse(function(element){element.animation&&element.animation.setup()}),chart._initSurface(),chart.surface.draw(model.visual),this.options.transitions!==!1&&model.traverse(function(element){element.animation&&element.animation.play()}),chart._tooltip=chart._createTooltip(),chart._highlight=new Highlight(view),chart._setupSelection(),chart._createPannable(),chart._createZoomSelection(),chart._createMousewheelZoom(),chart._hasDataSource&&!chart._hasData&&chart.options.autoBind||chart.trigger(RENDER)},exportVisual:function(){return this.surface.exportVisual()},_sharedTooltip:function(){var chart=this,options=chart.options;return chart._plotArea instanceof CategoricalPlotArea&&options.tooltip.shared},_createPannable:function(){var options=this.options;options.pannable!==!1&&(this._pannable=new Pannable(this._plotArea,options.pannable))},_createZoomSelection:function(){var zoomable=this.options.zoomable,selection=(zoomable||{}).selection;zoomable!==!1&&selection!==!1&&(this._zoomSelection=new ZoomSelection(this,selection))},_createMousewheelZoom:function(){var zoomable=this.options.zoomable,mousewheel=(zoomable||{}).mousewheel;zoomable!==!1&&mousewheel!==!1&&(this._mousewheelZoom=new MousewheelZoom(this._plotArea,mousewheel))},_createTooltip:function(){var tooltip,chart=this,options=chart.options,element=chart.element;return tooltip=chart._sharedTooltip()?new SharedTooltip(element,chart._plotArea,options.tooltip):new Tooltip(element,options.tooltip),tooltip.bind(LEAVE,proxy(chart._tooltipleave,chart)),tooltip},_tooltipleave:function(){var chart=this,plotArea=chart._plotArea,highlight=chart._highlight;plotArea.hideCrosshairs(),highlight.hide()},_applyDefaults:function(options,themeOptions){applyAxisDefaults(options,themeOptions),applySeriesDefaults(options,themeOptions)},_getModel:function(){var plotArea,chart=this,options=chart.options,model=new RootElement(chart._modelOptions());return model.chart=chart,Title.buildTitle(options.title,model),plotArea=model._plotArea=chart._createPlotArea(),options.legend.visible&&model.append(new Legend(plotArea.options.legend)),model.append(plotArea),model.reflow(),model},_modelOptions:function(){var chart=this,options=chart.options,element=chart.element,height=math.floor(element.height()),width=math.floor(element.width());return chart._size=null,deepExtend({width:width||DEFAULT_WIDTH,height:height||DEFAULT_HEIGHT,transitions:options.transitions},options.chartArea)},_createPlotArea:function(skipSeries){var chart=this,options=chart.options;return PlotAreaFactory.current.create(skipSeries?[]:options.series,options)},_setupSelection:function(){var selection,i,axis,min,max,options,chart=this,plotArea=chart._plotArea,axes=plotArea.axes,selections=chart._selections=[];for(chart._selectStartHandler||(chart._selectStartHandler=proxy(chart._selectStart,chart),chart._selectHandler=proxy(chart._select,chart),chart._selectEndHandler=proxy(chart._selectEnd,chart)),i=0;i<axes.length;i++)axis=axes[i],options=axis.options,axis instanceof CategoryAxis&&options.select&&!options.vertical&&(min=0,max=options.categories.length-1,axis instanceof DateCategoryAxis&&(min=options.categories[min],max=options.categories[max]),options.justified||(axis instanceof DateCategoryAxis?max=addDuration(max,1,options.baseUnit,options.weekStartDay):max++),selection=new Selection(chart,axis,deepExtend({min:min,max:max},options.select)),selection.bind(SELECT_START,chart._selectStartHandler),selection.bind(SELECT,chart._selectHandler),selection.bind(SELECT_END,chart._selectEndHandler),selections.push(selection))},_selectStart:function(e){return this.trigger(SELECT_START,e)},_select:function(e){return this.trigger(SELECT,e)},_selectEnd:function(e){return this.trigger(SELECT_END,e)},_attachEvents:function(){var chart=this,element=chart.element;element.on(CONTEXTMENU_NS,proxy(chart._click,chart)),element.on(MOUSEOVER_NS,proxy(chart._mouseover,chart)),element.on(MOUSEOUT_NS,proxy(chart._mouseout,chart)),element.on(MOUSEWHEEL_NS,proxy(chart._mousewheel,chart)),element.on(MOUSELEAVE_NS,proxy(chart._mouseleave,chart)),chart._mousemove=kendo.throttle(proxy(chart._mousemove,chart),MOUSEMOVE_DELAY),chart._shouldAttachMouseMove()&&element.on(MOUSEMOVE_NS,chart._mousemove),kendo.UserEvents&&(chart._userEvents=new kendo.UserEvents(element,{global:!0,filter:":not(.k-selector)",multiTouch:!1,tap:proxy(chart._tap,chart),start:proxy(chart._start,chart),move:proxy(chart._move,chart),end:proxy(chart._end,chart)}))},_mouseout:function(e){var chart=this,element=chart._getChartElement(e);element&&element.leave&&element.leave(chart,e)},_start:function(e){var chart=this,events=chart._events;defined(events[DRAG_START]||events[DRAG]||events[DRAG_END])&&chart._startNavigation(e,DRAG_START),chart._pannable&&chart._pannable.start(e),chart._zoomSelection&&chart._zoomSelection.start(e)},_move:function(e){var axes,i,currentAxis,axisName,axis,delta,chart=this,state=chart._navState,pannable=chart._pannable,ranges={};if(pannable)e.preventDefault(),ranges=pannable.move(e),ranges&&!chart.trigger(DRAG,{axisRanges:ranges,originalEvent:e})&&pannable.pan();else if(state){for(e.preventDefault(),axes=state.axes,i=0;i<axes.length;i++)currentAxis=axes[i],axisName=currentAxis.options.name,axisName&&(axis=currentAxis.options.vertical?e.y:e.x,delta=axis.startLocation-axis.location,0!==delta&&(ranges[currentAxis.options.name]=currentAxis.translateRange(delta)));state.axisRanges=ranges,chart.trigger(DRAG,{axisRanges:ranges,originalEvent:e})}chart._zoomSelection&&chart._zoomSelection.move(e)},_end:function(e){if(this._endNavigation(e,DRAG_END),this._zoomSelection){var ranges=this._zoomSelection.end(e);ranges&&!this.trigger(ZOOM,{axisRanges:ranges,originalEvent:e})&&this._zoomSelection.zoom()}this._pannable&&this._pannable.end(e)},_mousewheel:function(e){var prevented,totalDelta,axes,i,currentAxis,axisName,chart=this,origEvent=e.originalEvent,delta=mwDelta(e),state=chart._navState,ranges={},mousewheelZoom=chart._mousewheelZoom;if(mousewheelZoom)e.preventDefault(),ranges=mousewheelZoom.updateRanges(delta),ranges&&!chart.trigger(ZOOM,{delta:delta,axisRanges:ranges,originalEvent:e})&&mousewheelZoom.zoom();else if(state||(prevented=chart._startNavigation(origEvent,ZOOM_START),prevented||(state=chart._navState)),state){for(totalDelta=state.totalDelta||delta,state.totalDelta=totalDelta+delta,axes=chart._navState.axes,i=0;i<axes.length;i++)currentAxis=axes[i],axisName=currentAxis.options.name,axisName&&(ranges[axisName]=currentAxis.scaleRange(-totalDelta));chart.trigger(ZOOM,{delta:delta,axisRanges:ranges,originalEvent:e}),chart._mwTimeout&&clearTimeout(chart._mwTimeout),chart._mwTimeout=setTimeout(function(){chart._endNavigation(e,ZOOM_END)},MOUSEWHEEL_DELAY)}},_startNavigation:function(e,chartEvent){var i,currentAxis,prevented,chart=this,coords=chart._eventCoordinates(e),plotArea=chart._model._plotArea,pane=plotArea.findPointPane(coords),axes=plotArea.axes.slice(0),inAxis=!1;if(pane){for(i=0;i<axes.length;i++)if(currentAxis=axes[i],currentAxis.box.containsPoint(coords)){inAxis=!0;break}!inAxis&&plotArea.backgroundBox().containsPoint(coords)&&(prevented=chart.trigger(chartEvent,{axisRanges:axisRanges(axes),originalEvent:e}),prevented?chart._userEvents.cancel():(chart._suppressHover=!0,chart._unsetActivePoint(),chart._navState={pane:pane,axes:axes}))}},_endNavigation:function(e,chartEvent){var chart=this;chart._navState&&(chart.trigger(chartEvent,{axisRanges:chart._navState.axisRanges,originalEvent:e}),chart._suppressHover=!1,chart._navState=null)},_getChartElement:function(e,match){var element=this.surface.eventTarget(e);if(element){for(var chartElement;element&&!chartElement;)chartElement=element.chartElement,element=element.parent;return chartElement?(chartElement.aliasFor&&(chartElement=chartElement.aliasFor(e,this._eventCoordinates(e))),match&&(chartElement=chartElement.closest(match)),chartElement):void 0}},_eventCoordinates:function(e){var chart=this,isTouch=defined((e.x||{}).client),clientX=isTouch?e.x.client:e.clientX,clientY=isTouch?e.y.client:e.clientY;return chart._toModelCoordinates(clientX,clientY)},_toModelCoordinates:function(clientX,clientY){var element=this.element,offset=element.offset(),paddingLeft=parseInt(element.css("paddingLeft"),10),paddingTop=parseInt(element.css("paddingTop"),10),win=$(window);return new Point2D(clientX-offset.left-paddingLeft+win.scrollLeft(),clientY-offset.top-paddingTop+win.scrollTop())},_tap:function(e){var chart=this,element=chart._getChartElement(e);chart._activePoint===element?chart._click(e):(chart._startHover(e)||chart._unsetActivePoint(),chart._click(e))},_click:function(e){for(var chart=this,element=chart._getChartElement(e);element;)element.click&&element.click(chart,e),element=element.parent},_startHover:function(e){var point,chart=this,element=chart._getChartElement(e),tooltip=chart._tooltip,highlight=chart._highlight,tooltipOptions=chart.options.tooltip;if(!chart._suppressHover&&highlight&&!highlight.isHighlighted(element)&&!chart._sharedTooltip())return point=chart._getChartElement(e,function(element){return element.hover}),point&&!point.hover(chart,e)?(chart._activePoint=point,tooltipOptions=deepExtend({},tooltipOptions,point.options.tooltip),tooltipOptions.visible&&tooltip.show(point),highlight.show(point),point.tooltipTracking):void 0},_mouseover:function(e){var chart=this;chart._startHover(e)&&$(document).on(MOUSEMOVE_TRACKING,proxy(chart._mouseMoveTracking,chart))},_mouseMoveTracking:function(e){var tooltipOptions,seriesPoint,chart=this,options=chart.options,tooltip=chart._tooltip,highlight=chart._highlight,coords=chart._eventCoordinates(e),point=chart._activePoint;chart._plotArea.box.containsPoint(coords)?point&&point.tooltipTracking&&point.series&&point.parent.getNearestPoint&&(seriesPoint=point.parent.getNearestPoint(coords.x,coords.y,point.seriesIx),seriesPoint&&seriesPoint!=point&&(seriesPoint.hover(chart,e),chart._activePoint=seriesPoint,tooltipOptions=deepExtend({},options.tooltip,point.options.tooltip),tooltipOptions.visible&&tooltip.show(seriesPoint),highlight.show(seriesPoint))):($(document).off(MOUSEMOVE_TRACKING),chart._unsetActivePoint())},_mousemove:function(e){var coords=this._eventCoordinates(e);this._trackCrosshairs(coords),this._sharedTooltip()&&this._trackSharedTooltip(coords,e)},_trackCrosshairs:function(coords){var i,current,crosshairs=this._plotArea.crosshairs;for(i=0;i<crosshairs.length;i++)current=crosshairs[i],current.box.containsPoint(coords)?current.showAt(coords):current.hide()},_trackSharedTooltip:function(coords,e){var index,points,chart=this,options=chart.options,plotArea=chart._plotArea,categoryAxis=plotArea.categoryAxis,tooltip=chart._tooltip,tooltipOptions=options.tooltip,highlight=chart._highlight;if(plotArea.box.containsPoint(coords)&&(index=categoryAxis.pointCategoryIndex(coords),index!==chart._tooltipCategoryIx)){points=plotArea.pointsByCategoryIndex(index);var pointArgs=$.map(points,function(point){return point.eventArgs(e)}),hoverArgs=pointArgs[0]||{};hoverArgs.categoryPoints=pointArgs,points.length>0&&!this.trigger(SERIES_HOVER,hoverArgs)?(tooltipOptions.visible&&tooltip.showAt(points,coords),highlight.show(points)):tooltip.hide(),chart._tooltipCategoryIx=index}},_mouseleave:function(e){var chart=this,plotArea=chart._plotArea,tooltip=chart._tooltip,highlight=chart._highlight,target=e.relatedTarget;target&&$(target).closest(tooltip.element).length||(chart._mousemove.cancel(),plotArea.hideCrosshairs(),highlight.hide(),setTimeout(proxy(tooltip.hide,tooltip),TOOLTIP_HIDE_DELAY),chart._tooltipCategoryIx=null)},_unsetActivePoint:function(){var chart=this,tooltip=chart._tooltip,highlight=chart._highlight;chart._activePoint=null,tooltip&&tooltip.hide(),highlight&&highlight.hide()},_onDataChanged:function(){var seriesIx,currentSeries,chart=this,options=chart.options,series=chart._sourceSeries||options.series,seriesLength=series.length,data=chart.dataSource.view(),grouped=(chart.dataSource.group()||[]).length>0,processedSeries=[];for(seriesIx=0;seriesLength>seriesIx;seriesIx++)currentSeries=series[seriesIx],chart._isBindable(currentSeries)&&grouped?append(processedSeries,groupSeries(currentSeries,data)):processedSeries.push(currentSeries||[]);chart._sourceSeries=series,options.series=processedSeries,applySeriesColors(chart.options),chart._bindSeries(),chart._bindCategories(),chart._hasData=!0,chart._deferRedraw()},_deferRedraw:function(){var chart=this;kendo.support.vml?(chart._clearRedrawTimeout(),chart._redrawTimeout=setTimeout(function(){chart.surface&&(chart.trigger(DATABOUND),chart._redraw())},0)):(chart.trigger(DATABOUND),chart._redraw())},_clearRedrawTimeout:function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},_bindSeries:function(){var seriesIx,currentSeries,groupIx,seriesData,chart=this,data=chart.dataSource.view(),series=chart.options.series,seriesLength=series.length;for(seriesIx=0;seriesLength>seriesIx;seriesIx++)currentSeries=series[seriesIx],chart._isBindable(currentSeries)&&(groupIx=currentSeries._groupIx,seriesData=defined(groupIx)?(data[groupIx]||{}).items:data,currentSeries.autoBind!==!1&&(currentSeries.data=seriesData))},_bindCategories:function(){var axisIx,axis,chart=this,data=chart.dataSource.view()||[],grouped=(chart.dataSource.group()||[]).length>0,categoriesData=data,options=chart.options,definitions=[].concat(options.categoryAxis);for(grouped&&data.length&&(categoriesData=data[0].items),axisIx=0;axisIx<definitions.length;axisIx++)axis=definitions[axisIx],axis.autoBind!==!1&&chart._bindCategoryAxis(axis,categoriesData,axisIx)},_bindCategoryAxis:function(axis,data,axisIx){var categoryIx,category,row,count=(data||[]).length;if(axis.field)for(axis.categories=[],categoryIx=0;count>categoryIx;categoryIx++)row=data[categoryIx],category=getField(axis.field,row),0===categoryIx?(axis.categories=[category],axis.dataItems=[row]):(axis.categories.push(category),axis.dataItems.push(row));else this._bindCategoryAxisFromSeries(axis,axisIx)},_bindCategoryAxisFromSeries:function(axis,axisIx){var result,seriesIx,s,onAxis,data,dataIx,dataLength,dataRow,category,getFn,dateAxis,chart=this,items=[],series=chart.options.series,seriesLength=series.length,uniqueCategories={};for(seriesIx=0;seriesLength>seriesIx;seriesIx++)if(s=series[seriesIx],onAxis=s.categoryAxis===axis.name||!s.categoryAxis&&0===axisIx,data=s.data,dataLength=data.length,s.categoryField&&onAxis&&dataLength>0)for(dateAxis=isDateAxis(axis,getField(s.categoryField,data[0])),getFn=dateAxis?getDateField:getField,dataIx=0;dataLength>dataIx;dataIx++)dataRow=data[dataIx],category=getFn(s.categoryField,dataRow),(dateAxis||!uniqueCategories[category])&&(items.push([category,dataRow]),dateAxis||(uniqueCategories[category]=!0));items.length>0&&(dateAxis&&(items=uniqueDates(items,function(a,b){return dateComparer(a[0],b[0])})),result=transpose(items),axis.categories=result[0],axis.dataItems=result[1])},_isBindable:function(series){var field,i,valueFields=SeriesBinder.current.valueFields(series),result=!0;for(i=0;i<valueFields.length;i++)if(field=valueFields[i],field===VALUE?field="field":field+="Field",!defined(series[field])){result=!1;break}return result},_legendItemClick:function(seriesIndex,pointIndex){var transitionsState,visible,point,chart=this,plotArea=chart._plotArea,currentSeries=(plotArea.srcSeries||plotArea.series)[seriesIndex],originalSeries=(chart._sourceSeries||[])[seriesIndex]||currentSeries;inArray(currentSeries.type,[PIE,DONUT,FUNNEL])?(point=originalSeries.data[pointIndex],visible=defined(point.visible)?!point.visible:!1,point.visible=visible):(visible=!originalSeries.visible,originalSeries.visible=visible,currentSeries.visible=visible),chart.options.transitions&&(chart.options.transitions=!1,transitionsState=!0),chart.redraw(),transitionsState&&(chart.options.transitions=!0)},_legendItemHover:function(seriesIndex,pointIndex){var index,items,chart=this,plotArea=chart._plotArea,highlight=chart._highlight,currentSeries=(plotArea.srcSeries||plotArea.series)[seriesIndex];index=inArray(currentSeries.type,[PIE,DONUT,FUNNEL])?pointIndex:seriesIndex,items=plotArea.pointsBySeriesIndex(index),highlight.show(items)},_shouldAttachMouseMove:function(){var chart=this;return chart._plotArea.crosshairs.length||chart._tooltip&&chart._sharedTooltip()},setOptions:function(options){var chart=this,dataSource=options.dataSource;options.dataSource=undefined,chart._originalOptions=deepExtend(chart._originalOptions,options),chart.options=deepExtend({},chart._originalOptions),chart._sourceSeries=null,$(document).off(MOUSEMOVE_NS),Widget.fn._setEvents.call(chart,options),chart._initTheme(chart.options),dataSource&&chart.setDataSource(dataSource),chart._hasDataSource?chart._onDataChanged():(chart._bindCategories(),chart.redraw()),chart._shouldAttachMouseMove()&&chart.element.on(MOUSEMOVE_NS,chart._mousemove)},destroy:function(){var chart=this,dataSource=chart.dataSource;chart.element.off(NS),dataSource.unbind(CHANGE,chart._dataChangeHandler),$(document).off(MOUSEMOVE_TRACKING),chart._userEvents&&chart._userEvents.destroy(),chart._destroyView(),chart.surface.destroy(),chart.surface=null,chart._clearRedrawTimeout(),Widget.fn.destroy.call(chart)},_destroyView:function(){var chart=this,model=chart._model,selections=chart._selections;if(model&&(model.destroy(),chart._model=null),selections)for(;selections.length>0;)selections.shift().destroy();chart._unsetActivePoint(),chart._tooltip&&chart._tooltip.destroy(),chart._highlight&&chart._highlight.destroy(),chart._zoomSelection&&chart._zoomSelection.destroy()}});dataviz.ExportMixin.extend(Chart.fn),kendo.PDFMixin&&kendo.PDFMixin.extend(Chart.fn);var PlotAreaFactory=Class.extend({init:function(){this._registry=[]},register:function(type,seriesTypes){this._registry.push({type:type,seriesTypes:seriesTypes})},create:function(srcSeries,options){var i,entry,series,registry=this._registry,match=registry[0];for(i=0;i<registry.length;i++)if(entry=registry[i],series=filterSeriesByType(srcSeries,entry.seriesTypes),series.length>0){match=entry;break}return new match.type(series,options)}});PlotAreaFactory.current=new PlotAreaFactory;var SeriesBinder=Class.extend({init:function(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}},register:function(seriesTypes,valueFields,otherFields){var i,type,binder=this;for(valueFields=valueFields||[VALUE],i=0;i<seriesTypes.length;i++)type=seriesTypes[i],binder._valueFields[type]=valueFields,binder._otherFields[type]=otherFields,binder._nullValue[type]=binder._makeValue(valueFields,null),binder._undefinedValue[type]=binder._makeValue(valueFields,undefined)},canonicalFields:function(series){return this.valueFields(series).concat(this.otherFields(series))},valueFields:function(series){return this._valueFields[series.type]||[VALUE]},otherFields:function(series){return this._otherFields[series.type]||[VALUE]},bindPoint:function(series,pointIx){var fields,fieldData,srcValueFields,srcPointFields,value,binder=this,data=series.data,pointData=data[pointIx],result={valueFields:{value:pointData}},valueFields=binder.valueFields(series),otherFields=binder._otherFields[series.type];return null===pointData?value=binder._nullValue[series.type]:defined(pointData)?isArray(pointData)?(fieldData=pointData.slice(valueFields.length),value=binder._bindFromArray(pointData,valueFields),fields=binder._bindFromArray(fieldData,otherFields)):typeof pointData===OBJECT&&(srcValueFields=binder.sourceFields(series,valueFields),srcPointFields=binder.sourceFields(series,otherFields),value=binder._bindFromObject(pointData,valueFields,srcValueFields),fields=binder._bindFromObject(pointData,otherFields,srcPointFields)):value=binder._undefinedValue[series.type],defined(value)&&(1===valueFields.length?result.valueFields.value=value[valueFields[0]]:result.valueFields=value),result.fields=fields||{},result},_makeValue:function(fields,initialValue){var i,fieldName,value={},length=fields.length;for(i=0;length>i;i++)fieldName=fields[i],value[fieldName]=initialValue;return value},_bindFromArray:function(array,fields){var i,length,value={};if(fields)for(length=math.min(fields.length,array.length),i=0;length>i;i++)value[fields[i]]=array[i];return value},_bindFromObject:function(object,fields,srcFields){var i,length,fieldName,srcFieldName,value={};if(fields)for(length=fields.length,srcFields=srcFields||fields,i=0;length>i;i++)fieldName=fields[i],srcFieldName=srcFields[i],value[fieldName]=getField(srcFieldName,object);return value},sourceFields:function(series,canonicalFields){var i,length,fieldName,sourceFields,sourceFieldName;if(canonicalFields)for(length=canonicalFields.length,sourceFields=[],i=0;length>i;i++)fieldName=canonicalFields[i],sourceFieldName=fieldName===VALUE?"field":fieldName+"Field",sourceFields.push(series[sourceFieldName]||fieldName);return sourceFields}});SeriesBinder.current=new SeriesBinder;var BarLabel=ChartElement.extend({init:function(content,options){var barLabel=this;ChartElement.fn.init.call(barLabel,options),this.textBox=new TextBox(content,barLabel.options),barLabel.append(this.textBox)},options:{position:OUTSIDE_END,margin:getSpacing(3),padding:getSpacing(4),color:BLACK,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:FADEIN,delay:INITIAL_ANIMATION_DURATION},zIndex:2},createVisual:function(){this.textBox.options.noclip=this.options.noclip},reflow:function(targetBox){var barLabel=this,options=barLabel.options,vertical=options.vertical,aboveAxis=options.aboveAxis,text=barLabel.children[0],box=text.box,padding=text.options.padding;text.options.align=vertical?CENTER:LEFT,text.options.vAlign=vertical?TOP:CENTER,options.position==INSIDE_END?vertical?(text.options.vAlign=TOP,!aboveAxis&&box.height()<targetBox.height()&&(text.options.vAlign=BOTTOM)):text.options.align=aboveAxis?RIGHT:LEFT:options.position==CENTER?(text.options.vAlign=CENTER,text.options.align=CENTER):options.position==INSIDE_BASE?vertical?text.options.vAlign=aboveAxis?BOTTOM:TOP:text.options.align=aboveAxis?LEFT:RIGHT:options.position==OUTSIDE_END&&(vertical?targetBox=aboveAxis?new Box2D(targetBox.x1,targetBox.y1-box.height(),targetBox.x2,targetBox.y1):new Box2D(targetBox.x1,targetBox.y2,targetBox.x2,targetBox.y2+box.height()):(text.options.align=CENTER,targetBox=aboveAxis?new Box2D(targetBox.x2,targetBox.y1,targetBox.x2+box.width(),targetBox.y2):new Box2D(targetBox.x1-box.width(),targetBox.y1,targetBox.x1,targetBox.y2))),options.rotation||(vertical?padding.left=padding.right=(targetBox.width()-text.contentBox.width())/2:padding.top=padding.bottom=(targetBox.height()-text.contentBox.height())/2),text.reflow(targetBox)},alignToClipBox:function(clipBox){var targetBox,barLabel=this,vertical=barLabel.options.vertical,field=vertical?Y:X,start=field+"1",end=field+"2",text=barLabel.children[0],parentBox=barLabel.parent.box;(parentBox[start]<clipBox[start]||clipBox[end]<parentBox[end])&&(targetBox=text.paddingBox.clone(),targetBox[start]=math.max(parentBox[start],clipBox[start]),targetBox[end]=math.min(parentBox[end],clipBox[end]),this.reflow(targetBox))}}),LegendItem=BoxElement.extend({init:function(options){var item=this;BoxElement.fn.init.call(item,options),item.createContainer(),item.createMarker(),item.createLabel()},createContainer:function(){var item=this;item.container=new FloatElement({vertical:!1,wrap:!1,align:CENTER}),item.append(item.container)},createMarker:function(){this.container.append(new ShapeElement(this.markerOptions()))},markerOptions:function(){var options=this.options,markerColor=options.markerColor;return deepExtend({},options.markers,{background:markerColor,border:{color:markerColor}})},createLabel:function(){var item=this,options=item.options,labelOptions=deepExtend({},options.labels);item.container.append(new TextBox(options.text,labelOptions))},renderComplete:function(){ChartElement.fn.renderComplete.call(this);var cursor=this.options.cursor||{},eventSink=this._itemOverlay=draw.Path.fromRect(this.container.box.toRect(),{fill:{color:WHITE,opacity:0},stroke:null,cursor:cursor.style||cursor});this.appendVisual(eventSink)},click:function(widget,e){var args=this.eventArgs(e);widget.trigger(LEGEND_ITEM_CLICK,args)||(e.preventDefault(),widget._legendItemClick(args.seriesIndex,args.pointIndex))},hover:function(widget,e){var args=this.eventArgs(e);return widget.trigger(LEGEND_ITEM_HOVER,args)||(e.preventDefault(),widget._legendItemHover(args.seriesIndex,args.pointIndex)),!0},leave:function(widget){widget._unsetActivePoint()},eventArgs:function(e){var options=this.options;return{element:$(e.target),text:options.text,series:options.series,seriesIndex:options.series.index,pointIndex:options.pointIndex}},renderVisual:function(){var that=this,options=that.options,customVisual=options.visual;customVisual?(that.visual=customVisual({active:options.active,series:options.series,pointIndex:options.pointIndex,options:{markers:that.markerOptions(),labels:options.labels},createVisual:function(){that.createVisual(),that.renderChildren(),that.renderComplete();var defaultVisual=that.visual;return delete that.visual,defaultVisual}}),this.addVisual()):ChartElement.fn.renderVisual.call(that)}}),LegendLayout=ChartElement.extend({render:function(){var legendItem,items=this.children,options=this.options,vertical=options.vertical;this.visual=new draw.Layout(null,{spacing:vertical?0:options.spacing,lineSpacing:vertical?options.spacing:0,orientation:vertical?"vertical":"horizontal"});for(var idx=0;idx<items.length;idx++)legendItem=items[idx],legendItem.reflow(new Box2D),legendItem.renderVisual()},reflow:function(box){this.visual.rect(box.toRect()),this.visual.reflow();var bbox=this.visual.clippedBBox();bbox?this.box=dataviz.rectToBox(bbox):this.box=new Box2D},renderVisual:function(){this.addVisual()},createVisual:noop}),Legend=ChartElement.extend({init:function(options){var legend=this;ChartElement.fn.init.call(legend,options),inArray(legend.options.position,[TOP,RIGHT,BOTTOM,LEFT,CUSTOM])||(legend.options.position=RIGHT),legend.createContainer(),legend.createItems()},options:{position:RIGHT,items:[],labels:{margin:{left:6}},offsetX:0,offsetY:0,margin:getSpacing(5),padding:getSpacing(5),border:{color:BLACK,width:0},item:{cursor:POINTER},spacing:6,background:"",zIndex:1,markers:{border:{width:1},width:7,height:7,type:"rect",align:LEFT,vAlign:CENTER}},createContainer:function(){var legend=this,options=legend.options,userAlign=options.align,position=options.position,align=position,vAlign=CENTER;position==CUSTOM?align=LEFT:inArray(position,[TOP,BOTTOM])?(align="start"==userAlign?LEFT:"end"==userAlign?RIGHT:CENTER,vAlign=position):userAlign&&("start"==userAlign?vAlign=TOP:"end"==userAlign&&(vAlign=BOTTOM)),legend.container=new BoxElement({margin:options.margin,padding:options.padding,background:options.background,border:options.border,vAlign:vAlign,align:align,zIndex:options.zIndex,shrinkToFit:!0}),legend.append(legend.container)},createItems:function(){var innerElement,i,item,legend=this,options=legend.options,items=options.items,count=items.length,vertical=legend.isVertical();for(innerElement=new LegendLayout({vertical:vertical,spacing:options.spacing}),options.reverse&&(items=items.slice(0).reverse()),i=0;count>i;i++)item=items[i],innerElement.append(new LegendItem(deepExtend({},{markers:options.markers,labels:options.labels},options.item,item)));innerElement.render(),legend.container.append(innerElement)},isVertical:function(){var legend=this,options=legend.options,orientation=options.orientation,position=options.position,vertical=position==CUSTOM&&orientation!=HORIZONTAL||(defined(orientation)?orientation!=HORIZONTAL:inArray(position,[LEFT,RIGHT]));return vertical},hasItems:function(){return this.container.children[0].children.length>0},reflow:function(targetBox){var legend=this,options=legend.options;return targetBox=targetBox.clone(),legend.hasItems()?void(options.position===CUSTOM?(legend.containerCustomReflow(targetBox),legend.box=targetBox):legend.containerReflow(targetBox)):void(legend.box=targetBox)},containerReflow:function(targetBox){
var box,legend=this,options=legend.options,position=options.position,pos=position==TOP||position==BOTTOM?X:Y,containerBox=targetBox.clone(),container=legend.container,width=options.width,height=options.height,vertical=legend.isVertical(),alignTarget=targetBox.clone();(position==LEFT||position==RIGHT)&&(containerBox.y1=alignTarget.y1=0),vertical&&height?(containerBox.y2=containerBox.y1+height,containerBox.align(alignTarget,Y,container.options.vAlign)):!vertical&&width&&(containerBox.x2=containerBox.x1+width,containerBox.align(alignTarget,X,container.options.align)),container.reflow(containerBox),containerBox=container.box,box=containerBox.clone(),(options.offsetX||options.offsetY)&&(containerBox.translate(options.offsetX,options.offsetY),legend.container.reflow(containerBox)),box[pos+1]=targetBox[pos+1],box[pos+2]=targetBox[pos+2],legend.box=box},containerCustomReflow:function(targetBox){var legend=this,options=legend.options,offsetX=options.offsetX,offsetY=options.offsetY,container=legend.container,width=options.width,height=options.height,vertical=legend.isVertical(),containerBox=targetBox.clone();vertical&&height?containerBox.y2=containerBox.y1+height:!vertical&&width&&(containerBox.x2=containerBox.x1+width),container.reflow(containerBox),containerBox=container.box,container.reflow(Box2D(offsetX,offsetY,offsetX+containerBox.width(),offsetY+containerBox.height()))},renderVisual:function(){this.hasItems()&&ChartElement.fn.renderVisual.call(this)}}),CategoryAxis=Axis.extend({init:function(options){var axis=this;options=options||{},this._initFields(),this._initCategories(options),Axis.fn.init.call(axis,options)},_initFields:function(){this._ticks={},this.outOfRangeMin=0,this.outOfRangeMax=0},_initCategories:function(options){var categories=(options.categories||[]).slice(0);if(options.categories=categories,options.limitCategories&&(defined(options.min)||defined(options.max))&&categories.length){options.srcCategories=options.categories;var min=defined(options.min)?math.floor(options.min):0,max=defined(options.max)?math.ceil(options.max)+1:categories.length;options.outOfRangePoints&&(min-1>=0&&(min--,this.outOfRangeMin=1),max+1<options.srcCategories.length&&(max++,this.outOfRangeMax=1)),options.categories=options.categories.slice(min,max)}},options:{type:CATEGORY,categories:[],vertical:!1,majorGridLines:{visible:!1,width:1,color:BLACK},labels:{zIndex:1},justified:!1},rangeIndices:function(){var range,options=this.options;if(options.limitCategories){var length=(options.categories.length||1)-1,min=this.outOfRangeMin+(defined(options.min)?options.min%1:0),max=(defined(options.max)&&options.max%1!==0?length-(1-options.max%1):length)-this.outOfRangeMax;range={min:min,max:max}}else range=this.totalRangeIndices();return range},totalRangeIndices:function(){var options=this.options;return{min:isNumber(options.min)?options.min:0,max:isNumber(options.max)?options.max:((options.srcCategories||options.categories).length||1)-1}},range:function(){var options=this.options;return{min:isNumber(options.min)?options.min:0,max:isNumber(options.max)?options.max:options.categories.length}},totalRange:function(){return{min:0,max:(this.options.srcCategories||this.options.categories).length}},getScale:function(){var range=this.rangeIndices(),min=range.min,max=range.max+(this.options.justified?0:1),lineBox=this.lineBox(),size=this.options.vertical?lineBox.height():lineBox.width(),scale=size/(max-min||1);return scale*(this.options.reverse?-1:1)},getTickPositions:function(stepSize){for(var axis=this,options=axis.options,vertical=options.vertical,lineBox=axis.lineBox(),reverse=options.reverse,scale=axis.getScale(),range=axis.rangeIndices(),min=range.min,max=range.max+(options.justified?0:1),current=min%1!==0?math.floor(min/1)+stepSize:min,pos=lineBox[(vertical?Y:X)+(reverse?2:1)],positions=[];max>=current;)positions.push(pos+round(scale*(current-min),COORD_PRECISION)),current+=stepSize;return positions},getLabelsTickPositions:function(){var tickPositions=this.getMajorTickPositions().slice(0),range=this.rangeIndices(),scale=this.getScale();return range.min%1!==0&&tickPositions.unshift(tickPositions[0]-scale),range.max%1!==0&&tickPositions.push(last(tickPositions)+scale),tickPositions},labelTickIndex:function(label){var index=label.index,range=this.rangeIndices();return range.min>0&&(index-=math.floor(range.min)),index},arrangeLabels:function(){Axis.fn.arrangeLabels.call(this),this.hideOutOfRangeLabels()},hideOutOfRangeLabels:function(){var box=this.box,labels=this.labels,valueAxis=this.options.vertical?Y:X,start=box[valueAxis+1],end=box[valueAxis+2],firstLabel=labels[0],lastLabel=last(labels);labels.length&&((firstLabel.box[valueAxis+1]>end||firstLabel.box[valueAxis+2]<start)&&(firstLabel.options.visible=!1),(lastLabel.box[valueAxis+1]>end||lastLabel.box[valueAxis+2]<start)&&(lastLabel.options.visible=!1))},getMajorTickPositions:function(){return this.getTicks().majorTicks},getMinorTickPositions:function(){return this.getTicks().minorTicks},getTicks:function(){var hash,axis=this,cache=axis._ticks,options=axis.options,range=axis.rangeIndices(),reverse=options.reverse,justified=options.justified,lineBox=axis.lineBox();return hash=lineBox.getHash()+range.min+","+range.max+reverse+justified,cache._hash!==hash&&(cache._hash=hash,cache.majorTicks=axis.getTickPositions(1),cache.minorTicks=axis.getTickPositions(.5)),cache},getSlot:function(from,to,limit){var p1,p2,axis=this,options=axis.options,reverse=options.reverse,justified=options.justified,valueAxis=options.vertical?Y:X,lineBox=axis.lineBox(),totalRange=axis.totalRange(),range=axis.rangeIndices(),min=range.min,scale=this.getScale(),lineStart=lineBox[valueAxis+(reverse?2:1)],slotBox=lineBox.clone(),singleSlot=!defined(to);return from=valueOrDefault(from,0),to=valueOrDefault(to,from),from=limitValue(from,totalRange.min,totalRange.max||1),to=limitValue(to-1,from,totalRange.max||1),to=math.max(from,to),p1=lineStart+(from-min)*scale,p2=lineStart+(to+1-min)*scale,singleSlot&&justified&&(p2=p1),limit&&(p1=limitValue(p1,lineBox[valueAxis+1],lineBox[valueAxis+2]),p2=limitValue(p2,lineBox[valueAxis+1],lineBox[valueAxis+2])),slotBox[valueAxis+1]=reverse?p2:p1,slotBox[valueAxis+2]=reverse?p1:p2,slotBox},pointCategoryIndex:function(point){var axis=this,options=axis.options,reverse=options.reverse,justified=options.justified,valueAxis=options.vertical?Y:X,lineBox=axis.lineBox(),range=axis.rangeIndices(),startValue=reverse?range.max+(justified?0:1):range.min,scale=this.getScale(),lineStart=lineBox[valueAxis+1],lineEnd=lineBox[valueAxis+2],pos=point[valueAxis];if(lineStart>pos||pos>lineEnd)return null;var size=pos-lineStart,value=size/scale;value=startValue+value;var diff=value%1;return justified?value=math.round(value):0===diff&&value>0&&value--,math.floor(value)},getCategory:function(point){var index=this.pointCategoryIndex(point);return null===index?null:this.options.categories[index]},categoryIndex:function(value){return indexOf(value,this.options.categories)},translateRange:function(delta){var axis=this,options=axis.options,lineBox=axis.lineBox(),size=options.vertical?lineBox.height():lineBox.width(),range=options.categories.length,scale=size/range,offset=round(delta/scale,DEFAULT_PRECISION);return{min:offset,max:range+offset}},zoomRange:function(rate){var rangeIndices=this.totalRangeIndices(),totalRange=this.totalRange(),totalMax=totalRange.max-1,totalMin=totalRange.min,min=limitValue(rangeIndices.min+rate,totalMin,totalMax),max=limitValue(rangeIndices.max-rate,totalMin,totalMax);return max-min>=0?{min:min,max:max}:void 0},scaleRange:function(scale){var axis=this,options=axis.options,range=options.categories.length,delta=scale*range;return{min:-delta,max:range+delta}},labelsCount:function(){var labelsRange=this.labelsRange();return labelsRange.max-labelsRange.min},labelsRange:function(){var skip,options=this.options,labelOptions=options.labels,justified=options.justified,range=this.totalRangeIndices(),min=range.min,max=range.max,start=options.limitCategories?math.floor(min)-this.outOfRangeMin:0;return justified?(min=math.ceil(min),max=math.floor(max)):(min=math.floor(min),max=math.ceil(max)),skip=min>labelOptions.skip?labelOptions.skip+labelOptions.step*math.ceil((min-labelOptions.skip)/labelOptions.step):labelOptions.skip,{min:skip-start,max:(options.categories.length?max+1:0)-start}},createAxisLabel:function(index,labelOptions){var axis=this,options=axis.options,dataItem=options.dataItems?options.dataItems[index]:null,category=valueOrDefault(options.categories[index],""),text=axis.axisLabelText(category,dataItem,labelOptions);return new AxisLabel(category,text,index,dataItem,labelOptions)},shouldRenderNote:function(value){var categories=this.options.categories;return categories.length&&categories.length>value&&value>=0},pan:function(delta){var range=this.totalRangeIndices(),scale=this.getScale(),offset=round(delta/scale,DEFAULT_PRECISION),totalRange=this.totalRange(),min=range.min+offset,max=range.max+offset;return this.limitRange(min,max,totalRange.min,totalRange.max-1)},pointsRange:function(start,end,exact){var axis=this,options=axis.options,reverse=options.reverse,justified=options.justified,valueAxis=options.vertical?Y:X,lineBox=axis.lineBox(),range=axis.totalRangeIndices(),scale=this.getScale(),lineStart=lineBox[valueAxis+(reverse?2:1)],diffStart=start[valueAxis]-lineStart,diffEnd=end[valueAxis]-lineStart,min=range.min+diffStart/scale,max=range.min+diffEnd/scale;return min=math.min(min,max),max=math.max(min,max),exact||justified||max--,{min:min,max:max}}}),DateCategoryAxis=CategoryAxis.extend({init:function(options){var baseUnit,useDefault,axis=this;options=options||{},options=deepExtend({roundToBaseUnit:!0},options,{categories:toDate(options.categories),min:toDate(options.min),max:toDate(options.max)}),options.categories&&options.categories.length>0?(baseUnit=(options.baseUnit||"").toLowerCase(),useDefault=baseUnit!==FIT&&!inArray(baseUnit,BASE_UNITS),useDefault&&(options.baseUnit=axis.defaultBaseUnit(options)),(baseUnit===FIT||options.baseUnitStep===AUTO)&&axis.autoBaseUnit(options),axis.groupCategories(options)):options.baseUnit=options.baseUnit||DAYS,this._initFields(),Axis.fn.init.call(axis,options)},options:{type:DATE,labels:{dateFormats:DateLabelFormats},autoBaseUnitSteps:{seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10},shouldRenderNote:function(value){var axis=this,range=axis.range(),categories=axis.options.categories||[];return dateComparer(value,range.min)>=0&&dateComparer(value,range.max)<=0&&categories.length},parseNoteValue:function(value){return toDate(value)},translateRange:function(delta){var from,to,axis=this,options=axis.options,baseUnit=options.baseUnit,weekStartDay=options.weekStartDay,lineBox=axis.lineBox(),size=options.vertical?lineBox.height():lineBox.width(),range=axis.range(),scale=size/(range.max-range.min),offset=round(delta/scale,DEFAULT_PRECISION);return range.min&&range.max&&(from=addTicks(options.min||range.min,offset),to=addTicks(options.max||range.max,offset),range={min:addDuration(from,0,baseUnit,weekStartDay),max:addDuration(to,0,baseUnit,weekStartDay)}),range},scaleRange:function(delta){var step,axis=this,rounds=math.abs(delta),range=axis.range(),from=range.min,to=range.max;if(range.min&&range.max){for(;rounds--;)range=dateDiff(from,to),step=math.round(.1*range),0>delta?(from=addTicks(from,step),to=addTicks(to,-step)):(from=addTicks(from,-step),to=addTicks(to,step));range={min:from,max:to}}return range},defaultBaseUnit:function(options){var categoryIx,cat,diff,lastCat,unit,categories=options.categories,count=defined(categories)?categories.length:0,minDiff=MAX_VALUE;for(categoryIx=0;count>categoryIx;categoryIx++)cat=categories[categoryIx],cat&&lastCat&&(diff=dateDiff(cat,lastCat),diff>0&&(minDiff=math.min(minDiff,diff),unit=minDiff>=TIME_PER_YEAR?YEARS:minDiff>=TIME_PER_MONTH-3*TIME_PER_DAY?MONTHS:minDiff>=TIME_PER_WEEK?WEEKS:minDiff>=TIME_PER_DAY?DAYS:minDiff>=TIME_PER_HOUR?HOURS:minDiff>=TIME_PER_MINUTE?MINUTES:SECONDS)),lastCat=cat;return unit||DAYS},_categoryRange:function(categories){var range=categories._range;return range||(range=categories._range=sparseArrayLimits(categories)),range},totalRange:function(){return{min:0,max:this.options.categories.length}},rangeIndices:function(){var options=this.options,categories=options.categories,categoryLimits=this._categoryRange(options.srcCategories||categories),min=options.min||toDate(categoryLimits.min),max=options.max||toDate(categoryLimits.max),length=categories.length-1,minIdx=0,maxIdx=0;if(categories.length){var rangeSize=dateDiff(last(categories),categories[0])||1;minIdx=dateDiff(min,categories[0])/rangeSize*length,maxIdx=length-dateDiff(last(categories),max)/rangeSize*length,options.justified||options.roundToBaseUnit||maxIdx==length||maxIdx--,options.roundToBaseUnit&&(minIdx=math.floor(minIdx),maxIdx=math.floor(maxIdx))}return{min:minIdx,max:maxIdx}},labelsRange:function(){var options=this.options,labelOptions=options.labels,range=this.rangeIndices(),min=math.floor(range.min),max=math.ceil(range.max);return{min:min+labelOptions.skip,max:options.categories.length?max+1:0}},panRange:function(from,to){var range=this._categoryRange(this.options.srcCategories),options=this.options,baseUnit=options.baseUnit,baseUnitStep=options.baseUnitStep||1,weekStartDay=options.weekStartDay,min=toTime(addDuration(range.min,0,baseUnit,weekStartDay)),max=toTime(addDuration(range.max,options.justified||options.roundToBaseUnit?0:baseUnitStep,baseUnit,weekStartDay));return this.limitRange(from,to,min,max)},datesRange:function(){var range=this._categoryRange(this.options.srcCategories);return{min:toDate(range.min),max:toDate(range.max)}},pan:function(delta){var panRange,from,to,axis=this,options=axis.options,baseUnit=options.baseUnit,lineBox=axis.lineBox(),size=options.vertical?lineBox.height():lineBox.width(),range=axis.range(),scale=size/(range.max-range.min),offset=round(delta/scale,DEFAULT_PRECISION);return range.min&&range.max&&(from=addTicks(options.min||range.min,offset),to=addTicks(options.max||range.max,offset),panRange=this.panRange(from,to),panRange&&(panRange.baseUnit=baseUnit,panRange.baseUnitStep=options.baseUnitStep||1)),panRange},pointsRange:function(start,end){var pointsRange=CategoryAxis.fn.pointsRange.call(this,start,end,!0),categories=this.options.categories,length=categories.length-1,rangeSize=dateDiff(last(categories),categories[0]),min=addTicks(categories[0],pointsRange.min/length*rangeSize),max=addTicks(categories[0],pointsRange.max/length*rangeSize);return{min:min,max:max}},zoomRange:function(delta){var options=this.options,range=this._categoryRange(this.options.categories),totalRange=this._categoryRange(this.options.srcCategories),baseUnit=options.baseUnit,baseUnitStep=options.baseUnitStep||1,weekStartDay=options.weekStartDay,min=addDuration(toDate(options.min||range.min),delta*baseUnitStep,baseUnit,weekStartDay),max=addDuration(toDate(options.max||range.max),-delta*baseUnitStep,baseUnit,weekStartDay),minRange=TIME_PER_UNIT[baseUnit]*baseUnitStep;return min=toDate(limitValue(min,totalRange.min,totalRange.max)),max=toDate(limitValue(max,totalRange.min,totalRange.max)),dateDiff(max,min)>minRange?{min:addDuration(min,0,baseUnit,weekStartDay),max:addDuration(max,0,baseUnit,weekStartDay)}:void 0},range:function(options){options=options||this.options;var categories=options.categories,autoUnit=options.baseUnit===FIT,baseUnit=autoUnit?BASE_UNITS[0]:options.baseUnit,baseUnitStep=options.baseUnitStep||1,min=toTime(options.min),max=toTime(options.max),categoryLimits=this._categoryRange(categories),totalLimits=this._categoryRange(options.srcCategories||categories),minCategory=toTime(categoryLimits.min),maxCategory=toTime(categoryLimits.max),rangeMin=addDuration(min||minCategory,0,baseUnit,options.weekStartDay),rangeMax=addDuration(max||maxCategory,baseUnitStep,baseUnit,options.weekStartDay);return options.outOfRangePoints&&(totalLimits.min<rangeMin&&(rangeMin=addDuration(rangeMin,-baseUnitStep,baseUnit,options.weekStartDay)),rangeMax<=totalLimits.max&&(rangeMax=addDuration(rangeMax,baseUnitStep,baseUnit,options.weekStartDay))),options.limitRange&&(rangeMax=limitValue(rangeMax,totalLimits.min,addDuration(totalLimits.max,baseUnitStep,baseUnit,options.weekStartDay))),{min:toDate(rangeMin),max:toDate(rangeMax)}},autoBaseUnit:function(options){for(var unitSteps,step,nextStep,axis=this,range=axis.range(deepExtend({},options,{baseUnitStep:1})),autoUnit=options.baseUnit===FIT,autoUnitIx=0,baseUnit=autoUnit?BASE_UNITS[autoUnitIx++]:options.baseUnit,span=range.max-range.min,units=span/TIME_PER_UNIT[baseUnit],totalUnits=units,maxDateGroups=options.maxDateGroups||axis.options.maxDateGroups,autoBaseUnitSteps=deepExtend({},axis.options.autoBaseUnitSteps,options.autoBaseUnitSteps);!step||units>maxDateGroups;)if(unitSteps=unitSteps||autoBaseUnitSteps[baseUnit].slice(0),nextStep=unitSteps.shift())step=nextStep,units=totalUnits/step;else{if(baseUnit===last(BASE_UNITS)){step=math.ceil(totalUnits/maxDateGroups);break}if(!autoUnit){units>maxDateGroups&&(step=math.ceil(totalUnits/maxDateGroups));break}baseUnit=BASE_UNITS[autoUnitIx++]||last(BASE_UNITS),totalUnits=span/TIME_PER_UNIT[baseUnit],unitSteps=null}options.baseUnitStep=step,options.baseUnit=baseUnit},_timeScale:function(){var timeRange,axis=this,range=axis.range(),options=axis.options,lineBox=axis.lineBox(),vertical=options.vertical,lineSize=vertical?lineBox.height():lineBox.width();if(options.justified&&options._collapse!==!1){var categoryLimits=this._categoryRange(options.categories),maxCategory=toTime(categoryLimits.max);timeRange=toDate(maxCategory)-range.min}else timeRange=range.max-range.min;return lineSize/timeRange},groupCategories:function(options){var date,nextDate,axis=this,categories=options.categories,maxCategory=toDate(sparseArrayMax(categories)),baseUnit=options.baseUnit,baseUnitStep=options.baseUnitStep||1,range=axis.range(options),max=range.max,groups=[];for(date=range.min;max>date&&(groups.push(date),nextDate=addDuration(date,baseUnitStep,baseUnit,options.weekStartDay),!(nextDate>maxCategory)||options.max);date=nextDate);options.srcCategories=categories,options.categories=groups},createAxisLabel:function(index,labelOptions){var options=this.options,dataItem=options.dataItems?options.dataItems[index]:null,date=options.categories[index],baseUnit=options.baseUnit,visible=!0,unitFormat=labelOptions.dateFormats[baseUnit];if(options.justified){var roundedDate=floorDate(date,baseUnit,options.weekStartDay);visible=dateEquals(roundedDate,date)}else options.roundToBaseUnit||(visible=!dateEquals(this.range().max,date));if(visible){labelOptions.format=labelOptions.format||unitFormat;var text=this.axisLabelText(date,dataItem,labelOptions);if(text)return new AxisLabel(date,text,index,dataItem,labelOptions)}},categoryIndex:function(value,range,limit){var index,axis=this,options=axis.options,categories=options.categories;return value=toDate(value),range=range||axis.range(),limit&&value&&options.roundToBaseUnit&&value>=range.max?categories.length:!value||value<range.min||value>=range.max?-1:index=lteDateIndex(value,categories)},getSlot:function(a,b,limit){var axis=this;return typeof a===OBJECT&&(a=axis.categoryIndex(a,null,limit)),typeof b===OBJECT&&(b=axis.categoryIndex(b,null,limit)),CategoryAxis.fn.getSlot.call(axis,a,b,limit)}}),DateValueAxis=Axis.extend({init:function(seriesMin,seriesMax,options){var axis=this;options=options||{},deepExtend(options,{min:toDate(options.min),max:toDate(options.max),axisCrossingValue:toDate(options.axisCrossingValues||options.axisCrossingValue)}),options=axis.applyDefaults(toDate(seriesMin),toDate(seriesMax),options),Axis.fn.init.call(axis,options)},options:{type:DATE,majorGridLines:{visible:!0,width:1,color:BLACK},labels:{dateFormats:DateLabelFormats}},applyDefaults:function(seriesMin,seriesMax,options){var axis=this,min=options.min||seriesMin,max=options.max||seriesMax,baseUnit=options.baseUnit||axis.timeUnits(max-min),baseUnitTime=TIME_PER_UNIT[baseUnit],autoMin=floorDate(toTime(min)-1,baseUnit)||toDate(max),autoMax=ceilDate(toTime(max)+1,baseUnit),userMajorUnit=options.majorUnit?options.majorUnit:undefined,majorUnit=userMajorUnit||dataviz.ceil(dataviz.autoMajorUnit(autoMin.getTime(),autoMax.getTime()),baseUnitTime)/baseUnitTime,actualUnits=duration(autoMin,autoMax,baseUnit),totalUnits=dataviz.ceil(actualUnits,majorUnit),unitsToAdd=totalUnits-actualUnits,head=math.floor(unitsToAdd/2),tail=unitsToAdd-head;return options.baseUnit||delete options.baseUnit,options.baseUnit=options.baseUnit||baseUnit,options.min=options.min||addDuration(autoMin,-head,baseUnit),options.max=options.max||addDuration(autoMax,tail,baseUnit),options.minorUnit=options.minorUnit||majorUnit/5,options.majorUnit=majorUnit,this.totalMin=toTime(floorDate(toTime(seriesMin)-1,baseUnit)),this.totalMax=toTime(ceilDate(toTime(seriesMax)+1,baseUnit)),options},range:function(){var options=this.options;return{min:options.min,max:options.max}},getDivisions:function(stepValue){var options=this.options;return math.floor(duration(options.min,options.max,options.baseUnit)/stepValue+1)},getTickPositions:function(step){for(var options=this.options,vertical=options.vertical,reverse=options.reverse,lineBox=this.lineBox(),dir=(vertical?-1:1)*(reverse?-1:1),startEdge=1===dir?1:2,start=lineBox[(vertical?Y:X)+startEdge],divisions=this.getDivisions(step),timeRange=options.max-options.min,lineSize=vertical?lineBox.height():lineBox.width(),scale=lineSize/timeRange,positions=[start],i=1;divisions>i;i++){var date=addDuration(options.min,i*options.majorUnit,options.baseUnit),pos=start+(date-options.min)*scale*dir;positions.push(round(pos,COORD_PRECISION))}return positions},getMajorTickPositions:function(){var axis=this;return axis.getTickPositions(axis.options.majorUnit)},getMinorTickPositions:function(){var axis=this;return axis.getTickPositions(axis.options.minorUnit)},getSlot:function(a,b,limit){return NumericAxis.fn.getSlot.call(this,toDate(a),toDate(b),limit)},getValue:function(point){var value=NumericAxis.fn.getValue.call(this,point);return null!==value?toDate(value):null},labelsCount:function(){return this.getDivisions(this.options.majorUnit)},createAxisLabel:function(index,labelOptions){var options=this.options,offset=index*options.majorUnit,date=options.min;offset>0&&(date=addDuration(date,offset,options.baseUnit));var unitFormat=labelOptions.dateFormats[options.baseUnit];labelOptions.format=labelOptions.format||unitFormat;var text=this.axisLabelText(date,null,labelOptions);return new AxisLabel(date,text,index,null,labelOptions)},timeUnits:function(delta){var unit=HOURS;return delta>=TIME_PER_YEAR?unit=YEARS:delta>=TIME_PER_MONTH?unit=MONTHS:delta>=TIME_PER_WEEK?unit=WEEKS:delta>=TIME_PER_DAY&&(unit=DAYS),unit},translateRange:function(delta,exact){var axis=this,options=axis.options,baseUnit=options.baseUnit,weekStartDay=options.weekStartDay,lineBox=axis.lineBox(),size=options.vertical?lineBox.height():lineBox.width(),range=axis.range(),scale=size/(range.max-range.min),offset=round(delta/scale,DEFAULT_PRECISION),from=addTicks(options.min,offset),to=addTicks(options.max,offset);return exact||(from=addDuration(from,0,baseUnit,weekStartDay),to=addDuration(to,0,baseUnit,weekStartDay)),{min:from,max:to}},scaleRange:function(delta){for(var range,step,axis=this,options=axis.options,rounds=math.abs(delta),from=options.min,to=options.max;rounds--;)range=dateDiff(from,to),step=math.round(.1*range),0>delta?(from=addTicks(from,step),to=addTicks(to,-step)):(from=addTicks(from,-step),to=addTicks(to,step));return{min:from,max:to}},shouldRenderNote:function(value){var range=this.range();return dateComparer(value,range.min)>=0&&dateComparer(value,range.max)<=0},pan:function(delta){var range=this.translateRange(delta,!0),limittedRange=this.limitRange(toTime(range.min),toTime(range.max),this.totalMin,this.totalMax);return limittedRange?{min:toDate(limittedRange.min),max:toDate(limittedRange.max)}:void 0},pointsRange:function(start,end){var startValue=this.getValue(start),endValue=this.getValue(end),min=math.min(startValue,endValue),max=math.max(startValue,endValue);return{min:toDate(min),max:toDate(max)}},zoomRange:function(delta){var range=this.scaleRange(delta),min=toDate(limitValue(toTime(range.min),this.totalMin,this.totalMax)),max=toDate(limitValue(toTime(range.max),this.totalMin,this.totalMax));return{min:min,max:max}}}),ClusterLayout=ChartElement.extend({options:{vertical:!1,gap:0,spacing:0},reflow:function(box){var childBox,i,cluster=this,options=cluster.options,vertical=options.vertical,axis=vertical?Y:X,children=cluster.children,gap=options.gap,spacing=options.spacing,count=children.length,slots=count+gap+spacing*(count-1),slotSize=(vertical?box.height():box.width())/slots,position=box[axis+1]+slotSize*(gap/2);for(i=0;count>i;i++)childBox=(children[i].box||box).clone(),childBox[axis+1]=position,childBox[axis+2]=position+slotSize,children[i].reflow(childBox),count-1>i&&(position+=slotSize*spacing),position+=slotSize}}),StackWrap=ChartElement.extend({options:{vertical:!0},reflow:function(targetBox){var i,options=this.options,vertical=options.vertical,positionAxis=vertical?X:Y,children=this.children,box=this.box=new Box2D,childrenCount=children.length;for(i=0;childrenCount>i;i++){var childBox,currentChild=children[i];currentChild.visible!==!1&&(childBox=currentChild.box.clone(),childBox.snapTo(targetBox,positionAxis),0===i&&(box=this.box=childBox.clone()),currentChild.reflow(childBox),box.wrap(childBox))}}}),PointEventsMixin={click:function(chart,e){return chart.trigger(SERIES_CLICK,this.eventArgs(e))},hover:function(chart,e){return chart.trigger(SERIES_HOVER,this.eventArgs(e))},eventArgs:function(e){return{value:this.value,percentage:this.percentage,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:$((e||{}).target),originalEvent:e,point:this}}},NoteMixin={createNote:function(){var element=this,options=element.options.notes,text=element.noteText||options.label.text;options.visible!==!1&&defined(text)&&null!==text&&(element.note=new Note(element.value,text,element.dataItem,element.category,element.series,element.options.notes),element.append(element.note))}},Bar=ChartElement.extend({init:function(value,options){var bar=this;ChartElement.fn.init.call(bar),bar.options=options,bar.color=options.color||WHITE,bar.aboveAxis=valueOrDefault(bar.options.aboveAxis,!0),bar.value=value},defaults:{border:{width:1},vertical:!0,overlay:{gradient:GLASS},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}}},render:function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},createLabel:function(){var labelText,options=this.options,labels=options.labels;if(labels.visible){if(labels.template){var labelTemplate=template(labels.template);labelText=labelTemplate({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total,series:this.series})}else labelText=this.formatValue(labels.format);this.label=new BarLabel(labelText,deepExtend({vertical:options.vertical},options.labels)),this.append(this.label)}},formatValue:function(format){return this.owner.formatPointValue(this,format)},reflow:function(targetBox){this.render();var bar=this,label=bar.label;if(bar.box=targetBox,label&&(label.options.aboveAxis=bar.aboveAxis,label.reflow(targetBox)),bar.note&&bar.note.reflow(targetBox),bar.errorBars)for(var i=0;i<bar.errorBars.length;i++)bar.errorBars[i].reflow(targetBox)},createVisual:function(){var bar=this,box=bar.box,options=bar.options,customVisual=options.visual;if(bar.visible!==!1)if(ChartElement.fn.createVisual.call(bar),customVisual){var visual=this.rectVisual=customVisual({category:bar.category,dataItem:bar.dataItem,value:bar.value,sender:bar.getChart(),series:bar.series,percentage:bar.percentage,runningTotal:bar.runningTotal,total:bar.total,rect:box.toRect(),createVisual:function(){var group=new draw.Group;return bar.createRect(group),group},options:options});visual&&bar.visual.append(visual)}else box.width()>0&&box.height()>0&&bar.createRect(bar.visual)},createRect:function(visual){var options=this.options,border=options.border,strokeOpacity=defined(border.opacity)?border.opacity:options.opacity,rect=this.rectVisual=draw.Path.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:options.opacity},stroke:{color:this.getBorderColor(),width:border.width,opacity:strokeOpacity,dashType:border.dashType}}),width=this.box.width(),height=this.box.height(),size=options.vertical?width:height;size>BAR_ALIGN_MIN_WIDTH&&(alignPathToPixel(rect),(1>width||1>height)&&(rect.options.stroke.lineJoin="round")),visual.append(rect),hasGradientOverlay(options)&&visual.append(this.createGradientOverlay(rect,{baseColor:this.color},deepExtend({end:options.vertical?undefined:[0,1]},options.overlay)))},createHighlight:function(style){var highlight=draw.Path.fromRect(this.box.toRect(),style);return alignPathToPixel(highlight)},highlightVisual:function(){return this.rectVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},getBorderColor:function(){var bar=this,options=bar.options,color=bar.color,border=options.border,borderColor=border.color,brightness=border._brightness||BAR_BORDER_BRIGHTNESS;return defined(borderColor)||(borderColor=new Color(color).brightness(brightness).toHex()),borderColor},tooltipAnchor:function(tooltipWidth,tooltipHeight){var x,y,bar=this,options=bar.options,box=bar.box,vertical=options.vertical,aboveAxis=bar.aboveAxis,clipBox=bar.owner.pane.clipBox()||box;if(vertical)x=box.x2+TOOLTIP_OFFSET,y=aboveAxis?math.max(box.y1,clipBox.y1):math.min(box.y2,clipBox.y2)-tooltipHeight;else{var x1=math.max(box.x1,clipBox.x1),x2=math.min(box.x2,clipBox.x2);options.isStacked?(x=aboveAxis?x2-tooltipWidth:x1,y=box.y1-tooltipHeight-TOOLTIP_OFFSET):(x=aboveAxis?x2+TOOLTIP_OFFSET:x1-tooltipWidth-TOOLTIP_OFFSET,y=box.y1)}return new Point2D(x,y)}});deepExtend(Bar.fn,PointEventsMixin),deepExtend(Bar.fn,NoteMixin);var BarChartAnimation=draw.Animation.extend({options:{duration:INITIAL_ANIMATION_DURATION},setup:function(){var element=this.element,options=this.options,bbox=element.bbox();if(bbox){this.origin=options.origin;var axis=options.vertical?Y:X,fromScale=this.fromScale=new geom.Point(1,1);fromScale[axis]=START_SCALE,element.transform(geom.transform().scale(fromScale.x,fromScale.y))}else this.abort()},step:function(pos){var scaleX=interpolate(this.fromScale.x,1,pos),scaleY=interpolate(this.fromScale.y,1,pos);this.element.transform(geom.transform().scale(scaleX,scaleY,this.origin))},abort:function(){draw.Animation.fn.abort.call(this),this.element.transform(null)}});draw.AnimationFactory.current.register(BAR,BarChartAnimation);var FadeInAnimation=draw.Animation.extend({options:{duration:200,easing:LINEAR},setup:function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},step:function(pos){this.element.opacity(pos*this.fadeTo)}});draw.AnimationFactory.current.register(FADEIN,FadeInAnimation);var ErrorRangeCalculator=function(errorValue,series,field){var that=this;that.initGlobalRanges(errorValue,series,field)};ErrorRangeCalculator.prototype=ErrorRangeCalculator.fn={percentRegex:/percent(?:\w*)\((\d+)\)/,standardDeviationRegex:new RegExp("^"+STD_DEV+"(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),initGlobalRanges:function(errorValue,series,field){var that=this,data=series.data,deviationMatch=that.standardDeviationRegex.exec(errorValue);if(deviationMatch){that.valueGetter=that.createValueGetter(series,field);var average=that.getAverage(data),deviation=that.getStandardDeviation(data,average,!1),multiple=deviationMatch[1]?parseFloat(deviationMatch[1]):1,errorRange={low:average.value-deviation*multiple,high:average.value+deviation*multiple};that.globalRange=function(){
return errorRange}}else if(errorValue.indexOf&&errorValue.indexOf(STD_ERR)>=0){that.valueGetter=that.createValueGetter(series,field);var standardError=that.getStandardError(data,that.getAverage(data));that.globalRange=function(value){return{low:value-standardError,high:value+standardError}}}},createValueGetter:function(series,field){var idx,srcValueFields,valueGetter,data=series.data,binder=SeriesBinder.current,valueFields=binder.valueFields(series),item=defined(data[0])?data[0]:{};return isArray(item)?(idx=field?indexOf(field,valueFields):0,valueGetter=getter("["+idx+"]")):isNumber(item)?valueGetter=getter():typeof item===OBJECT&&(srcValueFields=binder.sourceFields(series,valueFields),valueGetter=getter(srcValueFields[indexOf(field,valueFields)])),valueGetter},getErrorRange:function(pointValue,errorValue){var low,high,value,that=this;if(defined(errorValue)){if(that.globalRange)return that.globalRange(pointValue);if(isArray(errorValue))low=pointValue-errorValue[0],high=pointValue+errorValue[1];else if(isNumber(value=parseFloat(errorValue)))low=pointValue-value,high=pointValue+value;else{if(!(value=that.percentRegex.exec(errorValue)))throw new Error("Invalid ErrorBar value: "+errorValue);var percentValue=pointValue*(parseFloat(value[1])/100);low=pointValue-math.abs(percentValue),high=pointValue+math.abs(percentValue)}return{low:low,high:high}}},getStandardError:function(data,average){return this.getStandardDeviation(data,average,!0)/math.sqrt(average.count)},getStandardDeviation:function(data,average,isSample){for(var value,squareDifferenceSum=0,length=data.length,total=isSample?average.count-1:average.count,i=0;length>i;i++)value=this.valueGetter(data[i]),isNumber(value)&&(squareDifferenceSum+=math.pow(value-average.value,2));return math.sqrt(squareDifferenceSum/total)},getAverage:function(data){for(var value,sum=0,count=0,length=data.length,i=0;length>i;i++)value=this.valueGetter(data[i]),isNumber(value)&&(sum+=value,count++);return{value:sum/count,count:count}}};var CategoricalChart=ChartElement.extend({init:function(plotArea,options){var chart=this;ChartElement.fn.init.call(chart,options),chart.plotArea=plotArea,chart.categoryAxis=plotArea.seriesCategoryAxis(options.series[0]),chart.valueAxisRanges={},chart.points=[],chart.categoryPoints=[],chart.seriesPoints=[],chart.seriesOptions=[],chart._evalSeries=[],chart.render()},options:{series:[],invertAxes:!1,isStacked:!1,clip:!0},render:function(){var chart=this;chart.traverseDataPoints(proxy(chart.addValue,chart))},pointOptions:function(series,seriesIx){var options=this.seriesOptions[seriesIx];if(!options){var defaults=this.pointType().fn.defaults;this.seriesOptions[seriesIx]=options=deepExtend({},defaults,{vertical:!this.options.invertAxes},series)}return options},plotValue:function(point){if(!point)return 0;if(this.options.isStacked100&&isNumber(point.value)){for(var categoryIx=point.categoryIx,categoryPts=this.categoryPoints[categoryIx],categorySum=0,otherValues=[],i=0;i<categoryPts.length;i++){var other=categoryPts[i];if(other){var stack=point.series.stack,otherStack=other.series.stack;if(stack&&otherStack&&stack.group!==otherStack.group)continue;isNumber(other.value)&&(categorySum+=math.abs(other.value),otherValues.push(math.abs(other.value)))}}if(categorySum>0)return point.value/categorySum}return point.value},plotRange:function(point,startValue){var categoryIx=point.categoryIx,categoryPts=this.categoryPoints[categoryIx];if(this.options.isStacked){startValue=startValue||0;for(var plotValue=this.plotValue(point),positive=plotValue>=0,prevValue=startValue,isStackedBar=!1,i=0;i<categoryPts.length;i++){var other=categoryPts[i];if(point===other)break;var stack=point.series.stack,otherStack=other.series.stack;if(stack&&otherStack){if(typeof stack===STRING&&stack!==otherStack)continue;if(stack.group&&stack.group!==otherStack.group)continue}var otherValue=this.plotValue(other);(otherValue>=0&&positive||0>otherValue&&!positive)&&(prevValue+=otherValue,plotValue+=otherValue,isStackedBar=!0,this.options.isStacked100&&(plotValue=math.min(plotValue,1)))}return isStackedBar&&(prevValue-=startValue),[prevValue,plotValue]}var series=point.series,valueAxis=this.seriesValueAxis(series),axisCrossingValue=this.categoryAxisCrossingValue(valueAxis);return[axisCrossingValue,point.value||axisCrossingValue]},stackLimits:function(axisName,stackName){for(var min=MAX_VALUE,max=MIN_VALUE,i=0;i<this.categoryPoints.length;i++)for(var categoryPts=this.categoryPoints[i],pIx=0;pIx<categoryPts.length;pIx++){var point=categoryPts[pIx];if(point&&(point.series.stack===stackName||point.series.axis===axisName)){var to=this.plotRange(point,0)[1];defined(to)&&isFinite(to)&&(max=math.max(max,to),min=math.min(min,to))}}return{min:min,max:max}},updateStackRange:function(){var limits,chart=this,chartSeries=chart.options.series,isStacked=chart.options.isStacked,limitsCache={};if(isStacked)for(var i=0;i<chartSeries.length;i++){var series=chartSeries[i],axisName=series.axis,key=axisName+series.stack;if(limits=limitsCache[key],!limits){limits=chart.stackLimits(axisName,series.stack);var errorTotals=chart.errorTotals;errorTotals&&(errorTotals.negative.length&&(limits.min=math.min(limits.min,sparseArrayMin(errorTotals.negative))),errorTotals.positive.length&&(limits.max=math.max(limits.max,sparseArrayMax(errorTotals.positive)))),limits.min!==MAX_VALUE||limits.max!==MIN_VALUE?limitsCache[key]=limits:limits=null}limits&&(chart.valueAxisRanges[axisName]=limits)}},addErrorBar:function(point,data,categoryIx){var errorRange,chart=this,value=point.value,series=point.series,seriesIx=point.seriesIx,errorBars=point.options.errorBars,lowValue=data.fields[ERROR_LOW_FIELD],highValue=data.fields[ERROR_HIGH_FIELD];isNumber(lowValue)&&isNumber(highValue)?errorRange={low:lowValue,high:highValue}:errorBars&&defined(errorBars.value)&&(chart.seriesErrorRanges=chart.seriesErrorRanges||[],chart.seriesErrorRanges[seriesIx]=chart.seriesErrorRanges[seriesIx]||new ErrorRangeCalculator(errorBars.value,series,VALUE),errorRange=chart.seriesErrorRanges[seriesIx].getErrorRange(value,errorBars.value)),errorRange&&(point.low=errorRange.low,point.high=errorRange.high,chart.addPointErrorBar(point,categoryIx))},addPointErrorBar:function(point,categoryIx){var errorBar,stackedErrorRange,chart=this,series=point.series,low=point.low,high=point.high,isVertical=!chart.options.invertAxes,options=point.options.errorBars;if(chart.options.isStacked)stackedErrorRange=chart.stackedErrorRange(point,categoryIx),low=stackedErrorRange.low,high=stackedErrorRange.high;else{var fields={categoryIx:categoryIx,series:series};chart.updateRange({value:low},fields),chart.updateRange({value:high},fields)}errorBar=new CategoricalErrorBar(low,high,isVertical,chart,series,options),point.errorBars=[errorBar],point.append(errorBar)},stackedErrorRange:function(point,categoryIx){var chart=this,plotValue=chart.plotRange(point,0)[1]-point.value,low=point.low+plotValue,high=point.high+plotValue;return chart.errorTotals=chart.errorTotals||{positive:[],negative:[]},0>low&&(chart.errorTotals.negative[categoryIx]=math.min(chart.errorTotals.negative[categoryIx]||0,low)),high>0&&(chart.errorTotals.positive[categoryIx]=math.max(chart.errorTotals.positive[categoryIx]||0,high)),{low:low,high:high}},addValue:function(data,fields){var chart=this,categoryIx=fields.categoryIx,series=fields.series,seriesIx=fields.seriesIx,categoryPoints=chart.categoryPoints[categoryIx];categoryPoints||(chart.categoryPoints[categoryIx]=categoryPoints=[]);var seriesPoints=chart.seriesPoints[seriesIx];seriesPoints||(chart.seriesPoints[seriesIx]=seriesPoints=[]);var point=chart.createPoint(data,fields);point&&($.extend(point,fields),point.owner=chart,point.dataItem=series.data[categoryIx],point.noteText=data.fields.noteText,chart.addErrorBar(point,data,categoryIx)),chart.points.push(point),seriesPoints.push(point),categoryPoints.push(point),chart.updateRange(data.valueFields,fields)},evalPointOptions:function(options,value,category,categoryIx,series,seriesIx){var state={defaults:series._defaults,excluded:["data","aggregate","_events","tooltip","template","visual","toggle"]},doEval=this._evalSeries[seriesIx];return defined(doEval)||(this._evalSeries[seriesIx]=doEval=evalOptions(options,{},state,!0)),doEval&&(options=deepExtend({},options),evalOptions(options,{value:value,category:category,index:categoryIx,series:series,dataItem:series.data[categoryIx]},state)),options},updateRange:function(data,fields){var chart=this,axisName=fields.series.axis,value=data.value,axisRange=chart.valueAxisRanges[axisName];isFinite(value)&&null!==value&&(axisRange=chart.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE},axisRange.min=math.min(axisRange.min,value),axisRange.max=math.max(axisRange.max,value))},seriesValueAxis:function(series){var plotArea=this.plotArea,axisName=series.axis,axis=axisName?plotArea.namedValueAxes[axisName]:plotArea.valueAxis;if(!axis)throw new Error("Unable to locate value axis with name "+axisName);return axis},reflow:function(targetBox){var value,valueAxis,point,chart=this,pointIx=0,categorySlots=chart.categorySlots=[],chartPoints=chart.points,categoryAxis=chart.categoryAxis;chart.traverseDataPoints(function(data,fields){var categoryIx=fields.categoryIx,currentSeries=fields.series;value=chart.pointValue(data),valueAxis=chart.seriesValueAxis(currentSeries),point=chartPoints[pointIx++];var categorySlot=categorySlots[categoryIx];if(categorySlot||(categorySlots[categoryIx]=categorySlot=chart.categorySlot(categoryAxis,categoryIx,valueAxis)),point){var plotRange=chart.plotRange(point,valueAxis.startValue()),valueSlot=valueAxis.getSlot(plotRange[0],plotRange[1],!chart.options.clip);if(valueSlot){var pointSlot=chart.pointSlot(categorySlot,valueSlot);point.aboveAxis=chart.aboveAxis(point,valueAxis),chart.options.isStacked100&&(point.percentage=chart.plotValue(point)),chart.reflowPoint(point,pointSlot)}else point.visible=!1}}),chart.reflowCategories(categorySlots),chart.box=targetBox},aboveAxis:function(point,valueAxis){var axisCrossingValue=this.categoryAxisCrossingValue(valueAxis),value=point.value;return valueAxis.options.reverse?axisCrossingValue>value:value>=axisCrossingValue},categoryAxisCrossingValue:function(valueAxis){var categoryAxis=this.categoryAxis,options=valueAxis.options,crossingValues=[].concat(options.axisCrossingValues||options.axisCrossingValue);return crossingValues[categoryAxis.axisIndex||0]||0},reflowPoint:function(point,pointSlot){point.reflow(pointSlot)},reflowCategories:function(){},pointSlot:function(categorySlot,valueSlot){var chart=this,options=chart.options,invertAxes=options.invertAxes,slotX=invertAxes?valueSlot:categorySlot,slotY=invertAxes?categorySlot:valueSlot;return new Box2D(slotX.x1,slotY.y1,slotX.x2,slotY.y2)},categorySlot:function(categoryAxis,categoryIx){return categoryAxis.getSlot(categoryIx)},traverseDataPoints:function(callback){var categoryIx,seriesIx,pointData,currentCategory,currentSeries,chart=this,options=chart.options,series=options.series,categories=chart.categoryAxis.options.categories||[],count=categoriesCount(series),seriesCount=series.length;for(categoryIx=0;count>categoryIx;categoryIx++)for(seriesIx=0;seriesCount>seriesIx;seriesIx++)currentSeries=series[seriesIx],currentCategory=categories[categoryIx],pointData=this._bindPoint(currentSeries,seriesIx,categoryIx),callback(pointData,{category:currentCategory,categoryIx:categoryIx,series:currentSeries,seriesIx:seriesIx})},_bindPoint:function(series,seriesIx,categoryIx){this._bindCache||(this._bindCache=[]);var bindCache=this._bindCache[seriesIx];bindCache||(bindCache=this._bindCache[seriesIx]=[]);var data=bindCache[categoryIx];return data||(data=bindCache[categoryIx]=SeriesBinder.current.bindPoint(series,categoryIx)),data},formatPointValue:function(point,format){return null===point.value?"":autoFormat(format,point.value)},pointValue:function(data){return data.valueFields.value}}),BarChart=CategoricalChart.extend({options:{animation:{type:BAR}},render:function(){var chart=this;CategoricalChart.fn.render.apply(chart),chart.updateStackRange()},pointType:function(){return Bar},clusterType:function(){return ClusterLayout},stackType:function(){return StackWrap},stackLimits:function(axisName,stackName){var limits=CategoricalChart.fn.stackLimits.call(this,axisName,stackName);return limits},createPoint:function(data,fields){var point,pointOptions,cluster,chart=this,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,value=chart.pointValue(data),options=chart.options,children=chart.children,isStacked=chart.options.isStacked,pointType=chart.pointType(),clusterType=chart.clusterType();pointOptions=this.pointOptions(series,seriesIx);var labelOptions=pointOptions.labels;isStacked&&labelOptions.position==OUTSIDE_END&&(labelOptions.position=INSIDE_END),pointOptions.isStacked=isStacked;var color=data.fields.color||series.color;if(0>value&&pointOptions.negativeColor&&(color=pointOptions.negativeColor),pointOptions=chart.evalPointOptions(pointOptions,value,category,categoryIx,series,seriesIx),kendo.isFunction(series.color)&&(color=pointOptions.color),point=new pointType(value,pointOptions),point.color=color,cluster=children[categoryIx],cluster||(cluster=new clusterType({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing}),chart.append(cluster)),isStacked){var stackWrap=chart.getStackWrap(series,cluster);stackWrap.append(point)}else cluster.append(point);return point},getStackWrap:function(series,cluster){var stackWrap,stack=series.stack,stackGroup=stack?stack.group||stack:stack,wraps=cluster.children;if(typeof stackGroup===STRING){for(var i=0;i<wraps.length;i++)if(wraps[i]._stackGroup===stackGroup){stackWrap=wraps[i];break}}else stackWrap=wraps[0];if(!stackWrap){var stackType=this.stackType();stackWrap=new stackType({vertical:!this.options.invertAxes}),stackWrap._stackGroup=stackGroup,cluster.append(stackWrap)}return stackWrap},categorySlot:function(categoryAxis,categoryIx,valueAxis){var stackAxis,zeroSlot,chart=this,options=chart.options,categorySlot=categoryAxis.getSlot(categoryIx),startValue=valueAxis.startValue();return options.isStacked&&(zeroSlot=valueAxis.getSlot(startValue,startValue,!0),stackAxis=options.invertAxes?X:Y,categorySlot[stackAxis+1]=categorySlot[stackAxis+2]=zeroSlot[stackAxis+1]),categorySlot},reflowCategories:function(categorySlots){var i,chart=this,children=chart.children,childrenLength=children.length;for(i=0;childrenLength>i;i++)children[i].reflow(categorySlots[i])},createAnimation:function(){this._setAnimationOptions(),ChartElement.fn.createAnimation.call(this),anyHasZIndex(this.options.series)&&this._setChildrenAnimation()},_setChildrenAnimation:function(){for(var point,pointVisual,points=this.points,idx=0;idx<points.length;idx++)point=points[idx],pointVisual=point.visual,pointVisual&&defined(pointVisual.options.zIndex)&&(point.options.animation=this.options.animation,point.createAnimation())},_setAnimationOptions:function(){var origin,options=this.options,animation=options.animation||{};if(this.options.isStacked){var valueAxis=this.seriesValueAxis(options.series[0]);origin=valueAxis.getSlot(valueAxis.startValue())}else origin=this.categoryAxis.getSlot(0);animation.origin=new geom.Point(origin.x1,origin.y1),animation.vertical=!options.invertAxes}}),RangeBar=Bar.extend({defaults:{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}},createLabel:function(){var labels=this.options.labels,fromOptions=deepExtend({},labels,labels.from),toOptions=deepExtend({},labels,labels.to);fromOptions.visible&&(this.labelFrom=this._createLabel(fromOptions),this.append(this.labelFrom)),toOptions.visible&&(this.labelTo=this._createLabel(toOptions),this.append(this.labelTo))},_createLabel:function(options){var labelText;if(options.template){var labelTemplate=template(options.template);labelText=labelTemplate({dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total,series:this.series})}else labelText=this.formatValue(options.format);return new BarLabel(labelText,deepExtend({vertical:this.options.vertical},options))},reflow:function(targetBox){this.render();var rangeBar=this,labelFrom=rangeBar.labelFrom,labelTo=rangeBar.labelTo;rangeBar.box=targetBox,labelFrom&&(labelFrom.options.aboveAxis=rangeBar.value.from>rangeBar.value.to,labelFrom.reflow(targetBox)),labelTo&&(labelTo.options.aboveAxis=rangeBar.value.to>rangeBar.value.from,labelTo.reflow(targetBox)),rangeBar.note&&rangeBar.note.reflow(targetBox)}}),RangeBarChart=BarChart.extend({pointType:function(){return RangeBar},pointValue:function(data){return data.valueFields},formatPointValue:function(point,format){return null===point.value.from&&null===point.value.to?"":autoFormat(format,point.value.from,point.value.to)},plotLimits:CategoricalChart.fn.plotLimits,plotRange:function(point){return point?[point.value.from,point.value.to]:0},updateRange:function(value,fields){var chart=this,axisName=fields.series.axis,from=value.from,to=value.to,axisRange=chart.valueAxisRanges[axisName];null!==value&&isNumber(from)&&isNumber(to)&&(axisRange=chart.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE},axisRange.min=math.min(axisRange.min,from),axisRange.max=math.max(axisRange.max,from),axisRange.min=math.min(axisRange.min,to),axisRange.max=math.max(axisRange.max,to))},aboveAxis:function(point){var value=point.value;return value.from<value.to}}),BulletChart=CategoricalChart.extend({init:function(plotArea,options){var chart=this;chart.wrapData(options),CategoricalChart.fn.init.call(chart,plotArea,options)},options:{animation:{type:BAR}},wrapData:function(options){var i,data,seriesItem,series=options.series;for(i=0;i<series.length;i++)seriesItem=series[i],data=seriesItem.data,data&&!isArray(data[0])&&typeof data[0]!=OBJECT&&(seriesItem.data=[data])},reflowCategories:function(categorySlots){var i,chart=this,children=chart.children,childrenLength=children.length;for(i=0;childrenLength>i;i++)children[i].reflow(categorySlots[i])},plotRange:function(point){var series=point.series,valueAxis=this.seriesValueAxis(series),axisCrossingValue=this.categoryAxisCrossingValue(valueAxis);return[axisCrossingValue,point.value.current||axisCrossingValue]},createPoint:function(data,fields){var bullet,bulletOptions,cluster,chart=this,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,value=data.valueFields,options=chart.options,children=chart.children;bulletOptions=deepExtend({vertical:!options.invertAxes,overlay:series.overlay,categoryIx:categoryIx,invertAxes:options.invertAxes},series);var color=data.fields.color||series.color;return bulletOptions=chart.evalPointOptions(bulletOptions,value,category,categoryIx,series,seriesIx),kendo.isFunction(series.color)&&(color=bulletOptions.color),bullet=new Bullet(value,bulletOptions),bullet.color=color,cluster=children[categoryIx],cluster||(cluster=new ClusterLayout({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing}),chart.append(cluster)),cluster.append(bullet),bullet},updateRange:function(value,fields){var chart=this,axisName=fields.series.axis,current=value.current,target=value.target,axisRange=chart.valueAxisRanges[axisName];defined(current)&&!isNaN(current)&&defined(target&&!isNaN(target))&&(axisRange=chart.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE},axisRange.min=math.min.apply(math,[axisRange.min,current,target]),axisRange.max=math.max.apply(math,[axisRange.max,current,target]))},formatPointValue:function(point,format){return autoFormat(format,point.value.current,point.value.target)},pointValue:function(data){return data.valueFields.current},aboveAxis:function(point){var value=point.value.current;return value>0},createAnimation:function(){var point,points=this.points;this._setAnimationOptions();for(var idx=0;idx<points.length;idx++)point=points[idx],point.options.animation=this.options.animation,point.createAnimation()},_setAnimationOptions:BarChart.fn._setAnimationOptions}),Bullet=ChartElement.extend({init:function(value,options){var bullet=this;ChartElement.fn.init.call(bullet,options),bullet.aboveAxis=bullet.options.aboveAxis,bullet.color=options.color||WHITE,bullet.value=value},options:{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},tooltip:{format:"Current: {0}</br>Target: {1}"}},render:function(){var bullet=this,options=bullet.options;bullet._rendered||(bullet._rendered=!0,defined(bullet.value.target)&&(bullet.target=new Target({type:options.target.shape,background:options.target.color||bullet.color,opacity:options.opacity,zIndex:options.zIndex,border:options.target.border,vAlign:TOP,align:RIGHT}),bullet.append(bullet.target)),bullet.createNote())},reflow:function(box){this.render();var targetSlot,bullet=this,options=bullet.options,chart=bullet.owner,target=bullet.target,invertAxes=options.invertAxes,valueAxis=chart.seriesValueAxis(bullet.options),categorySlot=chart.categorySlot(chart.categoryAxis,options.categoryIx,valueAxis),targetValueSlot=valueAxis.getSlot(bullet.value.target),targetSlotX=invertAxes?targetValueSlot:categorySlot,targetSlotY=invertAxes?categorySlot:targetValueSlot;target&&(targetSlot=new Box2D(targetSlotX.x1,targetSlotY.y1,targetSlotX.x2,targetSlotY.y2),target.options.height=invertAxes?targetSlot.height():options.target.line.width,target.options.width=invertAxes?options.target.line.width:targetSlot.width(),target.reflow(targetSlot)),bullet.note&&bullet.note.reflow(box),bullet.box=box},createVisual:function(){ChartElement.fn.createVisual.call(this);var options=this.options,body=draw.Path.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:options.opacity},stroke:null});options.border.width>0&&body.options.set("stroke",{color:options.border.color||this.color,width:options.border.width,dashType:options.border.dashType,opacity:valueOrDefault(options.border.opacity,options.opacity)}),this.bodyVisual=body,alignPathToPixel(body),this.visual.append(body)},createAnimation:function(){this.bodyVisual&&(this.animation=draw.Animation.create(this.bodyVisual,this.options.animation))},tooltipAnchor:function(tooltipWidth,tooltipHeight){var x,y,bar=this,options=bar.options,box=bar.box,vertical=options.vertical,aboveAxis=bar.aboveAxis,clipBox=bar.owner.pane.clipBox()||box;if(vertical)x=box.x2+TOOLTIP_OFFSET,y=aboveAxis?math.max(box.y1,clipBox.y1):math.min(box.y2,clipBox.y2)-tooltipHeight;else{var x1=math.max(box.x1,clipBox.x1),x2=math.min(box.x2,clipBox.x2);options.isStacked?(x=aboveAxis?x2-tooltipWidth:x1,y=box.y1-tooltipHeight-TOOLTIP_OFFSET):(x=aboveAxis?x2+TOOLTIP_OFFSET:x1-tooltipWidth-TOOLTIP_OFFSET,y=box.y1)}return new Point2D(x,y)},createHighlight:function(style){return draw.Path.fromRect(this.box.toRect(),style)},highlightVisual:function(){return this.bodyVisual},highlightVisualArgs:function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},formatValue:function(format){var bullet=this;return bullet.owner.formatPointValue(bullet,format)}});deepExtend(Bullet.fn,PointEventsMixin),deepExtend(Bullet.fn,NoteMixin);var Target=ShapeElement.extend();deepExtend(Target.fn,PointEventsMixin);var ErrorBarBase=ChartElement.extend({init:function(low,high,isVertical,chart,series,options){var errorBar=this;errorBar.low=low,errorBar.high=high,errorBar.isVertical=isVertical,errorBar.chart=chart,errorBar.series=series,ChartElement.fn.init.call(errorBar,options)},options:{animation:{type:FADEIN,delay:INITIAL_ANIMATION_DURATION},endCaps:!0,line:{width:1},zIndex:1},getAxis:function(){},reflow:function(targetBox){var linePoints,errorBar=this,endCaps=errorBar.options.endCaps,isVertical=errorBar.isVertical,axis=errorBar.getAxis(),valueBox=axis.getSlot(errorBar.low,errorBar.high),centerBox=targetBox.center(),capsWidth=errorBar.getCapsWidth(targetBox,isVertical),capValue=isVertical?centerBox.x:centerBox.y,capStart=capValue-capsWidth,capEnd=capValue+capsWidth;isVertical?(linePoints=[Point2D(centerBox.x,valueBox.y1),Point2D(centerBox.x,valueBox.y2)],endCaps&&linePoints.push(Point2D(capStart,valueBox.y1),Point2D(capEnd,valueBox.y1),Point2D(capStart,valueBox.y2),Point2D(capEnd,valueBox.y2)),errorBar.box=Box2D(capStart,valueBox.y1,capEnd,valueBox.y2)):(linePoints=[Point2D(valueBox.x1,centerBox.y),Point2D(valueBox.x2,centerBox.y)],endCaps&&linePoints.push(Point2D(valueBox.x1,capStart),Point2D(valueBox.x1,capEnd),Point2D(valueBox.x2,capStart),Point2D(valueBox.x2,capEnd)),errorBar.box=Box2D(valueBox.x1,capStart,valueBox.x2,capEnd)),errorBar.linePoints=linePoints},getCapsWidth:function(box,isVertical){var boxSize=isVertical?box.width():box.height(),capsWidth=math.min(math.floor(boxSize/2),DEFAULT_ERROR_BAR_WIDTH)||DEFAULT_ERROR_BAR_WIDTH;return capsWidth},createVisual:function(){var that=this,options=that.options,visual=options.visual;visual?that.visual=visual({low:that.low,high:that.high,rect:that.box.toRect(),sender:that.getChart(),options:{endCaps:options.endCaps,color:options.color,line:options.line},createVisual:function(){that.createDefaultVisual();var defaultVisual=that.visual;return delete that.visual,defaultVisual}}):that.createDefaultVisual()},createDefaultVisual:function(){var errorBar=this,options=errorBar.options,lineOptions={stroke:{color:options.color,width:options.line.width,dashType:options.line.dashType}},linePoints=errorBar.linePoints;ChartElement.fn.createVisual.call(this);for(var idx=0;idx<linePoints.length;idx+=2){var line=new draw.Path(lineOptions).moveTo(linePoints[idx].x,linePoints[idx].y).lineTo(linePoints[idx+1].x,linePoints[idx+1].y);this.visual.append(line)}}}),CategoricalErrorBar=ErrorBarBase.extend({getAxis:function(){var errorBar=this,chart=errorBar.chart,series=errorBar.series,axis=chart.seriesValueAxis(series);return axis}}),ScatterErrorBar=ErrorBarBase.extend({getAxis:function(){var errorBar=this,chart=errorBar.chart,series=errorBar.series,axes=chart.seriesAxes(series),axis=errorBar.isVertical?axes.y:axes.x;return axis}}),LinePoint=ChartElement.extend({init:function(value,options){var point=this;ChartElement.fn.init.call(point),point.value=value,point.options=options,point.aboveAxis=valueOrDefault(point.options.aboveAxis,!0),point.tooltipTracking=!0},defaults:{vertical:!0,markers:{visible:!0,background:WHITE,size:LINE_MARKER_SIZE,type:CIRCLE,border:{width:2},opacity:1},labels:{visible:!1,position:ABOVE,margin:getSpacing(3),padding:getSpacing(4),animation:{type:FADEIN,delay:INITIAL_ANIMATION_DURATION}},notes:{label:{}},highlight:{markers:{border:{}}}},render:function(){var point=this,options=point.options,markers=options.markers,labels=options.labels,labelText=point.value;if(!point._rendered){if(point._rendered=!0,markers.visible&&markers.size&&(point.marker=point.createMarker(),point.append(point.marker)),labels.visible){if(labels.template){var labelTemplate=template(labels.template);labelText=labelTemplate({dataItem:point.dataItem,category:point.category,value:point.value,percentage:point.percentage,series:point.series})}else labels.format&&(labelText=point.formatValue(labels.format));point.label=new TextBox(labelText,deepExtend({align:CENTER,vAlign:CENTER,margin:{left:5,right:5},zIndex:valueOrDefault(labels.zIndex,this.series.zIndex)},labels)),point.append(point.label)}point.createNote(),point.errorBar&&point.append(point.errorBar)}},markerBorder:function(){var options=this.options.markers,background=options.background,border=deepExtend({color:this.color},options.border);return defined(border.color)||(border.color=new Color(background).brightness(BAR_BORDER_BRIGHTNESS).toHex()),border},createVisual:noop,createMarker:function(){var options=this.options.markers,marker=new ShapeElement({type:options.type,width:options.size,height:options.size,rotation:options.rotation,background:options.background,border:this.markerBorder(),opacity:options.opacity,zIndex:valueOrDefault(options.zIndex,this.series.zIndex),animation:options.animation,visual:options.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});return marker},markerBox:function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},reflow:function(targetBox){var childBox,center,point=this,options=point.options,vertical=options.vertical,aboveAxis=point.aboveAxis;if(point.render(),point.box=targetBox,childBox=targetBox.clone(),vertical?aboveAxis?childBox.y1-=childBox.height():childBox.y2+=childBox.height():aboveAxis?childBox.x1+=childBox.width():childBox.x2-=childBox.width(),point._childBox=childBox,point.marker&&point.marker.reflow(childBox),point.reflowLabel(childBox),point.errorBars)for(var i=0;i<point.errorBars.length;i++)point.errorBars[i].reflow(childBox);if(point.note){var noteTargetBox=point.markerBox();point.marker||(center=noteTargetBox.center(),noteTargetBox=Box2D(center.x,center.y,center.x,center.y)),point.note.reflow(noteTargetBox)}},reflowLabel:function(box){var point=this,options=point.options,label=point.label,anchor=options.labels.position;label&&(anchor=anchor===ABOVE?TOP:anchor,anchor=anchor===BELOW?BOTTOM:anchor,label.reflow(box),label.box.alignTo(point.markerBox(),anchor),label.reflow(label.box))},createHighlight:function(){var highlight=this.options.highlight,markers=highlight.markers,defaultColor=this.markerBorder().color,options=this.options.markers,shadow=new ShapeElement({type:options.type,width:options.size,height:options.size,rotation:options.rotation,background:markers.color||defaultColor,border:{color:markers.border.color,width:markers.border.width,opacity:valueOrDefault(markers.border.opacity,1)},opacity:valueOrDefault(markers.opacity,1)});return shadow.reflow(this._childBox),shadow.getElement()},highlightVisual:function(){return(this.marker||{}).visual},highlightVisualArgs:function(){var visual,rect,marker=this.marker;if(marker)rect=marker.paddingBox.toRect(),visual=marker.visual;else{var size=this.options.markers.size,halfSize=size/2,center=this.box.center();rect=new geom.Rect([center.x-halfSize,center.y-halfSize],[size,size])}return{options:this.options,rect:rect,visual:visual}},tooltipAnchor:function(tooltipWidth,tooltipHeight){var point=this,markerBox=point.markerBox(),aboveAxis=point.aboveAxis,x=markerBox.x2+TOOLTIP_OFFSET,y=aboveAxis?markerBox.y1-tooltipHeight:markerBox.y2,clipBox=point.owner.pane.clipBox(),showTooltip=!clipBox||clipBox.overlaps(markerBox);return showTooltip?Point2D(x,y):void 0},formatValue:function(format){var point=this;return point.owner.formatPointValue(point,format)}});deepExtend(LinePoint.fn,PointEventsMixin),deepExtend(LinePoint.fn,NoteMixin);var Bubble=LinePoint.extend({init:function(value,options){var point=this;LinePoint.fn.init.call(point,value,options),point.category=value.category},defaults:{labels:{position:CENTER},highlight:{opacity:1,border:{width:1,opacity:1}}},createHighlight:function(){var highlight=this.options.highlight,border=highlight.border,markers=this.options.markers,center=this.box.center(),radius=markers.size/2-border.width/2,overlay=new draw.Circle(new geom.Circle([center.x,center.y],radius),{stroke:{color:border.color||new Color(markers.background).brightness(BAR_BORDER_BRIGHTNESS).toHex(),width:border.width,opacity:border.opacity},fill:{color:markers.background,opacity:highlight.opacity}});return overlay}}),LineSegment=ChartElement.extend({init:function(linePoints,series,seriesIx){var segment=this;ChartElement.fn.init.call(segment),segment.linePoints=linePoints,segment.series=series,segment.seriesIx=seriesIx},options:{closed:!1},points:function(visualPoints){for(var segment=this,linePoints=segment.linePoints.concat(visualPoints||[]),points=[],i=0,length=linePoints.length;length>i;i++)linePoints[i].visible!==!1&&points.push(linePoints[i]._childBox.toRect().center());return points},createVisual:function(){var options=this.options,series=this.series,defaults=series._defaults,color=series.color;isFn(color)&&defaults&&(color=defaults.color);var line=draw.Path.fromPoints(this.points(),{
stroke:{color:color,width:series.width,opacity:series.opacity,dashType:series.dashType},zIndex:series.zIndex});options.closed&&line.close(),this.visual=line},aliasFor:function(e,coords){var segment=this,seriesIx=segment.seriesIx;return segment.parent.getNearestPoint(coords.x,coords.y,seriesIx)}}),LineChartMixin={renderSegments:function(){var currentSeries,seriesIx,sortedPoints,linePoints,point,pointIx,pointCount,lastSegment,chart=this,options=chart.options,series=options.series,seriesPoints=chart.seriesPoints,seriesCount=seriesPoints.length;for(this._segments=[],seriesIx=0;seriesCount>seriesIx;seriesIx++){for(currentSeries=series[seriesIx],sortedPoints=chart.sortPoints(seriesPoints[seriesIx]),pointCount=sortedPoints.length,linePoints=[],pointIx=0;pointCount>pointIx;pointIx++)point=sortedPoints[pointIx],point?linePoints.push(point):chart.seriesMissingValues(currentSeries)!==INTERPOLATE&&(linePoints.length>1&&(lastSegment=chart.createSegment(linePoints,currentSeries,seriesIx,lastSegment),this._addSegment(lastSegment)),linePoints=[]);linePoints.length>1&&(lastSegment=chart.createSegment(linePoints,currentSeries,seriesIx,lastSegment),this._addSegment(lastSegment))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(segment){this._segments.push(segment),segment.parent=this},sortPoints:function(points){return points},seriesMissingValues:function(series){var missingValues=series.missingValues,assumeZero=!missingValues&&this.options.isStacked;return assumeZero?ZERO:missingValues||INTERPOLATE},getNearestPoint:function(x,y,seriesIx){for(var nearestPoint,target=new Point2D(x,y),allPoints=this.seriesPoints[seriesIx],nearestPointDistance=MAX_VALUE,i=0;i<allPoints.length;i++){var point=allPoints[i];if(point&&defined(point.value)&&null!==point.value&&point.visible!==!1){var pointBox=point.box,pointDistance=pointBox.center().distanceTo(target);nearestPointDistance>pointDistance&&(nearestPoint=point,nearestPointDistance=pointDistance)}}return nearestPoint}},ClipAnimationMixin={createAnimation:function(){var root=this.getRoot();if(root&&(root.options||{}).transitions!==!1){var box=root.box,clipPath=draw.Path.fromRect(box.toRect());this.visual.clip(clipPath),this.animation=new ClipAnimation(clipPath,{box:box}),anyHasZIndex(this.options.series)&&this._setChildrenAnimation(clipPath)}},_setChildrenAnimation:function(clipPath){for(var point,pointVisual,points=this.animationPoints(),idx=0;idx<points.length;idx++)point=points[idx],pointVisual=point.visual,pointVisual&&defined(pointVisual.options.zIndex)&&pointVisual.clip(clipPath)}},LineChart=CategoricalChart.extend({render:function(){var chart=this;CategoricalChart.fn.render.apply(chart),chart.updateStackRange(),chart.renderSegments()},pointType:function(){return LinePoint},createPoint:function(data,fields){var point,pointOptions,chart=this,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,value=data.valueFields.value,missingValues=chart.seriesMissingValues(series);if(!defined(value)||null===value){if(missingValues!==ZERO)return null;value=0}pointOptions=this.pointOptions(series,seriesIx),pointOptions=chart.evalPointOptions(pointOptions,value,category,categoryIx,series,seriesIx);var color=data.fields.color||series.color;return kendo.isFunction(series.color)&&(color=pointOptions.color),point=new LinePoint(value,pointOptions),point.color=color,chart.append(point),point},plotRange:function(point){var plotValue=this.plotValue(point);if(this.options.isStacked)for(var categoryIx=point.categoryIx,categoryPts=this.categoryPoints[categoryIx],i=0;i<categoryPts.length;i++){var other=categoryPts[i];if(point===other)break;plotValue+=this.plotValue(other)}return[plotValue,plotValue]},createSegment:function(linePoints,currentSeries,seriesIx){var pointType,style=currentSeries.style;return new(pointType=style===STEP?StepLineSegment:style===SMOOTH?SplineSegment:LineSegment)(linePoints,currentSeries,seriesIx)},animationPoints:function(){var seriesPoints,pointsIdx,idx,series=this.seriesOptions,points=[];for(idx=0;idx<series.length;idx++)if(series[idx].markers.visible)for(seriesPoints=this.seriesPoints[idx],pointsIdx=0;pointsIdx<seriesPoints.length;pointsIdx++)points.push(seriesPoints[pointsIdx].marker);return points.concat(this._segments)}});deepExtend(LineChart.fn,LineChartMixin,ClipAnimationMixin);var ClipAnimation=draw.Animation.extend({options:{duration:INITIAL_ANIMATION_DURATION},setup:function(){this._setEnd(this.options.box.x1)},step:function(pos){var box=this.options.box;this._setEnd(interpolate(box.x1,box.x2,pos))},_setEnd:function(x){var element=this.element,segments=element.segments,topRight=segments[1].anchor(),bottomRight=segments[2].anchor();element.suspend(),topRight.setX(x),element.resume(),bottomRight.setX(x)}});draw.AnimationFactory.current.register(CLIP,ClipAnimation);var StepLineSegment=LineSegment.extend({points:function(visualPoints){var points,segment=this;return points=segment.calculateStepPoints(segment.linePoints),visualPoints&&visualPoints.length&&(points=points.concat(segment.calculateStepPoints(visualPoints).reverse())),points},calculateStepPoints:function(points){var prevPoint,point,i,prevMarkerBoxCenter,markerBoxCenter,segment=this,chart=segment.parent,plotArea=chart.plotArea,categoryAxis=plotArea.seriesCategoryAxis(segment.series),isInterpolate=chart.seriesMissingValues(segment.series)===INTERPOLATE,length=points.length,reverse=categoryAxis.options.reverse,vertical=categoryAxis.options.vertical,dir=reverse?2:1,revDir=reverse?1:2,result=[];for(i=1;length>i;i++)prevPoint=points[i-1],point=points[i],prevMarkerBoxCenter=prevPoint.markerBox().center(),markerBoxCenter=point.markerBox().center(),categoryAxis.options.justified?(result.push(new geom.Point(prevMarkerBoxCenter.x,prevMarkerBoxCenter.y)),result.push(vertical?new geom.Point(prevMarkerBoxCenter.x,markerBoxCenter.y):new geom.Point(markerBoxCenter.x,prevMarkerBoxCenter.y)),result.push(new geom.Point(markerBoxCenter.x,markerBoxCenter.y))):vertical?(result.push(new geom.Point(prevMarkerBoxCenter.x,prevPoint.box[Y+dir])),result.push(new geom.Point(prevMarkerBoxCenter.x,prevPoint.box[Y+revDir])),isInterpolate&&result.push(new geom.Point(prevMarkerBoxCenter.x,point.box[Y+dir])),result.push(new geom.Point(markerBoxCenter.x,point.box[Y+dir])),result.push(new geom.Point(markerBoxCenter.x,point.box[Y+revDir]))):(result.push(new geom.Point(prevPoint.box[X+dir],prevMarkerBoxCenter.y)),result.push(new geom.Point(prevPoint.box[X+revDir],prevMarkerBoxCenter.y)),isInterpolate&&result.push(new geom.Point(point.box[X+dir],prevMarkerBoxCenter.y)),result.push(new geom.Point(point.box[X+dir],markerBoxCenter.y)),result.push(new geom.Point(point.box[X+revDir],markerBoxCenter.y)));return result||[]}}),SplineSegment=LineSegment.extend({createVisual:function(){var series=this.series,defaults=series._defaults,color=series.color;isFn(color)&&defaults&&(color=defaults.color);var curveProcessor=new CurveProcessor(this.options.closed),segments=curveProcessor.process(this.points()),curve=new draw.Path({stroke:{color:color,width:series.width,opacity:series.opacity,dashType:series.dashType},zIndex:series.zIndex});curve.segments.push.apply(curve.segments,segments),this.visual=curve}}),AreaSegmentMixin={points:function(){var firstPoint,lastPoint,segment=this,chart=segment.parent,plotArea=chart.plotArea,invertAxes=chart.options.invertAxes,valueAxis=chart.seriesValueAxis(segment.series),valueAxisLineBox=valueAxis.lineBox(),categoryAxis=plotArea.seriesCategoryAxis(segment.series),categoryAxisLineBox=categoryAxis.lineBox(),end=invertAxes?categoryAxisLineBox.x1:categoryAxisLineBox.y1,stackPoints=segment.stackPoints,points=segment._linePoints(stackPoints),pos=invertAxes?X:Y;return end=limitValue(end,valueAxisLineBox[pos+1],valueAxisLineBox[pos+2]),!segment.stackPoints&&points.length>1&&(firstPoint=points[0],lastPoint=last(points),invertAxes?(points.unshift(new geom.Point(end,firstPoint.y)),points.push(new geom.Point(end,lastPoint.y))):(points.unshift(new geom.Point(firstPoint.x,end)),points.push(new geom.Point(lastPoint.x,end)))),points},createVisual:function(){var series=this.series,defaults=series._defaults,color=series.color;isFn(color)&&defaults&&(color=defaults.color),this.visual=new draw.Group({zIndex:series.zIndex}),this.createArea(color),this.createLine(color)},createLine:function(color){var series=this.series,lineOptions=deepExtend({color:color,opacity:series.opacity},series.line);if(lineOptions.visible!==!1&&lineOptions.width>0){var line=draw.Path.fromPoints(this._linePoints(),{stroke:{color:lineOptions.color,width:lineOptions.width,opacity:lineOptions.opacity,dashType:lineOptions.dashType,lineCap:"butt"}});this.visual.append(line)}},createArea:function(color){var series=this.series,area=draw.Path.fromPoints(this.points(),{fill:{color:color,opacity:series.opacity},stroke:null});this.visual.append(area)}},AreaSegment=LineSegment.extend({init:function(linePoints,stackPoints,currentSeries,seriesIx){var segment=this;segment.stackPoints=stackPoints,LineSegment.fn.init.call(segment,linePoints,currentSeries,seriesIx)},_linePoints:LineSegment.fn.points});deepExtend(AreaSegment.fn,AreaSegmentMixin);var AreaChart=LineChart.extend({createSegment:function(linePoints,currentSeries,seriesIx,prevSegment){var stackPoints,pointType,chart=this,options=chart.options,isStacked=options.isStacked,style=(currentSeries.line||{}).style;if(isStacked&&seriesIx>0&&prevSegment){var missingValues=this.seriesMissingValues(currentSeries);stackPoints="gap"!=missingValues?prevSegment.linePoints:this._gapStackPoints(linePoints,seriesIx,style),style!==STEP&&(stackPoints=stackPoints.slice(0).reverse())}return style===SMOOTH?new SplineAreaSegment(linePoints,prevSegment,isStacked,currentSeries,seriesIx):new(pointType=style===STEP?StepAreaSegment:AreaSegment)(linePoints,stackPoints,currentSeries,seriesIx)},reflow:function(targetBox){LineChart.fn.reflow.call(this,targetBox);var stackPoints=this._stackPoints;if(stackPoints)for(var stackPoint,pointSlot,idx=0;idx<stackPoints.length;idx++)stackPoint=stackPoints[idx],pointSlot=this.categoryAxis.getSlot(stackPoint.categoryIx),stackPoint.reflow(pointSlot)},_gapStackPoints:function(linePoints,seriesIx,style){var currentSeriesIx,point,gapStackPoint,seriesPoints=this.seriesPoints,startIdx=linePoints[0].categoryIx,endIdx=startIdx+linePoints.length,stackPoints=[];this._stackPoints=this._stackPoints||[];for(var idx=startIdx;endIdx>idx;idx++){currentSeriesIx=seriesIx;do currentSeriesIx--,point=seriesPoints[currentSeriesIx][idx];while(currentSeriesIx>0&&!point);point?(style!==STEP&&idx>startIdx&&!seriesPoints[currentSeriesIx][idx-1]&&stackPoints.push(this._previousSegmentPoint(idx,idx-1,currentSeriesIx)),stackPoints.push(point),style!==STEP&&endIdx>idx+1&&!seriesPoints[currentSeriesIx][idx+1]&&stackPoints.push(this._previousSegmentPoint(idx,idx+1,currentSeriesIx))):(gapStackPoint=this._createGapStackPoint(idx),this._stackPoints.push(gapStackPoint),stackPoints.push(gapStackPoint))}return stackPoints},_previousSegmentPoint:function(categoryIx,segmentIx,seriesIdx){for(var point,seriesPoints=this.seriesPoints;seriesIdx>0&&!point;)seriesIdx--,point=seriesPoints[seriesIdx][segmentIx];return point?point=seriesPoints[seriesIdx][categoryIx]:(point=this._createGapStackPoint(categoryIx),this._stackPoints.push(point)),point},_createGapStackPoint:function(categoryIx){var options=this.pointOptions({},0),point=new LinePoint(0,options);return point.categoryIx=categoryIx,point.series={},point},seriesMissingValues:function(series){return series.missingValues||ZERO}}),SplineAreaSegment=AreaSegment.extend({init:function(linePoints,prevSegment,isStacked,currentSeries,seriesIx){var segment=this;segment.prevSegment=prevSegment,segment.isStacked=isStacked,LineSegment.fn.init.call(segment,linePoints,currentSeries,seriesIx)},strokeSegments:function(){var segments=this._strokeSegments;if(!segments){var curveProcessor=new CurveProcessor(this.options.closed),linePoints=LineSegment.fn.points.call(this);segments=this._strokeSegments=curveProcessor.process(linePoints)}return segments},createVisual:function(){var series=this.series,defaults=series._defaults,color=series.color;isFn(color)&&defaults&&(color=defaults.color),this.visual=new draw.Group({zIndex:series.zIndex}),this.createFill({fill:{color:color,opacity:series.opacity},stroke:null}),this.createStroke({stroke:deepExtend({color:color,opacity:series.opacity,lineCap:"butt"},series.line)})},createFill:function(style){var strokeSegments=this.strokeSegments(),fillSegments=strokeSegments.slice(0),prevSegment=this.prevSegment;if(this.isStacked&&prevSegment){var prevStrokeSegments=prevSegment.strokeSegments(),prevAnchor=last(prevStrokeSegments).anchor();fillSegments.push(new draw.Segment(prevAnchor,prevAnchor,last(strokeSegments).anchor()));var stackSegments=$.map(prevStrokeSegments,function(segment){return new draw.Segment(segment.anchor(),segment.controlOut(),segment.controlIn())}).reverse();append(fillSegments,stackSegments);var firstAnchor=fillSegments[0].anchor();fillSegments.push(new draw.Segment(firstAnchor,firstAnchor,last(stackSegments).anchor()))}var fill=new draw.Path(style);fill.segments.push.apply(fill.segments,fillSegments),this.closeFill(fill),this.visual.append(fill)},closeFill:function(fillPath){var segment=this,chart=segment.parent,prevSegment=segment.prevSegment,plotArea=chart.plotArea,invertAxes=chart.options.invertAxes,valueAxis=chart.seriesValueAxis(segment.series),valueAxisLineBox=valueAxis.lineBox(),categoryAxis=plotArea.seriesCategoryAxis(segment.series),categoryAxisLineBox=categoryAxis.lineBox(),end=invertAxes?categoryAxisLineBox.x1:categoryAxisLineBox.y1,pos=invertAxes?X:Y,segments=segment.strokeSegments(),firstPoint=segments[0].anchor(),lastPoint=last(segments).anchor();end=limitValue(end,valueAxisLineBox[pos+1],valueAxisLineBox[pos+2]),chart.options.isStacked&&prevSegment||!(segments.length>1)||(invertAxes?fillPath.lineTo(end,lastPoint.y).lineTo(end,firstPoint.y):fillPath.lineTo(lastPoint.x,end).lineTo(firstPoint.x,end))},createStroke:function(style){if(style.stroke.width>0){var stroke=new draw.Path(style);stroke.segments.push.apply(stroke.segments,this.strokeSegments()),this.visual.append(stroke)}}}),StepAreaSegment=StepLineSegment.extend({init:function(linePoints,stackPoints,currentSeries,seriesIx){var segment=this;segment.stackPoints=stackPoints,StepLineSegment.fn.init.call(segment,linePoints,currentSeries,seriesIx)},_linePoints:StepLineSegment.fn.points});deepExtend(StepAreaSegment.fn,AreaSegmentMixin);var ScatterChart=ChartElement.extend({init:function(plotArea,options){var chart=this;ChartElement.fn.init.call(chart,options),chart.plotArea=plotArea,chart.xAxisRanges={},chart.yAxisRanges={},chart.points=[],chart.seriesPoints=[],chart.seriesOptions=[],chart._evalSeries=[],chart.render()},options:{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0},render:function(){var chart=this;chart.traverseDataPoints(proxy(chart.addValue,chart))},addErrorBar:function(point,field,fields){var errorRange,chart=this,value=point.value[field],valueErrorField=field+"Value",lowField=field+"ErrorLow",highField=field+"ErrorHigh",seriesIx=fields.seriesIx,series=fields.series,errorBars=point.options.errorBars,lowValue=fields[lowField],highValue=fields[highField];isNumber(value)&&(isNumber(lowValue)&&isNumber(highValue)&&(errorRange={low:lowValue,high:highValue}),errorBars&&defined(errorBars[valueErrorField])&&(chart.seriesErrorRanges=chart.seriesErrorRanges||{x:[],y:[]},chart.seriesErrorRanges[field][seriesIx]=chart.seriesErrorRanges[field][seriesIx]||new ErrorRangeCalculator(errorBars[valueErrorField],series,field),errorRange=chart.seriesErrorRanges[field][seriesIx].getErrorRange(value,errorBars[valueErrorField])),errorRange&&chart.addPointErrorBar(errorRange,point,field))},addPointErrorBar:function(errorRange,point,field){var errorBar,chart=this,low=errorRange.low,high=errorRange.high,series=point.series,isVertical=field===Y,options=point.options.errorBars,item={};point[field+"Low"]=low,point[field+"High"]=high,point.errorBars=point.errorBars||[],errorBar=new ScatterErrorBar(low,high,isVertical,chart,series,options),point.errorBars.push(errorBar),point.append(errorBar),item[field]=low,chart.updateRange(item,series),item[field]=high,chart.updateRange(item,series)},addValue:function(value,fields){var point,chart=this,x=value.x,y=value.y,seriesIx=fields.seriesIx,series=this.options.series[seriesIx],missingValues=this.seriesMissingValues(series),seriesPoints=chart.seriesPoints[seriesIx];hasValue(x)&&hasValue(y)||(value=this.createMissingValue(value,missingValues)),value&&(point=chart.createPoint(value,fields),point&&(extend(point,fields),chart.addErrorBar(point,X,fields),chart.addErrorBar(point,Y,fields)),chart.updateRange(value,fields.series)),chart.points.push(point),seriesPoints.push(point)},seriesMissingValues:function(series){return series.missingValues},createMissingValue:noop,updateRange:function(value,series){var chart=this,x=value.x,y=value.y,xAxisName=series.xAxis,yAxisName=series.yAxis,xAxisRange=chart.xAxisRanges[xAxisName],yAxisRange=chart.yAxisRanges[yAxisName];hasValue(x)&&(xAxisRange=chart.xAxisRanges[xAxisName]=xAxisRange||{min:MAX_VALUE,max:MIN_VALUE},typeof x===STRING&&(x=toDate(x)),xAxisRange.min=math.min(xAxisRange.min,x),xAxisRange.max=math.max(xAxisRange.max,x)),hasValue(y)&&(yAxisRange=chart.yAxisRanges[yAxisName]=yAxisRange||{min:MAX_VALUE,max:MIN_VALUE},typeof y===STRING&&(y=toDate(y)),yAxisRange.min=math.min(yAxisRange.min,y),yAxisRange.max=math.max(yAxisRange.max,y))},evalPointOptions:function(options,value,fields){var series=fields.series,seriesIx=fields.seriesIx,state={defaults:series._defaults,excluded:["data","tooltip","tempate","visual","toggle"]},doEval=this._evalSeries[seriesIx];return defined(doEval)||(this._evalSeries[seriesIx]=doEval=evalOptions(options,{},state,!0)),doEval&&(options=deepExtend({},options),evalOptions(options,{value:value,series:series,dataItem:fields.dataItem},state)),options},pointType:function(){return LinePoint},pointOptions:function(series,seriesIx){var options=this.seriesOptions[seriesIx];if(!options){var defaults=this.pointType().fn.defaults;this.seriesOptions[seriesIx]=options=deepExtend({},defaults,{markers:{opacity:series.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},series)}return options},createPoint:function(value,fields){var point,chart=this,series=fields.series,pointOptions=this.pointOptions(series,fields.seriesIx),color=fields.color||series.color;return pointOptions=chart.evalPointOptions(pointOptions,value,fields),kendo.isFunction(series.color)&&(color=pointOptions.color),point=new LinePoint(value,pointOptions),point.color=color,chart.append(point),point},seriesAxes:function(series){var plotArea=this.plotArea,xAxisName=series.xAxis,xAxis=xAxisName?plotArea.namedXAxes[xAxisName]:plotArea.axisX,yAxisName=series.yAxis,yAxis=yAxisName?plotArea.namedYAxes[yAxisName]:plotArea.axisY;if(!xAxis)throw new Error("Unable to locate X axis with name "+xAxisName);if(!yAxis)throw new Error("Unable to locate Y axis with name "+yAxisName);return{x:xAxis,y:yAxis}},reflow:function(targetBox){var point,seriesAxes,chart=this,chartPoints=chart.points,pointIx=0,limit=!chart.options.clip;chart.traverseDataPoints(function(value,fields){point=chartPoints[pointIx++],seriesAxes=chart.seriesAxes(fields.series);var pointSlot,slotX=seriesAxes.x.getSlot(value.x,value.x,limit),slotY=seriesAxes.y.getSlot(value.y,value.y,limit);point&&(slotX&&slotY?(pointSlot=chart.pointSlot(slotX,slotY),point.reflow(pointSlot)):point.visible=!1)}),chart.box=targetBox},pointSlot:function(slotX,slotY){return new Box2D(slotX.x1,slotY.y1,slotX.x2,slotY.y2)},traverseDataPoints:function(callback){var pointIx,seriesIx,currentSeries,currentSeriesPoints,pointData,value,fields,chart=this,options=chart.options,series=options.series,seriesPoints=chart.seriesPoints;for(seriesIx=0;seriesIx<series.length;seriesIx++)for(currentSeries=series[seriesIx],currentSeriesPoints=seriesPoints[seriesIx],currentSeriesPoints||(seriesPoints[seriesIx]=[]),pointIx=0;pointIx<currentSeries.data.length;pointIx++)pointData=this._bindPoint(currentSeries,seriesIx,pointIx),value=pointData.valueFields,fields=pointData.fields,callback(value,deepExtend({pointIx:pointIx,series:currentSeries,seriesIx:seriesIx,dataItem:currentSeries.data[pointIx],owner:chart},fields))},_bindPoint:CategoricalChart.fn._bindPoint,formatPointValue:function(point,format){var value=point.value;return autoFormat(format,value.x,value.y)},animationPoints:function(){var idx,seriesPoints=this.points,points=[];for(idx=0;idx<seriesPoints.length;idx++)seriesPoints[idx].marker&&points.push(seriesPoints[idx].marker);return points}});deepExtend(ScatterChart.fn,ClipAnimationMixin);var ScatterLineChart=ScatterChart.extend({render:function(){var chart=this;ScatterChart.fn.render.call(chart),chart.renderSegments()},createSegment:function(linePoints,currentSeries,seriesIx){var pointType,style=currentSeries.style;return new(pointType=style===SMOOTH?SplineSegment:LineSegment)(linePoints,currentSeries,seriesIx)},animationPoints:function(){var points=ScatterChart.fn.animationPoints.call(this);return points.concat(this._segments)},createMissingValue:function(value,missingValues){if(missingValues===ZERO){var missingValue={x:value.x,y:value.y};return hasValue(missingValue.x)||(missingValue.x=0),hasValue(missingValue.y)||(missingValue.y=0),missingValue}}});deepExtend(ScatterLineChart.fn,LineChartMixin);var BubbleChart=ScatterChart.extend({init:function(plotArea,options){this._maxSize=MIN_VALUE,ScatterChart.fn.init.call(this,plotArea,options)},options:{tooltip:{format:"{3}"},labels:{format:"{3}"}},addValue:function(value,fields){null!==value.size&&(value.size>0||value.size<0&&fields.series.negativeValues.visible)?(this._maxSize=math.max(this._maxSize,math.abs(value.size)),ScatterChart.fn.addValue.call(this,value,fields)):(this.points.push(null),this.seriesPoints[fields.seriesIx].push(null))},reflow:function(box){var chart=this;chart.updateBubblesSize(box),ScatterChart.fn.reflow.call(chart,box)},pointType:function(){return Bubble},createPoint:function(value,fields){var point,pointOptions,chart=this,series=fields.series,pointsCount=series.data.length,delay=fields.pointIx*(INITIAL_ANIMATION_DURATION/pointsCount),animationOptions={delay:delay,duration:INITIAL_ANIMATION_DURATION-delay,type:BUBBLE},color=fields.color||series.color;return value.size<0&&series.negativeValues.visible&&(color=valueOrDefault(series.negativeValues.color,color)),pointOptions=deepExtend({labels:{animation:{delay:delay,duration:INITIAL_ANIMATION_DURATION-delay}}},this.pointOptions(series,fields.seriesIx),{markers:{type:CIRCLE,border:series.border,opacity:series.opacity,animation:animationOptions}}),pointOptions=chart.evalPointOptions(pointOptions,value,fields),kendo.isFunction(series.color)&&(color=pointOptions.color),pointOptions.markers.background=color,point=new Bubble(value,pointOptions),point.color=color,chart.append(point),point},updateBubblesSize:function(box){var seriesIx,pointIx,chart=this,options=chart.options,series=options.series,boxSize=math.min(box.width(),box.height());for(seriesIx=0;seriesIx<series.length;seriesIx++){var currentSeries=series[seriesIx],seriesPoints=chart.seriesPoints[seriesIx],minSize=currentSeries.minSize||math.max(.02*boxSize,10),maxSize=currentSeries.maxSize||.2*boxSize,minR=minSize/2,maxR=maxSize/2,minArea=math.PI*minR*minR,maxArea=math.PI*maxR*maxR,areaRange=maxArea-minArea,areaRatio=areaRange/chart._maxSize;for(pointIx=0;pointIx<seriesPoints.length;pointIx++){var point=seriesPoints[pointIx];if(point){var area=math.abs(point.value.size)*areaRatio,r=math.sqrt((minArea+area)/math.PI),baseZIndex=valueOrDefault(point.options.zIndex,0),zIndex=baseZIndex+(1-r/maxR);deepExtend(point.options,{zIndex:zIndex,markers:{size:2*r,zIndex:zIndex},labels:{zIndex:zIndex+1}})}}}},formatPointValue:function(point,format){var value=point.value;return autoFormat(format,value.x,value.y,value.size,point.category)},createAnimation:noop,createVisual:noop}),Candlestick=ChartElement.extend({init:function(value,options){ChartElement.fn.init.call(this,options),this.value=value},options:{border:{_brightness:.8},line:{width:2},overlay:{gradient:GLASS},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{4:d}</th><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}}},reflow:function(box){var mid,ocSlot,lhSlot,point=this,options=point.options,chart=point.owner,value=point.value,valueAxis=chart.seriesValueAxis(options),points=[];ocSlot=valueAxis.getSlot(value.open,value.close),lhSlot=valueAxis.getSlot(value.low,value.high),ocSlot.x1=lhSlot.x1=box.x1,ocSlot.x2=lhSlot.x2=box.x2,point.realBody=ocSlot,mid=lhSlot.center().x,points.push([[mid,lhSlot.y1],[mid,ocSlot.y1]]),points.push([[mid,ocSlot.y2],[mid,lhSlot.y2]]),point.lines=points,point.box=lhSlot.clone().wrap(ocSlot),point._rendered||(point._rendered=!0,point.createNote()),point.reflowNote()},reflowNote:function(){var point=this;point.note&&point.note.reflow(point.box)},createVisual:function(){ChartElement.fn.createVisual.call(this),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},mainVisual:function(options){var group=new draw.Group;return this.createBody(group,options),this.createLines(group,options),group},createBody:function(container,options){var body=draw.Path.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:options.opacity},stroke:null});options.border.width>0&&body.options.set("stroke",{color:this.getBorderColor(),width:options.border.width,dashType:options.border.dashType,opacity:valueOrDefault(options.border.opacity,options.opacity)}),alignPathToPixel(body),container.append(body),hasGradientOverlay(options)&&container.append(this.createGradientOverlay(body,{baseColor:this.color},deepExtend({},options.overlay)))},createLines:function(container,options){this.drawLines(container,options,this.lines,options.line)},drawLines:function(container,options,lines,lineOptions){if(lines)for(var lineStyle={stroke:{color:lineOptions.color||this.color,opacity:valueOrDefault(lineOptions.opacity,options.opacity),width:lineOptions.width,dashType:lineOptions.dashType,lineCap:"butt"}},i=0;i<lines.length;i++){var line=draw.Path.fromPoints(lines[i],lineStyle);alignPathToPixel(line),container.append(line)}},getBorderColor:function(){var point=this,options=point.options,border=options.border,borderColor=border.color;return defined(borderColor)||(borderColor=new Color(point.color).brightness(border._brightness).toHex()),borderColor},createOverlay:function(){var overlay=draw.Path.fromRect(this.box.toRect(),{fill:{color:WHITE,opacity:0},stroke:null});this.visual.append(overlay)},createHighlight:function(){var highlight=this.options.highlight,normalColor=this.color;this.color=highlight.color||this.color;var overlay=this.mainVisual(deepExtend({},this.options,{line:{color:this.getBorderColor()}},highlight));return this.color=normalColor,overlay},highlightVisual:function(){return this._mainVisual},highlightVisualArgs:function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},tooltipAnchor:function(){var point=this,box=point.box,clipBox=point.owner.pane.clipBox()||box;return new Point2D(box.x2+TOOLTIP_OFFSET,math.max(box.y1,clipBox.y1)+TOOLTIP_OFFSET)},formatValue:function(format){var point=this;return point.owner.formatPointValue(point,format)}});deepExtend(Candlestick.fn,PointEventsMixin),deepExtend(Candlestick.fn,NoteMixin);var CandlestickChart=CategoricalChart.extend({options:{},reflowCategories:function(categorySlots){var i,chart=this,children=chart.children,childrenLength=children.length;for(i=0;childrenLength>i;i++)children[i].reflow(categorySlots[i])},addValue:function(data,fields){var point,cluster,chart=this,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,options=chart.options,value=data.valueFields,children=chart.children,valueParts=chart.splitValue(value),hasValue=areNumbers(valueParts),categoryPoints=chart.categoryPoints[categoryIx],dataItem=series.data[categoryIx];categoryPoints||(chart.categoryPoints[categoryIx]=categoryPoints=[]),hasValue&&(point=chart.createPoint(data,fields)),cluster=children[categoryIx],cluster||(cluster=new ClusterLayout({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing}),chart.append(cluster)),point&&(chart.updateRange(value,fields),cluster.append(point),point.categoryIx=categoryIx,point.category=category,point.series=series,point.seriesIx=seriesIx,point.owner=chart,point.dataItem=dataItem,point.noteText=data.fields.noteText),chart.points.push(point),categoryPoints.push(point)},pointType:function(){return Candlestick},createPoint:function(data,fields){var chart=this,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,value=data.valueFields,pointOptions=deepExtend({},series),pointType=chart.pointType(),color=data.fields.color||series.color;pointOptions=chart.evalPointOptions(pointOptions,value,category,categoryIx,series,seriesIx),series.type==CANDLESTICK&&value.open>value.close&&(color=data.fields.downColor||series.downColor||series.color),kendo.isFunction(series.color)&&(color=pointOptions.color);var point=new pointType(value,pointOptions);return point.color=color,point},splitValue:function(value){return[value.low,value.open,value.close,value.high]},updateRange:function(value,fields){var chart=this,axisName=fields.series.axis,axisRange=chart.valueAxisRanges[axisName],parts=chart.splitValue(value);axisRange=chart.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE},axisRange=chart.valueAxisRanges[axisName]={min:math.min.apply(math,parts.concat([axisRange.min])),max:math.max.apply(math,parts.concat([axisRange.max]))}},formatPointValue:function(point,format){var value=point.value;return autoFormat(format,value.open,value.high,value.low,value.close,point.category)},animationPoints:function(){return this.points}});deepExtend(CandlestickChart.fn,ClipAnimationMixin);var OHLCPoint=Candlestick.extend({reflow:function(box){var mid,oSlot,cSlot,lhSlot,point=this,options=point.options,chart=point.owner,value=point.value,valueAxis=chart.seriesValueAxis(options),oPoints=[],cPoints=[],lhPoints=[];lhSlot=valueAxis.getSlot(value.low,value.high),oSlot=valueAxis.getSlot(value.open,value.open),cSlot=valueAxis.getSlot(value.close,value.close),oSlot.x1=cSlot.x1=lhSlot.x1=box.x1,oSlot.x2=cSlot.x2=lhSlot.x2=box.x2,mid=lhSlot.center().x,oPoints.push([oSlot.x1,oSlot.y1]),oPoints.push([mid,oSlot.y1]),cPoints.push([mid,cSlot.y1]),cPoints.push([cSlot.x2,cSlot.y1]),lhPoints.push([mid,lhSlot.y1]),lhPoints.push([mid,lhSlot.y2]),point.lines=[oPoints,cPoints,lhPoints],point.box=lhSlot.clone().wrap(oSlot.clone().wrap(cSlot)),point.reflowNote()},createBody:$.noop}),OHLCChart=CandlestickChart.extend({pointType:function(){return OHLCPoint}}),BoxPlotChart=CandlestickChart.extend({addValue:function(data,fields){var point,cluster,chart=this,categoryIx=fields.categoryIx,category=fields.category,series=fields.series,seriesIx=fields.seriesIx,options=chart.options,children=chart.children,value=data.valueFields,valueParts=chart.splitValue(value),hasValue=areNumbers(valueParts),categoryPoints=chart.categoryPoints[categoryIx],dataItem=series.data[categoryIx];categoryPoints||(chart.categoryPoints[categoryIx]=categoryPoints=[]),hasValue&&(point=chart.createPoint(data,fields)),cluster=children[categoryIx],cluster||(cluster=new ClusterLayout({vertical:options.invertAxes,gap:options.gap,spacing:options.spacing}),chart.append(cluster)),point&&(chart.updateRange(value,fields),cluster.append(point),point.categoryIx=categoryIx,
point.category=category,point.series=series,point.seriesIx=seriesIx,point.owner=chart,point.dataItem=dataItem),chart.points.push(point),categoryPoints.push(point)},pointType:function(){return BoxPlot},splitValue:function(value){return[value.lower,value.q1,value.median,value.q3,value.upper]},updateRange:function(value,fields){var chart=this,axisName=fields.series.axis,axisRange=chart.valueAxisRanges[axisName],parts=chart.splitValue(value).concat(chart.filterOutliers(value.outliers));defined(value.mean)&&(parts=parts.concat(value.mean)),axisRange=chart.valueAxisRanges[axisName]=axisRange||{min:MAX_VALUE,max:MIN_VALUE},axisRange=chart.valueAxisRanges[axisName]={min:math.min.apply(math,parts.concat([axisRange.min])),max:math.max.apply(math,parts.concat([axisRange.max]))}},formatPointValue:function(point,format){var value=point.value;return autoFormat(format,value.lower,value.q1,value.median,value.q3,value.upper,value.mean,point.category)},filterOutliers:function(items){var i,item,length=(items||[]).length,result=[];for(i=0;length>i;i++)item=items[i],defined(item)&&appendIfNotNull(result,item);return result}}),BoxPlot=Candlestick.extend({init:function(value,options){var point=this;ChartElement.fn.init.call(point,options),point.value=value,point.createNote()},options:{border:{_brightness:.8},line:{width:2},mean:{width:2,dashType:"dash"},overlay:{gradient:GLASS},tooltip:{format:"<table style='text-align: left;'><th colspan='2'>{6:d}</th><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:LINE_MARKER_SIZE,type:CROSS,background:WHITE,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:LINE_MARKER_SIZE,type:CIRCLE,background:WHITE,border:{width:2,opacity:1},opacity:0}},reflow:function(box){var mid,whiskerSlot,boxSlot,medianSlot,meanSlot,point=this,options=point.options,chart=point.owner,value=point.value,valueAxis=chart.seriesValueAxis(options);boxSlot=valueAxis.getSlot(value.q1,value.q3),point.boxSlot=boxSlot,whiskerSlot=valueAxis.getSlot(value.lower,value.upper),medianSlot=valueAxis.getSlot(value.median),boxSlot.x1=whiskerSlot.x1=box.x1,boxSlot.x2=whiskerSlot.x2=box.x2,point.realBody=boxSlot,value.mean&&(meanSlot=valueAxis.getSlot(value.mean),point.meanPoints=[[[box.x1,meanSlot.y1],[box.x2,meanSlot.y1]]]),mid=whiskerSlot.center().x,point.whiskerPoints=[[[mid-5,whiskerSlot.y1],[mid+5,whiskerSlot.y1],[mid,whiskerSlot.y1],[mid,boxSlot.y1]],[[mid-5,whiskerSlot.y2],[mid+5,whiskerSlot.y2],[mid,whiskerSlot.y2],[mid,boxSlot.y2]]],point.medianPoints=[[[box.x1,medianSlot.y1],[box.x2,medianSlot.y1]]],point.box=whiskerSlot.clone().wrap(boxSlot),point.reflowNote()},renderOutliers:function(options){var markersBorder,shape,outlierValue,i,point=this,markers=options.markers||{},value=point.value,outliers=value.outliers||[],outerFence=3*math.abs(value.q3-value.q1),elements=[];for(i=0;i<outliers.length;i++)outlierValue=outliers[i],markers=outlierValue<value.q3+outerFence&&outlierValue>value.q1-outerFence?options.outliers:options.extremes,markersBorder=deepExtend({},markers.border),defined(markersBorder.color)||(defined(point.color)?markersBorder.color=point.color:markersBorder.color=new Color(markers.background).brightness(BAR_BORDER_BRIGHTNESS).toHex()),shape=new ShapeElement({type:markers.type,width:markers.size,height:markers.size,rotation:markers.rotation,background:markers.background,border:markersBorder,opacity:markers.opacity}),shape.value=outlierValue,elements.push(shape);return this.reflowOutliers(elements),elements},reflowOutliers:function(outliers){for(var valueAxis=this.owner.seriesValueAxis(this.options),centerX=this.box.center().x,i=0;i<outliers.length;i++){var outlierValue=outliers[i].value,markerBox=valueAxis.getSlot(outlierValue).move(centerX);this.box=this.box.wrap(markerBox),outliers[i].reflow(markerBox)}},mainVisual:function(options){for(var group=Candlestick.fn.mainVisual.call(this,options),outliers=this.renderOutliers(options),i=0;i<outliers.length;i++){var element=outliers[i].getElement();element&&group.append(element)}return group},createLines:function(container,options){this.drawLines(container,options,this.whiskerPoints,options.line),this.drawLines(container,options,this.medianPoints,options.median),this.drawLines(container,options,this.meanPoints,options.mean)},getBorderColor:function(){return this.color?this.color:Candlestick.getBorderColor.call(this)}});deepExtend(BoxPlot.fn,PointEventsMixin);var PieSegment=ChartElement.extend({init:function(value,sector,options){var segment=this;segment.value=value,segment.sector=sector,ChartElement.fn.init.call(segment,options)},options:{color:WHITE,overlay:{gradient:ROUNDED_BEVEL},border:{width:.5},labels:{visible:!1,distance:35,font:DEFAULT_FONT,margin:getSpacing(.5),align:CIRCLE,zIndex:1,position:OUTSIDE_END},animation:{type:PIE},highlight:{visible:!0,border:{width:1}},visible:!0},render:function(){var labelTemplate,segment=this,options=segment.options,labels=options.labels,labelText=segment.value;segment._rendered||segment.visible===!1||(segment._rendered=!0,labels.template?(labelTemplate=template(labels.template),labelText=labelTemplate({dataItem:segment.dataItem,category:segment.category,value:segment.value,series:segment.series,percentage:segment.percentage})):labels.format&&(labelText=autoFormat(labels.format,labelText)),labels.visible&&labelText&&(segment.label=new TextBox(labelText,deepExtend({},labels,{align:CENTER,vAlign:"",animation:{type:FADEIN,delay:segment.animationDelay}})),segment.append(segment.label)))},reflow:function(targetBox){var segment=this;segment.render(),segment.box=targetBox,segment.reflowLabel()},reflowLabel:function(){var lp,x1,labelWidth,labelHeight,segment=this,sector=segment.sector.clone(),options=segment.options,label=segment.label,labelsOptions=options.labels,labelsDistance=labelsOptions.distance,angle=sector.middle();label&&(labelHeight=label.box.height(),labelWidth=label.box.width(),labelsOptions.position==CENTER?(sector.r=math.abs((sector.r-labelHeight)/2)+labelHeight,lp=sector.point(angle),label.reflow(Box2D(lp.x,lp.y-labelHeight/2,lp.x,lp.y))):labelsOptions.position==INSIDE_END?(sector.r=sector.r-labelHeight/2,lp=sector.point(angle),label.reflow(Box2D(lp.x,lp.y-labelHeight/2,lp.x,lp.y))):(lp=sector.clone().expand(labelsDistance).point(angle),lp.x>=sector.c.x?(x1=lp.x+labelWidth,label.orientation=RIGHT):(x1=lp.x-labelWidth,label.orientation=LEFT),label.reflow(Box2D(x1,lp.y-labelHeight,lp.x,lp.y))))},createVisual:function(){var segment=this,sector=segment.sector,options=segment.options;if(ChartElement.fn.createVisual.call(this),segment.value)if(options.visual){var startAngle=(sector.startAngle+180)%360,visual=options.visual({category:segment.category,dataItem:segment.dataItem,value:segment.value,series:segment.series,percentage:segment.percentage,center:new geom.Point(sector.c.x,sector.c.y),radius:sector.r,innerRadius:sector.ir,startAngle:startAngle,endAngle:startAngle+sector.angle,options:options,createVisual:function(){var group=new draw.Group;return segment.createSegmentVisual(group),group}});visual&&segment.visual.append(visual)}else segment.createSegmentVisual(segment.visual)},createSegmentVisual:function(group){var visual,segment=this,sector=segment.sector,options=segment.options,borderOptions=options.border||{},border=borderOptions.width>0?{stroke:{color:borderOptions.color,width:borderOptions.width,opacity:borderOptions.opacity,dashType:borderOptions.dashType}}:{},color=options.color,fill={color:color,opacity:options.opacity};visual=segment.createSegment(sector,deepExtend({fill:fill,stroke:{opacity:options.opacity},zIndex:options.zIndex},border)),group.append(visual),hasGradientOverlay(options)&&group.append(this.createGradientOverlay(visual,{baseColor:color,fallbackFill:fill},deepExtend({center:[sector.c.x,sector.c.y],innerRadius:sector.ir,radius:sector.r,userSpace:!0},options.overlay)))},createSegment:function(sector,options){return options.singleSegment?new draw.Circle(new geom.Circle(new geom.Point(sector.c.x,sector.c.y),sector.r),options):ShapeBuilder.current.createRing(sector,options)},createAnimation:function(){var options=this.options,center=this.sector.c;deepExtend(options,{animation:{center:[center.x,center.y],delay:this.animationDelay}}),ChartElement.fn.createAnimation.call(this)},createHighlight:function(options){var segment=this,highlight=segment.options.highlight||{},border=highlight.border||{};return segment.createSegment(segment.sector,deepExtend({},options,{fill:{color:highlight.color,opacity:highlight.opacity},stroke:{opacity:border.opacity,width:border.width,color:border.color}}))},highlightVisual:function(){return this.visual.children[0]},highlightVisualArgs:function(){var sector=this.sector;return{options:this.options,radius:sector.r,innerRadius:sector.ir,center:new geom.Point(sector.c.x,sector.c.y),startAngle:sector.startAngle,endAngle:sector.angle+sector.startAngle,visual:this.visual}},tooltipAnchor:function(width,height){var point=this,box=point.sector.adjacentBox(TOOLTIP_OFFSET,width,height);return new Point2D(box.x1,box.y1)},formatValue:function(format){var point=this;return point.owner.formatPointValue(point,format)}});deepExtend(PieSegment.fn,PointEventsMixin);var PieChartMixin={createLegendItem:function(value,point,options){var text,labelTemplate,markerColor,itemLabelOptions,pointVisible,chart=this,legendOptions=chart.options.legend||{},labelsOptions=legendOptions.labels||{},inactiveItems=legendOptions.inactiveItems||{},inactiveItemsLabels=inactiveItems.labels||{};options&&options.visibleInLegend!==!1&&(pointVisible=options.visible!==!1,text=options.category||"",labelTemplate=pointVisible?labelsOptions.template:inactiveItemsLabels.template||labelsOptions.template,labelTemplate&&(text=template(labelTemplate)({text:text,series:options.series,dataItem:options.dataItem,percentage:options.percentage,value:value})),pointVisible?(itemLabelOptions={},markerColor=point.color):(itemLabelOptions={color:inactiveItemsLabels.color,font:inactiveItemsLabels.font},markerColor=(inactiveItems.markers||{}).color),text&&chart.legendItems.push({pointIndex:options.index,text:text,series:options.series,markerColor:markerColor,labels:itemLabelOptions}))}},PieChart=ChartElement.extend({init:function(plotArea,options){var chart=this;ChartElement.fn.init.call(chart,options),chart.plotArea=plotArea,chart.points=[],chart.legendItems=[],chart.render()},options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4},inactiveItems:{markers:{},labels:{}}},render:function(){var chart=this;chart.traverseDataPoints(proxy(chart.addValue,chart))},traverseDataPoints:function(callback){var currentSeries,pointData,fields,seriesIx,angle,data,anglePerValue,value,plotValue,explode,total,currentAngle,i,chart=this,options=chart.options,colors=chart.plotArea.options.seriesColors||[],colorsCount=colors.length,series=options.series,seriesCount=series.length,pointIx=0;for(seriesIx=0;seriesCount>seriesIx;seriesIx++){for(currentSeries=series[seriesIx],data=currentSeries.data,total=seriesTotal(currentSeries),anglePerValue=360/total,currentAngle=defined(currentSeries.startAngle)?currentSeries.startAngle:options.startAngle,seriesIx!=seriesCount-1&&currentSeries.labels.position==OUTSIDE_END&&(currentSeries.labels.position=CENTER),i=0;i<data.length;i++)pointData=SeriesBinder.current.bindPoint(currentSeries,i),value=pointData.valueFields.value,plotValue=math.abs(value),fields=pointData.fields,angle=plotValue*anglePerValue,explode=1!=data.length&&!!fields.explode,isFn(currentSeries.color)||(currentSeries.color=fields.color||colors[i%colorsCount]),callback(value,new Ring(null,0,0,currentAngle,angle),{owner:chart,category:fields.category||"",index:pointIx,series:currentSeries,seriesIx:seriesIx,dataItem:data[i],percentage:0!==total?plotValue/total:0,explode:explode,visibleInLegend:fields.visibleInLegend,visible:fields.visible,zIndex:seriesCount-seriesIx,animationDelay:chart.animationDelay(i,seriesIx,seriesCount)}),pointData.fields.visible!==!1&&(currentAngle+=angle),pointIx++;pointIx=0}},evalSegmentOptions:function(options,value,fields){var series=fields.series;evalOptions(options,{value:value,series:series,dataItem:fields.dataItem,category:fields.category,percentage:fields.percentage},{defaults:series._defaults,excluded:["data","template","visual","toggle"]})},addValue:function(value,sector,fields){var segment,chart=this,segmentOptions=deepExtend({},fields.series,{index:fields.index});chart.evalSegmentOptions(segmentOptions,value,fields),chart.createLegendItem(value,segmentOptions,fields),fields.visible!==!1&&(segment=new PieSegment(value,sector,segmentOptions),extend(segment,fields),chart.append(segment),chart.points.push(segment))},reflow:function(targetBox){var seriesConfig,seriesIndex,label,segment,sector,r,i,c,chart=this,options=chart.options,box=targetBox.clone(),space=5,minWidth=math.min(box.width(),box.height()),halfMinWidth=minWidth/2,defaultPadding=minWidth-.85*minWidth,padding=valueOrDefault(options.padding,defaultPadding),newBox=Box2D(box.x1,box.y1,box.x1+minWidth,box.y1+minWidth),newBoxCenter=newBox.center(),seriesConfigs=chart.seriesConfigs||[],boxCenter=box.center(),points=chart.points,count=points.length,seriesCount=options.series.length,leftSideLabels=[],rightSideLabels=[];for(padding=padding>halfMinWidth-space?halfMinWidth-space:padding,newBox.translate(boxCenter.x-newBoxCenter.x,boxCenter.y-newBoxCenter.y),r=halfMinWidth-padding,c=Point2D(r+newBox.x1+padding,r+newBox.y1+padding),i=0;count>i;i++)segment=points[i],sector=segment.sector,sector.r=r,sector.c=c,seriesIndex=segment.seriesIx,seriesConfigs.length&&(seriesConfig=seriesConfigs[seriesIndex],sector.ir=seriesConfig.ir,sector.r=seriesConfig.r),seriesIndex==seriesCount-1&&segment.explode&&(sector.c=sector.clone().radius(.15*sector.r).point(sector.middle())),segment.reflow(newBox),label=segment.label,label&&label.options.position===OUTSIDE_END&&seriesIndex==seriesCount-1&&(label.orientation===RIGHT?rightSideLabels.push(label):leftSideLabels.push(label));leftSideLabels.length>0&&(leftSideLabels.sort(chart.labelComparator(!0)),chart.leftLabelsReflow(leftSideLabels)),rightSideLabels.length>0&&(rightSideLabels.sort(chart.labelComparator(!1)),chart.rightLabelsReflow(rightSideLabels)),chart.box=newBox},leftLabelsReflow:function(labels){var chart=this,distances=chart.distanceBetweenLabels(labels);chart.distributeLabels(distances,labels)},rightLabelsReflow:function(labels){var chart=this,distances=chart.distanceBetweenLabels(labels);chart.distributeLabels(distances,labels)},distanceBetweenLabels:function(labels){var secondBox,distance,i,chart=this,points=chart.points,segment=points[points.length-1],sector=segment.sector,firstBox=labels[0].box,count=labels.length-1,lr=sector.r+segment.options.labels.distance,distances=[];for(distance=round(firstBox.y1-(sector.c.y-lr-firstBox.height()-firstBox.height()/2)),distances.push(distance),i=0;count>i;i++)firstBox=labels[i].box,secondBox=labels[i+1].box,distance=round(secondBox.y1-firstBox.y2),distances.push(distance);return distance=round(sector.c.y+lr-labels[count].box.y2-labels[count].box.height()/2),distances.push(distance),distances},distributeLabels:function(distances,labels){var remaining,left,right,i,chart=this,count=distances.length;for(i=0;count>i;i++)for(left=right=i,remaining=-distances[i];remaining>0&&(left>=0||count>right);)remaining=chart._takeDistance(distances,i,--left,remaining),remaining=chart._takeDistance(distances,i,++right,remaining);chart.reflowLabels(distances,labels)},_takeDistance:function(distances,anchor,position,amount){if(distances[position]>0){var available=math.min(distances[position],amount);amount-=available,distances[position]-=available,distances[anchor]+=available}return amount},reflowLabels:function(distances,labels){var label,boxX,box,i,chart=this,points=chart.points,segment=points[points.length-1],sector=segment.sector,labelsCount=labels.length,labelOptions=segment.options.labels,labelDistance=labelOptions.distance,boxY=sector.c.y-(sector.r+labelDistance)-labels[0].box.height();for(distances[0]+=2,i=0;labelsCount>i;i++)label=labels[i],boxY+=distances[i],box=label.box,boxX=chart.hAlignLabel(box.x2,sector.clone().expand(labelDistance),boxY,boxY+box.height(),label.orientation==RIGHT),label.orientation==RIGHT?(labelOptions.align!==CIRCLE&&(boxX=sector.r+sector.c.x+labelDistance),label.reflow(Box2D(boxX+box.width(),boxY,boxX,boxY))):(labelOptions.align!==CIRCLE&&(boxX=sector.c.x-sector.r-labelDistance),label.reflow(Box2D(boxX-box.width(),boxY,boxX,boxY))),boxY+=box.height()},createVisual:function(){var connectorLine,sector,angle,segment,seriesIx,label,i,chart=this,options=chart.options,connectors=options.connectors,points=chart.points,count=points.length,space=4;for(ChartElement.fn.createVisual.call(this),this._connectorLines=[],i=0;count>i;i++)if(segment=points[i],sector=segment.sector,angle=sector.middle(),label=segment.label,seriesIx={seriesId:segment.seriesIx},label&&(connectorLine=new draw.Path({stroke:{color:connectors.color,width:connectors.width},animation:{type:FADEIN,delay:segment.animationDelay}}),label.options.position===OUTSIDE_END&&0!==segment.value)){var sr,end,crossing,box=label.box,centerPoint=sector.c,start=sector.point(angle),middle=Point2D(box.x1,box.center().y);start=sector.clone().expand(connectors.padding).point(angle),connectorLine.moveTo(start.x,start.y),label.orientation==RIGHT?(end=Point2D(box.x1-connectors.padding,box.center().y),crossing=intersection(centerPoint,start,middle,end),middle=Point2D(end.x-space,end.y),crossing=crossing||middle,crossing.x=math.min(crossing.x,middle.x),chart.pointInCircle(crossing,sector.c,sector.r+space)||crossing.x<sector.c.x?(sr=sector.c.x+sector.r+space,segment.options.labels.align!==COLUMN?sr<middle.x?connectorLine.lineTo(sr,start.y):connectorLine.lineTo(start.x+2*space,start.y):connectorLine.lineTo(sr,start.y),connectorLine.lineTo(middle.x,end.y)):(crossing.y=end.y,connectorLine.lineTo(crossing.x,crossing.y))):(end=Point2D(box.x2+connectors.padding,box.center().y),crossing=intersection(centerPoint,start,middle,end),middle=Point2D(end.x+space,end.y),crossing=crossing||middle,crossing.x=math.max(crossing.x,middle.x),chart.pointInCircle(crossing,sector.c,sector.r+space)||crossing.x>sector.c.x?(sr=sector.c.x-sector.r-space,segment.options.labels.align!==COLUMN?sr>middle.x?connectorLine.lineTo(sr,start.y):connectorLine.lineTo(start.x-2*space,start.y):connectorLine.lineTo(sr,start.y),connectorLine.lineTo(middle.x,end.y)):(crossing.y=end.y,connectorLine.lineTo(crossing.x,crossing.y))),connectorLine.lineTo(end.x,end.y),this._connectorLines.push(connectorLine),this.visual.append(connectorLine)}},labelComparator:function(reverse){return reverse=reverse?-1:1,function(a,b){return a=(a.parent.sector.middle()+270)%360,b=(b.parent.sector.middle()+270)%360,(a-b)*reverse}},hAlignLabel:function(originalX,sector,y1,y2,direction){var cx=sector.c.x,cy=sector.c.y,r=sector.r,t=math.min(math.abs(cy-y1),math.abs(cy-y2));return t>r?originalX:cx+math.sqrt(r*r-t*t)*(direction?1:-1)},pointInCircle:function(point,c,r){return sqr(c.x-point.x)+sqr(c.y-point.y)<sqr(r)},formatPointValue:function(point,format){return autoFormat(format,point.value)},animationDelay:function(categoryIndex){return categoryIndex*PIE_SECTOR_ANIM_DELAY}});deepExtend(PieChart.fn,PieChartMixin);var DonutSegment=PieSegment.extend({options:{overlay:{gradient:ROUNDED_GLASS},labels:{position:CENTER},animation:{type:PIE}},reflowLabel:function(){var lp,labelHeight,segment=this,sector=segment.sector.clone(),options=segment.options,label=segment.label,labelsOptions=options.labels,angle=sector.middle();label&&(labelHeight=label.box.height(),labelsOptions.position==CENTER?(sector.r-=(sector.r-sector.ir)/2,lp=sector.point(angle),label.reflow(new Box2D(lp.x,lp.y-labelHeight/2,lp.x,lp.y))):PieSegment.fn.reflowLabel.call(segment))},createSegment:function(sector,options){return ShapeBuilder.current.createRing(sector,options)}});deepExtend(DonutSegment.fn,PointEventsMixin);var DonutChart=PieChart.extend({options:{startAngle:90,connectors:{width:1,color:"#939393",padding:4}},addValue:function(value,sector,fields){var segment,chart=this,segmentOptions=deepExtend({},fields.series,{index:fields.index});chart.evalSegmentOptions(segmentOptions,value,fields),chart.createLegendItem(value,segmentOptions,fields),value&&fields.visible!==!1&&(segment=new DonutSegment(value,sector,segmentOptions),extend(segment,fields),chart.append(segment),chart.points.push(segment))},reflow:function(targetBox){var currentSeries,holeSize,totalSize,size,i,r,chart=this,options=chart.options,box=targetBox.clone(),space=5,minWidth=math.min(box.width(),box.height()),halfMinWidth=minWidth/2,defaultPadding=minWidth-.85*minWidth,padding=valueOrDefault(options.padding,defaultPadding),series=options.series,seriesCount=series.length,seriesWithoutSize=0,margin=0,ir=0,currentSize=0;for(chart.seriesConfigs=[],padding=padding>halfMinWidth-space?halfMinWidth-space:padding,totalSize=halfMinWidth-padding,i=0;seriesCount>i;i++)currentSeries=series[i],0===i&&defined(currentSeries.holeSize)&&(holeSize=currentSeries.holeSize,totalSize-=currentSeries.holeSize),defined(currentSeries.size)?totalSize-=currentSeries.size:seriesWithoutSize++,defined(currentSeries.margin)&&i!=seriesCount-1&&(totalSize-=currentSeries.margin);for(defined(holeSize)||(currentSize=(halfMinWidth-padding)/(seriesCount+.75),holeSize=.75*currentSize,totalSize-=holeSize),ir=holeSize,i=0;seriesCount>i;i++)currentSeries=series[i],size=valueOrDefault(currentSeries.size,totalSize/seriesWithoutSize),ir+=margin,r=ir+size,chart.seriesConfigs.push({ir:ir,r:r}),margin=currentSeries.margin||0,ir=r;PieChart.fn.reflow.call(chart,targetBox)},animationDelay:function(categoryIndex,seriesIndex,seriesCount){return categoryIndex*DONUT_SECTOR_ANIM_DELAY+INITIAL_ANIMATION_DURATION*(seriesIndex+1)/(seriesCount+1)}}),WaterfallChart=BarChart.extend({render:function(){BarChart.fn.render.call(this),this.createSegments()},traverseDataPoints:function(callback){for(var series=this.options.series,categories=this.categoryAxis.options.categories||[],totalCategories=categoriesCount(series),isVertical=!this.options.invertAxes,seriesIx=0;seriesIx<series.length;seriesIx++)for(var currentSeries=series[seriesIx],total=0,runningTotal=0,categoryIx=0;totalCategories>categoryIx;categoryIx++){var to,data=SeriesBinder.current.bindPoint(currentSeries,categoryIx),value=data.valueFields.value,summary=data.fields.summary,from=total;summary?"total"===summary.toLowerCase()?(data.valueFields.value=total,from=0,to=total):(data.valueFields.value=runningTotal,to=from-runningTotal,runningTotal=0):isNumber(value)&&(runningTotal+=value,total+=value,to=total),callback(data,{category:categories[categoryIx],categoryIx:categoryIx,series:currentSeries,seriesIx:seriesIx,total:total,runningTotal:runningTotal,from:from,to:to,isVertical:isVertical})}},updateRange:function(value,fields){BarChart.fn.updateRange.call(this,{value:fields.to},fields)},aboveAxis:function(point){return point.value>=0},plotRange:function(point){return[point.from,point.to]},createSegments:function(){for(var series=this.options.series,seriesPoints=this.seriesPoints,segments=this.segments=[],seriesIx=0;seriesIx<series.length;seriesIx++){var currentSeries=series[seriesIx],points=seriesPoints[seriesIx];if(points)for(var prevPoint,pointIx=0;pointIx<points.length;pointIx++){var point=points[pointIx];if(point&&prevPoint){var segment=new WaterfallSegment(prevPoint,point,currentSeries);segments.push(segment),this.append(segment)}prevPoint=point}}}}),WaterfallSegment=ChartElement.extend({init:function(from,to,series){var segment=this;ChartElement.fn.init.call(segment),segment.from=from,segment.to=to,segment.series=series},options:{animation:{type:FADEIN,delay:INITIAL_ANIMATION_DURATION}},linePoints:function(){var points=[],from=this.from,fromBox=from.box,toBox=this.to.box;if(from.isVertical){var y=from.aboveAxis?fromBox.y1:fromBox.y2;points.push([fromBox.x1,y],[toBox.x2,y])}else{var x=from.aboveAxis?fromBox.x2:fromBox.x1;points.push([x,fromBox.y1],[x,toBox.y2])}return points},createVisual:function(){ChartElement.fn.createVisual.call(this);var line=this.series.line||{},path=draw.Path.fromPoints(this.linePoints(),{stroke:{color:line.color,width:line.width,opacity:line.opacity,dashType:line.dashType}});alignPathToPixel(path),this.visual.append(path)}}),Pane=BoxElement.extend({init:function(options){var pane=this;BoxElement.fn.init.call(pane,options),options=pane.options,pane.id=kendo.guid(),pane.createTitle(),pane.content=new ChartElement,pane.chartContainer=new ChartContainer({},pane),pane.append(pane.content),pane.axes=[],pane.charts=[]},options:{zIndex:-1,shrinkToFit:!0,title:{align:LEFT},visible:!0},createTitle:function(){var pane=this,titleOptions=pane.options.title;typeof titleOptions===OBJECT&&(titleOptions=deepExtend({},titleOptions,{align:titleOptions.position,position:TOP})),pane.title=Title.buildTitle(titleOptions,pane,Pane.fn.options.title)},appendAxis:function(axis){var pane=this;pane.content.append(axis),pane.axes.push(axis),axis.pane=pane},appendChart:function(chart){var pane=this;pane.chartContainer.parent!==pane.content&&pane.content.append(pane.chartContainer),pane.charts.push(chart),pane.chartContainer.append(chart),chart.pane=pane},empty:function(){var i,pane=this,plotArea=pane.parent;if(plotArea){for(i=0;i<pane.axes.length;i++)plotArea.removeAxis(pane.axes[i]);for(i=0;i<pane.charts.length;i++)plotArea.removeChart(pane.charts[i])}pane.axes=[],pane.charts=[],pane.content.destroy(),pane.content.children=[],pane.chartContainer.children=[]},reflow:function(targetBox){var content,pane=this;last(pane.children)===pane.content&&(content=pane.children.pop()),BoxElement.fn.reflow.call(pane,targetBox),content&&pane.children.push(content),pane.title&&(pane.contentBox.y1+=pane.title.box.height())},visualStyle:function(){var style=BoxElement.fn.visualStyle.call(this);return style.zIndex=-10,style},renderComplete:function(){this.options.visible&&this.createGridLines()},stackRoot:returnSelf,clipRoot:returnSelf,createGridLines:function(){var gridLines,i,j,axis,vertical,altAxis,pane=this,axes=pane.axes,allAxes=axes.concat(pane.parent.axes),vGridLines=[],hGridLines=[];for(i=0;i<axes.length;i++)for(axis=axes[i],vertical=axis.options.vertical,gridLines=vertical?vGridLines:hGridLines,j=0;j<allAxes.length;j++)0===gridLines.length&&(altAxis=allAxes[j],vertical!==altAxis.options.vertical&&append(gridLines,axis.createGridLines(altAxis)))},refresh:function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=$.proxy(this.createGradient,this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete()},clipBox:function(){return this.chartContainer.clipBox}}),ChartContainer=ChartElement.extend({init:function(options,pane){var container=this;ChartElement.fn.init.call(container,options),container.pane=pane},shouldClip:function(){var i,container=this,children=container.children,length=children.length;for(i=0;length>i;i++)if(children[i].options.clip===!0)return!0;return!1},_clipBox:function(){var axisValueField,idx,lineBox,axis,container=this,pane=container.pane,axes=pane.axes,length=axes.length,clipBox=pane.box.clone();for(idx=0;length>idx;idx++)axis=axes[idx],axisValueField=axis.options.vertical?Y:X,lineBox=axis.lineBox(),clipBox[axisValueField+1]=lineBox[axisValueField+1],clipBox[axisValueField+2]=lineBox[axisValueField+2];return clipBox},createVisual:function(){if(this.visual=new draw.Group({zIndex:0}),this.shouldClip()){var clipBox=this.clipBox=this._clipBox(),clipRect=clipBox.toRect(),clipPath=draw.Path.fromRect(clipRect);this.visual.clip(clipPath),this.unclipLabels()}},stackRoot:returnSelf,unclipLabels:function(){var points,point,i,j,length,container=this,charts=container.children,clipBox=container.clipBox;for(i=0;i<charts.length;i++)for(points=charts[i].points||{},length=points.length,j=0;length>j;j++)point=points[j],point&&point.label&&point.label.options.visible&&point.box.overlaps(clipBox)&&(point.label.alignToClipBox&&point.label.alignToClipBox(clipBox),point.label.options.noclip=!0)},destroy:function(){ChartElement.fn.destroy.call(this),delete this.parent}}),PlotAreaBase=ChartElement.extend({init:function(series,options){var plotArea=this;ChartElement.fn.init.call(plotArea,options),plotArea.series=series,plotArea.initSeries(),plotArea.charts=[],plotArea.options.legend.items=[],plotArea.axes=[],plotArea.crosshairs=[],plotArea.createPanes(),plotArea.render(),plotArea.createCrosshairs()},options:{series:[],plotArea:{margin:{}},background:"",border:{color:BLACK,width:0},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}},initSeries:function(){var i,currentSeries,series=this.series;for(i=0;i<series.length;i++)currentSeries=series[i],currentSeries.index=i},createPanes:function(){var i,currentPane,plotArea=this,panes=[],paneOptions=plotArea.options.panes||[],panesLength=math.max(paneOptions.length,1);for(i=0;panesLength>i;i++)currentPane=new Pane(paneOptions[i]),currentPane.paneIndex=i,panes.push(currentPane),plotArea.append(currentPane);plotArea.panes=panes},createCrosshairs:function(panes){var i,j,pane,axis,currentCrosshair,plotArea=this;for(panes=panes||plotArea.panes,i=0;i<panes.length;i++)for(pane=panes[i],j=0;j<pane.axes.length;j++)axis=pane.axes[j],axis.options.crosshair&&axis.options.crosshair.visible&&(currentCrosshair=new Crosshair(axis,axis.options.crosshair),plotArea.crosshairs.push(currentCrosshair),pane.content.append(currentCrosshair))},removeCrosshairs:function(pane){var i,j,plotArea=this,crosshairs=plotArea.crosshairs,axes=pane.axes;for(i=crosshairs.length-1;i>=0;i--)for(j=0;j<axes.length;j++)if(crosshairs[i].axis===axes[j]){crosshairs.splice(i,1);break}},hideCrosshairs:function(){for(var crosshairs=this.crosshairs,idx=0;idx<crosshairs.length;idx++)crosshairs[idx].hide()},findPane:function(name){var i,matchingPane,plotArea=this,panes=plotArea.panes;for(i=0;i<panes.length;i++)if(panes[i].options.name===name){matchingPane=panes[i];break}return matchingPane||panes[0]},findPointPane:function(point){var i,matchingPane,plotArea=this,panes=plotArea.panes;for(i=0;i<panes.length;i++)if(panes[i].box.containsPoint(point)){matchingPane=panes[i];break}return matchingPane},appendAxis:function(axis){var plotArea=this,pane=plotArea.findPane(axis.options.pane);pane.appendAxis(axis),plotArea.axes.push(axis),axis.plotArea=plotArea},removeAxis:function(axisToRemove){var i,axis,plotArea=this,filteredAxes=[];for(i=0;i<plotArea.axes.length;i++)axis=plotArea.axes[i],axisToRemove!==axis?filteredAxes.push(axis):axis.destroy();plotArea.axes=filteredAxes},appendChart:function(chart,pane){var plotArea=this;plotArea.charts.push(chart),pane?pane.appendChart(chart):plotArea.append(chart)},removeChart:function(chartToRemove){var i,chart,plotArea=this,filteredCharts=[];for(i=0;i<plotArea.charts.length;i++)chart=plotArea.charts[i],chart!==chartToRemove?filteredCharts.push(chart):chart.destroy();plotArea.charts=filteredCharts},addToLegend:function(series){var i,currentSeries,text,color,itemLabelOptions,markerColor,defaults,seriesVisible,labelTemplate,count=series.length,data=[],legend=this.options.legend,labels=legend.labels||{},inactiveItems=legend.inactiveItems||{},inactiveItemsLabels=inactiveItems.labels||{};for(i=0;count>i;i++)currentSeries=series[i],seriesVisible=currentSeries.visible!==!1,currentSeries.visibleInLegend!==!1&&(text=currentSeries.name||"",labelTemplate=seriesVisible?labels.template:inactiveItemsLabels.template||labels.template,labelTemplate&&(text=template(labelTemplate)({text:text,series:currentSeries})),color=currentSeries.color,
defaults=currentSeries._defaults,isFn(color)&&defaults&&(color=defaults.color),seriesVisible?(itemLabelOptions={},markerColor=color):(itemLabelOptions={color:inactiveItemsLabels.color,font:inactiveItemsLabels.font},markerColor=inactiveItems.markers.color),text&&data.push({text:text,labels:itemLabelOptions,markerColor:markerColor,series:currentSeries,active:seriesVisible}));append(legend.items,data)},groupAxes:function(panes){var paneAxes,axis,paneIx,axisIx,xAxes=[],yAxes=[];for(paneIx=0;paneIx<panes.length;paneIx++)for(paneAxes=panes[paneIx].axes,axisIx=0;axisIx<paneAxes.length;axisIx++)axis=paneAxes[axisIx],axis.options.vertical?yAxes.push(axis):xAxes.push(axis);return{x:xAxes,y:yAxes,any:xAxes.concat(yAxes)}},groupSeriesByPane:function(){var i,pane,currentSeries,plotArea=this,series=plotArea.series,seriesByPane={};for(i=0;i<series.length;i++)currentSeries=series[i],pane=plotArea.seriesPaneName(currentSeries),seriesByPane[pane]?seriesByPane[pane].push(currentSeries):seriesByPane[pane]=[currentSeries];return seriesByPane},filterVisibleSeries:function(series){var i,currentSeries,result=[];for(i=0;i<series.length;i++)currentSeries=series[i],currentSeries.visible!==!1&&result.push(currentSeries);return result},reflow:function(targetBox){var plotArea=this,options=plotArea.options.plotArea,panes=plotArea.panes,margin=getSpacing(options.margin);plotArea.box=targetBox.clone().unpad(margin),plotArea.reflowPanes(),plotArea.reflowAxes(panes),plotArea.reflowCharts(panes)},redraw:function(panes){var i,plotArea=this;for(panes=[].concat(panes),this.initSeries(),i=0;i<panes.length;i++)plotArea.removeCrosshairs(panes[i]),panes[i].empty();for(plotArea.render(panes),plotArea.reflowAxes(plotArea.panes),plotArea.reflowCharts(panes),plotArea.createCrosshairs(panes),i=0;i<panes.length;i++)panes[i].refresh()},axisCrossingValues:function(axis,crossingAxes){var i,options=axis.options,crossingValues=[].concat(options.axisCrossingValues||options.axisCrossingValue),valuesToAdd=crossingAxes.length-crossingValues.length,defaultValue=crossingValues[0]||0;for(i=0;valuesToAdd>i;i++)crossingValues.push(defaultValue);return crossingValues},alignAxisTo:function(axis,targetAxis,crossingValue,targetCrossingValue){var slot=axis.getSlot(crossingValue,crossingValue,!0),slotEdge=axis.options.reverse?2:1,targetSlot=targetAxis.getSlot(targetCrossingValue,targetCrossingValue,!0),targetEdge=targetAxis.options.reverse?2:1,axisBox=axis.box.translate(targetSlot[X+targetEdge]-slot[X+slotEdge],targetSlot[Y+targetEdge]-slot[Y+slotEdge]);axis.pane!==targetAxis.pane&&axisBox.translate(0,axis.pane.box.y1-targetAxis.pane.box.y1),axis.reflow(axisBox)},alignAxes:function(xAxes,yAxes){var pane,paneId,axis,i,plotArea=this,xAnchor=xAxes[0],yAnchor=yAxes[0],xAnchorCrossings=plotArea.axisCrossingValues(xAnchor,yAxes),yAnchorCrossings=plotArea.axisCrossingValues(yAnchor,xAxes),leftAnchors={},rightAnchors={},topAnchors={},bottomAnchors={};for(i=0;i<yAxes.length;i++)axis=yAxes[i],pane=axis.pane,paneId=pane.id,plotArea.alignAxisTo(axis,xAnchor,yAnchorCrossings[i],xAnchorCrossings[i]),axis.options._overlap||(round(axis.lineBox().x1)===round(xAnchor.lineBox().x1)&&(leftAnchors[paneId]&&axis.reflow(axis.box.alignTo(leftAnchors[paneId].box,LEFT).translate(-axis.options.margin,0)),leftAnchors[paneId]=axis),round(axis.lineBox().x2)===round(xAnchor.lineBox().x2)&&(axis._mirrored||(axis.options.labels.mirror=!axis.options.labels.mirror,axis._mirrored=!0),plotArea.alignAxisTo(axis,xAnchor,yAnchorCrossings[i],xAnchorCrossings[i]),rightAnchors[paneId]&&axis.reflow(axis.box.alignTo(rightAnchors[paneId].box,RIGHT).translate(axis.options.margin,0)),rightAnchors[paneId]=axis),0!==i&&yAnchor.pane===axis.pane&&(axis.alignTo(yAnchor),axis.reflow(axis.box)));for(i=0;i<xAxes.length;i++)axis=xAxes[i],pane=axis.pane,paneId=pane.id,plotArea.alignAxisTo(axis,yAnchor,xAnchorCrossings[i],yAnchorCrossings[i]),axis.options._overlap||(round(axis.lineBox().y1)===round(yAnchor.lineBox().y1)&&(axis._mirrored||(axis.options.labels.mirror=!axis.options.labels.mirror,axis._mirrored=!0),plotArea.alignAxisTo(axis,yAnchor,xAnchorCrossings[i],yAnchorCrossings[i]),topAnchors[paneId]&&axis.reflow(axis.box.alignTo(topAnchors[paneId].box,TOP).translate(0,-axis.options.margin)),topAnchors[paneId]=axis),round(axis.lineBox().y2,COORD_PRECISION)===round(yAnchor.lineBox().y2,COORD_PRECISION)&&(bottomAnchors[paneId]&&axis.reflow(axis.box.alignTo(bottomAnchors[paneId].box,BOTTOM).translate(0,axis.options.margin)),bottomAnchors[paneId]=axis),0!==i&&(axis.alignTo(xAnchor),axis.reflow(axis.box)))},shrinkAxisWidth:function(panes){var i,currentPane,currentAxis,plotArea=this,axes=plotArea.groupAxes(panes).any,axisBox=axisGroupBox(axes),overflowX=0;for(i=0;i<panes.length;i++)currentPane=panes[i],currentPane.axes.length>0&&(overflowX=math.max(overflowX,axisBox.width()-currentPane.contentBox.width()));if(0!==overflowX)for(i=0;i<axes.length;i++)currentAxis=axes[i],currentAxis.options.vertical||currentAxis.reflow(currentAxis.box.shrink(overflowX,0))},shrinkAxisHeight:function(panes){var i,currentPane,axes,overflowY,j,currentAxis,shrinked;for(i=0;i<panes.length;i++)if(currentPane=panes[i],axes=currentPane.axes,overflowY=math.max(0,axisGroupBox(axes).height()-currentPane.contentBox.height()),0!==overflowY){for(j=0;j<axes.length;j++)currentAxis=axes[j],currentAxis.options.vertical&&currentAxis.reflow(currentAxis.box.shrink(0,overflowY));shrinked=!0}return shrinked},fitAxes:function(panes){var paneAxes,paneBox,axisBox,offsetY,currentPane,currentAxis,i,j,plotArea=this,axes=plotArea.groupAxes(panes).any,offsetX=0;for(i=0;i<panes.length;i++)if(currentPane=panes[i],paneAxes=currentPane.axes,paneBox=currentPane.contentBox,paneAxes.length>0)for(axisBox=axisGroupBox(paneAxes),offsetX=math.max(offsetX,paneBox.x1-axisBox.x1),offsetY=math.max(paneBox.y1-axisBox.y1,paneBox.y2-axisBox.y2),j=0;j<paneAxes.length;j++)currentAxis=paneAxes[j],currentAxis.reflow(currentAxis.box.translate(0,offsetY));for(i=0;i<axes.length;i++)currentAxis=axes[i],currentAxis.reflow(currentAxis.box.translate(offsetX,0))},reflowAxes:function(panes){var i,plotArea=this,axes=plotArea.groupAxes(panes);for(i=0;i<panes.length;i++)plotArea.reflowPaneAxes(panes[i]);axes.x.length>0&&axes.y.length>0&&(plotArea.alignAxes(axes.x,axes.y),plotArea.shrinkAxisWidth(panes),plotArea.autoRotateAxisLabels(axes),plotArea.alignAxes(axes.x,axes.y),plotArea.shrinkAxisWidth(panes)&&plotArea.alignAxes(axes.x,axes.y),plotArea.shrinkAxisHeight(panes),plotArea.alignAxes(axes.x,axes.y),plotArea.shrinkAxisHeight(panes)&&plotArea.alignAxes(axes.x,axes.y),plotArea.fitAxes(panes))},autoRotateAxisLabels:function(groupedAxes){var axis,idx,rotated,axes=this.axes,panes=this.panes;for(idx=0;idx<axes.length;idx++)axis=axes[idx],axis.autoRotateLabels()&&(rotated=!0);if(rotated){for(idx=0;idx<panes.length;idx++)this.reflowPaneAxes(panes[idx]);groupedAxes.x.length>0&&groupedAxes.y.length>0&&(this.alignAxes(groupedAxes.x,groupedAxes.y),this.shrinkAxisWidth(panes))}},reflowPaneAxes:function(pane){var i,axes=pane.axes,length=axes.length;if(length>0)for(i=0;length>i;i++)axes[i].reflow(pane.contentBox)},reflowCharts:function(panes){var chartPane,i,plotArea=this,charts=plotArea.charts,count=charts.length,box=plotArea.box;for(i=0;count>i;i++)chartPane=charts[i].pane,(!chartPane||inArray(chartPane,panes))&&charts[i].reflow(box)},reflowPanes:function(){var i,currentPane,paneBox,height,percents,plotArea=this,box=plotArea.box,panes=plotArea.panes,panesLength=panes.length,remainingHeight=box.height(),remainingPanes=panesLength,autoHeightPanes=0,top=box.y1;for(i=0;panesLength>i;i++)currentPane=panes[i],height=currentPane.options.height,currentPane.options.width=box.width(),currentPane.options.height?(height.indexOf&&height.indexOf("%")&&(percents=parseInt(height,10)/100,currentPane.options.height=percents*box.height()),currentPane.reflow(box.clone()),remainingHeight-=currentPane.options.height):autoHeightPanes++;for(i=0;panesLength>i;i++)currentPane=panes[i],currentPane.options.height||(currentPane.options.height=remainingHeight/autoHeightPanes);for(i=0;panesLength>i;i++)currentPane=panes[i],paneBox=box.clone().move(box.x1,top),currentPane.reflow(paneBox),remainingPanes--,top+=currentPane.options.height},backgroundBox:function(){var lineBox,box,i,j,axisA,axisB,plotArea=this,axes=plotArea.axes,axesCount=axes.length;for(i=0;axesCount>i;i++)for(axisA=axes[i],j=0;axesCount>j;j++)axisB=axes[j],axisA.options.vertical!==axisB.options.vertical&&(lineBox=axisA.lineBox().clone().wrap(axisB.lineBox()),box=box?box.wrap(lineBox):lineBox);return box||plotArea.box},createVisual:function(){ChartElement.fn.createVisual.call(this);var bgBox=this.backgroundBox(),options=this.options.plotArea,border=options.border||{},background=options.background,opacity=options.opacity;util.isTransparent(background)&&(background=WHITE,opacity=0);var bg=this._bgVisual=draw.Path.fromRect(bgBox.toRect(),{fill:{color:background,opacity:opacity},stroke:{color:border.width?border.color:"",width:border.width,dashType:border.dashType},zIndex:-1});this.appendVisual(bg)},pointsByCategoryIndex:function(categoryIndex){var i,j,points,point,chart,charts=this.charts,result=[];if(null!==categoryIndex)for(i=0;i<charts.length;i++)if(chart=charts[i],"_navigator"!==chart.pane.options.name&&(points=charts[i].categoryPoints[categoryIndex],points&&points.length))for(j=0;j<points.length;j++)point=points[j],point&&defined(point.value)&&null!==point.value&&result.push(point);return result},pointsBySeriesIndex:function(seriesIndex){var points,point,i,j,chart,charts=this.charts,result=[];for(i=0;i<charts.length;i++)for(chart=charts[i],points=chart.points,j=0;j<points.length;j++)point=points[j],point&&point.options.index===seriesIndex&&result.push(point);return result},pointsBySeriesName:function(name){var points,point,i,j,chart,charts=this.charts,result=[];for(i=0;i<charts.length;i++)for(chart=charts[i],points=chart.points,j=0;j<points.length;j++)point=points[j],point&&point.series.name===name&&result.push(point);return result},paneByPoint:function(point){var pane,i,plotArea=this,panes=plotArea.panes;for(i=0;i<panes.length;i++)if(pane=panes[i],pane.box.containsPoint(point))return pane}}),CategoricalPlotArea=PlotAreaBase.extend({init:function(series,options){var plotArea=this;if(plotArea.namedCategoryAxes={},plotArea.namedValueAxes={},plotArea.valueAxisRangeTracker=new AxisGroupRangeTracker,series.length>0){plotArea.invertAxes=inArray(series[0].type,[BAR,BULLET,VERTICAL_LINE,VERTICAL_AREA,RANGE_BAR,HORIZONTAL_WATERFALL]);for(var i=0;i<series.length;i++){var stack=series[i].stack;if(stack&&"100%"===stack.type){plotArea.stack100=!0;break}}}PlotAreaBase.fn.init.call(plotArea,series,options)},options:{categoryAxis:{categories:[]},valueAxis:{}},render:function(panes){var plotArea=this;panes=panes||plotArea.panes,plotArea.createCategoryAxes(panes),plotArea.aggregateCategories(panes),plotArea.createCategoryAxesLabels(panes),plotArea.createCharts(panes),plotArea.createValueAxes(panes)},removeAxis:function(axis){var plotArea=this,axisName=axis.options.name;PlotAreaBase.fn.removeAxis.call(plotArea,axis),axis instanceof CategoryAxis?delete plotArea.namedCategoryAxes[axisName]:(plotArea.valueAxisRangeTracker.reset(axisName),delete plotArea.namedValueAxes[axisName]),axis===plotArea.categoryAxis&&delete plotArea.categoryAxis,axis===plotArea.valueAxis&&delete plotArea.valueAxis},createCharts:function(panes){for(var seriesByPane=this.groupSeriesByPane(),i=0;i<panes.length;i++){var pane=panes[i],paneSeries=seriesByPane[pane.options.name||"default"]||[];this.addToLegend(paneSeries);var visibleSeries=this.filterVisibleSeries(paneSeries);if(visibleSeries)for(var groups=this.groupSeriesByCategoryAxis(visibleSeries),groupIx=0;groupIx<groups.length;groupIx++)this.createChartGroup(groups[groupIx],pane)}},createChartGroup:function(series,pane){this.createAreaChart(filterSeriesByType(series,[AREA,VERTICAL_AREA]),pane),this.createBarChart(filterSeriesByType(series,[COLUMN,BAR]),pane),this.createRangeBarChart(filterSeriesByType(series,[RANGE_COLUMN,RANGE_BAR]),pane),this.createBulletChart(filterSeriesByType(series,[BULLET,VERTICAL_BULLET]),pane),this.createCandlestickChart(filterSeriesByType(series,CANDLESTICK),pane),this.createBoxPlotChart(filterSeriesByType(series,BOX_PLOT),pane),this.createOHLCChart(filterSeriesByType(series,OHLC),pane),this.createWaterfallChart(filterSeriesByType(series,[WATERFALL,HORIZONTAL_WATERFALL]),pane),this.createLineChart(filterSeriesByType(series,[LINE,VERTICAL_LINE]),pane)},aggregateCategories:function(panes){var i,currentSeries,categoryAxis,axisPane,dateAxis,plotArea=this,series=plotArea.srcSeries||plotArea.series,processedSeries=[];for(i=0;i<series.length;i++)currentSeries=series[i],categoryAxis=plotArea.seriesCategoryAxis(currentSeries),axisPane=plotArea.findPane(categoryAxis.options.pane),dateAxis=equalsIgnoreCase(categoryAxis.options.type,DATE),(dateAxis||currentSeries.categoryField)&&inArray(axisPane,panes)&&(currentSeries=plotArea.aggregateSeries(currentSeries,categoryAxis)),processedSeries.push(currentSeries);plotArea.srcSeries=series,plotArea.series=processedSeries},aggregateSeries:function(series,categoryAxis){var i,category,categoryIx,data,aggregator,axisOptions=categoryAxis.options,dateAxis=equalsIgnoreCase(categoryAxis.options.type,DATE),categories=axisOptions.categories,srcCategories=axisOptions.srcCategories||categories,srcData=series.data,srcPoints=[],range=categoryAxis.range(),result=deepExtend({},series),aggregatorSeries=deepExtend({},series),dataItems=axisOptions.dataItems||[],getFn=getField;for(result.data=data=[],dateAxis&&(getFn=getDateField),i=0;i<srcData.length;i++)category=series.categoryField?getFn(series.categoryField,srcData[i]):srcCategories[i],categoryIx=categoryAxis.categoryIndex(category,range),categoryIx>-1&&(srcPoints[categoryIx]=srcPoints[categoryIx]||[],srcPoints[categoryIx].push(i));for(aggregator=new SeriesAggregator(aggregatorSeries,SeriesBinder.current,DefaultAggregates.current),i=0;i<categories.length;i++)data[i]=aggregator.aggregatePoints(srcPoints[i],categories[i]),srcPoints[i]&&(dataItems[i]=data[i]);return categoryAxis.options.dataItems=dataItems,result},appendChart:function(chart,pane){for(var plotArea=this,series=chart.options.series,categoryAxis=plotArea.seriesCategoryAxis(series[0]),categories=categoryAxis.options.categories,categoriesToAdd=math.max(0,categoriesCount(series)-categories.length);categoriesToAdd--;)categories.push("");plotArea.valueAxisRangeTracker.update(chart.valueAxisRanges),PlotAreaBase.fn.appendChart.call(plotArea,chart,pane)},seriesPaneName:function(series){var plotArea=this,options=plotArea.options,axisName=series.axis,axisOptions=[].concat(options.valueAxis),axis=$.grep(axisOptions,function(a){return a.name===axisName})[0],panes=options.panes||[{}],defaultPaneName=(panes[0]||{}).name||"default",paneName=(axis||{}).pane||defaultPaneName;return paneName},seriesCategoryAxis:function(series){var plotArea=this,axisName=series.categoryAxis,axis=axisName?plotArea.namedCategoryAxes[axisName]:plotArea.categoryAxis;if(!axis)throw new Error("Unable to locate category axis with name "+axisName);return axis},stackableChartOptions:function(firstSeries,pane){var clip,stack=firstSeries.stack,isStacked100=stack&&"100%"===stack.type;return defined(pane.options.clip)?clip=pane.options.clip:isStacked100&&(clip=!1),{isStacked:stack,isStacked100:isStacked100,clip:clip}},groupSeriesByCategoryAxis:function(series){function groupSeries(axis,axisIx){return $.grep(series,function(s){return 0===axisIx&&!s.categoryAxis||s.categoryAxis==axis})}for(var unique={},categoryAxes=$.map(series,function(s){var name=s.categoryAxis||"$$default$$";return unique.hasOwnProperty(name)?void 0:(unique[name]=!0,name)}),groups=[],axisIx=0;axisIx<categoryAxes.length;axisIx++){var axis=categoryAxes[axisIx],axisSeries=groupSeries(axis,axisIx);0!==axisSeries.length&&groups.push(axisSeries)}return groups},createBarChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],barChart=new BarChart(plotArea,extend({series:series,invertAxes:plotArea.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing},plotArea.stackableChartOptions(firstSeries,pane)));plotArea.appendChart(barChart,pane)}},createRangeBarChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],rangeColumnChart=new RangeBarChart(plotArea,{series:series,invertAxes:plotArea.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing});plotArea.appendChart(rangeColumnChart,pane)}},createBulletChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],bulletChart=new BulletChart(plotArea,{series:series,invertAxes:plotArea.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing,clip:pane.options.clip});plotArea.appendChart(bulletChart,pane)}},createLineChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],lineChart=new LineChart(plotArea,extend({invertAxes:plotArea.invertAxes,series:series},plotArea.stackableChartOptions(firstSeries,pane)));plotArea.appendChart(lineChart,pane)}},createAreaChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],areaChart=new AreaChart(plotArea,extend({invertAxes:plotArea.invertAxes,series:series},plotArea.stackableChartOptions(firstSeries,pane)));plotArea.appendChart(areaChart,pane)}},createOHLCChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],chart=new OHLCChart(plotArea,{invertAxes:plotArea.invertAxes,gap:firstSeries.gap,series:series,spacing:firstSeries.spacing,clip:pane.options.clip});plotArea.appendChart(chart,pane)}},createCandlestickChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],chart=new CandlestickChart(plotArea,{invertAxes:plotArea.invertAxes,gap:firstSeries.gap,series:series,spacing:firstSeries.spacing,clip:pane.options.clip});plotArea.appendChart(chart,pane)}},createBoxPlotChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],chart=new BoxPlotChart(plotArea,{invertAxes:plotArea.invertAxes,gap:firstSeries.gap,series:series,spacing:firstSeries.spacing,clip:pane.options.clip});plotArea.appendChart(chart,pane)}},createWaterfallChart:function(series,pane){if(0!==series.length){var plotArea=this,firstSeries=series[0],waterfallChart=new WaterfallChart(plotArea,{series:series,invertAxes:plotArea.invertAxes,gap:firstSeries.gap,spacing:firstSeries.spacing});plotArea.appendChart(waterfallChart,pane)}},axisRequiresRounding:function(categoryAxisName,categoryAxisIndex){var seriesIx,seriesAxis,plotArea=this,centeredSeries=filterSeriesByType(plotArea.series,EQUALLY_SPACED_SERIES);for(seriesIx=0;seriesIx<plotArea.series.length;seriesIx++){var currentSeries=plotArea.series[seriesIx];if(currentSeries.type===LINE||currentSeries.type===AREA){var line=currentSeries.line;line&&line.style===STEP&&centeredSeries.push(currentSeries)}}for(seriesIx=0;seriesIx<centeredSeries.length;seriesIx++)if(seriesAxis=centeredSeries[seriesIx].categoryAxis||"",seriesAxis===categoryAxisName||!seriesAxis&&0===categoryAxisIndex)return!0},aggregatedAxis:function(categoryAxisName,categoryAxisIndex){var seriesIx,seriesAxis,plotArea=this,series=plotArea.series;for(seriesIx=0;seriesIx<series.length;seriesIx++)if(seriesAxis=series[seriesIx].categoryAxis||"",(seriesAxis===categoryAxisName||!seriesAxis&&0===categoryAxisIndex)&&series[seriesIx].categoryField)return!0},axisRequiresOutOfRangePoints:function(categoryAxisName,categoryAxisIndex){var seriesIx,line,seriesAxis,plotArea=this,contineousSeries=filterSeriesByType(plotArea.series,[LINE,VERTICAL_LINE,AREA,VERTICAL_AREA]);for(seriesIx=0;seriesIx<contineousSeries.length;seriesIx++)if(seriesAxis=contineousSeries[seriesIx].categoryAxis||"",line=contineousSeries[seriesIx].line,!(seriesAxis!==categoryAxisName&&(seriesAxis||0!==categoryAxisIndex)||line&&line.style===STEP))return!0},createCategoryAxesLabels:function(){for(var axes=this.axes,i=0;i<axes.length;i++)axes[i]instanceof CategoryAxis&&axes[i].createLabels()},createCategoryAxes:function(panes){var i,axisOptions,axisPane,categories,type,name,categoryAxis,primaryAxis,plotArea=this,invertAxes=plotArea.invertAxes,definitions=[].concat(plotArea.options.categoryAxis),axes=[];for(i=0;i<definitions.length;i++)if(axisOptions=definitions[i],axisPane=plotArea.findPane(axisOptions.pane),inArray(axisPane,panes)){if(name=axisOptions.name,categories=axisOptions.categories||[],type=axisOptions.type||"",axisOptions=deepExtend({vertical:invertAxes,axisCrossingValue:invertAxes?MAX_VALUE:0,_deferLabels:!0},axisOptions),defined(axisOptions.justified)||(axisOptions.justified=plotArea.isJustified()),plotArea.axisRequiresRounding(name,i)&&(axisOptions.justified=!1),plotArea.axisRequiresOutOfRangePoints(name,i)&&(axisOptions.outOfRangePoints=!0),isDateAxis(axisOptions,categories[0])?categoryAxis=new DateCategoryAxis(axisOptions):(axisOptions.limitCategories=plotArea.aggregatedAxis(name,i),categoryAxis=new CategoryAxis(axisOptions)),name){if(plotArea.namedCategoryAxes[name])throw new Error("Category axis with name "+name+" is already defined");plotArea.namedCategoryAxes[name]=categoryAxis}categoryAxis.axisIndex=i,axes.push(categoryAxis),plotArea.appendAxis(categoryAxis)}primaryAxis=plotArea.categoryAxis||axes[0],plotArea.categoryAxis=primaryAxis,invertAxes?plotArea.axisY=primaryAxis:plotArea.axisX=primaryAxis},isJustified:function(){var i,currentSeries,plotArea=this,series=plotArea.series;for(i=0;i<series.length;i++)if(currentSeries=series[i],!inArray(currentSeries.type,[AREA,VERTICAL_AREA]))return!1;return!0},createValueAxes:function(panes){var axisOptions,axisPane,valueAxis,primaryAxis,range,axisType,defaultAxisRange,name,i,plotArea=this,tracker=plotArea.valueAxisRangeTracker,defaultRange=tracker.query(),definitions=[].concat(plotArea.options.valueAxis),invertAxes=plotArea.invertAxes,baseOptions={vertical:!invertAxes},axes=[];for(plotArea.stack100&&(baseOptions.roundToMajorUnit=!1,baseOptions.labels={format:"P0"}),i=0;i<definitions.length;i++)if(axisOptions=definitions[i],axisPane=plotArea.findPane(axisOptions.pane),inArray(axisPane,panes)){if(name=axisOptions.name,defaultAxisRange=equalsIgnoreCase(axisOptions.type,LOGARITHMIC)?{min:.1,max:1}:{min:0,max:1},range=tracker.query(name)||defaultRange||defaultAxisRange,0===i&&range&&defaultRange&&(range.min=math.min(range.min,defaultRange.min),range.max=math.max(range.max,defaultRange.max)),axisType=equalsIgnoreCase(axisOptions.type,LOGARITHMIC)?LogarithmicAxis:NumericAxis,valueAxis=new axisType(range.min,range.max,deepExtend({},baseOptions,axisOptions)),name){if(plotArea.namedValueAxes[name])throw new Error("Value axis with name "+name+" is already defined");plotArea.namedValueAxes[name]=valueAxis}valueAxis.axisIndex=i,axes.push(valueAxis),plotArea.appendAxis(valueAxis)}primaryAxis=plotArea.valueAxis||axes[0],plotArea.valueAxis=primaryAxis,invertAxes?plotArea.axisX=primaryAxis:plotArea.axisY=primaryAxis},click:function(chart,e){var allAxes,i,axis,plotArea=this,coords=chart._eventCoordinates(e),point=new Point2D(coords.x,coords.y),pane=plotArea.pointPane(point),categories=[],values=[];if(pane){for(allAxes=pane.axes,i=0;i<allAxes.length;i++)axis=allAxes[i],axis.getValue?appendIfNotNull(values,axis.getValue(point)):appendIfNotNull(categories,axis.getCategory(point));0===categories.length&&appendIfNotNull(categories,plotArea.categoryAxis.getCategory(point)),categories.length>0&&values.length>0&&chart.trigger(PLOT_AREA_CLICK,{element:$(e.target),originalEvent:e,category:singleItemOrArray(categories),value:singleItemOrArray(values)})}},pointPane:function(point){var currentPane,i,plotArea=this,panes=plotArea.panes;for(i=0;i<panes.length;i++)if(currentPane=panes[i],currentPane.contentBox.containsPoint(point))return currentPane},updateAxisOptions:function(axis,options){var axesOptions=[].concat(axis instanceof CategoryAxis?this.options.categoryAxis:this.options.valueAxis);deepExtend(axesOptions[axis.axisIndex],options)}}),AxisGroupRangeTracker=Class.extend({init:function(){var tracker=this;tracker.axisRanges={}},update:function(chartAxisRanges){var range,chartRange,axisName,tracker=this,axisRanges=tracker.axisRanges;for(axisName in chartAxisRanges)range=axisRanges[axisName],chartRange=chartAxisRanges[axisName],axisRanges[axisName]=range=range||{min:MAX_VALUE,max:MIN_VALUE},range.min=math.min(range.min,chartRange.min),range.max=math.max(range.max,chartRange.max)},reset:function(axisName){this.axisRanges[axisName]=undefined},query:function(axisName){return this.axisRanges[axisName]}}),XYPlotArea=PlotAreaBase.extend({init:function(series,options){var plotArea=this;plotArea.namedXAxes={},plotArea.namedYAxes={},plotArea.xAxisRangeTracker=new AxisGroupRangeTracker,plotArea.yAxisRangeTracker=new AxisGroupRangeTracker,PlotAreaBase.fn.init.call(plotArea,series,options)},options:{xAxis:{},yAxis:{}},render:function(panes){var i,pane,paneSeries,filteredSeries,plotArea=this,seriesByPane=plotArea.groupSeriesByPane();for(panes=panes||plotArea.panes,i=0;i<panes.length;i++)pane=panes[i],paneSeries=seriesByPane[pane.options.name||"default"]||[],plotArea.addToLegend(paneSeries),filteredSeries=plotArea.filterVisibleSeries(paneSeries),filteredSeries&&(plotArea.createScatterChart(filterSeriesByType(filteredSeries,SCATTER),pane),plotArea.createScatterLineChart(filterSeriesByType(filteredSeries,SCATTER_LINE),pane),plotArea.createBubbleChart(filterSeriesByType(filteredSeries,BUBBLE),pane));plotArea.createAxes(panes)},appendChart:function(chart,pane){var plotArea=this;plotArea.xAxisRangeTracker.update(chart.xAxisRanges),plotArea.yAxisRangeTracker.update(chart.yAxisRanges),PlotAreaBase.fn.appendChart.call(plotArea,chart,pane)},removeAxis:function(axis){var plotArea=this,axisName=axis.options.name;PlotAreaBase.fn.removeAxis.call(plotArea,axis),axis.options.vertical?(plotArea.yAxisRangeTracker.reset(axisName),delete plotArea.namedYAxes[axisName]):(plotArea.xAxisRangeTracker.reset(axisName),delete plotArea.namedXAxes[axisName]),axis===plotArea.axisX&&delete plotArea.axisX,axis===plotArea.axisY&&delete plotArea.axisY},seriesPaneName:function(series){var plotArea=this,options=plotArea.options,xAxisName=series.xAxis,xAxisOptions=[].concat(options.xAxis),xAxis=$.grep(xAxisOptions,function(a){return a.name===xAxisName})[0],yAxisName=series.yAxis,yAxisOptions=[].concat(options.yAxis),yAxis=$.grep(yAxisOptions,function(a){return a.name===yAxisName})[0],panes=options.panes||[{}],defaultPaneName=panes[0].name||"default",paneName=(xAxis||{}).pane||(yAxis||{}).pane||defaultPaneName;return paneName},createScatterChart:function(series,pane){var plotArea=this;series.length>0&&plotArea.appendChart(new ScatterChart(plotArea,{series:series,clip:pane.options.clip}),pane)},createScatterLineChart:function(series,pane){var plotArea=this;series.length>0&&plotArea.appendChart(new ScatterLineChart(plotArea,{series:series,clip:pane.options.clip}),pane)},createBubbleChart:function(series,pane){var plotArea=this;series.length>0&&plotArea.appendChart(new BubbleChart(plotArea,{series:series,clip:pane.options.clip}),pane)},createXYAxis:function(options,vertical,axisIndex){var axis,axisType,seriesIx,currentSeries,seriesAxisName,firstPointValue,inferredDate,i,plotArea=this,axisName=options.name,namedAxes=vertical?plotArea.namedYAxes:plotArea.namedXAxes,tracker=vertical?plotArea.yAxisRangeTracker:plotArea.xAxisRangeTracker,axisOptions=deepExtend({},options,{vertical:vertical}),isLog=equalsIgnoreCase(axisOptions.type,LOGARITHMIC),defaultRange=tracker.query(),defaultAxisRange=isLog?{min:.1,max:1}:{min:0,max:1},range=tracker.query(axisName)||defaultRange||defaultAxisRange,series=plotArea.series,typeSamples=[axisOptions.min,axisOptions.max];for(seriesIx=0;seriesIx<series.length;seriesIx++)if(currentSeries=series[seriesIx],seriesAxisName=currentSeries[vertical?"yAxis":"xAxis"],seriesAxisName==axisOptions.name||0===axisIndex&&!seriesAxisName){firstPointValue=SeriesBinder.current.bindPoint(currentSeries,0).valueFields,typeSamples.push(firstPointValue[vertical?"y":"x"]);break}for(0===axisIndex&&defaultRange&&(range.min=math.min(range.min,defaultRange.min),range.max=math.max(range.max,defaultRange.max)),i=0;i<typeSamples.length;i++)if(typeSamples[i]instanceof Date){inferredDate=!0;break}if(axisType=equalsIgnoreCase(axisOptions.type,DATE)||!axisOptions.type&&inferredDate?DateValueAxis:isLog?LogarithmicAxis:NumericAxis,axis=new axisType(range.min,range.max,axisOptions),axisName){if(namedAxes[axisName])throw new Error((vertical?"Y":"X")+" axis with name "+axisName+" is already defined");namedAxes[axisName]=axis}return plotArea.appendAxis(axis),axis},createAxes:function(panes){var axisPane,plotArea=this,options=plotArea.options,xAxesOptions=[].concat(options.xAxis),xAxes=[],yAxesOptions=[].concat(options.yAxis),yAxes=[];each(xAxesOptions,function(i){axisPane=plotArea.findPane(this.pane),inArray(axisPane,panes)&&xAxes.push(plotArea.createXYAxis(this,!1,i))}),each(yAxesOptions,function(i){axisPane=plotArea.findPane(this.pane),inArray(axisPane,panes)&&yAxes.push(plotArea.createXYAxis(this,!0,i))}),plotArea.axisX=plotArea.axisX||xAxes[0],plotArea.axisY=plotArea.axisY||yAxes[0]},click:function(chart,e){var i,axis,currentValue,values,plotArea=this,coords=chart._eventCoordinates(e),point=new Point2D(coords.x,coords.y),allAxes=plotArea.axes,length=allAxes.length,xValues=[],yValues=[];for(i=0;length>i;i++)axis=allAxes[i],values=axis.options.vertical?yValues:xValues,currentValue=axis.getValue(point),null!==currentValue&&values.push(currentValue);xValues.length>0&&yValues.length>0&&chart.trigger(PLOT_AREA_CLICK,{element:$(e.target),originalEvent:e,x:singleItemOrArray(xValues),y:singleItemOrArray(yValues)})},updateAxisOptions:function(axis,options){var vertical=axis.options.vertical,index=indexOf(axis,[].concat(vertical?this.axisY:this.axisX)),axisOptions=[].concat(vertical?this.options.yAxis:this.options.xAxis)[index];deepExtend(axisOptions,options)}}),PiePlotArea=PlotAreaBase.extend({render:function(){var plotArea=this,series=plotArea.series;plotArea.createPieChart(series)},createPieChart:function(series){var plotArea=this,firstSeries=series[0],pieChart=new PieChart(plotArea,{series:series,padding:firstSeries.padding,startAngle:firstSeries.startAngle,connectors:firstSeries.connectors,legend:plotArea.options.legend});plotArea.appendChart(pieChart)},appendChart:function(chart,pane){PlotAreaBase.fn.appendChart.call(this,chart,pane),append(this.options.legend.items,chart.legendItems)}}),DonutPlotArea=PiePlotArea.extend({render:function(){var plotArea=this,series=plotArea.series;plotArea.createDonutChart(series)},createDonutChart:function(series){var plotArea=this,firstSeries=series[0],donutChart=new DonutChart(plotArea,{series:series,padding:firstSeries.padding,connectors:firstSeries.connectors,legend:plotArea.options.legend});plotArea.appendChart(donutChart)}}),PieAnimation=draw.Animation.extend({options:{easing:"easeOutElastic",duration:INITIAL_ANIMATION_DURATION},setup:function(){this.element.transform(geom.transform().scale(START_SCALE,START_SCALE,this.options.center))},step:function(pos){this.element.transform(geom.transform().scale(pos,pos,this.options.center))}});draw.AnimationFactory.current.register(PIE,PieAnimation);var BubbleAnimation=draw.Animation.extend({options:{easing:"easeOutElastic"},setup:function(){var center=this.center=this.element.bbox().center();this.element.transform(geom.transform().scale(START_SCALE,START_SCALE,center))},step:function(pos){this.element.transform(geom.transform().scale(pos,pos,this.center))}});draw.AnimationFactory.current.register(BUBBLE,BubbleAnimation);var Highlight=Class.extend({init:function(){this._points=[]},destroy:function(){this._points=[]},show:function(points){points=[].concat(points),this.hide();for(var i=0;i<points.length;i++){var point=points[i];point&&point.toggleHighlight&&point.hasHighlight()&&(this.togglePointHighlight(point,!0),
this._points.push(point))}},togglePointHighlight:function(point,show){var toggleHandler=(point.options.highlight||{}).toggle;if(toggleHandler){var eventArgs={category:point.category,series:point.series,dataItem:point.dataItem,value:point.value,preventDefault:preventDefault,visual:point.highlightVisual(),show:show};toggleHandler(eventArgs),eventArgs._defaultPrevented||point.toggleHighlight(show)}else point.toggleHighlight(show)},hide:function(){for(var points=this._points;points.length;)this.togglePointHighlight(points.pop(),!1)},isHighlighted:function(element){for(var points=this._points,i=0;i<points.length;i++){var point=points[i];if(element==point)return!0}return!1}}),BaseTooltip=Observable.extend({init:function(chartElement,options){var tooltip=this;Observable.fn.init.call(tooltip),tooltip.options=deepExtend({},tooltip.options,options),tooltip.chartElement=chartElement,tooltip.template=BaseTooltip.template,tooltip.template||(tooltip.template=BaseTooltip.template=renderTemplate("<div class='"+CSS_PREFIX+"tooltip "+CSS_PREFIX+"chart-tooltip' style='display:none; position: absolute; font: #= d.font #;border: #= d.border.width #px solid;opacity: #= d.opacity #; filter: alpha(opacity=#= d.opacity * 100 #);'></div>"));var padding=getSpacing(tooltip.options.padding||{},"auto");tooltip.element=$(tooltip.template(tooltip.options)).css({"padding-top":padding.top,"padding-right":padding.right,"padding-bottom":padding.bottom,"padding-left":padding.left}),tooltip.move=proxy(tooltip.move,tooltip),tooltip._mouseleave=proxy(tooltip._mouseleave,tooltip);var mobileScrollerSelector=kendo.format("[{0}='content'],[{0}='scroller']",kendo.attr("role"));tooltip._mobileScroller=chartElement.closest(mobileScrollerSelector).data("kendoMobileScroller")},destroy:function(){this._clearShowTimeout(),this.element&&(this.element.off(MOUSELEAVE_NS).remove(),this.element=null)},options:{border:{width:1},opacity:1,animation:{duration:TOOLTIP_ANIMATION_DURATION}},move:function(){var offset,tooltip=this,options=tooltip.options,element=tooltip.element;tooltip.anchor&&tooltip.element&&(offset=tooltip._offset(),tooltip.visible||element.css({top:offset.top,left:offset.left}),tooltip.visible=!0,tooltip._ensureElement(document.body),element.stop(!0,!0).show().animate({left:offset.left,top:offset.top},options.animation.duration))},_clearShowTimeout:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)},_padding:function(){if(!this._chartPadding){var chartElement=this.chartElement;this._chartPadding={top:parseInt(chartElement.css("paddingTop"),10),left:parseInt(chartElement.css("paddingLeft"),10)}}return this._chartPadding},_offset:function(){var tooltip=this,size=tooltip._measure(),anchor=tooltip.anchor,chartPadding=tooltip._padding(),chartOffset=tooltip.chartElement.offset(),top=round(anchor.y+chartPadding.top+chartOffset.top),left=round(anchor.x+chartPadding.left+chartOffset.left),zoomLevel=kendo.support.zoomLevel(),viewport=$(window),scrollTop=window.pageYOffset||document.documentElement.scrollTop||0,scrollLeft=window.pageXOffset||document.documentElement.scrollLeft||0,movable=(this._mobileScroller||{}).movable;if(movable&&1!==movable.scale){var transform=geom.transform().scale(movable.scale,movable.scale,[movable.x,movable.y]),point=new geom.Point(left,top).transform(transform);left=point.x,top=point.y}else top+=tooltip._fit(top-scrollTop,size.height,viewport.outerHeight()/zoomLevel),left+=tooltip._fit(left-scrollLeft,size.width,viewport.outerWidth()/zoomLevel);return{top:top,left:left}},setStyle:function(options,point){var background=options.background,border=options.border.color;if(point){var pointColor=point.color||point.options.color;background=valueOrDefault(background,pointColor),border=valueOrDefault(border,pointColor)}if(!defined(options.color)){var brightness=new Color(background).percBrightness();this.element.toggleClass(CSS_PREFIX+TOOLTIP_INVERSE,brightness>180)}this.element.css({backgroundColor:background,borderColor:border,font:options.font,color:options.color,opacity:options.opacity,borderWidth:options.border.width})},show:function(){this._clearShowTimeout(),this.showTimeout=setTimeout(this.move,TOOLTIP_SHOW_DELAY)},hide:function(){var tooltip=this;clearTimeout(tooltip.showTimeout),tooltip._hideElement(),tooltip.visible&&(tooltip.point=null,tooltip.visible=!1,tooltip.index=null)},_measure:function(){this._ensureElement();var size={width:this.element.outerWidth(),height:this.element.outerHeight()};return size},_ensureElement:function(){this.element&&this.element.appendTo(document.body).on(MOUSELEAVE_NS,this._mouseleave)},_mouseleave:function(e){var target=e.relatedTarget,chart=this.chartElement[0];target&&target!==chart&&!$.contains(chart,target)&&(this.trigger(LEAVE),this.hide())},_hideElement:function(){var tooltip=this,element=this.element;element&&element.fadeOut({always:function(){tooltip.visible||element.off(MOUSELEAVE_NS).remove()}})},_pointContent:function(point){var content,tooltipTemplate,tooltip=this,options=deepExtend({},tooltip.options,point.options.tooltip);return defined(point.value)&&(content=point.value.toString()),options.template?(tooltipTemplate=template(options.template),content=tooltipTemplate({value:point.value,category:point.category,series:point.series,dataItem:point.dataItem,percentage:point.percentage,runningTotal:point.runningTotal,total:point.total,low:point.low,high:point.high,xLow:point.xLow,xHigh:point.xHigh,yLow:point.yLow,yHigh:point.yHigh})):options.format&&(content=point.formatValue(options.format)),content},_pointAnchor:function(point){var size=this._measure();return point.tooltipAnchor(size.width,size.height)},_fit:function(offset,size,viewPortSize){var output=0;return offset+size>viewPortSize&&(output=viewPortSize-(offset+size)),0>offset&&(output=-offset),output}}),Tooltip=BaseTooltip.extend({show:function(point){var tooltip=this,options=deepExtend({},tooltip.options,point.options.tooltip);point&&point.tooltipAnchor&&tooltip.element&&(tooltip.element.html(tooltip._pointContent(point)),tooltip.anchor=tooltip._pointAnchor(point),tooltip.anchor?(tooltip.setStyle(options,point),BaseTooltip.fn.show.call(tooltip,point)):tooltip.hide())}}),SharedTooltip=BaseTooltip.extend({init:function(element,plotArea,options){var tooltip=this;BaseTooltip.fn.init.call(tooltip,element,options),tooltip.plotArea=plotArea},options:{sharedTemplate:"<table><th colspan='2'>#= categoryText #</th># for(var i = 0; i < points.length; i++) { ## var point = points[i]; #<tr># if(point.series.name) { # <td> #= point.series.name #:</td># } #<td>#= content(point) #</td></tr># } #</table>",categoryFormat:"{0:d}"},showAt:function(points,coords){var content,tooltip=this,options=tooltip.options,plotArea=tooltip.plotArea,axis=plotArea.categoryAxis,index=axis.pointCategoryIndex(coords),category=axis.getCategory(coords),slot=axis.getSlot(index);points=$.grep(points,function(p){var tooltip=p.series.tooltip,excluded=tooltip&&tooltip.visible===!1;return!excluded}),points.length>0&&(content=tooltip._content(points,category),tooltip.element.html(content),tooltip.anchor=tooltip._slotAnchor(coords,slot),tooltip.setStyle(options,points[0]),BaseTooltip.fn.show.call(tooltip))},_slotAnchor:function(point,slot){var anchor,tooltip=this,plotArea=tooltip.plotArea,axis=plotArea.categoryAxis,size=this._measure(),hCenter=point.y-size.height/2;return anchor=axis.options.vertical?Point2D(point.x,hCenter):Point2D(slot.center().x,hCenter)},_content:function(points,category){var template,content,tooltip=this;return template=kendo.template(tooltip.options.sharedTemplate),content=template({points:points,category:category,categoryText:autoFormat(tooltip.options.categoryFormat,category),content:tooltip._pointContent})}}),Crosshair=ChartElement.extend({init:function(axis,options){ChartElement.fn.init.call(this,options),this.axis=axis,this.stickyMode=axis instanceof CategoryAxis},options:{color:BLACK,width:1,zIndex:-1,tooltip:{visible:!1}},showAt:function(point){this.point=point,this.moveLine(),this.line.visible(!0);var tooltipOptions=this.options.tooltip;tooltipOptions.visible&&(this.tooltip||(this.tooltip=new CrosshairTooltip(this,deepExtend({},tooltipOptions,{stickyMode:this.stickyMode}))),this.tooltip.showAt(point))},hide:function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},moveLine:function(){var slot,lineStart,lineEnd,crosshair=this,axis=crosshair.axis,vertical=axis.options.vertical,box=crosshair.getBox(),point=crosshair.point,dim=vertical?Y:X;lineStart=new geom.Point(box.x1,box.y1),lineEnd=vertical?new geom.Point(box.x2,box.y1):new geom.Point(box.x1,box.y2),point&&(crosshair.stickyMode?(slot=axis.getSlot(axis.pointCategoryIndex(point)),lineStart[dim]=lineEnd[dim]=slot.center()[dim]):lineStart[dim]=lineEnd[dim]=point[dim]),crosshair.box=box,this.line.moveTo(lineStart).lineTo(lineEnd)},getBox:function(){var axisLineBox,currentAxis,i,crosshair=this,axis=crosshair.axis,axes=axis.pane.axes,length=axes.length,vertical=axis.options.vertical,box=axis.lineBox().clone(),dim=vertical?X:Y;for(i=0;length>i;i++)currentAxis=axes[i],currentAxis.options.vertical!=vertical&&(axisLineBox?axisLineBox.wrap(currentAxis.lineBox()):axisLineBox=currentAxis.lineBox().clone());return box[dim+1]=axisLineBox[dim+1],box[dim+2]=axisLineBox[dim+2],box},createVisual:function(){ChartElement.fn.createVisual.call(this);var options=this.options;this.line=new draw.Path({stroke:{color:options.color,width:options.width,opacity:options.opacity,dashType:options.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},destroy:function(){var crosshair=this;crosshair.tooltip&&crosshair.tooltip.destroy(),ChartElement.fn.destroy.call(crosshair)}}),CrosshairTooltip=BaseTooltip.extend({init:function(crosshair,options){var tooltip=this,chartElement=crosshair.axis.getRoot().chart.element;tooltip.crosshair=crosshair,BaseTooltip.fn.init.call(tooltip,chartElement,deepExtend({},tooltip.options,{background:crosshair.axis.plotArea.options.seriesColors[0]},options)),tooltip.setStyle(tooltip.options)},options:{padding:10},showAt:function(point){var tooltip=this,element=tooltip.element;element&&(tooltip.point=point,tooltip.element.html(tooltip.content(point)),tooltip.anchor=tooltip.getAnchor(),tooltip.move())},move:function(){var tooltip=this,element=tooltip.element,offset=tooltip._offset();tooltip._ensureElement(),element.css({top:offset.top,left:offset.left}).show()},content:function(point){var content,value,tooltipTemplate,tooltip=this,options=tooltip.options,axis=tooltip.crosshair.axis,axisOptions=axis.options;return value=content=axis[options.stickyMode?"getCategory":"getValue"](point),options.template?(tooltipTemplate=template(options.template),content=tooltipTemplate({value:value})):options.format?content=autoFormat(options.format,value):axisOptions.type===DATE&&(content=autoFormat(axisOptions.labels.dateFormats[axisOptions.baseUnit],value)),content},getAnchor:function(){var anchor,tooltip=this,options=tooltip.options,position=options.position,crosshair=this.crosshair,vertical=!crosshair.axis.options.vertical,lineBox=crosshair.line.bbox(),size=this._measure(),halfWidth=size.width/2,halfHeight=size.height/2,padding=options.padding;return anchor=vertical?position===BOTTOM?lineBox.bottomLeft().translate(-halfWidth,padding):lineBox.topLeft().translate(-halfWidth,-size.height-padding):position===LEFT?lineBox.topLeft().translate(-size.width-padding,-halfHeight):lineBox.topRight().translate(padding,-halfHeight)},hide:function(){this.element.hide(),this.point=null},destroy:function(){BaseTooltip.fn.destroy.call(this),this.point=null}}),Aggregates={min:function(values){var i,n,min=MAX_VALUE,length=values.length;for(i=0;length>i;i++)n=values[i],isNumber(n)&&(min=math.min(min,n));return min===MAX_VALUE?values[0]:min},max:function(values){var i,n,max=MIN_VALUE,length=values.length;for(i=0;length>i;i++)n=values[i],isNumber(n)&&(max=math.max(max,n));return max===MIN_VALUE?values[0]:max},sum:function(values){var i,n,length=values.length,sum=0;for(i=0;length>i;i++)n=values[i],isNumber(n)&&(sum+=n);return sum},sumOrNull:function(values){var result=null;return countNumbers(values)&&(result=Aggregates.sum(values)),result},count:function(values){var i,val,length=values.length,count=0;for(i=0;length>i;i++)val=values[i],null!==val&&defined(val)&&count++;return count},avg:function(values){var result=values[0],count=countNumbers(values);return count>0&&(result=Aggregates.sum(values)/count),result},first:function(values){var i,val,length=values.length;for(i=0;length>i;i++)if(val=values[i],null!==val&&defined(val))return val;return values[0]}};DefaultAggregates.prototype={register:function(seriesTypes,aggregates){for(var i=0;i<seriesTypes.length;i++)this._defaults[seriesTypes[i]]=aggregates},query:function(seriesType){return this._defaults[seriesType]}},DefaultAggregates.current=new DefaultAggregates;var Selection=Observable.extend({init:function(chart,categoryAxis,options){var wrapper,padding,that=this,chartElement=chart.element,categoryAxisLineBox=categoryAxis.lineBox(),valueAxis=that.getValueAxis(categoryAxis),valueAxisLineBox=valueAxis.lineBox(),selectorPrefix="."+CSS_PREFIX;Observable.fn.init.call(that),that.options=deepExtend({},that.options,options),options=that.options,that.chart=chart,that.chartElement=chartElement,that.categoryAxis=categoryAxis,that._dateAxis=that.categoryAxis instanceof DateCategoryAxis,that.valueAxis=valueAxis,that._dateAxis&&deepExtend(options,{min:toDate(options.min),max:toDate(options.max),from:toDate(options.from),to:toDate(options.to)}),that.template=Selection.template,that.template||(that.template=Selection.template=renderTemplate("<div class='"+CSS_PREFIX+"selector' style='width: #= d.width #px; height: #= d.height #px; top: #= d.offset.top #px; left: #= d.offset.left #px;'><div class='"+CSS_PREFIX+"mask'></div><div class='"+CSS_PREFIX+"mask'></div><div class='"+CSS_PREFIX+"selection'><div class='"+CSS_PREFIX+"selection-bg'></div><div class='"+CSS_PREFIX+"handle "+CSS_PREFIX+"leftHandle'><div></div></div><div class='"+CSS_PREFIX+"handle "+CSS_PREFIX+"rightHandle'><div></div></div></div></div>")),padding={left:parseInt(chartElement.css("paddingLeft"),10),right:parseInt(chartElement.css("paddingTop"),10)},that.options=deepExtend({},{width:categoryAxisLineBox.width(),height:valueAxisLineBox.height(),padding:padding,offset:{left:valueAxisLineBox.x2+padding.left,top:valueAxisLineBox.y1+padding.right},from:options.min,to:options.max},options),that.options.visible&&(that.wrapper=wrapper=$(that.template(that.options)).appendTo(chartElement),that.selection=wrapper.find(selectorPrefix+"selection"),that.leftMask=wrapper.find(selectorPrefix+"mask").first(),that.rightMask=wrapper.find(selectorPrefix+"mask").last(),that.leftHandle=wrapper.find(selectorPrefix+"leftHandle"),that.rightHandle=wrapper.find(selectorPrefix+"rightHandle"),that.options.selection={border:{left:parseFloat(that.selection.css("border-left-width"),10),right:parseFloat(that.selection.css("border-right-width"),10)}},that.leftHandle.css("top",(that.selection.height()-that.leftHandle.height())/2),that.rightHandle.css("top",(that.selection.height()-that.rightHandle.height())/2),that.set(that._index(options.from),that._index(options.to)),that.bind(that.events,that.options),that.wrapper[0].style.cssText=that.wrapper[0].style.cssText,that.wrapper.on(MOUSEWHEEL_NS,proxy(that._mousewheel,that)),kendo.UserEvents?that.userEvents=new kendo.UserEvents(that.wrapper,{global:!0,stopPropagation:!0,multiTouch:!0,start:proxy(that._start,that),move:proxy(that._move,that),end:proxy(that._end,that),tap:proxy(that._tap,that),gesturestart:proxy(that._gesturechange,that),gesturechange:proxy(that._gesturechange,that)}):that.leftHandle.add(that.rightHandle).removeClass(CSS_PREFIX+"handle"))},events:[SELECT_START,SELECT,SELECT_END],options:{visible:!0,mousewheel:{zoom:BOTH},min:MIN_VALUE,max:MAX_VALUE},destroy:function(){var that=this,userEvents=that.userEvents;userEvents&&userEvents.destroy(),clearTimeout(that._mwTimeout),that._state=null,that.wrapper.remove()},_rangeEventArgs:function(range){var that=this;return{axis:that.categoryAxis.options,from:that._value(range.from),to:that._value(range.to)}},_start:function(e){var args,that=this,options=that.options,target=$(e.event.target);!that._state&&target&&(that.chart._unsetActivePoint(),that._state={moveTarget:target.parents(".k-handle").add(target).first(),startLocation:e.x?e.x.location:0,range:{from:that._index(options.from),to:that._index(options.to)}},args=that._rangeEventArgs({from:that._index(options.from),to:that._index(options.to)}),that.trigger(SELECT_START,args)&&(that.userEvents.cancel(),that._state=null))},_move:function(e){if(this._state){var that=this,state=that._state,options=that.options,categories=that.categoryAxis.options.categories,from=that._index(options.from),to=that._index(options.to),min=that._index(options.min),max=that._index(options.max),delta=state.startLocation-e.x.location,range=state.range,oldRange={from:range.from,to:range.to},span=range.to-range.from,target=state.moveTarget,scale=that.wrapper.width()/(categories.length-1),offset=math.round(delta/scale);target&&(e.preventDefault(),target.is(".k-selection, .k-selection-bg")?(range.from=math.min(math.max(min,from-offset),max-span),range.to=math.min(range.from+span,max)):target.is(".k-leftHandle")?(range.from=math.min(math.max(min,from-offset),max-1),range.to=math.max(range.from+1,range.to)):target.is(".k-rightHandle")&&(range.to=math.min(math.max(min+1,to-offset),max),range.from=math.min(range.to-1,range.from)),(range.from!==oldRange.from||range.to!==oldRange.to)&&(that.move(range.from,range.to),that.trigger(SELECT,that._rangeEventArgs(range))))}},_end:function(){var that=this,range=that._state.range;delete that._state,that.set(range.from,range.to),that.trigger(SELECT_END,that._rangeEventArgs(range))},_gesturechange:function(e){if(this._state){var that=this,chart=that.chart,state=that._state,options=that.options,categoryAxis=that.categoryAxis,range=state.range,p0=chart._toModelCoordinates(e.touches[0].x.location).x,p1=chart._toModelCoordinates(e.touches[1].x.location).x,left=math.min(p0,p1),right=math.max(p0,p1);e.preventDefault(),state.moveTarget=null,range.from=categoryAxis.pointCategoryIndex(new dataviz.Point2D(left))||options.min,range.to=categoryAxis.pointCategoryIndex(new dataviz.Point2D(right))||options.max,that.move(range.from,range.to)}},_tap:function(e){var that=this,options=that.options,coords=that.chart._eventCoordinates(e),categoryAxis=that.categoryAxis,categoryIx=categoryAxis.pointCategoryIndex(new dataviz.Point2D(coords.x,categoryAxis.box.y1)),from=that._index(options.from),to=that._index(options.to),min=that._index(options.min),max=that._index(options.max),span=to-from,mid=from+span/2,offset=math.round(mid-categoryIx),range={},rightClick=3===e.event.which;that._state||rightClick||(e.preventDefault(),that.chart._unsetActivePoint(),categoryAxis.options.justified||offset--,range.from=math.min(math.max(min,from-offset),max-span),range.to=math.min(range.from+span,max),that._start(e),that._state&&(that._state.range=range,that.trigger(SELECT,that._rangeEventArgs(range)),that._end()))},_mousewheel:function(e){var that=this,options=that.options,delta=mwDelta(e);if(that._start({event:{target:that.selection}}),that._state){var range=that._state.range;e.preventDefault(),e.stopPropagation(),math.abs(delta)>1&&(delta*=ZOOM_ACCELERATION),options.mousewheel.reverse&&(delta*=-1),that.expand(delta)&&that.trigger(SELECT,{axis:that.categoryAxis.options,delta:delta,originalEvent:e,from:that._value(range.from),to:that._value(range.to)}),that._mwTimeout&&clearTimeout(that._mwTimeout),that._mwTimeout=setTimeout(function(){that._end()},MOUSEWHEEL_DELAY)}},_index:function(value){var that=this,categoryAxis=that.categoryAxis,categories=categoryAxis.options.categories,index=value;return value instanceof Date&&(index=lteDateIndex(value,categories),!categoryAxis.options.justified&&value>last(categories)&&(index+=1)),index},_value:function(index){var that=this,categoryAxis=this.categoryAxis,categories=categoryAxis.options.categories,value=index;return that._dateAxis&&(value=index>categories.length-1?that.options.max:categories[index]),value},_slot:function(value){var that=this,categoryAxis=this.categoryAxis;return categoryAxis.getSlot(that._index(value))},move:function(from,to){var leftMaskWidth,rightMaskWidth,box,distance,that=this,options=that.options,offset=options.offset,padding=options.padding,border=options.selection.border;box=that._slot(from),leftMaskWidth=round(box.x1-offset.left+padding.left),that.leftMask.width(leftMaskWidth),that.selection.css("left",leftMaskWidth),box=that._slot(to),rightMaskWidth=round(options.width-(box.x1-offset.left+padding.left)),that.rightMask.width(rightMaskWidth),distance=options.width-rightMaskWidth,distance!=options.width&&(distance+=border.right),that.rightMask.css("left",distance),that.selection.width(math.max(options.width-(leftMaskWidth+rightMaskWidth)-border.right,0))},set:function(from,to){var that=this,options=that.options,min=that._index(options.min),max=that._index(options.max);from=limitValue(that._index(from),min,max),to=limitValue(that._index(to),from+1,max),options.visible&&that.move(from,to),options.from=that._value(from),options.to=that._value(to)},expand:function(delta){var that=this,options=that.options,min=that._index(options.min),max=that._index(options.max),zDir=options.mousewheel.zoom,from=that._index(options.from),to=that._index(options.to),range={from:from,to:to},oldRange=deepExtend({},range);return that._state&&(range=that._state.range),zDir!==RIGHT&&(range.from=limitValue(limitValue(from-delta,0,to-1),min,max)),zDir!==LEFT&&(range.to=limitValue(limitValue(to+delta,range.from+1,max),min,max)),range.from!==oldRange.from||range.to!==oldRange.to?(that.set(range.from,range.to),!0):void 0},getValueAxis:function(categoryAxis){var i,axis,axes=categoryAxis.pane.axes,axesCount=axes.length;for(i=0;axesCount>i;i++)if(axis=axes[i],axis.options.vertical!==categoryAxis.options.vertical)return axis}}),Pannable=Class.extend({init:function(plotArea,options){this.plotArea=plotArea,this.options=deepExtend({},this.options,options)},options:{key:"none",lock:"none"},start:function(e){this._active=acceptKey(e.event,this.options.key)},move:function(e){if(this._active){var axisRanges=this.axisRanges=this._panAxes(e,X).concat(this._panAxes(e,Y));if(axisRanges.length)return this.axisRanges=axisRanges,toChartAxisRanges(axisRanges)}},end:function(){this._active=!1},pan:function(){var range,plotArea=this.plotArea,axisRanges=this.axisRanges;if(axisRanges.length){for(var idx=0;idx<axisRanges.length;idx++)range=axisRanges[idx],plotArea.updateAxisOptions(range.axis,range.range);plotArea.redraw(plotArea.panes)}},_panAxes:function(e,position){var plotArea=this.plotArea,delta=-e[position].delta,lock=(this.options.lock||"").toLowerCase(),updatedAxes=[];if(0!==delta&&(lock||"").toLowerCase()!=position)for(var axis,range,axes=plotArea.axes,idx=0;idx<axes.length;idx++)axis=axes[idx],(position==X&&!axis.options.vertical||position==Y&&axis.options.vertical)&&(range=axis.pan(delta),range&&(range.limitRange=!0,updatedAxes.push({axis:axis,range:range})));return updatedAxes}}),ZoomSelection=Class.extend({init:function(chart,options){this.chart=chart,this.options=deepExtend({},this.options,options),this._marquee=$("<div class='k-marquee'><div class='k-marquee-color'></div></div>")},options:{key:"shift",lock:"none"},start:function(e){if(acceptKey(e.event,this.options.key)){var chart=this.chart,point=chart._toModelCoordinates(e.x.client,e.y.client),zoomPane=this._zoomPane=chart._plotArea.paneByPoint(point);if(zoomPane){var clipBox=zoomPane.clipBox().clone(),elementOffset=this._elementOffset();clipBox.translate(elementOffset.left,elementOffset.top),this._zoomPaneClipBox=clipBox,this._marquee.appendTo(document.body).css({left:e.x.client+1,top:e.y.client+1,width:0,height:0})}}},_elementOffset:function(){var chartElement=this.chart.element,chartOffset=chartElement.offset();return{left:parseInt(chartElement.css("paddingTop"),10)+chartOffset.left,top:parseInt(chartElement.css("paddingLeft"),10)+chartOffset.top}},move:function(e){var zoomPane=this._zoomPane;if(zoomPane){var selectionPosition=this._selectionPosition(e);this._marquee.css(selectionPosition)}},end:function(e){var zoomPane=this._zoomPane;if(zoomPane){var elementOffset=this._elementOffset(),selectionPosition=this._selectionPosition(e);selectionPosition.left-=elementOffset.left,selectionPosition.top-=elementOffset.top;var start={x:selectionPosition.left,y:selectionPosition.top},end={x:selectionPosition.left+selectionPosition.width,y:selectionPosition.top+selectionPosition.height};return this._updateAxisRanges(start,end),this._marquee.remove(),delete this._zoomPane,toChartAxisRanges(this.axisRanges)}},zoom:function(){var axisRanges=this.axisRanges;if(axisRanges&&axisRanges.length){for(var axisRange,plotArea=this.chart._plotArea,idx=0;idx<axisRanges.length;idx++)axisRange=axisRanges[idx],plotArea.updateAxisOptions(axisRange.axis,axisRange.range);plotArea.redraw(plotArea.panes)}},destroy:function(){this._marquee.remove(),delete this._marquee},_updateAxisRanges:function(start,end){for(var axis,vertical,lock=(this.options.lock||"").toLowerCase(),axisRanges=[],axes=this._zoomPane.axes,idx=0;idx<axes.length;idx++)if(axis=axes[idx],vertical=axis.options.vertical,!(lock==X&&!vertical||lock===Y&&vertical)){var range=axis.pointsRange(start,end);axisRanges.push({axis:axis,range:range})}this.axisRanges=axisRanges},_selectionPosition:function(e){var lock=(this.options.lock||"").toLowerCase(),left=math.min(e.x.startLocation,e.x.location),top=math.min(e.y.startLocation,e.y.location),width=math.abs(e.x.initialDelta),height=math.abs(e.y.initialDelta),clipBox=this._zoomPaneClipBox;return lock==X&&(left=clipBox.x1,width=clipBox.width()),lock==Y&&(top=clipBox.y1,height=clipBox.height()),e.x.location>clipBox.x2&&(width=clipBox.x2-e.x.startLocation),e.x.location<clipBox.x1&&(width=e.x.startLocation-clipBox.x1),e.y.location>clipBox.y2&&(height=clipBox.y2-e.y.startLocation),e.y.location<clipBox.y1&&(height=e.y.startLocation-clipBox.y1),{left:math.max(left,clipBox.x1),top:math.max(top,clipBox.y1),width:width,height:height}}}),MousewheelZoom=Class.extend({init:function(plotArea,options){this.plotArea=plotArea,this.options=deepExtend({},this.options,options)},updateRanges:function(delta){for(var axis,vertical,lock=(this.options.lock||"").toLowerCase(),axisRanges=[],axes=this.plotArea.axes,idx=0;idx<axes.length;idx++)if(axis=axes[idx],vertical=axis.options.vertical,!(lock==X&&!vertical||lock===Y&&vertical)){var range=axis.zoomRange(-delta);range&&axisRanges.push({axis:axis,range:range})}return this.axisRanges=axisRanges,toChartAxisRanges(axisRanges)},zoom:function(){var axisRanges=this.axisRanges;if(axisRanges&&axisRanges.length){for(var axisRange,plotArea=this.plotArea,idx=0;idx<axisRanges.length;idx++)axisRange=axisRanges[idx],plotArea.updateAxisOptions(axisRange.axis,axisRange.range);plotArea.redraw(plotArea.panes)}}}),SeriesAggregator=function(series,binder,defaultAggregates){var i,sa=this,canonicalFields=binder.canonicalFields(series),valueFields=binder.valueFields(series),sourceFields=binder.sourceFields(series,canonicalFields),seriesFields=sa._seriesFields=[],defaults=defaultAggregates.query(series.type),rootAggregate=series.aggregate||defaults;for(sa._series=series,sa._binder=binder,i=0;i<canonicalFields.length;i++){var fieldAggregate,field=canonicalFields[i];if(typeof rootAggregate===OBJECT)fieldAggregate=rootAggregate[field];else{if(0!==i&&!inArray(field,valueFields))break;fieldAggregate=rootAggregate}fieldAggregate&&seriesFields.push({canonicalName:field,name:sourceFields[i],transform:isFn(fieldAggregate)?fieldAggregate:Aggregates[fieldAggregate]})}};SeriesAggregator.prototype={aggregatePoints:function(srcPoints,group){var i,field,srcValues,value,sa=this,data=sa._bindPoints(srcPoints||[]),series=sa._series,seriesFields=sa._seriesFields,firstDataItem=data.dataItems[0],result={};if(firstDataItem&&!isNumber(firstDataItem)&&!isArray(firstDataItem)){var fn=function(){};fn.prototype=firstDataItem,result=new fn}for(i=0;i<seriesFields.length;i++){if(field=seriesFields[i],srcValues=sa._bindField(data.values,field.canonicalName),value=field.transform(srcValues,series,data.dataItems,group),null!==value&&typeof value===OBJECT&&!defined(value.length)){result=value;break}defined(value)&&(ensureTree(field.name,result),kendo.setter(field.name)(result,value))}return result},_bindPoints:function(points){var i,pointIx,sa=this,binder=sa._binder,series=sa._series,values=[],dataItems=[];for(i=0;i<points.length;i++)pointIx=points[i],values.push(binder.bindPoint(series,pointIx)),dataItems.push(series.data[pointIx]);return{values:values,dataItems:dataItems}},_bindField:function(data,field){var i,item,value,valueFields,values=[],count=data.length;for(i=0;count>i;i++)item=data[i],valueFields=item.valueFields,value=defined(valueFields[field])?valueFields[field]:item.fields[field],values.push(value);return values}};var ChartAxis=Class.extend({init:function(axis){this._axis=axis},slot:function(from,to){return this._axis.slot(from,to)},range:function(){return this._axis.range()}});extend($.easing,{easeOutElastic:function(n,d,first,diff){var s=1.70158,p=0,a=diff;return 0===n?first:1===n?first+diff:(p||(p=.5),a<math.abs(diff)?(a=diff,s=p/4):s=p/(2*math.PI)*math.asin(diff/a),a*math.pow(2,-10*n)*math.sin(1.1*(1*n-s)*math.PI/p)+diff+first)}}),dataviz.ui.plugin(Chart),PlotAreaFactory.current.register(CategoricalPlotArea,[BAR,COLUMN,LINE,VERTICAL_LINE,AREA,VERTICAL_AREA,CANDLESTICK,OHLC,BULLET,VERTICAL_BULLET,BOX_PLOT,RANGE_COLUMN,RANGE_BAR,WATERFALL,HORIZONTAL_WATERFALL]),PlotAreaFactory.current.register(XYPlotArea,[SCATTER,SCATTER_LINE,BUBBLE]),PlotAreaFactory.current.register(PiePlotArea,[PIE]),PlotAreaFactory.current.register(DonutPlotArea,[DONUT]),SeriesBinder.current.register([BAR,COLUMN,LINE,VERTICAL_LINE,AREA,VERTICAL_AREA],[VALUE],[CATEGORY,COLOR,NOTE_TEXT,ERROR_LOW_FIELD,ERROR_HIGH_FIELD]),SeriesBinder.current.register([RANGE_COLUMN,RANGE_BAR],[FROM,TO],[CATEGORY,COLOR,NOTE_TEXT]),SeriesBinder.current.register([WATERFALL,HORIZONTAL_WATERFALL],[VALUE],[CATEGORY,COLOR,NOTE_TEXT,SUMMARY_FIELD]),DefaultAggregates.current.register([BAR,COLUMN,LINE,VERTICAL_LINE,AREA,VERTICAL_AREA,WATERFALL,HORIZONTAL_WATERFALL],{value:MAX,color:FIRST,noteText:FIRST,errorLow:MIN,errorHigh:MAX}),DefaultAggregates.current.register([RANGE_COLUMN,RANGE_BAR],{from:MIN,to:MAX,color:FIRST,noteText:FIRST}),SeriesBinder.current.register([SCATTER,SCATTER_LINE,BUBBLE],[X,Y],[COLOR,NOTE_TEXT,X_ERROR_LOW_FIELD,X_ERROR_HIGH_FIELD,Y_ERROR_LOW_FIELD,Y_ERROR_HIGH_FIELD]),SeriesBinder.current.register([BUBBLE],[X,Y,"size"],[COLOR,CATEGORY,NOTE_TEXT]),SeriesBinder.current.register([CANDLESTICK,OHLC],["open","high","low","close"],[CATEGORY,COLOR,"downColor",NOTE_TEXT]),DefaultAggregates.current.register([CANDLESTICK,OHLC],{open:MAX,high:MAX,low:MIN,close:MAX,color:FIRST,downColor:FIRST,noteText:FIRST}),SeriesBinder.current.register([BOX_PLOT],["lower","q1","median","q3","upper","mean","outliers"],[CATEGORY,COLOR,NOTE_TEXT]),DefaultAggregates.current.register([BOX_PLOT],{lower:MAX,q1:MAX,median:MAX,q3:MAX,upper:MAX,mean:MAX,outliers:FIRST,color:FIRST,noteText:FIRST}),SeriesBinder.current.register([BULLET,VERTICAL_BULLET],["current","target"],[CATEGORY,COLOR,"visibleInLegend",NOTE_TEXT]),DefaultAggregates.current.register([BULLET,VERTICAL_BULLET],{current:MAX,target:MAX,color:FIRST,noteText:FIRST}),SeriesBinder.current.register([PIE,DONUT],[VALUE],[CATEGORY,COLOR,"explode","visibleInLegend","visible"]),deepExtend(dataviz,{EQUALLY_SPACED_SERIES:EQUALLY_SPACED_SERIES,Aggregates:Aggregates,AreaChart:AreaChart,AreaSegment:AreaSegment,AxisGroupRangeTracker:AxisGroupRangeTracker,Bar:Bar,BarChart:BarChart,BarLabel:BarLabel,BubbleChart:BubbleChart,Bullet:Bullet,BulletChart:BulletChart,CandlestickChart:CandlestickChart,
Candlestick:Candlestick,CategoricalChart:CategoricalChart,CategoricalErrorBar:CategoricalErrorBar,CategoricalPlotArea:CategoricalPlotArea,CategoryAxis:CategoryAxis,ChartAxis:ChartAxis,ChartContainer:ChartContainer,ClipAnimation:ClipAnimation,ClusterLayout:ClusterLayout,Crosshair:Crosshair,CrosshairTooltip:CrosshairTooltip,DateCategoryAxis:DateCategoryAxis,DateValueAxis:DateValueAxis,DefaultAggregates:DefaultAggregates,DonutChart:DonutChart,DonutPlotArea:DonutPlotArea,DonutSegment:DonutSegment,ErrorBarBase:ErrorBarBase,ErrorRangeCalculator:ErrorRangeCalculator,Highlight:Highlight,SharedTooltip:SharedTooltip,Legend:Legend,LegendItem:LegendItem,LegendLayout:LegendLayout,LineChart:LineChart,LinePoint:LinePoint,LineSegment:LineSegment,Pane:Pane,PieAnimation:PieAnimation,PieChart:PieChart,PieChartMixin:PieChartMixin,PiePlotArea:PiePlotArea,PieSegment:PieSegment,PlotAreaBase:PlotAreaBase,PlotAreaFactory:PlotAreaFactory,PointEventsMixin:PointEventsMixin,RangeBar:RangeBar,RangeBarChart:RangeBarChart,ScatterChart:ScatterChart,ScatterErrorBar:ScatterErrorBar,ScatterLineChart:ScatterLineChart,Selection:Selection,SeriesAggregator:SeriesAggregator,SeriesBinder:SeriesBinder,ShapeElement:ShapeElement,SplineSegment:SplineSegment,SplineAreaSegment:SplineAreaSegment,StackWrap:StackWrap,Tooltip:Tooltip,OHLCChart:OHLCChart,OHLCPoint:OHLCPoint,WaterfallChart:WaterfallChart,WaterfallSegment:WaterfallSegment,XYPlotArea:XYPlotArea,addDuration:addDuration,areNumbers:areNumbers,axisGroupBox:axisGroupBox,categoriesCount:categoriesCount,ceilDate:ceilDate,countNumbers:countNumbers,duration:duration,ensureTree:ensureTree,indexOf:indexOf,isNumber:isNumber,floorDate:floorDate,filterSeriesByType:filterSeriesByType,hasValue:hasValue,lteDateIndex:lteDateIndex,evalOptions:evalOptions,seriesTotal:seriesTotal,singleItemOrArray:singleItemOrArray,sortDates:sortDates,startOfWeek:startOfWeek,transpose:transpose,toDate:toDate,toTime:toTime,uniqueDates:uniqueDates})}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function updateTabClasses(tabs){tabs.children(IMG).addClass(IMAGE),tabs.children("a").addClass(LINK).children(IMG).addClass(IMAGE),tabs.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(DEFAULTSTATE),tabs.filter("li[disabled]").addClass(DISABLEDSTATE).removeAttr("disabled"),tabs.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(ACTIVESTATE+" "+TABONTOP),tabs.attr("role","tab"),tabs.filter("."+ACTIVESTATE).attr("aria-selected",!0),tabs.each(function(){var item=$(this);item.children("."+LINK).length||item.contents().filter(function(){return!(this.nodeName.match(excludedNodesRegExp)||3==this.nodeType&&!trim(this.nodeValue))}).wrapAll("<span class='"+LINK+"'/>")})}function updateFirstLast(tabGroup){var tabs=tabGroup.children(".k-item");tabs.filter(".k-first:not(:first-child)").removeClass(FIRST),tabs.filter(".k-last:not(:last-child)").removeClass(LAST),tabs.filter(":first-child").addClass(FIRST),tabs.filter(":last-child").addClass(LAST)}function scrollButtonHtml(buttonClass,iconClass){return"<span class='k-button k-button-icon k-button-bare k-tabstrip-"+buttonClass+"' unselectable='on'><span class='k-icon "+iconClass+"'></span></span>"}var kendo=window.kendo,ui=kendo.ui,keys=kendo.keys,map=$.map,each=$.each,trim=$.trim,extend=$.extend,template=kendo.template,Widget=ui.Widget,excludedNodesRegExp=/^(a|div)$/i,NS=".kendoTabStrip",IMG="img",HREF="href",PREV="prev",SHOW="show",LINK="k-link",LAST="k-last",CLICK="click",ERROR="error",EMPTY=":empty",IMAGE="k-image",FIRST="k-first",SELECT="select",ACTIVATE="activate",CONTENT="k-content",CONTENTURL="contentUrl",MOUSEENTER="mouseenter",MOUSELEAVE="mouseleave",CONTENTLOAD="contentLoad",DISABLEDSTATE="k-state-disabled",DEFAULTSTATE="k-state-default",ACTIVESTATE="k-state-active",FOCUSEDSTATE="k-state-focused",HOVERSTATE="k-state-hover",TABONTOP="k-tab-on-top",NAVIGATABLEITEMS=".k-item:not(."+DISABLEDSTATE+")",HOVERABLEITEMS=".k-tabstrip-items > "+NAVIGATABLEITEMS+":not(."+ACTIVESTATE+")",templates={content:template("<div class='k-content'#= contentAttributes(data) # role='tabpanel'>#= content(item) #</div>"),itemWrapper:template("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:template("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:template("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:template("<span class='k-sprite #= spriteCssClass #'></span>"),empty:template("")},rendering={wrapperCssClass:function(group,item){var result="k-item",index=item.index;return result+=item.enabled===!1?" k-state-disabled":" k-state-default",0===index&&(result+=" k-first"),index==group.length-1&&(result+=" k-last"),result},textAttributes:function(item){return item.url?" href='"+item.url+"'":""},text:function(item){return item.encoded===!1?item.text:kendo.htmlEncode(item.text)},tag:function(item){return item.url?"a":"span"},contentAttributes:function(content){return content.active!==!0?" style='display:none' aria-hidden='true' aria-expanded='false'":""},content:function(item){return item.content?item.content:item.contentUrl?"":"&nbsp;"},contentUrl:function(item){return item.contentUrl?kendo.attr("content-url")+'="'+item.contentUrl+'"':""}},TabStrip=Widget.extend({init:function(element,options){var value,that=this;Widget.fn.init.call(that,element,options),that._animations(that.options),options=that.options,that._wrapper(),that._isRtl=kendo.support.isRtl(that.wrapper),that._tabindex(),that._updateClasses(),that._dataSource(),options.dataSource&&that.dataSource.fetch(),that._tabPosition(),that._scrollable(),that.options.contentUrls&&that.wrapper.find(".k-tabstrip-items > .k-item").each(function(index,item){$(item).find(">."+LINK).data(CONTENTURL,that.options.contentUrls[index])}),that.wrapper.on(MOUSEENTER+NS+" "+MOUSELEAVE+NS,HOVERABLEITEMS,that._toggleHover).on("focus"+NS,$.proxy(that._active,that)).on("blur"+NS,function(){that._current(null)}),that._keyDownProxy=$.proxy(that._keydown,that),options.navigatable&&that.wrapper.on("keydown"+NS,that._keyDownProxy),that.options.value&&(value=that.options.value),that.wrapper.children(".k-tabstrip-items").on(CLICK+NS,".k-state-disabled .k-link",!1).on(CLICK+NS," > "+NAVIGATABLEITEMS,function(e){var wr=that.wrapper[0];if(wr!==document.activeElement){var msie=kendo.support.browser.msie;if(msie)try{wr.setActive()}catch(j){wr.focus()}else wr.focus()}that._click($(e.currentTarget))&&e.preventDefault()});var selectedItems=that.tabGroup.children("li."+ACTIVESTATE),content=that.contentHolder(selectedItems.index());selectedItems[0]&&content.length>0&&0===content[0].childNodes.length&&that.activateTab(selectedItems.eq(0)),that.element.attr("role","tablist"),that.element[0].id&&(that._ariaId=that.element[0].id+"_ts_active"),that.value(value),kendo.notify(that)},_active:function(){var item=this.tabGroup.children().filter("."+ACTIVESTATE);item=item[0]?item:this._endItem("first"),item[0]&&this._current(item)},_endItem:function(action){return this.tabGroup.children(NAVIGATABLEITEMS)[action]()},_item:function(item,action){var endItem;return endItem=action===PREV?"last":"first",item?(item=item[action](),item[0]||(item=this._endItem(endItem)),item.hasClass(DISABLEDSTATE)&&(item=this._item(item,action)),item):this._endItem(endItem)},_current:function(candidate){var that=this,focused=that._focused,id=that._ariaId;return candidate===undefined?focused:(focused&&(focused[0].id===id&&focused.removeAttr("id"),focused.removeClass(FOCUSEDSTATE)),candidate&&(candidate.hasClass(ACTIVESTATE)||candidate.addClass(FOCUSEDSTATE),that.element.removeAttr("aria-activedescendant"),id=candidate[0].id||id,id&&(candidate.attr("id",id),that.element.attr("aria-activedescendant",id))),void(that._focused=candidate))},_keydown:function(e){var action,that=this,key=e.keyCode,current=that._current(),rtl=that._isRtl;if(e.target==e.currentTarget){if(key==keys.DOWN||key==keys.RIGHT)action=rtl?PREV:"next";else if(key==keys.UP||key==keys.LEFT)action=rtl?"next":PREV;else if(key==keys.ENTER||key==keys.SPACEBAR)that._click(current),e.preventDefault();else{if(key==keys.HOME)return that._click(that._endItem("first")),void e.preventDefault();if(key==keys.END)return that._click(that._endItem("last")),void e.preventDefault()}action&&(that._click(that._item(current,action)),e.preventDefault())}},_dataSource:function(){var that=this;that.dataSource&&that._refreshHandler?that.dataSource.unbind("change",that._refreshHandler):that._refreshHandler=$.proxy(that.refresh,that),that.dataSource=kendo.data.DataSource.create(that.options.dataSource).bind("change",that._refreshHandler)},setDataSource:function(dataSource){var that=this;that.options.dataSource=dataSource,that._dataSource(),that.dataSource.fetch()},_animations:function(options){options&&"animation"in options&&!options.animation&&(options.animation={open:{effects:{}},close:{effects:{}}})},refresh:function(e){var idx,tab,action,length,that=this,options=that.options,text=kendo.getter(options.dataTextField),content=kendo.getter(options.dataContentField),contentUrl=kendo.getter(options.dataContentUrlField),image=kendo.getter(options.dataImageUrlField),url=kendo.getter(options.dataUrlField),sprite=kendo.getter(options.dataSpriteCssClass),tabs=[],view=that.dataSource.view();for(e=e||{},action=e.action,action&&(view=e.items),idx=0,length=view.length;length>idx;idx++)tab={text:text(view[idx])},options.dataContentField&&(tab.content=content(view[idx])),options.dataContentUrlField&&(tab.contentUrl=contentUrl(view[idx])),options.dataUrlField&&(tab.url=url(view[idx])),options.dataImageUrlField&&(tab.imageUrl=image(view[idx])),options.dataSpriteCssClass&&(tab.spriteCssClass=sprite(view[idx])),tabs[idx]=tab;if("add"==e.action)e.index<that.tabGroup.children().length?that.insertBefore(tabs,that.tabGroup.children().eq(e.index)):that.append(tabs);else if("remove"==e.action)for(idx=0;idx<view.length;idx++)that.remove(e.index);else"itemchange"==e.action?(idx=that.dataSource.view().indexOf(view[0]),e.field===options.dataTextField&&that.tabGroup.children().eq(idx).find(".k-link").text(view[0].get(e.field))):(that.trigger("dataBinding"),that.remove("li"),that.append(tabs),that.trigger("dataBound"))},value:function(value){var that=this;return value===undefined?that.select().text():void(value!=that.value()&&that.tabGroup.children().each(function(){$.trim($(this).text())==value&&that.select(this)}))},items:function(){return this.tabGroup[0].children},setOptions:function(options){var that=this,animation=that.options.animation;that._animations(options),options.animation=extend(!0,animation,options.animation),options.navigatable?that.wrapper.on("keydown"+NS,that._keyDownProxy):that.wrapper.off("keydown"+NS,that._keyDownProxy),Widget.fn.setOptions.call(that,options)},events:[SELECT,ACTIVATE,SHOW,ERROR,CONTENTLOAD,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",tabPosition:"top",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1,scrollable:{distance:200}},destroy:function(){var that=this;Widget.fn.destroy.call(that),that._refreshHandler&&that.dataSource.unbind("change",that._refreshHandler),that.wrapper.off(NS),that.wrapper.children(".k-tabstrip-items").off(NS),that._scrollableModeActive&&(that._scrollPrevButton.off().remove(),that._scrollNextButton.off().remove()),that.scrollWrap.children(".k-tabstrip").unwrap(),kendo.destroy(that.wrapper)},select:function(element){var that=this;return 0===arguments.length?that.tabGroup.children("li."+ACTIVESTATE):(isNaN(element)||(element=that.tabGroup.children().get(element)),element=that.tabGroup.find(element),$(element).each(function(index,item){item=$(item),item.hasClass(ACTIVESTATE)||that.trigger(SELECT,{item:item[0],contentElement:that.contentHolder(item.index())[0]})||that.activateTab(item)}),that)},enable:function(element,state){return this._toggleDisabled(element,state!==!1),this},disable:function(element){return this._toggleDisabled(element,!1),this},reload:function(element){element=this.tabGroup.find(element);var that=this;return element.each(function(){var item=$(this),contentUrl=item.find("."+LINK).data(CONTENTURL),content=that.contentHolder(item.index());contentUrl&&that.ajaxRequest(item,content,null,contentUrl)}),that},append:function(tab){var that=this,inserted=that._create(tab);return each(inserted.tabs,function(idx){var contents=inserted.contents[idx];that.tabGroup.append(this),"bottom"==that.options.tabPosition?that.tabGroup.before(contents):that._scrollableModeActive?that._scrollPrevButton.before(contents):that.wrapper.append(contents),that.angular("compile",function(){return{elements:[contents]}})}),updateFirstLast(that.tabGroup),that._updateContentElements(),that.resize(!0),that},insertBefore:function(tab,referenceTab){referenceTab=this.tabGroup.find(referenceTab);var that=this,inserted=that._create(tab),referenceContent=$(that.contentElement(referenceTab.index()));return each(inserted.tabs,function(idx){var contents=inserted.contents[idx];referenceTab.before(this),referenceContent.before(contents),that.angular("compile",function(){return{elements:[contents]}})}),updateFirstLast(that.tabGroup),that._updateContentElements(),that.resize(!0),that},insertAfter:function(tab,referenceTab){referenceTab=this.tabGroup.find(referenceTab);var that=this,inserted=that._create(tab),referenceContent=$(that.contentElement(referenceTab.index()));return each(inserted.tabs,function(idx){var contents=inserted.contents[idx];referenceTab.after(this),referenceContent.after(contents),that.angular("compile",function(){return{elements:[contents]}})}),updateFirstLast(that.tabGroup),that._updateContentElements(),that.resize(!0),that},remove:function(elements){var contents,that=this,type=typeof elements;return"string"===type?elements=that.tabGroup.find(elements):"number"===type&&(elements=that.tabGroup.children().eq(elements)),contents=elements.map(function(){var content=that.contentElement($(this).index());return kendo.destroy(content),content}),elements.remove(),contents.remove(),that._updateContentElements(),that.resize(!0),that},_create:function(tab){var tabs,contents,content,plain=$.isPlainObject(tab),that=this;return plain||$.isArray(tab)?(tab=$.isArray(tab)?tab:[tab],tabs=map(tab,function(value,idx){return $(TabStrip.renderItem({group:that.tabGroup,item:extend(value,{index:idx})}))}),contents=map(tab,function(value,idx){return"string"==typeof value.content||value.contentUrl?$(TabStrip.renderContent({item:extend(value,{index:idx})})):void 0})):(tabs="string"==typeof tab&&"<"!=tab[0]?that.element.find(tab):$(tab),contents=$(),tabs.each(function(){if(content=$("<div class='"+CONTENT+"'/>"),/k-tabstrip-items/.test(this.parentNode.className)){var index=parseInt(this.getAttribute("aria-controls").replace(/^.*-/,""),10)-1;content=$(that.contentElement(index))}contents=contents.add(content)}),updateTabClasses(tabs)),{tabs:tabs,contents:contents}},_toggleDisabled:function(element,enable){element=this.tabGroup.find(element),element.each(function(){$(this).toggleClass(DEFAULTSTATE,enable).toggleClass(DISABLEDSTATE,!enable)})},_updateClasses:function(){var tabs,activeItem,activeTab,that=this;that.wrapper.addClass("k-widget k-header k-tabstrip"),that.tabGroup=that.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),that.tabGroup[0]||(that.tabGroup=$("<ul class='k-tabstrip-items k-reset'/>").appendTo(that.wrapper)),tabs=that.tabGroup.find("li").addClass("k-item"),tabs.length&&(activeItem=tabs.filter("."+ACTIVESTATE).index(),activeTab=activeItem>=0?activeItem:undefined,that.tabGroup.contents().filter(function(){return 3==this.nodeType&&!trim(this.nodeValue)}).remove()),activeItem>=0&&tabs.eq(activeItem).addClass(TABONTOP),that.contentElements=that.wrapper.children("div"),that.contentElements.addClass(CONTENT).eq(activeTab).addClass(ACTIVESTATE).css({display:"block"}),tabs.length&&(updateTabClasses(tabs),updateFirstLast(that.tabGroup),that._updateContentElements())},_updateContentElements:function(){var that=this,contentUrls=that.options.contentUrls||[],items=that.tabGroup.find(".k-item"),tabStripID=(that.element.attr("id")||kendo.guid())+"-",contentElements=that.wrapper.children("div");contentElements.length&&items.length>contentElements.length?(contentElements.each(function(idx){var currentIndex=parseInt(this.id.replace(tabStripID,""),10),item=items.filter("[aria-controls="+tabStripID+currentIndex+"]"),id=tabStripID+(idx+1);item.data("aria",id),this.setAttribute("id",id)}),items.each(function(){var item=$(this);this.setAttribute("aria-controls",item.data("aria")),item.removeData("aria")})):items.each(function(idx){var currentContent=contentElements.eq(idx),id=tabStripID+(idx+1);this.setAttribute("aria-controls",id),!currentContent.length&&contentUrls[idx]?$("<div class='"+CONTENT+"'/>").appendTo(that.wrapper).attr("id",id):(currentContent.attr("id",id),$(this).children(".k-loading")[0]||contentUrls[idx]||$("<span class='k-loading k-complete'/>").prependTo(this)),currentContent.attr("role","tabpanel"),currentContent.filter(":not(."+ACTIVESTATE+")").attr("aria-hidden",!0).attr("aria-expanded",!1),currentContent.filter("."+ACTIVESTATE).attr("aria-expanded",!0)}),that.contentElements=that.contentAnimators=that.wrapper.children("div"),that.tabsHeight=that.tabGroup.outerHeight()+parseInt(that.wrapper.css("border-top-width"),10)+parseInt(that.wrapper.css("border-bottom-width"),10),kendo.kineticScrollNeeded&&kendo.mobile.ui.Scroller&&(kendo.touchScroller(that.contentElements),that.contentElements=that.contentElements.children(".km-scroll-container"))},_wrapper:function(){var that=this;that.element.is("ul")?that.wrapper=that.element.wrapAll("<div />").parent():that.wrapper=that.element,that.scrollWrap=that.wrapper.parent(".k-tabstrip-wrapper"),that.scrollWrap[0]||(that.scrollWrap=that.wrapper.wrapAll("<div class='k-tabstrip-wrapper' />").parent())},_tabPosition:function(){var that=this,tabPosition=that.options.tabPosition;that.wrapper.addClass("k-floatwrap k-tabstrip-"+tabPosition),"bottom"==tabPosition&&that.tabGroup.appendTo(that.wrapper),that.resize(!0)},_setContentElementsDimensions:function(){var that=this,tabPosition=that.options.tabPosition;if("left"==tabPosition||"right"==tabPosition){var contentDivs=that.wrapper.children(".k-content"),activeDiv=contentDivs.filter(":visible"),marginStyleProperty="margin-"+tabPosition,tabGroup=that.tabGroup,margin=tabGroup.outerWidth(),minHeight=Math.ceil(tabGroup.height())-parseInt(activeDiv.css("padding-top"),10)-parseInt(activeDiv.css("padding-bottom"),10)-parseInt(activeDiv.css("border-top-width"),10)-parseInt(activeDiv.css("border-bottom-width"),10);setTimeout(function(){contentDivs.css(marginStyleProperty,margin).css("min-height",minHeight)})}},_resize:function(){this._setContentElementsDimensions(),this._scrollable()},_sizeScrollWrap:function(element){if(element.is(":visible")){var tabPosition=this.options.tabPosition,h=Math.floor(element.outerHeight(!0))+("left"===tabPosition||"right"===tabPosition?2:this.tabsHeight);this.scrollWrap.css("height",h).css("height")}},_toggleHover:function(e){$(e.currentTarget).toggleClass(HOVERSTATE,e.type==MOUSEENTER)},_click:function(item){var prevent,isAnchor,that=this,link=item.find("."+LINK),href=link.attr(HREF),collapse=that.options.collapsible,contentHolder=that.contentHolder(item.index());if(item.closest(".k-widget")[0]==that.wrapper[0]){if(item.is("."+DISABLEDSTATE+(collapse?"":",."+ACTIVESTATE)))return!0;if(isAnchor=link.data(CONTENTURL)||href&&("#"==href.charAt(href.length-1)||-1!=href.indexOf("#"+that.element[0].id+"-")),prevent=!href||isAnchor,that.tabGroup.children("[data-animating]").length)return prevent;if(that.trigger(SELECT,{item:item[0],contentElement:contentHolder[0]}))return!0;if(prevent!==!1)return collapse&&item.is("."+ACTIVESTATE)?(that.deactivateTab(item),!0):(that.activateTab(item)&&(prevent=!0),prevent)}},_scrollable:function(){var wrapperOffsetWidth,tabGroupScrollWidth,scrollPrevButton,scrollNextButton,that=this,options=that.options;that._scrollableAllowed()&&(that.wrapper.addClass("k-tabstrip-scrollable"),wrapperOffsetWidth=that.wrapper[0].offsetWidth,tabGroupScrollWidth=that.tabGroup[0].scrollWidth,tabGroupScrollWidth>wrapperOffsetWidth&&!that._scrollableModeActive?(that._nowScrollingTabs=!1,that._isRtl=kendo.support.isRtl(that.element),that.wrapper.append(scrollButtonHtml("prev","k-i-arrow-w")+scrollButtonHtml("next","k-i-arrow-e")),scrollPrevButton=that._scrollPrevButton=that.wrapper.children(".k-tabstrip-prev"),scrollNextButton=that._scrollNextButton=that.wrapper.children(".k-tabstrip-next"),that.tabGroup.css({marginLeft:scrollPrevButton.outerWidth()+9,marginRight:scrollNextButton.outerWidth()+12}),scrollPrevButton.on("mousedown"+NS,function(){that._nowScrollingTabs=!0,that._scrollTabsByDelta(options.scrollable.distance*(that._isRtl?1:-1))}),scrollNextButton.on("mousedown"+NS,function(){that._nowScrollingTabs=!0,that._scrollTabsByDelta(options.scrollable.distance*(that._isRtl?-1:1))}),scrollPrevButton.add(scrollNextButton).on("mouseup"+NS,function(){that._nowScrollingTabs=!1}),that._scrollableModeActive=!0,that._toggleScrollButtons()):that._scrollableModeActive&&wrapperOffsetWidth>=tabGroupScrollWidth?(that._scrollableModeActive=!1,that.wrapper.removeClass("k-tabstrip-scrollable"),that._scrollPrevButton.off().remove(),that._scrollNextButton.off().remove(),that.tabGroup.css({marginLeft:"",marginRight:""})):that._scrollableModeActive?that._toggleScrollButtons():that.wrapper.removeClass("k-tabstrip-scrollable"))},_scrollableAllowed:function(){var options=this.options;return options.scrollable&&!isNaN(options.scrollable.distance)&&("top"==options.tabPosition||"bottom"==options.tabPosition)},_scrollTabsToItem:function(item){var itemPosition,that=this,tabGroup=that.tabGroup,currentScrollOffset=tabGroup.scrollLeft(),itemWidth=item.outerWidth(),itemOffset=that._isRtl?item.position().left:item.position().left-tabGroup.children().first().position().left,tabGroupWidth=tabGroup[0].offsetWidth,tabGroupPadding=Math.ceil(parseFloat(tabGroup.css("padding-left")));that._isRtl?0>itemOffset?itemPosition=currentScrollOffset+itemOffset-(tabGroupWidth-currentScrollOffset)-tabGroupPadding:itemOffset+itemWidth>tabGroupWidth&&(itemPosition=currentScrollOffset+itemOffset-itemWidth+2*tabGroupPadding):itemOffset+itemWidth>currentScrollOffset+tabGroupWidth?itemPosition=itemOffset+itemWidth-tabGroupWidth+2*tabGroupPadding:currentScrollOffset>itemOffset&&(itemPosition=itemOffset-tabGroupPadding),tabGroup.finish().animate({scrollLeft:itemPosition},"fast","linear",function(){that._toggleScrollButtons()})},_scrollTabsByDelta:function(delta){var that=this,tabGroup=that.tabGroup,scrLeft=tabGroup.scrollLeft();tabGroup.finish().animate({scrollLeft:scrLeft+delta},"fast","linear",function(){that._nowScrollingTabs?that._scrollTabsByDelta(delta):that._toggleScrollButtons()})},_toggleScrollButtons:function(){var that=this,ul=that.tabGroup,scrollLeft=ul.scrollLeft();that._scrollPrevButton.toggle(that._isRtl?scrollLeft<ul[0].scrollWidth-ul[0].offsetWidth-1:0!==scrollLeft),that._scrollNextButton.toggle(that._isRtl?0!==scrollLeft:scrollLeft<ul[0].scrollWidth-ul[0].offsetWidth-1)},deactivateTab:function(item){var that=this,animationSettings=that.options.animation,animation=animationSettings.open,close=extend({},animationSettings.close),hasCloseAnimation=close&&"effects"in close;item=that.tabGroup.find(item),close=extend(hasCloseAnimation?close:extend({reverse:!0},animation),{hide:!0}),kendo.size(animation.effects)?(item.kendoAddClass(DEFAULTSTATE,{duration:animation.duration}),item.kendoRemoveClass(ACTIVESTATE,{duration:animation.duration})):(item.addClass(DEFAULTSTATE),item.removeClass(ACTIVESTATE)),item.removeAttr("aria-selected"),that.contentAnimators.filter("."+ACTIVESTATE).kendoStop(!0,!0).kendoAnimate(close).removeClass(ACTIVESTATE).attr("aria-hidden",!0)},activateTab:function(item){if(!this.tabGroup.children("[data-animating]").length){item=this.tabGroup.find(item);var that=this,animationSettings=that.options.animation,animation=animationSettings.open,close=extend({},animationSettings.close),hasCloseAnimation=close&&"effects"in close,neighbours=item.parent().children(),oldTab=neighbours.filter("."+ACTIVESTATE),itemIndex=neighbours.index(item);close=extend(hasCloseAnimation?close:extend({reverse:!0},animation),{hide:!0}),kendo.size(animation.effects)?(oldTab.kendoRemoveClass(ACTIVESTATE,{duration:close.duration}),item.kendoRemoveClass(HOVERSTATE,{duration:close.duration})):(oldTab.removeClass(ACTIVESTATE),item.removeClass(HOVERSTATE));var contentAnimators=that.contentAnimators;if(that.inRequest&&(that.xhr.abort(),that.inRequest=!1),0===contentAnimators.length)return that.tabGroup.find("."+TABONTOP).removeClass(TABONTOP),item.addClass(TABONTOP).css("z-index"),item.addClass(ACTIVESTATE),that._current(item),that.trigger("change"),that._scrollableModeActive&&that._scrollTabsToItem(item),!1;var visibleContents=contentAnimators.filter("."+ACTIVESTATE),contentHolder=that.contentHolder(itemIndex),contentElement=contentHolder.closest(".k-content");if(that.tabsHeight=that.tabGroup.outerHeight()+parseInt(that.wrapper.css("border-top-width"),10)+parseInt(that.wrapper.css("border-bottom-width"),10),that._sizeScrollWrap(visibleContents),0===contentHolder.length)return visibleContents.removeClass(ACTIVESTATE).attr("aria-hidden",!0).kendoStop(!0,!0).kendoAnimate(close),!1;item.attr("data-animating",!0);var isAjaxContent=(item.children("."+LINK).data(CONTENTURL)||!1)&&contentHolder.is(EMPTY),showContentElement=function(){that.tabGroup.find("."+TABONTOP).removeClass(TABONTOP),item.addClass(TABONTOP).css("z-index"),kendo.size(animation.effects)?(oldTab.kendoAddClass(DEFAULTSTATE,{duration:animation.duration}),item.kendoAddClass(ACTIVESTATE,{duration:animation.duration})):(oldTab.addClass(DEFAULTSTATE),item.addClass(ACTIVESTATE)),oldTab.removeAttr("aria-selected"),item.attr("aria-selected",!0),that._current(item),that._sizeScrollWrap(contentElement),contentElement.addClass(ACTIVESTATE).removeAttr("aria-hidden").kendoStop(!0,!0).attr("aria-expanded",!0).kendoAnimate(extend({init:function(){that.trigger(SHOW,{item:item[0],contentElement:contentHolder[0]}),kendo.resize(contentHolder)}},animation,{complete:function(){item.removeAttr("data-animating"),that.trigger(ACTIVATE,{item:item[0],contentElement:contentHolder[0]}),kendo.resize(contentHolder),that.scrollWrap.css("height","").css("height")}}))},showContent=function(){isAjaxContent?(item.removeAttr("data-animating"),that.ajaxRequest(item,contentHolder,function(){item.attr("data-animating",!0),showContentElement(),that.trigger("change")})):(showContentElement(),that.trigger("change")),that._scrollableModeActive&&that._scrollTabsToItem(item)};return visibleContents.removeClass(ACTIVESTATE),visibleContents.attr("aria-hidden",!0),visibleContents.attr("aria-expanded",!1),visibleContents.length?visibleContents.kendoStop(!0,!0).kendoAnimate(extend({complete:showContent},close)):showContent(),!0}},contentElement:function(itemIndex){if(isNaN(itemIndex-0))return undefined;var contentElements=this.contentElements&&this.contentElements[0]&&!kendo.kineticScrollNeeded?this.contentElements:this.contentAnimators;itemIndex=contentElements&&0>itemIndex?contentElements.length+itemIndex:itemIndex;var idTest=new RegExp("-"+(itemIndex+1)+"$");if(contentElements)for(var i=0,len=contentElements.length;len>i;i++)if(idTest.test(contentElements.eq(i).closest(".k-content")[0].id))return contentElements[i];return undefined},contentHolder:function(itemIndex){var contentElement=$(this.contentElement(itemIndex)),scrollContainer=contentElement.children(".km-scroll-container");return kendo.support.touch&&scrollContainer[0]?scrollContainer:contentElement},ajaxRequest:function(element,content,complete,url){element=this.tabGroup.find(element);var that=this,xhr=$.ajaxSettings.xhr,link=element.find("."+LINK),data={},halfWidth=element.width()/2,fakeProgress=!1,statusIcon=element.find(".k-loading").removeClass("k-complete");statusIcon[0]||(statusIcon=$("<span class='k-loading'/>").prependTo(element));var endState=2*halfWidth-statusIcon.width(),oldProgressAnimation=function(){statusIcon.animate({marginLeft:(parseInt(statusIcon.css("marginLeft"),10)||0)<halfWidth?endState:0},500,oldProgressAnimation)};kendo.support.browser.msie&&kendo.support.browser.version<10&&setTimeout(oldProgressAnimation,40),url=url||link.data(CONTENTURL)||link.attr(HREF),that.inRequest=!0,that.xhr=$.ajax({type:"GET",cache:!1,url:url,dataType:"html",data:data,xhr:function(){var current=this,request=xhr(),event=current.progressUpload?"progressUpload":current.progress?"progress":!1;return request&&$.each([request,request.upload],function(){this.addEventListener&&this.addEventListener("progress",function(evt){event&&current[event](evt)},!1)}),current.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),request},progress:function(evt){if(evt.lengthComputable){var percent=parseInt(evt.loaded/evt.total*100,10)+"%";statusIcon.stop(!0).addClass("k-progress").css({width:percent,marginLeft:0})}},error:function(xhr,status){that.trigger("error",{xhr:xhr,status:status})&&this.complete()},stopProgress:function(){clearInterval(fakeProgress),statusIcon.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(xhr){that.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==xhr.statusText&&statusIcon.remove()},success:function(data){statusIcon.addClass("k-complete");try{var current=this,loaded=10;current.noProgress&&(statusIcon.width(loaded+"%"),fakeProgress=setInterval(function(){current.progress({lengthComputable:!0,loaded:Math.min(loaded,100),total:100}),loaded+=10},40)),that.angular("cleanup",function(){return{elements:content.get()}}),kendo.destroy(content),content.html(data)}catch(e){var console=window.console;console&&console.error&&console.error(e.name+": "+e.message+" in "+url),this.error(this.xhr,"error")}complete&&complete.call(that,content),that.angular("compile",function(){return{elements:content.get()}}),that.trigger(CONTENTLOAD,{item:element[0],contentElement:content[0]})}})}});extend(TabStrip,{renderItem:function(options){options=extend({tabStrip:{},group:{}},options);var empty=templates.empty,item=options.item;return templates.item(extend(options,{image:item.imageUrl?templates.image:empty,sprite:item.spriteCssClass?templates.sprite:empty,itemWrapper:templates.itemWrapper},rendering))},renderContent:function(options){return templates.content(extend(options,rendering))}}),kendo.ui.plugin(TabStrip)}(window.kendo.jQuery)}()}(),function(){!function(){!function($,undefined){function compare(a,b){var length;if(null===a&&null!==b||null!==a&&null===b)return!1;if(length=a.length,length!==b.length)return!1;for(;length--;)if(a[length]!==b[length])return!1;return!0}var kendo=window.kendo,ui=kendo.ui,List=ui.List,keys=kendo.keys,activeElement=kendo._activeElement,ObservableArray=kendo.data.ObservableArray,proxy=$.proxy,ID="id",LI="li",ACCEPT="accept",FILTER="filter",REBIND="rebind",OPEN="open",CLOSE="close",CHANGE="change",PROGRESS="progress",SELECT="select",ARIA_DISABLED="aria-disabled",ARIA_READONLY="aria-readonly",FOCUSEDCLASS="k-state-focused",HIDDENCLASS="k-loading-hidden",HOVERCLASS="k-state-hover",STATEDISABLED="k-state-disabled",DISABLED="disabled",READONLY="readonly",ns=".kendoMultiSelect",CLICK="click"+ns,KEYDOWN="keydown"+ns,MOUSEENTER="mouseenter"+ns,MOUSELEAVE="mouseleave"+ns,HOVEREVENTS=MOUSEENTER+" "+MOUSELEAVE,quotRegExp=/"/g,isArray=$.isArray,styles=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],MultiSelect=List.extend({init:function(element,options){
var id,disabled,that=this;that.ns=ns,List.fn.init.call(that,element,options),that._optionsMap={},that._customOptions={},that._wrapper(),that._tagList(),that._input(),that._textContainer(),that._loader(),that._tabindex(that.input),element=that.element.attr("multiple","multiple").hide(),options=that.options,options.placeholder||(options.placeholder=element.data("placeholder")),id=element.attr(ID),id&&(that._tagID=id+"_tag_active",id+="_taglist",that.tagList.attr(ID,id)),that._aria(id),that._dataSource(),that._ignoreCase(),that._popup(),that._tagTemplate(),that._initList(),that._reset(),that._enable(),that._placeholder(),options.autoBind?that.dataSource.fetch():options.value&&that._preselect(options.value),disabled=$(that.element).parents("fieldset").is(":disabled"),disabled&&that.enable(!1),kendo.notify(that)},_preselect:function(data,value){var that=this;isArray(data)||data instanceof kendo.data.ObservableArray||(data=[data]),($.isPlainObject(data[0])||data[0]instanceof kendo.data.ObservableObject||!that.options.dataValueField)&&(that.dataSource.data(data),that.value(value||that._initialValues),that._retrieveData=!0)},options:{name:"MultiSelect",tagMode:"multiple",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:0,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:!1,itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#"},events:[OPEN,CLOSE,CHANGE,SELECT,"filtering","dataBinding","dataBound"],setDataSource:function(dataSource){this.options.dataSource=dataSource,this._dataSource(),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(options){var listOptions=this._listOptions(options);List.fn.setOptions.call(this,options),this._normalizeOptions(listOptions),this.listView.setOptions(listOptions),this._accessors(),this._aria(this.tagList.attr(ID)),this._tagTemplate()},currentTag:function(candidate){var that=this;return candidate===undefined?that._currentTag:(that._currentTag&&(that._currentTag.removeClass(FOCUSEDCLASS).removeAttr(ID),that.input.removeAttr("aria-activedescendant")),candidate&&(candidate.addClass(FOCUSEDCLASS).attr(ID,that._tagID),that.input.attr("aria-activedescendant",that._tagID)),that._currentTag=candidate,void 0)},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var that=this,ns=that.ns;clearTimeout(that._busy),clearTimeout(that._typingTimeout),that.wrapper.off(ns),that.tagList.off(ns),that.input.off(ns),List.fn.destroy.call(that)},_activateItem:function(){List.fn._activateItem.call(this),this.currentTag(null)},_normalizeOptions:function(options){var itemTemplate=this.options.itemTemplate||this.options.template,template=options.itemTemplate||itemTemplate||options.template;template||(template="#:"+kendo.expr(options.dataTextField,"data")+"#"),options.template=template},_initList:function(){var that=this,virtual=that.options.virtual,hasVirtual=!!virtual,listBoundHandler=proxy(that._listBound,that),listOptions={autoBind:!1,selectable:"multiple",dataSource:that.dataSource,click:proxy(that._click,that),change:proxy(that._listChange,that),activate:proxy(that._activateItem,that),deactivate:proxy(that._deactivateItem,that),dataBinding:function(){that.trigger("dataBinding"),that._angularItems("cleanup")},dataBound:listBoundHandler,listBound:listBoundHandler,selectedItemChange:proxy(that._selectedItemChange,that)};listOptions=$.extend(that._listOptions(),listOptions,"object"==typeof virtual?virtual:{}),that._normalizeOptions(listOptions),hasVirtual?that.listView=new kendo.ui.VirtualList(that.ul,listOptions):that.listView=new kendo.ui.StaticList(that.ul,listOptions),that.listView.bind("click",function(e){e.preventDefault()}),that.listView.value(that._initialValues||that.options.value)},_listChange:function(e){this._state===REBIND&&(this._state="",e.added=[]),this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var context,idx,items=e.items;for(idx=0;idx<items.length;idx++)context=items[idx],this.tagList.children().eq(context.index).children("span:first").html(this.tagTextTemplate(context.item))},_wrapperMousedown:function(e){var that=this,notInput="input"!==e.target.nodeName.toLowerCase(),target=$(e.target),closeButton=target.hasClass("k-select")||target.hasClass("k-icon");closeButton&&(closeButton=!target.closest(".k-select").children(".k-i-arrow-s").length),!notInput||closeButton&&kendo.support.mobileOS||e.preventDefault(),closeButton||(that.input[0]!==activeElement()&&notInput&&that.input.focus(),0===that.options.minLength&&that.open())},_inputFocus:function(){this._placeholder(!1),this.wrapper.addClass(FOCUSEDCLASS)},_inputFocusout:function(){var that=this;clearTimeout(that._typingTimeout),that.wrapper.removeClass(FOCUSEDCLASS),that._placeholder(!that.listView.selectedDataItems()[0],!0),that.close(),that._state===FILTER&&(that._state=ACCEPT,that.listView.filter(!1),that.listView.skipUpdate(!0)),that.element.blur()},_removeTag:function(tag){var option,that=this,state=that._state,position=tag.index(),listView=that.listView,value=listView.value()[position],customIndex=that._customOptions[value];customIndex!==undefined||state!==ACCEPT&&state!==FILTER||(customIndex=that._optionsMap[value]),customIndex!==undefined?(option=that.element[0].children[customIndex],option.removeAttribute("selected"),option.selected=!1,listView.removeAt(position),tag.remove()):listView.select(listView.select()[position]),that.currentTag(null),that._change(),that._close()},_tagListClick:function(e){var target=$(e.currentTarget);target.children(".k-i-arrow-s").length||this._removeTag(target.closest(LI))},_editable:function(options){var that=this,disable=options.disable,readonly=options.readonly,wrapper=that.wrapper.off(ns),tagList=that.tagList.off(ns),input=that.element.add(that.input.off(ns));readonly||disable?(disable?wrapper.addClass(STATEDISABLED):wrapper.removeClass(STATEDISABLED),input.attr(DISABLED,disable).attr(READONLY,readonly).attr(ARIA_DISABLED,disable).attr(ARIA_READONLY,readonly)):(wrapper.removeClass(STATEDISABLED).on(HOVEREVENTS,that._toggleHover).on("mousedown"+ns+" touchend"+ns,proxy(that._wrapperMousedown,that)),that.input.on(KEYDOWN,proxy(that._keydown,that)).on("paste"+ns,proxy(that._search,that)).on("focus"+ns,proxy(that._inputFocus,that)).on("focusout"+ns,proxy(that._inputFocusout,that)),input.removeAttr(DISABLED).removeAttr(READONLY).attr(ARIA_DISABLED,!1).attr(ARIA_READONLY,!1),tagList.on(MOUSEENTER,LI,function(){$(this).addClass(HOVERCLASS)}).on(MOUSELEAVE,LI,function(){$(this).removeClass(HOVERCLASS)}).on(CLICK,"li.k-button .k-select",proxy(that._tagListClick,that)))},_close:function(){var that=this;that.options.autoClose?that.close():that.popup.position()},_filterSource:function(filter,force){force||(force=this._retrieveData),this._retrieveData=!1,List.fn._filterSource.call(this,filter,force)},close:function(){this.popup.close()},open:function(){var that=this;that._request&&(that._retrieveData=!1),that._retrieveData||!that.listView.isBound()||that._state===ACCEPT?(that._open=!0,that._state=REBIND,that.listView.filter(!1),that.listView.skipUpdate(!0),that._filterSource()):that._allowSelection()&&(that.popup.open(),that._focusItem())},toggle:function(toggle){toggle=toggle!==undefined?toggle:!this.popup.visible(),this[toggle?OPEN:CLOSE]()},refresh:function(){this.listView.refresh()},_listBound:function(){var that=this,data=that.dataSource.flatView(),page=that.dataSource.page(),length=data.length;that._angularItems("compile"),that._render(data),that._calculateGroupPadding(that._height(length)),that._open&&(that._open=!1,that.toggle(length)),that.popup.position(),!that.options.highlightFirst||page!==undefined&&1!==page||that.listView.focusFirst(),that._touchScroller&&that._touchScroller.reset(),that._hideBusy(),that._makeUnselectable(),that.trigger("dataBound")},search:function(word){var expression,length,that=this,options=that.options,ignoreCase=options.ignoreCase,filter=options.filter,field=options.dataTextField,inputValue=that.input.val();options.placeholder===inputValue&&(inputValue=""),clearTimeout(that._typingTimeout),word="string"==typeof word?word:inputValue,length=word.length,(!length||length>=options.minLength)&&(that.listView.filter(!0),that._state=FILTER,that._open=!0,expression={value:ignoreCase?word.toLowerCase():word,field:field,operator:filter,ignoreCase:ignoreCase},that._filterSource(expression))},value:function(value){var that=this,oldValue=that.listView.value().slice(),maxSelectedItems=that.options.maxSelectedItems;return value===undefined?oldValue:(value=that._normalizeValues(value),null!==maxSelectedItems&&value.length>maxSelectedItems&&(value=value.slice(0,maxSelectedItems)),that.listView.value(value),that._old=value,void that._fetchData())},_setOption:function(value,selected){var option=this.element[0].children[this._optionsMap[value]];option&&(selected?option.setAttribute("selected","selected"):option.removeAttribute("selected"),option.selected=selected)},_fetchData:function(){var that=this,hasItems=!!that.dataSource.view().length,isEmptyArray=0===that.listView.value().length;isEmptyArray||that._request||(that._retrieveData||!that._fetch&&!hasItems)&&(that._fetch=!0,that._retrieveData=!1,that.dataSource.read().done(function(){that._fetch=!1}))},_dataSource:function(){var that=this,element=that.element,options=that.options,dataSource=options.dataSource||{};dataSource=isArray(dataSource)?{data:dataSource}:dataSource,dataSource.select=element,dataSource.fields=[{field:options.dataTextField},{field:options.dataValueField}],that.dataSource&&that._refreshHandler?that._unbindDataSource():that._progressHandler=proxy(that._showBusy,that),that.dataSource=kendo.data.DataSource.create(dataSource).bind(PROGRESS,that._progressHandler)},_reset:function(){var that=this,element=that.element,formId=element.attr("form"),form=formId?$("#"+formId):element.closest("form");form[0]&&(that._resetHandler=function(){setTimeout(function(){that.value(that._initialValues),that._placeholder()})},that._form=form.on("reset",that._resetHandler))},_initValue:function(){var value=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(value)},_normalizeValues:function(value){var that=this;return null===value?value=[]:value&&$.isPlainObject(value)?value=[that._value(value)]:value&&$.isPlainObject(value[0])?value=$.map(value,function(dataItem){return that._value(dataItem)}):isArray(value)||value instanceof ObservableArray||(value=[value]),value},_change:function(){var that=this,value=that.value();compare(value,that._old)||(that._old=value.slice(),that.trigger(CHANGE),that.element.trigger(CHANGE))},_click:function(e){var item=e.item;return this.trigger(SELECT,{item:item})?void this._close():(this._select(item),this._change(),void this._close())},_keydown:function(e){var that=this,key=e.keyCode,tag=that._currentTag,current=that.listView.focus(),hasValue=that.input.val(),isRtl=kendo.support.isRtl(that.wrapper),visible=that.popup.visible();if(key===keys.DOWN){if(e.preventDefault(),!visible)return that.open(),void(current||this.listView.focusFirst());current?(this.listView.focusNext(),this.listView.focus()||this.listView.focusLast()):this.listView.focusFirst()}else if(key===keys.UP)visible&&(current&&this.listView.focusPrev(),this.listView.focus()||that.close()),e.preventDefault();else if(key===keys.LEFT&&!isRtl||key===keys.RIGHT&&isRtl)hasValue||(tag=tag?tag.prev():$(that.tagList[0].lastChild),tag[0]&&that.currentTag(tag));else if(key===keys.RIGHT&&!isRtl||key===keys.LEFT&&isRtl)!hasValue&&tag&&(tag=tag.next(),that.currentTag(tag[0]?tag:null));else if(key===keys.ENTER&&visible){if(current){if(that.trigger(SELECT,{item:current}))return void that._close();that._select(current)}that._change(),that._close(),e.preventDefault()}else key===keys.ESC?(visible?e.preventDefault():that.currentTag(null),that.close()):key===keys.HOME?visible?this.listView.focusFirst():hasValue||(tag=that.tagList[0].firstChild,tag&&that.currentTag($(tag))):key===keys.END?visible?this.listView.focusLast():hasValue||(tag=that.tagList[0].lastChild,tag&&that.currentTag($(tag))):key!==keys.DELETE&&key!==keys.BACKSPACE||hasValue?(clearTimeout(that._typingTimeout),setTimeout(function(){that._scale()}),that._search()):(key!==keys.BACKSPACE||tag||(tag=$(that.tagList[0].lastChild)),tag&&tag[0]&&that._removeTag(tag))},_hideBusy:function(){var that=this;clearTimeout(that._busy),that.input.attr("aria-busy",!1),that._loading.addClass(HIDDENCLASS),that._request=!1,that._busy=null},_showBusyHandler:function(){this.input.attr("aria-busy",!0),this._loading.removeClass(HIDDENCLASS)},_showBusy:function(){var that=this;that._request=!0,that._busy||(that._busy=setTimeout(proxy(that._showBusyHandler,that),100))},_placeholder:function(show,skipCaret){var that=this,input=that.input,active=activeElement();show===undefined&&(show=!1,input[0]!==active&&(show=!that.listView.selectedDataItems()[0])),that._prev="",input.toggleClass("k-readonly",show).val(show?that.options.placeholder:""),input[0]!==active||skipCaret||kendo.caret(input[0],0,0),that._scale()},_scale:function(){var textWidth,that=this,wrapper=that.wrapper,wrapperWidth=wrapper.width(),span=that._span.text(that.input.val());wrapper.is(":visible")?textWidth=span.width()+25:(span.appendTo(document.documentElement),wrapperWidth=textWidth=span.width()+25,span.appendTo(wrapper)),that.input.width(textWidth>wrapperWidth?wrapperWidth:textWidth)},_option:function(dataValue,dataText,selected){var option="<option";return dataValue!==undefined&&(dataValue+="",-1!==dataValue.indexOf('"')&&(dataValue=dataValue.replace(quotRegExp,"&quot;")),option+=' value="'+dataValue+'"'),selected&&(option+=" selected"),option+=">",dataText!==undefined&&(option+=kendo.htmlEncode(dataText)),option+="</option>"},_render:function(data){var selectedIndex,dataItem,value,idx,selectedItems=this.listView.selectedDataItems(),values=this.listView.value(),length=data.length,options="";values.length!==selectedItems.length&&(selectedItems=this._buildSelectedItems(values));var custom={},optionsMap={};for(idx=0;length>idx;idx++)dataItem=data[idx],value=this._value(dataItem),selectedIndex=this._selectedItemIndex(value,selectedItems),-1!==selectedIndex&&selectedItems.splice(selectedIndex,1),optionsMap[value]=idx,options+=this._option(value,this._text(dataItem),-1!==selectedIndex);if(selectedItems.length)for(idx=0;idx<selectedItems.length;idx++)dataItem=selectedItems[idx],value=this._value(dataItem),custom[value]=length,optionsMap[value]=length,length+=1,options+=this._option(value,this._text(dataItem),!0);this._customOptions=custom,this._optionsMap=optionsMap,this.element.html(options)},_buildSelectedItems:function(values){for(var item,valueField=this.options.dataValueField,textField=this.options.dataTextField,result=[],idx=0;idx<values.length;idx++)item={},item[valueField]=values[idx],item[textField]=values[idx],result.push(item);return result},_selectedItemIndex:function(value,selectedItems){for(var valueGetter=this._value,idx=0;idx<selectedItems.length;idx++)if(value===valueGetter(selectedItems[idx]))return idx;return-1},_search:function(){var that=this;that._typingTimeout=setTimeout(function(){var value=that.input.val();that._prev!==value&&(that._prev=value,that.search(value))},that.options.delay)},_allowSelection:function(){var max=this.options.maxSelectedItems;return null===max||max>this.listView.value().length},_angularTagItems:function(cmd){var that=this;that.angular(cmd,function(){return{elements:that.tagList[0].children,data:$.map(that.dataItems(),function(dataItem){return{dataItem:dataItem}})}})},_selectValue:function(added,removed){var removedItem,addedItem,idx,that=this,values=that.value(),total=that.dataSource.total(),tagList=that.tagList,getter=that._value;if(that._angularTagItems("cleanup"),"multiple"===that.options.tagMode){for(idx=removed.length-1;idx>-1;idx--)removedItem=removed[idx],tagList[0].removeChild(tagList[0].children[removedItem.position]),that._setOption(getter(removedItem.dataItem),!1);for(idx=0;idx<added.length;idx++)addedItem=added[idx],tagList.append(that.tagTemplate(addedItem.dataItem)),that._setOption(getter(addedItem.dataItem),!0)}else{for((!that._maxTotal||that._maxTotal<total)&&(that._maxTotal=total),tagList.html(""),values.length&&tagList.append(that.tagTemplate({values:values,dataItems:that.dataItems(),maxTotal:that._maxTotal,currentTotal:total})),idx=removed.length-1;idx>-1;idx--)that._setOption(getter(removed[idx].dataItem),!1);for(idx=0;idx<added.length;idx++)that._setOption(getter(added[idx].dataItem),!0)}that._angularTagItems("compile"),that._placeholder()},_select:function(candidate){var that=this;that._state===REBIND&&(that._state=""),that._allowSelection()&&(this.listView.select(candidate),that._placeholder(),that._state===FILTER&&(that._state=ACCEPT,that.listView.filter(!1),that.listView.skipUpdate(!0)))},_input:function(){var that=this,accessKey=that.element[0].accessKey,input=that._innerWrapper.children("input.k-input");input[0]||(input=$('<input class="k-input" style="width: 25px" />').appendTo(that._innerWrapper)),that.element.removeAttr("accesskey"),that._focused=that.input=input.attr({accesskey:accessKey,autocomplete:"off",role:"listbox","aria-expanded":!1})},_tagList:function(){var that=this,tagList=that._innerWrapper.children("ul");tagList[0]||(tagList=$('<ul role="listbox" unselectable="on" class="k-reset"/>').appendTo(that._innerWrapper)),that.tagList=tagList},_tagTemplate:function(){var defaultTemplate,that=this,options=that.options,tagTemplate=options.tagTemplate,hasDataSource=options.dataSource,isMultiple="multiple"===options.tagMode;that.element[0].length&&!hasDataSource&&(options.dataTextField=options.dataTextField||"text",options.dataValueField=options.dataValueField||"value"),defaultTemplate=isMultiple?kendo.template("#:"+kendo.expr(options.dataTextField,"data")+"#",{useWithBlock:!1}):kendo.template("#:values.length# item(s) selected"),that.tagTextTemplate=tagTemplate=tagTemplate?kendo.template(tagTemplate):defaultTemplate,that.tagTemplate=function(data){return'<li class="k-button" unselectable="on"><span unselectable="on">'+tagTemplate(data)+'</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon '+(isMultiple?"k-i-close":"k-i-arrow-s")+'">'+(isMultiple?"delete":"open")+"</span></span></li>"}},_loader:function(){this._loading=$('<span class="k-icon k-loading '+HIDDENCLASS+'"></span>').insertAfter(this.input)},_textContainer:function(){var computedStyles=kendo.getComputedStyles(this.input[0],styles);computedStyles.position="absolute",computedStyles.visibility="hidden",computedStyles.top=-3333,computedStyles.left=-3333,this._span=$("<span/>").css(computedStyles).appendTo(this.wrapper)},_wrapper:function(){var that=this,element=that.element,wrapper=element.parent("span.k-multiselect");wrapper[0]||(wrapper=element.wrap('<div class="k-widget k-multiselect k-header" unselectable="on" />').parent(),wrapper[0].style.cssText=element[0].style.cssText,wrapper[0].title=element[0].title,$('<div class="k-multiselect-wrap k-floatwrap" unselectable="on" />').insertBefore(element)),that.wrapper=wrapper.addClass(element[0].className).css("display",""),that._innerWrapper=$(wrapper[0].firstChild)}});ui.plugin(MultiSelect)}(window.kendo.jQuery)}()}(),window.kendo},"function"==typeof define&&define.amd?define:function(_,f){f()}),!function(a,b){"use strict";var c=window.angulartics||(window.angulartics={});c.waitForVendorCount=0,c.waitForVendorApi=function(a,b,d,e,f){f||c.waitForVendorCount++,e||(e=d,d=void 0),!Object.prototype.hasOwnProperty.call(window,a)||void 0!==d&&void 0===window[a][d]?setTimeout(function(){c.waitForVendorApi(a,b,d,e,!0)},b):(c.waitForVendorCount--,e(window[a]))},a.module("angulartics",[]).provider("$analytics",function(){var b={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},d=["pageTrack","eventTrack","setAlias","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],e={},f={},g=function(a){return function(){c.waitForVendorCount&&(e[a]||(e[a]=[]),e[a].push(arguments))}},h=function(b,c){return f[b]||(f[b]=[]),f[b].push(c),function(){var c=arguments;a.forEach(f[b],function(a){a.apply(this,c)},this)}},i={settings:b},j=function(a,b){b?setTimeout(a,b):a()},k={$get:function(){return i},api:i,settings:b,virtualPageviews:function(a){this.settings.pageTracking.autoTrackVirtualPages=a},firstPageview:function(a){this.settings.pageTracking.autoTrackFirstPage=a},withBase:function(b){this.settings.pageTracking.basePath=b?a.element(document).find("base").attr("href"):""},withAutoBase:function(a){this.settings.pageTracking.autoBasePath=a},developerMode:function(a){this.settings.developerMode=a}},l=function(c,d){i[c]=h(c,d);var f=b[c],g=f?f.bufferFlushDelay:null,k=null!==g?g:b.bufferFlushDelay;a.forEach(e[c],function(a,b){j(function(){d.apply(this,a)},b*k)})},m=function(a){return a.replace(/^./,function(a){return a.toUpperCase()})},n=function(a){var b="register"+m(a);k[b]=function(b){l(a,b)},i[a]=h(a,g(a))};return a.forEach(d,n),k}).run(["$rootScope","$window","$analytics","$injector",function(b,c,d,e){d.settings.pageTracking.autoTrackFirstPage&&e.invoke(["$location",function(a){var b=!0;if(e.has("$route")){var f=e.get("$route");for(var g in f.routes){b=!1;break}}else if(e.has("$state")){var h=e.get("$state");for(var i in h.get()){b=!1;break}}if(b)if(d.settings.pageTracking.autoBasePath&&(d.settings.pageTracking.basePath=c.location.pathname),d.settings.pageTracking.trackRelativePath){var j=d.settings.pageTracking.basePath+a.url();d.pageTrack(j,a)}else d.pageTrack(a.absUrl(),a)}]),d.settings.pageTracking.autoTrackVirtualPages&&e.invoke(["$location",function(a){d.settings.pageTracking.autoBasePath&&(d.settings.pageTracking.basePath=c.location.pathname+"#"),e.has("$route")&&b.$on("$routeChangeSuccess",function(b,c){if(!c||!(c.$$route||c).redirectTo){var e=d.settings.pageTracking.basePath+a.url();d.pageTrack(e,a)}}),e.has("$state")&&b.$on("$stateChangeSuccess",function(b,c){var e=d.settings.pageTracking.basePath+a.url();d.pageTrack(e,a)})}]),d.settings.developerMode&&a.forEach(d,function(a,b){"function"==typeof a&&(d[b]=function(){})})}]).directive("analyticsOn",["$analytics",function(b){function c(a){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(a.tagName.toLowerCase()+":"+(a.type||""))>=0}function d(a){return c(a),"click"}function e(a){return c(a)?a.innerText||a.value:a.id||a.name||a.tagName}function f(a){return"analytics"===a.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(a.substr(9))}function g(a){var b=a.slice(9);return"undefined"!=typeof b&&null!==b&&b.length>0?b.substring(0,1).toLowerCase()+b.substring(1):b}return{restrict:"A",link:function(c,h,i){var j=i.analyticsOn||d(h[0]),k={};a.forEach(i.$attr,function(a,b){f(b)&&(k[g(b)]=i[b],i.$observe(b,function(a){k[g(b)]=a}))}),a.element(h[0]).bind(j,function(d){var f=i.analyticsEvent||e(h[0]);k.eventType=d.type,(!i.analyticsIf||c.$eval(i.analyticsIf))&&(i.analyticsProperties&&a.extend(k,c.$eval(i.analyticsProperties)),b.eventTrack(f,k))})}}}])}(angular),!function(window,angular,undefined){"use strict";angular.module("angulartics.google.analytics",["angulartics"]).config(["$analyticsProvider",function($analyticsProvider){$analyticsProvider.settings.pageTracking.trackRelativePath=!0,$analyticsProvider.settings.ga={additionalAccountNames:undefined,userId:null},$analyticsProvider.registerPageTrack(function(path){window._gaq&&(_gaq.push(["_trackPageview",path]),angular.forEach($analyticsProvider.settings.ga.additionalAccountNames,function(accountName){_gaq.push([accountName+"._trackPageview",path])})),window.ga&&($analyticsProvider.settings.ga.userId&&ga("set","&uid",$analyticsProvider.settings.ga.userId),ga("send","pageview",path),angular.forEach($analyticsProvider.settings.ga.additionalAccountNames,function(accountName){ga(accountName+".send","pageview",path)}))}),$analyticsProvider.registerEventTrack(function(action,properties){if(properties&&properties.category||(properties=properties||{},properties.category="Event"),properties.value){var parsed=parseInt(properties.value,10);properties.value=isNaN(parsed)?0:parsed}if(window.ga){for(var eventOptions={eventCategory:properties.category,eventAction:action,eventLabel:properties.label,eventValue:properties.value,nonInteraction:properties.noninteraction,page:properties.page||window.location.hash.substring(1)||window.location.pathname,userId:$analyticsProvider.settings.ga.userId},idx=1;20>=idx;idx++)properties["dimension"+idx.toString()]&&(eventOptions["dimension"+idx.toString()]=properties["dimension"+idx.toString()]),properties["metric"+idx.toString()]&&(eventOptions["metric"+idx.toString()]=properties["metric"+idx.toString()]);ga("send","event",eventOptions),angular.forEach($analyticsProvider.settings.ga.additionalAccountNames,function(accountName){ga(accountName+".send","event",eventOptions)})}else window._gaq&&_gaq.push(["_trackEvent",properties.category,action,properties.label,properties.value,properties.noninteraction])}),$analyticsProvider.registerSetUsername(function(userId){$analyticsProvider.settings.ga.userId=userId})}])}(window,window.angular);